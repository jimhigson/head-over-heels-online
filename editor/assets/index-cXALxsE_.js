const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/campaign-3PQJd7A0.js","assets/RoomJson-CYwziHut.js","assets/browserAll-wqG6U6dJ.js","assets/webworkerAll-BZ_VsC8Q.js","assets/Graphics-BmC5xOlo.js","assets/colorToUniform-KTpA7KSL.js","assets/LevelEditor-Cw5IL6Q3.js","assets/levelEditorSlice-C2P-6cwg.js"])))=>i.map(i=>d[i]);
function dT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var n4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pT(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}),t}var If={exports:{}},so={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function gT(){if(Iv)return so;Iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return so.Fragment=e,so.jsx=t,so.jsxs=t,so}var Nv;function yT(){return Nv||(Nv=1,If.exports=gT()),If.exports}var Co=yT(),Nf={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function mT(){if(qv)return Se;qv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(S){return S===null||typeof S!="object"?null:(S=m&&S[m]||S["@@iterator"],typeof S=="function"?S:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function x(S,D,G){this.props=S,this.context=D,this.refs=M,this.updater=G||b}x.prototype.isReactComponent={},x.prototype.setState=function(S,D){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,D,"setState")},x.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function E(){}E.prototype=x.prototype;function C(S,D,G){this.props=S,this.context=D,this.refs=M,this.updater=G||b}var A=C.prototype=new E;A.constructor=C,_(A,x.prototype),A.isPureReactComponent=!0;var k=Array.isArray,z={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function O(S,D,G,$,V,Z){return G=Z.ref,{$$typeof:n,type:S,key:D,ref:G!==void 0?G:null,props:Z}}function B(S,D){return O(S.type,D,void 0,void 0,void 0,S.props)}function j(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function I(S){var D={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(G){return D[G]})}var H=/\/+/g;function Q(S,D){return typeof S=="object"&&S!==null&&S.key!=null?I(""+S.key):D.toString(36)}function te(){}function se(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(te,te):(S.status="pending",S.then(function(D){S.status==="pending"&&(S.status="fulfilled",S.value=D)},function(D){S.status==="pending"&&(S.status="rejected",S.reason=D)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function ae(S,D,G,$,V){var Z=typeof S;(Z==="undefined"||Z==="boolean")&&(S=null);var ne=!1;if(S===null)ne=!0;else switch(Z){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(S.$$typeof){case n:case e:ne=!0;break;case g:return ne=S._init,ae(ne(S._payload),D,G,$,V)}}if(ne)return V=V(S),ne=$===""?"."+Q(S,0):$,k(V)?(G="",ne!=null&&(G=ne.replace(H,"$&/")+"/"),ae(V,D,G,"",function(pe){return pe})):V!=null&&(j(V)&&(V=B(V,G+(V.key==null||S&&S.key===V.key?"":(""+V.key).replace(H,"$&/")+"/")+ne)),D.push(V)),1;ne=0;var le=$===""?".":$+":";if(k(S))for(var oe=0;oe<S.length;oe++)$=S[oe],Z=le+Q($,oe),ne+=ae($,D,G,Z,V);else if(oe=v(S),typeof oe=="function")for(S=oe.call(S),oe=0;!($=S.next()).done;)$=$.value,Z=le+Q($,oe++),ne+=ae($,D,G,Z,V);else if(Z==="object"){if(typeof S.then=="function")return ae(se(S),D,G,$,V);throw D=String(S),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ne}function T(S,D,G){if(S==null)return S;var $=[],V=0;return ae(S,$,"","",function(Z){return D.call(G,Z,V++)}),$}function P(S){if(S._status===-1){var D=S._result;D=D(),D.then(function(G){(S._status===0||S._status===-1)&&(S._status=1,S._result=G)},function(G){(S._status===0||S._status===-1)&&(S._status=2,S._result=G)}),S._status===-1&&(S._status=0,S._result=D)}if(S._status===1)return S._result.default;throw S._result}var L=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function N(){}return Se.Children={map:T,forEach:function(S,D,G){T(S,function(){D.apply(this,arguments)},G)},count:function(S){var D=0;return T(S,function(){D++}),D},toArray:function(S){return T(S,function(D){return D})||[]},only:function(S){if(!j(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Se.Component=x,Se.Fragment=t,Se.Profiler=a,Se.PureComponent=C,Se.StrictMode=i,Se.Suspense=f,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Se.act=function(){throw Error("act(...) is not supported in production builds of React.")},Se.cache=function(S){return function(){return S.apply(null,arguments)}},Se.cloneElement=function(S,D,G){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var $=_({},S.props),V=S.key,Z=void 0;if(D!=null)for(ne in D.ref!==void 0&&(Z=void 0),D.key!==void 0&&(V=""+D.key),D)!U.call(D,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&D.ref===void 0||($[ne]=D[ne]);var ne=arguments.length-2;if(ne===1)$.children=G;else if(1<ne){for(var le=Array(ne),oe=0;oe<ne;oe++)le[oe]=arguments[oe+2];$.children=le}return O(S.type,V,void 0,void 0,Z,$)},Se.createContext=function(S){return S={$$typeof:u,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},Se.createElement=function(S,D,G){var $,V={},Z=null;if(D!=null)for($ in D.key!==void 0&&(Z=""+D.key),D)U.call(D,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(V[$]=D[$]);var ne=arguments.length-2;if(ne===1)V.children=G;else if(1<ne){for(var le=Array(ne),oe=0;oe<ne;oe++)le[oe]=arguments[oe+2];V.children=le}if(S&&S.defaultProps)for($ in ne=S.defaultProps,ne)V[$]===void 0&&(V[$]=ne[$]);return O(S,Z,void 0,void 0,null,V)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(S){return{$$typeof:h,render:S}},Se.isValidElement=j,Se.lazy=function(S){return{$$typeof:g,_payload:{_status:-1,_result:S},_init:P}},Se.memo=function(S,D){return{$$typeof:p,type:S,compare:D===void 0?null:D}},Se.startTransition=function(S){var D=z.T,G={};z.T=G;try{var $=S(),V=z.S;V!==null&&V(G,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(N,L)}catch(Z){L(Z)}finally{z.T=D}},Se.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Se.use=function(S){return z.H.use(S)},Se.useActionState=function(S,D,G){return z.H.useActionState(S,D,G)},Se.useCallback=function(S,D){return z.H.useCallback(S,D)},Se.useContext=function(S){return z.H.useContext(S)},Se.useDebugValue=function(){},Se.useDeferredValue=function(S,D){return z.H.useDeferredValue(S,D)},Se.useEffect=function(S,D){return z.H.useEffect(S,D)},Se.useId=function(){return z.H.useId()},Se.useImperativeHandle=function(S,D,G){return z.H.useImperativeHandle(S,D,G)},Se.useInsertionEffect=function(S,D){return z.H.useInsertionEffect(S,D)},Se.useLayoutEffect=function(S,D){return z.H.useLayoutEffect(S,D)},Se.useMemo=function(S,D){return z.H.useMemo(S,D)},Se.useOptimistic=function(S,D){return z.H.useOptimistic(S,D)},Se.useReducer=function(S,D,G){return z.H.useReducer(S,D,G)},Se.useRef=function(S){return z.H.useRef(S)},Se.useState=function(S){return z.H.useState(S)},Se.useSyncExternalStore=function(S,D,G){return z.H.useSyncExternalStore(S,D,G)},Se.useTransition=function(){return z.H.useTransition()},Se.version="19.0.0",Se}var Gv;function mc(){return Gv||(Gv=1,Nf.exports=mT()),Nf.exports}var de=mc();const vT=Yn(de),r4=dT({__proto__:null,default:vT},[de]);var qf={exports:{}},ao={},Gf={exports:{}},Hf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function bT(){return Hv||(Hv=1,(function(n){function e(T,P){var L=T.length;T.push(P);e:for(;0<L;){var N=L-1>>>1,S=T[N];if(0<a(S,P))T[N]=P,T[L]=S,L=N;else break e}}function t(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var P=T[0],L=T.pop();if(L!==P){T[0]=L;e:for(var N=0,S=T.length,D=S>>>1;N<D;){var G=2*(N+1)-1,$=T[G],V=G+1,Z=T[V];if(0>a($,L))V<S&&0>a(Z,$)?(T[N]=Z,T[V]=L,N=V):(T[N]=$,T[G]=L,N=G);else if(V<S&&0>a(Z,L))T[N]=Z,T[V]=L,N=V;else break e}}return P}function a(T,P){var L=T.sortIndex-P.sortIndex;return L!==0?L:T.id-P.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,m=null,v=3,b=!1,_=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(T){for(var P=t(p);P!==null;){if(P.callback===null)i(p);else if(P.startTime<=T)i(p),P.sortIndex=P.expirationTime,e(f,P);else break;P=t(p)}}function k(T){if(M=!1,A(T),!_)if(t(f)!==null)_=!0,se();else{var P=t(p);P!==null&&ae(k,P.startTime-T)}}var z=!1,U=-1,O=5,B=-1;function j(){return!(n.unstable_now()-B<O)}function I(){if(z){var T=n.unstable_now();B=T;var P=!0;try{e:{_=!1,M&&(M=!1,E(U),U=-1),b=!0;var L=v;try{t:{for(A(T),m=t(f);m!==null&&!(m.expirationTime>T&&j());){var N=m.callback;if(typeof N=="function"){m.callback=null,v=m.priorityLevel;var S=N(m.expirationTime<=T);if(T=n.unstable_now(),typeof S=="function"){m.callback=S,A(T),P=!0;break t}m===t(f)&&i(f),A(T)}else i(f);m=t(f)}if(m!==null)P=!0;else{var D=t(p);D!==null&&ae(k,D.startTime-T),P=!1}}break e}finally{m=null,v=L,b=!1}P=void 0}}finally{P?H():z=!1}}}var H;if(typeof C=="function")H=function(){C(I)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,te=Q.port2;Q.port1.onmessage=I,H=function(){te.postMessage(null)}}else H=function(){x(I,0)};function se(){z||(z=!0,H())}function ae(T,P){U=x(function(){T(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(T){T.callback=null},n.unstable_continueExecution=function(){_||b||(_=!0,se())},n.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<T?Math.floor(1e3/T):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(T){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var L=v;v=P;try{return T()}finally{v=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=v;v=T;try{return P()}finally{v=L}},n.unstable_scheduleCallback=function(T,P,L){var N=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,T){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=L+S,T={id:g++,callback:P,priorityLevel:T,startTime:L,expirationTime:S,sortIndex:-1},L>N?(T.sortIndex=L,e(p,T),t(f)===null&&T===t(p)&&(M?(E(U),U=-1):M=!0,ae(k,L-N))):(T.sortIndex=S,e(f,T),_||b||(_=!0,se())),T},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(T){var P=v;return function(){var L=v;v=P;try{return T.apply(this,arguments)}finally{v=L}}}})(Hf)),Hf}var $v;function _T(){return $v||($v=1,Gf.exports=bT()),Gf.exports}var $f={exports:{}},Pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function wT(){if(Fv)return Pt;Fv=1;var n=mc();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:p,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Pt.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,g)},Pt.flushSync=function(f){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=p,i.p=g,i.d.f()}},Pt.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},Pt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Pt.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,m=h(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:b}):g==="script"&&i.d.X(f,{crossOrigin:m,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Pt.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},Pt.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,m=h(g,p.crossOrigin);i.d.L(f,g,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Pt.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},Pt.requestFormReset=function(f){i.d.r(f)},Pt.unstable_batchedUpdates=function(f,p){return f(p)},Pt.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},Pt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pt.version="19.0.0",Pt}var Vv;function xT(){if(Vv)return $f.exports;Vv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$f.exports=wT(),$f.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function ST(){if(Yv)return ao;Yv=1;var n=_T(),e=mc(),t=xT();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),b=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),k=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function B(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case p:return"StrictMode";case M:return"Suspense";case x:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case b:return(r.displayName||"Context")+".Provider";case v:return(r._context.displayName||"Context")+".Consumer";case _:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case E:return s=r.displayName||null,s!==null?s:B(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return B(r(s))}catch{}}return null}var j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,H,Q;function te(r){if(H===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);H=s&&s[1]||"",Q=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+r+Q}var se=!1;function ae(r,s){if(!r||se)return"";se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var K=J}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(J){K=J}r.call(ie.prototype)}}else{try{throw Error()}catch(J){K=J}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],R=y[1];if(w&&R){var q=w.split(`
`),Y=R.split(`
`);for(d=c=0;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(c===q.length||d===Y.length)for(c=q.length-1,d=Y.length-1;1<=c&&0<=d&&q[c]!==Y[d];)d--;for(;1<=c&&0<=d;c--,d--)if(q[c]!==Y[d]){if(c!==1||d!==1)do if(c--,d--,0>d||q[c]!==Y[d]){var ee=`
`+q[c].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=c&&0<=d);break}}}finally{se=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?te(o):""}function T(r){switch(r.tag){case 26:case 27:case 5:return te(r.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return r=ae(r.type,!1),r;case 11:return r=ae(r.type.render,!1),r;case 1:return r=ae(r.type,!0),r;default:return""}}function P(r){try{var s="";do s+=T(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function L(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function N(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function S(r){if(L(r)!==r)throw Error(i(188))}function D(r){var s=r.alternate;if(!s){if(s=L(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var d=o.return;if(d===null)break;var y=d.alternate;if(y===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===o)return S(d),r;if(y===c)return S(d),s;y=y.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=y;else{for(var w=!1,R=d.child;R;){if(R===o){w=!0,o=d,c=y;break}if(R===c){w=!0,c=d,o=y;break}R=R.sibling}if(!w){for(R=y.child;R;){if(R===o){w=!0,o=y,c=d;break}if(R===c){w=!0,c=y,o=d;break}R=R.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function G(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=G(r),s!==null)return s;r=r.sibling}return null}var $=Array.isArray,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ne=[],le=-1;function oe(r){return{current:r}}function pe(r){0>le||(r.current=ne[le],ne[le]=null,le--)}function he(r,s){le++,ne[le]=r.current,r.current=s}var $e=oe(null),Fe=oe(null),nt=oe(null),pt=oe(null);function _e(r,s){switch(he(nt,s),he(Fe,r),he($e,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?pv(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=pv(r),s=gv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}pe($e),he($e,s)}function Ae(){pe($e),pe(Fe),pe(nt)}function Yi(r){r.memoizedState!==null&&he(pt,r);var s=$e.current,o=gv(s,r.type);s!==o&&(he(Fe,r),he($e,o))}function Xi(r){Fe.current===r&&(pe($e),pe(Fe)),pt.current===r&&(pe(pt),eo._currentValue=Z)}var ll=Object.prototype.hasOwnProperty,Oc=n.unstable_scheduleCallback,Pc=n.unstable_cancelCallback,FS=n.unstable_shouldYield,VS=n.unstable_requestPaint,zn=n.unstable_now,YS=n.unstable_getCurrentPriorityLevel,ry=n.unstable_ImmediatePriority,iy=n.unstable_UserBlockingPriority,ul=n.unstable_NormalPriority,XS=n.unstable_LowPriority,sy=n.unstable_IdlePriority,WS=n.log,QS=n.unstable_setDisableYieldValue,ua=null,Wt=null;function KS(r){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ua,r,void 0,(r.current.flags&128)===128)}catch{}}function Sr(r){if(typeof WS=="function"&&QS(r),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(ua,r)}catch{}}var Qt=Math.clz32?Math.clz32:eA,ZS=Math.log,JS=Math.LN2;function eA(r){return r>>>=0,r===0?32:31-(ZS(r)/JS|0)|0}var cl=128,hl=4194304;function ri(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function fl(r,s){var o=r.pendingLanes;if(o===0)return 0;var c=0,d=r.suspendedLanes,y=r.pingedLanes,w=r.warmLanes;r=r.finishedLanes!==0;var R=o&134217727;return R!==0?(o=R&~d,o!==0?c=ri(o):(y&=R,y!==0?c=ri(y):r||(w=R&~w,w!==0&&(c=ri(w))))):(R=o&~d,R!==0?c=ri(R):y!==0?c=ri(y):r||(w=o&~w,w!==0&&(c=ri(w)))),c===0?0:s!==0&&s!==c&&(s&d)===0&&(d=c&-c,w=s&-s,d>=w||d===32&&(w&4194176)!==0)?s:c}function ca(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function tA(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ay(){var r=cl;return cl<<=1,(cl&4194176)===0&&(cl=128),r}function oy(){var r=hl;return hl<<=1,(hl&62914560)===0&&(hl=4194304),r}function Dc(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ha(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function nA(r,s,o,c,d,y){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,q=r.expirationTimes,Y=r.hiddenUpdates;for(o=w&~o;0<o;){var ee=31-Qt(o),ie=1<<ee;R[ee]=0,q[ee]=-1;var K=Y[ee];if(K!==null)for(Y[ee]=null,ee=0;ee<K.length;ee++){var J=K[ee];J!==null&&(J.lane&=-536870913)}o&=~ie}c!==0&&ly(r,c,0),y!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=y&~(w&~s))}function ly(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Qt(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194218}function uy(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-Qt(o),d=1<<c;d&s|r[c]&s&&(r[c]|=s),o&=~d}}function cy(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function hy(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:Dv(r.type))}function rA(r,s){var o=V.p;try{return V.p=r,s()}finally{V.p=o}}var Ar=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ar,Gt="__reactProps$"+Ar,Wi="__reactContainer$"+Ar,Bc="__reactEvents$"+Ar,iA="__reactListeners$"+Ar,sA="__reactHandles$"+Ar,fy="__reactResources$"+Ar,fa="__reactMarker$"+Ar;function jc(r){delete r[Rt],delete r[Gt],delete r[Bc],delete r[iA],delete r[sA]}function ii(r){var s=r[Rt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Wi]||o[Rt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=vv(r);r!==null;){if(o=r[Rt])return o;r=vv(r)}return s}r=o,o=r.parentNode}return null}function Qi(r){if(r=r[Rt]||r[Wi]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function da(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ki(r){var s=r[fy];return s||(s=r[fy]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function gt(r){r[fa]=!0}var dy=new Set,py={};function si(r,s){Zi(r,s),Zi(r+"Capture",s)}function Zi(r,s){for(py[r]=s,r=0;r<s.length;r++)dy.add(s[r])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gy={},yy={};function oA(r){return ll.call(yy,r)?!0:ll.call(gy,r)?!1:aA.test(r)?yy[r]=!0:(gy[r]=!0,!1)}function dl(r,s,o){if(oA(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pl(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Kn(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function my(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lA(r){var s=my(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,y=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function gl(r){r._valueTracker||(r._valueTracker=lA(r))}function vy(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=my(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function yl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var uA=/[\n"\\]/g;function cn(r){return r.replace(uA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zc(r,s,o,c,d,y,w,R){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+un(s)):r.value!==""+un(s)&&(r.value=""+un(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?Uc(r,w,un(s)):o!=null?Uc(r,w,un(o)):c!=null&&r.removeAttribute("value"),d==null&&y!=null&&(r.defaultChecked=!!y),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+un(R):r.removeAttribute("name")}function by(r,s,o,c,d,y,w,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;o=o!=null?""+un(o):"",s=s!=null?""+un(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=R?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function Uc(r,s,o){s==="number"&&yl(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ji(r,s,o,c){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&c&&(r[o].defaultSelected=!0)}else{for(o=""+un(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function _y(r,s,o){if(s!=null&&(s=""+un(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+un(o):""}function wy(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if($(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=un(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function es(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var cA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xy(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||cA.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Sy(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&o[d]!==c&&xy(r,d,c)}else for(var y in s)s.hasOwnProperty(y)&&xy(r,y,s[y])}function Lc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(r){return fA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ic=null;function Nc(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ts=null,ns=null;function Ay(r){var s=Qi(r);if(s&&(r=s.stateNode)){var o=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(zc(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+cn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var d=c[Gt]||null;if(!d)throw Error(i(90));zc(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&vy(c)}break e;case"textarea":_y(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ji(r,!!o.multiple,s,!1)}}}var qc=!1;function Ey(r,s,o){if(qc)return r(s,o);qc=!0;try{var c=r(s);return c}finally{if(qc=!1,(ts!==null||ns!==null)&&(eu(),ts&&(s=ts,r=ns,ns=ts=null,Ay(s),r)))for(s=0;s<r.length;s++)Ay(r[s])}}function pa(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Gt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Gc=!1;if(Qn)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{Gc=!1}var Er=null,Hc=null,vl=null;function Ty(){if(vl)return vl;var r,s=Hc,o=s.length,c,d="value"in Er?Er.value:Er.textContent,y=d.length;for(r=0;r<o&&s[r]===d[r];r++);var w=o-r;for(c=1;c<=w&&s[o-c]===d[y-c];c++);return vl=d.slice(r,1<c?1-c:void 0)}function bl(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function _l(){return!0}function My(){return!1}function Ht(r){function s(o,c,d,y,w){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?_l:My,this.isPropagationStopped=My,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),s}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=Ht(ai),ya=I({},ai,{view:0,detail:0}),dA=Ht(ya),$c,Fc,ma,xl=I({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ma&&(ma&&r.type==="mousemove"?($c=r.screenX-ma.screenX,Fc=r.screenY-ma.screenY):Fc=$c=0,ma=r),$c)},movementY:function(r){return"movementY"in r?r.movementY:Fc}}),ky=Ht(xl),pA=I({},xl,{dataTransfer:0}),gA=Ht(pA),yA=I({},ya,{relatedTarget:0}),Vc=Ht(yA),mA=I({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),vA=Ht(mA),bA=I({},ai,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_A=Ht(bA),wA=I({},ai,{data:0}),Cy=Ht(wA),xA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=AA[r])?!!s[r]:!1}function Yc(){return EA}var TA=I({},ya,{key:function(r){if(r.key){var s=xA[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=bl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?SA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(r){return r.type==="keypress"?bl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?bl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),MA=Ht(TA),kA=I({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=Ht(kA),CA=I({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),RA=Ht(CA),OA=I({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),PA=Ht(OA),DA=I({},xl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),BA=Ht(DA),jA=I({},ai,{newState:0,oldState:0}),zA=Ht(jA),UA=[9,13,27,32],Xc=Qn&&"CompositionEvent"in window,va=null;Qn&&"documentMode"in document&&(va=document.documentMode);var LA=Qn&&"TextEvent"in window&&!va,Oy=Qn&&(!Xc||va&&8<va&&11>=va),Py=" ",Dy=!1;function By(r,s){switch(r){case"keyup":return UA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jy(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rs=!1;function IA(r,s){switch(r){case"compositionend":return jy(s);case"keypress":return s.which!==32?null:(Dy=!0,Py);case"textInput":return r=s.data,r===Py&&Dy?null:r;default:return null}}function NA(r,s){if(rs)return r==="compositionend"||!Xc&&By(r,s)?(r=Ty(),vl=Hc=Er=null,rs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Oy&&s.locale!=="ko"?null:s.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!qA[r.type]:s==="textarea"}function Uy(r,s,o,c){ts?ns?ns.push(c):ns=[c]:ts=c,s=su(s,"onChange"),0<s.length&&(o=new wl("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var ba=null,_a=null;function GA(r){uv(r,0)}function Sl(r){var s=da(r);if(vy(s))return r}function Ly(r,s){if(r==="change")return s}var Iy=!1;if(Qn){var Wc;if(Qn){var Qc="oninput"in document;if(!Qc){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),Qc=typeof Ny.oninput=="function"}Wc=Qc}else Wc=!1;Iy=Wc&&(!document.documentMode||9<document.documentMode)}function qy(){ba&&(ba.detachEvent("onpropertychange",Gy),_a=ba=null)}function Gy(r){if(r.propertyName==="value"&&Sl(_a)){var s=[];Uy(s,_a,r,Nc(r)),Ey(GA,s)}}function HA(r,s,o){r==="focusin"?(qy(),ba=s,_a=o,ba.attachEvent("onpropertychange",Gy)):r==="focusout"&&qy()}function $A(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sl(_a)}function FA(r,s){if(r==="click")return Sl(s)}function VA(r,s){if(r==="input"||r==="change")return Sl(s)}function YA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Kt=typeof Object.is=="function"?Object.is:YA;function wa(r,s){if(Kt(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!ll.call(s,d)||!Kt(r[d],s[d]))return!1}return!0}function Hy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $y(r,s){var o=Hy(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Hy(o)}}function Fy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Vy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=yl(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=yl(r.document)}return s}function Kc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function XA(r,s){var o=Vy(s);s=r.focusedElem;var c=r.selectionRange;if(o!==s&&s&&s.ownerDocument&&Fy(s.ownerDocument.documentElement,s)){if(c!==null&&Kc(s)){if(r=c.start,o=c.end,o===void 0&&(o=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(o,s.value.length);else if(o=(r=s.ownerDocument||document)&&r.defaultView||window,o.getSelection){o=o.getSelection();var d=s.textContent.length,y=Math.min(c.start,d);c=c.end===void 0?y:Math.min(c.end,d),!o.extend&&y>c&&(d=c,c=y,y=d),d=$y(s,y);var w=$y(s,c);d&&w&&(o.rangeCount!==1||o.anchorNode!==d.node||o.anchorOffset!==d.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),o.removeAllRanges(),y>c?(o.addRange(r),o.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),o.addRange(r)))}}for(r=[],o=s;o=o.parentNode;)o.nodeType===1&&r.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)o=r[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var WA=Qn&&"documentMode"in document&&11>=document.documentMode,is=null,Zc=null,xa=null,Jc=!1;function Yy(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jc||is==null||is!==yl(c)||(c=is,"selectionStart"in c&&Kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xa&&wa(xa,c)||(xa=c,c=su(Zc,"onSelect"),0<c.length&&(s=new wl("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=is)))}function oi(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ss={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},eh={},Xy={};Qn&&(Xy=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function li(r){if(eh[r])return eh[r];if(!ss[r])return r;var s=ss[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Xy)return eh[r]=s[o];return r}var Wy=li("animationend"),Qy=li("animationiteration"),Ky=li("animationstart"),QA=li("transitionrun"),KA=li("transitionstart"),ZA=li("transitioncancel"),Zy=li("transitionend"),Jy=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function An(r,s){Jy.set(r,s),si(s,[r])}var hn=[],as=0,th=0;function Al(){for(var r=as,s=th=as=0;s<r;){var o=hn[s];hn[s++]=null;var c=hn[s];hn[s++]=null;var d=hn[s];hn[s++]=null;var y=hn[s];if(hn[s++]=null,c!==null&&d!==null){var w=c.pending;w===null?d.next=d:(d.next=w.next,w.next=d),c.pending=d}y!==0&&tm(o,d,y)}}function El(r,s,o,c){hn[as++]=r,hn[as++]=s,hn[as++]=o,hn[as++]=c,th|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function nh(r,s,o,c){return El(r,s,o,c),Tl(r)}function Tr(r,s){return El(r,null,null,s),Tl(r)}function tm(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var d=!1,y=r.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(d=!0)),r=y,y=y.return;d&&s!==null&&r.tag===3&&(y=r.stateNode,d=31-Qt(o),y=y.hiddenUpdates,r=y[d],r===null?y[d]=[s]:r.push(s),s.lane=o|536870912)}function Tl(r){if(50<Ya)throw Ya=0,uf=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var os={},nm=new WeakMap;function fn(r,s){if(typeof r=="object"&&r!==null){var o=nm.get(r);return o!==void 0?o:(s={value:r,source:s,stack:P(s)},nm.set(r,s),s)}return{value:r,source:s,stack:P(s)}}var ls=[],us=0,Ml=null,kl=0,dn=[],pn=0,ui=null,Zn=1,Jn="";function ci(r,s){ls[us++]=kl,ls[us++]=Ml,Ml=r,kl=s}function rm(r,s,o){dn[pn++]=Zn,dn[pn++]=Jn,dn[pn++]=ui,ui=r;var c=Zn;r=Jn;var d=32-Qt(c)-1;c&=~(1<<d),o+=1;var y=32-Qt(s)+d;if(30<y){var w=d-d%5;y=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Zn=1<<32-Qt(s)+d|o<<d|c,Jn=y+r}else Zn=1<<y|o<<d|c,Jn=r}function rh(r){r.return!==null&&(ci(r,1),rm(r,1,0))}function ih(r){for(;r===Ml;)Ml=ls[--us],ls[us]=null,kl=ls[--us],ls[us]=null;for(;r===ui;)ui=dn[--pn],dn[pn]=null,Jn=dn[--pn],dn[pn]=null,Zn=dn[--pn],dn[pn]=null}var Lt=null,St=null,ze=!1,En=null,Un=!1,sh=Error(i(519));function hi(r){var s=Error(i(418,""));throw Ea(fn(s,r)),sh}function im(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Rt]=r,s[Gt]=c,o){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(o=0;o<Wa.length;o++)Oe(Wa[o],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),by(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),gl(s);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),wy(s,c.value,c.defaultValue,c.children),gl(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||dv(s.textContent,o)?(c.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),c.onScroll!=null&&Oe("scroll",s),c.onScrollEnd!=null&&Oe("scrollend",s),c.onClick!=null&&(s.onclick=au),s=!0):s=!1,s||hi(r)}function sm(r){for(Lt=r.return;Lt;)switch(Lt.tag){case 3:case 27:Un=!0;return;case 5:case 13:Un=!1;return;default:Lt=Lt.return}}function Sa(r){if(r!==Lt)return!1;if(!ze)return sm(r),ze=!0,!1;var s=!1,o;if((o=r.tag!==3&&r.tag!==27)&&((o=r.tag===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Tf(r.type,r.memoizedProps)),o=!o),o&&(s=!0),s&&St&&hi(r),sm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){St=Mn(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}St=null}}else St=Lt?Mn(r.stateNode.nextSibling):null;return!0}function Aa(){St=Lt=null,ze=!1}function Ea(r){En===null?En=[r]:En.push(r)}var Ta=Error(i(460)),am=Error(i(474)),ah={then:function(){}};function om(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Cl(){}function lm(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Cl,Cl),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Ta?Error(i(483)):r;default:if(typeof s.status=="string")s.then(Cl,Cl);else{if(r=qe,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===Ta?Error(i(483)):r}throw Ma=s,Ta}}var Ma=null;function um(){if(Ma===null)throw Error(i(459));var r=Ma;return Ma=null,r}var cs=null,ka=0;function Rl(r){var s=ka;return ka+=1,cs===null&&(cs=[]),lm(cs,r,s)}function Ca(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ol(r,s){throw s.$$typeof===l?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function cm(r){var s=r._init;return s(r._payload)}function hm(r){function s(X,F){if(r){var W=X.deletions;W===null?(X.deletions=[F],X.flags|=16):W.push(F)}}function o(X,F){if(!r)return null;for(;F!==null;)s(X,F),F=F.sibling;return null}function c(X){for(var F=new Map;X!==null;)X.key!==null?F.set(X.key,X):F.set(X.index,X),X=X.sibling;return F}function d(X,F){return X=Lr(X,F),X.index=0,X.sibling=null,X}function y(X,F,W){return X.index=W,r?(W=X.alternate,W!==null?(W=W.index,W<F?(X.flags|=33554434,F):W):(X.flags|=33554434,F)):(X.flags|=1048576,F)}function w(X){return r&&X.alternate===null&&(X.flags|=33554434),X}function R(X,F,W,re){return F===null||F.tag!==6?(F=ef(W,X.mode,re),F.return=X,F):(F=d(F,W),F.return=X,F)}function q(X,F,W,re){var fe=W.type;return fe===f?ee(X,F,W.props.children,re,W.key):F!==null&&(F.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&cm(fe)===F.type)?(F=d(F,W.props),Ca(F,W),F.return=X,F):(F=Wl(W.type,W.key,W.props,null,X.mode,re),Ca(F,W),F.return=X,F)}function Y(X,F,W,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=tf(W,X.mode,re),F.return=X,F):(F=d(F,W.children||[]),F.return=X,F)}function ee(X,F,W,re,fe){return F===null||F.tag!==7?(F=wi(W,X.mode,re,fe),F.return=X,F):(F=d(F,W),F.return=X,F)}function ie(X,F,W){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ef(""+F,X.mode,W),F.return=X,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case u:return W=Wl(F.type,F.key,F.props,null,X.mode,W),Ca(W,F),W.return=X,W;case h:return F=tf(F,X.mode,W),F.return=X,F;case C:var re=F._init;return F=re(F._payload),ie(X,F,W)}if($(F)||U(F))return F=wi(F,X.mode,W,null),F.return=X,F;if(typeof F.then=="function")return ie(X,Rl(F),W);if(F.$$typeof===b)return ie(X,Vl(X,F),W);Ol(X,F)}return null}function K(X,F,W,re){var fe=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return fe!==null?null:R(X,F,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case u:return W.key===fe?q(X,F,W,re):null;case h:return W.key===fe?Y(X,F,W,re):null;case C:return fe=W._init,W=fe(W._payload),K(X,F,W,re)}if($(W)||U(W))return fe!==null?null:ee(X,F,W,re,null);if(typeof W.then=="function")return K(X,F,Rl(W),re);if(W.$$typeof===b)return K(X,F,Vl(X,W),re);Ol(X,W)}return null}function J(X,F,W,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return X=X.get(W)||null,R(F,X,""+re,fe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case u:return X=X.get(re.key===null?W:re.key)||null,q(F,X,re,fe);case h:return X=X.get(re.key===null?W:re.key)||null,Y(F,X,re,fe);case C:var Te=re._init;return re=Te(re._payload),J(X,F,W,re,fe)}if($(re)||U(re))return X=X.get(W)||null,ee(F,X,re,fe,null);if(typeof re.then=="function")return J(X,F,W,Rl(re),fe);if(re.$$typeof===b)return J(X,F,W,Vl(F,re),fe);Ol(F,re)}return null}function ge(X,F,W,re){for(var fe=null,Te=null,me=F,ve=F=0,vt=null;me!==null&&ve<W.length;ve++){me.index>ve?(vt=me,me=null):vt=me.sibling;var Ue=K(X,me,W[ve],re);if(Ue===null){me===null&&(me=vt);break}r&&me&&Ue.alternate===null&&s(X,me),F=y(Ue,F,ve),Te===null?fe=Ue:Te.sibling=Ue,Te=Ue,me=vt}if(ve===W.length)return o(X,me),ze&&ci(X,ve),fe;if(me===null){for(;ve<W.length;ve++)me=ie(X,W[ve],re),me!==null&&(F=y(me,F,ve),Te===null?fe=me:Te.sibling=me,Te=me);return ze&&ci(X,ve),fe}for(me=c(me);ve<W.length;ve++)vt=J(me,X,ve,W[ve],re),vt!==null&&(r&&vt.alternate!==null&&me.delete(vt.key===null?ve:vt.key),F=y(vt,F,ve),Te===null?fe=vt:Te.sibling=vt,Te=vt);return r&&me.forEach(function(Fr){return s(X,Fr)}),ze&&ci(X,ve),fe}function we(X,F,W,re){if(W==null)throw Error(i(151));for(var fe=null,Te=null,me=F,ve=F=0,vt=null,Ue=W.next();me!==null&&!Ue.done;ve++,Ue=W.next()){me.index>ve?(vt=me,me=null):vt=me.sibling;var Fr=K(X,me,Ue.value,re);if(Fr===null){me===null&&(me=vt);break}r&&me&&Fr.alternate===null&&s(X,me),F=y(Fr,F,ve),Te===null?fe=Fr:Te.sibling=Fr,Te=Fr,me=vt}if(Ue.done)return o(X,me),ze&&ci(X,ve),fe;if(me===null){for(;!Ue.done;ve++,Ue=W.next())Ue=ie(X,Ue.value,re),Ue!==null&&(F=y(Ue,F,ve),Te===null?fe=Ue:Te.sibling=Ue,Te=Ue);return ze&&ci(X,ve),fe}for(me=c(me);!Ue.done;ve++,Ue=W.next())Ue=J(me,X,ve,Ue.value,re),Ue!==null&&(r&&Ue.alternate!==null&&me.delete(Ue.key===null?ve:Ue.key),F=y(Ue,F,ve),Te===null?fe=Ue:Te.sibling=Ue,Te=Ue);return r&&me.forEach(function(fT){return s(X,fT)}),ze&&ci(X,ve),fe}function Ze(X,F,W,re){if(typeof W=="object"&&W!==null&&W.type===f&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case u:e:{for(var fe=W.key;F!==null;){if(F.key===fe){if(fe=W.type,fe===f){if(F.tag===7){o(X,F.sibling),re=d(F,W.props.children),re.return=X,X=re;break e}}else if(F.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&cm(fe)===F.type){o(X,F.sibling),re=d(F,W.props),Ca(re,W),re.return=X,X=re;break e}o(X,F);break}else s(X,F);F=F.sibling}W.type===f?(re=wi(W.props.children,X.mode,re,W.key),re.return=X,X=re):(re=Wl(W.type,W.key,W.props,null,X.mode,re),Ca(re,W),re.return=X,X=re)}return w(X);case h:e:{for(fe=W.key;F!==null;){if(F.key===fe)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){o(X,F.sibling),re=d(F,W.children||[]),re.return=X,X=re;break e}else{o(X,F);break}else s(X,F);F=F.sibling}re=tf(W,X.mode,re),re.return=X,X=re}return w(X);case C:return fe=W._init,W=fe(W._payload),Ze(X,F,W,re)}if($(W))return ge(X,F,W,re);if(U(W)){if(fe=U(W),typeof fe!="function")throw Error(i(150));return W=fe.call(W),we(X,F,W,re)}if(typeof W.then=="function")return Ze(X,F,Rl(W),re);if(W.$$typeof===b)return Ze(X,F,Vl(X,W),re);Ol(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,F!==null&&F.tag===6?(o(X,F.sibling),re=d(F,W),re.return=X,X=re):(o(X,F),re=ef(W,X.mode,re),re.return=X,X=re),w(X)):o(X,F)}return function(X,F,W,re){try{ka=0;var fe=Ze(X,F,W,re);return cs=null,fe}catch(me){if(me===Ta)throw me;var Te=vn(29,me,null,X.mode);return Te.lanes=re,Te.return=X,Te}finally{}}}var fi=hm(!0),fm=hm(!1),hs=oe(null),Pl=oe(0);function dm(r,s){r=cr,he(Pl,r),he(hs,s),cr=r|s.baseLanes}function oh(){he(Pl,cr),he(hs,hs.current)}function lh(){cr=Pl.current,pe(hs),pe(Pl)}var gn=oe(null),Ln=null;function Mr(r){var s=r.alternate;he(ct,ct.current&1),he(gn,r),Ln===null&&(s===null||hs.current!==null||s.memoizedState!==null)&&(Ln=r)}function pm(r){if(r.tag===22){if(he(ct,ct.current),he(gn,r),Ln===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Ln=r)}}else kr()}function kr(){he(ct,ct.current),he(gn,gn.current)}function er(r){pe(gn),Ln===r&&(Ln=null),pe(ct)}var ct=oe(0);function Dl(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var JA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},eE=n.unstable_scheduleCallback,tE=n.unstable_NormalPriority,ht={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new JA,data:new Map,refCount:0}}function Ra(r){r.refCount--,r.refCount===0&&eE(tE,function(){r.controller.abort()})}var Oa=null,ch=0,fs=0,ds=null;function nE(r,s){if(Oa===null){var o=Oa=[];ch=0,fs=mf(),ds={status:"pending",value:void 0,then:function(c){o.push(c)}}}return ch++,s.then(gm,gm),s}function gm(){if(--ch===0&&Oa!==null){ds!==null&&(ds.status="fulfilled");var r=Oa;Oa=null,fs=0,ds=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function rE(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var ym=j.S;j.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&nE(r,s),ym!==null&&ym(r,s)};var di=oe(null);function hh(){var r=di.current;return r!==null?r:qe.pooledCache}function Bl(r,s){s===null?he(di,di.current):he(di,s.pool)}function mm(){var r=hh();return r===null?null:{parent:ht._currentValue,pool:r}}var Cr=0,Ee=null,Le=null,st=null,jl=!1,ps=!1,pi=!1,zl=0,Pa=0,gs=null,iE=0;function rt(){throw Error(i(321))}function fh(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Kt(r[o],s[o]))return!1;return!0}function dh(r,s,o,c,d,y){return Cr=y,Ee=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=r===null||r.memoizedState===null?gi:Rr,pi=!1,y=o(c,d),pi=!1,ps&&(y=bm(s,o,c,d)),vm(r),y}function vm(r){j.H=In;var s=Le!==null&&Le.next!==null;if(Cr=0,st=Le=Ee=null,jl=!1,Pa=0,gs=null,s)throw Error(i(300));r===null||yt||(r=r.dependencies,r!==null&&Fl(r)&&(yt=!0))}function bm(r,s,o,c){Ee=r;var d=0;do{if(ps&&(gs=null),Pa=0,ps=!1,25<=d)throw Error(i(301));if(d+=1,st=Le=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}j.H=yi,y=s(o,c)}while(ps);return y}function sE(){var r=j.H,s=r.useState()[0];return s=typeof s.then=="function"?Da(s):s,r=r.useState()[0],(Le!==null?Le.memoizedState:null)!==r&&(Ee.flags|=1024),s}function ph(){var r=zl!==0;return zl=0,r}function gh(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function yh(r){if(jl){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jl=!1}Cr=0,st=Le=Ee=null,ps=!1,Pa=zl=0,gs=null}function $t(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ee.memoizedState=st=r:st=st.next=r,st}function at(){if(Le===null){var r=Ee.alternate;r=r!==null?r.memoizedState:null}else r=Le.next;var s=st===null?Ee.memoizedState:st.next;if(s!==null)st=s,Le=r;else{if(r===null)throw Ee.alternate===null?Error(i(467)):Error(i(310));Le=r,r={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},st===null?Ee.memoizedState=st=r:st=st.next=r}return st}var Ul;Ul=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Da(r){var s=Pa;return Pa+=1,gs===null&&(gs=[]),r=lm(gs,r,s),s=Ee,(st===null?s.memoizedState:st.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?gi:Rr),r}function Ll(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Da(r);if(r.$$typeof===b)return Ot(r)}throw Error(i(438,String(r)))}function mh(r){var s=null,o=Ee.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Ee.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ul(),Ee.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=k;return s.index++,o}function tr(r,s){return typeof s=="function"?s(r):s}function Il(r){var s=at();return vh(s,Le,r)}function vh(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=r.baseQueue,y=c.pending;if(y!==null){if(d!==null){var w=d.next;d.next=y.next,y.next=w}s.baseQueue=d=y,c.pending=null}if(y=r.baseState,d===null)r.memoizedState=y;else{s=d.next;var R=w=null,q=null,Y=s,ee=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Be&ie)===ie:(Cr&ie)===ie){var K=Y.revertLane;if(K===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===fs&&(ee=!0);else if((Cr&K)===K){Y=Y.next,K===fs&&(ee=!0);continue}else ie={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},q===null?(R=q=ie,w=y):q=q.next=ie,Ee.lanes|=K,Ir|=K;ie=Y.action,pi&&o(y,ie),y=Y.hasEagerState?Y.eagerState:o(y,ie)}else K={lane:ie,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},q===null?(R=q=K,w=y):q=q.next=K,Ee.lanes|=ie,Ir|=ie;Y=Y.next}while(Y!==null&&Y!==s);if(q===null?w=y:q.next=R,!Kt(y,r.memoizedState)&&(yt=!0,ee&&(o=ds,o!==null)))throw o;r.memoizedState=y,r.baseState=w,r.baseQueue=q,c.lastRenderedState=y}return d===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function bh(r){var s=at(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,d=o.pending,y=s.memoizedState;if(d!==null){o.pending=null;var w=d=d.next;do y=r(y,w.action),w=w.next;while(w!==d);Kt(y,s.memoizedState)||(yt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,c]}function _m(r,s,o){var c=Ee,d=at(),y=ze;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Kt((Le||d).memoizedState,o);if(w&&(d.memoizedState=o,yt=!0),d=d.queue,xh(Sm.bind(null,c,d,r),[r]),d.getSnapshot!==s||w||st!==null&&st.memoizedState.tag&1){if(c.flags|=2048,ys(9,xm.bind(null,c,d,o,s),{destroy:void 0},null),qe===null)throw Error(i(349));y||(Cr&60)!==0||wm(c,s,o)}return o}function wm(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Ee.updateQueue,s===null?(s=Ul(),Ee.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function xm(r,s,o,c){s.value=o,s.getSnapshot=c,Am(s)&&Em(r)}function Sm(r,s,o){return o(function(){Am(s)&&Em(r)})}function Am(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Kt(r,o)}catch{return!0}}function Em(r){var s=Tr(r,2);s!==null&&It(s,r,2)}function _h(r){var s=$t();if(typeof r=="function"){var o=r;if(r=o(),pi){Sr(!0);try{o()}finally{Sr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:r},s}function Tm(r,s,o,c){return r.baseState=o,vh(r,Le,typeof c=="function"?c:tr)}function aE(r,s,o,c,d){if(Gl(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};j.T!==null?o(!0):y.isTransition=!1,c(y),o=s.pending,o===null?(y.next=s.pending=y,Mm(s,y)):(y.next=o.next,s.pending=o.next=y)}}function Mm(r,s){var o=s.action,c=s.payload,d=r.state;if(s.isTransition){var y=j.T,w={};j.T=w;try{var R=o(d,c),q=j.S;q!==null&&q(w,R),km(r,s,R)}catch(Y){wh(r,s,Y)}finally{j.T=y}}else try{y=o(d,c),km(r,s,y)}catch(Y){wh(r,s,Y)}}function km(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Cm(r,s,c)},function(c){return wh(r,s,c)}):Cm(r,s,o)}function Cm(r,s,o){s.status="fulfilled",s.value=o,Rm(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Mm(r,o)))}function wh(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,Rm(s),s=s.next;while(s!==c)}r.action=null}function Rm(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Om(r,s){return s}function Pm(r,s){if(ze){var o=qe.formState;if(o!==null){e:{var c=Ee;if(ze){if(St){t:{for(var d=St,y=Un;d.nodeType!==8;){if(!y){d=null;break t}if(d=Mn(d.nextSibling),d===null){d=null;break t}}y=d.data,d=y==="F!"||y==="F"?d:null}if(d){St=Mn(d.nextSibling),c=d.data==="F!";break e}}hi(c)}c=!1}c&&(s=o[0])}}return o=$t(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Om,lastRenderedState:s},o.queue=c,o=Qm.bind(null,Ee,c),c.dispatch=o,c=_h(!1),y=Mh.bind(null,Ee,!1,c.queue),c=$t(),d={state:s,dispatch:null,action:r,pending:null},c.queue=d,o=aE.bind(null,Ee,d,y,o),d.dispatch=o,c.memoizedState=r,[s,o,!1]}function Dm(r){var s=at();return Bm(s,Le,r)}function Bm(r,s,o){s=vh(r,s,Om)[0],r=Il(tr)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Da(s):s;var c=at(),d=c.queue,y=d.dispatch;return o!==c.memoizedState&&(Ee.flags|=2048,ys(9,oE.bind(null,d,o),{destroy:void 0},null)),[s,y,r]}function oE(r,s){r.action=s}function jm(r){var s=at(),o=Le;if(o!==null)return Bm(s,o,r);at(),s=s.memoizedState,o=at();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function ys(r,s,o,c){return r={tag:r,create:s,inst:o,deps:c,next:null},s=Ee.updateQueue,s===null&&(s=Ul(),Ee.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function zm(){return at().memoizedState}function Nl(r,s,o,c){var d=$t();Ee.flags|=r,d.memoizedState=ys(1|s,o,{destroy:void 0},c===void 0?null:c)}function ql(r,s,o,c){var d=at();c=c===void 0?null:c;var y=d.memoizedState.inst;Le!==null&&c!==null&&fh(c,Le.memoizedState.deps)?d.memoizedState=ys(s,o,y,c):(Ee.flags|=r,d.memoizedState=ys(1|s,o,y,c))}function Um(r,s){Nl(8390656,8,r,s)}function xh(r,s){ql(2048,8,r,s)}function Lm(r,s){return ql(4,2,r,s)}function Im(r,s){return ql(4,4,r,s)}function Nm(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function qm(r,s,o){o=o!=null?o.concat([r]):null,ql(4,4,Nm.bind(null,s,r),o)}function Sh(){}function Gm(r,s){var o=at();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&fh(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function Hm(r,s){var o=at();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&fh(s,c[1]))return c[0];if(c=r(),pi){Sr(!0);try{r()}finally{Sr(!1)}}return o.memoizedState=[c,s],c}function Ah(r,s,o){return o===void 0||(Cr&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=F0(),Ee.lanes|=r,Ir|=r,o)}function $m(r,s,o,c){return Kt(o,s)?o:hs.current!==null?(r=Ah(r,o,c),Kt(r,s)||(yt=!0),r):(Cr&42)===0?(yt=!0,r.memoizedState=o):(r=F0(),Ee.lanes|=r,Ir|=r,s)}function Fm(r,s,o,c,d){var y=V.p;V.p=y!==0&&8>y?y:8;var w=j.T,R={};j.T=R,Mh(r,!1,s,o);try{var q=d(),Y=j.S;if(Y!==null&&Y(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ee=rE(q,c);Ba(r,s,ee,tn(r))}else Ba(r,s,c,tn(r))}catch(ie){Ba(r,s,{then:function(){},status:"rejected",reason:ie},tn())}finally{V.p=y,j.T=w}}function lE(){}function Eh(r,s,o,c){if(r.tag!==5)throw Error(i(476));var d=Vm(r).queue;Fm(r,d,s,Z,o===null?lE:function(){return Ym(r),o(c)})}function Vm(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:Z},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Ym(r){var s=Vm(r).next.queue;Ba(r,s,{},tn())}function Th(){return Ot(eo)}function Xm(){return at().memoizedState}function Wm(){return at().memoizedState}function uE(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tn();r=Dr(o);var c=Br(s,r,o);c!==null&&(It(c,s,o),Ua(c,s,o)),s={cache:uh()},r.payload=s;return}s=s.return}}function cE(r,s,o){var c=tn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Gl(r)?Km(s,o):(o=nh(r,s,o,c),o!==null&&(It(o,r,c),Zm(o,s,c)))}function Qm(r,s,o){var c=tn();Ba(r,s,o,c)}function Ba(r,s,o,c){var d={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Gl(r))Km(s,d);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,R=y(w,o);if(d.hasEagerState=!0,d.eagerState=R,Kt(R,w))return El(r,s,d,0),qe===null&&Al(),!1}catch{}finally{}if(o=nh(r,s,d,c),o!==null)return It(o,r,c),Zm(o,s,c),!0}return!1}function Mh(r,s,o,c){if(c={lane:2,revertLane:mf(),action:c,hasEagerState:!1,eagerState:null,next:null},Gl(r)){if(s)throw Error(i(479))}else s=nh(r,o,c,2),s!==null&&It(s,r,2)}function Gl(r){var s=r.alternate;return r===Ee||s!==null&&s===Ee}function Km(r,s){ps=jl=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Zm(r,s,o){if((o&4194176)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,uy(r,o)}}var In={readContext:Ot,use:Ll,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt};In.useCacheRefresh=rt,In.useMemoCache=rt,In.useHostTransitionStatus=rt,In.useFormState=rt,In.useActionState=rt,In.useOptimistic=rt;var gi={readContext:Ot,use:Ll,useCallback:function(r,s){return $t().memoizedState=[r,s===void 0?null:s],r},useContext:Ot,useEffect:Um,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Nl(4194308,4,Nm.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Nl(4194308,4,r,s)},useInsertionEffect:function(r,s){Nl(4,2,r,s)},useMemo:function(r,s){var o=$t();s=s===void 0?null:s;var c=r();if(pi){Sr(!0);try{r()}finally{Sr(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=$t();if(o!==void 0){var d=o(s);if(pi){Sr(!0);try{o(s)}finally{Sr(!1)}}}else d=s;return c.memoizedState=c.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},c.queue=r,r=r.dispatch=cE.bind(null,Ee,r),[c.memoizedState,r]},useRef:function(r){var s=$t();return r={current:r},s.memoizedState=r},useState:function(r){r=_h(r);var s=r.queue,o=Qm.bind(null,Ee,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Sh,useDeferredValue:function(r,s){var o=$t();return Ah(o,r,s)},useTransition:function(){var r=_h(!1);return r=Fm.bind(null,Ee,r.queue,!0,!1),$t().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=Ee,d=$t();if(ze){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),qe===null)throw Error(i(349));(Be&60)!==0||wm(c,s,o)}d.memoizedState=o;var y={value:o,getSnapshot:s};return d.queue=y,Um(Sm.bind(null,c,y,r),[r]),c.flags|=2048,ys(9,xm.bind(null,c,y,o,s),{destroy:void 0},null),o},useId:function(){var r=$t(),s=qe.identifierPrefix;if(ze){var o=Jn,c=Zn;o=(c&~(1<<32-Qt(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=zl++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=iE++,s=":"+s+"r"+o.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return $t().memoizedState=uE.bind(null,Ee)}};gi.useMemoCache=mh,gi.useHostTransitionStatus=Th,gi.useFormState=Pm,gi.useActionState=Pm,gi.useOptimistic=function(r){var s=$t();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mh.bind(null,Ee,!0,o),o.dispatch=s,[r,s]};var Rr={readContext:Ot,use:Ll,useCallback:Gm,useContext:Ot,useEffect:xh,useImperativeHandle:qm,useInsertionEffect:Lm,useLayoutEffect:Im,useMemo:Hm,useReducer:Il,useRef:zm,useState:function(){return Il(tr)},useDebugValue:Sh,useDeferredValue:function(r,s){var o=at();return $m(o,Le.memoizedState,r,s)},useTransition:function(){var r=Il(tr)[0],s=at().memoizedState;return[typeof r=="boolean"?r:Da(r),s]},useSyncExternalStore:_m,useId:Xm};Rr.useCacheRefresh=Wm,Rr.useMemoCache=mh,Rr.useHostTransitionStatus=Th,Rr.useFormState=Dm,Rr.useActionState=Dm,Rr.useOptimistic=function(r,s){var o=at();return Tm(o,Le,r,s)};var yi={readContext:Ot,use:Ll,useCallback:Gm,useContext:Ot,useEffect:xh,useImperativeHandle:qm,useInsertionEffect:Lm,useLayoutEffect:Im,useMemo:Hm,useReducer:bh,useRef:zm,useState:function(){return bh(tr)},useDebugValue:Sh,useDeferredValue:function(r,s){var o=at();return Le===null?Ah(o,r,s):$m(o,Le.memoizedState,r,s)},useTransition:function(){var r=bh(tr)[0],s=at().memoizedState;return[typeof r=="boolean"?r:Da(r),s]},useSyncExternalStore:_m,useId:Xm};yi.useCacheRefresh=Wm,yi.useMemoCache=mh,yi.useHostTransitionStatus=Th,yi.useFormState=jm,yi.useActionState=jm,yi.useOptimistic=function(r,s){var o=at();return Le!==null?Tm(o,Le,r,s):(o.baseState=r,[r,o.queue.dispatch])};function kh(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:I({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Ch={isMounted:function(r){return(r=r._reactInternals)?L(r)===r:!1},enqueueSetState:function(r,s,o){r=r._reactInternals;var c=tn(),d=Dr(c);d.payload=s,o!=null&&(d.callback=o),s=Br(r,d,c),s!==null&&(It(s,r,c),Ua(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=tn(),d=Dr(c);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Br(r,d,c),s!==null&&(It(s,r,c),Ua(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tn(),c=Dr(o);c.tag=2,s!=null&&(c.callback=s),s=Br(r,c,o),s!==null&&(It(s,r,o),Ua(s,r,o))}};function Jm(r,s,o,c,d,y,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,w):s.prototype&&s.prototype.isPureReactComponent?!wa(o,c)||!wa(d,y):!0}function e0(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&Ch.enqueueReplaceState(s,s.state,null)}function mi(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=I({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}var Hl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function t0(r){Hl(r)}function n0(r){console.error(r)}function r0(r){Hl(r)}function $l(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function i0(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Rh(r,s,o){return o=Dr(o),o.tag=3,o.payload={element:null},o.callback=function(){$l(r,s)},o}function s0(r){return r=Dr(r),r.tag=3,r}function a0(r,s,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var y=c.value;r.payload=function(){return d(y)},r.callback=function(){i0(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){i0(s,o,c),typeof d!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function hE(r,s,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&za(s,o,d,!0),o=gn.current,o!==null){switch(o.tag){case 13:return Ln===null?ff():o.alternate===null&&Ke===0&&(Ke=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===ah?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),pf(r,c,d)),!1;case 22:return o.flags|=65536,c===ah?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),pf(r,c,d)),!1}throw Error(i(435,o.tag))}return pf(r,c,d),ff(),!1}if(ze)return s=gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==sh&&(r=Error(i(422),{cause:c}),Ea(fn(r,o)))):(c!==sh&&(s=Error(i(423),{cause:c}),Ea(fn(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,c=fn(c,o),d=Rh(r.stateNode,c,d),Fh(r,d),Ke!==4&&(Ke=2)),!1;var y=Error(i(520),{cause:c});if(y=fn(y,o),Fa===null?Fa=[y]:Fa.push(y),Ke!==4&&(Ke=2),s===null)return!0;c=fn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Rh(o.stateNode,c,r),Fh(o,r),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Nr===null||!Nr.has(y))))return o.flags|=65536,d&=-d,o.lanes|=d,d=s0(d),a0(d,r,o,c),Fh(o,d),!1}o=o.return}while(o!==null);return!1}var o0=Error(i(461)),yt=!1;function At(r,s,o,c){s.child=r===null?fm(s,null,o,c):fi(s,r.child,o,c)}function l0(r,s,o,c,d){o=o.render;var y=s.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return bi(s),c=dh(r,s,o,w,y,d),R=ph(),r!==null&&!yt?(gh(r,s,d),nr(r,s,d)):(ze&&R&&rh(s),s.flags|=1,At(r,s,c,d),s.child)}function u0(r,s,o,c,d){if(r===null){var y=o.type;return typeof y=="function"&&!Jh(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,c0(r,s,y,c,d)):(r=Wl(o.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!Ih(r,d)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:wa,o(w,c)&&r.ref===s.ref)return nr(r,s,d)}return s.flags|=1,r=Lr(y,c),r.ref=s.ref,r.return=s,s.child=r}function c0(r,s,o,c,d){if(r!==null){var y=r.memoizedProps;if(wa(y,c)&&r.ref===s.ref)if(yt=!1,s.pendingProps=c=y,Ih(r,d))(r.flags&131072)!==0&&(yt=!0);else return s.lanes=r.lanes,nr(r,s,d)}return Oh(r,s,o,c,d)}function h0(r,s,o){var c=s.pendingProps,d=c.children,y=(s.stateNode._pendingVisibility&2)!==0,w=r!==null?r.memoizedState:null;if(ja(r,s),c.mode==="hidden"||y){if((s.flags&128)!==0){if(c=w!==null?w.baseLanes|o:o,r!==null){for(d=s.child=r.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;s.childLanes=y&~c}else s.childLanes=0,s.child=null;return f0(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bl(s,w!==null?w.cachePool:null),w!==null?dm(s,w):oh(),pm(s);else return s.lanes=s.childLanes=536870912,f0(r,s,w!==null?w.baseLanes|o:o,o)}else w!==null?(Bl(s,w.cachePool),dm(s,w),kr(),s.memoizedState=null):(r!==null&&Bl(s,null),oh(),kr());return At(r,s,d,o),s.child}function f0(r,s,o,c){var d=hh();return d=d===null?null:{parent:ht._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},r!==null&&Bl(s,null),oh(),pm(s),r!==null&&za(r,s,c,!0),null}function ja(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=2097664)}}function Oh(r,s,o,c,d){return bi(s),o=dh(r,s,o,c,void 0,d),c=ph(),r!==null&&!yt?(gh(r,s,d),nr(r,s,d)):(ze&&c&&rh(s),s.flags|=1,At(r,s,o,d),s.child)}function d0(r,s,o,c,d,y){return bi(s),s.updateQueue=null,o=bm(s,c,o,d),vm(r),c=ph(),r!==null&&!yt?(gh(r,s,y),nr(r,s,y)):(ze&&c&&rh(s),s.flags|=1,At(r,s,o,y),s.child)}function p0(r,s,o,c,d){if(bi(s),s.stateNode===null){var y=os,w=o.contextType;typeof w=="object"&&w!==null&&(y=Ot(w)),y=new o(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ch,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Hh(s),w=o.contextType,y.context=typeof w=="object"&&w!==null?Ot(w):os,y.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(kh(s,o,w,c),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Ch.enqueueReplaceState(y,y.state,null),Ia(s,c,y,d),La(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){y=s.stateNode;var R=s.memoizedProps,q=mi(o,R);y.props=q;var Y=y.context,ee=o.contextType;w=os,typeof ee=="object"&&ee!==null&&(w=Ot(ee));var ie=o.getDerivedStateFromProps;ee=typeof ie=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||Y!==w)&&e0(s,y,c,w),Pr=!1;var K=s.memoizedState;y.state=K,Ia(s,c,y,d),La(),Y=s.memoizedState,R||K!==Y||Pr?(typeof ie=="function"&&(kh(s,o,ie,c),Y=s.memoizedState),(q=Pr||Jm(s,o,q,c,K,Y,w))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),y.props=c,y.state=Y,y.context=w,c=q):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,$h(r,s),w=s.memoizedProps,ee=mi(o,w),y.props=ee,ie=s.pendingProps,K=y.context,Y=o.contextType,q=os,typeof Y=="object"&&Y!==null&&(q=Ot(Y)),R=o.getDerivedStateFromProps,(Y=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==ie||K!==q)&&e0(s,y,c,q),Pr=!1,K=s.memoizedState,y.state=K,Ia(s,c,y,d),La();var J=s.memoizedState;w!==ie||K!==J||Pr||r!==null&&r.dependencies!==null&&Fl(r.dependencies)?(typeof R=="function"&&(kh(s,o,R,c),J=s.memoizedState),(ee=Pr||Jm(s,o,ee,c,K,J,q)||r!==null&&r.dependencies!==null&&Fl(r.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,J,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,J,q)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=J),y.props=c,y.state=J,y.context=q,c=ee):(typeof y.componentDidUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),c=!1)}return y=c,ja(r,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&c?(s.child=fi(s,r.child,null,d),s.child=fi(s,null,o,d)):At(r,s,o,d),s.memoizedState=y.state,r=s.child):r=nr(r,s,d),r}function g0(r,s,o,c){return Aa(),s.flags|=256,At(r,s,o,c),s.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Dh(r){return{baseLanes:r,cachePool:mm()}}function Bh(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=bn),r}function y0(r,s,o){var c=s.pendingProps,d=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=r!==null&&r.memoizedState===null?!1:(ct.current&2)!==0),w&&(d=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(ze){if(d?Mr(s):kr(),ze){var R=St,q;if(q=R){e:{for(q=R,R=Un;q.nodeType!==8;){if(!R){R=null;break e}if(q=Mn(q.nextSibling),q===null){R=null;break e}}R=q}R!==null?(s.memoizedState={dehydrated:R,treeContext:ui!==null?{id:Zn,overflow:Jn}:null,retryLane:536870912},q=vn(18,null,null,0),q.stateNode=R,q.return=s,s.child=q,Lt=s,St=null,q=!0):q=!1}q||hi(s)}if(R=s.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?s.lanes=16:s.lanes=536870912,null;er(s)}return R=c.children,c=c.fallback,d?(kr(),d=s.mode,R=zh({mode:"hidden",children:R},d),c=wi(c,d,o,null),R.return=s,c.return=s,R.sibling=c,s.child=R,d=s.child,d.memoizedState=Dh(o),d.childLanes=Bh(r,w,o),s.memoizedState=Ph,c):(Mr(s),jh(s,R))}if(q=r.memoizedState,q!==null&&(R=q.dehydrated,R!==null)){if(y)s.flags&256?(Mr(s),s.flags&=-257,s=Uh(r,s,o)):s.memoizedState!==null?(kr(),s.child=r.child,s.flags|=128,s=null):(kr(),d=c.fallback,R=s.mode,c=zh({mode:"visible",children:c.children},R),d=wi(d,R,o,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,fi(s,r.child,null,o),c=s.child,c.memoizedState=Dh(o),c.childLanes=Bh(r,w,o),s.memoizedState=Ph,s=d);else if(Mr(s),R.data==="$!"){if(w=R.nextSibling&&R.nextSibling.dataset,w)var Y=w.dgst;w=Y,c=Error(i(419)),c.stack="",c.digest=w,Ea({value:c,source:null,stack:null}),s=Uh(r,s,o)}else if(yt||za(r,s,o,!1),w=(o&r.childLanes)!==0,yt||w){if(w=qe,w!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==q.retryLane)throw q.retryLane=c,Tr(r,c),It(w,r,c),o0}R.data==="$?"||ff(),s=Uh(r,s,o)}else R.data==="$?"?(s.flags|=128,s.child=r.child,s=TE.bind(null,r),R._reactRetry=s,s=null):(r=q.treeContext,St=Mn(R.nextSibling),Lt=s,ze=!0,En=null,Un=!1,r!==null&&(dn[pn++]=Zn,dn[pn++]=Jn,dn[pn++]=ui,Zn=r.id,Jn=r.overflow,ui=s),s=jh(s,c.children),s.flags|=4096);return s}return d?(kr(),d=c.fallback,R=s.mode,q=r.child,Y=q.sibling,c=Lr(q,{mode:"hidden",children:c.children}),c.subtreeFlags=q.subtreeFlags&31457280,Y!==null?d=Lr(Y,d):(d=wi(d,R,o,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,R=r.child.memoizedState,R===null?R=Dh(o):(q=R.cachePool,q!==null?(Y=ht._currentValue,q=q.parent!==Y?{parent:Y,pool:Y}:q):q=mm(),R={baseLanes:R.baseLanes|o,cachePool:q}),d.memoizedState=R,d.childLanes=Bh(r,w,o),s.memoizedState=Ph,c):(Mr(s),o=r.child,r=o.sibling,o=Lr(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function jh(r,s){return s=zh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function zh(r,s){return G0(r,s,0,null)}function Uh(r,s,o){return fi(s,r.child,null,o),r=jh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function m0(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),qh(r.return,s,o)}function Lh(r,s,o,c,d){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=o,y.tailMode=d)}function v0(r,s,o){var c=s.pendingProps,d=c.revealOrder,y=c.tail;if(At(r,s,c.children,o),c=ct.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&m0(r,o,s);else if(r.tag===19)m0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(he(ct,c),d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&Dl(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Lh(s,!1,d,o,y);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Dl(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Lh(s,!0,o,null,y);break;case"together":Lh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function nr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ir|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(za(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Lr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Lr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Ih(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Fl(r)))}function fE(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),Or(s,ht,r.memoizedState.cache),Aa();break;case 27:case 5:Yi(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:Or(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Mr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?y0(r,s,o):(Mr(s),r=nr(r,s,o),r!==null?r.sibling:null);Mr(s);break;case 19:var d=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(za(r,s,o,!1),c=(o&s.childLanes)!==0),d){if(c)return v0(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),he(ct,ct.current),c)break;return null;case 22:case 23:return s.lanes=0,h0(r,s,o);case 24:Or(s,ht,r.memoizedState.cache)}return nr(r,s,o)}function b0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)yt=!0;else{if(!Ih(r,o)&&(s.flags&128)===0)return yt=!1,fE(r,s,o);yt=(r.flags&131072)!==0}else yt=!1,ze&&(s.flags&1048576)!==0&&rm(s,kl,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Jh(c)?(r=mi(c,r),s.tag=1,s=p0(null,s,c,r,o)):(s.tag=0,s=Oh(null,s,c,r,o));else{if(c!=null){if(d=c.$$typeof,d===_){s.tag=11,s=l0(null,s,c,r,o);break e}else if(d===E){s.tag=14,s=u0(null,s,c,r,o);break e}}throw s=B(c)||c,Error(i(306,s,""))}}return s;case 0:return Oh(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,d=mi(c,s.pendingProps),p0(r,s,c,d,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var y=s.pendingProps;d=s.memoizedState,c=d.element,$h(r,s),Ia(s,y,null,o);var w=s.memoizedState;if(y=w.cache,Or(s,ht,y),y!==d.cache&&Gh(s,[ht],o,!0),La(),y=w.element,d.isDehydrated)if(d={element:y,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=g0(r,s,y,o);break e}else if(y!==c){c=fn(Error(i(424)),s),Ea(c),s=g0(r,s,y,o);break e}else for(St=Mn(s.stateNode.containerInfo.firstChild),Lt=s,ze=!0,En=null,Un=!0,o=fm(s,null,y,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Aa(),y===c){s=nr(r,s,o);break e}At(r,s,y,o)}s=s.child}return s;case 26:return ja(r,s),r===null?(o=xv(s.type,null,s.pendingProps,null))?s.memoizedState=o:ze||(o=s.type,r=s.pendingProps,c=ou(nt.current).createElement(o),c[Rt]=s,c[Gt]=r,Et(c,o,r),gt(c),s.stateNode=c):s.memoizedState=xv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Yi(s),r===null&&ze&&(c=s.stateNode=bv(s.type,s.pendingProps,nt.current),Lt=s,Un=!0,St=Mn(c.firstChild)),c=s.pendingProps.children,r!==null||ze?At(r,s,c,o):s.child=fi(s,null,c,o),ja(r,s),s.child;case 5:return r===null&&ze&&((d=c=St)&&(c=GE(c,s.type,s.pendingProps,Un),c!==null?(s.stateNode=c,Lt=s,St=Mn(c.firstChild),Un=!1,d=!0):d=!1),d||hi(s)),Yi(s),d=s.type,y=s.pendingProps,w=r!==null?r.memoizedProps:null,c=y.children,Tf(d,y)?c=null:w!==null&&Tf(d,w)&&(s.flags|=32),s.memoizedState!==null&&(d=dh(r,s,sE,null,null,o),eo._currentValue=d),ja(r,s),At(r,s,c,o),s.child;case 6:return r===null&&ze&&((r=o=St)&&(o=HE(o,s.pendingProps,Un),o!==null?(s.stateNode=o,Lt=s,St=null,r=!0):r=!1),r||hi(s)),null;case 13:return y0(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=fi(s,null,c,o):At(r,s,c,o),s.child;case 11:return l0(r,s,s.type,s.pendingProps,o);case 7:return At(r,s,s.pendingProps,o),s.child;case 8:return At(r,s,s.pendingProps.children,o),s.child;case 12:return At(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Or(s,s.type,c.value),At(r,s,c.children,o),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,bi(s),d=Ot(d),c=c(d),s.flags|=1,At(r,s,c,o),s.child;case 14:return u0(r,s,s.type,s.pendingProps,o);case 15:return c0(r,s,s.type,s.pendingProps,o);case 19:return v0(r,s,o);case 22:return h0(r,s,o);case 24:return bi(s),c=Ot(ht),r===null?(d=hh(),d===null&&(d=qe,y=uh(),d.pooledCache=y,y.refCount++,y!==null&&(d.pooledCacheLanes|=o),d=y),s.memoizedState={parent:c,cache:d},Hh(s),Or(s,ht,d)):((r.lanes&o)!==0&&($h(r,s),Ia(s,null,null,o),La()),d=r.memoizedState,y=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Or(s,ht,c)):(c=y.cache,Or(s,ht,c),c!==d.cache&&Gh(s,[ht],o,!0))),At(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var Nh=oe(null),vi=null,rr=null;function Or(r,s,o){he(Nh,s._currentValue),s._currentValue=o}function ir(r){r._currentValue=Nh.current,pe(Nh)}function qh(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function Gh(r,s,o,c){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var y=d.dependencies;if(y!==null){var w=d.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=d;for(var q=0;q<s.length;q++)if(R.context===s[q]){y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),qh(y.return,o,r),c||(w=null);break e}y=R.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(i(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),qh(w,o,r),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===r){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function za(r,s,o,c){r=null;for(var d=s,y=!1;d!==null;){if(!y){if((d.flags&524288)!==0)y=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var R=d.type;Kt(d.pendingProps.value,w.value)||(r!==null?r.push(R):r=[R])}}else if(d===pt.current){if(w=d.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(eo):r=[eo])}d=d.return}r!==null&&Gh(s,r,o,c),s.flags|=262144}function Fl(r){for(r=r.firstContext;r!==null;){if(!Kt(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function bi(r){vi=r,rr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ot(r){return _0(vi,r)}function Vl(r,s){return vi===null&&bi(r),_0(r,s)}function _0(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},rr===null){if(r===null)throw Error(i(308));rr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else rr=rr.next=s;return o}var Pr=!1;function Hh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Dr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Br(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Tl(r),tm(r,null,o),s}return El(r,c,s,o),Tl(r)}function Ua(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,uy(r,o)}}function Fh(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?d=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?d=y=s:y=y.next=s}else d=y=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Vh=!1;function La(){if(Vh){var r=ds;if(r!==null)throw r}}function Ia(r,s,o,c){Vh=!1;var d=r.updateQueue;Pr=!1;var y=d.firstBaseUpdate,w=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var q=R,Y=q.next;q.next=null,w===null?y=Y:w.next=Y,w=q;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,R=ee.lastBaseUpdate,R!==w&&(R===null?ee.firstBaseUpdate=Y:R.next=Y,ee.lastBaseUpdate=q))}if(y!==null){var ie=d.baseState;w=0,ee=Y=q=null,R=y;do{var K=R.lane&-536870913,J=K!==R.lane;if(J?(Be&K)===K:(c&K)===K){K!==0&&K===fs&&(Vh=!0),ee!==null&&(ee=ee.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=r,we=R;K=s;var Ze=o;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){ie=ge.call(Ze,ie,K);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,K=typeof ge=="function"?ge.call(Ze,ie,K):ge,K==null)break e;ie=I({},ie,K);break e;case 2:Pr=!0}}K=R.callback,K!==null&&(r.flags|=64,J&&(r.flags|=8192),J=d.callbacks,J===null?d.callbacks=[K]:J.push(K))}else J={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ee===null?(Y=ee=J,q=ie):ee=ee.next=J,w|=K;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;J=R,R=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ee===null&&(q=ie),d.baseState=q,d.firstBaseUpdate=Y,d.lastBaseUpdate=ee,y===null&&(d.shared.lanes=0),Ir|=w,r.lanes=w,r.memoizedState=ie}}function w0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function x0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)w0(o[r],s)}function Na(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&r)===r){c=void 0;var y=o.create,w=o.inst;c=y(),w.destroy=c}o=o.next}while(o!==d)}}catch(R){Ne(s,s.return,R)}}function jr(r,s,o){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&r)===r){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,d=s;var q=o;try{R()}catch(Y){Ne(d,q,Y)}}}c=c.next}while(c!==y)}}catch(Y){Ne(s,s.return,Y)}}function S0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{x0(s,o)}catch(c){Ne(r,r.return,c)}}}function A0(r,s,o){o.props=mi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Ne(r,s,c)}}function _i(r,s){try{var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var d=c;break;default:d=c}typeof o=="function"?r.refCleanup=o(d):o.current=d}}catch(y){Ne(r,s,y)}}function Zt(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){Ne(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Ne(r,s,d)}else o.current=null}function E0(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){Ne(r,r.return,d)}}function T0(r,s,o){try{var c=r.stateNode;UE(c,r.type,o,s),c[Gt]=s}catch(d){Ne(r,r.return,d)}}function M0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Yh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||M0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xh(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(r,s):o.insertBefore(r,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(r,o)):(s=o,s.appendChild(r)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=au));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(Xh(r,s,o),r=r.sibling;r!==null;)Xh(r,s,o),r=r.sibling}function Yl(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for(Yl(r,s,o),r=r.sibling;r!==null;)Yl(r,s,o),r=r.sibling}var sr=!1,Qe=!1,Wh=!1,k0=typeof WeakSet=="function"?WeakSet:Set,mt=null,C0=!1;function dE(r,s){if(r=r.containerInfo,Af=du,r=Vy(r),Kc(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,R=-1,q=-1,Y=0,ee=0,ie=r,K=null;t:for(;;){for(var J;ie!==o||d!==0&&ie.nodeType!==3||(R=w+d),ie!==y||c!==0&&ie.nodeType!==3||(q=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(J=ie.firstChild)!==null;)K=ie,ie=J;for(;;){if(ie===r)break t;if(K===o&&++Y===d&&(R=w),K===y&&++ee===c&&(q=w),(J=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=J}o=R===-1||q===-1?null:{start:R,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ef={focusedElem:r,selectionRange:o},du=!1,mt=s;mt!==null;)if(s=mt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,mt=r;else for(;mt!==null;){switch(s=mt,y=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=s,d=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var ge=mi(o.type,d,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(ge,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(we){Ne(o,o.return,we)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Cf(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,mt=r;break}mt=s.return}return ge=C0,C0=!1,ge}function R0(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:or(r,o),c&4&&Na(5,o);break;case 1:if(or(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(R){Ne(o,o.return,R)}else{var d=mi(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(R){Ne(o,o.return,R)}}c&64&&S0(o),c&512&&_i(o,o.return);break;case 3:if(or(r,o),c&64&&(c=o.updateQueue,c!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{x0(c,r)}catch(R){Ne(o,o.return,R)}}break;case 26:or(r,o),c&512&&_i(o,o.return);break;case 27:case 5:or(r,o),s===null&&c&4&&E0(o),c&512&&_i(o,o.return);break;case 12:or(r,o);break;case 13:or(r,o),c&4&&D0(r,o);break;case 22:if(d=o.memoizedState!==null||sr,!d){s=s!==null&&s.memoizedState!==null||Qe;var y=sr,w=Qe;sr=d,(Qe=s)&&!w?zr(r,o,(o.subtreeFlags&8772)!==0):or(r,o),sr=y,Qe=w}c&512&&(o.memoizedProps.mode==="manual"?_i(o,o.return):Zt(o,o.return));break;default:or(r,o)}}function O0(r){var s=r.alternate;s!==null&&(r.alternate=null,O0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&jc(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,Jt=!1;function ar(r,s,o){for(o=o.child;o!==null;)P0(r,s,o),o=o.sibling}function P0(r,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ua,o)}catch{}switch(o.tag){case 26:Qe||Zt(o,s),ar(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Qe||Zt(o,s);var c=ot,d=Jt;for(ot=o.stateNode,ar(r,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);jc(o),ot=c,Jt=d;break;case 5:Qe||Zt(o,s);case 6:d=ot;var y=Jt;if(ot=null,ar(r,s,o),ot=d,Jt=y,ot!==null)if(Jt)try{r=ot,c=o.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(w){Ne(o,s,w)}else try{ot.removeChild(o.stateNode)}catch(w){Ne(o,s,w)}break;case 18:ot!==null&&(Jt?(s=ot,o=o.stateNode,s.nodeType===8?kf(s.parentNode,o):s.nodeType===1&&kf(s,o),io(s)):kf(ot,o.stateNode));break;case 4:c=ot,d=Jt,ot=o.stateNode.containerInfo,Jt=!0,ar(r,s,o),ot=c,Jt=d;break;case 0:case 11:case 14:case 15:Qe||jr(2,o,s),Qe||jr(4,o,s),ar(r,s,o);break;case 1:Qe||(Zt(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&A0(o,s,c)),ar(r,s,o);break;case 21:ar(r,s,o);break;case 22:Qe||Zt(o,s),Qe=(c=Qe)||o.memoizedState!==null,ar(r,s,o),Qe=c;break;default:ar(r,s,o)}}function D0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{io(r)}catch(o){Ne(s,s.return,o)}}function pE(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new k0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new k0),s;default:throw Error(i(435,r.tag))}}function Qh(r,s){var o=pE(r);s.forEach(function(c){var d=ME.bind(null,r,c);o.has(c)||(o.add(c),c.then(d,d))})}function yn(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],y=r,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 27:case 5:ot=R.stateNode,Jt=!1;break e;case 3:ot=R.stateNode.containerInfo,Jt=!0;break e;case 4:ot=R.stateNode.containerInfo,Jt=!0;break e}R=R.return}if(ot===null)throw Error(i(160));P0(y,w,d),ot=null,Jt=!1,y=d.alternate,y!==null&&(y.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)B0(s,r),s=s.sibling}var Tn=null;function B0(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yn(s,r),mn(r),c&4&&(jr(3,r,r.return),Na(3,r),jr(5,r,r.return));break;case 1:yn(s,r),mn(r),c&512&&(Qe||o===null||Zt(o,o.return)),c&64&&sr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=Tn;if(yn(s,r),mn(r),c&512&&(Qe||o===null||Zt(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":y=d.getElementsByTagName("title")[0],(!y||y[fa]||y[Rt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=d.createElement(c),d.head.insertBefore(y,d.querySelector("head > title"))),Et(y,c,o),y[Rt]=r,gt(y),c=y;break e;case"link":var w=Ev("link","href",d).get(c+(o.href||""));if(w){for(var R=0;R<w.length;R++)if(y=w[R],y.getAttribute("href")===(o.href==null?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(R,1);break t}}y=d.createElement(c),Et(y,c,o),d.head.appendChild(y);break;case"meta":if(w=Ev("meta","content",d).get(c+(o.content||""))){for(R=0;R<w.length;R++)if(y=w[R],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(R,1);break t}}y=d.createElement(c),Et(y,c,o),d.head.appendChild(y);break;default:throw Error(i(468,c))}y[Rt]=r,gt(y),c=y}r.stateNode=c}else Tv(d,r.type,r.stateNode);else r.stateNode=Av(d,c,r.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?Tv(d,r.type,r.stateNode):Av(d,c,r.memoizedProps)):c===null&&r.stateNode!==null&&T0(r,r.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){d=r.stateNode,y=r.memoizedProps;try{for(var q=d.firstChild;q;){var Y=q.nextSibling,ee=q.nodeName;q[fa]||ee==="HEAD"||ee==="BODY"||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&q.rel.toLowerCase()==="stylesheet"||d.removeChild(q),q=Y}for(var ie=r.type,K=d.attributes;K.length;)d.removeAttributeNode(K[0]);Et(d,ie,y),d[Rt]=r,d[Gt]=y}catch(ge){Ne(r,r.return,ge)}}case 5:if(yn(s,r),mn(r),c&512&&(Qe||o===null||Zt(o,o.return)),r.flags&32){d=r.stateNode;try{es(d,"")}catch(ge){Ne(r,r.return,ge)}}c&4&&r.stateNode!=null&&(d=r.memoizedProps,T0(r,d,o!==null?o.memoizedProps:d)),c&1024&&(Wh=!0);break;case 6:if(yn(s,r),mn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(ge){Ne(r,r.return,ge)}}break;case 3:if(cu=null,d=Tn,Tn=lu(s.containerInfo),yn(s,r),Tn=d,mn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{io(s.containerInfo)}catch(ge){Ne(r,r.return,ge)}Wh&&(Wh=!1,j0(r));break;case 4:c=Tn,Tn=lu(r.stateNode.containerInfo),yn(s,r),mn(r),Tn=c;break;case 12:yn(s,r),mn(r);break;case 13:yn(s,r),mn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(af=zn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Qh(r,c)));break;case 22:if(c&512&&(Qe||o===null||Zt(o,o.return)),q=r.memoizedState!==null,Y=o!==null&&o.memoizedState!==null,ee=sr,ie=Qe,sr=ee||q,Qe=ie||Y,yn(s,r),Qe=ie,sr=ee,mn(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=q?s._visibility&-2:s._visibility|1,q&&(s=sr||Qe,o===null||Y||s||ms(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(o=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){Y=o=s;try{if(d=Y.stateNode,q)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{w=Y.stateNode,R=Y.memoizedProps.style;var J=R!=null&&R.hasOwnProperty("display")?R.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){Ne(Y,Y.return,ge)}}}else if(s.tag===6){if(o===null){Y=s;try{Y.stateNode.nodeValue=q?"":Y.memoizedProps}catch(ge){Ne(Y,Y.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Qh(r,o))));break;case 19:yn(s,r),mn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Qh(r,c)));break;case 21:break;default:yn(s,r),mn(r)}}function mn(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var o=r.return;o!==null;){if(M0(o)){var c=o;break e}o=o.return}throw Error(i(160))}switch(c.tag){case 27:var d=c.stateNode,y=Yh(r);Yl(r,y,d);break;case 5:var w=c.stateNode;c.flags&32&&(es(w,""),c.flags&=-33);var R=Yh(r);Yl(r,R,w);break;case 3:case 4:var q=c.stateNode.containerInfo,Y=Yh(r);Xh(r,Y,q);break;default:throw Error(i(161))}}}catch(ee){Ne(r,r.return,ee)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function j0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;j0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function or(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)R0(r,s.alternate,s),s=s.sibling}function ms(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:jr(4,s,s.return),ms(s);break;case 1:Zt(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&A0(s,s.return,o),ms(s);break;case 26:case 27:case 5:Zt(s,s.return),ms(s);break;case 22:Zt(s,s.return),s.memoizedState===null&&ms(s);break;default:ms(s)}r=r.sibling}}function zr(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=r,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:zr(d,y,o),Na(4,y);break;case 1:if(zr(d,y,o),c=y,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){Ne(c,c.return,Y)}if(c=y,d=c.updateQueue,d!==null){var R=c.stateNode;try{var q=d.shared.hiddenCallbacks;if(q!==null)for(d.shared.hiddenCallbacks=null,d=0;d<q.length;d++)w0(q[d],R)}catch(Y){Ne(c,c.return,Y)}}o&&w&64&&S0(y),_i(y,y.return);break;case 26:case 27:case 5:zr(d,y,o),o&&c===null&&w&4&&E0(y),_i(y,y.return);break;case 12:zr(d,y,o);break;case 13:zr(d,y,o),o&&w&4&&D0(d,y);break;case 22:y.memoizedState===null&&zr(d,y,o),_i(y,y.return);break;default:zr(d,y,o)}s=s.sibling}}function Kh(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ra(o))}function Zh(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ra(r))}function Ur(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)z0(r,s,o,c),s=s.sibling}function z0(r,s,o,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ur(r,s,o,c),d&2048&&Na(9,s);break;case 3:Ur(r,s,o,c),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ra(r)));break;case 12:if(d&2048){Ur(r,s,o,c),r=s.stateNode;try{var y=s.memoizedProps,w=y.id,R=y.onPostCommit;typeof R=="function"&&R(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){Ne(s,s.return,q)}}else Ur(r,s,o,c);break;case 23:break;case 22:y=s.stateNode,s.memoizedState!==null?y._visibility&4?Ur(r,s,o,c):qa(r,s):y._visibility&4?Ur(r,s,o,c):(y._visibility|=4,vs(r,s,o,c,(s.subtreeFlags&10256)!==0)),d&2048&&Kh(s.alternate,s);break;case 24:Ur(r,s,o,c),d&2048&&Zh(s.alternate,s);break;default:Ur(r,s,o,c)}}function vs(r,s,o,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=r,w=s,R=o,q=c,Y=w.flags;switch(w.tag){case 0:case 11:case 15:vs(y,w,R,q,d),Na(8,w);break;case 23:break;case 22:var ee=w.stateNode;w.memoizedState!==null?ee._visibility&4?vs(y,w,R,q,d):qa(y,w):(ee._visibility|=4,vs(y,w,R,q,d)),d&&Y&2048&&Kh(w.alternate,w);break;case 24:vs(y,w,R,q,d),d&&Y&2048&&Zh(w.alternate,w);break;default:vs(y,w,R,q,d)}s=s.sibling}}function qa(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,d=c.flags;switch(c.tag){case 22:qa(o,c),d&2048&&Kh(c.alternate,c);break;case 24:qa(o,c),d&2048&&Zh(c.alternate,c);break;default:qa(o,c)}s=s.sibling}}var Ga=8192;function bs(r){if(r.subtreeFlags&Ga)for(r=r.child;r!==null;)U0(r),r=r.sibling}function U0(r){switch(r.tag){case 26:bs(r),r.flags&Ga&&r.memoizedState!==null&&nT(Tn,r.memoizedState,r.memoizedProps);break;case 5:bs(r);break;case 3:case 4:var s=Tn;Tn=lu(r.stateNode.containerInfo),bs(r),Tn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Ga,Ga=16777216,bs(r),Ga=s):bs(r));break;default:bs(r)}}function L0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ha(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];mt=c,N0(c,r)}L0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I0(r),r=r.sibling}function I0(r){switch(r.tag){case 0:case 11:case 15:Ha(r),r.flags&2048&&jr(9,r,r.return);break;case 3:Ha(r);break;case 12:Ha(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,Xl(r)):Ha(r);break;default:Ha(r)}}function Xl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];mt=c,N0(c,r)}L0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:jr(8,s,s.return),Xl(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,Xl(s));break;default:Xl(s)}r=r.sibling}}function N0(r,s){for(;mt!==null;){var o=mt;switch(o.tag){case 0:case 11:case 15:jr(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ra(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,mt=c;else e:for(o=r;mt!==null;){c=mt;var d=c.sibling,y=c.return;if(O0(c),c===o){mt=null;break e}if(d!==null){d.return=y,mt=d;break e}mt=y}}}function gE(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(r,s,o,c){return new gE(r,s,o,c)}function Jh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Lr(r,s){var o=r.alternate;return o===null?(o=vn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&31457280,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function q0(r,s){r.flags&=31457282;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Wl(r,s,o,c,d,y){var w=0;if(c=r,typeof r=="function")Jh(r)&&(w=1);else if(typeof r=="string")w=eT(r,o,$e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case f:return wi(o.children,d,y,s);case p:w=8,d|=24;break;case g:return r=vn(12,o,s,d|2),r.elementType=g,r.lanes=y,r;case M:return r=vn(13,o,s,d),r.elementType=M,r.lanes=y,r;case x:return r=vn(19,o,s,d),r.elementType=x,r.lanes=y,r;case A:return G0(o,d,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case m:case b:w=10;break e;case v:w=9;break e;case _:w=11;break e;case E:w=14;break e;case C:w=16,c=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=vn(w,o,s,d),s.elementType=r,s.type=c,s.lanes=y,s}function wi(r,s,o,c){return r=vn(7,r,c,s),r.lanes=o,r}function G0(r,s,o,c){r=vn(22,r,c,s),r.elementType=A,r.lanes=o;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=d._current;if(y===null)throw Error(i(456));if((d._pendingVisibility&2)===0){var w=Tr(y,2);w!==null&&(d._pendingVisibility|=2,It(w,y,2))}},attach:function(){var y=d._current;if(y===null)throw Error(i(456));if((d._pendingVisibility&2)!==0){var w=Tr(y,2);w!==null&&(d._pendingVisibility&=-3,It(w,y,2))}}};return r.stateNode=d,r}function ef(r,s,o){return r=vn(6,r,null,s),r.lanes=o,r}function tf(r,s,o){return s=vn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function lr(r){r.flags|=4}function H0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Mv(s)){if(s=gn.current,s!==null&&((Be&4194176)===Be?Ln!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==Ln))throw Ma=ah,am;r.flags|=8192}}function Ql(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?oy():536870912,r.lanes|=s,ws|=s)}function $a(r,s){if(!ze)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ve(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&31457280,c|=d.flags&31457280,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function yE(r,s,o){var c=s.pendingProps;switch(ih(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(s),null;case 1:return Ve(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ir(ht),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Sa(s)?lr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,En!==null&&(cf(En),En=null))),Ve(s),null;case 26:return o=s.memoizedState,r===null?(lr(s),o!==null?(Ve(s),H0(s,o)):(Ve(s),s.flags&=-16777217)):o?o!==r.memoizedState?(lr(s),Ve(s),H0(s,o)):(Ve(s),s.flags&=-16777217):(r.memoizedProps!==c&&lr(s),Ve(s),s.flags&=-16777217),null;case 27:Xi(s),o=nt.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&lr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ve(s),null}r=$e.current,Sa(s)?im(s):(r=bv(d,c,o),s.stateNode=r,lr(s))}return Ve(s),null;case 5:if(Xi(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&lr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ve(s),null}if(r=$e.current,Sa(s))im(s);else{switch(d=ou(nt.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?d.createElement(o,{is:c.is}):d.createElement(o)}}r[Rt]=s,r[Gt]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;e:switch(Et(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&lr(s)}}return Ve(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&lr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=nt.current,Sa(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,d=Lt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}r[Rt]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||dv(r.nodeValue,o)),r||hi(s)}else r=ou(r).createTextNode(c),r[Rt]=s,s.stateNode=r}return Ve(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Sa(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Rt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ve(s),d=!1}else En!==null&&(cf(En),En=null),d=!0;if(!d)return s.flags&256?(er(s),s):(er(s),null)}if(er(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==d&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Ql(s,s.updateQueue),Ve(s),null;case 4:return Ae(),r===null&&wf(s.stateNode.containerInfo),Ve(s),null;case 10:return ir(s.type),Ve(s),null;case 19:if(pe(ct),d=s.memoizedState,d===null)return Ve(s),null;if(c=(s.flags&128)!==0,y=d.rendering,y===null)if(c)$a(d,!1);else{if(Ke!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=Dl(r),y!==null){for(s.flags|=128,$a(d,!1),r=y.updateQueue,s.updateQueue=r,Ql(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)q0(o,r),o=o.sibling;return he(ct,ct.current&1|2),s.child}r=r.sibling}d.tail!==null&&zn()>Kl&&(s.flags|=128,c=!0,$a(d,!1),s.lanes=4194304)}else{if(!c)if(r=Dl(y),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Ql(s,r),$a(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!ze)return Ve(s),null}else 2*zn()-d.renderingStartTime>Kl&&o!==536870912&&(s.flags|=128,c=!0,$a(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(r=d.last,r!==null?r.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=zn(),s.sibling=null,r=ct.current,he(ct,c?r&1|2:r&1),s):(Ve(s),null);case 22:case 23:return er(s),lh(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Ve(s),s.subtreeFlags&6&&(s.flags|=8192)):Ve(s),o=s.updateQueue,o!==null&&Ql(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&pe(di),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ir(ht),Ve(s),null;case 25:return null}throw Error(i(156,s.tag))}function mE(r,s){switch(ih(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ir(ht),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Xi(s),null;case 13:if(er(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Aa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return pe(ct),null;case 4:return Ae(),null;case 10:return ir(s.type),null;case 22:case 23:return er(s),lh(),r!==null&&pe(di),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ir(ht),null;case 25:return null;default:return null}}function $0(r,s){switch(ih(s),s.tag){case 3:ir(ht),Ae();break;case 26:case 27:case 5:Xi(s);break;case 4:Ae();break;case 13:er(s);break;case 19:pe(ct);break;case 10:ir(s.type);break;case 22:case 23:er(s),lh(),r!==null&&pe(di);break;case 24:ir(ht)}}var vE={getCacheForType:function(r){var s=Ot(ht),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},bE=typeof WeakMap=="function"?WeakMap:Map,Ye=0,qe=null,ke=null,Be=0,Ge=0,en=null,ur=!1,_s=!1,nf=!1,cr=0,Ke=0,Ir=0,xi=0,rf=0,bn=0,ws=0,Fa=null,Nn=null,sf=!1,af=0,Kl=1/0,Zl=null,Nr=null,Jl=!1,Si=null,Va=0,of=0,lf=null,Ya=0,uf=null;function tn(){if((Ye&2)!==0&&Be!==0)return Be&-Be;if(j.T!==null){var r=fs;return r!==0?r:mf()}return hy()}function F0(){bn===0&&(bn=(Be&536870912)===0||ze?ay():536870912);var r=gn.current;return r!==null&&(r.flags|=32),bn}function It(r,s,o){(r===qe&&Ge===2||r.cancelPendingCommit!==null)&&(xs(r,0),hr(r,Be,bn,!1)),ha(r,o),((Ye&2)===0||r!==qe)&&(r===qe&&((Ye&2)===0&&(xi|=o),Ke===4&&hr(r,Be,bn,!1)),qn(r))}function V0(r,s,o){if((Ye&6)!==0)throw Error(i(327));var c=!o&&(s&60)===0&&(s&r.expiredLanes)===0||ca(r,s),d=c?xE(r,s):df(r,s,!0),y=c;do{if(d===0){_s&&!c&&hr(r,s,0,!1);break}else if(d===6)hr(r,s,0,!ur);else{if(o=r.current.alternate,y&&!_E(o)){d=df(r,s,!1),y=!1;continue}if(d===2){if(y=s,r.errorRecoveryDisabledLanes&y)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var R=r;d=Fa;var q=R.current.memoizedState.isDehydrated;if(q&&(xs(R,w).flags|=256),w=df(R,w,!1),w!==2){if(nf&&!q){R.errorRecoveryDisabledLanes|=y,xi|=y,d=4;break e}y=Nn,Nn=d,y!==null&&cf(y)}d=w}if(y=!1,d!==2)continue}}if(d===1){xs(r,0),hr(r,s,0,!0);break}e:{switch(c=r,d){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){hr(c,s,bn,!ur);break e}break;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(y=af+300-zn(),10<y)){if(hr(c,s,bn,!ur),fl(c,0)!==0)break e;c.timeoutHandle=yv(Y0.bind(null,c,o,Nn,Zl,sf,s,bn,xi,ws,ur,2,-0,0),y);break e}Y0(c,o,Nn,Zl,sf,s,bn,xi,ws,ur,0,-0,0)}}break}while(!0);qn(r)}function cf(r){Nn===null?Nn=r:Nn.push.apply(Nn,r)}function Y0(r,s,o,c,d,y,w,R,q,Y,ee,ie,K){var J=s.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(Ja={stylesheets:null,count:0,unsuspend:tT},U0(s),s=rT(),s!==null)){r.cancelPendingCommit=s(ev.bind(null,r,o,c,d,w,R,q,1,ie,K)),hr(r,y,w,!Y);return}ev(r,o,c,d,w,R,q,ee,ie,K)}function _E(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],y=d.getSnapshot;d=d.value;try{if(!Kt(y(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hr(r,s,o,c){s&=~rf,s&=~xi,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var d=s;0<d;){var y=31-Qt(d),w=1<<y;c[y]=-1,d&=~w}o!==0&&ly(r,o,s)}function eu(){return(Ye&6)===0?(Xa(0),!1):!0}function hf(){if(ke!==null){if(Ge===0)var r=ke.return;else r=ke,rr=vi=null,yh(r),cs=null,ka=0,r=ke;for(;r!==null;)$0(r.alternate,r),r=r.return;ke=null}}function xs(r,s){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,IE(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),hf(),qe=r,ke=o=Lr(r.current,null),Be=s,Ge=0,en=null,ur=!1,_s=ca(r,s),nf=!1,ws=bn=rf=xi=Ir=Ke=0,Nn=Fa=null,sf=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var d=31-Qt(c),y=1<<d;s|=r[d],c&=~y}return cr=s,Al(),o}function X0(r,s){Ee=null,j.H=In,s===Ta?(s=um(),Ge=3):s===am?(s=um(),Ge=4):Ge=s===o0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,en=s,ke===null&&(Ke=1,$l(r,fn(s,r.current)))}function W0(){var r=j.H;return j.H=In,r===null?In:r}function Q0(){var r=j.A;return j.A=vE,r}function ff(){Ke=4,ur||(Be&4194176)!==Be&&gn.current!==null||(_s=!0),(Ir&134217727)===0&&(xi&134217727)===0||qe===null||hr(qe,Be,bn,!1)}function df(r,s,o){var c=Ye;Ye|=2;var d=W0(),y=Q0();(qe!==r||Be!==s)&&(Zl=null,xs(r,s)),s=!1;var w=Ke;e:do try{if(Ge!==0&&ke!==null){var R=ke,q=en;switch(Ge){case 8:hf(),w=6;break e;case 3:case 2:case 6:gn.current===null&&(s=!0);var Y=Ge;if(Ge=0,en=null,Ss(r,R,q,Y),o&&_s){w=0;break e}break;default:Y=Ge,Ge=0,en=null,Ss(r,R,q,Y)}}wE(),w=Ke;break}catch(ee){X0(r,ee)}while(!0);return s&&r.shellSuspendCounter++,rr=vi=null,Ye=c,j.H=d,j.A=y,ke===null&&(qe=null,Be=0,Al()),w}function wE(){for(;ke!==null;)K0(ke)}function xE(r,s){var o=Ye;Ye|=2;var c=W0(),d=Q0();qe!==r||Be!==s?(Zl=null,Kl=zn()+500,xs(r,s)):_s=ca(r,s);e:do try{if(Ge!==0&&ke!==null){s=ke;var y=en;t:switch(Ge){case 1:Ge=0,en=null,Ss(r,s,y,1);break;case 2:if(om(y)){Ge=0,en=null,Z0(s);break}s=function(){Ge===2&&qe===r&&(Ge=7),qn(r)},y.then(s,s);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:om(y)?(Ge=0,en=null,Z0(s)):(Ge=0,en=null,Ss(r,s,y,7));break;case 5:var w=null;switch(ke.tag){case 26:w=ke.memoizedState;case 5:case 27:var R=ke;if(!w||Mv(w)){Ge=0,en=null;var q=R.sibling;if(q!==null)ke=q;else{var Y=R.return;Y!==null?(ke=Y,tu(Y)):ke=null}break t}}Ge=0,en=null,Ss(r,s,y,5);break;case 6:Ge=0,en=null,Ss(r,s,y,6);break;case 8:hf(),Ke=6;break e;default:throw Error(i(462))}}SE();break}catch(ee){X0(r,ee)}while(!0);return rr=vi=null,j.H=c,j.A=d,Ye=o,ke!==null?0:(qe=null,Be=0,Al(),Ke)}function SE(){for(;ke!==null&&!FS();)K0(ke)}function K0(r){var s=b0(r.alternate,r,cr);r.memoizedProps=r.pendingProps,s===null?tu(r):ke=s}function Z0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=d0(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=d0(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:yh(s);default:$0(o,s),s=ke=q0(s,cr),s=b0(o,s,cr)}r.memoizedProps=r.pendingProps,s===null?tu(r):ke=s}function Ss(r,s,o,c){rr=vi=null,yh(s),cs=null,ka=0;var d=s.return;try{if(hE(r,d,s,o,Be)){Ke=1,$l(r,fn(o,r.current)),ke=null;return}}catch(y){if(d!==null)throw ke=d,y;Ke=1,$l(r,fn(o,r.current)),ke=null;return}s.flags&32768?(ze||c===1?r=!0:_s||(Be&536870912)!==0?r=!1:(ur=r=!0,(c===2||c===3||c===6)&&(c=gn.current,c!==null&&c.tag===13&&(c.flags|=16384))),J0(s,r)):tu(s)}function tu(r){var s=r;do{if((s.flags&32768)!==0){J0(s,ur);return}r=s.return;var o=yE(s.alternate,s,cr);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=r}while(s!==null);Ke===0&&(Ke=5)}function J0(r,s){do{var o=mE(r.alternate,r);if(o!==null){o.flags&=32767,ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ke=r;return}ke=r=o}while(r!==null);Ke=6,ke=null}function ev(r,s,o,c,d,y,w,R,q,Y){var ee=j.T,ie=V.p;try{V.p=2,j.T=null,AE(r,s,o,c,ie,d,y,w,R,q,Y)}finally{j.T=ee,V.p=ie}}function AE(r,s,o,c,d,y,w,R){do As();while(Si!==null);if((Ye&6)!==0)throw Error(i(327));var q=r.finishedWork;if(c=r.finishedLanes,q===null)return null;if(r.finishedWork=null,r.finishedLanes=0,q===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Y=q.lanes|q.childLanes;if(Y|=th,nA(r,c,Y,y,w,R),r===qe&&(ke=qe=null,Be=0),(q.subtreeFlags&10256)===0&&(q.flags&10256)===0||Jl||(Jl=!0,of=Y,lf=o,kE(ul,function(){return As(),null})),o=(q.flags&15990)!==0,(q.subtreeFlags&15990)!==0||o?(o=j.T,j.T=null,y=V.p,V.p=2,w=Ye,Ye|=4,dE(r,q),B0(q,r),XA(Ef,r.containerInfo),du=!!Af,Ef=Af=null,r.current=q,R0(r,q.alternate,q),VS(),Ye=w,V.p=y,j.T=o):r.current=q,Jl?(Jl=!1,Si=r,Va=c):tv(r,Y),Y=r.pendingLanes,Y===0&&(Nr=null),KS(q.stateNode),qn(r),s!==null)for(d=r.onRecoverableError,q=0;q<s.length;q++)Y=s[q],d(Y.value,{componentStack:Y.stack});return(Va&3)!==0&&As(),Y=r.pendingLanes,(c&4194218)!==0&&(Y&42)!==0?r===uf?Ya++:(Ya=0,uf=r):Ya=0,Xa(0),null}function tv(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ra(s)))}function As(){if(Si!==null){var r=Si,s=of;of=0;var o=cy(Va),c=j.T,d=V.p;try{if(V.p=32>o?32:o,j.T=null,Si===null)var y=!1;else{o=lf,lf=null;var w=Si,R=Va;if(Si=null,Va=0,(Ye&6)!==0)throw Error(i(331));var q=Ye;if(Ye|=4,I0(w.current),z0(w,w.current,R,o),Ye=q,Xa(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ua,w)}catch{}y=!0}return y}finally{V.p=d,j.T=c,tv(r,s)}}return!1}function nv(r,s,o){s=fn(o,s),s=Rh(r.stateNode,s,2),r=Br(r,s,2),r!==null&&(ha(r,2),qn(r))}function Ne(r,s,o){if(r.tag===3)nv(r,r,o);else for(;s!==null;){if(s.tag===3){nv(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Nr===null||!Nr.has(c))){r=fn(o,r),o=s0(2),c=Br(s,o,2),c!==null&&(a0(o,c,s,r),ha(c,2),qn(c));break}}s=s.return}}function pf(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new bE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(nf=!0,d.add(o),r=EE.bind(null,r,s,o),s.then(r,r))}function EE(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,qe===r&&(Be&o)===o&&(Ke===4||Ke===3&&(Be&62914560)===Be&&300>zn()-af?(Ye&2)===0&&xs(r,0):rf|=o,ws===Be&&(ws=0)),qn(r)}function rv(r,s){s===0&&(s=oy()),r=Tr(r,s),r!==null&&(ha(r,s),qn(r))}function TE(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),rv(r,o)}function ME(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),rv(r,o)}function kE(r,s){return Oc(r,s)}var nu=null,Es=null,gf=!1,ru=!1,yf=!1,Ai=0;function qn(r){r!==Es&&r.next===null&&(Es===null?nu=Es=r:Es=Es.next=r),ru=!0,gf||(gf=!0,RE(CE))}function Xa(r,s){if(!yf&&ru){yf=!0;do for(var o=!1,c=nu;c!==null;){if(r!==0){var d=c.pendingLanes;if(d===0)var y=0;else{var w=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-Qt(42|r)+1)-1,y&=d&~(w&~R),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(o=!0,av(c,y))}else y=Be,y=fl(c,c===qe?y:0),(y&3)===0||ca(c,y)||(o=!0,av(c,y));c=c.next}while(o);yf=!1}}function CE(){ru=gf=!1;var r=0;Ai!==0&&(LE()&&(r=Ai),Ai=0);for(var s=zn(),o=null,c=nu;c!==null;){var d=c.next,y=iv(c,s);y===0?(c.next=null,o===null?nu=d:o.next=d,d===null&&(Es=o)):(o=c,(r!==0||(y&3)!==0)&&(ru=!0)),c=d}Xa(r)}function iv(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var w=31-Qt(y),R=1<<w,q=d[w];q===-1?((R&o)===0||(R&c)!==0)&&(d[w]=tA(R,s)):q<=s&&(r.expiredLanes|=R),y&=~R}if(s=qe,o=Be,o=fl(r,r===s?o:0),c=r.callbackNode,o===0||r===s&&Ge===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Pc(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ca(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&Pc(c),cy(o)){case 2:case 8:o=iy;break;case 32:o=ul;break;case 268435456:o=sy;break;default:o=ul}return c=sv.bind(null,r),o=Oc(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&Pc(c),r.callbackPriority=2,r.callbackNode=null,2}function sv(r,s){var o=r.callbackNode;if(As()&&r.callbackNode!==o)return null;var c=Be;return c=fl(r,r===qe?c:0),c===0?null:(V0(r,c,s),iv(r,zn()),r.callbackNode!=null&&r.callbackNode===o?sv.bind(null,r):null)}function av(r,s){if(As())return null;V0(r,s,!0)}function RE(r){NE(function(){(Ye&6)!==0?Oc(ry,r):r()})}function mf(){return Ai===0&&(Ai=ay()),Ai}function ov(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ml(""+r)}function lv(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function OE(r,s,o,c,d){if(s==="submit"&&o&&o.stateNode===d){var y=ov((d[Gt]||null).action),w=c.submitter;w&&(s=(s=w[Gt]||null)?ov(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var R=new wl("action","action",null,c,d);r.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ai!==0){var q=w?lv(d,w):new FormData(d);Eh(o,{pending:!0,data:q,method:d.method,action:y},null,q)}}else typeof y=="function"&&(R.preventDefault(),q=w?lv(d,w):new FormData(d),Eh(o,{pending:!0,data:q,method:d.method,action:y},y,q))},currentTarget:d}]})}}for(var vf=0;vf<em.length;vf++){var bf=em[vf],PE=bf.toLowerCase(),DE=bf[0].toUpperCase()+bf.slice(1);An(PE,"on"+DE)}An(Wy,"onAnimationEnd"),An(Qy,"onAnimationIteration"),An(Ky,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(QA,"onTransitionRun"),An(KA,"onTransitionStart"),An(ZA,"onTransitionCancel"),An(Zy,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wa));function uv(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],d=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],q=R.instance,Y=R.currentTarget;if(R=R.listener,q!==y&&d.isPropagationStopped())break e;y=R,d.currentTarget=Y;try{y(d)}catch(ee){Hl(ee)}d.currentTarget=null,y=q}else for(w=0;w<c.length;w++){if(R=c[w],q=R.instance,Y=R.currentTarget,R=R.listener,q!==y&&d.isPropagationStopped())break e;y=R,d.currentTarget=Y;try{y(d)}catch(ee){Hl(ee)}d.currentTarget=null,y=q}}}}function Oe(r,s){var o=s[Bc];o===void 0&&(o=s[Bc]=new Set);var c=r+"__bubble";o.has(c)||(cv(s,r,2,!1),o.add(c))}function _f(r,s,o){var c=0;s&&(c|=4),cv(o,r,c,s)}var iu="_reactListening"+Math.random().toString(36).slice(2);function wf(r){if(!r[iu]){r[iu]=!0,dy.forEach(function(o){o!=="selectionchange"&&(BE.has(o)||_f(o,!1,r),_f(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[iu]||(s[iu]=!0,_f("selectionchange",!1,s))}}function cv(r,s,o,c){switch(Dv(s)){case 2:var d=aT;break;case 8:d=oT;break;default:d=Bf}o=d.bind(null,s,o,r),d=void 0,!Gc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function xf(r,s,o,c,d){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var q=w.tag;if((q===3||q===4)&&(q=w.stateNode.containerInfo,q===d||q.nodeType===8&&q.parentNode===d))return;w=w.return}for(;R!==null;){if(w=ii(R),w===null)return;if(q=w.tag,q===5||q===6||q===26||q===27){c=y=w;continue e}R=R.parentNode}}c=c.return}Ey(function(){var Y=y,ee=Nc(o),ie=[];e:{var K=Jy.get(r);if(K!==void 0){var J=wl,ge=r;switch(r){case"keypress":if(bl(o)===0)break e;case"keydown":case"keyup":J=MA;break;case"focusin":ge="focus",J=Vc;break;case"focusout":ge="blur",J=Vc;break;case"beforeblur":case"afterblur":J=Vc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=gA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=RA;break;case Wy:case Qy:case Ky:J=vA;break;case Zy:J=PA;break;case"scroll":case"scrollend":J=dA;break;case"wheel":J=BA;break;case"copy":case"cut":case"paste":J=_A;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Ry;break;case"toggle":case"beforetoggle":J=zA}var we=(s&4)!==0,Ze=!we&&(r==="scroll"||r==="scrollend"),X=we?K!==null?K+"Capture":null:K;we=[];for(var F=Y,W;F!==null;){var re=F;if(W=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||W===null||X===null||(re=pa(F,X),re!=null&&we.push(Qa(F,re,W))),Ze)break;F=F.return}0<we.length&&(K=new J(K,ge,null,o,ee),ie.push({event:K,listeners:we}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",K&&o!==Ic&&(ge=o.relatedTarget||o.fromElement)&&(ii(ge)||ge[Wi]))break e;if((J||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,J?(ge=o.relatedTarget||o.toElement,J=Y,ge=ge?ii(ge):null,ge!==null&&(Ze=L(ge),we=ge.tag,ge!==Ze||we!==5&&we!==27&&we!==6)&&(ge=null)):(J=null,ge=Y),J!==ge)){if(we=ky,re="onMouseLeave",X="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(we=Ry,re="onPointerLeave",X="onPointerEnter",F="pointer"),Ze=J==null?K:da(J),W=ge==null?K:da(ge),K=new we(re,F+"leave",J,o,ee),K.target=Ze,K.relatedTarget=W,re=null,ii(ee)===Y&&(we=new we(X,F+"enter",ge,o,ee),we.target=W,we.relatedTarget=Ze,re=we),Ze=re,J&&ge)t:{for(we=J,X=ge,F=0,W=we;W;W=Ts(W))F++;for(W=0,re=X;re;re=Ts(re))W++;for(;0<F-W;)we=Ts(we),F--;for(;0<W-F;)X=Ts(X),W--;for(;F--;){if(we===X||X!==null&&we===X.alternate)break t;we=Ts(we),X=Ts(X)}we=null}else we=null;J!==null&&hv(ie,K,J,we,!1),ge!==null&&Ze!==null&&hv(ie,Ze,ge,we,!0)}}e:{if(K=Y?da(Y):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var fe=Ly;else if(zy(K))if(Iy)fe=VA;else{fe=$A;var Te=HA}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Lc(Y.elementType)&&(fe=Ly):fe=FA;if(fe&&(fe=fe(r,Y))){Uy(ie,fe,o,ee);break e}Te&&Te(r,K,Y),r==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Uc(K,"number",K.value)}switch(Te=Y?da(Y):window,r){case"focusin":(zy(Te)||Te.contentEditable==="true")&&(is=Te,Zc=Y,xa=null);break;case"focusout":xa=Zc=is=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Yy(ie,o,ee);break;case"selectionchange":if(WA)break;case"keydown":case"keyup":Yy(ie,o,ee)}var me;if(Xc)e:{switch(r){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else rs?By(r,o)&&(ve="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ve="onCompositionStart");ve&&(Oy&&o.locale!=="ko"&&(rs||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&rs&&(me=Ty()):(Er=ee,Hc="value"in Er?Er.value:Er.textContent,rs=!0)),Te=su(Y,ve),0<Te.length&&(ve=new Cy(ve,r,null,o,ee),ie.push({event:ve,listeners:Te}),me?ve.data=me:(me=jy(o),me!==null&&(ve.data=me)))),(me=LA?IA(r,o):NA(r,o))&&(ve=su(Y,"onBeforeInput"),0<ve.length&&(Te=new Cy("onBeforeInput","beforeinput",null,o,ee),ie.push({event:Te,listeners:ve}),Te.data=me)),OE(ie,r,Y,o,ee)}uv(ie,s)})}function Qa(r,s,o){return{instance:r,listener:s,currentTarget:o}}function su(r,s){for(var o=s+"Capture",c=[];r!==null;){var d=r,y=d.stateNode;d=d.tag,d!==5&&d!==26&&d!==27||y===null||(d=pa(r,o),d!=null&&c.unshift(Qa(r,d,y)),d=pa(r,s),d!=null&&c.push(Qa(r,d,y))),r=r.return}return c}function Ts(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function hv(r,s,o,c,d){for(var y=s._reactName,w=[];o!==null&&o!==c;){var R=o,q=R.alternate,Y=R.stateNode;if(R=R.tag,q!==null&&q===c)break;R!==5&&R!==26&&R!==27||Y===null||(q=Y,d?(Y=pa(o,y),Y!=null&&w.unshift(Qa(o,Y,q))):d||(Y=pa(o,y),Y!=null&&w.push(Qa(o,Y,q)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var jE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function fv(r){return(typeof r=="string"?r:""+r).replace(jE,`
`).replace(zE,"")}function dv(r,s){return s=fv(s),fv(r)===s}function au(){}function Ie(r,s,o,c,d,y){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||es(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&es(r,""+c);break;case"className":pl(r,"class",c);break;case"tabIndex":pl(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":pl(r,o,c);break;case"style":Sy(r,c,y);break;case"data":if(s!=="object"){pl(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=ml(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Ie(r,s,"name",d.name,d,null),Ie(r,s,"formEncType",d.formEncType,d,null),Ie(r,s,"formMethod",d.formMethod,d,null),Ie(r,s,"formTarget",d.formTarget,d,null)):(Ie(r,s,"encType",d.encType,d,null),Ie(r,s,"method",d.method,d,null),Ie(r,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=ml(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=au);break;case"onScroll":c!=null&&Oe("scroll",r);break;case"onScrollEnd":c!=null&&Oe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=ml(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Oe("beforetoggle",r),Oe("toggle",r),dl(r,"popover",c);break;case"xlinkActuate":Kn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Kn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Kn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Kn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Kn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Kn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":dl(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=hA.get(o)||o,dl(r,o,c))}}function Sf(r,s,o,c,d,y){switch(o){case"style":Sy(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?es(r,c):(typeof c=="number"||typeof c=="bigint")&&es(r,""+c);break;case"onScroll":c!=null&&Oe("scroll",r);break;case"onScrollEnd":c!=null&&Oe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=au);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!py.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),y=r[Gt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(s,y,d),typeof c=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,d);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):dl(r,o,c)}}}function Et(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",r),Oe("load",r);var c=!1,d=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ie(r,s,y,w,o,null)}}d&&Ie(r,s,"srcSet",o.srcSet,o,null),c&&Ie(r,s,"src",o.src,o,null);return;case"input":Oe("invalid",r);var R=y=w=d=null,q=null,Y=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":d=ee;break;case"type":w=ee;break;case"checked":q=ee;break;case"defaultChecked":Y=ee;break;case"value":y=ee;break;case"defaultValue":R=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:Ie(r,s,c,ee,o,null)}}by(r,y,R,q,Y,w,d,!1),gl(r);return;case"select":Oe("invalid",r),c=w=y=null;for(d in o)if(o.hasOwnProperty(d)&&(R=o[d],R!=null))switch(d){case"value":y=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:Ie(r,s,d,R,o,null)}s=y,o=w,r.multiple=!!c,s!=null?Ji(r,!!c,s,!1):o!=null&&Ji(r,!!c,o,!0);return;case"textarea":Oe("invalid",r),y=d=c=null;for(w in o)if(o.hasOwnProperty(w)&&(R=o[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":d=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Ie(r,s,w,R,o,null)}wy(r,c,d,y),gl(r);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ie(r,s,q,c,o,null)}return;case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":Oe("load",r);break;case"video":case"audio":for(c=0;c<Wa.length;c++)Oe(Wa[c],r);break;case"image":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"embed":case"source":case"link":Oe("error",r),Oe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(c=o[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ie(r,s,Y,c,o,null)}return;default:if(Lc(s)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&Sf(r,s,ee,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&Ie(r,s,R,c,o,null))}function UE(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,y=null,w=null,R=null,q=null,Y=null,ee=null;for(J in o){var ie=o[J];if(o.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":q=ie;default:c.hasOwnProperty(J)||Ie(r,s,J,null,c,ie)}}for(var K in c){var J=c[K];if(ie=o[K],c.hasOwnProperty(K)&&(J!=null||ie!=null))switch(K){case"type":y=J;break;case"name":d=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":w=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==ie&&Ie(r,s,K,J,c,ie)}}zc(r,w,R,q,Y,ee,y,d);return;case"select":J=w=R=K=null;for(y in o)if(q=o[y],o.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":J=q;default:c.hasOwnProperty(y)||Ie(r,s,y,null,c,q)}for(d in c)if(y=c[d],q=o[d],c.hasOwnProperty(d)&&(y!=null||q!=null))switch(d){case"value":K=y;break;case"defaultValue":R=y;break;case"multiple":w=y;default:y!==q&&Ie(r,s,d,y,c,q)}s=R,o=w,c=J,K!=null?Ji(r,!!o,K,!1):!!c!=!!o&&(s!=null?Ji(r,!!o,s,!0):Ji(r,!!o,o?[]:"",!1));return;case"textarea":J=K=null;for(R in o)if(d=o[R],o.hasOwnProperty(R)&&d!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ie(r,s,R,null,c,d)}for(w in c)if(d=c[w],y=o[w],c.hasOwnProperty(w)&&(d!=null||y!=null))switch(w){case"value":K=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==y&&Ie(r,s,w,d,c,y)}_y(r,K,J);return;case"option":for(var ge in o)if(K=o[ge],o.hasOwnProperty(ge)&&K!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":r.selected=!1;break;default:Ie(r,s,ge,null,c,K)}for(q in c)if(K=c[q],J=o[q],c.hasOwnProperty(q)&&K!==J&&(K!=null||J!=null))switch(q){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Ie(r,s,q,K,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)K=o[we],o.hasOwnProperty(we)&&K!=null&&!c.hasOwnProperty(we)&&Ie(r,s,we,null,c,K);for(Y in c)if(K=c[Y],J=o[Y],c.hasOwnProperty(Y)&&K!==J&&(K!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Ie(r,s,Y,K,c,J)}return;default:if(Lc(s)){for(var Ze in o)K=o[Ze],o.hasOwnProperty(Ze)&&K!==void 0&&!c.hasOwnProperty(Ze)&&Sf(r,s,Ze,void 0,c,K);for(ee in c)K=c[ee],J=o[ee],!c.hasOwnProperty(ee)||K===J||K===void 0&&J===void 0||Sf(r,s,ee,K,c,J);return}}for(var X in o)K=o[X],o.hasOwnProperty(X)&&K!=null&&!c.hasOwnProperty(X)&&Ie(r,s,X,null,c,K);for(ie in c)K=c[ie],J=o[ie],!c.hasOwnProperty(ie)||K===J||K==null&&J==null||Ie(r,s,ie,K,c,J)}var Af=null,Ef=null;function ou(r){return r.nodeType===9?r:r.ownerDocument}function pv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Tf(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mf=null;function LE(){var r=window.event;return r&&r.type==="popstate"?r===Mf?!1:(Mf=r,!0):(Mf=null,!1)}var yv=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(r){return mv.resolve(null).then(r).catch(qE)}:yv;function qE(r){setTimeout(function(){throw r})}function kf(r,s){var o=s,c=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){r.removeChild(d),io(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);io(s)}function Cf(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cf(o),jc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function GE(r,s,o,c){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[fa])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==d.rel||r.getAttribute("href")!==(d.href==null?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Mn(r.nextSibling),r===null)break}return null}function HE(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Mn(r.nextSibling),r===null))return null;return r}function Mn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function vv(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function bv(r,s,o){switch(s=ou(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var _n=new Map,_v=new Set;function lu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var fr=V.d;V.d={f:$E,r:FE,D:VE,C:YE,L:XE,m:WE,X:KE,S:QE,M:ZE};function $E(){var r=fr.f(),s=eu();return r||s}function FE(r){var s=Qi(r);s!==null&&s.tag===5&&s.type==="form"?Ym(s):fr.r(r)}var Ms=typeof document>"u"?null:document;function wv(r,s,o){var c=Ms;if(c&&typeof s=="string"&&s){var d=cn(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),_v.has(d)||(_v.add(d),r={rel:r,crossOrigin:o,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),Et(s,"link",r),gt(s),c.head.appendChild(s)))}}function VE(r){fr.D(r),wv("dns-prefetch",r,null)}function YE(r,s){fr.C(r,s),wv("preconnect",r,s)}function XE(r,s,o){fr.L(r,s,o);var c=Ms;if(c&&r&&s){var d='link[rel="preload"][as="'+cn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+cn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+cn(o.imageSizes)+'"]')):d+='[href="'+cn(r)+'"]';var y=d;switch(s){case"style":y=ks(r);break;case"script":y=Cs(r)}_n.has(y)||(r=I({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),_n.set(y,r),c.querySelector(d)!==null||s==="style"&&c.querySelector(Ka(y))||s==="script"&&c.querySelector(Za(y))||(s=c.createElement("link"),Et(s,"link",r),gt(s),c.head.appendChild(s)))}}function WE(r,s){fr.m(r,s);var o=Ms;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(r)+'"]',y=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Cs(r)}if(!_n.has(y)&&(r=I({rel:"modulepreload",href:r},s),_n.set(y,r),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Za(y)))return}c=o.createElement("link"),Et(c,"link",r),gt(c),o.head.appendChild(c)}}}function QE(r,s,o){fr.S(r,s,o);var c=Ms;if(c&&r){var d=Ki(c).hoistableStyles,y=ks(r);s=s||"default";var w=d.get(y);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(Ka(y)))R.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":s},o),(o=_n.get(y))&&Rf(r,o);var q=w=c.createElement("link");gt(q),Et(q,"link",r),q._p=new Promise(function(Y,ee){q.onload=Y,q.onerror=ee}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,uu(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:R},d.set(y,w)}}}function KE(r,s){fr.X(r,s);var o=Ms;if(o&&r){var c=Ki(o).hoistableScripts,d=Cs(r),y=c.get(d);y||(y=o.querySelector(Za(d)),y||(r=I({src:r,async:!0},s),(s=_n.get(d))&&Of(r,s),y=o.createElement("script"),gt(y),Et(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function ZE(r,s){fr.M(r,s);var o=Ms;if(o&&r){var c=Ki(o).hoistableScripts,d=Cs(r),y=c.get(d);y||(y=o.querySelector(Za(d)),y||(r=I({src:r,async:!0,type:"module"},s),(s=_n.get(d))&&Of(r,s),y=o.createElement("script"),gt(y),Et(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function xv(r,s,o,c){var d=(d=nt.current)?lu(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ks(o.href),o=Ki(d).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ks(o.href);var y=Ki(d).hoistableStyles,w=y.get(r);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,w),(y=d.querySelector(Ka(r)))&&!y._p&&(w.instance=y,w.state.loading=5),_n.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_n.set(r,o),y||JE(d,r,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cs(o),o=Ki(d).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ks(r){return'href="'+cn(r)+'"'}function Ka(r){return'link[rel="stylesheet"]['+r+"]"}function Sv(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function JE(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Et(s,"link",o),gt(s),r.head.appendChild(s))}function Cs(r){return'[src="'+cn(r)+'"]'}function Za(r){return"script[async]"+r}function Av(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+cn(o.href)+'"]');if(c)return s.instance=c,gt(c),c;var d=I({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),gt(c),Et(c,"style",d),uu(c,o.precedence,r),s.instance=c;case"stylesheet":d=ks(o.href);var y=r.querySelector(Ka(d));if(y)return s.state.loading|=4,s.instance=y,gt(y),y;c=Sv(o),(d=_n.get(d))&&Rf(c,d),y=(r.ownerDocument||r).createElement("link"),gt(y);var w=y;return w._p=new Promise(function(R,q){w.onload=R,w.onerror=q}),Et(y,"link",c),s.state.loading|=4,uu(y,o.precedence,r),s.instance=y;case"script":return y=Cs(o.src),(d=r.querySelector(Za(y)))?(s.instance=d,gt(d),d):(c=o,(d=_n.get(y))&&(c=I({},o),Of(c,d)),r=r.ownerDocument||r,d=r.createElement("script"),gt(d),Et(d,"link",c),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,uu(c,o.precedence,r));return s.instance}function uu(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,y=d,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===s)y=R;else if(y!==d)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Rf(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Of(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var cu=null;function Ev(r,s,o){if(cu===null){var c=new Map,d=cu=new Map;d.set(o,c)}else d=cu,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var y=o[d];if(!(y[fa]||y[Rt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=r+w;var R=c.get(w);R?R.push(y):c.set(w,[y])}}return c}function Tv(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function eT(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Mv(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ja=null;function tT(){}function nT(r,s,o){if(Ja===null)throw Error(i(475));var c=Ja;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=ks(o.href),y=r.querySelector(Ka(d));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=hu.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=y,gt(y);return}y=r.ownerDocument||r,o=Sv(o),(d=_n.get(d))&&Rf(o,d),y=y.createElement("link"),gt(y);var w=y;w._p=new Promise(function(R,q){w.onload=R,w.onerror=q}),Et(y,"link",o),s.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=hu.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function rT(){if(Ja===null)throw Error(i(475));var r=Ja;return r.stylesheets&&r.count===0&&Pf(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Pf(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function hu(){if(this.count--,this.count===0){if(this.stylesheets)Pf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var fu=null;function Pf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,fu=new Map,s.forEach(iT,r),fu=null,hu.call(r))}function iT(r,s){if(!(s.state.loading&4)){var o=fu.get(r);if(o)var c=o.get(null);else{o=new Map,fu.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<d.length;y++){var w=d[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}d=s.instance,w=d.getAttribute("data-precedence"),y=o.get(w)||c,y===c&&o.set(null,d),o.set(w,d),this.count++,c=hu.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),y?y.parentNode.insertBefore(d,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var eo={$$typeof:b,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function sT(r,s,o,c,d,y,w,R){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.hiddenUpdates=Dc(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function kv(r,s,o,c,d,y,w,R,q,Y,ee,ie){return r=new sT(r,s,o,w,R,q,Y,ie),s=1,y===!0&&(s|=24),y=vn(3,null,null,s),r.current=y,y.stateNode=r,s=uh(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:s},Hh(y),r}function Cv(r){return r?(r=os,r):os}function Rv(r,s,o,c,d,y){d=Cv(d),c.context===null?c.context=d:c.pendingContext=d,c=Dr(s),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Br(r,c,s),o!==null&&(It(o,r,s),Ua(o,r,s))}function Ov(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Df(r,s){Ov(r,s),(r=r.alternate)&&Ov(r,s)}function Pv(r){if(r.tag===13){var s=Tr(r,67108864);s!==null&&It(s,r,67108864),Df(r,67108864)}}var du=!0;function aT(r,s,o,c){var d=j.T;j.T=null;var y=V.p;try{V.p=2,Bf(r,s,o,c)}finally{V.p=y,j.T=d}}function oT(r,s,o,c){var d=j.T;j.T=null;var y=V.p;try{V.p=8,Bf(r,s,o,c)}finally{V.p=y,j.T=d}}function Bf(r,s,o,c){if(du){var d=jf(c);if(d===null)xf(r,s,c,pu,o),Bv(r,c);else if(uT(d,r,s,o,c))c.stopPropagation();else if(Bv(r,c),s&4&&-1<lT.indexOf(r)){for(;d!==null;){var y=Qi(d);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=ri(y.pendingLanes);if(w!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var q=1<<31-Qt(w);R.entanglements[1]|=q,w&=~q}qn(y),(Ye&6)===0&&(Kl=zn()+500,Xa(0))}}break;case 13:R=Tr(y,2),R!==null&&It(R,y,2),eu(),Df(y,2)}if(y=jf(c),y===null&&xf(r,s,c,pu,o),y===d)break;d=y}d!==null&&c.stopPropagation()}else xf(r,s,c,null,o)}}function jf(r){return r=Nc(r),zf(r)}var pu=null;function zf(r){if(pu=null,r=ii(r),r!==null){var s=L(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=N(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return pu=r,null}function Dv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(YS()){case ry:return 2;case iy:return 8;case ul:case XS:return 32;case sy:return 268435456;default:return 32}default:return 32}}var Uf=!1,qr=null,Gr=null,Hr=null,to=new Map,no=new Map,$r=[],lT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(r,s){switch(r){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":to.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(s.pointerId)}}function ro(r,s,o,c,d,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[d]},s!==null&&(s=Qi(s),s!==null&&Pv(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function uT(r,s,o,c,d){switch(s){case"focusin":return qr=ro(qr,r,s,o,c,d),!0;case"dragenter":return Gr=ro(Gr,r,s,o,c,d),!0;case"mouseover":return Hr=ro(Hr,r,s,o,c,d),!0;case"pointerover":var y=d.pointerId;return to.set(y,ro(to.get(y)||null,r,s,o,c,d)),!0;case"gotpointercapture":return y=d.pointerId,no.set(y,ro(no.get(y)||null,r,s,o,c,d)),!0}return!1}function jv(r){var s=ii(r.target);if(s!==null){var o=L(s);if(o!==null){if(s=o.tag,s===13){if(s=N(o),s!==null){r.blockedOn=s,rA(r.priority,function(){if(o.tag===13){var c=tn(),d=Tr(o,c);d!==null&&It(d,o,c),Df(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gu(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=jf(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Ic=c,o.target.dispatchEvent(c),Ic=null}else return s=Qi(o),s!==null&&Pv(s),r.blockedOn=o,!1;s.shift()}return!0}function zv(r,s,o){gu(r)&&o.delete(s)}function cT(){Uf=!1,qr!==null&&gu(qr)&&(qr=null),Gr!==null&&gu(Gr)&&(Gr=null),Hr!==null&&gu(Hr)&&(Hr=null),to.forEach(zv),no.forEach(zv)}function yu(r,s){r.blockedOn===s&&(r.blockedOn=null,Uf||(Uf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cT)))}var mu=null;function Uv(r){mu!==r&&(mu=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mu===r&&(mu=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],d=r[s+2];if(typeof c!="function"){if(zf(c||o)===null)continue;break}var y=Qi(o);y!==null&&(r.splice(s,3),s-=3,Eh(y,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function io(r){function s(q){return yu(q,r)}qr!==null&&yu(qr,r),Gr!==null&&yu(Gr,r),Hr!==null&&yu(Hr,r),to.forEach(s),no.forEach(s);for(var o=0;o<$r.length;o++){var c=$r[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<$r.length&&(o=$r[0],o.blockedOn===null);)jv(o),o.blockedOn===null&&$r.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],y=o[c+1],w=d[Gt]||null;if(typeof y=="function")w||Uv(o);else if(w){var R=null;if(y&&y.hasAttribute("formAction")){if(d=y,w=y[Gt]||null)R=w.formAction;else if(zf(d)!==null)continue}else R=w.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),Uv(o)}}}function Lf(r){this._internalRoot=r}vu.prototype.render=Lf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=tn();Rv(o,c,r,s,null,null)},vu.prototype.unmount=Lf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&As(),Rv(r.current,2,null,r,null,null),eu(),s[Wi]=null}};function vu(r){this._internalRoot=r}vu.prototype.unstable_scheduleHydration=function(r){if(r){var s=hy();r={blockedOn:null,target:r,priority:s};for(var o=0;o<$r.length&&s!==0&&s<$r[o].priority;o++);$r.splice(o,0,r),o===0&&jv(r)}};var Lv=e.version;if(Lv!=="19.0.0")throw Error(i(527,Lv,"19.0.0"));V.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=D(s),r=r!==null?G(r):null,r=r===null?null:r.stateNode,r};var hT={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:j,findFiberByHostInstance:ii,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ua=bu.inject(hT),Wt=bu}catch{}}return ao.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",d=t0,y=n0,w=r0,R=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks)),s=kv(r,1,!1,null,null,o,c,d,y,w,R,null),r[Wi]=s.current,wf(r.nodeType===8?r.parentNode:r),new Lf(s)},ao.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,d="",y=t0,w=n0,R=r0,q=null,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(q=o.unstable_transitionCallbacks),o.formState!==void 0&&(Y=o.formState)),s=kv(r,1,!0,s,o??null,c,d,y,w,R,q,Y),s.context=Cv(null),o=s.current,c=tn(),d=Dr(c),d.callback=null,Br(o,d,c),s.current.lanes=c,ha(s,c),qn(s),r[Wi]=s.current,wf(r),new vu(s)},ao.version="19.0.0",ao}var Xv;function AT(){if(Xv)return qf.exports;Xv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qf.exports=ST(),qf.exports}var ET=AT(),Ff={exports:{}},Vf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function TT(){if(Wv)return Vf;Wv=1;var n=mc();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(f,p,g,m,v){var b=a(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=u(function(){function x(z){if(!E){if(E=!0,C=z,z=m(z),v!==void 0&&_.hasValue){var U=_.value;if(v(U,z))return A=U}return A=z}if(U=A,t(C,z))return U;var O=m(z);return v!==void 0&&v(U,O)?(C=z,U):(C=z,A=O)}var E=!1,C,A,k=g===void 0?null:g;return[function(){return x(p())},k===null?void 0:function(){return x(k())}]},[p,g,m,v]);var M=i(f,b[0],b[1]);return l(function(){_.hasValue=!0,_.value=M},[M]),h(M),M},Vf}var Qv;function MT(){return Qv||(Qv=1,Ff.exports=TT()),Ff.exports}var kT=MT();function lx(n){n()}function CT(){let n=null,e=null;return{clear(){n=null,e=null},notify(){lx(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var Kv={notify(){},get:()=>[]};function RT(n,e){let t,i=Kv,a=0,l=!1;function u(M){g();const x=i.subscribe(M);let E=!1;return()=>{E||(E=!0,x(),m())}}function h(){i.notify()}function f(){_.onStateChange&&_.onStateChange()}function p(){return l}function g(){a++,t||(t=n.subscribe(f),i=CT())}function m(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=Kv)}function v(){l||(l=!0,g())}function b(){l&&(l=!1,m())}const _={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:p,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>i};return _}var OT=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PT=OT(),DT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",BT=DT(),jT=()=>PT||BT?de.useLayoutEffect:de.useEffect,zT=jT();function Zv(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function Ro(n,e){if(Zv(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(e,t[a])||!Zv(n[t[a]],e[t[a]]))return!1;return!0}var UT=Symbol.for("react-redux-context"),LT=typeof globalThis<"u"?globalThis:{};function IT(){if(!de.createContext)return{};const n=LT[UT]??=new Map;let e=n.get(de.createContext);return e||(e=de.createContext(null),n.set(de.createContext,e)),e}var Zr=IT();function NT(n){const{children:e,context:t,serverState:i,store:a}=n,l=de.useMemo(()=>{const f=RT(a);return{store:a,subscription:f,getServerState:i?()=>i:void 0}},[a,i]),u=de.useMemo(()=>a.getState(),[a]);zT(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,u]);const h=t||Zr;return de.createElement(h.Provider,{value:l},e)}var qT=NT;function ig(n=Zr){return function(){return de.useContext(n)}}var ux=ig();function cx(n=Zr){const e=n===Zr?ux:ig(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var sg=cx();function GT(n=Zr){const e=n===Zr?sg:cx(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var hx=GT(),HT=(n,e)=>n===e;function $T(n=Zr){const e=n===Zr?ux:ig(n),t=(i,a={})=>{const{equalityFn:l=HT}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:h,subscription:f,getServerState:p}=u;de.useRef(!0);const g=de.useCallback({[i.name](v){return i(v)}}[i.name],[i]),m=kT.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,p||h.getState,g,l);return de.useDebugValue(m),m};return Object.assign(t,{withTypes:()=>t}),t}var fx=$T(),FT=lx;function Mt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var VT=typeof Symbol=="function"&&Symbol.observable||"@@observable",Jv=VT,Yf=()=>Math.random().toString(36).substring(7).split("").join("."),YT={INIT:`@@redux/INIT${Yf()}`,REPLACE:`@@redux/REPLACE${Yf()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yf()}`},nc=YT;function Qs(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function ag(n,e,t){if(typeof n!="function")throw new Error(Mt(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Mt(1));return t(ag)(n,e)}let i=n,a=e,l=new Map,u=l,h=0,f=!1;function p(){u===l&&(u=new Map,l.forEach((x,E)=>{u.set(E,x)}))}function g(){if(f)throw new Error(Mt(3));return a}function m(x){if(typeof x!="function")throw new Error(Mt(4));if(f)throw new Error(Mt(5));let E=!0;p();const C=h++;return u.set(C,x),function(){if(E){if(f)throw new Error(Mt(6));E=!1,p(),u.delete(C),l=null}}}function v(x){if(!Qs(x))throw new Error(Mt(7));if(typeof x.type>"u")throw new Error(Mt(8));if(typeof x.type!="string")throw new Error(Mt(17));if(f)throw new Error(Mt(9));try{f=!0,a=i(a,x)}finally{f=!1}return(l=u).forEach(C=>{C()}),x}function b(x){if(typeof x!="function")throw new Error(Mt(10));i=x,v({type:nc.REPLACE})}function _(){const x=m;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Mt(11));function C(){const k=E;k.next&&k.next(g())}return C(),{unsubscribe:x(C)}},[Jv](){return this}}}return v({type:nc.INIT}),{dispatch:v,subscribe:m,getState:g,replaceReducer:b,[Jv]:_}}function XT(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:nc.INIT})>"u")throw new Error(Mt(12));if(typeof t(void 0,{type:nc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function og(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const u=e[l];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let a;try{XT(t)}catch(l){a=l}return function(u={},h){if(a)throw a;let f=!1;const p={};for(let g=0;g<i.length;g++){const m=i[g],v=t[m],b=u[m],_=v(b,h);if(typeof _>"u")throw h&&h.type,new Error(Mt(14));p[m]=_,f=f||_!==b}return f=f||i.length!==Object.keys(u).length,f?p:u}}function rc(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function WT(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(Mt(15))};const u={getState:a.getState,dispatch:(f,...p)=>l(f,...p)},h=n.map(f=>f(u));return l=rc(...h)(a.dispatch),{...a,dispatch:l}}}function lg(n){return Qs(n)&&"type"in n&&typeof n.type=="string"}var ug=Symbol.for("immer-nothing"),Oo=Symbol.for("immer-draftable"),Xt=Symbol.for("immer-state");function kt(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ni=Object.getPrototypeOf;function Fn(n){return!!n&&!!n[Xt]}function Dn(n){return n?dx(n)||Array.isArray(n)||!!n[Oo]||!!n.constructor?.[Oo]||el(n)||tl(n):!1}var QT=Object.prototype.constructor.toString();function dx(n){if(!n||typeof n!="object")return!1;const e=Ni(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===QT}function KT(n){return Fn(n)||kt(15,n),n[Xt].base_}function qo(n,e){qi(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function qi(n){const e=n[Xt];return e?e.type_:Array.isArray(n)?1:el(n)?2:tl(n)?3:0}function Go(n,e){return qi(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Xf(n,e){return qi(n)===2?n.get(e):n[e]}function px(n,e,t){const i=qi(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function ZT(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function el(n){return n instanceof Map}function tl(n){return n instanceof Set}function Ci(n){return n.copy_||n.base_}function cp(n,e){if(el(n))return new Map(n);if(tl(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=dx(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[Xt];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const u=a[l],h=i[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(Ni(n),i)}else{const i=Ni(n);if(i!==null&&t)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function cg(n,e=!1){return vc(n)||Fn(n)||!Dn(n)||(qi(n)>1&&(n.set=n.add=n.clear=n.delete=JT),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>cg(i,!0))),n}function JT(){kt(2)}function vc(n){return Object.isFrozen(n)}var hp={};function Gi(n){const e=hp[n];return e||kt(0,n),e}function e2(n,e){hp[n]||(hp[n]=e)}var Ho;function gx(){return Ho}function t2(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eb(n,e){e&&(Gi("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function fp(n){dp(n),n.drafts_.forEach(n2),n.drafts_=null}function dp(n){n===Ho&&(Ho=n.parent_)}function tb(n){return Ho=t2(Ho,n)}function n2(n){const e=n[Xt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function nb(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Xt].modified_&&(fp(e),kt(4)),Dn(n)&&(n=ic(e,n),e.parent_||sc(e,n)),e.patches_&&Gi("Patches").generateReplacementPatches_(t[Xt].base_,n,e.patches_,e.inversePatches_)):n=ic(e,t,[]),fp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==ug?n:void 0}function ic(n,e,t){if(vc(e))return e;const i=e[Xt];if(!i)return qo(e,(a,l)=>rb(n,i,e,a,l,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return sc(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,u=!1;i.type_===3&&(l=new Set(a),a.clear(),u=!0),qo(l,(h,f)=>rb(n,i,a,h,f,t,u)),sc(n,a,!1),t&&n.patches_&&Gi("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function rb(n,e,t,i,a,l,u){if(Fn(a)){const h=l&&e&&e.type_!==3&&!Go(e.assigned_,i)?l.concat(i):void 0,f=ic(n,a,h);if(px(t,i,f),Fn(f))n.canAutoFreeze_=!1;else return}else u&&t.add(a);if(Dn(a)&&!vc(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;ic(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&sc(n,a)}}function sc(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&cg(e,t)}function r2(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:gx(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,l=hg;t&&(a=[i],l=$o);const{revoke:u,proxy:h}=Proxy.revocable(a,l);return i.draft_=h,i.revoke_=u,h}var hg={get(n,e){if(e===Xt)return n;const t=Ci(n);if(!Go(t,e))return i2(n,t,e);const i=t[e];return n.finalized_||!Dn(i)?i:i===Wf(n.base_,e)?(Qf(n),n.copy_[e]=gp(i,n)):i},has(n,e){return e in Ci(n)},ownKeys(n){return Reflect.ownKeys(Ci(n))},set(n,e,t){const i=yx(Ci(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=Wf(Ci(n),e),l=a?.[Xt];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(ZT(t,a)&&(t!==void 0||Go(n.base_,e)))return!0;Qf(n),pp(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Wf(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Qf(n),pp(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Ci(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){kt(11)},getPrototypeOf(n){return Ni(n.base_)},setPrototypeOf(){kt(12)}},$o={};qo(hg,(n,e)=>{$o[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});$o.deleteProperty=function(n,e){return $o.set.call(this,n,e,void 0)};$o.set=function(n,e,t){return hg.set.call(this,n[0],e,t,n[0])};function Wf(n,e){const t=n[Xt];return(t?Ci(t):n)[e]}function i2(n,e,t){const i=yx(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function yx(n,e){if(!(e in n))return;let t=Ni(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Ni(t)}}function pp(n){n.modified_||(n.modified_=!0,n.parent_&&pp(n.parent_))}function Qf(n){n.copy_||(n.copy_=cp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var s2=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const l=t;t=e;const u=this;return function(f=l,...p){return u.produce(f,g=>t.call(this,g,...p))}}typeof t!="function"&&kt(6),i!==void 0&&typeof i!="function"&&kt(7);let a;if(Dn(e)){const l=tb(this),u=gp(e,void 0);let h=!0;try{a=t(u),h=!1}finally{h?fp(l):dp(l)}return eb(l,i),nb(a,l)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===ug&&(a=void 0),this.autoFreeze_&&cg(a,!0),i){const l=[],u=[];Gi("Patches").generateReplacementPatches_(e,a,l,u),i(l,u)}return a}else kt(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,f=>e(f,...h));let i,a;return[this.produce(e,t,(u,h)=>{i=u,a=h}),i,a]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Dn(n)||kt(8),Fn(n)&&(n=yp(n));const e=tb(this),t=gp(n,void 0);return t[Xt].isManual_=!0,dp(e),t}finishDraft(n,e){const t=n&&n[Xt];(!t||!t.isManual_)&&kt(9);const{scope_:i}=t;return eb(i,e),nb(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=Gi("Patches").applyPatches_;return Fn(n)?i(n,e):this.produce(n,a=>i(a,e))}};function gp(n,e){const t=el(n)?Gi("MapSet").proxyMap_(n,e):tl(n)?Gi("MapSet").proxySet_(n,e):r2(n,e);return(e?e.scope_:gx()).drafts_.push(t),t}function yp(n){return Fn(n)||kt(10,n),mx(n)}function mx(n){if(!Dn(n)||vc(n))return n;const e=n[Xt];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=cp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=cp(n,!0);return qo(t,(i,a)=>{px(t,i,mx(a))}),e&&(e.finalized_=!1),t}function a2(){const e="replace",i="remove";function a(v,b,_,M){switch(v.type_){case 0:case 2:return u(v,b,_,M);case 1:return l(v,b,_,M);case 3:return h(v,b,_,M)}}function l(v,b,_,M){let{base_:x,assigned_:E}=v,C=v.copy_;C.length<x.length&&([x,C]=[C,x],[_,M]=[M,_]);for(let A=0;A<x.length;A++)if(E[A]&&C[A]!==x[A]){const k=b.concat([A]);_.push({op:e,path:k,value:m(C[A])}),M.push({op:e,path:k,value:m(x[A])})}for(let A=x.length;A<C.length;A++){const k=b.concat([A]);_.push({op:"add",path:k,value:m(C[A])})}for(let A=C.length-1;x.length<=A;--A){const k=b.concat([A]);M.push({op:i,path:k})}}function u(v,b,_,M){const{base_:x,copy_:E}=v;qo(v.assigned_,(C,A)=>{const k=Xf(x,C),z=Xf(E,C),U=A?Go(x,C)?e:"add":i;if(k===z&&U===e)return;const O=b.concat(C);_.push(U===i?{op:U,path:O}:{op:U,path:O,value:z}),M.push(U==="add"?{op:i,path:O}:U===i?{op:"add",path:O,value:m(k)}:{op:e,path:O,value:m(k)})})}function h(v,b,_,M){let{base_:x,copy_:E}=v,C=0;x.forEach(A=>{if(!E.has(A)){const k=b.concat([C]);_.push({op:i,path:k,value:A}),M.unshift({op:"add",path:k,value:A})}C++}),C=0,E.forEach(A=>{if(!x.has(A)){const k=b.concat([C]);_.push({op:"add",path:k,value:A}),M.unshift({op:i,path:k,value:A})}C++})}function f(v,b,_,M){_.push({op:e,path:[],value:b===ug?void 0:b}),M.push({op:e,path:[],value:v})}function p(v,b){return b.forEach(_=>{const{path:M,op:x}=_;let E=v;for(let z=0;z<M.length-1;z++){const U=qi(E);let O=M[z];typeof O!="string"&&typeof O!="number"&&(O=""+O),(U===0||U===1)&&(O==="__proto__"||O==="constructor")&&kt(19),typeof E=="function"&&O==="prototype"&&kt(19),E=Xf(E,O),typeof E!="object"&&kt(18,M.join("/"))}const C=qi(E),A=g(_.value),k=M[M.length-1];switch(x){case e:switch(C){case 2:return E.set(k,A);case 3:kt(16);default:return E[k]=A}case"add":switch(C){case 1:return k==="-"?E.push(A):E.splice(k,0,A);case 2:return E.set(k,A);case 3:return E.add(A);default:return E[k]=A}case i:switch(C){case 1:return E.splice(k,1);case 2:return E.delete(k);case 3:return E.delete(_.value);default:return delete E[k]}default:kt(17,x)}}),v}function g(v){if(!Dn(v))return v;if(Array.isArray(v))return v.map(g);if(el(v))return new Map(Array.from(v.entries()).map(([_,M])=>[_,g(M)]));if(tl(v))return new Set(Array.from(v).map(g));const b=Object.create(Ni(v));for(const _ in v)b[_]=g(v[_]);return Go(v,Oo)&&(b[Oo]=v[Oo]),b}function m(v){return Fn(v)?g(v):v}e2("Patches",{applyPatches_:p,generatePatches_:a,generateReplacementPatches_:f})}var ln=new s2,nl=ln.produce,vx=ln.produceWithPatches.bind(ln);ln.setAutoFreeze.bind(ln);ln.setUseStrictShallowCopy.bind(ln);var ib=ln.applyPatches.bind(ln);ln.createDraft.bind(ln);ln.finishDraft.bind(ln);function o2(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function l2(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function u2(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var sb=n=>Array.isArray(n)?n:[n];function c2(n){const e=Array.isArray(n[0])?n[0]:n;return u2(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function h2(n,e){const t=[],{length:i}=n;for(let a=0;a<i;a++)t.push(n[a].apply(null,e));return t}var f2=class{constructor(n){this.value=n}deref(){return this.value}},d2=typeof WeakRef<"u"?WeakRef:f2,p2=0,ab=1;function _u(){return{s:p2,v:void 0,o:null,p:null}}function ac(n,e={}){let t=_u();const{resultEqualityCheck:i}=e;let a,l=0;function u(){let h=t;const{length:f}=arguments;for(let m=0,v=f;m<v;m++){const b=arguments[m];if(typeof b=="function"||typeof b=="object"&&b!==null){let _=h.o;_===null&&(h.o=_=new WeakMap);const M=_.get(b);M===void 0?(h=_u(),_.set(b,h)):h=M}else{let _=h.p;_===null&&(h.p=_=new Map);const M=_.get(b);M===void 0?(h=_u(),_.set(b,h)):h=M}}const p=h;let g;if(h.s===ab)g=h.v;else if(g=n.apply(null,arguments),l++,i){const m=a?.deref?.()??a;m!=null&&i(m,g)&&(g=m,l!==0&&l--),a=typeof g=="object"&&g!==null||typeof g=="function"?new d2(g):g}return p.s=ab,p.v=g,g}return u.clearCache=()=>{t=_u(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}function g2(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...a)=>{let l=0,u=0,h,f={},p=a.pop();typeof p=="object"&&(f=p,p=a.pop()),o2(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const g={...t,...f},{memoize:m,memoizeOptions:v=[],argsMemoize:b=ac,argsMemoizeOptions:_=[]}=g,M=sb(v),x=sb(_),E=c2(a),C=m(function(){return l++,p.apply(null,arguments)},...M),A=b(function(){u++;const z=h2(E,arguments);return h=C.apply(null,z),h},...x);return Object.assign(A,{resultFunc:p,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>h,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:m,argsMemoize:b})};return Object.assign(i,{withTypes:()=>i}),i}var fg=g2(ac),y2=Object.assign((n,e=fg)=>{l2(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(l=>n[l]);return e(i,(...l)=>l.reduce((u,h,f)=>(u[t[f]]=h,u),{}))},{withTypes:()=>y2});function bx(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var m2=bx(),v2=bx,b2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rc:rc.apply(null,arguments)},_2=n=>n&&typeof n.match=="function";function qt(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(xt(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>lg(i)&&i.type===n,t}var _x=class wo extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,wo.prototype)}static get[Symbol.species](){return wo}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new wo(...e[0].concat(this)):new wo(...e.concat(this))}};function ob(n){return Dn(n)?nl(n,()=>{}):n}function mp(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function w2(n){return typeof n=="boolean"}var x2=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let u=new _x;return t&&(w2(t)?u.push(m2):u.push(v2(t.extraArgument))),u},bc="RTK_autoBatch",oo=()=>n=>({payload:n,meta:{[bc]:!0}}),lb=n=>e=>{setTimeout(e,n)},S2=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,u=!1;const h=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lb(10):n.type==="callback"?n.queueNotification:lb(n.timeout),p=()=>{u=!1,l&&(l=!1,h.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const m=()=>a&&g(),v=i.subscribe(m);return h.add(g),()=>{v(),h.delete(g)}},dispatch(g){try{return a=!g?.meta?.[bc],l=!a,l&&(u||(u=!0,f(p))),i.dispatch(g)}finally{a=!0}}})},A2=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new _x(n);return i&&a.push(S2(typeof i=="object"?i:void 0)),a};function E2(n){const e=x2(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(Qs(t))h=og(t);else throw new Error(xt(1));let f;typeof i=="function"?f=i(e):f=e();let p=rc;a&&(p=b2({trace:!1,...typeof a=="object"&&a}));const g=WT(...f),m=A2(g);let v=typeof u=="function"?u(m):m();const b=p(...v);return ag(h,l,b)}function wx(n){const e={},t=[];let i;const a={addCase(l,u){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(xt(28));if(h in e)throw new Error(xt(29));return e[h]=u,a},addMatcher(l,u){return t.push({matcher:l,reducer:u}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function T2(n){return typeof n=="function"}function M2(n,e){let[t,i,a]=wx(e),l;if(T2(n))l=()=>ob(n());else{const h=ob(n);l=()=>h}function u(h=l(),f){let p=[t[f.type],...i.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[a]),p.reduce((g,m)=>{if(m)if(Fn(g)){const b=m(g,f);return b===void 0?g:b}else{if(Dn(g))return nl(g,v=>m(v,f));{const v=m(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},h)}return u.getInitialState=l,u}var xx=(n,e)=>_2(n)?n.match(e):n(e);function xr(...n){return e=>n.some(t=>xx(t,e))}function Po(...n){return e=>n.every(t=>xx(t,e))}function _c(n,e){if(!n||!n.meta)return!1;const t=typeof n.meta.requestId=="string",i=e.indexOf(n.meta.requestStatus)>-1;return t&&i}function rl(n){return typeof n[0]=="function"&&"pending"in n[0]&&"fulfilled"in n[0]&&"rejected"in n[0]}function dg(...n){return n.length===0?e=>_c(e,["pending"]):rl(n)?xr(...n.map(e=>e.pending)):dg()(n[0])}function Ks(...n){return n.length===0?e=>_c(e,["rejected"]):rl(n)?xr(...n.map(e=>e.rejected)):Ks()(n[0])}function wc(...n){const e=t=>t&&t.meta&&t.meta.rejectedWithValue;return n.length===0?Po(Ks(...n),e):rl(n)?Po(Ks(...n),e):wc()(n[0])}function Jr(...n){return n.length===0?e=>_c(e,["fulfilled"]):rl(n)?xr(...n.map(e=>e.fulfilled)):Jr()(n[0])}function vp(...n){return n.length===0?e=>_c(e,["pending","fulfilled","rejected"]):rl(n)?xr(...n.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):vp()(n[0])}var k2="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",il=(n=21)=>{let e="",t=n;for(;t--;)e+=k2[Math.random()*64|0];return e},C2=["name","message","stack","code"],Kf=class{constructor(n,e){this.payload=n,this.meta=e}_type},ub=class{constructor(n,e){this.payload=n,this.meta=e}_type},R2=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of C2)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},cb="External signal was aborted",hb=(()=>{function n(e,t,i){const a=qt(e+"/fulfilled",(f,p,g,m)=>({payload:f,meta:{...m||{},arg:g,requestId:p,requestStatus:"fulfilled"}})),l=qt(e+"/pending",(f,p,g)=>({payload:void 0,meta:{...g||{},arg:p,requestId:f,requestStatus:"pending"}})),u=qt(e+"/rejected",(f,p,g,m,v)=>({payload:m,error:(i&&i.serializeError||R2)(f||"Rejected"),meta:{...v||{},arg:g,requestId:p,rejectedWithValue:!!m,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function h(f,{signal:p}={}){return(g,m,v)=>{const b=i?.idGenerator?i.idGenerator(f):il(),_=new AbortController;let M,x;function E(A){x=A,_.abort()}p&&(p.aborted?E(cb):p.addEventListener("abort",()=>E(cb),{once:!0}));const C=(async function(){let A;try{let z=i?.condition?.(f,{getState:m,extra:v});if(P2(z)&&(z=await z),z===!1||_.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const U=new Promise((O,B)=>{M=()=>{B({name:"AbortError",message:x||"Aborted"})},_.signal.addEventListener("abort",M)});g(l(b,f,i?.getPendingMeta?.({requestId:b,arg:f},{getState:m,extra:v}))),A=await Promise.race([U,Promise.resolve(t(f,{dispatch:g,getState:m,extra:v,requestId:b,signal:_.signal,abort:E,rejectWithValue:(O,B)=>new Kf(O,B),fulfillWithValue:(O,B)=>new ub(O,B)})).then(O=>{if(O instanceof Kf)throw O;return O instanceof ub?a(O.payload,b,f,O.meta):a(O,b,f)})])}catch(z){A=z instanceof Kf?u(null,b,f,z.payload,z.meta):u(z,b,f)}finally{M&&_.signal.removeEventListener("abort",M)}return i&&!i.dispatchConditionRejection&&u.match(A)&&A.meta.condition||g(A),A})();return Object.assign(C,{abort:E,requestId:b,arg:f,unwrap(){return C.then(O2)}})}}return Object.assign(h,{pending:l,rejected:u,fulfilled:a,settled:xr(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function O2(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function P2(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var D2=Symbol.for("rtk-slice-createasyncthunk");function B2(n,e){return`${n}/${e}`}function j2({creators:n}={}){const e=n?.asyncThunk?.[D2];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(xt(11));const u=(typeof i.reducers=="function"?i.reducers(U2()):i.reducers)||{},h=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(C,A){const k=typeof C=="string"?C:C.type;if(!k)throw new Error(xt(12));if(k in f.sliceCaseReducersByType)throw new Error(xt(13));return f.sliceCaseReducersByType[k]=A,p},addMatcher(C,A){return f.sliceMatchers.push({matcher:C,reducer:A}),p},exposeAction(C,A){return f.actionCreators[C]=A,p},exposeCaseReducer(C,A){return f.sliceCaseReducersByName[C]=A,p}};h.forEach(C=>{const A=u[C],k={reducerName:C,type:B2(a,C),createNotation:typeof i.reducers=="function"};I2(A)?q2(k,A,p,e):L2(k,A,p)});function g(){const[C={},A=[],k=void 0]=typeof i.extraReducers=="function"?wx(i.extraReducers):[i.extraReducers],z={...C,...f.sliceCaseReducersByType};return M2(i.initialState,U=>{for(let O in z)U.addCase(O,z[O]);for(let O of f.sliceMatchers)U.addMatcher(O.matcher,O.reducer);for(let O of A)U.addMatcher(O.matcher,O.reducer);k&&U.addDefaultCase(k)})}const m=C=>C,v=new Map;let b;function _(C,A){return b||(b=g()),b(C,A)}function M(){return b||(b=g()),b.getInitialState()}function x(C,A=!1){function k(U){let O=U[C];return typeof O>"u"&&A&&(O=M()),O}function z(U=m){const O=mp(v,A,()=>new WeakMap);return mp(O,U,()=>{const B={};for(const[j,I]of Object.entries(i.selectors??{}))B[j]=z2(I,U,M,A);return B})}return{reducerPath:C,getSelectors:z,get selectors(){return z(k)},selectSlice:k}}const E={name:a,reducer:_,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:M,...x(l),injectInto(C,{reducerPath:A,...k}={}){const z=A??l;return C.inject({reducerPath:z,reducer:_},k),{...E,...x(z,!0)}}};return E}}function z2(n,e,t,i){function a(l,...u){let h=e(l);return typeof h>"u"&&i&&(h=t()),n(h,...u)}return a.unwrapped=n,a}var vr=j2();function U2(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function L2({type:n,reducerName:e,createNotation:t},i,a){let l,u;if("reducer"in i){if(t&&!N2(i))throw new Error(xt(17));l=i.reducer,u=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,u?qt(n,u):qt(n))}function I2(n){return n._reducerDefinitionType==="asyncThunk"}function N2(n){return n._reducerDefinitionType==="reducerWithPrepare"}function q2({type:n,reducerName:e},t,i,a){if(!a)throw new Error(xt(18));const{payloadCreator:l,fulfilled:u,pending:h,rejected:f,settled:p,options:g}=t,m=a(n,l,g);i.exposeAction(e,m),u&&i.addCase(m.fulfilled,u),h&&i.addCase(m.pending,h),f&&i.addCase(m.rejected,f),p&&i.addMatcher(m.settled,p),i.exposeCaseReducer(e,{fulfilled:u||wu,pending:h||wu,rejected:f||wu,settled:p||wu})}function wu(){}var G2="task",Sx="listener",Ax="completed",pg="cancelled",H2=`task-${pg}`,$2=`task-${Ax}`,bp=`${Sx}-${pg}`,F2=`${Sx}-${Ax}`,xc=class{constructor(n){this.code=n,this.message=`${G2} ${pg} (reason: ${n})`}name="TaskAbortError";message},gg=(n,e)=>{if(typeof n!="function")throw new TypeError(xt(32))},oc=()=>{},Ex=(n,e=oc)=>(n.catch(e),n),Tx=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Li=(n,e)=>{const t=n.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),n.abort(e))},Ii=n=>{if(n.aborted){const{reason:e}=n;throw new xc(e)}};function Mx(n,e){let t=oc;return new Promise((i,a)=>{const l=()=>a(new xc(n.reason));if(n.aborted){l();return}t=Tx(n,l),e.finally(()=>t()).then(i,a)}).finally(()=>{t=oc})}var V2=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof xc?"cancelled":"rejected",error:t}}finally{e?.()}},lc=n=>e=>Ex(Mx(n,e).then(t=>(Ii(n),t))),kx=n=>{const e=lc(n);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:Vs}=Object,fb={},Sc="listenerMiddleware",Y2=(n,e)=>{const t=i=>Tx(n,()=>Li(i,n.reason));return(i,a)=>{gg(i);const l=new AbortController;t(l);const u=V2(async()=>{Ii(n),Ii(l.signal);const h=await i({pause:lc(l.signal),delay:kx(l.signal),signal:l.signal});return Ii(l.signal),h},()=>Li(l,$2));return a?.autoJoin&&e.push(u.catch(oc)),{result:lc(n)(u),cancel(){Li(l,H2)}}}},X2=(n,e)=>{const t=async(i,a)=>{Ii(e);let l=()=>{};const h=[new Promise((f,p)=>{let g=n({predicate:i,effect:(m,v)=>{v.unsubscribe(),f([m,v.getState(),v.getOriginalState()])}});l=()=>{g(),p()}})];a!=null&&h.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await Mx(e,Promise.race(h));return Ii(e),f}finally{l()}};return(i,a)=>Ex(t(i,a))},Cx=n=>{let{type:e,actionCreator:t,matcher:i,predicate:a,effect:l}=n;if(e)a=qt(e).match;else if(t)e=t.type,a=t.match;else if(i)a=i;else if(!a)throw new Error(xt(21));return gg(l),{predicate:a,type:e,effect:l}},Rx=Vs(n=>{const{type:e,predicate:t,effect:i}=Cx(n);return{id:il(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(xt(22))}}},{withTypes:()=>Rx}),db=(n,e)=>{const{type:t,effect:i,predicate:a}=Cx(e);return Array.from(n.values()).find(l=>(typeof t=="string"?l.type===t:l.predicate===a)&&l.effect===i)},_p=n=>{n.pending.forEach(e=>{Li(e,bp)})},W2=n=>()=>{n.forEach(_p),n.clear()},pb=(n,e,t)=>{try{n(e,t)}catch(i){setTimeout(()=>{throw i},0)}},Ox=Vs(qt(`${Sc}/add`),{withTypes:()=>Ox}),Q2=qt(`${Sc}/removeAll`),Px=Vs(qt(`${Sc}/remove`),{withTypes:()=>Px}),K2=(...n)=>{console.error(`${Sc}/error`,...n)},Z2=(n={})=>{const e=new Map,{extra:t,onError:i=K2}=n;gg(i);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),m=>{g.unsubscribe(),m?.cancelActive&&_p(g)}),l=g=>{const m=db(e,g)??Rx(g);return a(m)};Vs(l,{withTypes:()=>l});const u=g=>{const m=db(e,g);return m&&(m.unsubscribe(),g.cancelActive&&_p(m)),!!m};Vs(u,{withTypes:()=>u});const h=async(g,m,v,b)=>{const _=new AbortController,M=X2(l,_.signal),x=[];try{g.pending.add(_),await Promise.resolve(g.effect(m,Vs({},v,{getOriginalState:b,condition:(E,C)=>M(E,C).then(Boolean),take:M,delay:kx(_.signal),pause:lc(_.signal),extra:t,signal:_.signal,fork:Y2(_.signal,x),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((E,C,A)=>{E!==_&&(Li(E,bp),A.delete(E))})},cancel:()=>{Li(_,bp),g.pending.delete(_)},throwIfCancelled:()=>{Ii(_.signal)}})))}catch(E){E instanceof xc||pb(i,E,{raisedBy:"effect"})}finally{await Promise.all(x),Li(_,F2),g.pending.delete(_)}},f=W2(e);return{middleware:g=>m=>v=>{if(!lg(v))return m(v);if(Ox.match(v))return l(v.payload);if(Q2.match(v)){f();return}if(Px.match(v))return u(v.payload);let b=g.getState();const _=()=>{if(b===fb)throw new Error(xt(23));return b};let M;try{if(M=m(v),e.size>0){const x=g.getState(),E=Array.from(e.values());for(const C of E){let A=!1;try{A=C.predicate(v,x,b)}catch(k){A=!1,pb(i,k,{raisedBy:"predicate"})}A&&h(C,v,g,_)}}}finally{b=fb}return M},startListening:l,stopListening:u,clearListeners:f}},J2=n=>"reducerPath"in n&&typeof n.reducerPath=="string",eM=n=>n.flatMap(e=>J2(e)?[[e.reducerPath,e.reducer]]:Object.entries(e)),yg=Symbol.for("rtk-state-proxy-original"),tM=n=>!!n&&!!n[yg],nM=new WeakMap,rM=(n,e)=>mp(nM,n,()=>new Proxy(n,{get:(t,i,a)=>{if(i===yg)return t;const l=Reflect.get(t,i,a);if(typeof l>"u"){const u=e[i.toString()];if(u){const h=u(void 0,{type:il()});if(typeof h>"u")throw new Error(xt(24));return h}}return l}})),iM=n=>{if(!tM(n))throw new Error(xt(25));return n[yg]},sM=(n={})=>n;function aM(...n){const e=Object.fromEntries(eM(n)),t=()=>Object.keys(e).length?og(e):sM;let i=t();function a(h,f){return i(h,f)}a.withLazyLoadedSlices=()=>a;const l=(h,f={})=>{const{reducerPath:p,reducer:g}=h,m=e[p];return!f.overrideExisting&&m&&m!==g||(e[p]=g,i=t()),a},u=Object.assign(function(f,p){return function(m,...v){return f(rM(p?p(m,...v):m,e),...v)}},{original:iM});return Object.assign(a,{inject:l,selector:u})}function xt(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var mg="persist:",vg="persist/FLUSH",sl="persist/REHYDRATE",bg="persist/PAUSE",_g="persist/PERSIST",wg="persist/PURGE",xg="persist/REGISTER",Dx=-1;function Wu(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wu=function(t){return typeof t}:Wu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(n)}function gb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function oM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gb(t,!0).forEach(function(i){lM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gb(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uM(n,e,t,i){i.debug;var a=oM({},t);return n&&Wu(n)==="object"&&Object.keys(n).forEach(function(l){l!=="_persist"&&e[l]===t[l]&&(a[l]=n[l])}),a}function cM(n){var e=n.blacklist||null,t=n.whitelist||null,i=n.transforms||[],a=n.throttle||0,l="".concat(n.keyPrefix!==void 0?n.keyPrefix:mg).concat(n.key),u=n.storage,h;n.serialize===!1?h=function(z){return z}:typeof n.serialize=="function"?h=n.serialize:h=hM;var f=n.writeFailHandler||null,p={},g={},m=[],v=null,b=null,_=function(z){Object.keys(z).forEach(function(U){E(U)&&p[U]!==z[U]&&m.indexOf(U)===-1&&m.push(U)}),Object.keys(p).forEach(function(U){z[U]===void 0&&E(U)&&m.indexOf(U)===-1&&p[U]!==void 0&&m.push(U)}),v===null&&(v=setInterval(M,a)),p=z};function M(){if(m.length===0){v&&clearInterval(v),v=null;return}var k=m.shift(),z=i.reduce(function(U,O){return O.in(U,k,p)},p[k]);if(z!==void 0)try{g[k]=h(z)}catch(U){console.error("redux-persist/createPersistoid: error serializing state",U)}else delete g[k];m.length===0&&x()}function x(){Object.keys(g).forEach(function(k){p[k]===void 0&&delete g[k]}),b=u.setItem(l,h(g)).catch(C)}function E(k){return!(t&&t.indexOf(k)===-1&&k!=="_persist"||e&&e.indexOf(k)!==-1)}function C(k){f&&f(k)}var A=function(){for(;m.length!==0;)M();return b||Promise.resolve()};return{update:_,flush:A}}function hM(n){return JSON.stringify(n)}function fM(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:mg).concat(n.key),i=n.storage;n.debug;var a;return n.deserialize===!1?a=function(u){return u}:typeof n.deserialize=="function"?a=n.deserialize:a=dM,i.getItem(t).then(function(l){if(l)try{var u={},h=a(l);return Object.keys(h).forEach(function(f){u[f]=e.reduceRight(function(p,g){return g.out(p,f,h)},a(h[f]))}),u}catch(f){throw f}else return})}function dM(n){return JSON.parse(n)}function pM(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:mg).concat(n.key);return e.removeItem(t,gM)}function gM(n){}function yb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function dr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yb(t,!0).forEach(function(i){yM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yb(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mM(n,e){if(n==null)return{};var t=vM(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function vM(n,e){if(n==null)return{};var t={},i=Object.keys(n),a,l;for(l=0;l<i.length;l++)a=i[l],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}var bM=5e3;function _M(n,e){var t=n.version!==void 0?n.version:Dx;n.debug;var i=n.stateReconciler===void 0?uM:n.stateReconciler,a=n.getStoredState||fM,l=n.timeout!==void 0?n.timeout:bM,u=null,h=!1,f=!0,p=function(m){return m._persist.rehydrated&&u&&!f&&u.update(m),m};return function(g,m){var v=g||{},b=v._persist,_=mM(v,["_persist"]),M=_;if(m.type===_g){var x=!1,E=function(B,j){x||(m.rehydrate(n.key,B,j),x=!0)};if(l&&setTimeout(function(){!x&&E(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},l),f=!1,u||(u=cM(n)),b)return dr({},e(M,m),{_persist:b});if(typeof m.rehydrate!="function"||typeof m.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return m.register(n.key),a(n).then(function(O){var B=n.migrate||function(j,I){return Promise.resolve(j)};B(O,t).then(function(j){E(j)},function(j){E(void 0,j)})},function(O){E(void 0,O)}),dr({},e(M,m),{_persist:{version:t,rehydrated:!1}})}else{if(m.type===wg)return h=!0,m.result(pM(n)),dr({},e(M,m),{_persist:b});if(m.type===vg)return m.result(u&&u.flush()),dr({},e(M,m),{_persist:b});if(m.type===bg)f=!0;else if(m.type===sl){if(h)return dr({},M,{_persist:dr({},b,{rehydrated:!0})});if(m.key===n.key){var C=e(M,m),A=m.payload,k=i!==!1&&A!==void 0?i(A,g,C,n):C,z=dr({},k,{_persist:dr({},b,{rehydrated:!0})});return p(z)}}}if(!b)return e(g,m);var U=e(M,m);return U===M?g:p(dr({},U,{_persist:b}))}}function mb(n){return SM(n)||xM(n)||wM()}function wM(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function xM(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function SM(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function vb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function wp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vb(t,!0).forEach(function(i){AM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vb(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function AM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bx={registry:[],bootstrapped:!1},EM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xg:return wp({},e,{registry:[].concat(mb(e.registry),[t.key])});case sl:var i=e.registry.indexOf(t.key),a=mb(e.registry);return a.splice(i,1),wp({},e,{registry:a,bootstrapped:a.length===0});default:return e}};function TM(n,e,t){var i=ag(EM,Bx,void 0),a=function(f){i.dispatch({type:xg,key:f})},l=function(f,p,g){var m={type:sl,payload:p,err:g,key:f};n.dispatch(m),i.dispatch(m)},u=wp({},i,{purge:function(){var f=[];return n.dispatch({type:wg,result:function(g){f.push(g)}}),Promise.all(f)},flush:function(){var f=[];return n.dispatch({type:vg,result:function(g){f.push(g)}}),Promise.all(f)},pause:function(){n.dispatch({type:bg})},persist:function(){n.dispatch({type:_g,register:a,rehydrate:l})}});return u.persist(),u}function MM(n,e){return function(t,i){if(!t)return Promise.resolve(void 0);var a=t._persist&&t._persist.version!==void 0?t._persist.version:Dx;if(a===i||a>i)return Promise.resolve(t);var l=Object.keys(n).map(function(h){return parseInt(h)}).filter(function(h){return i>=h&&h>a}).sort(function(h,f){return h-f});try{var u=l.reduce(function(h,f){return n[f](h)},t);return Promise.resolve(u)}catch(h){return Promise.reject(h)}}}const jx=Z2(),kM=jx.startListening.withTypes();var lo={},xu={},Su={},bb;function CM(){if(bb)return Su;bb=1,Su.__esModule=!0,Su.default=a;function n(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(h){return typeof h}:n=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(l)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function i(l){if((typeof self>"u"?"undefined":n(self))!=="object"||!(l in self))return!1;try{var u=self[l],h="redux-persist ".concat(l," test");u.setItem(h,"test"),u.getItem(h),u.removeItem(h)}catch{return!1}return!0}function a(l){var u="".concat(l,"Storage");return i(u)?self[u]:t}return Su}var _b;function RM(){if(_b)return xu;_b=1,xu.__esModule=!0,xu.default=t;var n=e(CM());function e(i){return i&&i.__esModule?i:{default:i}}function t(i){var a=(0,n.default)(i);return{getItem:function(u){return new Promise(function(h,f){h(a.getItem(u))})},setItem:function(u,h){return new Promise(function(f,p){f(a.setItem(u,h))})},removeItem:function(u){return new Promise(function(h,f){h(a.removeItem(u))})}}}return xu}var wb;function OM(){if(wb)return lo;wb=1,lo.__esModule=!0,lo.default=void 0;var n=e(RM());function e(i){return i&&i.__esModule?i:{default:i}}var t=(0,n.default)("local");return lo.default=t,lo}var PM=OM();const DM=Yn(PM);function BM(n){var e="";return t(n),e;function t(a){if(a===null||typeof a!="object"||a.toJSON!=null)e+=JSON.stringify(a);else if(Array.isArray(a)){e+="[";var l=!1;a.forEach(function(h){l&&(e+=","),l=!0,h===void 0&&(h=null),t(h)}),e+="]"}else{e+="{";var u=Object.keys(a).filter(function(h){return a[h]!==void 0}).sort();u.forEach(function(h,f){return i(a,h,f)}),e+="}"}}function i(a,l,u){u>0&&(e+=","),e+=JSON.stringify(l),e+=":",t(a[l])}}const Qu=1e-4,sn=(n,e)=>Math.abs(n-e)<Qu,i4=n=>n===0?Qu:Math.abs(n)<Qu?Qu*Math.sign(n):n,Sg=["away","towards","left","right"],jM=["awayRight","towardsRight","towardsLeft","awayLeft"],zx=[...Sg,...jM],zM=n=>n==="away"||n==="towards"?"y":"x",s4=n=>n==="away"?"towards":n==="towards"?"away":n==="left"?"right":"left",a4=n=>UM(zM(n)),UM=n=>n==="x"?"y":"x",Do=(n,...e)=>e.reduce((t,i)=>({x:t.x+(i.x??0),y:t.y+(i.y??0)}),n),o4=(n,...e)=>e.reduce((t,i)=>({x:t.x-(i.x??0),y:t.y-(i.y??0)}),n),LM=(n,e)=>({x:n.x*e,y:n.y*e}),IM=(n,e)=>({x:n.x*e,y:n.y*e,z:n.z*e}),l4=(n,e)=>({x:n.x*e.x,y:n.y*e.y,z:n.z*e.z}),NM=({x:n,y:e,z:t})=>Math.hypot(n,e,t),u4=({x:n,y:e})=>Math.hypot(n,e),c4=n=>{const e=NM(n);if(e===0)throw new Error("unitVector called with zero length vector");return IM(n,1/e)},h4=[{x:0,y:0,z:0},{x:0,y:0,z:1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:1}],f4=(...n)=>n.reduce(({x:e,y:t,z:i},{x:a=0,y:l=0,z:u=0})=>({x:e+a,y:t+l,z:i+u}),qM),d4=(...n)=>n.reduce(({x:e,y:t,z:i},{x:a,y:l,z:u})=>({x:e*a,y:t*l,z:i*u}),GM),p4=(n,...e)=>e.reduce((t,i)=>({x:t.x-(i.x??0),y:t.y-(i.y??0),z:t.z-(i.z??0)}),n),g4=({x:n,y:e,z:t},{x:i,y:a,z:l})=>n===i&&e===a&&t===l,y4=({x:n,y:e},{x:t,y:i})=>n===t&&e===i,m4=Object.freeze({x:0,y:0}),qM=Object.freeze({x:0,y:0,z:0}),GM=Object.freeze({x:1,y:1,z:1}),v4=["x","y","z"],b4=({x:n,y:e})=>{if(!(sn(n,0)&&sn(e,0)))return e>n?e>-n?"away":"right":e>-n?"left":"towards"},HM=["right","towardsRight","towards","towardsLeft","left","awayLeft","away","awayRight"],_4=({x:n,y:e})=>{if(sn(n,0)&&sn(e,0))return;const t=Math.atan2(-e,-n),i=Math.round(8*t/(2*Math.PI))&7;return HM[i]},w4=n=>{const{x:e,y:t,z:i}=n;if(sn(e,0)&&sn(t,0)&&!sn(i,0))return"xy";if(sn(e,0)&&!sn(t,0)&&sn(i,0))return"xz";if(!sn(e,0)&&sn(t,0)&&sn(i,0))return"yz";throw new Error(`only axis-aligned planes are supported, cannot get normal plane for ${JSON.stringify(n)}`)},$M=["lookUp","lookDown","lookLeft","lookRight"],FM=["jump","fire","carry","swop","swop.head","swop.heels","hold","toggleColourisation","cycleResolution","toggleShowFps","menu_select","menu_openOrExit","menu_exit","map",...Sg,...$M],Ux=[...FM];var Zf={exports:{}},Jf={exports:{}},xb;function ta(){return xb||(xb=1,(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Jf)),Jf.exports}var Sb;function VM(){return Sb||(Sb=1,(function(n){var e=ta().default;function t(){n.exports=t=function(){return a},n.exports.__esModule=!0,n.exports.default=n.exports;var i,a={},l=Object.prototype,u=l.hasOwnProperty,h=Object.defineProperty||function(N,S,D){N[S]=D.value},f=typeof Symbol=="function"?Symbol:{},p=f.iterator||"@@iterator",g=f.asyncIterator||"@@asyncIterator",m=f.toStringTag||"@@toStringTag";function v(N,S,D){return Object.defineProperty(N,S,{value:D,enumerable:!0,configurable:!0,writable:!0}),N[S]}try{v({},"")}catch{v=function(D,G,$){return D[G]=$}}function b(N,S,D,G){var $=S&&S.prototype instanceof k?S:k,V=Object.create($.prototype),Z=new P(G||[]);return h(V,"_invoke",{value:te(N,D,Z)}),V}function _(N,S,D){try{return{type:"normal",arg:N.call(S,D)}}catch(G){return{type:"throw",arg:G}}}a.wrap=b;var M="suspendedStart",x="suspendedYield",E="executing",C="completed",A={};function k(){}function z(){}function U(){}var O={};v(O,p,function(){return this});var B=Object.getPrototypeOf,j=B&&B(B(L([])));j&&j!==l&&u.call(j,p)&&(O=j);var I=U.prototype=k.prototype=Object.create(O);function H(N){["next","throw","return"].forEach(function(S){v(N,S,function(D){return this._invoke(S,D)})})}function Q(N,S){function D($,V,Z,ne){var le=_(N[$],N,V);if(le.type!=="throw"){var oe=le.arg,pe=oe.value;return pe&&e(pe)=="object"&&u.call(pe,"__await")?S.resolve(pe.__await).then(function(he){D("next",he,Z,ne)},function(he){D("throw",he,Z,ne)}):S.resolve(pe).then(function(he){oe.value=he,Z(oe)},function(he){return D("throw",he,Z,ne)})}ne(le.arg)}var G;h(this,"_invoke",{value:function(V,Z){function ne(){return new S(function(le,oe){D(V,Z,le,oe)})}return G=G?G.then(ne,ne):ne()}})}function te(N,S,D){var G=M;return function($,V){if(G===E)throw Error("Generator is already running");if(G===C){if($==="throw")throw V;return{value:i,done:!0}}for(D.method=$,D.arg=V;;){var Z=D.delegate;if(Z){var ne=se(Z,D);if(ne){if(ne===A)continue;return ne}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(G===M)throw G=C,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);G=E;var le=_(N,S,D);if(le.type==="normal"){if(G=D.done?C:x,le.arg===A)continue;return{value:le.arg,done:D.done}}le.type==="throw"&&(G=C,D.method="throw",D.arg=le.arg)}}}function se(N,S){var D=S.method,G=N.iterator[D];if(G===i)return S.delegate=null,D==="throw"&&N.iterator.return&&(S.method="return",S.arg=i,se(N,S),S.method==="throw")||D!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+D+"' method")),A;var $=_(G,N.iterator,S.arg);if($.type==="throw")return S.method="throw",S.arg=$.arg,S.delegate=null,A;var V=$.arg;return V?V.done?(S[N.resultName]=V.value,S.next=N.nextLoc,S.method!=="return"&&(S.method="next",S.arg=i),S.delegate=null,A):V:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,A)}function ae(N){var S={tryLoc:N[0]};1 in N&&(S.catchLoc=N[1]),2 in N&&(S.finallyLoc=N[2],S.afterLoc=N[3]),this.tryEntries.push(S)}function T(N){var S=N.completion||{};S.type="normal",delete S.arg,N.completion=S}function P(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(ae,this),this.reset(!0)}function L(N){if(N||N===""){var S=N[p];if(S)return S.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var D=-1,G=function $(){for(;++D<N.length;)if(u.call(N,D))return $.value=N[D],$.done=!1,$;return $.value=i,$.done=!0,$};return G.next=G}}throw new TypeError(e(N)+" is not iterable")}return z.prototype=U,h(I,"constructor",{value:U,configurable:!0}),h(U,"constructor",{value:z,configurable:!0}),z.displayName=v(U,m,"GeneratorFunction"),a.isGeneratorFunction=function(N){var S=typeof N=="function"&&N.constructor;return!!S&&(S===z||(S.displayName||S.name)==="GeneratorFunction")},a.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,U):(N.__proto__=U,v(N,m,"GeneratorFunction")),N.prototype=Object.create(I),N},a.awrap=function(N){return{__await:N}},H(Q.prototype),v(Q.prototype,g,function(){return this}),a.AsyncIterator=Q,a.async=function(N,S,D,G,$){$===void 0&&($=Promise);var V=new Q(b(N,S,D,G),$);return a.isGeneratorFunction(S)?V:V.next().then(function(Z){return Z.done?Z.value:V.next()})},H(I),v(I,m,"Generator"),v(I,p,function(){return this}),v(I,"toString",function(){return"[object Generator]"}),a.keys=function(N){var S=Object(N),D=[];for(var G in S)D.push(G);return D.reverse(),function $(){for(;D.length;){var V=D.pop();if(V in S)return $.value=V,$.done=!1,$}return $.done=!0,$}},a.values=L,P.prototype={constructor:P,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(T),!S)for(var D in this)D.charAt(0)==="t"&&u.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=i)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var D=this;function G(oe,pe){return Z.type="throw",Z.arg=S,D.next=oe,pe&&(D.method="next",D.arg=i),!!pe}for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$],Z=V.completion;if(V.tryLoc==="root")return G("end");if(V.tryLoc<=this.prev){var ne=u.call(V,"catchLoc"),le=u.call(V,"finallyLoc");if(ne&&le){if(this.prev<V.catchLoc)return G(V.catchLoc,!0);if(this.prev<V.finallyLoc)return G(V.finallyLoc)}else if(ne){if(this.prev<V.catchLoc)return G(V.catchLoc,!0)}else{if(!le)throw Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return G(V.finallyLoc)}}}},abrupt:function(S,D){for(var G=this.tryEntries.length-1;G>=0;--G){var $=this.tryEntries[G];if($.tryLoc<=this.prev&&u.call($,"finallyLoc")&&this.prev<$.finallyLoc){var V=$;break}}V&&(S==="break"||S==="continue")&&V.tryLoc<=D&&D<=V.finallyLoc&&(V=null);var Z=V?V.completion:{};return Z.type=S,Z.arg=D,V?(this.method="next",this.next=V.finallyLoc,A):this.complete(Z)},complete:function(S,D){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&D&&(this.next=D),A},finish:function(S){for(var D=this.tryEntries.length-1;D>=0;--D){var G=this.tryEntries[D];if(G.finallyLoc===S)return this.complete(G.completion,G.afterLoc),T(G),A}},catch:function(S){for(var D=this.tryEntries.length-1;D>=0;--D){var G=this.tryEntries[D];if(G.tryLoc===S){var $=G.completion;if($.type==="throw"){var V=$.arg;T(G)}return V}}throw Error("illegal catch attempt")},delegateYield:function(S,D,G){return this.delegate={iterator:L(S),resultName:D,nextLoc:G},this.method==="next"&&(this.arg=i),A}},a}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Zf)),Zf.exports}var ed,Ab;function Ac(){if(Ab)return ed;Ab=1;var n=VM()();ed=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}return ed}var nn={},td={exports:{}},nd={exports:{}},rd={exports:{}},Eb;function YM(){return Eb||(Eb=1,(function(n){var e=ta().default;function t(i,a){if(e(i)!="object"||!i)return i;var l=i[Symbol.toPrimitive];if(l!==void 0){var u=l.call(i,a||"default");if(e(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(rd)),rd.exports}var Tb;function XM(){return Tb||(Tb=1,(function(n){var e=ta().default,t=YM();function i(a){var l=t(a,"string");return e(l)=="symbol"?l:l+""}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(nd)),nd.exports}var Mb;function WM(){return Mb||(Mb=1,(function(n){var e=XM();function t(i,a,l){return(a=e(a))in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l,i}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(td)),td.exports}var id={exports:{}},sd={exports:{}},ad={exports:{}},kb;function Lx(){return kb||(kb=1,(function(n){function e(t,i){(i==null||i>t.length)&&(i=t.length);for(var a=0,l=Array(i);a<i;a++)l[a]=t[a];return l}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(ad)),ad.exports}var Cb;function QM(){return Cb||(Cb=1,(function(n){var e=Lx();function t(i){if(Array.isArray(i))return e(i)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(sd)),sd.exports}var od={exports:{}},Rb;function KM(){return Rb||(Rb=1,(function(n){function e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(od)),od.exports}var ld={exports:{}},Ob;function Ix(){return Ob||(Ob=1,(function(n){var e=Lx();function t(i,a){if(i){if(typeof i=="string")return e(i,a);var l={}.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?e(i,a):void 0}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(ld)),ld.exports}var ud={exports:{}},Pb;function ZM(){return Pb||(Pb=1,(function(n){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(ud)),ud.exports}var Db;function Nx(){return Db||(Db=1,(function(n){var e=QM(),t=KM(),i=Ix(),a=ZM();function l(u){return e(u)||t(u)||i(u)||a()}n.exports=l,n.exports.__esModule=!0,n.exports.default=n.exports})(id)),id.exports}var cd={},hd={},Bb;function Ag(){if(Bb)return hd;Bb=1;function n(e){return typeof e<"u"}return hd.notUndefined=n,hd}var jb;function qx(){if(jb)return cd;jb=1;var n=Ag(),e=n.notUndefined;function t(i){return i!=null&&e(i[Symbol.iterator])}return cd.isIterable=t,cd}var fd={},zb;function JM(){return zb||(zb=1,fd.isLoopable=qx().isIterable),fd}var dd={},Ub;function ek(){if(Ub)return dd;Ub=1;var n=Ag(),e=n.notUndefined;function t(i){return i==null||e(i[Symbol.iterator])}return dd.isWrappable=t,dd}var Au={},Lb;function tk(){if(Lb)return Au;Lb=1;var n=Ac(),e=n.mark(i),t=n.mark(a);function i(l){return n.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.delegateYield(l,"t0",1);case 1:case"end":return h.stop()}},e)}Au.wrap=i;function a(l){return n.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(l==null){h.next=2;break}return h.delegateYield(l,"t0",2);case 2:case"end":return h.stop()}},t)}return Au.nullableWrap=a,Au}var Eu={},Ib;function nk(){if(Ib)return Eu;Ib=1;var n=Nx();function e(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.length,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return function(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return l<=f.length?a.apply(void 0,n(u).concat(f)):e(a,l-f.length,[].concat(n(u),f))}}Eu.curry=e;function t(a,l){var u=a.fn,h=a.validateArgs,f=a.variadic,p=a.reduces,g=a.growRight,m=a.minArgs,v=a.maxArgs,b=a.isIterable,_=a.iterableType,M=a.applyOnIterableArgs,x=a.IterableClass;if(l.length>m){var E=!0,C=f?l.findIndex(function(j,I){return b(j)&&I>=m}):Math.min(v,l.length-1),A=f?l.length:C+1;if(f)for(var k=C;k<l.length;k++)E=E&&b(l[k]);else E=b(l[C]);if(l.length>v&&(C===-1||!E)){var z=f?"...".concat(_,"s"):_,U="".concat(u.name," takes up to ").concat(v," arguments, followed by ").concat(z,". ")+"You already passed ".concat(l.length," arguments");throw f?new Error("".concat(U," and the following arguments were not all ").concat(_,"s")):new Error("".concat(U," and the last argument was not ").concat(_))}if(C>=0&&E){for(var O=C;O<A;O++)l[O]=M(l[O]);var B=f?l.slice(C):l[C];return l.splice(C),g||l.reverse(),l.unshift(B),h(l),p?u.apply(void 0,n(l)):new x(u,l)}}return i(a,l)}function i(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return function(){for(var u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];if(h.length===0)throw new Error("Cannot make a partial application with no arguments");return h.unshift.apply(h,n(l)),t(a,h)}}return Eu.variadicCurryWithValidation=i,Eu}var uo={},Nb;function rk(){if(Nb)return uo;Nb=1;var n=Symbol.for("_");uo._=n;var e=Symbol("__iterate");uo.__iterate=e;var t=Symbol("split");return uo.split=t,uo}var qb;function Eg(){if(qb)return nn;qb=1;var n=WM(),e=Nx(),t,i=qx(),a=i.isIterable,l=JM(),u=l.isLoopable,h=ek(),f=h.isWrappable,p=tk(),g=p.nullableWrap,m=nk(),v=m.variadicCurryWithValidation,b=rk(),_=b._,M=b.__iterate;nn.wrap=g,nn.isIterable=a,nn.isLoopable=u,nn.isWrappable=f;function x(B){if(f(B))return a(B)?B:g(B);throw typeof B.next=="function"?new TypeError("iter-tools received a value that looked like an iterator but was not iterable. Get help fixing this: https://github.com/iter-tools/iter-tools/wiki/Making-iterators-iterable"):new TypeError("Expected an iterable, null, or undefined")}nn.ensureIterable=x;function E(B){"return"in B&&B.return()}nn.callReturn=E;function C(B,j){this[_]={fn:B,args:j,staticIterator:null}}nn.BaseIterableIterator=C,Object.assign(C.prototype,(t={constructor:C},n(t,M,function(){var B=this[_],j=B.fn,I=B.args;return j.apply(void 0,e(I))}),n(t,"next",function(){var j=this[_];return j.staticIterator=j.staticIterator||this[M](),j.staticIterator.next()}),n(t,"return",function(j){var I=this[_];return I.staticIterator=I.staticIterator||this[M](),I.staticIterator.return(j)}),n(t,"throw",function(j){var I=this[_];return I.staticIterator=I.staticIterator||this[M](),I.staticIterator.throw(j)}),t));function A(){for(var B=arguments.length,j=new Array(B),I=0;I<B;I++)j[I]=arguments[I];C.apply(this,j)}nn.IterableIterator=A,A.prototype=Object.assign(Object.create(C.prototype),n({constructor:A},Symbol.iterator,function(){return this[M]()}));function k(B){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=j.validateArgs,H=I===void 0?function(V){}:I,Q=j.variadic,te=Q===void 0?!1:Q,se=j.reduces,ae=se===void 0?!1:se,T=j.growRight,P=T===void 0?!1:T,L=j.minArgs,N=L===void 0?B.length-1:L,S=j.maxArgs,D=S===void 0?B.length-1:S,G=j.applyOnIterableArgs,$=G===void 0?x:G;return{fn:B,validateArgs:H,variadic:te,reduces:ae,growRight:P,minArgs:N,maxArgs:D,isIterable:f,iterableType:"iterable",applyOnIterableArgs:$,IterableClass:A}}function z(B){return e(B)}nn.cache=z;function U(B){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=j.validateArgs,H=I===void 0?function(Q){return Q}:I;return function(){for(var Q=arguments.length,te=new Array(Q),se=0;se<Q;se++)te[se]=arguments[se];return H(te),new A(B,te)}}nn.wrapWithIterableIterator=U;var O=function(j,I){return v(k(j,I))};return nn.iterableCurry=O,nn}var co={},Gb;function ik(){if(Gb)return co;Gb=1;function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof i=="number"&&!isNaN(i)&&isFinite(i)&&!(a&&i===0)}co.isInteger=n;function e(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return n(i)&&(a?i>0:i>=0)}co.isPositiveInteger=e;function t(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof i=="number"&&!isNaN(i)&&!(a&&i===0)}return co.isIntegerOrInfinite=t,co}var pd={exports:{}},gd={exports:{}},Hb;function sk(){return Hb||(Hb=1,(function(n){function e(t){if(Array.isArray(t))return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(gd)),gd.exports}var yd={exports:{}},$b;function ak(){return $b||($b=1,(function(n){function e(t,i){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var l,u,h,f,p=[],g=!0,m=!1;try{if(h=(a=a.call(t)).next,i===0){if(Object(a)!==a)return;g=!1}else for(;!(g=(l=h.call(a)).done)&&(p.push(l.value),p.length!==i);g=!0);}catch(v){m=!0,u=v}finally{try{if(!g&&a.return!=null&&(f=a.return(),Object(f)!==f))return}finally{if(m)throw u}}return p}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(yd)),yd.exports}var md={exports:{}},Fb;function ok(){return Fb||(Fb=1,(function(n){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(md)),md.exports}var Vb;function lk(){return Vb||(Vb=1,(function(n){var e=sk(),t=ak(),i=Ix(),a=ok();function l(u,h){return e(u)||t(u,h)||i(u,h)||a()}n.exports=l,n.exports.__esModule=!0,n.exports.default=n.exports})(pd)),pd.exports}var vd={},Yb;function uk(){if(Yb)return vd;Yb=1;var n=ta();function e(t){return n(t)==="object"&&t!==null}return vd.isObject=e,vd}var Tu={},Xb;function ck(){if(Xb)return Tu;Xb=1;var n=ta(),e=Ac(),t=e.mark(u),i=Eg(),a=i.wrapWithIterableIterator,l=Object.prototype.hasOwnProperty;function u(f){var p;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(f!=null){m.next=2;break}return m.abrupt("return");case 2:m.t0=e.keys(f);case 3:if((m.t1=m.t0()).done){m.next=10;break}if(p=m.t1.value,!l.call(f,p)){m.next=8;break}return m.next=8,[p,f[p]];case 8:m.next=3;break;case 10:case"end":return m.stop()}},t)}Tu.__objectEntries=u;var h=a(u,{validateArgs:function(p){if(!(p[0]==null||n(p[0])==="object"))throw new Error("obj argument to objectEntries must be an object, null, or undefined")}});return Tu.objectEntries=h,Tu}var Mu={},Wb;function hk(){if(Wb)return Mu;Wb=1;var n=ta(),e=Ac(),t=e.mark(u),i=Eg(),a=i.wrapWithIterableIterator,l=Object.prototype.hasOwnProperty;function u(f){var p;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(f!=null){m.next=2;break}return m.abrupt("return");case 2:m.t0=e.keys(f);case 3:if((m.t1=m.t0()).done){m.next=10;break}if(p=m.t1.value,!l.call(f,p)){m.next=8;break}return m.next=8,p;case 8:m.next=3;break;case 10:case"end":return m.stop()}},t)}Mu.__objectKeys=u;var h=a(u,{validateArgs:function(p){if(!(p[0]==null||n(p[0])==="object"))throw new Error("obj argument to objectKeys must be an object, null, or undefined")}});return Mu.objectKeys=h,Mu}var ku={},Qb;function fk(){if(Qb)return ku;Qb=1;var n=lk(),e=Ac(),t=e.mark(v),i=Eg(),a=i.wrapWithIterableIterator,l=ik(),u=l.isInteger,h=l.isIntegerOrInfinite,f=uk(),p=f.isObject,g=Ag(),m=g.notUndefined;function v(){var _,M,x,E,C=arguments;return e.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:_=C.length>0&&C[0]!==void 0?C[0]:0,M=C.length>1&&C[1]!==void 0?C[1]:1/0,x=C.length>2&&C[2]!==void 0?C[2]:1,E=_;case 4:if(!(x>0?E<M:E>M)){k.next=10;break}return k.next=7,E;case 7:E+=x,k.next=4;break;case 10:case"end":return k.stop()}},t)}ku.__range=v;var b=a(v,{growRight:!0,validateArgs:function(M){var x=n(M,3),E=x[0],C=x[1],A=C===void 0?1/0:C,k=x[2],z;if(p(E)?(z=E.start,A=E.end,k=E.step):M.length>1?z=E:A=E,m(z)&&!u(z))throw new TypeError("The specified start was not an integer");if(m(A)&&!h(A))throw new TypeError("The specified end was not an integer or infinite");if(m(k)&&!u(k,!0))throw new TypeError("The specified step was not a non-zero integer");M[0]=z,M[1]=A,M[2]=k}});return ku.range=b,ku}var bd,Kb;function dk(){return Kb||(Kb=1,bd=ck().objectEntries),bd}var pk=dk();const gk=Yn(pk);var _d,Zb;function yk(){return Zb||(Zb=1,_d=hk().objectKeys),_d}var mk=yk();const vk=Yn(mk);var wd,Jb;function bk(){return Jb||(Jb=1,wd=fk().range),wd}var _k=bk();const wk=Yn(_k),Gx=n=>n[Symbol.iterator](),x4=Object.entries,xk=gk,S4=Object.keys,A4=vk,Sk=Object.fromEntries,Tg=Object.fromEntries,Ak=(n,e)=>{const i=Gx(xk(n)).map(e);return Sk(i)},Gs={presses:Tg(Ux.map(n=>[n,{keys:[],gamepadAxes:[],gamepadButtons:[]}])),axes:{x:[],y:[],xLook:[],yLook:[]}},e_=(n,e)=>Array.from(new Set([...n??[],...e??[]]));function $i(...n){return{presses:n.reduce((e,t)=>{for(const i of Ux)e[i]={keys:e_(e[i]?.keys,t?.presses?.[i]?.keys),gamepadButtons:e_(e[i]?.gamepadButtons,t?.presses?.[i]?.gamepadButtons)};return e},structuredClone(Gs.presses)),axes:{x:Array.from(new Set([...Gs.axes.x,...n.map(e=>e.axes?.x??[]).flat()])),y:Array.from(new Set([...Gs.axes.y,...n.map(e=>e.axes?.y??[]).flat()])),xLook:Array.from(new Set([...Gs.axes.xLook,...n.map(e=>e.axes?.xLook??[]).flat()])),yLook:Array.from(new Set([...Gs.axes.yLook,...n.map(e=>e.axes?.yLook??[]).flat()]))}}}const ft={dPadDown:13,dPadUp:12,dPadLeft:14,dPadRight:15,a:0,b:1,x:2,y:3,lb:4,lt:6,rb:5,rt:7,select:8,start:9,l3:10,r3:11};Ak(ft,([n,e])=>[e,n]);const Ek={start:"1",coin:"5",directions:{up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},buttons:["Control","Alt"," ","Shift","Z","X"]},Tk={start:"2",coin:"6",directions:{up:"R",down:"F",left:"D",right:"G"},buttons:["A","S","Q","W","I","K"]},wn={dPadUp:"C",dPadDown:"D",dPadLeft:"E",dPadRight:"F",a:"J",b:"G",y:"H",x:"I",rb:"M",start:"O",select:"N"},Fi={presses:{right:{keys:["ArrowRight"],gamepadButtons:[]},towards:{keys:["ArrowDown"]},left:{keys:["ArrowLeft"]},away:{keys:["ArrowUp"]},menu_openOrExit:{keys:["Escape","§"]},menu_exit:{gamepadButtons:[ft.b]},menu_select:{keys:["Enter"],gamepadButtons:[ft.a]},toggleColourisation:{keys:["F10"]},toggleShowFps:{keys:["F9"]},cycleResolution:{keys:["0"]}}},na={inputAssignment:$i(Fi,{presses:{right:{gamepadButtons:[ft.dPadRight]},towards:{gamepadButtons:[ft.dPadDown]},left:{gamepadButtons:[ft.dPadLeft]},away:{gamepadButtons:[ft.dPadUp]},jump:{gamepadButtons:[ft.a,ft.y]},carry:{gamepadButtons:[ft.x,ft.y]},fire:{gamepadButtons:[ft.b]},swop:{gamepadButtons:[ft.rb]},"swop.head":{gamepadButtons:[ft.l3]},"swop.heels":{gamepadButtons:[ft.r3]},hold:{gamepadButtons:[ft.start]},menu_openOrExit:{gamepadButtons:[ft.select]},map:{gamepadButtons:[ft.lb]},toggleColourisation:{gamepadButtons:[ft.lt]}},axes:{x:[0],y:[1],xLook:[2],yLook:[3]}}),description:"Joysticks/gamepads with at least 4 buttons, but preferably 6 or more. Inc Playstation, xbox etc"},Mk={inputAssignment:$i(Fi,na.inputAssignment,{presses:{right:{keys:["P","7"]},towards:{keys:["A","8"]},left:{keys:["O","6"]},away:{keys:["Q","9"]},jump:{keys:[" ","M","N","B","Alt"]},carry:{keys:[" ","Enter","L","K","J"]},fire:{keys:["Shift","Z","X","C","V"]},swop:{keys:["S","D","F","G"]},hold:{keys:["H"]}}}),description:"closely matches zx spectrum keys"},kk={inputAssignment:$i(Fi,na.inputAssignment,{presses:{carry:{keys:["F3","F5"]},fire:{keys:[" "]},jump:{keys:["F5"]},swop:{keys:["F1"]},hold:{keys:["H"]}}}),description:"closely matches Amiga version keys - heavy on the F-keys"},Ck={inputAssignment:$i(Fi,na.inputAssignment,{presses:{right:{keys:["P","Numpad6"]},towards:{keys:["A","Numpad5"]},left:{keys:["O","Numpad8"]},away:{keys:["Q","Numpad9"]},jump:{keys:[" ","`","Z","\\","Numpad0","Numpad-"]},carry:{keys:["Shift","`","Z","\\","Numpad1","Numpad-"]},fire:{keys:["D","NumpadEnter"]},swop:{keys:["Enter","S","Numpad+"]},"swop.head":{keys:["["]},"swop.heels":{keys:["]"]},hold:{keys:["F8","H","Numpad."]},map:{keys:["M","Tab"]},lookUp:{keys:["I"]},lookDown:{keys:["K"]},lookLeft:{keys:["J"]},lookRight:{keys:["L"]}}}),description:"Default combined key and joystick/gamepad assignment, should work on most setups"},Rk={inputAssignment:$i(Fi,na.inputAssignment,{presses:{right:{keys:["D"]},towards:{keys:["S"]},left:{keys:["A"]},away:{keys:["W"]},jump:{keys:[" ","F","P"]},carry:{keys:["Shift","F","I","P"]},fire:{keys:["E","O","Control"]},swop:{keys:["Q"]},hold:{keys:["H"]}}}),description:"Modern, minimalist WASD key layout"},Ok={inputAssignment:$i(Fi,na.inputAssignment,{presses:{right:{keys:[wn.dPadRight]},towards:{keys:[wn.dPadDown]},left:{keys:[wn.dPadLeft]},away:{keys:[wn.dPadUp]},jump:{keys:[wn.a,wn.y]},carry:{keys:[wn.b,wn.y]},fire:{keys:[wn.x]},swop:{keys:[wn.rb]},hold:{keys:[wn.start]},menu_openOrExit:{keys:[wn.select]}}}),description:"8bitdo controllers in keyboard mode (identifies to OS as a keyboard). They work as controllers even on phones that don’t support controllers"},t_=n=>({presses:{right:{keys:[n.directions.right]},towards:{keys:[n.directions.down]},left:{keys:[n.directions.left]},away:{keys:[n.directions.up]},jump:{keys:[n.buttons[0],n.buttons[3]]},carry:{keys:[n.buttons[1],n.buttons[3]]},fire:{keys:[n.buttons[2]]},swop:{keys:[n.start]},hold:{keys:[n.coin]},menu_openOrExit:{keys:[n.buttons[4]]}}}),Pk={inputAssignment:$i(Gs,Fi,{presses:{menu_openOrExit:{keys:["`","Tab"]}}},t_(Ek),t_(Tk)),description:"MAME key mappings. For arcade-style control panels"},xp={default:Ck,"zx spectrum":Mk,amiga:kk,mame:Pk,wasd:Rk,"🕹 8bitdo keyboard mode":Ok,"🕹 joystick":na},Bo=(n=typeof globalThis.window>"u"?"":window.location.search)=>new URLSearchParams(n),Dk=()=>Bo().get("campaignName")?.startsWith("data:"),E4=["yellow","cyan","green","magenta","white"],Mg=25,T4=1e3/Mg,kg={amigaHiResPal:{x:640,y:512},classicMac:{x:512,y:384},amigaLowResPal:{x:320,y:256},zxSpectrum:{x:256,y:192},handheld:{x:256,y:135}},Bk=Object.keys(kg),M4={zxGreen:"#0f0",zxCyan:"#0ff",zxMagenta:"#f0f",zxYellow:"#ff0",zxWhite:"#fff"},k4="1987-06-01T00:00:00Z",Kr=()=>{if(typeof globalThis.window>"u")return"server";const n=new URLSearchParams(window.location.search).get("device");if(n!==null)return n;const e=navigator.userAgent;return navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||/iPad|Tablet|Android(?!.*Mobi)/i.test(e)?"tablet":/Mobi|Android|iPhone|iPod/i.test(e)?"mobile":"desktop"},C4=[],Hx=new Set;Hx.add=()=>{throw new Error("emptySet.add")};Hx.clear=()=>{throw new Error("emptySet.clear")};const xn=Object.freeze({}),uc=(n,e)=>e.split(".").reduce((t,i)=>t[i],n),jk=(n,e,t)=>{const i=e.split(".");let a=n;for(let l=0;l<i.length-1;l++){const u=i[l];a=a[u]}a[i[i.length-1]]=t},n_=(n,e)=>{const t=n.indexOf(e);return n[(t+1)%n.length]},zk=(n,...e)=>{const t={};for(const i of e)t[i]=n[i];return t},R4=(n,...e)=>{const t={...n};for(const i of e)delete t[i];return t};var xd,r_;function Uk(){if(r_)return xd;r_=1;function n(i){if(Array.isArray(i))return!0;var a=i.length;return typeof a=="number"&&a>-1?a?0 in i&&a-1 in i:!0:!1}function e(i){var a=typeof i;return a==="object"?i===null?"null":n(i)?"array":i.constructor===Object?"pure-object":"object":a}function t(i,a){if(i===a||i!==i&&a!==a)return!0;var l=e(i),u=e(a);if(l!==u)return!1;if(l==="pure-object"){if(i===a)return!0;var h=Object.keys(i),f=Object.keys(a).length;if(h.length!==f)return!1;for(var p=0,g=h.length;p<g;p++){var m=h[p];if(!a.hasOwnProperty(h[p]))return!1;var v=i[m],b=a[m];if(v===i||b===a||v===a||b===i)return v===b;if(!t(v,b))return!1}return!0}else if(l==="array"){if(i.length===a.length)for(var _=0;_<i.length;_++){var M=i[_],x=a[_];if(M===i||x===a||M===a||x===i)return M===x;if(!t(M,x))return!1}else return!1;return!0}else if(l==="object"){if(i.valueOf!==Object.prototype.valueOf()&&a.valueOf!==Object.prototype.valueOf())return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString()&&a.toString!==Object.prototype.toString())return i.toString()===a.toString()}return!1}return xd=t,xd}var Lk=Uk();const O4=Yn(Lk),P4=hx.withTypes(),Cg=fx.withTypes();sg.withTypes();const $x={inputAssignment:xp.default.inputAssignment,infiniteLivesPoke:!1,infiniteDoughnutsPoke:!1,displaySettings:{showBoundingBoxes:"none",showShadowMasks:!1,crtFilter:!1,uncolourised:!1,emulatedResolution:Kr()==="mobile"?"handheld":"zxSpectrum"},showFps:!1,onScreenControls:Kr()==="mobile"||Kr()==="tablet",inputDirectionMode:"8-way",screenRelativeControl:!1,soundSettings:{mute:!1,noFootsteps:!1}};var Fx=(n=>(n.uninitialized="uninitialized",n.pending="pending",n.fulfilled="fulfilled",n.rejected="rejected",n))(Fx||{});function i_(n){return{status:n,isUninitialized:n==="uninitialized",isLoading:n==="pending",isSuccess:n==="fulfilled",isError:n==="rejected"}}var s_=Qs;function Vx(n,e){if(n===e||!(s_(n)&&s_(e)||Array.isArray(n)&&Array.isArray(e)))return e;const t=Object.keys(e),i=Object.keys(n);let a=t.length===i.length;const l=Array.isArray(e)?[]:{};for(const u of t)l[u]=Vx(n[u],e[u]),a&&(a=n[u]===l[u]);return a?n:l}function Ys(n){let e=0;for(const t in n)e++;return e}var a_=n=>[].concat(...n);function Ik(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function cc(n){return n!=null}function Nk(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function qk(n,e,t){return n.has(e)?n.get(e):n.set(e,t).get(e)}var o_=class{constructor(n,e=void 0){this.value=n,this.meta=e}},Rg=qt("__rtkq/focused"),Yx=qt("__rtkq/unfocused"),Og=qt("__rtkq/online"),Xx=qt("__rtkq/offline");function Pg(n){return n.type==="query"}function Gk(n){return n.type==="mutation"}function Dg(n){return n.type==="infinitequery"}function Bg(n,e,t,i,a,l){return Hk(n)?n(e,t,i,a).filter(cc).map(Sp).map(l):Array.isArray(n)?n.map(Sp).map(l):[]}function Hk(n){return typeof n=="function"}function Sp(n){return typeof n=="string"?{type:n}:n}function $k(n,e){return n.catch(e)}var Fo=Symbol("forceQueryFn"),Ap=n=>typeof n[Fo]=="function";function Fk({serializeQueryArgs:n,queryThunk:e,infiniteQueryThunk:t,mutationThunk:i,api:a,context:l}){const u=new Map,h=new Map,{unsubscribeQueryResult:f,removeMutationResult:p,updateSubscriptionOptions:g}=a.internalActions;return{buildInitiateQuery:x,buildInitiateInfiniteQuery:E,buildInitiateMutation:C,getRunningQueryThunk:m,getRunningMutationThunk:v,getRunningQueriesThunk:b,getRunningMutationsThunk:_};function m(A,k){return z=>{const U=l.endpointDefinitions[A],O=n({queryArgs:k,endpointDefinition:U,endpointName:A});return u.get(z)?.[O]}}function v(A,k){return z=>h.get(z)?.[k]}function b(){return A=>Object.values(u.get(A)||{}).filter(cc)}function _(){return A=>Object.values(h.get(A)||{}).filter(cc)}function M(A,k){const z=(U,{subscribe:O=!0,forceRefetch:B,subscriptionOptions:j,[Fo]:I,...H}={})=>(Q,te)=>{const se=n({queryArgs:U,endpointDefinition:k,endpointName:A});let ae;const T={...H,type:"query",subscribe:O,forceRefetch:B,subscriptionOptions:j,endpointName:A,originalArgs:U,queryCacheKey:se,[Fo]:I};if(Pg(k))ae=e(T);else{const{direction:ne,initialPageParam:le}=H;ae=t({...T,direction:ne,initialPageParam:le})}const P=a.endpoints[A].select(U),L=Q(ae),N=P(te()),{requestId:S,abort:D}=L,G=N.requestId!==S,$=u.get(Q)?.[se],V=()=>P(te()),Z=Object.assign(I?L.then(V):G&&!$?Promise.resolve(N):Promise.all([$,L]).then(V),{arg:U,requestId:S,subscriptionOptions:j,queryCacheKey:se,abort:D,async unwrap(){const ne=await Z;if(ne.isError)throw ne.error;return ne.data},refetch:()=>Q(z(U,{subscribe:!1,forceRefetch:!0})),unsubscribe(){O&&Q(f({queryCacheKey:se,requestId:S}))},updateSubscriptionOptions(ne){Z.subscriptionOptions=ne,Q(g({endpointName:A,requestId:S,queryCacheKey:se,options:ne}))}});if(!$&&!G&&!I){const ne=qk(u,Q,{});ne[se]=Z,Z.then(()=>{delete ne[se],Ys(ne)||u.delete(Q)})}return Z};return z}function x(A,k){return M(A,k)}function E(A,k){return M(A,k)}function C(A){return(k,{track:z=!0,fixedCacheKey:U}={})=>(O,B)=>{const j=i({type:"mutation",endpointName:A,originalArgs:k,track:z,fixedCacheKey:U}),I=O(j),{requestId:H,abort:Q,unwrap:te}=I,se=$k(I.unwrap().then(L=>({data:L})),L=>({error:L})),ae=()=>{O(p({requestId:H,fixedCacheKey:U}))},T=Object.assign(se,{arg:I.arg,requestId:H,abort:Q,unwrap:te,reset:ae}),P=h.get(O)||{};return h.set(O,P),P[H]=T,T.then(()=>{delete P[H],Ys(P)||h.delete(O)}),U&&(P[U]=T,T.then(()=>{P[U]===T&&(delete P[U],Ys(P)||h.delete(O))})),T}}}function Vk(n){return n}var Cu=(n={})=>({...n,[bc]:!0});function Yk({reducerPath:n,baseQuery:e,context:{endpointDefinitions:t},serializeQueryArgs:i,api:a,assertTagType:l,selectors:u}){const h=(B,j,I,H)=>(Q,te)=>{const se=t[B],ae=i({queryArgs:j,endpointDefinition:se,endpointName:B});if(Q(a.internalActions.queryResultPatched({queryCacheKey:ae,patches:I})),!H)return;const T=a.endpoints[B].select(j)(te()),P=Bg(se.providesTags,T.data,void 0,j,{},l);Q(a.internalActions.updateProvidedBy({queryCacheKey:ae,providedTags:P}))};function f(B,j,I=0){const H=[j,...B];return I&&H.length>I?H.slice(0,-1):H}function p(B,j,I=0){const H=[...B,j];return I&&H.length>I?H.slice(1):H}const g=(B,j,I,H=!0)=>(Q,te)=>{const ae=a.endpoints[B].select(j)(te()),T={patches:[],inversePatches:[],undo:()=>Q(a.util.patchQueryData(B,j,T.inversePatches,H))};if(ae.status==="uninitialized")return T;let P;if("data"in ae)if(Dn(ae.data)){const[L,N,S]=vx(ae.data,I);T.patches.push(...N),T.inversePatches.push(...S),P=L}else P=I(ae.data),T.patches.push({op:"replace",path:[],value:P}),T.inversePatches.push({op:"replace",path:[],value:ae.data});return T.patches.length===0||Q(a.util.patchQueryData(B,j,T.patches,H)),T},m=(B,j,I)=>H=>H(a.endpoints[B].initiate(j,{subscribe:!1,forceRefetch:!0,[Fo]:()=>({data:I})})),v=(B,j)=>B.query&&B[j]?B[j]:Vk,b=async(B,{signal:j,abort:I,rejectWithValue:H,fulfillWithValue:Q,dispatch:te,getState:se,extra:ae})=>{const T=t[B.endpointName];try{let P=v(T,"transformResponse");const L={signal:j,abort:I,dispatch:te,getState:se,extra:ae,endpoint:B.endpointName,type:B.type,forced:B.type==="query"?_(B,se()):void 0,queryCacheKey:B.type==="query"?B.queryCacheKey:void 0},N=B.type==="query"?B[Fo]:void 0;let S;const D=async($,V,Z,ne)=>{if(V==null&&$.pages.length)return Promise.resolve({data:$});const le={queryArg:B.originalArgs,pageParam:V},oe=await G(le),pe=ne?f:p;return{data:{pages:pe($.pages,oe.data,Z),pageParams:pe($.pageParams,V,Z)}}};async function G($){let V;const{extraOptions:Z}=T;if(N?V=N():T.query?V=await e(T.query($),L,Z):V=await T.queryFn($,L,Z,le=>e(le,L,Z)),typeof process<"u",V.error)throw new o_(V.error,V.meta);const ne=await P(V.data,V.meta,$);return{...V,data:ne}}if(B.type==="query"&&"infiniteQueryOptions"in T){const{infiniteQueryOptions:$}=T,{maxPages:V=1/0}=$;let Z;const ne={pages:[],pageParams:[]},le=u.selectQueryEntry(se(),B.queryCacheKey)?.data,pe=_(B,se())&&!B.direction||!le?ne:le;if("direction"in B&&B.direction&&pe.pages.length){const he=B.direction==="backward",Fe=(he?Wx:Ep)($,pe);Z=await D(pe,Fe,V,he)}else{const{initialPageParam:he=$.initialPageParam}=B,$e=le?.pageParams??[],Fe=$e[0]??he,nt=$e.length;Z=await D(pe,Fe,V),N&&(Z={data:Z.data.pages[0]});for(let pt=1;pt<nt;pt++){const _e=Ep($,Z.data);Z=await D(Z.data,_e,V)}}S=Z}else S=await G(B.originalArgs);return Q(S.data,Cu({fulfilledTimeStamp:Date.now(),baseQueryMeta:S.meta}))}catch(P){let L=P;if(L instanceof o_){let N=v(T,"transformErrorResponse");try{return H(await N(L.value,L.meta,B.originalArgs),Cu({baseQueryMeta:L.meta}))}catch(S){L=S}}throw console.error(L),L}};function _(B,j){const I=u.selectQueryEntry(j,B.queryCacheKey),H=u.selectConfig(j).refetchOnMountOrArgChange,Q=I?.fulfilledTimeStamp,te=B.forceRefetch??(B.subscribe&&H);return te?te===!0||(Number(new Date)-Number(Q))/1e3>=te:!1}const M=()=>hb(`${n}/executeQuery`,b,{getPendingMeta({arg:j}){const I=t[j.endpointName];return Cu({startedTimeStamp:Date.now(),...Dg(I)?{direction:j.direction}:{}})},condition(j,{getState:I}){const H=I(),Q=u.selectQueryEntry(H,j.queryCacheKey),te=Q?.fulfilledTimeStamp,se=j.originalArgs,ae=Q?.originalArgs,T=t[j.endpointName],P=j.direction;return Ap(j)?!0:Q?.status==="pending"?!1:_(j,H)||Pg(T)&&T?.forceRefetch?.({currentArg:se,previousArg:ae,endpointState:Q,state:H})?!0:!(te&&!P)},dispatchConditionRejection:!0}),x=M(),E=M(),C=hb(`${n}/executeMutation`,b,{getPendingMeta(){return Cu({startedTimeStamp:Date.now()})}}),A=B=>"force"in B,k=B=>"ifOlderThan"in B,z=(B,j,I)=>(H,Q)=>{const te=A(I)&&I.force,se=k(I)&&I.ifOlderThan,ae=(P=!0)=>{const L={forceRefetch:P,isPrefetch:!0};return a.endpoints[B].initiate(j,L)},T=a.endpoints[B].select(j)(Q());if(te)H(ae());else if(se){const P=T?.fulfilledTimeStamp;if(!P){H(ae());return}(Number(new Date)-Number(new Date(P)))/1e3>=se&&H(ae())}else H(ae(!1))};function U(B){return j=>j?.meta?.arg?.endpointName===B}function O(B,j){return{matchPending:Po(dg(B),U(j)),matchFulfilled:Po(Jr(B),U(j)),matchRejected:Po(Ks(B),U(j))}}return{queryThunk:x,mutationThunk:C,infiniteQueryThunk:E,prefetch:z,updateQueryData:g,upsertQueryData:m,patchQueryData:h,buildMatchThunkActions:O}}function Ep(n,{pages:e,pageParams:t}){const i=e.length-1;return n.getNextPageParam(e[i],e,t[i],t)}function Wx(n,{pages:e,pageParams:t}){return n.getPreviousPageParam?.(e[0],e,t[0],t)}function Qx(n,e,t,i){return Bg(t[n.meta.arg.endpointName][e],Jr(n)?n.payload:void 0,wc(n)?n.payload:void 0,n.meta.arg.originalArgs,"baseQueryMeta"in n.meta?n.meta.baseQueryMeta:void 0,i)}function Ru(n,e,t){const i=n[e];i&&t(i)}function Vo(n){return("arg"in n?n.arg.fixedCacheKey:n.fixedCacheKey)??n.requestId}function l_(n,e,t){const i=n[Vo(e)];i&&t(i)}var ho={};function Xk({reducerPath:n,queryThunk:e,mutationThunk:t,serializeQueryArgs:i,context:{endpointDefinitions:a,apiUid:l,extractRehydrationInfo:u,hasRehydrationInfo:h},assertTagType:f,config:p}){const g=qt(`${n}/resetApiState`);function m(O,B,j,I){O[B.queryCacheKey]??={status:"uninitialized",endpointName:B.endpointName},Ru(O,B.queryCacheKey,H=>{H.status="pending",H.requestId=j&&H.requestId?H.requestId:I.requestId,B.originalArgs!==void 0&&(H.originalArgs=B.originalArgs),H.startedTimeStamp=I.startedTimeStamp;const Q=a[I.arg.endpointName];Dg(Q)&&"direction"in B&&(H.direction=B.direction)})}function v(O,B,j,I){Ru(O,B.arg.queryCacheKey,H=>{if(H.requestId!==B.requestId&&!I)return;const{merge:Q}=a[B.arg.endpointName];if(H.status="fulfilled",Q)if(H.data!==void 0){const{fulfilledTimeStamp:te,arg:se,baseQueryMeta:ae,requestId:T}=B;let P=nl(H.data,L=>Q(L,j,{arg:se.originalArgs,baseQueryMeta:ae,fulfilledTimeStamp:te,requestId:T}));H.data=P}else H.data=j;else H.data=a[B.arg.endpointName].structuralSharing??!0?Vx(Fn(H.data)?KT(H.data):H.data,j):j;delete H.error,H.fulfilledTimeStamp=B.fulfilledTimeStamp})}const b=vr({name:`${n}/queries`,initialState:ho,reducers:{removeQueryResult:{reducer(O,{payload:{queryCacheKey:B}}){delete O[B]},prepare:oo()},cacheEntriesUpserted:{reducer(O,B){for(const j of B.payload){const{queryDescription:I,value:H}=j;m(O,I,!0,{arg:I,requestId:B.meta.requestId,startedTimeStamp:B.meta.timestamp}),v(O,{arg:I,requestId:B.meta.requestId,fulfilledTimeStamp:B.meta.timestamp,baseQueryMeta:{}},H,!0)}},prepare:O=>({payload:O.map(I=>{const{endpointName:H,arg:Q,value:te}=I,se=a[H];return{queryDescription:{type:"query",endpointName:H,originalArgs:I.arg,queryCacheKey:i({queryArgs:Q,endpointDefinition:se,endpointName:H})},value:te}}),meta:{[bc]:!0,requestId:il(),timestamp:Date.now()}})},queryResultPatched:{reducer(O,{payload:{queryCacheKey:B,patches:j}}){Ru(O,B,I=>{I.data=ib(I.data,j.concat())})},prepare:oo()}},extraReducers(O){O.addCase(e.pending,(B,{meta:j,meta:{arg:I}})=>{const H=Ap(I);m(B,I,H,j)}).addCase(e.fulfilled,(B,{meta:j,payload:I})=>{const H=Ap(j.arg);v(B,j,I,H)}).addCase(e.rejected,(B,{meta:{condition:j,arg:I,requestId:H},error:Q,payload:te})=>{Ru(B,I.queryCacheKey,se=>{if(!j){if(se.requestId!==H)return;se.status="rejected",se.error=te??Q}})}).addMatcher(h,(B,j)=>{const{queries:I}=u(j);for(const[H,Q]of Object.entries(I))(Q?.status==="fulfilled"||Q?.status==="rejected")&&(B[H]=Q)})}}),_=vr({name:`${n}/mutations`,initialState:ho,reducers:{removeMutationResult:{reducer(O,{payload:B}){const j=Vo(B);j in O&&delete O[j]},prepare:oo()}},extraReducers(O){O.addCase(t.pending,(B,{meta:j,meta:{requestId:I,arg:H,startedTimeStamp:Q}})=>{H.track&&(B[Vo(j)]={requestId:I,status:"pending",endpointName:H.endpointName,startedTimeStamp:Q})}).addCase(t.fulfilled,(B,{payload:j,meta:I})=>{I.arg.track&&l_(B,I,H=>{H.requestId===I.requestId&&(H.status="fulfilled",H.data=j,H.fulfilledTimeStamp=I.fulfilledTimeStamp)})}).addCase(t.rejected,(B,{payload:j,error:I,meta:H})=>{H.arg.track&&l_(B,H,Q=>{Q.requestId===H.requestId&&(Q.status="rejected",Q.error=j??I)})}).addMatcher(h,(B,j)=>{const{mutations:I}=u(j);for(const[H,Q]of Object.entries(I))(Q?.status==="fulfilled"||Q?.status==="rejected")&&H!==Q?.requestId&&(B[H]=Q)})}}),M=vr({name:`${n}/invalidation`,initialState:ho,reducers:{updateProvidedBy:{reducer(O,B){const{queryCacheKey:j,providedTags:I}=B.payload;for(const H of Object.values(O))for(const Q of Object.values(H)){const te=Q.indexOf(j);te!==-1&&Q.splice(te,1)}for(const{type:H,id:Q}of I){const te=(O[H]??={})[Q||"__internal_without_id"]??=[];te.includes(j)||te.push(j)}},prepare:oo()}},extraReducers(O){O.addCase(b.actions.removeQueryResult,(B,{payload:{queryCacheKey:j}})=>{for(const I of Object.values(B))for(const H of Object.values(I)){const Q=H.indexOf(j);Q!==-1&&H.splice(Q,1)}}).addMatcher(h,(B,j)=>{const{provided:I}=u(j);for(const[H,Q]of Object.entries(I))for(const[te,se]of Object.entries(Q)){const ae=(B[H]??={})[te||"__internal_without_id"]??=[];for(const T of se)ae.includes(T)||ae.push(T)}}).addMatcher(xr(Jr(e),wc(e)),(B,j)=>{x(B,j)}).addMatcher(b.actions.cacheEntriesUpserted.match,(B,j)=>{for(const{queryDescription:I,value:H}of j.payload)x(B,{type:"UNKNOWN",payload:H,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:I}})})}});function x(O,B){const j=Qx(B,"providesTags",a,f),{queryCacheKey:I}=B.meta.arg;M.caseReducers.updateProvidedBy(O,M.actions.updateProvidedBy({queryCacheKey:I,providedTags:j}))}const E=vr({name:`${n}/subscriptions`,initialState:ho,reducers:{updateSubscriptionOptions(O,B){},unsubscribeQueryResult(O,B){},internal_getRTKQSubscriptions(){}}}),C=vr({name:`${n}/internalSubscriptions`,initialState:ho,reducers:{subscriptionsUpdated:{reducer(O,B){return ib(O,B.payload)},prepare:oo()}}}),A=vr({name:`${n}/config`,initialState:{online:Nk(),focused:Ik(),middlewareRegistered:!1,...p},reducers:{middlewareRegistered(O,{payload:B}){O.middlewareRegistered=O.middlewareRegistered==="conflict"||l!==B?"conflict":!0}},extraReducers:O=>{O.addCase(Og,B=>{B.online=!0}).addCase(Xx,B=>{B.online=!1}).addCase(Rg,B=>{B.focused=!0}).addCase(Yx,B=>{B.focused=!1}).addMatcher(h,B=>({...B}))}}),k=og({queries:b.reducer,mutations:_.reducer,provided:M.reducer,subscriptions:C.reducer,config:A.reducer}),z=(O,B)=>k(g.match(B)?void 0:O,B),U={...A.actions,...b.actions,...E.actions,...C.actions,..._.actions,...M.actions,resetApiState:g};return{reducer:z,actions:U}}var br=Symbol.for("RTKQ/skipToken"),Kx={status:"uninitialized"},u_=nl(Kx,()=>{}),c_=nl(Kx,()=>{});function Wk({serializeQueryArgs:n,reducerPath:e,createSelector:t}){const i=A=>u_,a=A=>c_;return{buildQuerySelector:v,buildInfiniteQuerySelector:b,buildMutationSelector:_,selectInvalidatedBy:M,selectCachedArgsForQuery:x,selectApiState:u,selectQueries:h,selectMutations:p,selectQueryEntry:f,selectConfig:g};function l(A){return{...A,...i_(A.status)}}function u(A){return A[e]}function h(A){return u(A)?.queries}function f(A,k){return h(A)?.[k]}function p(A){return u(A)?.mutations}function g(A){return u(A)?.config}function m(A,k,z){return U=>{if(U===br)return t(i,z);const O=n({queryArgs:U,endpointDefinition:k,endpointName:A});return t(j=>f(j,O)??u_,z)}}function v(A,k){return m(A,k,l)}function b(A,k){const{infiniteQueryOptions:z}=k;function U(O){const B={...O,...i_(O.status)},{isLoading:j,isError:I,direction:H}=B,Q=H==="forward",te=H==="backward";return{...B,hasNextPage:E(z,B.data),hasPreviousPage:C(z,B.data),isFetchingNextPage:j&&Q,isFetchingPreviousPage:j&&te,isFetchNextPageError:I&&Q,isFetchPreviousPageError:I&&te}}return m(A,k,U)}function _(){return A=>{let k;return typeof A=="object"?k=Vo(A)??br:k=A,t(k===br?a:O=>u(O)?.mutations?.[k]??c_,l)}}function M(A,k){const z=A[e],U=new Set;for(const O of k.filter(cc).map(Sp)){const B=z.provided[O.type];if(!B)continue;let j=(O.id!==void 0?B[O.id]:a_(Object.values(B)))??[];for(const I of j)U.add(I)}return a_(Array.from(U.values()).map(O=>{const B=z.queries[O];return B?[{queryCacheKey:O,endpointName:B.endpointName,originalArgs:B.originalArgs}]:[]}))}function x(A,k){return Object.values(h(A)).filter(z=>z?.endpointName===k&&z.status!=="uninitialized").map(z=>z.originalArgs)}function E(A,k){return k?Ep(A,k)!=null:!1}function C(A,k){return!k||!A.getPreviousPageParam?!1:Wx(A,k)!=null}}var h_=WeakMap?new WeakMap:void 0,Tp=({endpointName:n,queryArgs:e})=>{let t="";const i=h_?.get(e);if(typeof i=="string")t=i;else{const a=JSON.stringify(e,(l,u)=>(u=typeof u=="bigint"?{$bigint:u.toString()}:u,u=Qs(u)?Object.keys(u).sort().reduce((h,f)=>(h[f]=u[f],h),{}):u,u));Qs(e)&&h_?.set(e,a),t=a}return`${n}(${t})`};function Zx(...n){return function(t){const i=ac(p=>t.extractRehydrationInfo?.(p,{reducerPath:t.reducerPath??"api"})),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:i,serializeQueryArgs(p){let g=Tp;if("serializeQueryArgs"in p.endpointDefinition){const m=p.endpointDefinition.serializeQueryArgs;g=v=>{const b=m(v);return typeof b=="string"?b:Tp({...v,queryArgs:b})}}else t.serializeQueryArgs&&(g=t.serializeQueryArgs);return g(p)},tagTypes:[...t.tagTypes||[]]},l={endpointDefinitions:{},batch(p){p()},apiUid:il(),extractRehydrationInfo:i,hasRehydrationInfo:ac(p=>i(p)!=null)},u={injectEndpoints:f,enhanceEndpoints({addTagTypes:p,endpoints:g}){if(p)for(const m of p)a.tagTypes.includes(m)||a.tagTypes.push(m);if(g)for(const[m,v]of Object.entries(g))typeof v=="function"?v(l.endpointDefinitions[m]):Object.assign(l.endpointDefinitions[m]||{},v);return u}},h=n.map(p=>p.init(u,a,l));function f(p){const g=p.endpoints({query:m=>({...m,type:"query"}),mutation:m=>({...m,type:"mutation"}),infiniteQuery:m=>({...m,type:"infinitequery"})});for(const[m,v]of Object.entries(g)){if(p.overrideExisting!==!0&&m in l.endpointDefinitions){if(p.overrideExisting==="throw")throw new Error(xt(39));continue}l.endpointDefinitions[m]=v;for(const b of h)b.injectEndpoint(m,v)}return u}return u.injectEndpoints({endpoints:t.endpoints})}}function Qk(){return function(){throw new Error(xt(33))}}function pr(n,...e){return Object.assign(n,...e)}var Kk=({api:n,queryThunk:e,internalState:t})=>{const i=`${n.reducerPath}/subscriptions`;let a=null,l=null;const{updateSubscriptionOptions:u,unsubscribeQueryResult:h}=n.internalActions,f=(b,_)=>{if(u.match(_)){const{queryCacheKey:x,requestId:E,options:C}=_.payload;return b?.[x]?.[E]&&(b[x][E]=C),!0}if(h.match(_)){const{queryCacheKey:x,requestId:E}=_.payload;return b[x]&&delete b[x][E],!0}if(n.internalActions.removeQueryResult.match(_))return delete b[_.payload.queryCacheKey],!0;if(e.pending.match(_)){const{meta:{arg:x,requestId:E}}=_,C=b[x.queryCacheKey]??={};return C[`${E}_running`]={},x.subscribe&&(C[E]=x.subscriptionOptions??C[E]??{}),!0}let M=!1;if(e.fulfilled.match(_)||e.rejected.match(_)){const x=b[_.meta.arg.queryCacheKey]||{},E=`${_.meta.requestId}_running`;M||=!!x[E],delete x[E]}if(e.rejected.match(_)){const{meta:{condition:x,arg:E,requestId:C}}=_;if(x&&E.subscribe){const A=b[E.queryCacheKey]??={};A[C]=E.subscriptionOptions??A[C]??{},M=!0}}return M},p=()=>t.currentSubscriptions,v={getSubscriptions:p,getSubscriptionCount:b=>{const M=p()[b]??{};return Ys(M)},isRequestSubscribed:(b,_)=>!!p()?.[b]?.[_]};return(b,_)=>{if(a||(a=JSON.parse(JSON.stringify(t.currentSubscriptions))),n.util.resetApiState.match(b))return a=t.currentSubscriptions={},l=null,[!0,!1];if(n.internalActions.internal_getRTKQSubscriptions.match(b))return[!1,v];const M=f(t.currentSubscriptions,b);let x=!0;if(M){l||(l=setTimeout(()=>{const A=JSON.parse(JSON.stringify(t.currentSubscriptions)),[,k]=vx(a,()=>A);_.next(n.internalActions.subscriptionsUpdated(k)),a=A,l=null},500));const E=typeof b.type=="string"&&!!b.type.startsWith(i),C=e.rejected.match(b)&&b.meta.condition&&!!b.meta.arg.subscribe;x=!E&&!C}return[x,!1]}};function Zk(n){for(const e in n)return!1;return!0}var Jk=2147483647/1e3-1,eC=({reducerPath:n,api:e,queryThunk:t,context:i,internalState:a,selectors:{selectQueryEntry:l,selectConfig:u}})=>{const{removeQueryResult:h,unsubscribeQueryResult:f,cacheEntriesUpserted:p}=e.internalActions,g=xr(f.match,t.fulfilled,t.rejected,p.match);function m(x){const E=a.currentSubscriptions[x];return!!E&&!Zk(E)}const v={},b=(x,E,C)=>{const A=E.getState(),k=u(A);if(g(x)){let z;if(p.match(x))z=x.payload.map(U=>U.queryDescription.queryCacheKey);else{const{queryCacheKey:U}=f.match(x)?x.payload:x.meta.arg;z=[U]}_(z,E,k)}if(e.util.resetApiState.match(x))for(const[z,U]of Object.entries(v))U&&clearTimeout(U),delete v[z];if(i.hasRehydrationInfo(x)){const{queries:z}=i.extractRehydrationInfo(x);_(Object.keys(z),E,k)}};function _(x,E,C){const A=E.getState();for(const k of x){const z=l(A,k);M(k,z?.endpointName,E,C)}}function M(x,E,C,A){const z=i.endpointDefinitions[E]?.keepUnusedDataFor??A.keepUnusedDataFor;if(z===1/0)return;const U=Math.max(0,Math.min(z,Jk));if(!m(x)){const O=v[x];O&&clearTimeout(O),v[x]=setTimeout(()=>{m(x)||C.dispatch(h({queryCacheKey:x})),delete v[x]},U*1e3)}}return b},f_=new Error("Promise never resolved before cacheEntryRemoved."),tC=({api:n,reducerPath:e,context:t,queryThunk:i,mutationThunk:a,internalState:l,selectors:{selectQueryEntry:u,selectApiState:h}})=>{const f=vp(i),p=vp(a),g=Jr(i,a),m={};function v(E,C,A){const k=m[E];k?.valueResolved&&(k.valueResolved({data:C,meta:A}),delete k.valueResolved)}function b(E){const C=m[E];C&&(delete m[E],C.cacheEntryRemoved())}const _=(E,C,A)=>{const k=M(E);function z(U,O,B,j){const I=u(A,O),H=u(C.getState(),O);!I&&H&&x(U,j,O,C,B)}if(i.pending.match(E))z(E.meta.arg.endpointName,k,E.meta.requestId,E.meta.arg.originalArgs);else if(n.internalActions.cacheEntriesUpserted.match(E))for(const{queryDescription:U,value:O}of E.payload){const{endpointName:B,originalArgs:j,queryCacheKey:I}=U;z(B,I,E.meta.requestId,j),v(I,O,{})}else if(a.pending.match(E))C.getState()[e].mutations[k]&&x(E.meta.arg.endpointName,E.meta.arg.originalArgs,k,C,E.meta.requestId);else if(g(E))v(k,E.payload,E.meta.baseQueryMeta);else if(n.internalActions.removeQueryResult.match(E)||n.internalActions.removeMutationResult.match(E))b(k);else if(n.util.resetApiState.match(E))for(const U of Object.keys(m))b(U)};function M(E){return f(E)?E.meta.arg.queryCacheKey:p(E)?E.meta.arg.fixedCacheKey??E.meta.requestId:n.internalActions.removeQueryResult.match(E)?E.payload.queryCacheKey:n.internalActions.removeMutationResult.match(E)?Vo(E.payload):""}function x(E,C,A,k,z){const U=t.endpointDefinitions[E],O=U?.onCacheEntryAdded;if(!O)return;const B={},j=new Promise(ae=>{B.cacheEntryRemoved=ae}),I=Promise.race([new Promise(ae=>{B.valueResolved=ae}),j.then(()=>{throw f_})]);I.catch(()=>{}),m[A]=B;const H=n.endpoints[E].select(U.type==="query"?C:A),Q=k.dispatch((ae,T,P)=>P),te={...k,getCacheEntry:()=>H(k.getState()),requestId:z,extra:Q,updateCachedData:U.type==="query"?ae=>k.dispatch(n.util.updateQueryData(E,C,ae)):void 0,cacheDataLoaded:I,cacheEntryRemoved:j},se=O(C,te);Promise.resolve(se).catch(ae=>{if(ae!==f_)throw ae})}return _},nC=({api:n,context:{apiUid:e},reducerPath:t})=>(i,a)=>{n.util.resetApiState.match(i)&&a.dispatch(n.internalActions.middlewareRegistered(e))},rC=({reducerPath:n,context:e,context:{endpointDefinitions:t},mutationThunk:i,queryThunk:a,api:l,assertTagType:u,refetchQuery:h,internalState:f})=>{const{removeQueryResult:p}=l.internalActions,g=xr(Jr(i),wc(i)),m=xr(Jr(i,a),Ks(i,a));let v=[];const b=(x,E)=>{g(x)?M(Qx(x,"invalidatesTags",t,u),E):m(x)?M([],E):l.util.invalidateTags.match(x)&&M(Bg(x.payload,void 0,void 0,void 0,void 0,u),E)};function _(x){const{queries:E,mutations:C}=x;for(const A of[E,C])for(const k in A)if(A[k]?.status==="pending")return!0;return!1}function M(x,E){const C=E.getState(),A=C[n];if(v.push(...x),A.config.invalidationBehavior==="delayed"&&_(A))return;const k=v;if(v=[],k.length===0)return;const z=l.util.selectInvalidatedBy(C,k);e.batch(()=>{const U=Array.from(z.values());for(const{queryCacheKey:O}of U){const B=A.queries[O],j=f.currentSubscriptions[O]??{};B&&(Ys(j)===0?E.dispatch(p({queryCacheKey:O})):B.status!=="uninitialized"&&E.dispatch(h(B)))}})}return b},iC=({reducerPath:n,queryThunk:e,api:t,refetchQuery:i,internalState:a})=>{const l={},u=(v,b)=>{(t.internalActions.updateSubscriptionOptions.match(v)||t.internalActions.unsubscribeQueryResult.match(v))&&f(v.payload,b),(e.pending.match(v)||e.rejected.match(v)&&v.meta.condition)&&f(v.meta.arg,b),(e.fulfilled.match(v)||e.rejected.match(v)&&!v.meta.condition)&&h(v.meta.arg,b),t.util.resetApiState.match(v)&&g()};function h({queryCacheKey:v},b){const _=b.getState()[n],M=_.queries[v],x=a.currentSubscriptions[v];if(!M||M.status==="uninitialized")return;const{lowestPollingInterval:E,skipPollingIfUnfocused:C}=m(x);if(!Number.isFinite(E))return;const A=l[v];A?.timeout&&(clearTimeout(A.timeout),A.timeout=void 0);const k=Date.now()+E;l[v]={nextPollTimestamp:k,pollingInterval:E,timeout:setTimeout(()=>{(_.config.focused||!C)&&b.dispatch(i(M)),h({queryCacheKey:v},b)},E)}}function f({queryCacheKey:v},b){const M=b.getState()[n].queries[v],x=a.currentSubscriptions[v];if(!M||M.status==="uninitialized")return;const{lowestPollingInterval:E}=m(x);if(!Number.isFinite(E)){p(v);return}const C=l[v],A=Date.now()+E;(!C||A<C.nextPollTimestamp)&&h({queryCacheKey:v},b)}function p(v){const b=l[v];b?.timeout&&clearTimeout(b.timeout),delete l[v]}function g(){for(const v of Object.keys(l))p(v)}function m(v={}){let b=!1,_=Number.POSITIVE_INFINITY;for(let M in v)v[M].pollingInterval&&(_=Math.min(v[M].pollingInterval,_),b=v[M].skipPollingIfUnfocused||b);return{lowestPollingInterval:_,skipPollingIfUnfocused:b}}return u},sC=({api:n,context:e,queryThunk:t,mutationThunk:i})=>{const a=dg(t,i),l=Ks(t,i),u=Jr(t,i),h={};return(p,g)=>{if(a(p)){const{requestId:m,arg:{endpointName:v,originalArgs:b}}=p.meta,_=e.endpointDefinitions[v],M=_?.onQueryStarted;if(M){const x={},E=new Promise((z,U)=>{x.resolve=z,x.reject=U});E.catch(()=>{}),h[m]=x;const C=n.endpoints[v].select(_.type==="query"?b:m),A=g.dispatch((z,U,O)=>O),k={...g,getCacheEntry:()=>C(g.getState()),requestId:m,extra:A,updateCachedData:_.type==="query"?z=>g.dispatch(n.util.updateQueryData(v,b,z)):void 0,queryFulfilled:E};M(b,k)}}else if(u(p)){const{requestId:m,baseQueryMeta:v}=p.meta;h[m]?.resolve({data:p.payload,meta:v}),delete h[m]}else if(l(p)){const{requestId:m,rejectedWithValue:v,baseQueryMeta:b}=p.meta;h[m]?.reject({error:p.payload??p.error,isUnhandledError:!v,meta:b}),delete h[m]}}},aC=({reducerPath:n,context:e,api:t,refetchQuery:i,internalState:a})=>{const{removeQueryResult:l}=t.internalActions,u=(f,p)=>{Rg.match(f)&&h(p,"refetchOnFocus"),Og.match(f)&&h(p,"refetchOnReconnect")};function h(f,p){const g=f.getState()[n],m=g.queries,v=a.currentSubscriptions;e.batch(()=>{for(const b of Object.keys(v)){const _=m[b],M=v[b];if(!M||!_)continue;(Object.values(M).some(E=>E[p]===!0)||Object.values(M).every(E=>E[p]===void 0)&&g.config[p])&&(Ys(M)===0?f.dispatch(l({queryCacheKey:b})):_.status!=="uninitialized"&&f.dispatch(i(_)))}})}return u};function oC(n){const{reducerPath:e,queryThunk:t,api:i,context:a}=n,{apiUid:l}=a,u={invalidateTags:qt(`${e}/invalidateTags`)},h=m=>m.type.startsWith(`${e}/`),f=[nC,eC,rC,iC,tC,sC];return{middleware:m=>{let v=!1;const _={...n,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:h},M=f.map(C=>C(_)),x=Kk(_),E=aC(_);return C=>A=>{if(!lg(A))return C(A);v||(v=!0,m.dispatch(i.internalActions.middlewareRegistered(l)));const k={...m,next:C},z=m.getState(),[U,O]=x(A,k,z);let B;if(U?B=C(A):B=O,m.getState()[e]&&(E(A,k,z),h(A)||a.hasRehydrationInfo(A)))for(const j of M)j(A,k,z);return B}},actions:u};function g(m){return n.api.endpoints[m.endpointName].initiate(m.originalArgs,{subscribe:!1,forceRefetch:!0})}}var d_=Symbol(),Jx=({createSelector:n=fg}={})=>({name:d_,init(e,{baseQuery:t,tagTypes:i,reducerPath:a,serializeQueryArgs:l,keepUnusedDataFor:u,refetchOnMountOrArgChange:h,refetchOnFocus:f,refetchOnReconnect:p,invalidationBehavior:g},m){a2();const v=G=>G;Object.assign(e,{reducerPath:a,endpoints:{},internalActions:{onOnline:Og,onOffline:Xx,onFocus:Rg,onFocusLost:Yx},util:{}});const b=Wk({serializeQueryArgs:l,reducerPath:a,createSelector:n}),{selectInvalidatedBy:_,selectCachedArgsForQuery:M,buildQuerySelector:x,buildInfiniteQuerySelector:E,buildMutationSelector:C}=b;pr(e.util,{selectInvalidatedBy:_,selectCachedArgsForQuery:M});const{queryThunk:A,infiniteQueryThunk:k,mutationThunk:z,patchQueryData:U,updateQueryData:O,upsertQueryData:B,prefetch:j,buildMatchThunkActions:I}=Yk({baseQuery:t,reducerPath:a,context:m,api:e,serializeQueryArgs:l,assertTagType:v,selectors:b}),{reducer:H,actions:Q}=Xk({context:m,queryThunk:A,mutationThunk:z,serializeQueryArgs:l,reducerPath:a,assertTagType:v,config:{refetchOnFocus:f,refetchOnReconnect:p,refetchOnMountOrArgChange:h,keepUnusedDataFor:u,reducerPath:a,invalidationBehavior:g}});pr(e.util,{patchQueryData:U,updateQueryData:O,upsertQueryData:B,prefetch:j,resetApiState:Q.resetApiState,upsertQueryEntries:Q.cacheEntriesUpserted}),pr(e.internalActions,Q);const{middleware:te,actions:se}=oC({reducerPath:a,context:m,queryThunk:A,mutationThunk:z,infiniteQueryThunk:k,api:e,assertTagType:v,selectors:b});pr(e.util,se),pr(e,{reducer:H,middleware:te});const{buildInitiateQuery:ae,buildInitiateInfiniteQuery:T,buildInitiateMutation:P,getRunningMutationThunk:L,getRunningMutationsThunk:N,getRunningQueriesThunk:S,getRunningQueryThunk:D}=Fk({queryThunk:A,mutationThunk:z,infiniteQueryThunk:k,api:e,serializeQueryArgs:l,context:m});return pr(e.util,{getRunningMutationThunk:L,getRunningMutationsThunk:N,getRunningQueryThunk:D,getRunningQueriesThunk:S}),{name:d_,injectEndpoint(G,$){const V=e,Z=V.endpoints[G]??={};Pg($)&&pr(Z,{name:G,select:x(G,$),initiate:ae(G,$)},I(A,G)),Gk($)&&pr(Z,{name:G,select:C(),initiate:P(G)},I(z,G)),Dg($)&&pr(Z,{name:G,select:E(G,$),initiate:T(G,$)},I(A,G))}}}});Jx();function Ou(n){return n.replace(n[0],n[0].toUpperCase())}function lC(n){return n.type==="query"}function uC(n){return n.type==="mutation"}function e1(n){return n.type==="infinitequery"}function fo(n,...e){return Object.assign(n,...e)}var Sd=Symbol();function p_(n,e,t,i){const a=de.useMemo(()=>({queryArgs:n,serialized:typeof n=="object"?e({queryArgs:n,endpointDefinition:t,endpointName:i}):n}),[n,e,t,i]),l=de.useRef(a);return de.useEffect(()=>{l.current.serialized!==a.serialized&&(l.current=a)},[a]),l.current.serialized===a.serialized?l.current.queryArgs:n}function Pu(n){const e=de.useRef(n);return de.useEffect(()=>{Ro(e.current,n)||(e.current=n)},[n]),Ro(e.current,n)?e.current:n}var cC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hC=cC(),fC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dC=fC(),pC=()=>hC||dC?de.useLayoutEffect:de.useEffect,gC=pC(),g_=n=>n.isUninitialized?{...n,isUninitialized:!1,isFetching:!0,isLoading:n.data===void 0,status:Fx.pending}:n;function Ad(n,...e){const t={};return e.forEach(i=>{t[i]=n[i]}),t}var Ed=["data","status","isLoading","isSuccess","isError","error"];function yC({api:n,moduleOptions:{batch:e,hooks:{useDispatch:t,useSelector:i,useStore:a},unstable__sideEffectsInRender:l,createSelector:u},serializeQueryArgs:h,context:f}){const p=l?k=>k():de.useEffect;return{buildQueryHooks:E,buildInfiniteQueryHooks:C,buildMutationHook:A,usePrefetch:v};function g(k,z,U){if(z?.endpointName&&k.isUninitialized){const{endpointName:Q}=z,te=f.endpointDefinitions[Q];U!==br&&h({queryArgs:z.originalArgs,endpointDefinition:te,endpointName:Q})===h({queryArgs:U,endpointDefinition:te,endpointName:Q})&&(z=void 0)}let O=k.isSuccess?k.data:z?.data;O===void 0&&(O=k.data);const B=O!==void 0,j=k.isLoading,I=(!z||z.isLoading||z.isUninitialized)&&!B&&j,H=k.isSuccess||B&&(j&&!z?.isError||k.isUninitialized);return{...k,data:O,currentData:k.data,isFetching:j,isLoading:I,isSuccess:H}}function m(k,z,U){if(z?.endpointName&&k.isUninitialized){const{endpointName:Q}=z,te=f.endpointDefinitions[Q];h({queryArgs:z.originalArgs,endpointDefinition:te,endpointName:Q})===h({queryArgs:U,endpointDefinition:te,endpointName:Q})&&(z=void 0)}let O=k.isSuccess?k.data:z?.data;O===void 0&&(O=k.data);const B=O!==void 0,j=k.isLoading,I=(!z||z.isLoading||z.isUninitialized)&&!B&&j,H=k.isSuccess||j&&B;return{...k,data:O,currentData:k.data,isFetching:j,isLoading:I,isSuccess:H}}function v(k,z){const U=t(),O=Pu(z);return de.useCallback((B,j)=>U(n.util.prefetch(k,B,{...O,...j})),[k,U,O])}function b(k,z,{refetchOnReconnect:U,refetchOnFocus:O,refetchOnMountOrArgChange:B,skip:j=!1,pollingInterval:I=0,skipPollingIfUnfocused:H=!1,...Q}={}){const{initiate:te}=n.endpoints[k],se=t(),ae=de.useRef(void 0);if(!ae.current){const ne=se(n.internalActions.internal_getRTKQSubscriptions());ae.current=ne}const T=p_(j?br:z,Tp,f.endpointDefinitions[k],k),P=Pu({refetchOnReconnect:U,refetchOnFocus:O,pollingInterval:I,skipPollingIfUnfocused:H}),L=de.useRef(!1),N=Q.initialPageParam,S=Pu(N),D=de.useRef(void 0);let{queryCacheKey:G,requestId:$}=D.current||{},V=!1;G&&$&&(V=ae.current.isRequestSubscribed(G,$));const Z=!V&&L.current;return p(()=>{L.current=V}),p(()=>{Z&&(D.current=void 0)},[Z]),p(()=>{const ne=D.current;if(T===br){ne?.unsubscribe(),D.current=void 0;return}const le=D.current?.subscriptionOptions;if(!ne||ne.arg!==T){ne?.unsubscribe();const oe=se(te(T,{subscriptionOptions:P,forceRefetch:B,...e1(f.endpointDefinitions[k])?{initialPageParam:S}:{}}));D.current=oe}else P!==le&&ne.updateSubscriptionOptions(P)},[se,te,B,T,P,Z,S,k]),[D,se,te,P]}function _(k,z){return(O,{skip:B=!1,selectFromResult:j}={})=>{const{select:I}=n.endpoints[k],H=p_(B?br:O,h,f.endpointDefinitions[k],k),Q=de.useRef(void 0),te=de.useMemo(()=>u([I(H),(L,N)=>N,L=>H],z,{memoizeOptions:{resultEqualityCheck:Ro}}),[I,H]),se=de.useMemo(()=>j?u([te],j,{devModeChecks:{identityFunctionCheck:"never"}}):te,[te,j]),ae=i(L=>se(L,Q.current),Ro),T=a(),P=te(T.getState(),Q.current);return gC(()=>{Q.current=P},[P]),ae}}function M(k){de.useEffect(()=>()=>{k.current?.unsubscribe?.(),k.current=void 0},[k])}function x(k){if(!k.current)throw new Error(xt(38));return k.current.refetch()}function E(k){const z=(B,j={})=>{const[I]=b(k,B,j);return M(I),de.useMemo(()=>({refetch:()=>x(I)}),[I])},U=({refetchOnReconnect:B,refetchOnFocus:j,pollingInterval:I=0,skipPollingIfUnfocused:H=!1}={})=>{const{initiate:Q}=n.endpoints[k],te=t(),[se,ae]=de.useState(Sd),T=de.useRef(void 0),P=Pu({refetchOnReconnect:B,refetchOnFocus:j,pollingInterval:I,skipPollingIfUnfocused:H});p(()=>{const D=T.current?.subscriptionOptions;P!==D&&T.current?.updateSubscriptionOptions(P)},[P]);const L=de.useRef(P);p(()=>{L.current=P},[P]);const N=de.useCallback(function(D,G=!1){let $;return e(()=>{T.current?.unsubscribe(),T.current=$=te(Q(D,{subscriptionOptions:L.current,forceRefetch:!G})),ae(D)}),$},[te,Q]),S=de.useCallback(()=>{T.current?.queryCacheKey&&te(n.internalActions.removeQueryResult({queryCacheKey:T.current?.queryCacheKey}))},[te]);return de.useEffect(()=>()=>{T?.current?.unsubscribe()},[]),de.useEffect(()=>{se!==Sd&&!T.current&&N(se,!0)},[se,N]),de.useMemo(()=>[N,se,{reset:S}],[N,se,S])},O=_(k,g);return{useQueryState:O,useQuerySubscription:z,useLazyQuerySubscription:U,useLazyQuery(B){const[j,I,{reset:H}]=U(B),Q=O(I,{...B,skip:I===Sd}),te=de.useMemo(()=>({lastArg:I}),[I]);return de.useMemo(()=>[j,{...Q,reset:H},te],[j,Q,H,te])},useQuery(B,j){const I=z(B,j),H=O(B,{selectFromResult:B===br||j?.skip?void 0:g_,...j}),Q=Ad(H,...Ed);return de.useDebugValue(Q),de.useMemo(()=>({...H,...I}),[H,I])}}}function C(k){const z=(O,B={})=>{const[j,I,H,Q]=b(k,O,B),te=de.useRef(Q);p(()=>{te.current=Q},[Q]);const se=de.useCallback(function(ae,T){let P;return e(()=>{j.current?.unsubscribe(),j.current=P=I(H(ae,{subscriptionOptions:te.current,direction:T}))}),P},[j,I,H]);return M(j),de.useMemo(()=>({trigger:se,refetch:()=>x(j),fetchNextPage:()=>se(O,"forward"),fetchPreviousPage:()=>se(O,"backward")}),[j,se,O])},U=_(k,m);return{useInfiniteQueryState:U,useInfiniteQuerySubscription:z,useInfiniteQuery(O,B){const{refetch:j,fetchNextPage:I,fetchPreviousPage:H}=z(O,B),Q=U(O,{selectFromResult:O===br||B?.skip?void 0:g_,...B}),te=Ad(Q,...Ed,"hasNextPage","hasPreviousPage");return de.useDebugValue(te),de.useMemo(()=>({...Q,fetchNextPage:I,fetchPreviousPage:H,refetch:j}),[Q,I,H,j])}}}function A(k){return({selectFromResult:z,fixedCacheKey:U}={})=>{const{select:O,initiate:B}=n.endpoints[k],j=t(),[I,H]=de.useState();de.useEffect(()=>()=>{I?.arg.fixedCacheKey||I?.reset()},[I]);const Q=de.useCallback(function(D){const G=j(B(D,{fixedCacheKey:U}));return H(G),G},[j,B,U]),{requestId:te}=I||{},se=de.useMemo(()=>O({fixedCacheKey:U,requestId:I?.requestId}),[U,I,O]),ae=de.useMemo(()=>z?u([se],z):se,[z,se]),T=i(ae,Ro),P=U==null?I?.arg.originalArgs:void 0,L=de.useCallback(()=>{e(()=>{I&&H(void 0),U&&j(n.internalActions.removeMutationResult({requestId:te,fixedCacheKey:U}))})},[j,U,I,te]),N=Ad(T,...Ed,"endpointName");de.useDebugValue(N);const S=de.useMemo(()=>({...T,originalArgs:P,reset:L}),[T,P,L]);return de.useMemo(()=>[Q,S],[Q,S])}}}var mC=Symbol(),vC=({batch:n=FT,hooks:e={useDispatch:hx,useSelector:fx,useStore:sg},createSelector:t=fg,unstable__sideEffectsInRender:i=!1,...a}={})=>({name:mC,init(l,{serializeQueryArgs:u},h){const f=l,{buildQueryHooks:p,buildInfiniteQueryHooks:g,buildMutationHook:m,usePrefetch:v}=yC({api:l,moduleOptions:{batch:n,hooks:e,unstable__sideEffectsInRender:i,createSelector:t},serializeQueryArgs:u,context:h});return fo(f,{usePrefetch:v}),fo(h,{batch:n}),{injectEndpoint(b,_){if(lC(_)){const{useQuery:M,useLazyQuery:x,useLazyQuerySubscription:E,useQueryState:C,useQuerySubscription:A}=p(b);fo(f.endpoints[b],{useQuery:M,useLazyQuery:x,useLazyQuerySubscription:E,useQueryState:C,useQuerySubscription:A}),l[`use${Ou(b)}Query`]=M,l[`useLazy${Ou(b)}Query`]=x}if(uC(_)){const M=m(b);fo(f.endpoints[b],{useMutation:M}),l[`use${Ou(b)}Mutation`]=M}else if(e1(_)){const{useInfiniteQuery:M,useInfiniteQuerySubscription:x,useInfiniteQueryState:E}=g(b);fo(f.endpoints[b],{useInfiniteQuery:M,useInfiniteQuerySubscription:x,useInfiniteQueryState:E}),l[`use${Ou(b)}InfiniteQuery`]=M}}}}}),bC=Zx(Jx(),vC());const _C=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),wC=function(n){return"/editor/"+n},y_={},Vn=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let f=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=f(t.map(p=>{if(p=wC(p),p in y_)return;y_[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":_C,g||(v.as="script"),v.crossOrigin="",v.href=p,h&&v.setAttribute("nonce",h),document.head.appendChild(v),g)return new Promise((b,_)=>{v.addEventListener("load",b),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},t1=n=>{let e;return(...t)=>(e||(e=n(...t)),e)},xC=t1(()=>Vn(()=>import("./campaign-3PQJd7A0.js"),__vite__mapDeps([0,1]))),Ec=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const SC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",xo=Array.prototype.slice.call(SC),Du=(n=>{let e={};return n.forEach((t,i)=>e[t]=i),e})(xo),AC=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ku=String.fromCharCode.bind(String),m_=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0)),EC=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),n1=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),TC=n=>{let e,t,i,a,l="";const u=n.length%3;for(let h=0;h<n.length;){if((t=n.charCodeAt(h++))>255||(i=n.charCodeAt(h++))>255||(a=n.charCodeAt(h++))>255)throw new TypeError("invalid character found");e=t<<16|i<<8|a,l+=xo[e>>18&63]+xo[e>>12&63]+xo[e>>6&63]+xo[e&63]}return u?l.slice(0,u-3)+"===".substring(u):l},MC=typeof btoa=="function"?n=>btoa(n):Ec?n=>Buffer.from(n,"binary").toString("base64"):TC,v_=Ec?n=>Buffer.from(n).toString("base64"):n=>{let t=[];for(let i=0,a=n.length;i<a;i+=4096)t.push(Ku.apply(null,n.subarray(i,i+4096)));return MC(t.join(""))},kC=(n,e=!1)=>e?EC(v_(n)):v_(n),CC=n=>{if(n=n.replace(/\s+/g,""),!AC.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t="",i,a;for(let l=0;l<n.length;)e=Du[n.charAt(l++)]<<18|Du[n.charAt(l++)]<<12|(i=Du[n.charAt(l++)])<<6|(a=Du[n.charAt(l++)]),t+=i===64?Ku(e>>16&255):a===64?Ku(e>>16&255,e>>8&255):Ku(e>>16&255,e>>8&255,e&255);return t},RC=typeof atob=="function"?n=>atob(n1(n)):Ec?n=>Buffer.from(n,"base64").toString("binary"):CC,OC=Ec?n=>m_(Buffer.from(n,"base64")):n=>m_(RC(n).split("").map(e=>e.charCodeAt(0))),PC=n=>OC(DC(n)),DC=n=>n1(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),BC=!0,r1="gzip",jC=async n=>{const e=JSON.stringify(n),i=new TextEncoder().encode(e),a=new Blob([i]),l=new CompressionStream(r1),u=a.stream().pipeThrough(l),h=await new Response(u).arrayBuffer(),f=new Uint8Array(h);return kC(f,BC)},i1=async n=>{try{const e=PC(n),t=new Blob([new Uint8Array(e)]),i=new DecompressionStream(r1),a=t.stream().pipeThrough(i),l=await new Response(a).text();return JSON.parse(l)}catch(e){throw new Error("error decompressing object",{cause:e})}},zC=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vn(async()=>{const{default:i}=await Promise.resolve().then(()=>ra);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class jg extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class UC extends jg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class b_ extends jg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class __ extends jg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Mp||(Mp={}));var LC=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};class IC{constructor(e,{headers:t={},customFetch:i,region:a=Mp.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=zC(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return LC(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:u}=t;let h={},{region:f}=t;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const m=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g}).catch(M=>{throw new UC(M)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new b_(m);if(!m.ok)throw new __(m);let b=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield m.json():b==="application/octet-stream"?_=yield m.blob():b==="text/event-stream"?_=m:b==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof __||a instanceof b_?a.context:void 0}}})}}var bt={},Rs={},Os={},Ps={},Ds={},Bs={},NC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zs=NC();const qC=Zs.fetch,s1=Zs.fetch.bind(Zs),a1=Zs.Headers,GC=Zs.Request,HC=Zs.Response,ra=Object.freeze(Object.defineProperty({__proto__:null,Headers:a1,Request:GC,Response:HC,default:s1,fetch:qC},Symbol.toStringTag,{value:"Module"})),$C=pT(ra);var Bu={},w_;function o1(){if(w_)return Bu;w_=1,Object.defineProperty(Bu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Bu.default=n,Bu}var x_;function l1(){if(x_)return Bs;x_=1;var n=Bs&&Bs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Bs,"__esModule",{value:!0});const e=n($C),t=n(o1());class i{constructor(l){this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=l.headers,this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=l.shouldThrowOnError,this.signal=l.signal,this.isMaybeSingle=l.isMaybeSingle,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=Object.assign({},this.headers),this.headers[l]=u,this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,m,v;let b=null,_=null,M=null,x=p.status,E=p.statusText;if(p.ok){if(this.method!=="HEAD"){const z=await p.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=z:_=JSON.parse(z))}const A=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),k=(m=p.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");A&&k&&k.length>1&&(M=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,M=null,x=406,E="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const A=await p.text();try{b=JSON.parse(A),Array.isArray(b)&&p.status===404&&(_=[],b=null,x=200,E="OK")}catch{p.status===404&&A===""?(x=204,E="No Content"):b={message:A}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,x=200,E="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:_,count:M,status:x,statusText:E}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,m,v;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(m=p?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(l,u)}returns(){return this}overrideTypes(){return this}}return Bs.default=i,Bs}var S_;function u1(){if(S_)return Ds;S_=1;var n=Ds&&Ds.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ds,"__esModule",{value:!0});const e=n(l1());class t extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:p="text"}={}){var g;const m=[a?"analyze":null,l?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${v}"; options=${m};`,p==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ds.default=t,Ds}var A_;function zg(){if(A_)return Ps;A_=1;var n=Ps&&Ps.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ps,"__esModule",{value:!0});const e=n(u1());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${p}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return Ps.default=t,Ps}var E_;function c1(){if(E_)return Os;E_=1;var n=Os&&Os.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Os,"__esModule",{value:!0});const e=n(zg());class t{constructor(a,{headers:l={},schema:u,fetch:h}){this.url=a,this.headers=l,this.schema=u,this.fetch=h}select(a,{head:l=!1,count:u}={}){const h=l?"HEAD":"GET";let f=!1;const p=(a??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:l,defaultToNull:u=!0}={}){const h="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(a)){const p=a.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(p.length>0){const g=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){const p="POST",g=[`resolution=${u?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&g.push(this.headers.Prefer),h&&g.push(`count=${h}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const m=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:l}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),l&&h.push(`count=${l}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const l="DELETE",u=[];return a&&u.push(`count=${a}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Os.default=t,Os}var po={},go={},T_;function FC(){return T_||(T_=1,Object.defineProperty(go,"__esModule",{value:!0}),go.version=void 0,go.version="0.0.0-automated"),go}var M_;function VC(){if(M_)return po;M_=1,Object.defineProperty(po,"__esModule",{value:!0}),po.DEFAULT_HEADERS=void 0;const n=FC();return po.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},po}var k_;function YC(){if(k_)return Rs;k_=1;var n=Rs&&Rs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Rs,"__esModule",{value:!0});const e=n(c1()),t=n(zg()),i=VC();class a{constructor(u,{headers:h={},schema:f,fetch:p}={}){this.url=u,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),h),this.schemaName=f,this.fetch=p}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:f=!1,get:p=!1,count:g}={}){let m;const v=new URL(`${this.url}/rpc/${u}`);let b;f||p?(m=f?"HEAD":"GET",Object.entries(h).filter(([M,x])=>x!==void 0).map(([M,x])=>[M,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([M,x])=>{v.searchParams.append(M,x)})):(m="POST",b=h);const _=Object.assign({},this.headers);return g&&(_.Prefer=`count=${g}`),new t.default({method:m,url:v,headers:_,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Rs.default=a,Rs}var C_;function XC(){if(C_)return bt;C_=1;var n=bt&&bt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(bt,"__esModule",{value:!0}),bt.PostgrestError=bt.PostgrestBuilder=bt.PostgrestTransformBuilder=bt.PostgrestFilterBuilder=bt.PostgrestQueryBuilder=bt.PostgrestClient=void 0;const e=n(YC());bt.PostgrestClient=e.default;const t=n(c1());bt.PostgrestQueryBuilder=t.default;const i=n(zg());bt.PostgrestFilterBuilder=i.default;const a=n(u1());bt.PostgrestTransformBuilder=a.default;const l=n(l1());bt.PostgrestBuilder=l.default;const u=n(o1());return bt.PostgrestError=u.default,bt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},bt}var WC=XC();const QC=Yn(WC),{PostgrestClient:KC,PostgrestQueryBuilder:D4,PostgrestFilterBuilder:B4,PostgrestTransformBuilder:j4,PostgrestBuilder:z4,PostgrestError:U4}=QC;function ZC(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const JC=ZC(),eR="2.11.15",tR=`realtime-js/${eR}`,nR="1.0.0",h1=1e4,rR=1e3;var jo;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(jo||(jo={}));var jt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(jt||(jt={}));var On;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(On||(On={}));var kp;(function(n){n.websocket="websocket"})(kp||(kp={}));var zi;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(zi||(zi={}));class iR{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const a=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(e.slice(u,u+a));u=u+a;const f=i.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(i.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}class f1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(He||(He={}));const R_=(n,e,t={})=>{var i;const a=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,u)=>(l[u]=sR(u,n,e,a),l),{})},sR=(n,e,t,i)=>{const a=e.find(h=>h.name===n),l=a?.type,u=t[n];return l&&!i.includes(l)?d1(l,u):Cp(u)},d1=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return uR(e,t)}switch(n){case He.bool:return aR(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return oR(e);case He.json:case He.jsonb:return lR(e);case He.timestamp:return cR(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Cp(e);default:return Cp(e)}},Cp=n=>n,aR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},oR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},lR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},uR=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let l;const u=n.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>d1(e,h))}return n},cR=n=>typeof n=="string"?n.replace(" ","T"):n,p1=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Td{constructor(e,t,i={},a=h1){this.channel=e,this.event=t,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var O_;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(O_||(O_={}));class zo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zo.syncState(this.state,a,l,u),this.pendingDiffs.forEach(f=>{this.state=zo.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=zo.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,a){const l=this.cloneDeep(e),u=this.transformState(t),h={},f={};return this.map(l,(p,g)=>{u[p]||(f[p]=g)}),this.map(u,(p,g)=>{const m=l[p];if(m){const v=g.map(x=>x.presence_ref),b=m.map(x=>x.presence_ref),_=g.filter(x=>b.indexOf(x.presence_ref)<0),M=m.filter(x=>v.indexOf(x.presence_ref)<0);_.length>0&&(h[p]=_),M.length>0&&(f[p]=M)}else h[p]=g}),this.syncDiff(l,{joins:h,leaves:f},i,a)}static syncDiff(e,t,i,a){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(h,f)=>{var p;const g=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(f),g.length>0){const m=e[h].map(b=>b.presence_ref),v=g.filter(b=>m.indexOf(b.presence_ref)<0);e[h].unshift(...v)}i(h,g,f)}),this.map(u,(h,f)=>{let p=e[h];if(!p)return;const g=f.map(m=>m.presence_ref);p=p.filter(m=>g.indexOf(m.presence_ref)<0),e[h]=p,a(h,p,f),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const a=e[i];return"metas"in a?t[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[i]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P_;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(P_||(P_={}));var D_;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(D_||(D_={}));var mr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class Ug{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Td(this,On.join,this.params,this.timeout),this.rejoinTimer=new f1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(On.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new zo(this),this.broadcastEndpointURL=p1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params;this._onError(g=>e?.(mr.CHANNEL_ERROR,g)),this._onClose(()=>e?.(mr.CLOSED));const f={},p={broadcast:l,presence:u,postgres_changes:(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(g=>g.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket.setAuth(),g===void 0){e?.(mr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v?.length)!==null&&m!==void 0?m:0,_=[];for(let M=0;M<b;M++){const x=v[M],{filter:{event:E,schema:C,table:A,filter:k}}=x,z=g&&g[M];if(z&&z.event===E&&z.schema===C&&z.table===A&&z.filter===k)_.push(Object.assign(Object.assign({},x),{id:z.id}));else{this.unsubscribe(),this.state=jt.errored,e?.(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(mr.SUBSCRIBED);return}}).receive("error",g=>{this.state=jt.errored,e?.(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(On.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Td(this,On.leave,{},e),i.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),u}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Td(this,e,t,i);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:p,join:g}=On;if(i&&[h,f,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,t,i);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var _,M,x;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((x=(M=b.filter)===null||M===void 0?void 0:M.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===u}).map(b=>b.callback(v,i)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var _,M,x,E,C,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const k=b.id,z=(_=b.filter)===null||_===void 0?void 0:_.event;return k&&((M=t.ids)===null||M===void 0?void 0:M.includes(k))&&(z==="*"||z?.toLocaleLowerCase()===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(C=(E=b?.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return k==="*"||k===((A=t?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:M,table:x,commit_timestamp:E,type:C,errors:A}=_;v=Object.assign(Object.assign({},{schema:M,table:x,commit_timestamp:E,eventType:C,new:{},old:{},errors:A}),this._getPayloadRecords(_))}b.callback(v,i)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Ug.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(On.close,{},e)}_onError(e){this._on(On.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=R_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=R_(e.columns,e.old_record)),t}}const B_=()=>{},hR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fR{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=h1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=B_,this.ref=0,this.logger=B_,this.conn=null,this.sendBuffer=[],this.serializer=new iR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...h)=>Vn(async()=>{const{default:f}=await Promise.resolve().then(()=>ra);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${kp.websocket}`,this.httpEndpoint=p1(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(i=t?.params)===null||i===void 0?void 0:i.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=t?.encode?t.encode:(l,u)=>u(JSON.stringify(l)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new f1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=JC),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nR}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case jo.connecting:return zi.Connecting;case jo.open:return zi.Open;case jo.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}channel(e,t={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new Ug(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:i,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${t} ${i} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const a={access_token:t,version:tR};t&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(On.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(rR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:a,payload:l,ref:u}=t;i==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${i} ${a} ${u&&"("+u+")"||""}`,l),Array.from(this.channels).filter(h=>h._isMember(i)).forEach(h=>h._trigger(a,l,u)),this.stateChangeCallbacks.message.forEach(h=>h(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(On.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${i}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([hR],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class Lg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class dR extends Lg{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Rp extends Lg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var pR=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};const g1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vn(async()=>{const{default:i}=await Promise.resolve().then(()=>ra);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},gR=()=>pR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vn(()=>Promise.resolve().then(()=>ra),void 0)).Response:Response}),Op=n=>{if(Array.isArray(n))return n.map(t=>Op(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Op(i)}),e};var Vi=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};const Md=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),yR=(n,e,t)=>Vi(void 0,void 0,void 0,function*(){const i=yield gR();n instanceof i&&!t?.noResolveJson?n.json().then(a=>{e(new dR(Md(a),n.status||500))}).catch(a=>{e(new Rp(Md(a),a))}):e(new Rp(Md(n),n))}),mR=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i&&(a.body=JSON.stringify(i)),Object.assign(Object.assign({},a),t))};function al(n,e,t,i,a,l){return Vi(this,void 0,void 0,function*(){return new Promise((u,h)=>{n(t,mR(e,i,a,l)).then(f=>{if(!f.ok)throw f;return i?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>yR(f,h,i))})})}function hc(n,e,t,i){return Vi(this,void 0,void 0,function*(){return al(n,"GET",e,t,i)})}function Xr(n,e,t,i,a){return Vi(this,void 0,void 0,function*(){return al(n,"POST",e,i,a,t)})}function vR(n,e,t,i,a){return Vi(this,void 0,void 0,function*(){return al(n,"PUT",e,i,a,t)})}function bR(n,e,t,i){return Vi(this,void 0,void 0,function*(){return al(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function y1(n,e,t,i,a){return Vi(this,void 0,void 0,function*(){return al(n,"DELETE",e,i,a,t)})}var Ft=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};const _R={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},j_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wR{constructor(e,t={},i,a){this.url=e,this.headers=t,this.bucketId=i,this.fetch=g1(a)}uploadOrUpdate(e,t,i,a){return Ft(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},j_),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f))):(l=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const p=this._removeEmptyFolders(t),g=this._getFinalPath(p),m=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:l,headers:h},u?.duplex?{duplex:u.duplex}:{})),v=yield m.json();return m.ok?{data:{path:p,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(l){if(_t(l))return{data:null,error:l};throw l}})}upload(e,t,i){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,a){return Ft(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",t);try{let f;const p=Object.assign({upsert:j_.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const m=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),v=yield m.json();return m.ok?{data:{path:l,fullPath:v.Key},error:null}:{data:null,error:v}}catch(f){if(_t(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return Ft(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const l=yield Xr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new Lg("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}})}update(e,t,i){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Ft(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}copy(e,t,i){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,i){return Ft(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Xr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,i){return Ft(this,void 0,void 0,function*(){try{const a=yield Xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}download(e,t){return Ft(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield hc(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(_t(h))return{data:null,error:h};throw h}})}info(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield hc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Op(i),error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}})}exists(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield bR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(_t(i)&&i instanceof Rp){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),a=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const h=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield y1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}list(e,t,i){return Ft(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},_R),t),{prefix:e||""});return{data:yield Xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xR="2.7.1",SR={"X-Client-Info":`storage-js/${xR}`};var js=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};class AR{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},SR),t),this.fetch=g1(i)}listBuckets(){return js(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return js(this,void 0,void 0,function*(){try{return{data:yield hc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return js(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return js(this,void 0,void 0,function*(){try{return{data:yield vR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}})}emptyBucket(e){return js(this,void 0,void 0,function*(){try{return{data:yield Xr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}deleteBucket(e){return js(this,void 0,void 0,function*(){try{return{data:yield y1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}}class ER extends AR{constructor(e,t={},i){super(e,t,i)}from(e){return new wR(this.url,this.headers,e,this.fetch)}}const TR="2.51.0";let So="";typeof Deno<"u"?So="deno":typeof document<"u"?So="web":typeof navigator<"u"&&navigator.product==="ReactNative"?So="react-native":So="node";const MR={"X-Client-Info":`supabase-js-${So}/${TR}`},kR={headers:MR},CR={schema:"public"},RR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OR={};var PR=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};const DR=n=>{let e;return n?e=n:typeof fetch>"u"?e=s1:e=fetch,(...t)=>e(...t)},BR=()=>typeof Headers>"u"?a1:Headers,jR=(n,e,t)=>{const i=DR(t),a=BR();return(l,u)=>PR(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:n;let p=new a(u?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(l,Object.assign(Object.assign({},u),{headers:p}))})};var zR=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};function UR(n){return n.endsWith("/")?n:n+"/"}function LR(n,e){var t,i;const{db:a,auth:l,realtime:u,global:h}=n,{db:f,auth:p,realtime:g,global:m}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},g),u),global:Object.assign(Object.assign(Object.assign({},m),h),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(i=h?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>zR(this,void 0,void 0,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}const m1="2.71.0",Hs=30*1e3,Pp=3,kd=Pp*Hs,IR="http://localhost:9999",NR="supabase.auth.token",qR={"X-Client-Info":`gotrue-js/${m1}`},Dp="X-Supabase-Api-Version",v1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HR=600*1e3;class Ig extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function xe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class $R extends Ig{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function FR(n){return xe(n)&&n.name==="AuthApiError"}class b1 extends Ig{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ti extends Ig{constructor(e,t,i,a){super(e,i,a),this.name=t,this.status=i}}class Yr extends ti{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function VR(n){return xe(n)&&n.name==="AuthSessionMissingError"}class ju extends ti{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zu extends ti{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Uu extends ti{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YR(n){return xe(n)&&n.name==="AuthImplicitGrantRedirectError"}class z_ extends ti{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bp extends ti{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Cd(n){return xe(n)&&n.name==="AuthRetryableFetchError"}class U_ extends ti{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class jp extends ti{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),L_=` 	
\r=`.split(""),XR=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<L_.length;e+=1)n[L_[e].charCodeAt(0)]=-2;for(let e=0;e<fc.length;e+=1)n[fc[e].charCodeAt(0)]=e;return n})();function I_(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(fc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(fc[i]),e.queuedBits-=6}}function _1(n,e,t){const i=XR[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function N_(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{KR(u,i,t)};for(let u=0;u<n.length;u+=1)_1(n.charCodeAt(u),a,l);return e.join("")}function WR(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function QR(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}WR(i,e)}}function KR(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ZR(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)_1(n.charCodeAt(a),t,i);return new Uint8Array(e)}function JR(n){const e=[];return QR(n,t=>e.push(t)),new Uint8Array(e)}function eO(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};return n.forEach(a=>I_(a,t,i)),I_(null,t,i),e.join("")}function tO(n){return Math.round(Date.now()/1e3)+n}function nO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Cn=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},w1=()=>{if(!Cn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function rO(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((i,a)=>{e[a]=i}),e}const x1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Vn(async()=>{const{default:i}=await Promise.resolve().then(()=>ra);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},iO=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",$s=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ti=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Vr=async(n,e)=>{await n.removeItem(e)};class Tc{constructor(){this.promise=new Tc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Tc.promiseConstructor=Promise;function Rd(n){const e=n.split(".");if(e.length!==3)throw new jp("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!GR.test(e[i]))throw new jp("JWT not in base64url format");return{header:JSON.parse(N_(e[0])),payload:JSON.parse(N_(e[1])),signature:ZR(e[2]),raw:{header:e[0],payload:e[1]}}}async function sO(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function aO(n,e){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await n(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function oO(n){return("0"+n.toString(16)).substr(-2)}function lO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,oO).join("")}async function uO(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function cO(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await uO(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(n,e,t=!1){const i=lO();let a=i;t&&(a+="/PASSWORD_RECOVERY"),await $s(n,`${e}-code-verifier`,a);const l=await cO(i);return[l,i===l?"plain":"s256"]}const hO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fO(n){const e=n.headers.get(Dp);if(!e||!e.match(hO))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dO(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function pO(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Us(n){if(!gO.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Od(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var yO=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t};const Ri=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mO=[502,503,504];async function q_(n){var e;if(!iO(n))throw new Bp(Ri(n),0);if(mO.includes(n.status))throw new Bp(Ri(n),n.status);let t;try{t=await n.json()}catch(l){throw new b1(Ri(l),l)}let i;const a=fO(n);if(a&&a.getTime()>=v1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new U_(Ri(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Yr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new U_(Ri(t),n.status,t.weak_password.reasons);throw new $R(Ri(t),n.status||500,i)}const vO=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),t))};async function Ce(n,e,t,i){var a;const l=Object.assign({},i?.headers);l[Dp]||(l[Dp]=v1["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await bO(n,e,t+h,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function bO(n,e,t,i,a,l){const u=vO(e,i,a,l);let h;try{h=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new Bp(Ri(f),0)}if(h.ok||await q_(h),i?.noResolveJson)return h;try{return await h.json()}catch(f){await q_(f)}}function yr(n){var e;let t=null;SO(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=tO(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function G_(n){const e=yr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Wr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function _O(n){return{data:n,error:null}}function wO(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l}=n,u=yO(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function xO(n){return n}function SO(n){return n.access_token&&n.refresh_token&&n.expires_in}const Pd=["global","local","others"];var AO=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t};class EO{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=x1(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Pd[0]){if(Pd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pd.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wr})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=AO(e,["options"]),a=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wO,redirectTo:t?.redirectTo})}catch(t){if(xe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wr})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,a,l,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:xO});if(g.error)throw g.error;const m=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(_=>{const M=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);p[`${x}Page`]=M}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},m),p),error:null}}catch(p){if(xe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Us(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wr})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Us(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wr})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Us(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wr})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Us(e.userId);try{const{data:t,error:i}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:i}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Us(e.userId),Us(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}}function H_(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function TO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ls={debug:!!(globalThis&&w1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class MO extends S1{}async function kO(n,e,t){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new MO(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ls.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}TO();const CO={url:IR,storageKey:NR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $_(n,e,t){return await t()}const Is={};class Yo{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yo.nextInstanceID,Yo.nextInstanceID+=1,this.instanceID>0&&Cn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},CO),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new EO({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=x1(a.fetch),this.lock=a.lock||$_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Cn()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=kO:this.lock=$_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:w1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=H_(this.memoryStorage)),Cn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Is[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Is[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${m1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=rO(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),Cn()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),YR(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xe(t)?{error:t}:{error:new b1("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,a;try{const l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:yr}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,i,a;try{let l;if("email"in e){const{email:g,password:m,options:v}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await zs(this.storage,this.storageKey)),l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:m,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:_},xform:yr})}else if("phone"in e){const{phone:g,password:m,options:v}=e;l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(i=v?.data)!==null&&i!==void 0?i:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:yr})}else throw new zu("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:h}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:G_})}else if("phone"in e){const{phone:l,password:u,options:h}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:G_})}else throw new zu("You must provide either an email or phone number and a password");const{data:i,error:a}=t;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ju}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,a,l,u,h,f,p,g,m,v,b;let _,M;if("message"in e)_=e.message,M=e.signature;else{const{chain:x,wallet:E,statement:C,options:A}=e;let k;if(Cn())if(typeof E=="object")k=E;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))k=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=E}const z=new URL((t=A?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in k&&k.signIn){const U=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),C?{statement:C}:null));let O;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")O=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)O=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)_=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),M=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${z.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(a=(i=A?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=A?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((m=(g=A?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...A.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const U=await k.signMessage(new TextEncoder().encode(_),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=U}}try{const{data:x,error:E}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:eO(M)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:yr});if(E)throw E;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new ju}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:E})}catch(x){if(xe(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await Ti(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{const{data:l,error:u}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:yr});if(await Vr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new ju}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(xe(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:i,token:a,access_token:l,nonce:u}=e,h=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:yr}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new ju}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,a,l,u;try{if("email"in e){const{email:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await zs(this.storage,this.storageKey));const{error:m}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:h,options:f}=e,{data:p,error:g}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new zu("You must provide either an email or phone number.")}catch(h){if(xe(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var t,i;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:yr});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,i,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await zs(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:_O})}catch(l){if(xe(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Yr;const{error:a}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(xe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:l}=e,{error:u}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:i,type:a,options:l}=e,{data:u,error:h}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new zu("You must provide either an email or phone number and a type")}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ti(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<kd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await Ti(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Od()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,g))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wr}):await this._useSession(async t=>{var i,a,l;const{data:u,error:h}=t;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Wr})})}catch(t){if(xe(t))return VR(t)&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new Yr;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await zs(this.storage,this.storageKey));const{data:p,error:g}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Wr});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yr;const t=Date.now()/1e3;let i=t,a=!0,l=null;const{payload:u}=Rd(e.access_token);if(u.exp&&(i=u.exp,a=i<=t),a){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(xe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Yr;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Cn())throw new Uu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Uu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new z_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new z_("No code detected.");const{data:C,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=e;if(!l||!h||!u||!p)throw new Uu("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(h);let v=g+m;f&&(v=parseInt(f));const b=v-g;b*1e3<=Hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const _=v-m;g-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,g):g-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,g);const{data:M,error:x}=await this._getUser(l);if(x)throw x;const E={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:m,expires_at:v,refresh_token:u,token_type:p,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(i){if(xe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ti(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return{error:l};const u=(i=a.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(FR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=nO(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,a;try{const{data:{session:l},error:u}=t;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await zs(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(xe(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:a}=await this._useSession(async l=>{var u,h,f,p,g;const{data:m,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(p=m.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Cn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(xe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:u}=t;if(u)throw u;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await aO(async a=>(a>0&&await sO(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yr})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Cd(l)&&Date.now()+u-i<Hs})}catch(i){if(this._debug(t,"error",i),xe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Cn()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ti(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Ti(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await $s(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Od()}else if(a&&!a.user&&!a.user){const u=await Ti(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Vr(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,a)):a.user=Od()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<kd;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${kd}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Cd(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Tc;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Yr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),xe(l)){const u={session:null,error:l};return Cd(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await $s(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=structuredClone(a);await $s(this.storage,this.storageKey,l)}else{const a=structuredClone(t);await $s(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Vr(this.storage,this.storageKey),await Vr(this.storage,this.storageKey+"-code-verifier"),await Vr(this.storage,this.storageKey+"-user"),this.userStorage&&await Vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Cn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Hs}ms, refresh threshold is ${Pp} ticks`),a<=Pp&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const a=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await zs(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;return l?{data:null,error:l}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,a;const{data:l,error:u}=t;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;if(l)return{data:null,error:l};const{data:u,error:h}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(t){if(xe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:l}=t;return l?{data:null,error:l}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(xe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=e?.factors||[],a=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Rd(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((i=(t=a.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(h=>h.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(h=>h.kid===e),i&&this.jwks_cached_at+HR>a)return i;const{data:l,error:u}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(h=>h.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};i=b.session.access_token}const{header:a,payload:l,signature:u,raw:{header:h,payload:f}}=Rd(i);t?.allowExpired||dO(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:a,signature:u},error:null}}const g=pO(a.alg),m=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,u,JR(`${h}.${f}`)))throw new jp("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}}Yo.nextInstanceID=0;const RO=Yo;class OO extends RO{constructor(e){super(e)}}var PO=function(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function h(g){try{p(i.next(g))}catch(m){u(m)}}function f(g){try{p(i.throw(g))}catch(m){u(m)}}function p(g){g.done?l(g.value):a(g.value).then(h,f)}p((i=i.apply(n,e||[])).next())})};class DO{constructor(e,t,i){var a,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=UR(e),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:CR,realtime:OR,auth:Object.assign(Object.assign({},RR),{storageKey:p}),global:kR},m=LR(i??{},g);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=jR(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new KC(new URL("rest/v1",f).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new IC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ER(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return PO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,storageKey:l,flowType:u,lock:h,debug:f},p,g){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OO({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),p),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fR(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BO=(n,e,t)=>new DO(n,e,t),Ng=BO("https://pkswdnpftrundnewgnya.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrc3dkbnBmdHJ1bmRuZXdnbnlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODI2MzIsImV4cCI6MjA2ODI1ODYzMn0.r_Y1RLOGJ55C0De5SBTVXqO09SMDqgV38sQuE-oDxXE"),jO=async n=>{if(n.locator.campaignName===void 0)throw new Error("can not save a campaign without a name");const e=await Ng.rpc("save_campaign_version",{p_name:n.locator.campaignName,p_data:await jC(n),p_published:n.meta?.published??!1});if(e.error)throw new Error(`error saving to db ${e.error.message} ${e.error.details}`,{cause:e.error});return e.data},zO=async n=>{const e=await Ng.rpc("get_latest_campaign",{p_campaign_name:n.campaignName,p_user_id:n.userId,p_version:n.version===-1?void 0:n.version});if(e.error)throw new Error("could not get campaign",{cause:e.error});const t=await i1(e.data.data);return Object.values(t.rooms).forEach(i=>{delete i.size}),t.locator===void 0&&(t.locator={userId:n.userId||"upgraded, unknown",campaignName:n.campaignName,version:e.data.version}),delete t.name,t},UO=async({publishedOnly:n})=>{const e=await Ng.rpc("get_all_users_latest_campaigns",{p_published_only:n});if(e.error)throw new Error("could not get user campaigns",{cause:e.error});return e.data},Dd=n=>{const e=[];for(let t=n;t!==void 0;t=t instanceof Error?t.cause:void 0)t instanceof Error&&e.push({message:t.message,stack:t.stack});return e},Xo=bC({reducerPath:"campaignsApi",baseQuery:Qk(),endpoints:n=>({getCampaign:n.query({async queryFn(e){try{return e.userId==="@@original"&&e.campaignName==="original"?{data:(await xC()).campaign}:e.campaignName.startsWith("data:")?{data:await i1(e.campaignName.substring(5))}:{data:await zO(e)}}catch(t){return{error:Dd(new Error(`getCampaign queryFn( ${JSON.stringify(e)} ) failed: ${t}`))}}}}),getAllUsersLatestCampaigns:n.query({async queryFn({publishedOnly:e}){try{return{data:await UO({publishedOnly:e})}}catch(t){return{error:Dd(new Error(`getAllUsersLatestCampaigns queryFn() failed: ${t}`))}}}}),saveCampaign:n.mutation({async queryFn(e){try{return{data:await jO(e)}}catch(t){return{error:Dd(new Error(`saveCampaign queryFn( ${JSON.stringify(e)} ) failed: ${t}`))}}}})})}),{useGetAllUsersLatestCampaignsQuery:L4}=Xo,LO=Xo.endpoints.getCampaign.select,IO=(n,e)=>LO(e)(n).data,NO=8,A1=({renderAreaSize:n,emulatedResolutionName:e,devicePixelRatio:t,deviceType:i=Kr()})=>{const a=kg[e],{renderAreaSize:l,rotate90:u}=i!=="desktop"&&n.x<n.y?{renderAreaSize:{x:n.y,y:n.x},rotate90:!0}:{renderAreaSize:n,rotate90:!1},h=LM(l,t),f=Math.max(Math.floor(Math.min(h.x/a.x,h.y/a.y)),1),p=Math.min(NO,f),g=f/p/t,m={x:Math.floor(h.x/f),y:Math.floor(h.y/f)},v={x:Math.ceil(l.x/g),y:Math.ceil(l.y/g)};return{gameEngineUpscale:p,cssUpscale:g,gameEngineScreenSize:m,canvasSize:v,rotate90:u}},qO=n=>Kr()==="server"?kg.zxSpectrum:n?{x:n.clientWidth,y:n.clientHeight}:{x:window.innerWidth,y:window.innerHeight},E1=(n,e)=>{const t=Kr();return{renderAreaSize:qO(e),emulatedResolutionName:n,devicePixelRatio:t==="server"?1:window.devicePixelRatio}},GO={upscale:A1(E1($x.displaySettings.emulatedResolution))},Wo=vr({name:"upscale",initialState:GO,reducers:{upscaleToWindow(n,{payload:e}){n.upscale=A1(e)}},selectors:{selectCanvasSize(n){return n.upscale.canvasSize},selectGameEngineUpscale(n){return n.upscale.gameEngineUpscale},selectGameEngineScreenSize(n){return n.upscale.gameEngineScreenSize},selectRot90(n){return n.upscale.rotate90},selectUpscale(n){return n.upscale},selectTotalUpscale({upscale:{cssUpscale:n,gameEngineUpscale:e}}){return n*e}}}),{upscaleToWindow:HO}=Wo.actions,{selectCanvasSize:I4,selectRot90:N4,selectUpscale:q4,selectGameEngineUpscale:G4,selectTotalUpscale:$O,selectGameEngineScreenSize:H4}=Wo.selectors;Wo.actions;const ia=n=>e=>uc(e.gameMenus.userSettings,n)??uc($x,n),$4=()=>Cg($O),T1=ia("displaySettings.emulatedResolution"),F4=()=>Cg(T1),V4=ia("displaySettings.uncolourised"),Y4=ia("infiniteLivesPoke"),X4=ia("infiniteDoughnutsPoke"),FO=ia("inputDirectionMode"),VO=ia("displaySettings.showBoundingBoxes"),W4=()=>Cg(VO),Q4=(n,e)=>!!uc(n.gameMenus,e),K4=n=>{const e=n.gameMenus.gameInPlay.campaignLocator;return e===void 0?void 0:IO(n,e)},Z4=["none","non-wall","all"],yo=n=>BM(zk(n,"userId","campaignName")),YO=["4-way","8-way","analogue"],XO=Kr()!=="server",WO=XO?Bo().has("cheats"):!1,QO={blacktooth:!1,bookworld:!1,egyptus:!1,penitentiary:!1,safari:!1},zp={planetsLiberated:QO,roomsExplored:{},scrollsRead:{},reincarnationPoint:void 0},Up={userSettings:{displaySettings:{},soundSettings:{}},gameRunning:!1,gameInPlay:zp,openMenus:[{menuId:"mainMenu",scrollableSelection:!1,menuParam:xn}],assigningInput:void 0,cheatsOn:WO,savedGames:{saves:{}}},sa=vr({name:"gameMenus",initialState:Up,reducers:{setEmulatedResolution(n,{payload:e}){let t;e===void 0?t=n_(Bk,T1({gameMenus:n})):t=e,n.userSettings.displaySettings.emulatedResolution=t},scrollRead(n,{payload:e}){e.source==="manual"?(n.gameInPlay.scrollsRead[e.page]=!0,n.openMenus=[{menuId:`markdown/${e.page}`,scrollableSelection:!1,menuParam:xn}]):n.openMenus=[{menuId:"markdown/inline",scrollableSelection:!1,menuParam:{markdown:e.markdown}}]},nextInputDirectionMode(n){n.userSettings.inputDirectionMode=n_(YO,FO({gameMenus:n}))},inputAddedDuringAssignment(n,{payload:e}){if(n.assigningInput===void 0)throw new Error("reducer called while not assigning keys");const t=(u,h)=>{u.includes(h)||u.push(h)},{presses:i,axes:a,action:l}=n.assigningInput;switch(e.type){case"key":t(i.keys,e.input);break;case"gamepadButtons":t(i.gamepadButtons,e.input);break;case"gamepadAxes":{Sg.includes(l)&&t(a,e.input);break}}},doneAssigningInput(n){if(n.assigningInput===void 0)throw new Error("illegal action for state");const{action:e,presses:t,axes:i}=n.assigningInput,a=t.keys.length+t.gamepadButtons.length+i.length,l=n.userSettings.inputAssignment===void 0?n.userSettings.inputAssignment=structuredClone(xp.default.inputAssignment):n.userSettings.inputAssignment;a>0&&(l.presses[e]=t,(e==="left"||e==="right")&&(l.axes.x=i),(e==="towards"||e==="away")&&(l.axes.y=i)),n.assigningInput=void 0},menuOpenOrExitPressed(n){if(n.openMenus.length>0){if(n.openMenus.length===1&&!n.gameRunning)return;const[,...e]=n.openMenus;n.openMenus=e}else n.openMenus=[{menuId:"mainMenu",scrollableSelection:!1,menuParam:xn}]},goToSubmenu(n,{payload:e}){n.openMenus=[{menuId:e,scrollableSelection:!1,menuParam:{}},...n.openMenus]},closeAllMenus(n){n.openMenus=[]},gameStarted(n,{payload:{campaignLocator:e,noShowCrowns:t}}){if(n.gameRunning)throw new Error("game is already running");n.openMenus=t?[]:[{menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!1}}],n.gameRunning=!0,n.gameInPlay={...zp,campaignLocator:e}},backToParentMenu(n){const[,...e]=n.openMenus;n.openMenus=e},assignInputStart(n,{payload:e}){n.assigningInput={action:e,presses:{gamepadButtons:[],keys:[]},axes:[]}},keyAssignmentPresetChosen(n,{payload:e}){const[,...t]=n.openMenus;n.openMenus=t,n.userSettings.inputAssignment=xp[e].inputAssignment},setFocussedMenuItemId(n,{payload:{focussedItemId:e,scrollableSelection:t}}){const[i]=n.openMenus;i.focussedItemId=e,i.scrollableSelection=t},holdPressed(n,{payload:e}){n.openMenus.length>0?n.openMenus[0]?.menuId==="hold"&&e!=="hold"&&(n.openMenus=[]):e!=="unhold"&&(n.openMenus=[{menuId:"hold",scrollableSelection:!1,menuParam:xn}])},mapPressed(n){n.openMenus.length>0?n.openMenus[0]?.menuId==="map"&&(n.openMenus=[]):n.openMenus=[{menuId:"map",scrollableSelection:!1,menuParam:xn}]},setShowBoundingBoxes(n,{payload:e}){n.userSettings.displaySettings.showBoundingBoxes=e},setShowShadowMasks(n,{payload:e}){n.userSettings.displaySettings.showShadowMasks=e},toggleBoolean(n,{payload:e}){jk(n,e,!uc(n,e))},crownCollected(n,{payload:e}){n.gameInPlay.planetsLiberated[e]=!0;const t=Object.values(n.gameInPlay.planetsLiberated).every(a=>a),i={menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!0}};t?n.openMenus=[{menuId:"proclaimEmperor",scrollableSelection:!1,menuParam:xn},i]:n.openMenus=[i]},roomExplored(n,{payload:e}){n.gameInPlay.roomsExplored[e]=!0},gameOver(n,{payload:{offerReincarnation:e}}){if(e&&n.gameInPlay.reincarnationPoint!==void 0)n.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:xn},{menuId:"offerReincarnation",scrollableSelection:!1,menuParam:xn}];else{n.gameRunning=!1,delete n.gameInPlay.reincarnationPoint;const t=n.gameInPlay.campaignLocator,i=t&&yo(t);console.log(yp(n.savedGames)),i&&(delete n.savedGames.saves[i],delete n.savedGames.lastSavedCampaignLocator),console.log(yp(n.savedGames)),n.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:xn},{menuId:"mainMenu",scrollableSelection:!0,menuParam:xn}]}},reincarnationFishEaten(n,{payload:e}){n.gameInPlay.reincarnationPoint=e},reincarnationAccepted(n){delete n.gameInPlay.reincarnationPoint,n.openMenus=[{menuId:"reincarnatedRestart",scrollableSelection:!1,menuParam:xn}]},saveGame(n,{payload:e}){const t=n.gameInPlay.campaignLocator;if(t===void 0)throw new Error("trying to save a game, but seems like there's no campaign to save against");if(Dk())throw new Error("shouldn't be saving in playtest mode");n.savedGames.saves[yo(t)]=e,n.savedGames.lastSavedCampaignLocator=t},gameRestoreFromSave(n,{payload:e}){n.gameInPlay=e},errorCaught(n,{payload:e}){n.openMenus=[{menuId:"errorCaught",scrollableSelection:!1,menuParam:e}]},errorDismissed(n,{payload:e}){switch(e){case"ignore":n.openMenus=[];break;case"clearAllData":Object.assign(n,Up),n.gameRunning=!1;break}},debugItemClicked(n,e){},characterRoomChange(n,e){},lostLife(n,e){}},extraReducers(n){n.addCase(sl,(e,t)=>{if(Bo().get("campaignName")?.startsWith("data:"))return;const i=[{menuId:"hold",scrollableSelection:!1,menuParam:xn}],a={userId:Bo().get("campaignAuthorUserId")??void 0,campaignName:Bo().get("campaignName")??void 0},l=t.payload?.savedGames;if((p=>p.userId!==void 0&&p.campaignName!==void 0)(a)){e.gameRunning=!0;const p=l?.saves[yo(a)];if(p){e.gameRunning=!0,e.gameInPlay=p.store.gameMenus.gameInPlay,e.openMenus=i;return}else{e.gameRunning=!0,e.gameInPlay={...zp,campaignLocator:a},e.openMenus=i;return}}const h=l?.lastSavedCampaignLocator,f=h&&l.saves[yo(h)];f&&(e.gameRunning=!0,e.gameInPlay=f.store.gameMenus.gameInPlay,e.openMenus=i)})},selectors:{selectHasError(n){return n.openMenus.some(e=>e.menuId==="errorCaught")},selectSaveForCampaign(n,e){return n.savedGames.saves[yo(e)]}}}),{assignInputStart:J4,backToParentMenu:ez,characterRoomChange:tz,closeAllMenus:nz,crownCollected:rz,debugItemClicked:KO,doneAssigningInput:iz,errorCaught:sz,errorDismissed:az,gameOver:oz,gameRestoreFromSave:lz,gameStarted:uz,goToSubmenu:cz,holdPressed:hz,inputAddedDuringAssignment:fz,keyAssignmentPresetChosen:dz,lostLife:pz,mapPressed:gz,menuOpenOrExitPressed:yz,nextInputDirectionMode:mz,reincarnationAccepted:vz,reincarnationFishEaten:bz,roomExplored:_z,saveGame:wz,scrollRead:xz,setEmulatedResolution:ZO,setFocussedMenuItemId:Sz,setShowBoundingBoxes:Az,setShowShadowMasks:Ez,toggleBoolean:Tz}=sa.actions,{selectHasError:Mz}=sa.selectors;sa.selectors.selectSaveForCampaign;sa.actions;const Tt=n=>{const e=Up.userSettings;return console.log("migrating state: persisted is:",n,"I am not migrating - reverting to initial/default state:",e),e},JO=MM({1:Tt,2:Tt,3:Tt,4:Tt,5:Tt,6:Tt,7:Tt,8:Tt,9:Tt,10:Tt,11:Tt,12:Tt,13:Tt,14:Tt,15:Tt,16:Tt,17:Tt}),eP=["userSettings","savedGames"],tP=17,nP={key:"hohol/gameMenus/userSettings",version:tP,migrate:JO,storage:DM,whitelist:eP},rP=_M(nP,sa.reducer),iP={count:0},dc=vr({name:"manualLoading",initialState:iP,reducers:{manualLoadingStarted(n){n.count++},manualLoadingFinished(n){n.count=Math.max(0,n.count-1)}},selectors:{selectManualLoadingCount(n){return n.count}}}),{manualLoadingStarted:kz,manualLoadingFinished:Cz}=dc.actions,{selectManualLoadingCount:Rz}=dc.selectors,sP=()=>{Kr()!=="server"&&kM({actionCreator:ZO,effect(n,{dispatch:e,getState:t}){const{emulatedResolution:i}=t().gameMenus.userSettings.displaySettings;i!==void 0&&e(HO(E1(i)))}})},Lp=aM({[sa.reducerPath]:rP,[Wo.reducerPath]:Wo.reducer,[Xo.reducerPath]:Xo.reducer,[dc.reducerPath]:dc.reducer}).withLazyLoadedSlices(),aP=Lp.inject,oP=(n,e)=>e.type==="@@_RESET_FOR_TESTS"?Lp(void 0,e):Lp(n,e),qg=E2({reducer:oP,middleware:n=>n({serializableCheck:{ignoredActions:[vg,sl,bg,_g,wg,xg,KO.type]}}).prepend(jx.middleware).concat(Xo.middleware)});sP();TM(qg);var be=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(be||{});const Ip=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Lu=(n,e)=>Ip(n).priority??e,Yt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Ip).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map(Ip).forEach(e=>{e.type.forEach(t=>{const i=this._addHandlers,a=this._queue;i[t]?i[t]?.(e):(a[t]=a[t]||[],a[t]?.push(e))})}),this},handle(n,e,t){const i=this._addHandlers,a=this._removeHandlers;if(i[n]||a[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=e,a[n]=t;const l=this._queue;return l[n]&&(l[n]?.forEach(u=>e(u)),delete l[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,i=>{e.findIndex(l=>l.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((l,u)=>Lu(u.value,t)-Lu(l.value,t)))},i=>{const a=e.findIndex(l=>l.name===i.name);a!==-1&&e.splice(a,1)})},handleByList(n,e,t=-1){return this.handle(n,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((a,l)=>Lu(l,t)-Lu(a,t)))},i=>{const a=e.indexOf(i.ref);a!==-1&&e.splice(a,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},lP={extension:{type:be.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Vn(()=>import("./browserAll-wqG6U6dJ.js"),__vite__mapDeps([2,3,4,5]))}},uP={extension:{type:be.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Vn(()=>import("./webworkerAll-BZ_VsC8Q.js"),__vite__mapDeps([3,4,5]))}};class an{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new an(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Bd={exports:{}},F_;function cP(){return F_||(F_=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function a(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function l(f,p,g,m,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new a(g,m||f,v),_=t?t+p:p;return f._events[_]?f._events[_].fn?f._events[_]=[f._events[_],b]:f._events[_].push(b):(f._events[_]=b,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new i:delete f._events[p]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,m;if(this._eventsCount===0)return p;for(m in g=this._events)e.call(g,m)&&p.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=t?t+p:p,m=this._events[g];if(!m)return[];if(m.fn)return[m.fn];for(var v=0,b=m.length,_=new Array(b);v<b;v++)_[v]=m[v].fn;return _},h.prototype.listenerCount=function(p){var g=t?t+p:p,m=this._events[g];return m?m.fn?1:m.length:0},h.prototype.emit=function(p,g,m,v,b,_){var M=t?t+p:p;if(!this._events[M])return!1;var x=this._events[M],E=arguments.length,C,A;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),E){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,g),!0;case 3:return x.fn.call(x.context,g,m),!0;case 4:return x.fn.call(x.context,g,m,v),!0;case 5:return x.fn.call(x.context,g,m,v,b),!0;case 6:return x.fn.call(x.context,g,m,v,b,_),!0}for(A=1,C=new Array(E-1);A<E;A++)C[A-1]=arguments[A];x.fn.apply(x.context,C)}else{var k=x.length,z;for(A=0;A<k;A++)switch(x[A].once&&this.removeListener(p,x[A].fn,void 0,!0),E){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,g);break;case 3:x[A].fn.call(x[A].context,g,m);break;case 4:x[A].fn.call(x[A].context,g,m,v);break;default:if(!C)for(z=1,C=new Array(E-1);z<E;z++)C[z-1]=arguments[z];x[A].fn.apply(x[A].context,C)}}return!0},h.prototype.on=function(p,g,m){return l(this,p,g,m,!1)},h.prototype.once=function(p,g,m){return l(this,p,g,m,!0)},h.prototype.removeListener=function(p,g,m,v){var b=t?t+p:p;if(!this._events[b])return this;if(!g)return u(this,b),this;var _=this._events[b];if(_.fn)_.fn===g&&(!v||_.once)&&(!m||_.context===m)&&u(this,b);else{for(var M=0,x=[],E=_.length;M<E;M++)(_[M].fn!==g||v&&!_[M].once||m&&_[M].context!==m)&&x.push(_[M]);x.length?this._events[b]=x.length===1?x[0]:x:u(this,b)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&u(this,g)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,n.exports=h})(Bd)),Bd.exports}var hP=cP();const Xn=Yn(hP),fP=Math.PI*2,dP=180/Math.PI,pP=Math.PI/180;class Ut{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ut(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return jd.x=0,jd.y=0,jd}}const jd=new Ut;class De{constructor(e=1,t=0,i=0,a=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=a,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,a,l,u){return this.a=e,this.b=t,this.c=i,this.d=a,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Ut;const i=e.x,a=e.y;return t.x=this.a*i+this.c*a+this.tx,t.y=this.b*i+this.d*a+this.ty,t}applyInverse(e,t){t=t||new Ut;const i=this.a,a=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,p=1/(i*u+l*-a),g=e.x,m=e.y;return t.x=u*p*g+-l*p*m+(f*l-h*u)*p,t.y=i*p*m+-a*p*g+(-f*i+h*a)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),a=this.a,l=this.c,u=this.tx;return this.a=a*t-this.b*i,this.b=a*i+this.b*t,this.c=l*t-this.d*i,this.d=l*i+this.d*t,this.tx=u*t-this.ty*i,this.ty=u*i+this.ty*t,this}append(e){const t=this.a,i=this.b,a=this.c,l=this.d;return this.a=e.a*t+e.b*a,this.b=e.a*i+e.b*l,this.c=e.c*t+e.d*a,this.d=e.c*i+e.d*l,this.tx=e.tx*t+e.ty*a+this.tx,this.ty=e.tx*i+e.ty*l+this.ty,this}appendFrom(e,t){const i=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,p=t.a,g=t.b,m=t.c,v=t.d;return this.a=i*p+a*m,this.b=i*g+a*v,this.c=l*p+u*m,this.d=l*g+u*v,this.tx=h*p+f*m+t.tx,this.ty=h*g+f*v+t.ty,this}setTransform(e,t,i,a,l,u,h,f,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(i*this.a+a*this.c),this.ty=t-(i*this.b+a*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,a=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=a*e.a+this.d*e.c,this.d=a*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,a=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-a,l),f=Math.atan2(i,t),p=Math.abs(h+f);return p<1e-5||Math.abs(fP-p)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(a*a+l*l),e.position.x=this.tx+(u.x*t+u.y*a),e.position.y=this.ty+(u.x*i+u.y*l),e}invert(){const e=this.a,t=this.b,i=this.c,a=this.d,l=this.tx,u=e*a-t*i;return this.a=a/u,this.b=-t/u,this.c=-i/u,this.d=e/u,this.tx=(i*this.ty-a*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new De;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return yP.identity()}static get shared(){return gP.identity()}}const gP=new De,yP=new De,Oi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Di=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Bi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Np=[],M1=[],Iu=Math.sign;function mP(){for(let n=0;n<16;n++){const e=[];Np.push(e);for(let t=0;t<16;t++){const i=Iu(Oi[n]*Oi[t]+Di[n]*Pi[t]),a=Iu(Pi[n]*Oi[t]+Bi[n]*Pi[t]),l=Iu(Oi[n]*Di[t]+Di[n]*Bi[t]),u=Iu(Pi[n]*Di[t]+Bi[n]*Bi[t]);for(let h=0;h<16;h++)if(Oi[h]===i&&Pi[h]===a&&Di[h]===l&&Bi[h]===u){e.push(h);break}}}for(let n=0;n<16;n++){const e=new De;e.set(Oi[n],Pi[n],Di[n],Bi[n],0,0),M1.push(e)}}mP();const Xe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Oi[n],uY:n=>Pi[n],vX:n=>Di[n],vY:n=>Bi[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Np[n][e],sub:(n,e)=>Np[n][Xe.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Xe.S:Xe.N:Math.abs(e)*2<=Math.abs(n)?n>0?Xe.E:Xe.W:e>0?n>0?Xe.SE:Xe.SW:n>0?Xe.NE:Xe.NW,matrixAppendRotationInv:(n,e,t=0,i=0)=>{const a=M1[Xe.inv(e)];a.tx=t,a.ty=i,n.append(a)}},Nu=[new Ut,new Ut,new Ut,new Ut];class lt{constructor(e=0,t=0,i=0,a=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new lt(0,0,0,0)}clone(){return new lt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i,a=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,p=i*(1-a),g=i-p,m=h-p,v=h+l+p,b=f-p,_=f+u+p,M=h+g,x=h+l-g,E=f+g,C=f+u-g;return e>=m&&e<=v&&t>=b&&t<=_&&!(e>M&&e<x&&t>E&&t<C)}intersects(e,t){if(!t){const B=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=B)return!1;const I=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>I}const i=this.left,a=this.right,l=this.top,u=this.bottom;if(a<=i||u<=l)return!1;const h=Nu[0].set(e.left,e.top),f=Nu[1].set(e.left,e.bottom),p=Nu[2].set(e.right,e.top),g=Nu[3].set(e.right,e.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const m=Math.sign(t.a*t.d-t.b*t.c);if(m===0||(t.apply(h,h),t.apply(f,f),t.apply(p,p),t.apply(g,g),Math.max(h.x,f.x,p.x,g.x)<=i||Math.min(h.x,f.x,p.x,g.x)>=a||Math.max(h.y,f.y,p.y,g.y)<=l||Math.min(h.y,f.y,p.y,g.y)>=u))return!1;const v=m*(f.y-h.y),b=m*(h.x-f.x),_=v*i+b*l,M=v*a+b*l,x=v*i+b*u,E=v*a+b*u;if(Math.max(_,M,x,E)<=v*h.x+b*h.y||Math.min(_,M,x,E)>=v*g.x+b*g.y)return!1;const C=m*(h.y-p.y),A=m*(p.x-h.x),k=C*i+A*l,z=C*a+A*l,U=C*i+A*u,O=C*a+A*u;return!(Math.max(k,z,U,O)<=C*h.x+A*h.y||Math.min(k,z,U,O)>=C*g.x+A*g.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),a=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=a,this.height=Math.max(l-a,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,a=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=a-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),a=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=a,this.height=l-a,this}getBounds(e){return e||(e=new lt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,i=e.y,a=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height&&a>=this.x&&a<this.x+this.width&&l>=this.y&&l<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const zd={default:-1};function ut(n="default"){return zd[n]===void 0&&(zd[n]=-1),++zd[n]}const V_={},zt="8.0.0",vP="8.3.4";function it(n,e,t=3){if(V_[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(i))),V_[e]=!0}const k1=()=>{};function pc(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Y_(n){return!(n&n-1)&&!!n}function C1(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const X_=Object.create(null);function bP(n){const e=X_[n];return e===void 0&&(X_[n]=ut("resource")),e}const R1=class O1 extends Xn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...O1.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){it(zt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=bP(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};R1.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let _P=R1;const P1=class D1 extends Xn{constructor(e={}){super(),this.options=e,this.uid=ut("textureSource"),this._resourceType="textureSource",this._resourceId=ut("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...D1.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new _P(C1(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ut("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);const a=Math.round(e*i),l=Math.round(t*i);return this.width=a/i,this.height=l/i,this._resolution=i,this.pixelWidth===a&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=l,this.emit("resize",this),this._resourceId=ut("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Y_(this.pixelWidth)&&Y_(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};P1.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Wn=P1;class Gg extends Wn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super({...e,resource:t,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Gg.extension=be.TextureSource;const W_=new De;class wP{constructor(e,t){this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let a=0;a<e.length;a+=2){const l=e[a],u=e[a+1];t[a]=l*i.a+u*i.c+i.tx,t[a+1]=l*i.b+u*i.d+i.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const i=e.orig,a=e.trim;a&&(W_.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(W_));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class Pe extends Xn{constructor({source:e,label:t,frame:i,orig:a,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=ut("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new lt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new Wn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:g,height:m}=this._source;this.frame.width=g,this.frame.height=m}this.orig=a||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new wP(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:i,height:a}=this._source,l=t.x/i,u=t.y/a,h=t.width/i,f=t.height/a;let p=this.rotate;if(p){const g=h/2,m=f/2,v=l+g,b=u+m;p=Xe.add(p,Xe.NW),e.x0=v+g*Xe.uX(p),e.y0=b+m*Xe.uY(p),p=Xe.add(p,2),e.x1=v+g*Xe.uX(p),e.y1=b+m*Xe.uY(p),p=Xe.add(p,2),e.x2=v+g*Xe.uX(p),e.y2=b+m*Xe.uY(p),p=Xe.add(p,2),e.x3=v+g*Xe.uX(p),e.y3=b+m*Xe.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return it(zt,"Texture.baseTexture is now Texture.source"),this._source}}Pe.EMPTY=new Pe({label:"EMPTY",source:new Wn({label:"EMPTY"})});Pe.EMPTY.destroy=k1;Pe.WHITE=new Pe({source:new Gg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Pe.WHITE.destroy=k1;function xP(n,e,t){const{width:i,height:a}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;n.minX=l.x-e._x*i,n.maxX=n.minX+u,n.minY=l.y-e._y*a,n.maxY=n.minY+h}else n.minX=-e._x*i,n.maxX=n.minX+i,n.minY=-e._y*a,n.maxY=n.minY+a}const Q_=new De;class Bn{constructor(e=1/0,t=1/0,i=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Q_,this.minX=e,this.minY=t,this.maxX=i,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new lt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Q_,this}set(e,t,i,a){this.minX=e,this.minY=t,this.maxX=i,this.maxY=a}addFrame(e,t,i,a,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,p=l.d,g=l.tx,m=l.ty;let v=this.minX,b=this.minY,_=this.maxX,M=this.maxY,x=u*e+f*t+g,E=h*e+p*t+m;x<v&&(v=x),E<b&&(b=E),x>_&&(_=x),E>M&&(M=E),x=u*i+f*t+g,E=h*i+p*t+m,x<v&&(v=x),E<b&&(b=E),x>_&&(_=x),E>M&&(M=E),x=u*e+f*a+g,E=h*e+p*a+m,x<v&&(v=x),E<b&&(b=E),x>_&&(_=x),E>M&&(M=E),x=u*i+f*a+g,E=h*i+p*a+m,x<v&&(v=x),E<b&&(b=E),x>_&&(_=x),E>M&&(M=E),this.minX=v,this.minY=b,this.maxX=_,this.maxY=M}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,i=this.minY,a=this.maxX,l=this.maxY,{a:u,b:h,c:f,d:p,tx:g,ty:m}=e;let v=u*t+f*i+g,b=h*t+p*i+m;this.minX=v,this.minY=b,this.maxX=v,this.maxY=b,v=u*a+f*i+g,b=h*a+p*i+m,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY,v=u*t+f*l+g,b=h*t+p*l+m,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY,v=u*a+f*l+g,b=h*a+p*l+m,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,a){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>a&&(this.maxY=a),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,a){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;a||(a=this.matrix);const p=a.a,g=a.b,m=a.c,v=a.d,b=a.tx,_=a.ty;for(let M=t;M<i;M+=2){const x=e[M],E=e[M+1],C=p*x+m*E+b,A=g*x+v*E+_;l=C<l?C:l,u=A<u?A:u,h=C>h?C:h,f=A>f?A:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var SP={grad:.9,turn:360,rad:360/(2*Math.PI)},gr=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},wt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Sn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},B1=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},K_=function(n){return{r:Sn(n.r,0,255),g:Sn(n.g,0,255),b:Sn(n.b,0,255),a:Sn(n.a)}},Ud=function(n){return{r:wt(n.r),g:wt(n.g),b:wt(n.b),a:wt(n.a,3)}},AP=/^#([0-9a-f]{3,8})$/i,qu=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},j1=function(n){var e=n.r,t=n.g,i=n.b,a=n.a,l=Math.max(e,t,i),u=l-Math.min(e,t,i),h=u?l===e?(t-i)/u:l===t?2+(i-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a}},z1=function(n){var e=n.h,t=n.s,i=n.v,a=n.a;e=e/360*6,t/=100,i/=100;var l=Math.floor(e),u=i*(1-t),h=i*(1-(e-l)*t),f=i*(1-(1-e+l)*t),p=l%6;return{r:255*[i,h,u,u,f,i][p],g:255*[f,i,i,h,u,u][p],b:255*[u,u,f,i,i,h][p],a}},Z_=function(n){return{h:B1(n.h),s:Sn(n.s,0,100),l:Sn(n.l,0,100),a:Sn(n.a)}},J_=function(n){return{h:wt(n.h),s:wt(n.s),l:wt(n.l),a:wt(n.a,3)}},ew=function(n){return z1((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Uo=function(n){return{h:(e=j1(n)).h,s:(a=(200-(t=e.s))*(i=e.v)/100)>0&&a<200?t*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:e.a};var e,t,i,a},EP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qp={string:[[function(n){var e=AP.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?wt(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?wt(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=MP.exec(n)||kP.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:K_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=EP.exec(n)||TP.exec(n);if(!e)return null;var t,i,a=Z_({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(SP[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ew(a)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,a=n.a,l=a===void 0?1:a;return gr(e)&&gr(t)&&gr(i)?K_({r:Number(e),g:Number(t),b:Number(i),a:Number(l)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,a=n.a,l=a===void 0?1:a;if(!gr(e)||!gr(t)||!gr(i))return null;var u=Z_({h:Number(e),s:Number(t),l:Number(i),a:Number(l)});return ew(u)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,a=n.a,l=a===void 0?1:a;if(!gr(e)||!gr(t)||!gr(i))return null;var u=(function(h){return{h:B1(h.h),s:Sn(h.s,0,100),v:Sn(h.v,0,100),a:Sn(h.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(l)});return z1(u)},"hsv"]]},tw=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},CP=function(n){return typeof n=="string"?tw(n.trim(),qp.string):typeof n=="object"&&n!==null?tw(n,qp.object):[null,void 0]},Ld=function(n,e){var t=Uo(n);return{h:t.h,s:Sn(t.s+100*e,0,100),l:t.l,a:t.a}},Id=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},nw=function(n,e){var t=Uo(n);return{h:t.h,s:t.s,l:Sn(t.l+100*e,0,100),a:t.a}},Gp=(function(){function n(e){this.parsed=CP(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return wt(Id(this.rgba),2)},n.prototype.isDark=function(){return Id(this.rgba)<.5},n.prototype.isLight=function(){return Id(this.rgba)>=.5},n.prototype.toHex=function(){return e=Ud(this.rgba),t=e.r,i=e.g,a=e.b,u=(l=e.a)<1?qu(wt(255*l)):"","#"+qu(t)+qu(i)+qu(a)+u;var e,t,i,a,l,u},n.prototype.toRgb=function(){return Ud(this.rgba)},n.prototype.toRgbString=function(){return e=Ud(this.rgba),t=e.r,i=e.g,a=e.b,(l=e.a)<1?"rgba("+t+", "+i+", "+a+", "+l+")":"rgb("+t+", "+i+", "+a+")";var e,t,i,a,l},n.prototype.toHsl=function(){return J_(Uo(this.rgba))},n.prototype.toHslString=function(){return e=J_(Uo(this.rgba)),t=e.h,i=e.s,a=e.l,(l=e.a)<1?"hsla("+t+", "+i+"%, "+a+"%, "+l+")":"hsl("+t+", "+i+"%, "+a+"%)";var e,t,i,a,l},n.prototype.toHsv=function(){return e=j1(this.rgba),{h:wt(e.h),s:wt(e.s),v:wt(e.v),a:wt(e.a,3)};var e},n.prototype.invert=function(){return Hn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Hn(Ld(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Hn(Ld(this.rgba,-e))},n.prototype.grayscale=function(){return Hn(Ld(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Hn(nw(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Hn(nw(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Hn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):wt(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Uo(this.rgba);return typeof e=="number"?Hn({h:e,s:t.s,l:t.l,a:t.a}):wt(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Hn(e).toHex()},n})(),Hn=function(n){return n instanceof Gp?n:new Gp(n)},rw=[],RP=function(n){n.forEach(function(e){rw.indexOf(e)<0&&(e(Gp,qp),rw.push(e))})};function OP(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in t)i[t[a]]=a;var l={};n.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=i[this.toHex()];if(p)return p;if(u?.closest){var g=this.toRgb(),m=1/0,v="black";if(!l.length)for(var b in t)l[b]=new n(t[b]).toRgb();for(var _ in t){var M=(h=g,f=l[_],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));M<m&&(m=M,v=_)}return v}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new n(f).toRgb():null},"name"])}RP([OP]);const Js=class Ao{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ao)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,i,a]=this._components;return{r:e,g:t,b:i,a}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(a*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,i,a,l]=this._components;return e[0]=t,e[1]=i,e[2]=a,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,i,a]=this._components;return e[0]=t,e[1]=i,e[2]=a,e}toNumber(){return this._int}toBgrNumber(){const[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,a,l]=Ao._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=a,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,a=this._int>>8&255,l=this._int&255;return t&&(i=i*e+.5|0,a=a*e+.5|0,l=l*e+.5|0),(e*255<<24)+(i<<16)+(a<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,a,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,i=(u>>8&255)/255,a=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,a,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,a,l=255]=e,t/=255,i/=255,a/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Ao.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Hn(e);u.isValid()&&({r:t,g:i,b:a,a:l}=u.rgba,t/=255,i/=255,a/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=a,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((a,l)=>{e[l]=Math.min(Math.max(a,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Ao||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Js.shared=new Js;Js._temp=new Js;Js.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ct=Js;const PP={cullArea:null,cullable:!1,cullableChildren:!0};class Hg{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class DP{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Hg(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}const _r=new DP,BP={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){it("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function jP(n,e,t){const i=n.length;let a;if(e>=i||t===0)return;t=e+t>i?i-e:t;const l=i-t;for(a=e;a<l;++a)n[a]=n[a+t];n.length=l}const zP={allowChildren:!0,removeChildren(n=0,e){const t=e??this.children.length,i=t-n,a=[];if(i>0&&i<=t){for(let u=t-1;u>=n;u--){const h=this.children[u];h&&(a.push(h),h.parent=null)}jP(this.children,n,t);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(a);for(let u=0;u<a.length;++u)this.emit("childRemoved",a[u],this,u),a[u].emit("removed",this);return a.length>0&&this._didViewChangeTick++,a}else if(i===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||it(zt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const a=n.parent.children.indexOf(n);if(n.parent===this&&a===e)return n;a!==-1&&n.parent.children.splice(a,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=n;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const i=this.worldTransform.clone();return i.invert(),t.prepend(i),n.setFromMatrix(t),n}},UP={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const i=this.children,a=i.length;for(let l=0;l<a;l++)i[l].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:i}=e;for(let a=0;a<this.effects.length;a++){const l=this.effects[a];i[l.pipe].push(l,this,n)}this.collectRenderablesSimple(n,e,t);for(let a=this.effects.length-1;a>=0;a--){const l=this.effects[a];i[l.pipe].pop(l,this,n)}}};class iw{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class LP{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const i=this._tests[t];if(i.test(e))return _r.get(i.maskClass,e)}return e}returnMaskEffect(e){_r.return(e)}}const Hp=new LP;Yt.handleByList(be.MaskEffect,Hp._effectClasses);const IP={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,i)=>t.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;e?.mask!==n&&(e&&(this.removeEffect(e),Hp.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=Hp.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new iw);n=n;const t=n?.length>0,i=e.filters?.length>0,a=t!==i;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),a&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new iw),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},NP={label:null,get name(){return it(zt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){it(zt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let i=0;i<t.length;i++){const a=t[i];if(a.label===n||n instanceof RegExp&&n.test(a.label))return a}if(e)for(let i=0;i<t.length;i++){const l=t[i].getChildByLabel(n,!0);if(l)return l}return null},getChildrenByLabel(n,e=!1,t=[]){const i=this.children;for(let a=0;a<i.length;a++){const l=i[a];(l.label===n||n instanceof RegExp&&n.test(l.label))&&t.push(l)}if(e)for(let a=0;a<i.length;a++)i[a].getChildrenByLabel(n,!0,t);return t}},Nt=new Hg(De),wr=new Hg(Bn),qP=new De,GP={getFastGlobalBounds(n,e){e||(e=new Bn),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let i=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(i=wr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;i.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(n,i,t)}if(a){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,i.applyMatrix(u.worldTransform)),this.effects[h].addBounds(i,!0));l&&(i.applyMatrix(u.worldTransform.copyTo(qP).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),wr.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),wr.return(i))}};function U1(n,e,t){t.clear();let i,a;return n.parent?e?i=n.parent.worldTransform:(a=Nt.get().identity(),i=$g(n,a)):i=De.IDENTITY,L1(n,t,i,e),a&&Nt.return(a),t.isValid||t.set(0,0,0,0),t}function L1(n,e,t,i){if(!n.visible||!n.measurable)return;let a;i?a=n.worldTransform:(n.updateLocalTransform(),a=Nt.get(),a.appendFrom(n.localTransform,t));const l=e,u=!!n.effects.length;if(u&&(e=wr.get().clear()),n.boundsArea)e.addRect(n.boundsArea,a);else{n.bounds&&(e.matrix=a,e.addBounds(n.bounds));for(let h=0;h<n.children.length;h++)L1(n.children[h],e,a,i)}if(u){for(let h=0;h<n.effects.length;h++)n.effects[h].addBounds?.(e);l.addBounds(e,De.IDENTITY),wr.return(e)}i||Nt.return(a)}function $g(n,e){const t=n.parent;return t&&($g(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function I1(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,i=n>>8&255,a=n&255,l=e>>16&255,u=e>>8&255,h=e&255,f=t*l/255|0,p=i*u/255|0,g=a*h/255|0;return(f<<16)+(p<<8)+g}const sw=16777215;function aw(n,e){return n===sw?e:e===sw?n:I1(n,e)}function Zu(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const HP={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=$g(this,Nt.get().identity());return n.appendFrom(this.localTransform,t),Nt.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?Zu(this.renderGroup.worldColor):this.parentRenderGroup?Zu(aw(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=aw(e,t.localColor),t=t.parent;return Zu(e)}};let Nd=0;const ow=500;function We(...n){Nd!==ow&&(Nd++,Nd===ow?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function N1(n,e,t){return e.clear(),t||(t=De.IDENTITY),q1(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function q1(n,e,t,i,a){let l;if(a)l=Nt.get(),l=t.copyTo(l);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const f=n.localTransform;l=Nt.get(),l.appendFrom(f,t)}const u=e,h=!!n.effects.length;if(h&&(e=wr.get().clear()),n.boundsArea)e.addRect(n.boundsArea,l);else{n.renderPipeId&&(e.matrix=l,e.addBounds(n.bounds));const f=n.children;for(let p=0;p<f.length;p++)q1(f[p],e,l,i,!1)}if(h){for(let f=0;f<n.effects.length;f++)n.effects[f].addLocalBounds?.(e,i);u.addBounds(e,De.IDENTITY),wr.return(e)}Nt.return(l)}function G1(n,e){const t=n.children;for(let i=0;i<t.length;i++){const a=t[i],l=a.uid,u=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,a.children.length&&G1(a,e)}return e.didChange}const $P=new De,FP={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),G1(this,n),n.didChange&&N1(this,n.localBounds,$P),n.localBounds},getBounds(n,e){return U1(this,n,e||new Bn)}},VP={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},YP={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(XP))}};function XP(n,e){return n._zIndex-e._zIndex}const WP={getGlobalPosition(n=new Ut,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const i=this.getGlobalTransform(Nt.get(),t);return e=i.apply(n,e),Nt.return(i),e},toLocal(n,e,t,i){e&&(n=e.toGlobal(n,t,i));const a=this.getGlobalTransform(Nt.get(),i);return t=a.applyInverse(n,t),Nt.return(a),t}};class H1{constructor(){this.uid=ut("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let QP=0;class KP{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,i){const a=new Wn({...this.textureOptions,width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1});return new Pe({source:a,label:`texturePool_${QP++}`})}getOptimalTexture(e,t,i=1,a){let l=Math.ceil(e*i-1e-6),u=Math.ceil(t*i-1e-6);l=pc(l),u=pc(u);const h=(l<<17)+(u<<1)+(a?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,a)),f.source._resolution=i,f.source.width=l/i,f.source.height=u/i,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e){const t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const i=this._texturePool[t];if(i)for(let a=0;a<i.length;a++)i[a].destroy(!0)}this._texturePool={}}}const ZP=new KP;class JP{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new De,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new H1,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let i=0;i<t.length;i++){const a=t[i];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(ZP.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const i=e.children;for(let a=0;a<i.length;a++)this._getChildren(i[a],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new De),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new De),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new De),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function eD(n,e,t={}){for(const i in e)!t[i]&&e[i]!==void 0&&(n[i]=e[i])}const qd=new an(null),Gd=new an(null),Hd=new an(null,1,1),lw=1,tD=2,$d=4;class ol extends Xn{constructor(e={}){super(),this.uid=ut("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new De,this.relativeGroupTransform=new De,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new an(this,0,0),this._scale=Hd,this._pivot=Gd,this._skew=qd,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],eD(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){it("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Yt.mixin(ol,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||it(zt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let a=0;a<e.length;a++)this.addChild(e[a]);return e[0]}const t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let a=0;a<e.length;a++)this.removeChild(e[a]);return e[0]}const t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=_r.get(JP,this),this.groupTransform=De.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),_r.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new De),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*dP}set angle(e){this.rotation=e*pP}get pivot(){return this._pivot===Gd&&(this._pivot=new an(this,0,0)),this._pivot}set pivot(e){this._pivot===Gd&&(this._pivot=new an(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===qd&&(this._skew=new an(this,0,0)),this._skew}set skew(e){this._skew===qd&&(this._skew=new an(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Hd&&(this._scale=new an(this,1,1)),this._scale}set scale(e){this._scale===Hd&&(this._scale=new an(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const i=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,i.width),t!==void 0&&this._setHeight(t,i.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,i=this._scale,a=this._pivot,l=this._position,u=i._x,h=i._y,f=a._x,p=a._y;t.a=this._cx*u,t.b=this._sx*u,t.c=this._cy*h,t.d=this._sy*h,t.tx=l._x-(f*t.a+p*t.c),t.ty=l._y-(f*t.b+p*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=lw,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const i=Ct.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=lw,this._onUpdate())}get tint(){return Zu(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=tD,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=$d,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=$d,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=$d,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let a=0;a<t.length;++a)t[a].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}Yt.mixin(ol,zP,GP,WP,VP,FP,IP,NP,YP,PP,BP,HP,UP);class nD extends ol{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Bn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:i,y:a}=e;return i>=t.minX&&i<=t.maxX&&a>=t.minY&&a<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){const{renderPipes:a,renderableGC:l}=t;a.blendMode.setBlendMode(this,this.groupBlendMode,e),a[this.renderPipeId].addRenderable(this,e),l.addRenderable(this),this.didViewUpdate=!1;const h=this.children,f=h.length;for(let p=0;p<f;p++)h[p].collectRenderables(e,t,i)}}class Qo extends nD{constructor(e=Pe.EMPTY){e instanceof Pe&&(e={texture:e});const{texture:t=Pe.EMPTY,anchor:i,roundPixels:a,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new an({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=a??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Pe?new Qo(e):new Qo(Pe.from(e,t))}set texture(e){e||(e=Pe.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return xP(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return it("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,i=this._bounds,{width:a,height:l}=t.orig;i.minX=-e._x*a,i.maxX=i.minX+a,i.minY=-e._y*l,i.maxY=i.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const rD=new Bn;function $1(n,e,t){const i=rD;n.measurable=!0,U1(n,t,i),e.addBoundsMask(i),n.measurable=!1}function F1(n,e,t){const i=wr.get();n.measurable=!0;const a=Nt.get().identity(),l=V1(n,t,a);N1(n,i,l),n.measurable=!1,e.addBoundsMask(i),Nt.return(a),wr.return(i)}function V1(n,e,t){return n?(n!==e&&(V1(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(We("Mask bounds, renderable is not inside the root container"),t)}class Y1{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Qo),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||$1(this.mask,e,t)}addLocalBounds(e,t){F1(this.mask,e,t)}containsPoint(e,t){const i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof Qo}}Y1.extension=be.MaskEffect;class X1{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}X1.extension=be.MaskEffect;class W1{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){$1(this.mask,e,t)}addLocalBounds(e,t){F1(this.mask,e,t)}containsPoint(e,t){const i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof ol}}W1.extension=be.MaskEffect;const iD={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let uw=iD;const dt={get(){return uw},set(n){uw=n}};class Q1 extends Wn{constructor(e){e.resource||(e.resource=dt.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){const a=super.resize(e,t,i);return a&&this.resizeCanvas(),a}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Q1.extension=be.TextureSource;class Hi extends Wn{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const t=dt.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t,We("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Hi.extension=be.TextureSource;var $p=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))($p||{});class Fd{constructor(e,t=null,i=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=a}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const K1=class rn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Fd(null,null,1/0),this.deltaMS=1/rn.targetFPMS,this.elapsedMS=1/rn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=$p.NORMAL){return this._addListener(new Fd(e,t,i))}addOnce(e,t,i=$p.NORMAL){return this._addListener(new Fd(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*rn.targetFPMS;const i=this._head;let a=i.next;for(;a;)a=a.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,rn.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!rn._shared){const e=rn._shared=new rn;e.autoStart=!0,e._protected=!0}return rn._shared}static get system(){if(!rn._system){const e=rn._system=new rn;e.autoStart=!0,e._protected=!0}return rn._system}};K1.targetFPMS=.06;let Gu=K1,Vd;async function Z1(){return Vd??(Vd=(async()=>{const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(a),e.deleteTexture(i),e.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Vd}const Mc=class J1 extends Wn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...J1.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Gu.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Z1(),this._load=new Promise((i,a)=>{this.isValid?i(this):(this._resolve=i,this._reject=a,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Gu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Gu.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Gu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Mc.extension=be.TextureSource;Mc.defaultOptions={...Wn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Mc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ju=Mc;const Pn=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(i=>typeof i=="string"||t?e(i):i):n);class sD{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||We(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=Pn(e);let a;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(t)){a=p.getCacheableAssets(i,t);break}}const l=new Map(Object.entries(a||{}));a||i.forEach(f=>{l.set(f,t)});const u=[...l.keys()],h={cacheKeys:u,keys:i};i.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const p=a?a[f]:t;this._cache.has(f)&&this._cache.get(f)!==p&&We("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){We(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(a=>{this._cache.delete(a)}),t.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const tt=new sD,Fp=[];Yt.handleByList(be.TextureSource,Fp);function eS(n={}){const e=n&&n.resource,t=e?n.resource:n,i=e?n:{resource:n};for(let a=0;a<Fp.length;a++){const l=Fp[a];if(l.test(t))return new l(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function aD(n={},e=!1){const t=n&&n.resource,i=t?n.resource:n,a=t?n:{resource:n};if(!e&&tt.has(i))return tt.get(i);const l=new Pe({source:eS(a)});return l.on("destroy",()=>{tt.has(i)&&tt.remove(i)}),e||tt.set(i,l),l}function oD(n,e=!1){return typeof n=="string"?tt.get(n):n instanceof Wn?new Pe({source:n}):aD(n,e)}Pe.from=oD;Wn.from=eS;Yt.add(Y1,X1,W1,Ju,Hi,Q1,Gg);var ni=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(ni||{});function kn(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function mo(n){return n.split("?")[0].split("#")[0]}function lD(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uD(n,e,t){return n.replace(new RegExp(lD(e),"g"),t)}function cD(n,e){let t="",i=0,a=-1,l=0,u=-1;for(let h=0;h<=n.length;++h){if(h<n.length)u=n.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(a===h-1||l===1))if(a!==h-1&&l===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",i=0):(t=t.slice(0,f),i=t.length-1-t.lastIndexOf("/")),a=h,l=0;continue}}else if(t.length===2||t.length===1){t="",i=0,a=h,l=0;continue}}}else t.length>0?t+=`/${n.slice(a+1,h)}`:t=n.slice(a+1,h),i=h-a-1;a=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const on={toPosix(n){return uD(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){kn(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(kn(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=mo(this.toPosix(e??dt.get().getBaseUrl())),a=mo(this.toPosix(t??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?on.join(a,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(kn(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const i=n.endsWith("/");return n=cD(n),n.length>0&&i&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return kn(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];if(kn(i),i.length>0)if(e===void 0)e=i;else{const a=n[t-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(kn(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let i=-1,a=!0;const l=this.getProtocol(n),u=n;n=n.slice(l.length);for(let h=n.length-1;h>=1;--h)if(e=n.charCodeAt(h),e===47){if(!a){i=h;break}}else a=!1;return i===-1?t?"/":this.isUrl(u)?l+n:l:t&&i===1?"//":l+n.slice(0,i)},rootname(n){kn(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){kn(n),e&&kn(e),n=mo(this.toPosix(n));let t=0,i=-1,a=!0,l;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let u=e.length-1,h=-1;for(l=n.length-1;l>=0;--l){const f=n.charCodeAt(l);if(f===47){if(!a){t=l+1;break}}else h===-1&&(a=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(i=l):(u=-1,i=h))}return t===i?i=h:i===-1&&(i=n.length),n.slice(t,i)}for(l=n.length-1;l>=0;--l)if(n.charCodeAt(l)===47){if(!a){t=l+1;break}}else i===-1&&(a=!1,i=l+1);return i===-1?"":n.slice(t,i)},extname(n){kn(n),n=mo(this.toPosix(n));let e=-1,t=0,i=-1,a=!0,l=0;for(let u=n.length-1;u>=0;--u){const h=n.charCodeAt(u);if(h===47){if(!a){t=u+1;break}continue}i===-1&&(a=!1,i=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||i===-1||l===0||l===1&&e===i-1&&e===t+1?"":n.slice(e,i)},parse(n){kn(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=mo(this.toPosix(n));let t=n.charCodeAt(0);const i=this.isAbsolute(n);let a;e.root=this.rootname(n),i||this.hasProtocol(n)?a=1:a=0;let l=-1,u=0,h=-1,f=!0,p=n.length-1,g=0;for(;p>=a;--p){if(t=n.charCodeAt(p),t===47){if(!f){u=p+1;break}continue}h===-1&&(f=!1,h=p+1),t===46?l===-1?l=p:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&i?e.base=e.name=n.slice(1,h):e.base=e.name=n.slice(u,h)):(u===0&&i?(e.name=n.slice(1,l),e.base=n.slice(1,h)):(e.name=n.slice(u,l),e.base=n.slice(u,h)),e.ext=n.slice(l,h)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function tS(n,e,t,i,a){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?tS(n.replace(i[t],h),e,t+1,i,a):a.push(n.replace(i[t],h))}}function hD(n){const e=/\{(.*?)\}/g,t=n.match(e),i=[];if(t){const a=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");a.push(u)}),tS(n,a,0,t,i)}else i.push(n);return i}const gc=n=>!Array.isArray(n);class aa{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,src:i}=e;return Pn(t||i,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>u?.src??u):l?.src?l.src:l,!0)}addManifest(e){this._manifest&&We("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];let a=t;Array.isArray(t)||(a=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),a.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);i.push(p),f=[h,p]}else{const p=h.map(g=>this._createBundleAssetId(e,g));i.push(...p),f=[...h,...p]}this.add({...l,alias:f,src:u})}),this._bundles[e]=i}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;i=l=>{this.hasKey(l)&&We(`[Resolver] already has key: ${l} overwriting`)},Pn(t).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:p}=l;const g=Pn(u).map(b=>typeof b=="string"?hD(b):Array.isArray(b)?b:[b]),m=this.getAlias(l);Array.isArray(m)?m.forEach(i):i(m);const v=[];g.forEach(b=>{b.forEach(_=>{let M={};if(typeof _!="object"){M.src=_;for(let x=0;x<this._parsers.length;x++){const E=this._parsers[x];if(E.test(_)){M=E.parse(_);break}}}else h=_.data??h,f=_.format??f,p=_.loadParser??p,M={...M,..._};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${M.src}`);M=this._buildResolvedAsset(M,{aliases:m,data:h,format:f,loadParser:p}),v.push(M)})}),m.forEach(b=>{this._assetMap[b]=v})})}resolveBundle(e){const t=gc(e);e=Pn(e);const i={};return e.forEach(a=>{const l=this._bundles[a];if(l){const u=this.resolve(l),h={};for(const f in u){const p=u[f];h[this._extractAssetIdFromBundle(a,f)]=p}i[a]=h}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const a in t)i[a]=t[a].src;return i}return t.src}resolve(e){const t=gc(e);e=Pn(e);const i={};return e.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let l=this._assetMap[a];const u=this._getPreferredOrder(l);u?.priority.forEach(h=>{u.params[h].forEach(f=>{const p=l.filter(g=>g[h]?g[h]===f:!1);p.length&&(l=p)})}),this._resolverHash[a]=l[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});i[a]=this._resolverHash[a]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[t],a=this._preferredOrder.find(l=>l.params.format.includes(i.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:i,data:a,loadParser:l,format:u}=t;return(this._basePath||this._rootPath)&&(e.src=on.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...a||{},...e.data},e.loadParser=l??e.loadParser,e.format=u??e.format??fD(e.src),e}}aa.RETINA_PREFIX=/@([0-9\.]+)x/;function fD(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Vp=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},nS=class Eo{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof Pe?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;const i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Eo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Eo.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const a=this._frameKeys[t],l=this._frames[a],u=l.frame;if(u){let h=null,f=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new lt(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(f=new lt(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[a]=new Pe({source:this.textureSource,frame:h,orig:g,trim:f,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:a.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const a=e[t][i];this.animations[t].push(this.textures[a])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Eo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Eo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};nS.BATCH_SIZE=1e3;let Yp=nS;const dD=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function rS(n,e,t){const i={};if(n.forEach(a=>{i[a]=e}),Object.keys(e.textures).forEach(a=>{i[a]=e.textures[a]}),!t){const a=on.dirname(n[0]);e.linkedSheets.forEach((l,u)=>{const h=rS([`${a}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(i,h)})}return i}const pD={extension:be.Asset,cache:{test:n=>n instanceof Yp,getCacheableAssets:(n,e)=>rS(n,e,!1)},resolver:{extension:{type:be.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),i=t.pop(),a=t.pop();return i==="json"&&dD.includes(a)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(aa.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:be.LoadParser,priority:ni.Normal,name:"spritesheetLoader"},async testParse(n,e){return on.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:i,imageFilename:a,textureOptions:l}=e?.data??{};let u=on.dirname(e.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let h;if(i instanceof Pe)h=i;else{const g=Vp(u+(a??n.meta.image),e.src);h=(await t.load([{src:g,data:l}]))[g]}const f=new Yp(h.source,n);await f.parse();const p=n?.meta?.related_multi_packs;if(Array.isArray(p)){const g=[];for(const v of p){if(typeof v!="string")continue;let b=u+v;e.data?.ignoreMultiPack||(b=Vp(b,e.src),g.push(t.load({src:b,data:{textureOptions:l,ignoreMultiPack:!0}})))}const m=await Promise.all(g);f.linkedSheets=m,m.forEach(v=>{v.linkedSheets=[f].concat(f.linkedSheets.filter(b=>b!==v))})}return f},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Yt.add(pD);const Yd=Object.create(null),cw=Object.create(null);function Fg(n,e){let t=cw[n];return t===void 0&&(Yd[e]===void 0&&(Yd[e]=1),cw[n]=t=Yd[e]++),t}let Hu;function iS(){return(!Hu||Hu?.isContextLost())&&(Hu=dt.get().createCanvas().getContext("webgl",{})),Hu}let $u;function gD(){if(!$u){$u="mediump";const n=iS();n&&n.getShaderPrecisionFormat&&($u=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return $u}function yD(n,e,t){return e?n:t?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function mD(n,e,t){const i=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let a=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return a==="highp"&&i!=="highp"&&(a="mediump"),`precision ${a} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function vD(n,e){return e?`#version 300 es
${n}`:n}const bD={},_D={};function wD(n,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const i=t?bD:_D;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function xD(n,e){return e?n.replace("#version 300 es",""):n}const Xd={stripVersion:xD,ensurePrecision:mD,addProgramDefines:yD,setProgramName:wD,insertVersion:vD},Wd=Object.create(null),sS=class Xp{constructor(e){e={...Xp.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:gD()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let a=e.fragment,l=e.vertex;Object.keys(Xd).forEach(u=>{const h=i[u];a=Xd[u](a,h,!0),l=Xd[u](l,h,!1)}),this.fragment=a,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Fg(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Wd[t]||(Wd[t]=new Xp(e)),Wd[t]}};sS.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let aS=sS;const hw={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function SD(n){return hw[n]??hw.float32}const AD={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function ED({source:n,entryPoint:e}){const t={},i=n.indexOf(`fn ${e}`);if(i!==-1){const a=n.indexOf("->",i);if(a!==-1){const l=n.substring(i,a),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const f=AD[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:SD(f).stride,offset:0,instance:!1,start:0}}}}return t}function Qd(n){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=n.match(e)?.map(m=>({group:parseInt(m.match(t)[1],10),binding:parseInt(m.match(i)[1],10),name:m.match(a)[2],isUniform:m.match(a)[1]==="<uniform>",type:m.match(l)[1]}));if(!p)return{groups:[],structs:[]};const g=n.match(u)?.map(m=>{const v=m.match(f)[1],b=m.match(h).reduce((_,M)=>{const[x,E]=M.split(":");return _[x.trim()]=E.trim(),_},{});return b?{name:v,members:b}:null}).filter(({name:m})=>p.some(v=>v.type===m))??[];return{groups:p,structs:g}}var To=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(To||{});function TD({groups:n}){const e=[];for(let t=0;t<n.length;t++){const i=n[t];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:To.VERTEX|To.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:To.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:To.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function MD({groups:n}){const e=[];for(let t=0;t<n.length;t++){const i=n[t];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function kD(n,e){const t=new Set,i=new Set,a=[...n.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...n.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return i.has(h)?!1:(i.add(h),!0)});return{structs:a,groups:l}}const Kd=Object.create(null);class kc{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:i,layout:a,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=i,t.source===i.source){const h=Qd(t.source);this.structsAndGroups=h}else{const h=Qd(i.source),f=Qd(t.source);this.structsAndGroups=kD(h,f)}this.layout=a??MD(this.structsAndGroups),this.gpuLayout=l??TD(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Fg(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=ED(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Kd[t]||(Kd[t]=new kc(e)),Kd[t]}}const oS=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],CD=oS.reduce((n,e)=>(n[e]=!0,n),{});function RD(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const lS=class uS{constructor(e,t){this._touched=0,this.uid=ut("uniform"),this._resourceType="uniformGroup",this._resourceId=ut("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...uS.defaultOptions,...t},this.uniformStructures=e;const i={};for(const a in e){const l=e[a];if(l.name=a,l.size=l.size??1,!CD[l.type])throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${oS.join(", ")}`);l.value??(l.value=RD(l.type,l.size)),i[a]=l.value}this.uniforms=i,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Fg(Object.keys(i).map(a=>`${a}-${e[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};lS.defaultOptions={ubo:!1,isStatic:!1};let cS=lS;class ec{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const i in e){const a=e[i];this.setResource(a,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){const i=this.resources[t];e!==i&&(i&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const i in t)t[i]._touched=e}destroy(){const e=this.resources;for(const t in e)e[t].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}}var Wp=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Wp||{});class Vg extends Xn{constructor(e){super(),this.uid=ut("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:i,groups:a,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=i,u===void 0&&(u=0,t&&(u|=Wp.WEBGPU),i&&(u|=Wp.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!a&&(l={}),l&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&a&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&a&&h)for(const p in h)for(const g in h[p]){const m=h[p][g];f[m]={group:p,binding:g,name:m}}else if(t&&a&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g})}else if(l){a={},h={},t&&t.structsAndGroups.groups.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,f[m.name]=m});let p=0;for(const g in l)f[g]||(a[99]||(a[99]=new ec,this._ownedBindGroups.push(a[99])),f[g]={group:99,binding:p,name:g},h[99]=h[99]||{},h[99][p]=g,p++);for(const g in l){const m=g;let v=l[g];!v.source&&!v._resourceType&&(v=new cS(v));const b=f[m];b&&(a[b.group]||(a[b.group]=new ec,this._ownedBindGroups.push(a[b.group])),a[b.group].setResource(v,b.binding))}}this.groups=a,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(a,f)}addResource(e,t,i){var a,l;(a=this._uniformBindMap)[t]||(a[t]={}),(l=this._uniformBindMap[t])[i]||(l[i]=e),this.groups[t]||(this.groups[t]=new ec,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const i={};for(const a in t){const l=t[a];Object.defineProperty(i,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return i}destroy(e=!1){this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:t,gl:i,...a}=e;let l,u;return t&&(l=kc.from(t)),i&&(u=aS.from(i)),new Vg({gpuProgram:l,glProgram:u,...a})}}var Fu={exports:{}},fw;function OD(){if(fw)return Fu.exports;fw=1,Fu.exports=n,Fu.exports.default=n;function n(T,P,L){L=L||2;var N=P&&P.length,S=N?P[0]*L:T.length,D=e(T,0,S,L,!0),G=[];if(!D||D.next===D.prev)return G;var $,V,Z,ne,le,oe,pe;if(N&&(D=f(T,P,D,L)),T.length>80*L){$=Z=T[0],V=ne=T[1];for(var he=L;he<S;he+=L)le=T[he],oe=T[he+1],le<$&&($=le),oe<V&&(V=oe),le>Z&&(Z=le),oe>ne&&(ne=oe);pe=Math.max(Z-$,ne-V),pe=pe!==0?32767/pe:0}return i(D,G,L,$,V,pe,0),G}function e(T,P,L,N,S){var D,G;if(S===ae(T,P,L,N)>0)for(D=P;D<L;D+=N)G=Q(D,T[D],T[D+1],G);else for(D=L-N;D>=P;D-=N)G=Q(D,T[D],T[D+1],G);return G&&k(G,G.next)&&(te(G),G=G.next),G}function t(T,P){if(!T)return T;P||(P=T);var L=T,N;do if(N=!1,!L.steiner&&(k(L,L.next)||A(L.prev,L,L.next)===0)){if(te(L),L=P=L.prev,L===L.next)break;N=!0}else L=L.next;while(N||L!==P);return P}function i(T,P,L,N,S,D,G){if(T){!G&&D&&b(T,N,S,D);for(var $=T,V,Z;T.prev!==T.next;){if(V=T.prev,Z=T.next,D?l(T,N,S,D):a(T)){P.push(V.i/L|0),P.push(T.i/L|0),P.push(Z.i/L|0),te(T),T=Z.next,$=Z.next;continue}if(T=Z,T===$){G?G===1?(T=u(t(T),P,L),i(T,P,L,N,S,D,2)):G===2&&h(T,P,L,N,S,D):i(t(T),P,L,N,S,D,1);break}}}}function a(T){var P=T.prev,L=T,N=T.next;if(A(P,L,N)>=0)return!1;for(var S=P.x,D=L.x,G=N.x,$=P.y,V=L.y,Z=N.y,ne=S<D?S<G?S:G:D<G?D:G,le=$<V?$<Z?$:Z:V<Z?V:Z,oe=S>D?S>G?S:G:D>G?D:G,pe=$>V?$>Z?$:Z:V>Z?V:Z,he=N.next;he!==P;){if(he.x>=ne&&he.x<=oe&&he.y>=le&&he.y<=pe&&E(S,$,D,V,G,Z,he.x,he.y)&&A(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function l(T,P,L,N){var S=T.prev,D=T,G=T.next;if(A(S,D,G)>=0)return!1;for(var $=S.x,V=D.x,Z=G.x,ne=S.y,le=D.y,oe=G.y,pe=$<V?$<Z?$:Z:V<Z?V:Z,he=ne<le?ne<oe?ne:oe:le<oe?le:oe,$e=$>V?$>Z?$:Z:V>Z?V:Z,Fe=ne>le?ne>oe?ne:oe:le>oe?le:oe,nt=M(pe,he,P,L,N),pt=M($e,Fe,P,L,N),_e=T.prevZ,Ae=T.nextZ;_e&&_e.z>=nt&&Ae&&Ae.z<=pt;){if(_e.x>=pe&&_e.x<=$e&&_e.y>=he&&_e.y<=Fe&&_e!==S&&_e!==G&&E($,ne,V,le,Z,oe,_e.x,_e.y)&&A(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,Ae.x>=pe&&Ae.x<=$e&&Ae.y>=he&&Ae.y<=Fe&&Ae!==S&&Ae!==G&&E($,ne,V,le,Z,oe,Ae.x,Ae.y)&&A(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;_e&&_e.z>=nt;){if(_e.x>=pe&&_e.x<=$e&&_e.y>=he&&_e.y<=Fe&&_e!==S&&_e!==G&&E($,ne,V,le,Z,oe,_e.x,_e.y)&&A(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;Ae&&Ae.z<=pt;){if(Ae.x>=pe&&Ae.x<=$e&&Ae.y>=he&&Ae.y<=Fe&&Ae!==S&&Ae!==G&&E($,ne,V,le,Z,oe,Ae.x,Ae.y)&&A(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function u(T,P,L){var N=T;do{var S=N.prev,D=N.next.next;!k(S,D)&&z(S,N,N.next,D)&&j(S,D)&&j(D,S)&&(P.push(S.i/L|0),P.push(N.i/L|0),P.push(D.i/L|0),te(N),te(N.next),N=T=D),N=N.next}while(N!==T);return t(N)}function h(T,P,L,N,S,D){var G=T;do{for(var $=G.next.next;$!==G.prev;){if(G.i!==$.i&&C(G,$)){var V=H(G,$);G=t(G,G.next),V=t(V,V.next),i(G,P,L,N,S,D,0),i(V,P,L,N,S,D,0);return}$=$.next}G=G.next}while(G!==T)}function f(T,P,L,N){var S=[],D,G,$,V,Z;for(D=0,G=P.length;D<G;D++)$=P[D]*N,V=D<G-1?P[D+1]*N:T.length,Z=e(T,$,V,N,!1),Z===Z.next&&(Z.steiner=!0),S.push(x(Z));for(S.sort(p),D=0;D<S.length;D++)L=g(S[D],L);return L}function p(T,P){return T.x-P.x}function g(T,P){var L=m(T,P);if(!L)return P;var N=H(L,T);return t(N,N.next),t(L,L.next)}function m(T,P){var L=P,N=T.x,S=T.y,D=-1/0,G;do{if(S<=L.y&&S>=L.next.y&&L.next.y!==L.y){var $=L.x+(S-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if($<=N&&$>D&&(D=$,G=L.x<L.next.x?L:L.next,$===N))return G}L=L.next}while(L!==P);if(!G)return null;var V=G,Z=G.x,ne=G.y,le=1/0,oe;L=G;do N>=L.x&&L.x>=Z&&N!==L.x&&E(S<ne?N:D,S,Z,ne,S<ne?D:N,S,L.x,L.y)&&(oe=Math.abs(S-L.y)/(N-L.x),j(L,T)&&(oe<le||oe===le&&(L.x>G.x||L.x===G.x&&v(G,L)))&&(G=L,le=oe)),L=L.next;while(L!==V);return G}function v(T,P){return A(T.prev,T,P.prev)<0&&A(P.next,T,T.next)<0}function b(T,P,L,N){var S=T;do S.z===0&&(S.z=M(S.x,S.y,P,L,N)),S.prevZ=S.prev,S.nextZ=S.next,S=S.next;while(S!==T);S.prevZ.nextZ=null,S.prevZ=null,_(S)}function _(T){var P,L,N,S,D,G,$,V,Z=1;do{for(L=T,T=null,D=null,G=0;L;){for(G++,N=L,$=0,P=0;P<Z&&($++,N=N.nextZ,!!N);P++);for(V=Z;$>0||V>0&&N;)$!==0&&(V===0||!N||L.z<=N.z)?(S=L,L=L.nextZ,$--):(S=N,N=N.nextZ,V--),D?D.nextZ=S:T=S,S.prevZ=D,D=S;L=N}D.nextZ=null,Z*=2}while(G>1);return T}function M(T,P,L,N,S){return T=(T-L)*S|0,P=(P-N)*S|0,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,T|P<<1}function x(T){var P=T,L=T;do(P.x<L.x||P.x===L.x&&P.y<L.y)&&(L=P),P=P.next;while(P!==T);return L}function E(T,P,L,N,S,D,G,$){return(S-G)*(P-$)>=(T-G)*(D-$)&&(T-G)*(N-$)>=(L-G)*(P-$)&&(L-G)*(D-$)>=(S-G)*(N-$)}function C(T,P){return T.next.i!==P.i&&T.prev.i!==P.i&&!B(T,P)&&(j(T,P)&&j(P,T)&&I(T,P)&&(A(T.prev,T,P.prev)||A(T,P.prev,P))||k(T,P)&&A(T.prev,T,T.next)>0&&A(P.prev,P,P.next)>0)}function A(T,P,L){return(P.y-T.y)*(L.x-P.x)-(P.x-T.x)*(L.y-P.y)}function k(T,P){return T.x===P.x&&T.y===P.y}function z(T,P,L,N){var S=O(A(T,P,L)),D=O(A(T,P,N)),G=O(A(L,N,T)),$=O(A(L,N,P));return!!(S!==D&&G!==$||S===0&&U(T,L,P)||D===0&&U(T,N,P)||G===0&&U(L,T,N)||$===0&&U(L,P,N))}function U(T,P,L){return P.x<=Math.max(T.x,L.x)&&P.x>=Math.min(T.x,L.x)&&P.y<=Math.max(T.y,L.y)&&P.y>=Math.min(T.y,L.y)}function O(T){return T>0?1:T<0?-1:0}function B(T,P){var L=T;do{if(L.i!==T.i&&L.next.i!==T.i&&L.i!==P.i&&L.next.i!==P.i&&z(L,L.next,T,P))return!0;L=L.next}while(L!==T);return!1}function j(T,P){return A(T.prev,T,T.next)<0?A(T,P,T.next)>=0&&A(T,T.prev,P)>=0:A(T,P,T.prev)<0||A(T,T.next,P)<0}function I(T,P){var L=T,N=!1,S=(T.x+P.x)/2,D=(T.y+P.y)/2;do L.y>D!=L.next.y>D&&L.next.y!==L.y&&S<(L.next.x-L.x)*(D-L.y)/(L.next.y-L.y)+L.x&&(N=!N),L=L.next;while(L!==T);return N}function H(T,P){var L=new se(T.i,T.x,T.y),N=new se(P.i,P.x,P.y),S=T.next,D=P.prev;return T.next=P,P.prev=T,L.next=S,S.prev=L,N.next=L,L.prev=N,D.next=N,N.prev=D,N}function Q(T,P,L,N){var S=new se(T,P,L);return N?(S.next=N.next,S.prev=N,N.next.prev=S,N.next=S):(S.prev=S,S.next=S),S}function te(T){T.next.prev=T.prev,T.prev.next=T.next,T.prevZ&&(T.prevZ.nextZ=T.nextZ),T.nextZ&&(T.nextZ.prevZ=T.prevZ)}function se(T,P,L){this.i=T,this.x=P,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(T,P,L,N){var S=P&&P.length,D=S?P[0]*L:T.length,G=Math.abs(ae(T,0,D,L));if(S)for(var $=0,V=P.length;$<V;$++){var Z=P[$]*L,ne=$<V-1?P[$+1]*L:T.length;G-=Math.abs(ae(T,Z,ne,L))}var le=0;for($=0;$<N.length;$+=3){var oe=N[$]*L,pe=N[$+1]*L,he=N[$+2]*L;le+=Math.abs((T[oe]-T[he])*(T[pe+1]-T[oe+1])-(T[oe]-T[pe])*(T[he+1]-T[oe+1]))}return G===0&&le===0?0:Math.abs((le-G)/G)};function ae(T,P,L,N){for(var S=0,D=P,G=L-N;D<L;D+=N)S+=(T[G]-T[D])*(T[D+1]+T[G+1]),G=D;return S}return n.flatten=function(T){for(var P=T[0][0].length,L={vertices:[],holes:[],dimensions:P},N=0,S=0;S<T.length;S++){for(var D=0;D<T[S].length;D++)for(var G=0;G<P;G++)L.vertices.push(T[S][D][G]);S>0&&(N+=T[S-1].length,L.holes.push(N))}return L},Fu.exports}var PD=OD();const DD=Yn(PD);class hS extends Xn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return it(zt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return it(zt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return it(zt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return it(zt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return it(zt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}const dw=[{offset:0,color:"white"},{offset:1,color:"black"}],Yg=class Qp{constructor(...e){this.uid=ut("fillGradient"),this.type="linear",this.colorStops=[];let t=BD(e);t={...t.type==="radial"?Qp.defaultRadialOptions:Qp.defaultLinearOptions,...C1(t)},this._textureSize=t.textureSize,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:Ct.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:dw,t=this._textureSize,{canvas:i,context:a}=gw(t,1),l=a.createLinearGradient(0,0,this._textureSize,0);pw(l,e),a.fillStyle=l,a.fillRect(0,0,t,1),this.texture=new Pe({source:new Hi({resource:i})});const{x:u,y:h}=this.start,{x:f,y:p}=this.end,g=new De,m=f-u,v=p-h,b=Math.sqrt(m*m+v*v),_=Math.atan2(v,m);g.scale(b/t,1),g.rotate(_),g.translate(u,h),this.textureSpace==="local"&&g.scale(t,t),this.transform=g}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:dw,t=this._textureSize,{canvas:i,context:a}=gw(t,t),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,p=this.innerRadius,g=this.outerRadius,m=h-g,v=f-g,b=t/(g*2),_=(l-m)*b,M=(u-v)*b,x=a.createRadialGradient(_,M,p*b,(h-m)*b,(f-v)*b,g*b);pw(x,e),a.fillStyle=e[e.length-1].color,a.fillRect(0,0,t,t),a.fillStyle=x,a.translate(_,M),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-_,-M),a.fillRect(0,0,t,t),this.texture=new Pe({source:new Hi({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const E=new De;E.scale(1/b,1/b),E.translate(m,v),this.textureSpace==="local"&&E.scale(t,t),this.transform=E}get styleKey(){return this.uid}destroy(){this.texture?.destroy(!0),this.texture=null}};Yg.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};Yg.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let ei=Yg;function pw(n,e){for(let t=0;t<e.length;t++){const i=e[t];n.addColorStop(i.offset,i.color)}}function gw(n,e){const t=dt.get().createCanvas(n,e),i=t.getContext("2d");return{canvas:t,context:i}}function BD(n){let e=n[0]??{};return(typeof e=="number"||n[1])&&(it("8.5.2","use options object instead"),e={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??ei.defaultLinearOptions.textureSize}),e}const yw={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Cc{constructor(e,t){this.uid=ut("fillPattern"),this.transform=new De,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=yw[t].addressModeU,e.source.style.addressModeV=yw[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Zd,mw;function jD(){if(mw)return Zd;mw=1,Zd=t;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,f,p){var g=f.toLowerCase();for(p=a(p),g=="m"&&p.length>2&&(u.push([f].concat(p.splice(0,2))),g="l",f=f=="m"?"l":"L");;){if(p.length==n[g])return p.unshift(f),u.push(p);if(p.length<n[g])throw new Error("malformed path data");u.push([f].concat(p.splice(0,n[g])))}}),u}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(l){var u=l.match(i);return u?u.map(Number):[]}return Zd}var zD=jD();const UD=Yn(zD);function LD(n,e){const t=UD(n),i=[];let a=null,l=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],p=f[0],g=f;switch(p){case"M":l=g[1],u=g[2],e.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],e.moveTo(l,u);break;case"H":l=g[1],e.lineTo(l,u);break;case"h":l+=g[1],e.lineTo(l,u);break;case"V":u=g[1],e.lineTo(l,u);break;case"v":u+=g[1],e.lineTo(l,u);break;case"L":l=g[1],u=g[2],e.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],e.lineTo(l,u);break;case"C":l=g[5],u=g[6],e.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":e.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],e.bezierCurveToShort(g[1],g[2],l,u);break;case"s":e.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],e.quadraticCurveTo(g[1],g[2],l,u);break;case"q":e.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],e.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],e.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":e.closePath(),i.length>0&&(a=i.pop(),a?(l=a.startX,u=a.startY):(l=0,u=0)),a=null;break;default:We(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&a===null&&(a={startX:l,startY:u},i.push(a))}return e}class Xg{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new Xg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let a=this.x-e,l=this.y-t;return a*=a,l*=l,a+l<=i}strokeContains(e,t,i,a=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,f=(1-a)*i,p=Math.sqrt(l*l+u*u);return p<=h+f&&p>h-(i-f)}getBounds(e){return e||(e=new lt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Wg{constructor(e=0,t=0,i=0,a=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=a}clone(){return new Wg(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,a=(t-this.y)/this.halfHeight;return i*=i,a*=a,i+a<=1}strokeContains(e,t,i,a=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=i*(1-a),f=i-h,p=l-f,g=u-f,m=l+h,v=u+h,b=e-this.x,_=t-this.y,M=b*b/(p*p)+_*_/(g*g),x=b*b/(m*m)+_*_/(v*v);return M>1&&x<=1}getBounds(e){return e||(e=new lt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function ID(n,e,t,i,a,l){const u=n-t,h=e-i,f=a-t,p=l-i,g=u*f+h*p,m=f*f+p*p;let v=-1;m!==0&&(v=g/m);let b,_;v<0?(b=t,_=i):v>1?(b=a,_=l):(b=t+v*f,_=i+v*p);const M=n-b,x=e-_;return M*M+x*x}let ND,qD;class Lo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let a=0,l=t.length;a<l;a++)i.push(t[a].x,t[a].y);t=i}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,i=t.length;for(let a=0;a<i;a+=2){const l=t[a],u=t[a+1],h=t[(a+2)%i],f=t[(a+3)%i];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(ND),i=e.getBounds(qD);if(!t.containsRect(i))return!1;const a=e.points;for(let l=0;l<a.length;l+=2){const u=a[l],h=a[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new Lo(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1;const a=this.points.length/2;for(let l=0,u=a-1;l<a;u=l++){const h=this.points[l*2],f=this.points[l*2+1],p=this.points[u*2],g=this.points[u*2+1];f>t!=g>t&&e<(p-h)*((t-f)/(g-f))+h&&(i=!i)}return i}strokeContains(e,t,i,a=.5){const l=i*i,u=l*(1-a),h=l-u,{points:f}=this,p=f.length-(this.closePath?0:2);for(let g=0;g<p;g+=2){const m=f[g],v=f[g+1],b=f[(g+2)%f.length],_=f[(g+3)%f.length],M=ID(e,t,m,v,b,_),x=Math.sign((b-m)*(t-v)-(_-v)*(e-m));if(M<=(x<0?h:u))return!0}return!1}getBounds(e){e||(e=new lt);const t=this.points;let i=1/0,a=-1/0,l=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const p=t[h],g=t[h+1];i=p<i?p:i,a=p>a?p:a,l=g<l?g:l,u=g>u?g:u}return e.x=i,e.width=a-i,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Vu=(n,e,t,i,a,l,u)=>{const h=n-t,f=e-i,p=Math.sqrt(h*h+f*f);return p>=a-l&&p<=a+u};class Qg{constructor(e=0,t=0,i=0,a=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=a,this.radius=l}getBounds(e){return e||(e=new lt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Qg(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let a=e-(this.x+i),l=t-(this.y+i);const u=i*i;if(a*a+l*l<=u||(a=e-(this.x+this.width-i),a*a+l*l<=u)||(l=t-(this.y+this.height-i),a*a+l*l<=u)||(a=e-(this.x+i),a*a+l*l<=u))return!0}return!1}strokeContains(e,t,i,a=.5){const{x:l,y:u,width:h,height:f,radius:p}=this,g=i*(1-a),m=i-g,v=l+p,b=u+p,_=h-p*2,M=f-p*2,x=l+h,E=u+f;return(e>=l-g&&e<=l+m||e>=x-m&&e<=x+g)&&t>=b&&t<=b+M||(t>=u-g&&t<=u+m||t>=E-m&&t<=E+g)&&e>=v&&e<=v+_?!0:e<v&&t<b&&Vu(e,t,v,b,p,m,g)||e>x-p&&t<b&&Vu(e,t,x-p,b,p,m,g)||e>x-p&&t>E-p&&Vu(e,t,x-p,E-p,p,m,g)||e<v&&t>E-p&&Vu(e,t,v,E-p,p,m,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const GD=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function HD(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function $D(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const i=GD.replace(/%forloop%/gi,HD(n));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(t)}return n}let Ns=null;function fS(){if(Ns)return Ns;const n=iS();return Ns=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Ns=$D(Ns,n),n.getExtension("WEBGL_lose_context")?.loseContext(),Ns}const dS={};function FD(n,e){let t=2166136261;for(let i=0;i<e;i++)t^=n[i].uid,t=Math.imul(t,16777619),t>>>=0;return dS[t]||VD(n,e,t)}let Jd=0;function VD(n,e,t){const i={};let a=0;Jd||(Jd=fS());for(let u=0;u<Jd;u++){const h=u<e?n[u]:Pe.EMPTY.source;i[a++]=h.source,i[a++]=h.style}const l=new ec(i);return dS[t]=l,l}class vw{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function bw(n,e){const t=n.byteLength/8|0,i=new Float64Array(n,0,t);new Float64Array(e,0,t).set(i);const l=n.byteLength-t*8;if(l>0){const u=new Uint8Array(n,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const YD={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var XD=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(XD||{});function _w(n,e){return e.alphaMode==="no-premultiply-alpha"&&YD[n]||n}class WD{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class QD{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new WD,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const pS=[];let Kp=0;function ww(){return Kp>0?pS[--Kp]:new QD}function xw(n){pS[Kp++]=n}let vo=0;const gS=class tc{constructor(e={}){this.uid=ut("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],tc.defaultOptions.maxTextures=tc.defaultOptions.maxTextures??fS(),e={...tc.defaultOptions,...e};const{maxTextures:t,attributesInitialSize:i,indicesInitialSize:a}=e;this.attributeBuffer=new vw(i*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)xw(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const i=e._batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let i=ww(),a=i.textures;a.clear();const l=t[this.elementStart];let u=_w(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,g=this.indexBuffer;let m=this._batchIndexSize,v=this._batchIndexStart,b="startBatch";const _=this.maxTextures;for(let M=this.elementStart;M<this.elementSize;++M){const x=t[M];t[M]=null;const C=x.texture._source,A=_w(x.blendMode,C),k=u!==A||h!==x.topology;if(C._batchTick===vo&&!k){x._textureId=C._textureBindLocation,m+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,f,p,x._attributeStart,x._textureId),this.packQuadIndex(g,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,f,p,x._attributeStart,x._textureId),this.packIndex(x,g,x._indexStart,x._attributeStart/this.vertexSize)),x._batch=i;continue}C._batchTick=vo,(a.count>=_||k)&&(this._finishBatch(i,v,m-v,a,u,h,e,b),b="renderBatch",v=m,u=A,h=x.topology,i=ww(),a=i.textures,a.clear(),++vo),x._textureId=C._textureBindLocation=a.count,a.ids[C.uid]=a.count,a.textures[a.count++]=C,x._batch=i,m+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,f,p,x._attributeStart,x._textureId),this.packQuadIndex(g,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,f,p,x._attributeStart,x._textureId),this.packIndex(x,g,x._indexStart,x._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(i,v,m-v,a,u,h,e,b),v=m,++vo),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=m}_finishBatch(e,t,i,a,l,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=a,e.blendMode=l,e.topology=u,e.start=t,e.size=i,++vo,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),i=new vw(t);bw(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const t=this.indexBuffer;let i=Math.max(e,t.length*1.5);i+=i%2;const a=i>65535?new Uint32Array(i):new Uint16Array(i);if(a.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)a[l]=t[l];else bw(t.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,a){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let p=0;p<u;p++)t[i++]=a+l[p+h]-f}destroy(){for(let e=0;e<this.batches.length;e++)xw(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};gS.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let KD=gS;var Vt=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Vt||{});let Ko=class extends Xn{constructor(e){let{data:t,size:i}=e;const{usage:a,label:l,shrinkToFit:u}=e;super(),this.uid=ut("buffer"),this._resourceType="buffer",this._resourceId=ut("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i??(i=t?.byteLength);const h=!!t;this.descriptor={size:i,usage:a,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Vt.STATIC)}set static(e){e?this.descriptor.usage|=Vt.STATIC:this.descriptor.usage&=~Vt.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}const a=this._data;if(this._data=e,this._dataInt32=null,!a||a.length!==e.length){!this.shrinkToFit&&a&&e.byteLength<a.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ut("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function yS(n,e){if(!(n instanceof Ko)){let t=e?Vt.INDEX:Vt.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=Vt.INDEX|Vt.COPY_DST):(n=new Float32Array(n),t=Vt.VERTEX|Vt.COPY_DST)),n=new Ko({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function ZD(n,e,t){const i=n.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const a=i.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const p=a.BYTES_PER_ELEMENT,g=(i.offset||0)/p,m=(i.stride||8)/p;for(let v=g;v<a.length;v+=m){const b=a[v],_=a[v+1];b>h&&(h=b),_>f&&(f=_),b<l&&(l=b),_<u&&(u=_)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=f,t}function JD(n){return(n instanceof Ko||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=yS(n.buffer,!1),n}class eB extends Xn{constructor(e={}){super(),this.uid=ut("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bn,this._boundsDirty=!0;const{attributes:t,indexBuffer:i,topology:a}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,i&&this.addIndex(i),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const i=JD(t);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=yS(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,ZD(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const tB=new Float32Array(1),nB=new Uint32Array(1);class rB extends eB{constructor(){const t=new Ko({data:tB,label:"attribute-batch-buffer",usage:Vt.VERTEX|Vt.COPY_DST,shrinkToFit:!1}),i=new Ko({data:nB,label:"index-batch-buffer",usage:Vt.INDEX|Vt.COPY_DST,shrinkToFit:!1}),a=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:a,offset:0},aUV:{buffer:t,format:"float32x2",stride:a,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:a,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:a,offset:20}},indexBuffer:i})}}function Sw(n,e,t){if(n)for(const i in n){const a=i.toLocaleLowerCase(),l=e[a];if(l){let u=n[i];i==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else We(`${i} placement hook does not exist in shader`)}}const iB=/\{\{(.*?)\}\}/g;function Aw(n){const e={};return(n.match(iB)?.map(i=>i.replace(/[{()}]/g,""))??[]).forEach(i=>{e[i]=[]}),e}function Ew(n,e){let t;const i=/@in\s+([^;]+);/g;for(;(t=i.exec(n))!==null;)e.push(t[1])}function Tw(n,e,t=!1){const i=[];Ew(e,i),n.forEach(h=>{h.header&&Ew(h.header,i)});const a=i;t&&a.sort();const l=a.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function Mw(n,e){let t;const i=/@out\s+([^;]+);/g;for(;(t=i.exec(n))!==null;)e.push(t[1])}function sB(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function aB(n){const e=/@.*?\s+/g;return n.replace(e,"")}function oB(n,e){const t=[];Mw(e,t),n.forEach(f=>{f.header&&Mw(f.header,t)});let i=0;const a=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${i++}) ${f}`).join(`,
`),l=t.sort().map(f=>`       var ${aB(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${sB(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${a}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function kw(n,e){let t=n;for(const i in e){const a=e[i];a.join(`
`).length?t=t.replace(`{{${i}}}`,`//-----${i} START-----//
${a.join(`
`)}
//----${i} FINISH----//`):t=t.replace(`{{${i}}}`,"")}return t}const Qr=Object.create(null),ep=new Map;let lB=0;function uB({template:n,bits:e}){const t=mS(n,e);if(Qr[t])return Qr[t];const{vertex:i,fragment:a}=hB(n,e);return Qr[t]=vS(i,a,e),Qr[t]}function cB({template:n,bits:e}){const t=mS(n,e);return Qr[t]||(Qr[t]=vS(n.vertex,n.fragment,e)),Qr[t]}function hB(n,e){const t=e.map(u=>u.vertex).filter(u=>!!u),i=e.map(u=>u.fragment).filter(u=>!!u);let a=Tw(t,n.vertex,!0);a=oB(t,a);const l=Tw(i,n.fragment,!0);return{vertex:a,fragment:l}}function mS(n,e){return e.map(t=>(ep.has(t)||ep.set(t,lB++),ep.get(t))).sort((t,i)=>t-i).join("-")+n.vertex+n.fragment}function vS(n,e,t){const i=Aw(n),a=Aw(e);return t.forEach(l=>{Sw(l.vertex,i,l.name),Sw(l.fragment,a,l.name)}),{vertex:kw(n,i),fragment:kw(e,a)}}const fB=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,dB=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,pB=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,gB=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,yB={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},mB={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function vB({bits:n,name:e}){const t=uB({template:{fragment:dB,vertex:fB},bits:[yB,...n]});return kc.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function bB({bits:n,name:e}){return new aS({name:e,...cB({template:{vertex:pB,fragment:gB},bits:[mB,...n]})})}const _B={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},wB={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},tp={};function xB(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let i=0;i<n;i++)e.push(`@group(1) @binding(${t++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function SB(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<n;t++)t===n-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function AB(n){return tp[n]||(tp[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${xB(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${SB(n)}
            `}}),tp[n]}const np={};function EB(n){const e=[];for(let t=0;t<n;t++)t>0&&e.push("else"),t<n-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function TB(n){return np[n]||(np[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${EB(n)}
            `}}),np[n]}const MB={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},kB={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Cw={};function CB(n){let e=Cw[n];if(e)return e;const t=new Int32Array(n);for(let i=0;i<n;i++)t[i]=i;return e=Cw[n]=new cS({uTextures:{value:t,type:"i32",size:n}},{isStatic:!0}),e}class RB extends Vg{constructor(e){const t=bB({name:"batch",bits:[wB,TB(e),kB]}),i=vB({name:"batch",bits:[_B,AB(e),MB]});super({glProgram:t,gpuProgram:i,resources:{batchSamplers:CB(e)}})}}let Rw=null;const bS=class _S extends KD{constructor(){super(...arguments),this.geometry=new rB,this.shader=Rw||(Rw=new RB(this.maxTextures)),this.name=_S.extension.name,this.vertexSize=6}packAttributes(e,t,i,a,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,p=h.b,g=h.c,m=h.d,v=h.tx,b=h.ty,{positions:_,uvs:M}=e,x=e.color,E=e.attributeOffset,C=E+e.attributeSize;for(let A=E;A<C;A++){const k=A*2,z=_[k],U=_[k+1];t[a++]=f*z+g*U+v,t[a++]=m*U+p*z+b,t[a++]=M[k],t[a++]=M[k+1],i[a++]=x,i[a++]=u}}packQuadAttributes(e,t,i,a,l){const u=e.texture,h=e.transform,f=h.a,p=h.b,g=h.c,m=h.d,v=h.tx,b=h.ty,_=e.bounds,M=_.maxX,x=_.minX,E=_.maxY,C=_.minY,A=u.uvs,k=e.color,z=l<<16|e.roundPixels&65535;t[a+0]=f*x+g*C+v,t[a+1]=m*C+p*x+b,t[a+2]=A.x0,t[a+3]=A.y0,i[a+4]=k,i[a+5]=z,t[a+6]=f*M+g*C+v,t[a+7]=m*C+p*M+b,t[a+8]=A.x1,t[a+9]=A.y1,i[a+10]=k,i[a+11]=z,t[a+12]=f*M+g*E+v,t[a+13]=m*E+p*M+b,t[a+14]=A.x2,t[a+15]=A.y2,i[a+16]=k,i[a+17]=z,t[a+18]=f*x+g*E+v,t[a+19]=m*E+p*x+b,t[a+20]=A.x3,t[a+21]=A.y3,i[a+22]=k,i[a+23]=z}};bS.extension={type:[be.Batcher],name:"default"};let OB=bS;function PB(n,e,t,i,a,l,u,h=null){let f=0;t*=e,a*=l;const p=h.a,g=h.b,m=h.c,v=h.d,b=h.tx,_=h.ty;for(;f<u;){const M=n[t],x=n[t+1];i[a]=p*M+m*x+b,i[a+1]=g*M+v*x+_,a+=l,t+=e,f++}}function DB(n,e,t,i){let a=0;for(e*=t;a<i;)n[e]=0,n[e+1]=0,e+=t,a++}function wS(n,e,t,i,a){const l=e.a,u=e.b,h=e.c,f=e.d,p=e.tx,g=e.ty;t||(t=0),i||(i=2),a||(a=n.length/i-t);let m=t*i;for(let v=0;v<a;v++){const b=n[m],_=n[m+1];n[m]=l*b+h*_+p,n[m+1]=u*b+f*_+g,m+=i}}const BB=new De;class xS{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?I1(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||BB}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Zo={extension:{type:be.ShapeBuilder,name:"circle"},build(n,e){let t,i,a,l,u,h;if(n.type==="circle"){const k=n;t=k.x,i=k.y,u=h=k.radius,a=l=0}else if(n.type==="ellipse"){const k=n;t=k.x,i=k.y,u=k.halfWidth,h=k.halfHeight,a=l=0}else{const k=n,z=k.width/2,U=k.height/2;t=k.x+z,i=k.y+U,u=h=Math.max(0,Math.min(k.radius,Math.min(z,U))),a=z-u,l=U-h}if(!(u>=0&&h>=0&&a>=0&&l>=0))return e;const f=Math.ceil(2.3*Math.sqrt(u+h)),p=f*8+(a?4:0)+(l?4:0);if(p===0)return e;if(f===0)return e[0]=e[6]=t+a,e[1]=e[3]=i+l,e[2]=e[4]=t-a,e[5]=e[7]=i-l,e;let g=0,m=f*4+(a?2:0)+2,v=m,b=p,_=a+u,M=l,x=t+_,E=t-_,C=i+M;if(e[g++]=x,e[g++]=C,e[--m]=C,e[--m]=E,l){const k=i-M;e[v++]=E,e[v++]=k,e[--b]=k,e[--b]=x}for(let k=1;k<f;k++){const z=Math.PI/2*(k/f),U=a+Math.cos(z)*u,O=l+Math.sin(z)*h,B=t+U,j=t-U,I=i+O,H=i-O;e[g++]=B,e[g++]=I,e[--m]=I,e[--m]=j,e[v++]=j,e[v++]=H,e[--b]=H,e[--b]=B}_=a,M=l+h,x=t+_,E=t-_,C=i+M;const A=i-M;return e[g++]=x,e[g++]=C,e[--b]=A,e[--b]=x,a&&(e[g++]=E,e[g++]=C,e[--b]=A,e[--b]=E),e},triangulate(n,e,t,i,a,l){if(n.length===0)return;let u=0,h=0;for(let g=0;g<n.length;g+=2)u+=n[g],h+=n[g+1];u/=n.length/2,h/=n.length/2;let f=i;e[f*t]=u,e[f*t+1]=h;const p=f++;for(let g=0;g<n.length;g+=2)e[f*t]=n[g],e[f*t+1]=n[g+1],g>0&&(a[l++]=f,a[l++]=p,a[l++]=f-1),f++;a[l++]=p+1,a[l++]=p,a[l++]=f-1}},jB={...Zo,extension:{...Zo.extension,name:"ellipse"}},zB={...Zo,extension:{...Zo.extension,name:"roundedRectangle"}},SS=1e-4,Ow=1e-4;function UB(n){const e=n.length;if(e<6)return 1;let t=0;for(let i=0,a=n[e-2],l=n[e-1];i<e;i+=2){const u=n[i],h=n[i+1];t+=(u-a)*(h+l),a=u,l=h}return t<0?-1:1}function Pw(n,e,t,i,a,l,u,h){const f=n-t*a,p=e-i*a,g=n+t*l,m=e+i*l;let v,b;u?(v=i,b=-t):(v=-i,b=t);const _=f+v,M=p+b,x=g+v,E=m+b;return h.push(_,M),h.push(x,E),2}function Mi(n,e,t,i,a,l,u,h){const f=t-n,p=i-e;let g=Math.atan2(f,p),m=Math.atan2(a-n,l-e);h&&g<m?g+=Math.PI*2:!h&&g>m&&(m+=Math.PI*2);let v=g;const b=m-g,_=Math.abs(b),M=Math.sqrt(f*f+p*p),x=(15*_*Math.sqrt(M)/Math.PI>>0)+1,E=b/x;if(v+=E,h){u.push(n,e),u.push(t,i);for(let C=1,A=v;C<x;C++,A+=E)u.push(n,e),u.push(n+Math.sin(A)*M,e+Math.cos(A)*M);u.push(n,e),u.push(a,l)}else{u.push(t,i),u.push(n,e);for(let C=1,A=v;C<x;C++,A+=E)u.push(n+Math.sin(A)*M,e+Math.cos(A)*M),u.push(n,e);u.push(a,l),u.push(n,e)}return x*2}function LB(n,e,t,i,a,l){const u=SS;if(n.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let N=UB(n);f=(f-.5)*N+.5}const p=new Ut(n[0],n[1]),g=new Ut(n[n.length-2],n[n.length-1]),m=i,v=Math.abs(p.x-g.x)<u&&Math.abs(p.y-g.y)<u;if(m){n=n.slice(),v&&(n.pop(),n.pop(),g.set(n[n.length-2],n[n.length-1]));const N=(p.x+g.x)*.5,S=(g.y+p.y)*.5;n.unshift(N,S),n.push(N,S)}const b=a,_=n.length/2;let M=n.length;const x=b.length/2,E=h.width/2,C=E*E,A=h.miterLimit*h.miterLimit;let k=n[0],z=n[1],U=n[2],O=n[3],B=0,j=0,I=-(z-O),H=k-U,Q=0,te=0,se=Math.sqrt(I*I+H*H);I/=se,H/=se,I*=E,H*=E;const ae=f,T=(1-ae)*2,P=ae*2;m||(h.cap==="round"?M+=Mi(k-I*(T-P)*.5,z-H*(T-P)*.5,k-I*T,z-H*T,k+I*P,z+H*P,b,!0)+2:h.cap==="square"&&(M+=Pw(k,z,I,H,T,P,!0,b))),b.push(k-I*T,z-H*T),b.push(k+I*P,z+H*P);for(let N=1;N<_-1;++N){k=n[(N-1)*2],z=n[(N-1)*2+1],U=n[N*2],O=n[N*2+1],B=n[(N+1)*2],j=n[(N+1)*2+1],I=-(z-O),H=k-U,se=Math.sqrt(I*I+H*H),I/=se,H/=se,I*=E,H*=E,Q=-(O-j),te=U-B,se=Math.sqrt(Q*Q+te*te),Q/=se,te/=se,Q*=E,te*=E;const S=U-k,D=z-O,G=U-B,$=j-O,V=S*G+D*$,Z=D*G-$*S,ne=Z<0;if(Math.abs(Z)<.001*Math.abs(V)){b.push(U-I*T,O-H*T),b.push(U+I*P,O+H*P),V>=0&&(h.join==="round"?M+=Mi(U,O,U-I*T,O-H*T,U-Q*T,O-te*T,b,!1)+4:M+=2,b.push(U-Q*P,O-te*P),b.push(U+Q*T,O+te*T));continue}const le=(-I+k)*(-H+O)-(-I+U)*(-H+z),oe=(-Q+B)*(-te+O)-(-Q+U)*(-te+j),pe=(S*oe-G*le)/Z,he=($*le-D*oe)/Z,$e=(pe-U)*(pe-U)+(he-O)*(he-O),Fe=U+(pe-U)*T,nt=O+(he-O)*T,pt=U-(pe-U)*P,_e=O-(he-O)*P,Ae=Math.min(S*S+D*D,G*G+$*$),Yi=ne?T:P,Xi=Ae+Yi*Yi*C;$e<=Xi?h.join==="bevel"||$e/C>A?(ne?(b.push(Fe,nt),b.push(U+I*P,O+H*P),b.push(Fe,nt),b.push(U+Q*P,O+te*P)):(b.push(U-I*T,O-H*T),b.push(pt,_e),b.push(U-Q*T,O-te*T),b.push(pt,_e)),M+=2):h.join==="round"?ne?(b.push(Fe,nt),b.push(U+I*P,O+H*P),M+=Mi(U,O,U+I*P,O+H*P,U+Q*P,O+te*P,b,!0)+4,b.push(Fe,nt),b.push(U+Q*P,O+te*P)):(b.push(U-I*T,O-H*T),b.push(pt,_e),M+=Mi(U,O,U-I*T,O-H*T,U-Q*T,O-te*T,b,!1)+4,b.push(U-Q*T,O-te*T),b.push(pt,_e)):(b.push(Fe,nt),b.push(pt,_e)):(b.push(U-I*T,O-H*T),b.push(U+I*P,O+H*P),h.join==="round"?ne?M+=Mi(U,O,U+I*P,O+H*P,U+Q*P,O+te*P,b,!0)+2:M+=Mi(U,O,U-I*T,O-H*T,U-Q*T,O-te*T,b,!1)+2:h.join==="miter"&&$e/C<=A&&(ne?(b.push(pt,_e),b.push(pt,_e)):(b.push(Fe,nt),b.push(Fe,nt)),M+=2),b.push(U-Q*T,O-te*T),b.push(U+Q*P,O+te*P),M+=2)}k=n[(_-2)*2],z=n[(_-2)*2+1],U=n[(_-1)*2],O=n[(_-1)*2+1],I=-(z-O),H=k-U,se=Math.sqrt(I*I+H*H),I/=se,H/=se,I*=E,H*=E,b.push(U-I*T,O-H*T),b.push(U+I*P,O+H*P),m||(h.cap==="round"?M+=Mi(U-I*(T-P)*.5,O-H*(T-P)*.5,U-I*T,O-H*T,U+I*P,O+H*P,b,!1)+2:h.cap==="square"&&(M+=Pw(U,O,I,H,T,P,!1,b)));const L=Ow*Ow;for(let N=x;N<M+x-2;++N)k=b[N*2],z=b[N*2+1],U=b[(N+1)*2],O=b[(N+1)*2+1],B=b[(N+2)*2],j=b[(N+2)*2+1],!(Math.abs(k*(O-j)+U*(j-z)+B*(z-O))<L)&&l.push(N,N+1,N+2)}function IB(n,e,t,i){const a=SS;if(n.length===0)return;const l=n[0],u=n[1],h=n[n.length-2],f=n[n.length-1],p=e||Math.abs(l-h)<a&&Math.abs(u-f)<a,g=t,m=n.length/2,v=g.length/2;for(let b=0;b<m;b++)g.push(n[b*2]),g.push(n[b*2+1]);for(let b=0;b<m-1;b++)i.push(v+b,v+b+1);p&&i.push(v+m-1,v)}function AS(n,e,t,i,a,l,u){const h=DD(n,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+a,l[u++]=h[p+1]+a,l[u++]=h[p+2]+a;let f=a*i;for(let p=0;p<n.length;p+=2)t[f]=n[p],t[f+1]=n[p+1],f+=i}const NB=[],qB={extension:{type:be.ShapeBuilder,name:"polygon"},build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return e},triangulate(n,e,t,i,a,l){AS(n,NB,e,t,i,a,l)}},GB={extension:{type:be.ShapeBuilder,name:"rectangle"},build(n,e){const t=n,i=t.x,a=t.y,l=t.width,u=t.height;return l>=0&&u>=0&&(e[0]=i,e[1]=a,e[2]=i+l,e[3]=a,e[4]=i+l,e[5]=a+u,e[6]=i,e[7]=a+u),e},triangulate(n,e,t,i,a,l){let u=0;i*=t,e[i+u]=n[0],e[i+u+1]=n[1],u+=t,e[i+u]=n[2],e[i+u+1]=n[3],u+=t,e[i+u]=n[6],e[i+u+1]=n[7],u+=t,e[i+u]=n[4],e[i+u+1]=n[5],u+=t;const h=i/t;a[l++]=h,a[l++]=h+1,a[l++]=h+2,a[l++]=h+1,a[l++]=h+3,a[l++]=h+2}},HB={extension:{type:be.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,e},triangulate(n,e,t,i,a,l){let u=0;i*=t,e[i+u]=n[0],e[i+u+1]=n[1],u+=t,e[i+u]=n[2],e[i+u+1]=n[3],u+=t,e[i+u]=n[4],e[i+u+1]=n[5];const h=i/t;a[l++]=h,a[l++]=h+1,a[l++]=h+2}},$B=new De,FB=new lt;function VB(n,e,t,i){const a=e.matrix?n.copyFrom(e.matrix).invert():n.identity();if(e.textureSpace==="local"){const l=t.getBounds(FB);a.translate(-l.x,-l.y),a.scale(1/l.width,1/l.height)}else{a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update())}return i&&a.append($B.copyFrom(i).invert()),a}const Rc={};Yt.handleByMap(be.ShapeBuilder,Rc);Yt.add(GB,qB,HB,Zo,jB,zB);const YB=new lt,XB=new De;function WB(n,e){const{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let a=0;a<n.instructions.length;a++){const l=n.instructions[a];if(l.action==="texture")QB(l.data,i,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,p=l.data.hole;u&&p&&Dw(p.shapePath,f,!0,i,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),Dw(h,f,u,i,t)}}}function QB(n,e,t){const{vertices:i,uvs:a,indices:l}=t,u=l.length,h=i.length/2,f=[],p=Rc.rectangle,g=YB,m=n.image;g.x=n.dx,g.y=n.dy,g.width=n.dw,g.height=n.dh;const v=n.transform;p.build(g,f),v&&wS(f,v),p.triangulate(f,i,2,h,l,u);const b=m.uvs;a.push(b.x0,b.y0,b.x1,b.y1,b.x3,b.y3,b.x2,b.y2);const _=_r.get(xS);_.indexOffset=u,_.indexSize=l.length-u,_.attributeOffset=h,_.attributeSize=i.length/2-h,_.baseColor=n.style,_.alpha=n.alpha,_.texture=m,_.geometryData=t,e.push(_)}function Dw(n,e,t,i,a){const{vertices:l,uvs:u,indices:h}=a;n.shapePrimitives.forEach(({shape:f,transform:p,holes:g})=>{const m=h.length,v=l.length/2,b=[],_=Rc[f.type];let M="triangle-list";if(_.build(f,b),p&&wS(b,p),t){const A=f.closePath??!0,k=e;k.pixelLine?(IB(b,A,l,h),M="line-list"):LB(b,k,!1,A,l,h)}else if(g){const A=[],k=b.slice();KB(g).forEach(U=>{A.push(k.length/2),k.push(...U)}),AS(k,A,l,2,v,h,m)}else _.triangulate(b,l,2,v,h,m);const x=u.length/2,E=e.texture;if(E!==Pe.WHITE){const A=VB(XB,e,f,p);PB(l,2,v,u,x,2,l.length/2-v,A)}else DB(u,x,2,l.length/2-v);const C=_r.get(xS);C.indexOffset=m,C.indexSize=h.length-m,C.attributeOffset=v,C.attributeSize=l.length/2-v,C.baseColor=e.color,C.alpha=e.alpha,C.texture=E,C.geometryData=a,C.topology=M,i.push(C)})}function KB(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t].shape,a=[];Rc[i.type].build(i,a),e.push(a)}return e}class ZB{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class JB{constructor(){this.batcher=new OB,this.instructions=new H1}init(){this.instructions.reset()}get geometry(){return it(vP,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Kg=class Zp{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Zp.defaultOptions.bezierSmoothness=e?.bezierSmoothness??Zp.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),WB(e,t);const i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=_r.get(JB),{batches:i,geometryData:a}=this._gpuContextHash[e.uid],l=a.vertices.length,u=a.indices.length;for(let g=0;g<i.length;g++)i[g].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let g=0;g<i.length;g++){const m=i[g];h.add(m)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let g=0;g<p.length;g++){const m=p[g];m.bindGroup=FD(m.textures.textures,m.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new ZB;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(_r.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{_r.return(i)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Kg.extension={type:[be.WebGLSystem,be.WebGPUSystem,be.CanvasSystem],name:"graphicsContext"};Kg.defaultOptions={bezierSmoothness:.5};let ES=Kg;const e3=8,Yu=11920929e-14,t3=1;function TS(n,e,t,i,a,l,u,h,f,p){const m=Math.min(.99,Math.max(0,p??ES.defaultOptions.bezierSmoothness));let v=(t3-m)/1;return v*=v,n3(e,t,i,a,l,u,h,f,n,v),n}function n3(n,e,t,i,a,l,u,h,f,p){Jp(n,e,t,i,a,l,u,h,f,p,0),f.push(u,h)}function Jp(n,e,t,i,a,l,u,h,f,p,g){if(g>e3)return;const m=(n+t)/2,v=(e+i)/2,b=(t+a)/2,_=(i+l)/2,M=(a+u)/2,x=(l+h)/2,E=(m+b)/2,C=(v+_)/2,A=(b+M)/2,k=(_+x)/2,z=(E+A)/2,U=(C+k)/2;if(g>0){let O=u-n,B=h-e;const j=Math.abs((t-u)*B-(i-h)*O),I=Math.abs((a-u)*B-(l-h)*O);if(j>Yu&&I>Yu){if((j+I)*(j+I)<=p*(O*O+B*B)){f.push(z,U);return}}else if(j>Yu){if(j*j<=p*(O*O+B*B)){f.push(z,U);return}}else if(I>Yu){if(I*I<=p*(O*O+B*B)){f.push(z,U);return}}else if(O=z-(n+u)/2,B=U-(e+h)/2,O*O+B*B<=p){f.push(z,U);return}}Jp(n,e,m,v,E,C,z,U,f,p,g+1),Jp(z,U,A,k,M,x,u,h,f,p,g+1)}const r3=8,i3=11920929e-14,s3=1;function a3(n,e,t,i,a,l,u,h){const p=Math.min(.99,Math.max(0,h??ES.defaultOptions.bezierSmoothness));let g=(s3-p)/1;return g*=g,o3(e,t,i,a,l,u,n,g),n}function o3(n,e,t,i,a,l,u,h){eg(u,n,e,t,i,a,l,h,0),u.push(a,l)}function eg(n,e,t,i,a,l,u,h,f){if(f>r3)return;const p=(e+i)/2,g=(t+a)/2,m=(i+l)/2,v=(a+u)/2,b=(p+m)/2,_=(g+v)/2;let M=l-e,x=u-t;const E=Math.abs((i-l)*x-(a-u)*M);if(E>i3){if(E*E<=h*(M*M+x*x)){n.push(b,_);return}}else if(M=b-(e+l)/2,x=_-(t+u)/2,M*M+x*x<=h){n.push(b,_);return}eg(n,e,t,p,g,b,_,h,f+1),eg(n,b,_,m,v,l,u,h,f+1)}function MS(n,e,t,i,a,l,u,h){let f=Math.abs(a-l);(!u&&a>l||u&&l>a)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,g=a;p*=u?-1:1;for(let m=0;m<h+1;m++){const v=Math.cos(g),b=Math.sin(g),_=e+v*i,M=t+b*i;n.push(_,M),g+=p}}function l3(n,e,t,i,a,l){const u=n[n.length-2],f=n[n.length-1]-t,p=u-e,g=a-t,m=i-e,v=Math.abs(f*m-p*g);if(v<1e-8||l===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const b=f*f+p*p,_=g*g+m*m,M=f*g+p*m,x=l*Math.sqrt(b)/v,E=l*Math.sqrt(_)/v,C=x*M/b,A=E*M/_,k=x*m+E*p,z=x*g+E*f,U=p*(E+C),O=f*(E+C),B=m*(x+A),j=g*(x+A),I=Math.atan2(O-z,U-k),H=Math.atan2(j-z,B-k);MS(n,k+e,z+t,l,I,H,p*g>m*f)}const Io=Math.PI*2,rp={centerX:0,centerY:0,ang1:0,ang2:0},ip=({x:n,y:e},t,i,a,l,u,h,f)=>{n*=t,e*=i;const p=a*n-l*e,g=l*n+a*e;return f.x=p+u,f.y=g+h,f};function u3(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,a=Math.cos(n),l=Math.sin(n),u=Math.cos(n+e),h=Math.sin(n+e);return[{x:a-l*i,y:l+a*i},{x:u+h*i,y:h-u*i},{x:u,y:h}]}const Bw=(n,e,t,i)=>{const a=n*i-e*t<0?-1:1;let l=n*t+e*i;return l>1&&(l=1),l<-1&&(l=-1),a*Math.acos(l)},c3=(n,e,t,i,a,l,u,h,f,p,g,m,v)=>{const b=Math.pow(a,2),_=Math.pow(l,2),M=Math.pow(g,2),x=Math.pow(m,2);let E=b*_-b*x-_*M;E<0&&(E=0),E/=b*x+_*M,E=Math.sqrt(E)*(u===h?-1:1);const C=E*a/l*m,A=E*-l/a*g,k=p*C-f*A+(n+t)/2,z=f*C+p*A+(e+i)/2,U=(g-C)/a,O=(m-A)/l,B=(-g-C)/a,j=(-m-A)/l,I=Bw(1,0,U,O);let H=Bw(U,O,B,j);h===0&&H>0&&(H-=Io),h===1&&H<0&&(H+=Io),v.centerX=k,v.centerY=z,v.ang1=I,v.ang2=H};function h3(n,e,t,i,a,l,u,h=0,f=0,p=0){if(l===0||u===0)return;const g=Math.sin(h*Io/360),m=Math.cos(h*Io/360),v=m*(e-i)/2+g*(t-a)/2,b=-g*(e-i)/2+m*(t-a)/2;if(v===0&&b===0)return;l=Math.abs(l),u=Math.abs(u);const _=Math.pow(v,2)/Math.pow(l,2)+Math.pow(b,2)/Math.pow(u,2);_>1&&(l*=Math.sqrt(_),u*=Math.sqrt(_)),c3(e,t,i,a,l,u,f,p,g,m,v,b,rp);let{ang1:M,ang2:x}=rp;const{centerX:E,centerY:C}=rp;let A=Math.abs(x)/(Io/4);Math.abs(1-A)<1e-7&&(A=1);const k=Math.max(Math.ceil(A),1);x/=k;let z=n[n.length-2],U=n[n.length-1];const O={x:0,y:0};for(let B=0;B<k;B++){const j=u3(M,x),{x:I,y:H}=ip(j[0],l,u,m,g,E,C,O),{x:Q,y:te}=ip(j[1],l,u,m,g,E,C,O),{x:se,y:ae}=ip(j[2],l,u,m,g,E,C,O);TS(n,z,U,I,H,Q,te,se,ae),z=se,U=ae,M+=x}}function f3(n,e,t){const i=(u,h)=>{const f=h.x-u.x,p=h.y-u.y,g=Math.sqrt(f*f+p*p),m=f/g,v=p/g;return{len:g,nx:m,ny:v}},a=(u,h)=>{u===0?n.moveTo(h.x,h.y):n.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){a(u,h),l=h;continue}const p=e[(u+1)%e.length],g=i(h,l),m=i(h,p);if(g.len<1e-4||m.len<1e-4){a(u,h),l=h;continue}let v=Math.asin(g.nx*m.ny-g.ny*m.nx),b=1,_=!1;g.nx*m.nx-g.ny*-m.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,b=-1,_=!0):v>0&&(b=-1,_=!0);const M=v/2;let x,E=Math.abs(Math.cos(M)*f/Math.sin(M));E>Math.min(g.len/2,m.len/2)?(E=Math.min(g.len/2,m.len/2),x=Math.abs(E*Math.sin(M)/Math.cos(M))):x=f;const C=h.x+m.nx*E+-m.ny*x*b,A=h.y+m.ny*E+m.nx*x*b,k=Math.atan2(g.ny,g.nx)+Math.PI/2*b,z=Math.atan2(m.ny,m.nx)-Math.PI/2*b;u===0&&n.moveTo(C+Math.cos(k)*x,A+Math.sin(k)*x),n.arc(C,A,x,k,z,_),l=h}}function d3(n,e,t,i){const a=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],p=f.radius??t;if(p<=0){h===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y);continue}const g=e[h],m=e[(h+2)%u],v=a(g,f);let b;if(v<1e-4)b=f;else{const x=Math.min(v/2,p);b=l(f,g,x/v)}const _=a(m,f);let M;if(_<1e-4)M=f;else{const x=Math.min(_/2,p);M=l(f,m,x/_)}h===0?n.moveTo(b.x,b.y):n.lineTo(b.x,b.y),n.quadraticCurveTo(f.x,f.y,M.x,M.y,i)}}const p3=new lt;class g3{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const i=this._currentPoly.points,a=i[i.length-2],l=i[i.length-1];return(a!==e||l!==t)&&i.push(e,t),this}arc(e,t,i,a,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return MS(h,e,t,i,a,l,u),this}arcTo(e,t,i,a,l){this._ensurePoly();const u=this._currentPoly.points;return l3(u,e,t,i,a,l),this}arcToSvg(e,t,i,a,l,u,h){const f=this._currentPoly.points;return h3(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,i,a,l),this}bezierCurveTo(e,t,i,a,l,u,h){this._ensurePoly();const f=this._currentPoly;return TS(this._currentPoly.points,f.lastX,f.lastY,e,t,i,a,l,u,h),this}quadraticCurveTo(e,t,i,a,l){this._ensurePoly();const u=this._currentPoly;return a3(this._currentPoly.points,u.lastX,u.lastY,e,t,i,a,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const i=this.shapePrimitives,a=i.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&i.length-a>1){let l=null;for(let u=a;u<i.length;u++){const h=i[u];if(h.shape.type==="polygon"){const f=h.shape,p=l?.shape;p&&p.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),i.copyWithin(u,u+1),i.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,a,l){return this.drawShape(new lt(e,t,i,a),l),this}circle(e,t,i,a){return this.drawShape(new Xg(e,t,i),a),this}poly(e,t,i){const a=new Lo(e);return a.closePath=t,this.drawShape(a,i),this}regularPoly(e,t,i,a,l=0,u){a=Math.max(a|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/a,p=[];for(let g=0;g<a;g++){const m=h-g*f;p.push(e+i*Math.cos(m),t+i*Math.sin(m))}return this.poly(p,!0,u),this}roundPoly(e,t,i,a,l,u=0,h){if(a=Math.max(a|0,3),l<=0)return this.regularPoly(e,t,i,a,u);const f=i*Math.sin(Math.PI/a)-.001;l=Math.min(l,f);const p=-1*Math.PI/2+u,g=Math.PI*2/a,m=(a-2)*Math.PI/a/2;for(let v=0;v<a;v++){const b=v*g+p,_=e+i*Math.cos(b),M=t+i*Math.sin(b),x=b+Math.PI+m,E=b-Math.PI-m,C=_+l*Math.cos(x),A=M+l*Math.sin(x),k=_+l*Math.cos(E),z=M+l*Math.sin(E);v===0?this.moveTo(C,A):this.lineTo(C,A),this.quadraticCurveTo(_,M,k,z,h)}return this.closePath()}roundShape(e,t,i=!1,a){return e.length<3?this:(i?d3(this,e,t,a):f3(this,e,t),this.closePath())}filletRect(e,t,i,a,l){if(l===0)return this.rect(e,t,i,a);const u=Math.min(i,a)/2,h=Math.min(u,Math.max(-u,l)),f=e+i,p=t+a,g=h<0?-h:0,m=Math.abs(h);return this.moveTo(e,t+m).arcTo(e+g,t+g,e+m,t,m).lineTo(f-m,t).arcTo(f-g,t+g,f,t+m,m).lineTo(f,p-m).arcTo(f-g,p-g,e+i-m,p,m).lineTo(e+m,p).arcTo(e+g,p-g,e,p-m,m).closePath()}chamferRect(e,t,i,a,l,u){if(l<=0)return this.rect(e,t,i,a);const h=Math.min(l,Math.min(i,a)/2),f=e+i,p=t+a,g=[e+h,t,f-h,t,f,t+h,f,p-h,f-h,p,e+h,p,e,p-h,e,t+h];for(let m=g.length-1;m>=2;m-=2)g[m]===g[m-2]&&g[m-1]===g[m-3]&&g.splice(m-1,2);return this.poly(g,!0,u)}ellipse(e,t,i,a,l){return this.drawShape(new Wg(e,t,i,a),l),this}roundRect(e,t,i,a,l,u){return this.drawShape(new Qg(e,t,i,a,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new Lo,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Lo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,a=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=i;i=l.a*i+l.c*a+l.tx,a=l.b*u+l.d*a+l.ty}this._currentPoly.points.push(i,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let i=0;i<t.length;i++){const a=t[i],l=a.shape.getBounds(p3);a.transform?e.addRect(l,a.transform):e.addRect(l)}return e}}class ea{constructor(e,t=!1){this.instructions=[],this.uid=ut("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?LD(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new g3(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,a,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Ut.shared);let f=0,p=0;if(!u||u.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=u.data[2],p=u.data[3];const g=h.x,m=h.y;f=g+(g-f),p=m+(m-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,e,t,i,a,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){const a=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ut.shared);let u=0,h=0;if(!a||a.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=a.data[0],h=a.data[1];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,i]}),this._dirty=!0,this}rect(e,t,i,a,l){return this.instructions.push({action:"rect",data:[e,t,i,a,l]}),this._dirty=!0,this}circle(e,t,i,a){return this.instructions.push({action:"circle",data:[e,t,i,a]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,a,l,u,h){l||(l=a/2);const f=-1*Math.PI/2+u,p=i*2,g=Math.PI*2/p,m=[];for(let v=0;v<p;v++){const b=v%2?l:a,_=v*g+f;m.push(e+b*Math.cos(_),t+b*Math.sin(_))}return this.poly(m,!0,h),this}clone(e=!1){const t=new ea;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const a=this.instructions[i];t.instructions.push({action:a.action,data:a.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,i=e.b,a=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,p=0,g=0,m=0,v=0,b=0,_=0,M=0;for(let x=0;x<this.instructions.length;x++){const E=this.instructions[x],C=E.data;switch(E.action){case"moveTo":case"lineTo":f=C[0],p=C[1],C[0]=t*f+a*p+u,C[1]=i*f+l*p+h;break;case"bezierCurveTo":g=C[0],m=C[1],v=C[2],b=C[3],f=C[4],p=C[5],C[0]=t*g+a*m+u,C[1]=i*g+l*m+h,C[2]=t*v+a*b+u,C[3]=i*v+l*b+h,C[4]=t*f+a*p+u,C[5]=i*f+l*p+h;break;case"quadraticCurveTo":g=C[0],m=C[1],f=C[2],p=C[3],C[0]=t*g+a*m+u,C[1]=i*g+l*m+h,C[2]=t*f+a*p+u,C[3]=i*f+l*p+h;break;case"arcToSvg":f=C[5],p=C[6],_=C[0],M=C[1],C[0]=t*_+a*M,C[1]=i*_+l*M,C[5]=t*f+a*p+u,C[6]=i*f+l*p+h;break;case"circle":C[4]=bo(C[3],e);break;case"rect":C[4]=bo(C[4],e);break;case"ellipse":C[8]=bo(C[8],e);break;case"roundRect":C[5]=bo(C[5],e);break;case"addPath":C[0].transform(e);break;case"poly":C[2]=bo(C[2],e);break;default:We("unknown transform action",E.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}}function bo(n,e){return n?n.prepend(e):e.clone()}function Je(n,e,t){const i=n.getAttribute(e);return i?Number(i):t}function y3(n,e){const t=n.querySelectorAll("defs");for(let i=0;i<t.length;i++){const a=t[i];for(let l=0;l<a.children.length;l++){const u=a.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=m3(u);break;case"radialgradient":e.defs[u.id]=v3();break}}}}function m3(n){const e=Je(n,"x1",0),t=Je(n,"y1",0),i=Je(n,"x2",1),a=Je(n,"y2",0),l=n.getAttribute("gradientUnits")||"objectBoundingBox",u=new ei(e,t,i,a,l==="objectBoundingBox"?"local":"global");for(let h=0;h<n.children.length;h++){const f=n.children[h],p=Je(f,"offset",0),g=Ct.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(p,g)}return u}function v3(n){return We("[SVG Parser] Radial gradients are not yet supported"),new ei(0,0,1,0)}function jw(n){const e=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const zw={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function kS(n,e){const t=n.getAttribute("style"),i={},a={},l={strokeStyle:i,fillStyle:a,useFill:!1,useStroke:!1};for(const u in zw){const h=n.getAttribute(u);h&&Uw(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[p,g]=f.split(":");zw[p]&&Uw(e,l,p,g.trim())}}return{strokeStyle:l.useStroke?i:null,fillStyle:l.useFill?a:null,useFill:l.useFill,useStroke:l.useStroke}}function Uw(n,e,t,i){switch(t){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const a=jw(i);e.strokeStyle.fill=n.defs[a]}else e.strokeStyle.color=Ct.shared.setValue(i).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const a=jw(i);e.fillStyle.fill=n.defs[a]}else e.fillStyle.color=Ct.shared.setValue(i).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(i);break;case"stroke-opacity":e.strokeStyle.alpha=Number(i);break;case"opacity":e.fillStyle.alpha=Number(i),e.strokeStyle.alpha=Number(i);break}}function b3(n,e){if(typeof n=="string"){const u=document.createElement("div");u.innerHTML=n.trim(),n=u.querySelector("svg")}const t={context:e,defs:{},path:new ea};y3(n,t);const i=n.children,{fillStyle:a,strokeStyle:l}=kS(n,t);for(let u=0;u<i.length;u++){const h=i[u];h.nodeName.toLowerCase()!=="defs"&&CS(h,t,a,l)}return e}function CS(n,e,t,i){const a=n.children,{fillStyle:l,strokeStyle:u}=kS(n,e);l&&t?t={...t,...l}:l&&(t=l),u&&i?i={...i,...u}:u&&(i=u);const h=!t&&!i;h&&(t={color:0});let f,p,g,m,v,b,_,M,x,E,C,A,k,z,U,O,B;switch(n.nodeName.toLowerCase()){case"path":z=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&We("SVG Evenodd fill rule not supported, your svg may render incorrectly"),U=new ea(z,!0),e.context.path(U),t&&e.context.fill(t),i&&e.context.stroke(i);break;case"circle":_=Je(n,"cx",0),M=Je(n,"cy",0),x=Je(n,"r",0),e.context.ellipse(_,M,x,x),t&&e.context.fill(t),i&&e.context.stroke(i);break;case"rect":f=Je(n,"x",0),p=Je(n,"y",0),O=Je(n,"width",0),B=Je(n,"height",0),E=Je(n,"rx",0),C=Je(n,"ry",0),E||C?e.context.roundRect(f,p,O,B,E||C):e.context.rect(f,p,O,B),t&&e.context.fill(t),i&&e.context.stroke(i);break;case"ellipse":_=Je(n,"cx",0),M=Je(n,"cy",0),E=Je(n,"rx",0),C=Je(n,"ry",0),e.context.beginPath(),e.context.ellipse(_,M,E,C),t&&e.context.fill(t),i&&e.context.stroke(i);break;case"line":g=Je(n,"x1",0),m=Je(n,"y1",0),v=Je(n,"x2",0),b=Je(n,"y2",0),e.context.beginPath(),e.context.moveTo(g,m),e.context.lineTo(v,b),i&&e.context.stroke(i);break;case"polygon":k=n.getAttribute("points"),A=k.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(A,!0),t&&e.context.fill(t),i&&e.context.stroke(i);break;case"polyline":k=n.getAttribute("points"),A=k.match(/\d+/g).map(j=>parseInt(j,10)),e.context.poly(A,!1),i&&e.context.stroke(i);break;case"g":case"svg":break;default:{We(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}h&&(t=null);for(let j=0;j<a.length;j++)CS(a[j],e,t,i)}function _3(n){return Ct.isColorLike(n)}function Lw(n){return n instanceof Cc}function Iw(n){return n instanceof ei}function w3(n){return n instanceof Pe}function x3(n,e,t){const i=Ct.shared.setValue(e??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?t.alpha:i.alpha,n.texture=Pe.WHITE,{...t,...n}}function S3(n,e,t){return n.texture=e,{...t,...n}}function Nw(n,e,t){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...t,...n}}function qw(n,e,t){return e.buildGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,n.textureSpace=e.textureSpace,{...t,...n}}function A3(n,e){const t={...e,...n},i=Ct.shared.setValue(t.color);return t.alpha*=i.alpha,t.color=i.toNumber(),t}function Ui(n,e){if(n==null)return null;const t={},i=n;return _3(n)?x3(t,n,e):w3(n)?S3(t,n,e):Lw(n)?Nw(t,n,e):Iw(n)?qw(t,n,e):i.fill&&Lw(i.fill)?Nw(i,i.fill,e):i.fill&&Iw(i.fill)?qw(i,i.fill,e):A3(i,e)}function yc(n,e){const{width:t,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...f}=e,p=Ui(n,f);return p?{width:t,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...p}:null}const E3=new Ut,Gw=new De,Zg=class $n extends Xn{constructor(){super(...arguments),this.uid=ut("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ea,this._transform=new De,this._fillStyle={...$n.defaultFillStyle},this._strokeStyle={...$n.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bn,this._boundsDirty=!0}clone(){const e=new $n;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ui(e,$n.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=yc(e,$n.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ui(e,$n.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ui(e,$n.defaultStrokeStyle),this}texture(e,t,i,a,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:a||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?Ct.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ea,this}fill(e,t){let i;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a&&a.action==="stroke"?i=a.data.path:i=this._activePath.clone(),i?(e!=null&&(t!==void 0&&typeof e=="number"&&(it(zt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Ui(e,$n.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ut.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=yc(e,$n.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,a,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,i,a,l,u),this}arcTo(e,t,i,a,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}arcToSvg(e,t,i,a,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,i,a,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,i,a,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*i+f.c*a+f.tx,f.b*i+f.d*a+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,i,a){return this._tick++,this._activePath.ellipse(e,t,i,a,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;const i=this._transform,a=this._activePath.instructions,l=i.a*e+i.c*t+i.tx,u=i.b*e+i.d*t+i.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=l,a[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,i,a,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}rect(e,t,i,a){return this._tick++,this._activePath.rect(e,t,i,a,this._transform.clone()),this}roundRect(e,t,i,a,l){return this._tick++,this._activePath.roundRect(e,t,i,a,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,a,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,i,a,l,u),this}roundPoly(e,t,i,a,l,u){return this._tick++,this._activePath.roundPoly(e,t,i,a,l,u),this}roundShape(e,t,i,a){return this._tick++,this._activePath.roundShape(e,t,i,a),this}filletRect(e,t,i,a,l){return this._tick++,this._activePath.filletRect(e,t,i,a,l),this}chamferRect(e,t,i,a,l,u){return this._tick++,this._activePath.chamferRect(e,t,i,a,l,u),this}star(e,t,i,a,l=0,u=0){return this._tick++,this._activePath.star(e,t,i,a,l,u,this._transform.clone()),this}svg(e){return this._tick++,b3(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,a,l,u){return e instanceof De?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,a,l,u),this)}transform(e,t,i,a,l,u){return e instanceof De?(this._transform.append(e),this):(Gw.set(e,t,i,a,l,u),this._transform.append(Gw),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const i=this.instructions[t],a=i.action;if(a==="fill"){const l=i.data;e.addBounds(l.path.bounds)}else if(a==="texture"){const l=i.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(a==="stroke"){const l=i.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let i=!1;for(let a=0;a<t.length;a++){const l=t[a],u=l.data,h=u.path;if(!l.action||!h)continue;const f=u.style,p=h.shapePath.shapePrimitives;for(let g=0;g<p.length;g++){const m=p[g].shape;if(!f||!m)continue;const v=p[g].transform,b=v?v.applyInverse(e,E3):e;if(l.action==="fill")i=m.contains(b.x,b.y);else{const M=f;i=m.strokeContains(b.x,b.y,M.width,M.alignment)}const _=u.hole;if(_){const M=_.shapePath?.shapePrimitives;if(M)for(let x=0;x<M.length;x++)M[x].shape.contains(b.x,b.y)&&(i=!1)}if(i)return!0}}return i}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const i=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Zg.defaultFillStyle={color:16777215,alpha:1,texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local"};Zg.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ji=Zg;const Hw=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function T3(n){const e=[];let t=0;for(let i=0;i<Hw.length;i++){const a=`_${Hw[i]}`;e[t++]=n[a]}return t=RS(n._fill,e,t),t=M3(n._stroke,e,t),t=k3(n.dropShadow,e,t),e.join("-")}function RS(n,e,t){return n&&(e[t++]=n.color,e[t++]=n.alpha,e[t++]=n.fill?.styleKey),t}function M3(n,e,t){return n&&(t=RS(n,e,t),e[t++]=n.width,e[t++]=n.alignment,e[t++]=n.cap,e[t++]=n.join,e[t++]=n.miterLimit),t}function k3(n,e,t){return n&&(e[t++]=n.alpha,e[t++]=n.angle,e[t++]=n.blur,e[t++]=n.distance,e[t++]=Ct.shared.setValue(n.color).toNumber()),t}const Jg=class Fs extends Xn{constructor(e={}){super(),C3(e);const t={...Fs.defaultTextStyle,...e};for(const i in t){const a=i;this[a]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Fs.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Fs.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...ji.defaultFillStyle,...e},()=>{this._fill=Ui({...this._originalFill},ji.defaultFillStyle)})),this._fill=Ui(e===0?"black":e,ji.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...ji.defaultStrokeStyle,...e},()=>{this._stroke=yc({...this._originalStroke},ji.defaultStrokeStyle)})),this._stroke=yc(e,ji.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=T3(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=Fs.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Fs({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const i=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(i),this._originalFill?.texture&&this._originalFill.texture.destroy(i),this._stroke?.texture&&this._stroke.texture.destroy(i),this._originalStroke?.texture&&this._originalStroke.texture.destroy(i)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(i,a,l)=>(i[a]=l,t?.(a,l),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Ct.isColorLike(e)||e instanceof ei||e instanceof Cc)}};Jg.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Jg.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Jo=Jg;function C3(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Jo.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){it(zt,"strokeThickness is now a part of stroke");const t=e.stroke;let i={};if(Ct.isColorLike(t))i.color=t;else if(t instanceof ei||t instanceof Cc)i.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))i=t;else throw new Error("Invalid stroke value.");n.stroke={...i,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){it(zt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let t;n.fontSize==null?n.fontSize=Jo.defaultTextStyle.fontSize:typeof n.fontSize=="string"?t=parseInt(n.fontSize,10):t=n.fontSize;const i=new ei({start:{x:0,y:0},end:{x:0,y:(t||0)*1.7}}),a=e.fillGradientStops.map(l=>Ct.shared.setValue(l).toNumber());a.forEach((l,u)=>{const h=u/(a.length-1);i.addColorStop(h,l)}),n.fill={fill:i}}}class R3{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const i=dt.get().createCanvas();i.width=e,i.height=t;const a=i.getContext("2d");return{canvas:i,context:a}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),e=pc(e),t=pc(t);const a=(e<<17)+(t<<1);this._canvasPool[a]||(this._canvasPool[a]=[]);let l=this._canvasPool[a].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:i,height:a}=t,l=(i<<17)+(a<<1);e.context.clearRect(0,0,i,a),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const $w=new R3,O3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function tg(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let a=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&!O3.includes(a)&&(a=`"${a}"`),t[i]=a}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const sp={willReadFrequently:!0},jn=class ye{static get experimentalLetterSpacingSupported(){let e=ye._experimentalLetterSpacingSupported;if(e!==void 0){const t=dt.get().getCanvasRenderingContext2D().prototype;e=ye._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,a,l,u,h,f,p){this.text=e,this.style=t,this.width=i,this.height=a,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=p}static measureText(e=" ",t,i=ye._canvas,a=t.wordWrap){const l=`${e}:${t.styleKey}`;if(ye._measurementCache[l])return ye._measurementCache[l];const u=tg(t),h=ye.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=ye.__context;f.font=u;const g=(a?ye._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),m=new Array(g.length);let v=0;for(let C=0;C<g.length;C++){const A=ye._measureText(g[C],t.letterSpacing,f);m[C]=A,v=Math.max(v,A)}const b=t._stroke?.width||0;let _=v+b;t.dropShadow&&(_+=t.dropShadow.distance);const M=t.lineHeight||h.fontSize;let x=Math.max(M,h.fontSize+b)+(g.length-1)*(M+t.leading);return t.dropShadow&&(x+=t.dropShadow.distance),new ye(e,t,_,x,g,m,M+t.leading,v,h)}static _measureText(e,t,i){let a=!1;ye.experimentalLetterSpacingSupported&&(ye.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,a=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const l=i.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(a)u-=t,p-=t;else{const g=(ye.graphemeSegmenter(e).length-1)*t;u+=g,p+=g}return Math.max(u,p)}static _wordWrap(e,t,i=ye._canvas){const a=i.getContext("2d",sp);let l=0,u="",h="";const f=Object.create(null),{letterSpacing:p,whiteSpace:g}=t,m=ye._collapseSpaces(g),v=ye._collapseNewlines(g);let b=!m;const _=t.wordWrapWidth+p,M=ye._tokenize(e);for(let x=0;x<M.length;x++){let E=M[x];if(ye._isNewline(E)){if(!v){h+=ye._addLine(u),b=!m,u="",l=0;continue}E=" "}if(m){const A=ye.isBreakingSpace(E),k=ye.isBreakingSpace(u[u.length-1]);if(A&&k)continue}const C=ye._getFromCache(E,p,f,a);if(C>_)if(u!==""&&(h+=ye._addLine(u),u="",l=0),ye.canBreakWords(E,t.breakWords)){const A=ye.wordWrapSplit(E);for(let k=0;k<A.length;k++){let z=A[k],U=z,O=1;for(;A[k+O];){const j=A[k+O];if(!ye.canBreakChars(U,j,E,k,t.breakWords))z+=j;else break;U=j,O++}k+=O-1;const B=ye._getFromCache(z,p,f,a);B+l>_&&(h+=ye._addLine(u),b=!1,u="",l=0),u+=z,l+=B}}else{u.length>0&&(h+=ye._addLine(u),u="",l=0);const A=x===M.length-1;h+=ye._addLine(E,!A),b=!1,u="",l=0}else C+l>_&&(b=!1,h+=ye._addLine(u),u="",l=0),(u.length>0||!ye.isBreakingSpace(E)||b)&&(u+=E,l+=C)}return h+=ye._addLine(u,!1),h}static _addLine(e,t=!0){return e=ye._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,a){let l=i[e];return typeof l!="number"&&(l=ye._measureText(e,t,a)+t,i[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!ye.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ye._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ye._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let a=0;a<e.length;a++){const l=e[a],u=e[a+1];if(ye.isBreakingSpace(l,u)||ye._isNewline(l)){i!==""&&(t.push(i),i=""),t.push(l);continue}i+=l}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,a,l){return!0}static wordWrapSplit(e){return ye.graphemeSegmenter(e)}static measureFont(e){if(ye._fonts[e])return ye._fonts[e];const t=ye._context;t.font=e;const i=t.measureText(ye.METRICS_STRING+ye.BASELINE_SYMBOL),a={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return ye._fonts[e]=a,a}static clearMetrics(e=""){e?delete ye._fonts[e]:ye._fonts={}}static get _canvas(){if(!ye.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",sp)?.measureText)return ye.__canvas=t,t;e=dt.get().createCanvas()}catch{e=dt.get().createCanvas()}e.width=e.height=10,ye.__canvas=e}return ye.__canvas}static get _context(){return ye.__context||(ye.__context=ye._canvas.getContext("2d",sp)),ye.__context}};jn.METRICS_STRING="|ÉqÅ";jn.BASELINE_SYMBOL="M";jn.BASELINE_MULTIPLIER=1.4;jn.HEIGHT_MULTIPLIER=2;jn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})();jn.experimentalLetterSpacing=!1;jn._fonts={};jn._newlines=[10,13];jn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];jn._measurementCache={};let Fw=jn;const Vw=1e5;function Yw(n,e,t,i=0){if(n.texture===Pe.WHITE&&!n.fill)return Ct.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Cc){const a=n.fill,l=e.createPattern(a.texture.source.resource,"repeat"),u=a.transform.copyTo(De.shared);return u.scale(a.texture.frame.width,a.texture.frame.height),l.setTransform(u),l}else if(n.fill instanceof ei){const a=n.fill,l=a.type==="linear",u=a.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+i,f=t.height+i);let p,g=!1;if(l){const{start:m,end:v}=a;p=e.createLinearGradient(m.x*h,m.y*f,v.x*h,v.y*f),g=Math.abs(v.x-m.x)<Math.abs((v.y-m.y)*.1)}else{const{center:m,innerRadius:v,outerCenter:b,outerRadius:_}=a;p=e.createRadialGradient(m.x*h,m.y*f,v*h,b.x*h,b.y*f,_*h)}if(g&&u&&t){const m=t.lineHeight/f;for(let v=0;v<t.lines.length;v++){const b=(v*t.lineHeight+i/2)/f;a.colorStops.forEach(_=>{const M=b+_.offset*m;p.addColorStop(Math.floor(M*Vw)/Vw,Ct.shared.setValue(_.color).toHex())})}}else a.colorStops.forEach(m=>{p.addColorStop(m.offset,Ct.shared.setValue(m.color).toHex())});return p}}else{const a=e.createPattern(n.texture.source.resource,"repeat"),l=n.matrix.copyTo(De.shared);return l.scale(n.texture.frame.width,n.texture.frame.height),a.setTransform(l),a}return We("FillStyle not recognised",n),"red"}function OS(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const e=[];for(let t=0,i=n.length;t<i;t++){const a=n[t];if(Array.isArray(a)){if(a.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${a.length}.`);if(a[0].length===0||a[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=a[0].charCodeAt(0),u=a[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(a))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const PS=class DS extends hS{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...DS.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const i=t.style.clone();t.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=Pe.WHITE,i._fill.fill=null),this.applyFillAsTint=t.overrideFill;const a=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const l=tg(i);t.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/a):i.fontSize=this.baseRenderedFontSize=a,this._style=i,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,this.fontMetrics=Fw.measureFont(l),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(e){const t=OS(e).filter(x=>!this._currentChars.includes(x)).filter((x,E,C)=>C.indexOf(x)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:a,context:l}=i.canvasAndContext,u=i.texture.source;const h=this._style;let f=this._currentX,p=this._currentY;const g=this.baseRenderedFontSize/this.baseMeasurementFontSize,m=this._padding*g;let v=0,b=!1;const _=a.width/this.resolution,M=a.height/this.resolution;for(let x=0;x<t.length;x++){const E=t[x],C=Fw.measureText(E,h,a,!1);C.lineHeight=C.height;const A=C.width*g,k=Math.ceil((h.fontStyle==="italic"?2:1)*A),z=C.height*g,U=k+m*2,O=z+m*2;if(b=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(b=!0,v=Math.ceil(Math.max(O,v))),f+U>_&&(p+=v,v=O,f=0,p+v>M)){u.update();const j=this._nextPage();a=j.canvasAndContext.canvas,l=j.canvasAndContext.context,u=j.texture.source,p=0}const B=A/g-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:B,kerning:{}},b){this._drawGlyph(l,C,f+m,p+m,g,h);const j=u.width*g,I=u.height*g,H=new lt(f/j*u.width,p/I*u.height,U/j*u.width,O/I*u.height);this.chars[E].texture=new Pe({source:u,frame:H}),f+=Math.ceil(U)}}u.update(),this._currentX=f,this._currentY=p,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return it(zt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const i=this._measureCache;for(let a=0;a<e.length;a++){const l=e[a];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=i[l];f||(f=i[l]=t.measureText(l).width);let p=i[h];p||(p=i[h]=t.measureText(h).width);let g=t.measureText(l+h).width,m=g-(f+p);m&&(this.chars[l].kerning[h]=m),g=t.measureText(l+h).width,m=g-(f+p),m&&(this.chars[h].kerning[l]=m)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=$w.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),a=new Pe({source:new Hi({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),l={canvasAndContext:t,texture:a};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,i){t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=tg(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const a=t._stroke,l=a?.width??0;if(a&&(e.lineWidth=l,e.lineJoin=a.join,e.miterLimit=a.miterLimit,e.strokeStyle=Yw(a,e)),t._fill&&(e.fillStyle=Yw(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=Ct.shared.setValue(u.color).toArray(),f=u.blur*i,p=u.distance*i;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,a,l,u){const h=t.text,f=t.fontProperties,g=(u._stroke?.width??0)*l,m=i+g/2,v=a-g/2,b=f.descent*l,_=t.lineHeight*l;u.stroke&&g&&e.strokeText(h,m,v+_-b),u._fill&&e.fillText(h,m,v+_-b)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:i}=this.pages[e];$w.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};PS.defaultOptions={textureSize:512,style:new Jo,mipmap:!0};let Xw=PS;function P3(n,e,t,i){const a={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};a.offsetY=t.baseLineOffset;let l=a.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},p=_=>{const M=l.width;for(let x=0;x<f.index;x++){const E=_.positions[x];l.chars.push(_.chars[x]),l.charPositions.push(E+M)}l.width+=_.width,h=!1,f.width=0,f.index=0,f.chars.length=0},g=()=>{let _=l.chars.length-1;if(i){let M=l.chars[_];for(;M===" ";)l.width-=t.chars[M].xAdvance,M=l.chars[--_]}a.width=Math.max(a.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,a.lines.push(l),a.height+=t.lineHeight},m=t.baseMeasurementFontSize/e.fontSize,v=e.letterSpacing*m,b=e.wordWrapWidth*m;for(let _=0;_<n.length+1;_++){let M;const x=_===n.length;x||(M=n[_]);const E=t.chars[M]||t.chars[" "];if(/(?:\s)/.test(M)||M==="\r"||M===`
`||x){if(!h&&e.wordWrap&&l.width+f.width-v>b?(g(),p(f),x||l.charPositions.push(0)):(f.start=l.width,p(f),x||l.charPositions.push(0)),M==="\r"||M===`
`)l.width!==0&&g();else if(!x){const z=E.xAdvance+(E.kerning[u]||0)+v;l.width+=z,l.spaceWidth=z,l.spacesIndex.push(l.charPositions.length),l.chars.push(M)}}else{const k=E.kerning[u]||0,z=E.xAdvance+k+v;f.positions[f.index++]=f.width+k,f.chars.push(M),f.width+=z}u=M}return g(),e.align==="center"?D3(a):e.align==="right"?B3(a):e.align==="justify"&&j3(a),a}function D3(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],i=n.width/2-t.width/2;for(let a=0;a<t.charPositions.length;a++)t.charPositions[a]+=i}}function B3(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],i=n.width-t.width;for(let a=0;a<t.charPositions.length;a++)t.charPositions[a]+=i}}function j3(n){const e=n.width;for(let t=0;t<n.lines.length;t++){const i=n.lines[t];let a=0,l=i.spacesIndex[a++],u=0;const h=i.spacesIndex.length,p=(e-i.width)/h;for(let g=0;g<i.charPositions.length;g++)g===l&&(l=i.spacesIndex[a++],u+=p),i.charPositions[g]+=u}}let Xu=0;class z3{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(e,t){let i=`${t.fontFamily}-bitmap`,a=!0;if(t._fill.fill&&!t._stroke)i+=t._fill.fill.styleKey,a=!1;else if(t._stroke||t.dropShadow){let u=t.styleKey;u=u.substring(0,u.lastIndexOf("-")),i=`${u}-bitmap`,a=!1}if(!tt.has(i)){const u=new Xw({style:t,overrideFill:a,overrideSize:!0,...this.defaultOptions});Xu++,Xu>50&&We("BitmapText",`You have dynamically created ${Xu} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),u.once("destroy",()=>{Xu--,tt.remove(i)}),tt.set(i,u)}const l=tt.get(i);return l.ensureCharacters?.(e),l}getLayout(e,t,i=!0){const a=this.getFont(e,t);return P3([...e],t,a,i)}measureText(e,t,i=!0){return this.getLayout(e,t,i)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},it(zt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=t?.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const a=t.style,l=a instanceof Jo?a:new Jo(a),u=l._fill.fill!==null&&l._fill.fill!==void 0,h=new Xw({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1}),f=OS(t.chars);return h.ensureCharacters(f.join("")),tt.set(`${i}-bitmap`,h),h.once("destroy",()=>tt.remove(`${i}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,i=tt.get(t);i&&i.destroy()}}const Ww=new z3;class BS extends hS{constructor(e,t){super();const{textures:i,data:a}=e;Object.keys(a.pages).forEach(l=>{const u=a.pages[parseInt(l,10)],h=i[u.id];this.pages.push({texture:h})}),Object.keys(a.chars).forEach(l=>{const u=a.chars[l],{frame:h,source:f}=i[u.page],p=new lt(u.x+h.x,u.y+h.y,u.width,u.height),g=new Pe({source:f,frame:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:g}}),this.baseRenderedFontSize=a.fontSize,this.baseMeasurementFontSize=a.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:a.fontSize},this.baseLineOffset=a.baseLineOffset,this.lineHeight=a.lineHeight,this.fontFamily=a.fontFamily,this.distanceField=a.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Ww.install(e)}static uninstall(e){Ww.uninstall(e)}}const ap={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const e=n.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const m in e){const v=e[m].match(/^[a-z]+/gm)[0],b=e[m].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_={};for(const M in b){const x=b[M].split("="),E=x[0],C=x[1].replace(/"/gm,""),A=parseFloat(C),k=isNaN(A)?C:A;_[E]=k}t[v].push(_)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[a]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(i.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),i.fontSize=parseInt(a.size,10),i.fontFamily=a.face,i.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let m=0;m<h.length;m++)i.pages.push({id:parseInt(h[m].id,10)||0,file:h[m].file});const f={};i.baseLineOffset=i.lineHeight-parseInt(l.base,10);const p=t.char;for(let m=0;m<p.length;m++){const v=p[m],b=parseInt(v.id,10);let _=v.letter??v.char??String.fromCharCode(b);_==="space"&&(_=" "),f[b]=_,i.chars[_]={id:b,page:parseInt(v.page,10)||0,x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xOffset:parseInt(v.xoffset,10),yOffset:parseInt(v.yoffset,10),xAdvance:parseInt(v.xadvance,10),kerning:{}}}const g=t.kerning||[];for(let m=0;m<g.length;m++){const v=parseInt(g[m].first,10),b=parseInt(g[m].second,10),_=parseInt(g[m].amount,10);i.chars[f[b]].kerning[f[v]]=_}return i}},Qw={test(n){const e=n;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],a=n.getElementsByTagName("distanceField")[0];a&&(e.distanceField={type:a.getAttribute("fieldType"),range:parseInt(a.getAttribute("distanceRange"),10)});const l=n.getElementsByTagName("page"),u=n.getElementsByTagName("char"),h=n.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(i.getAttribute("base"),10);for(let p=0;p<u.length;p++){const g=u[p],m=parseInt(g.getAttribute("id"),10);let v=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(m);v==="space"&&(v=" "),f[m]=v,e.chars[v]={id:m,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const g=parseInt(h[p].getAttribute("first"),10),m=parseInt(h[p].getAttribute("second"),10),v=parseInt(h[p].getAttribute("amount"),10);e.chars[f[m]].kerning[f[g]]=v}return e}},Kw={test(n){return typeof n=="string"&&n.includes("<font>")?Qw.test(dt.get().parseXML(n)):!1},parse(n){return Qw.parse(dt.get().parseXML(n))}},U3=[".xml",".fnt"],L3={extension:{type:be.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof BS,getCacheableAssets(n,e){const t={};return n.forEach(i=>{t[i]=e,t[`${i}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},I3={extension:{type:be.LoadParser,priority:ni.Normal},name:"loadBitmapFont",test(n){return U3.includes(on.extname(n).toLowerCase())},async testParse(n){return ap.test(n)||Kw.test(n)},async parse(n,e,t){const i=ap.test(n)?ap.parse(n):Kw.parse(n),{src:a}=e,{pages:l}=i,u=[],h=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let m=0;m<l.length;++m){const v=l[m].file;let b=on.join(on.dirname(a),v);b=Vp(b,a),u.push({src:b,data:h})}const f=await t.load(u),p=u.map(m=>f[m.src]);return new BS({data:i,textures:p},a)},async load(n,e){return await(await dt.get().fetch(n)).text()},async unload(n,e,t){await Promise.all(n.pages.map(i=>t.unload(i.texture.source._sourceOrigin))),n.destroy()}};class N3{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const q3={extension:{type:be.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(e=>e instanceof Pe),getCacheableAssets:(n,e)=>{const t={};return n.forEach(i=>{e.forEach((a,l)=>{t[i+(l===0?"":l+1)]=a})}),t}};async function jS(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const G3={extension:{type:be.DetectionParser,priority:1},test:async()=>jS("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},Zw=["png","jpg","jpeg"],H3={extension:{type:be.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Zw],remove:async n=>n.filter(e=>!Zw.includes(e))},$3="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ey(n){return $3?!1:document.createElement("video").canPlayType(n)!==""}const F3={extension:{type:be.DetectionParser,priority:0},test:async()=>ey("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},V3={extension:{type:be.DetectionParser,priority:0},test:async()=>ey("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},Y3={extension:{type:be.DetectionParser,priority:0},test:async()=>ey("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},X3={extension:{type:be.DetectionParser,priority:0},test:async()=>jS("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};class W3{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{let a=null,l=null;if(t.loadParser&&(l=this._parserHash[t.loadParser],l||We(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!l){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(e,t,this)){l=h;break}}if(!l)return We(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await l.load(e,t,this),i.parser=l;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(a,t,this)&&(a=await h.parse(a,t,this)||a,i.parser=h)}return a})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const a={},l=gc(e),u=Pn(e,p=>({alias:[p],src:p,data:{}})),h=u.length,f=u.map(async p=>{const g=on.toAbsolute(p.src);if(!a[p.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,p)),a[p.src]=await this.promiseCache[g].promise,t&&t(++i/h)}catch(m){throw delete this.promiseCache[g],delete a[p.src],new Error(`[Loader.load] Failed to load ${g}.
${m}`)}});return await Promise.all(f),l?a[u[0].src]:a}async unload(e){const i=Pn(e,a=>({alias:[a],src:a})).map(async a=>{const l=on.toAbsolute(a.src),u=this.promiseCache[l];if(u){const h=await u.promise;delete this.promiseCache[l],await u.parser?.unload?.(h,a,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name?e[t.name]&&We(`[Assets] loadParser name conflict "${t.name}"`):We("[Assets] loadParser should have a name"),{...e,[t.name]:t}),{})}}function oa(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function la(n,e){const t=n.split("?")[0],i=on.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const Q3=".json",K3="application/json",Z3={extension:{type:be.LoadParser,priority:ni.Low},name:"loadJson",test(n){return oa(n,K3)||la(n,Q3)},async load(n){return await(await dt.get().fetch(n)).json()}},J3=".txt",ej="text/plain",tj={name:"loadTxt",extension:{type:be.LoadParser,priority:ni.Low,name:"loadTxt"},test(n){return oa(n,ej)||la(n,J3)},async load(n){return await(await dt.get().fetch(n)).text()}},nj=["normal","bold","100","200","300","400","500","600","700","800","900"],rj=[".ttf",".otf",".woff",".woff2"],ij=["font/ttf","font/otf","font/woff","font/woff2"],sj=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function aj(n){const e=on.extname(n),a=on.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=a.length>0;for(const h of a)if(!h.match(sj)){l=!1;break}let u=a.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const oj=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function lj(n){return oj.test(n)?n:encodeURI(n)}const uj={extension:{type:be.LoadParser,priority:ni.Low},name:"loadWebFont",test(n){return oa(n,ij)||la(n,rj)},async load(n,e){const t=dt.get().getFontFaceSet();if(t){const i=[],a=e.data?.family??aj(n),l=e.data?.weights?.filter(h=>nj.includes(h))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const f=l[h],p=new FontFace(a,`url(${lj(n)})`,{...u,weight:f});await p.load(),t.add(p),i.push(p)}return tt.set(`${a}-and-url`,{url:n,fontFaces:i}),i.length===1?i[0]:i}return We("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>{tt.remove(`${e.family}-and-url`),dt.get().getFontFaceSet().delete(e)})}};function ty(n,e=1){const t=aa.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}function ny(n,e,t){n.label=t,n._sourceOrigin=t;const i=new Pe({source:n,label:t}),a=()=>{delete e.promiseCache[t],tt.has(t)&&tt.remove(t)};return i.source.once("destroy",()=>{e.promiseCache[t]&&(We("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),a())}),i.once("destroy",()=>{n.destroyed||(We("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),a())}),i}const cj=".svg",hj="image/svg+xml",fj={extension:{type:be.LoadParser,priority:ni.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return oa(n,hj)||la(n,cj)},async load(n,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?pj(n):dj(n,e,t,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function dj(n,e,t,i){const l=await(await dt.get().fetch(n)).blob(),u=URL.createObjectURL(l),h=new Image;h.src=u,h.crossOrigin=i,await h.decode(),URL.revokeObjectURL(u);const f=document.createElement("canvas"),p=f.getContext("2d"),g=e.data?.resolution||ty(n),m=e.data?.width??h.width,v=e.data?.height??h.height;f.width=m*g,f.height=v*g,p.drawImage(h,0,0,m*g,v*g);const{parseAsGraphicsContext:b,..._}=e.data??{},M=new Hi({resource:f,alphaMode:"premultiply-alpha-on-upload",resolution:g,..._});return ny(M,t,n)}async function pj(n){const t=await(await dt.get().fetch(n)).text(),i=new ji;return i.svg(t),i}const gj=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Xs=null,ng=class{constructor(){Xs||(Xs=URL.createObjectURL(new Blob([gj],{type:"application/javascript"}))),this.worker=new Worker(Xs)}};ng.revokeObjectURL=function(){Xs&&(URL.revokeObjectURL(Xs),Xs=null)};const yj=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ws=null;class zS{constructor(){Ws||(Ws=URL.createObjectURL(new Blob([yj],{type:"application/javascript"}))),this.worker=new Worker(Ws)}}zS.revokeObjectURL=function(){Ws&&(URL.revokeObjectURL(Ws),Ws=null)};let Jw=0,op;class mj{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new ng;t.addEventListener("message",i=>{t.terminate(),ng.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){op===void 0&&(op=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<op&&(this._createdWorkers++,e=new zS().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((a,l)=>{this._queue.push({id:e,arguments:t,resolve:a,reject:l})});return this._next(),i}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),i=t.id;this._resolveHash[Jw]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Jw++,id:i})}}const ex=new mj,vj=[".jpeg",".jpg",".png",".webp",".avif"],bj=["image/jpeg","image/png","image/webp","image/avif"];async function _j(n,e){const t=await dt.get().fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const i=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const US={name:"loadTextures",extension:{type:be.LoadParser,priority:ni.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return oa(n,bj)||la(n,vj)},async load(n,e,t){let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ex.isImageBitmapSupported()?i=await ex.loadImageBitmap(n,e):i=await _j(n,e):i=await new Promise((l,u)=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?l(i):(i.onload=()=>{l(i)},i.onerror=u)});const a=new Hi({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||ty(n),...e.data});return ny(a,t,n)},unload(n){n.destroy(!0)}},LS=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],wj=LS.map(n=>`video/${n.substring(1)}`);function xj(n,e,t){t===void 0&&!e.startsWith("data:")?n.crossOrigin=Aj(e):t!==!1&&(n.crossOrigin=typeof t=="string"?t:"anonymous")}function Sj(n){return new Promise((e,t)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",a),n.load();function i(){l(),e()}function a(u){l(),t(u)}function l(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",a)}})}function Aj(n,e=globalThis.location){if(n.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}const Ej={name:"loadVideo",extension:{type:be.LoadParser,name:"loadVideo"},test(n){const e=oa(n,wj),t=la(n,LS);return e||t},async load(n,e,t){const i={...Ju.defaultOptions,resolution:e.data?.resolution||ty(n),alphaMode:e.data?.alphaMode||await Z1(),...e.data},a=document.createElement("video"),l={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(l).forEach(f=>{const p=l[f];p!==void 0&&a.setAttribute(f,p)}),i.muted===!0&&(a.muted=!0),xj(a,n,i.crossorigin);const u=document.createElement("source");let h;if(n.startsWith("data:"))h=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const f=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();h=Ju.MIME_TYPES[f]||`video/${f}`}return u.src=n,h&&(u.type=h),new Promise(f=>{const p=async()=>{const g=new Ju({...i,resource:a});a.removeEventListener("canplay",p),e.data.preload&&await Sj(a),f(ny(g,t,n))};a.addEventListener("canplay",p),a.appendChild(u)})},unload(n){n.destroy(!0)}},IS={extension:{type:be.ResolveParser,name:"resolveTexture"},test:US.test,parse:n=>({resolution:parseFloat(aa.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},Tj={extension:{type:be.ResolveParser,priority:-2,name:"resolveJson"},test:n=>aa.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:IS.parse};class Mj{constructor(){this._detections=[],this._initialized=!1,this.resolver=new aa,this.loader=new W3,this.cache=tt,this._backgroundLoader=new N3(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){We("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const t=e.texturePreference?.resolution??1,i=typeof t=="number"?[t]:t,a=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:a,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const i=gc(e),a=Pn(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(a),u=await this._mapLoadToResolve(l,t);return i?u[a[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const a=this.resolver.resolveBundle(e),l={},u=Object.keys(a);let h=0,f=0;const p=()=>{t?.(++h/f)},g=u.map(m=>{const v=a[m];return f+=Object.keys(v).length,this._mapLoadToResolve(v,p).then(b=>{l[m]=b})});return await Promise.all(g),i?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return tt.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=tt.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const a=await this.loader.load(i,t);this._backgroundLoader.active=!0;const l={};return i.forEach(u=>{const h=a[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(p=>{l[p]=h}),tt.set(f,h)}),l}async unload(e){this._initialized||await this.init();const t=Pn(e).map(a=>typeof a!="string"?a.src:a),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Pn(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(a=>this._unloadFromResolved(t[a]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{tt.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,a)=>t.indexOf(i)===a),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const Mo=new Mj;Yt.handleByList(be.LoadParser,Mo.loader.parsers).handleByList(be.ResolveParser,Mo.resolver.parsers).handleByList(be.CacheParser,Mo.cache.parsers).handleByList(be.DetectionParser,Mo.detections);Yt.add(q3,H3,G3,X3,F3,V3,Y3,Z3,tj,uj,fj,US,Ej,I3,L3,IS,Tj);const tx={loader:be.LoadParser,resolver:be.ResolveParser,cache:be.CacheParser,detection:be.DetectionParser};Yt.handle(be.Asset,n=>{const e=n.ref;Object.entries(tx).filter(([t])=>!!e[t]).forEach(([t,i])=>Yt.add(Object.assign(e[t],{extension:e[t].extension??i})))},n=>{const e=n.ref;Object.keys(tx).filter(t=>!!e[t]).forEach(t=>Yt.remove(e[t]))});Yt.add(lP,uP);const kj="/editor/assets/sprites-B9UMy6cv.png",qs=(n,e,t)=>{const i=({x:l,y:u,w:h,h:f,pivot:p})=>e==="x"?{...Do(t,{x:-l-h-1,y:u}),w:h,h:f,pivot:{x:h-p.x,y:p.y}}:{...Do(t,{x:l+2,y:u}),w:h,h:f,pivot:p};function*a(){yield[`door.frame.${n}.${e}.whole`,{frame:{...i({x:-41,y:0,w:40,h:64,pivot:{x:9,y:63}})}}],yield[`door.frame.${n}.${e}.far`,{frame:{...i({x:-18,y:0,w:17,h:57,pivot:{x:9,y:52}})}}],yield[`door.frame.${n}.${e}.near`,{frame:{...i({x:-41,y:6,w:20,h:58,pivot:{x:8,y:58}})}}],yield[`door.frame.${n}.${e}.top`,{frame:{...i({x:-57,y:-1,w:15,h:36,pivot:{x:0,y:36.5}})}}]}return Tg(a())},Cj={frames:{...qs("generic","y",{x:580,y:415}),...qs("generic","x",{x:582,y:415}),...qs("moonbase","y",{x:752,y:232}),...qs("moonbase","x",{x:915,y:232}),...qs("moonbase.dark","y",{x:752,y:306}),...qs("moonbase.dark","x",{x:915,y:306})}},ki=(n,{x:e,y:t},i)=>{function*a(){yield[`${n}.left`,{frame:{x:e,y:t,...i}}],yield[`${n}.away`,{frame:{x:e+i.w+1,y:t,...i}}],yield[`${n}.towards`,{frame:{x:e,y:t+i.h+1,...i}}],yield[`${n}.right`,{frame:{x:e+i.w+1,y:t+i.h+1,...i}}]}return Object.fromEntries(a())},et=(n,e,{x:t,y:i},a,l=e)=>{function*u(){for(let h=0;h<e;h++)yield[`${n}.${h+1}`,{frame:{x:t+h%l*(a.w+1),y:i+Math.floor(h/l)*(a.h+1),...a}}]}return Object.fromEntries(u())},nx=(n,{x:e,y:t},i,a=n.length,l)=>{function*u(){for(let h=0;h<n.length;h++)yield[l?`${l}.${n[h]}`:n[h],{frame:{x:e+h%a*(i.w+1),y:t+Math.floor(h/a)*(i.h+1),...i}}]}return Object.fromEntries(u())},Rj=(n,e,t,i)=>({...et(`${n}.left`,e,t,i),...et(`${n}.away`,e,Do(t,{x:(i.w+1)*e}),i),...et(`${n}.towards`,e,Do(t,{y:i.h+1}),i),...et(`${n}.right`,e,Do(t,{x:(i.w+1)*e,y:i.h+1}),i)}),ko=(n,e)=>[...Gx(wk(1,e+1)).map(t=>`${n}.${String(t)}`)],Oj={frames:{...nx(["share","save","pointer","eyedropper"],{x:588,y:0},{w:12,h:12},void 0,"editor.tool"),...nx(["single","corridor","double","triple.line","triple.^","quad.square","quad.s","quad.31","quad.t","5.x"],{x:640,y:0},{w:9,h:9},void 0,"editor.addRoom")}},Pj={" ":"space","'":"singleQuote",":":"colon","<":"lt",">":"gt","`":"backtick"},Dj=n=>Pj[n]??n,rg={w:32,h:16},Rn={w:16,h:56},Me={w:32,h:28},ue={w:24,h:24},lp={w:8,h:8},ce=n=>({x:n.x*(ue.w+1)+1,y:n.y*(ue.h+1)+2}),Re=n=>({x:n.x*(Me.w+1)+1,y:n.y*(Me.h+1)+396}),Bj="",jj="",zj="",Uj="",Lj="󱂩",Ij="",Nj=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_","#","⚡","🛡","♨","🕹",{char:"∞",double:!0},{char:Bj,double:!0},{char:jj,double:!0}],qj=[" ","?","!",".",",",";",":","/","\\","‘","’","'","`","-","+","%","⬅","➡","⬆","⬇","↖","↘","↗","↙","(",")","[","]","<",">","⏩","⁌","⁍","EnterFullscreen","ExitFullscreen","Menu","*","@","©",zj,Uj,Lj,Ij,"•","⇧","^","⌥","⌘","★"],rx=(n,e)=>{function*t(){let{x:i}=e;for(let a=0;a<n.length;a++){const l=n[a],u=typeof l=="string"?l:l.char,f=(typeof l=="string"?!1:l.double)?lp.w*2:lp.w;yield[`hud.char.${Dj(u)}`,{frame:{x:i,y:e.y,...lp,w:f}}],i+=f+1}}return Tg(t())},Gj={frames:{...rx(Nj,{x:126,y:1}),...rx(qj,{x:126,y:10})}},je=(n,e)=>Object.assign([...n],{animationSpeed:e}),Hj={...et("dalek",2,ce({x:0,y:0}),ue),"shadowMask.dalek":{frame:{...ce({x:2,y:0}),...ue}},...et("bubbles.cold",2,ce({x:3,y:0}),ue),...ki("cyberman",ce({x:1,y:1}),ue),...ki("charles",ce({x:3,y:1}),ue),"shadowMask.charles.away":{frame:{...ce({x:5,y:1}),...ue}},"shadowMask.charles.right":{frame:{...ce({x:5,y:2}),...ue}},...ki("elephant",ce({x:6,y:1}),ue),"crown.blacktooth":{frame:{...ce({x:8,y:1}),...ue}},"crown.safari":{frame:{...ce({x:9,y:1}),...ue}},"crown.egyptus":{frame:{...ce({x:10,y:1}),...ue}},"crown.penitentiary":{frame:{...ce({x:11,y:1}),...ue}},"crown.bookworld":{frame:{...ce({x:12,y:1}),...ue}},ball:{frame:{...ce({x:13,y:1}),...ue}},"shadowMask.ball":{frame:{...ce({x:14,y:1}),...ue}},sticks:{frame:{...ce({x:8,y:2}),...ue}},cube:{frame:{...ce({x:9,y:2}),...ue}},drum:{frame:{...ce({x:10,y:2}),...ue}},hooter:{frame:{...ce({x:11,y:2}),...ue}},bag:{frame:{...ce({x:12,y:2}),...ue}},joystick:{frame:{...ce({x:13,y:2}),...ue}},"shadowMask.joystick":{frame:{...ce({x:14,y:2}),...ue}},...Rj("turtle",2,ce({x:0,y:3}),ue),"shadowMask.turtle.away":{frame:{...ce({x:4,y:3}),...ue}},"shadowMask.turtle.right":{frame:{...ce({x:4,y:4}),...ue}},...ki("monkey",ce({x:5,y:3}),ue),...ki("computerBot",ce({x:7,y:3}),ue),"spring.compressed":{frame:{...ce({x:9,y:3}),...ue}},"spring.released":{frame:{...ce({x:10,y:3}),...ue}},"switch.left":{frame:{...ce({x:11,y:3}),...ue}},"switch.right":{frame:{...ce({x:12,y:3}),...ue}},"shadowMask.switch":{frame:{...ce({x:13,y:3}),...ue}},tower:{frame:{...ce({x:14,y:3}),...ue}},"shadowMask.tower":{frame:{...ce({x:15,y:3}),...ue}},scroll:{frame:{...ce({x:9,y:4}),...ue,pivot:{x:17,y:24}}},"shadow.scroll":{frame:{...ce({x:10,y:4}),...ue,pivot:{x:17,y:24}}},"shadowMask.scroll":{frame:{...ce({x:11,y:4}),...ue,pivot:{x:17,y:24}}},"spikyBall.1":{frame:{...ce({x:12,y:4}),...ue}},"spikyBall.2":{frame:{...ce({x:13,y:4}),...ue}},puck:{frame:{...ce({x:14,y:4}),...ue}},"shadow.smallRound":{frame:{...ce({x:15,y:4}),...ue}},"shadowMask.smallRound":{frame:{...ce({x:16,y:4}),...ue}},...et("helicopterBug",4,ce({x:0,y:5}),ue),"barrier.x":{frame:{...ce({x:4,y:5}),...ue,pivot:{x:18,y:23}}},"barrier.y":{frame:{...ce({x:5,y:5}),...ue,pivot:{x:6,y:23}}},"shadow.barrier.y":{frame:{...ce({x:6,y:5}),...ue,pivot:{x:6,y:22}}},"shadowMask.barrier.y":{frame:{...ce({x:7,y:5}),...ue,pivot:{x:6,y:22}}},...et("bubbles.taupe",3,ce({x:8,y:5}),ue),whiteRabbit:{frame:{...ce({x:11,y:5}),...ue}},"shadowMask.whiteRabbit":{frame:{...ce({x:12,y:5}),...ue}},...et("bubbles.white",3,ce({x:13,y:5}),ue),...et("fish",2,ce({x:12,y:6}),ue),doughnuts:{frame:{...ce({x:14,y:6}),...ue}},"shadowMask.doughnuts":{frame:{...ce({x:15,y:6}),...ue}},"lift.static":{frame:{...ce({x:10,y:7}),...ue}},"shadow.smallBlock":{frame:{...ce({x:11,y:7}),...ue}},"shadowMask.smallBlock":{frame:{...ce({x:12,y:7}),...ue}},buttonInGame:{frame:{...ce({x:13,y:7}),...ue}},"buttonInGame.pressed":{frame:{...ce({x:14,y:7}),...ue}},"shadowMask.buttonInGame":{frame:{...ce({x:15,y:7}),...ue}},...et("lift",4,ce({x:10,y:8}),ue),headlessBase:{frame:{...ce({x:14,y:8}),...ue}},...et("headlessBase",4,ce({x:10,y:9}),ue),"headlessBase.all":{frame:{...ce({x:14,y:9}),...ue}},...ki("skiHead.greenAndPink",{x:251,y:252},{w:24,h:32}),...ki("skiHead.starsAndStripes",{x:301,y:252},{w:24,h:32}),"shadowMask.skiHead.away":{frame:{x:351,y:252,w:24,h:32}},"shadowMask.skiHead.right":{frame:{x:351,y:285,w:24,h:32}},"editor.cursor.xz":{frame:{...Re({x:7,y:-2}),...Me}},"editor.cursor.floor":{frame:{...Re({x:7,y:-1}),...Me}},"block.organic":{frame:{...Re({x:0,y:0}),...Me}},"block.organic.disappearing":{frame:{...Re({x:1,y:0}),...Me}},"block.organic.dark":{frame:{...Re({x:2,y:0}),...Me}},"block.organic.dark.disappearing":{frame:{...Re({x:3,y:0}),...Me}},"block.artificial":{frame:{...Re({x:4,y:0}),...Me}},"block.artificial.disappearing":{frame:{...Re({x:5,y:0}),...Me}},"book.x":{frame:{...Re({x:6,y:0}),...Me}},"book.y":{frame:{...Re({x:7,y:0}),...Me}},"shadow.fullBlock":{frame:{...Re({x:8,y:0}),...Me}},"shadowMask.fullBlock":{frame:{...Re({x:9,y:0}),...Me}},stepStool:{frame:{...Re({x:0,y:1}),...Me}},"shadowMask.stepStool":{frame:{...Re({x:1,y:1}),...Me}},"volcano.1":{frame:{...Re({x:2,y:1}),...Me}},"volcano.2":{frame:{...Re({x:3,y:1}),...Me}},"shadowMask.volcano":{frame:{...Re({x:4,y:1}),...Me}},hushPuppy:{frame:{...Re({x:5,y:1}),...Me}},"shadowMask.hushPuppy":{frame:{...Re({x:6,y:1}),...Me}},"toaster.on":{frame:{...Re({x:7,y:1}),...Me}},"toaster.off":{frame:{...Re({x:8,y:1}),...Me}},"shadowMask.toaster":{frame:{...Re({x:9,y:1}),...Me}},sandwich:{frame:{...Re({x:10,y:1}),...Me}},spikes:{frame:{...Re({x:11,y:1}),...Me}},"shadowMask.spikes":{frame:{...Re({x:12,y:1}),...Me}},...et("conveyor.x",7,Re({x:0,y:2}),Me),"shadowMask.conveyor":{frame:{...Re({x:7,y:2}),...Me}},button:{frame:{...Re({x:9,y:2}),...Me}},"button.pressed":{frame:{...Re({x:10,y:2}),...Me}},"button.surfaceMask":{frame:{...Re({x:11,y:2}),...Me}},...et("conveyor.y",7,Re({x:0,y:3}),Me),teleporter:{frame:{...Re({x:7,y:3}),...Me}},...et("teleporter.flashing",2,Re({x:8,y:3}),Me),"shadowMask.teleporter":{frame:{...Re({x:10,y:3}),...Me}},"shadowMask.teleporter.flashing":{frame:{...Re({x:11,y:3}),...Me}},...et("particle",4,{x:331,y:396},{w:9,h:11})},NS={frames:Hj,animations:{"teleporter.flashing":je(["teleporter.flashing.1","teleporter.flashing.2"],.5),fish:je(["fish.1","fish.2"],.25),lift:je(["lift.1","lift.2","lift.3","lift.4"],.5),dalek:je(["dalek.1","dalek.2"],.5),"turtle.left":je(["turtle.left.1","turtle.left.2"],.25),"turtle.away":je(["turtle.away.1","turtle.away.2"],.25),"turtle.towards":je(["turtle.towards.1","turtle.towards.2"],.25),"turtle.right":je(["turtle.right.1","turtle.right.2"],.25),helicopterBug:je(["helicopterBug.1","helicopterBug.2","helicopterBug.3","helicopterBug.4"],.5),"bubbles.cold":je(["bubbles.cold.1","bubbles.cold.2"],.25),"bubbles.white":je(["bubbles.white.1","bubbles.white.2","bubbles.white.3"],.5),"bubbles.bounce.white":je(["bubbles.white.1","bubbles.white.2","bubbles.white.3","bubbles.white.2"],.5),"bubbles.doughnut":je(["bubbles.taupe.1","bubbles.taupe.2"],.5),"conveyor.x":je(ko("conveyor.x",7),.5),"conveyor.y":je(ko("conveyor.y",7),.5),volcano:je(ko("volcano",2),3/16),"spring.bounce":je(["spring.released","spring.compressed","spring.released","spring.compressed","spring.released"],.5),"headlessBase.scan":je(["headlessBase.4","headlessBase","headlessBase.3","headlessBase","headlessBase.2","headlessBase","headlessBase.1","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase.all","headlessBase","headlessBase","headlessBase","headlessBase"],.25),"headlessBase.flash":je(["headlessBase.all","headlessBase"],.5),switch:je(["switch.left","switch.right"],.02),"particle.fade":je(ko("particle",4),.5)}},$j=.5,qS=5e3,Fj=qS*2,_o=(n,e)=>{const t=Math.round(qS/(Mg*4)),i=`head.walking.${n}.${e}`,a=`head.blinking.${n}`,l=[...new Array(t-3).fill(i),a,i,a];return je(l,.5)},up=(n,e)=>{const t=Math.round(Fj/(Mg*4)),i=`heels.walking.${n}.${e}`,a=`heels.blinking.${n}`,l=[...new Array(Math.floor(t*.8)).fill(i),...new Array(Math.ceil(t*.2)).fill(a)];return je(l,.5)},ix=(n,e,t)=>{const i=["awayLeft","away","awayRight","right","towardsRight","towards","towardsLeft","left"];function*a(){for(let l=0;l<zx.length;l++){const u=i[l];for(let h=0;h<=2;h++)yield[`${n}.walking.${u}.${h+1}`,{frame:{...ce({x:e.x+h,y:e.y+l}),...ue}}];yield[`${n}.falling.${u}`,{frame:{...ce({x:e.x+3,y:e.y+l}),...ue}}],t[u]?.noBlinking||(yield[`${n}.blinking.${u}`,{frame:{...ce({x:e.x+4,y:e.y+l}),...ue}}])}}return Object.fromEntries(a())};function sx(n){function*e(t,i){yield`${t}.walking.${i}.1`,yield`${t}.walking.${i}.2`,yield`${t}.walking.${i}.3`,yield`${t}.walking.${i}.2`}return zx.reduce((t,i)=>({...t,[`${n}.walking.${i}`]:je([...e(n,i)],$j)}),{})}const Vj={...et("bubbles.head",6,ce({x:0,y:6}),ue),...ix("head",{x:0,y:7},{awayLeft:{noBlinking:!0},away:{noBlinking:!0},left:{noBlinking:!0}}),...et("bubbles.heels",6,ce({x:6,y:6}),ue),...ix("heels",{x:5,y:7},{awayLeft:{noBlinking:!0},away:{noBlinking:!0},awayRight:{noBlinking:!0},towardsLeft:{noBlinking:!0},left:{noBlinking:!0}}),...et("shine",6,Re({x:8,y:-2}),Me,3),blank:{frame:{...ce({x:0,y:2}),...ue}}},GS={frames:Vj,animations:{...sx("head"),...sx("heels"),"heels.screenDirections":je(["heels.walking.towardsRight.2","heels.walking.towardsLeft.2","heels.walking.awayLeft.2","heels.walking.awayRight.2"],1/16),"heels.worldDirections":je(["heels.walking.towards.2","heels.walking.left.2","heels.walking.away.2","heels.walking.right.2"],1/16),"head.idle.right":_o("right",3),"head.idle.towards":_o("towards",3),"head.idle.towardsRight":_o("towardsRight",2),"head.idle.towardsLeft":_o("towardsLeft",2),"head.idle.awayRight":_o("awayRight",2),"heels.idle.right":up("right",2),"heels.idle.towards":up("towards",2),"heels.idle.towardsRight":up("towardsRight",2),"head.fadeOut":je(["bubbles.head.1","bubbles.head.2","bubbles.head.4","bubbles.head.3","bubbles.head.4","bubbles.head.6","bubbles.head.5","bubbles.head.6","bubbles.head.5"],.5),"heels.fadeOut":je(["bubbles.heels.1","bubbles.heels.2","bubbles.heels.4","bubbles.heels.3","bubbles.heels.4","bubbles.heels.6","bubbles.heels.5","bubbles.heels.6","bubbles.heels.5"],.5),shine:je(ko("shine",6),.5),"shine.headInSymbio":je(["shine.1","shine.2","shine.3","blank","blank","blank","blank","blank","blank","shine.4","shine.5","shine.6"],.5),"shine.heelsInSymbio":je(["blank","blank","blank","shine.1","shine.2","shine.3","shine.4","shine.5","shine.6","blank","blank","blank"],.5)}},HS={jail:["bars"],blacktooth:["plain","shield","armour"],bookworld:["book","cowboy"],egyptus:["hieroglyphics","sarcophagus"],market:["more-fruits","fruits","passage"],moonbase:["coil","window3","window2","window1","window-clear"],penitentiary:["skeleton","loop"],safari:["wall","shield","window"]},Dz=Object.keys(HS),Bz=["blacktooth","penitentiary","bookworld","egyptus","safari"],Dt=(n,e,t,i)=>{function*a(l,u,h){const f=HS[l],{w:p,h:g}=Rn,m=p>>1;for(let v=0;v<f.length;v++)yield[`${l}${i}.wall.${f[v]}.left`,{frame:{x:u-p*(v+1),y:h+m*v,...Rn}}],yield[`${l}${i}.wall.${f[v]}.away`,{frame:{x:u+p*v,y:h+m*v,...Rn}}];yield[`${l}${i}.floor`,{frame:{x:u-p,y:h+g,...rg}}]}return Object.fromEntries(a(n,e,t))},ax={w:16,h:13},ox={w:8,h:9},Gn=74;let Bt=53;const Yj={...Dt("egyptus",834,Bt,""),...Dt("egyptus",834,Bt+=Gn,".dark"),...Dt("moonbase",834,Bt+=Gn,""),...Dt("moonbase",834,Bt+=Gn,".dark"),...Dt("bookworld",834,Bt+=Gn,""),...Dt("bookworld",834,Bt,".dark"),...Dt("jail",834,Bt+=Gn,""),...Dt("jail",834,Bt,".dark"),...Dt("blacktooth",834,Bt+=Gn,""),...Dt("blacktooth",834,Bt+=Gn,".dark"),...Dt("penitentiary",834,Bt+=Gn,""),...Dt("penitentiary",834,Bt,".dark"),...Dt("market",834,Bt+=Gn,""),...Dt("market",834,Bt,".dark"),...Dt("safari",834,Bt+=Gn,""),...Dt("safari",834,Bt,".dark"),"floorEdge.right":{frame:{x:418,y:466,...ax,pivot:{x:0,y:4}}},"floorEdge.towards":{frame:{x:401,y:466,...ax,pivot:{x:15,y:4}}},"floorEdge.half.right":{frame:{x:418,y:470,...ox,pivot:{x:0,y:0}}},"floorEdge.half.towards":{frame:{x:401,y:466,...ox,pivot:{x:7,y:0}}},"floorOverdraw.cornerNearWall":{frame:{x:623,y:452,w:Rn.w,h:8}},"shadow.wall.y":{frame:{x:432,y:435,w:36,h:16}},"generic.floor.deadly":{frame:{x:786,y:462,...rg}},"generic.dark.floor.deadly":{frame:{x:786,y:479,...rg}},"generic.door.legs.pillar.y":{frame:{x:508,y:476,w:Rn.w,h:12}},"generic.door.legs.base.y":{frame:{x:508,y:488,w:Rn.w,h:9}},"generic.door.legs.pillar.x":{frame:{x:524,y:476,w:Rn.w,h:12}},"generic.door.legs.base.x":{frame:{x:524,y:488,w:Rn.w,h:9}},"generic.door.legs.threshold.double.x":{frame:{x:508,y:452,w:Rn.w*2,h:24}},"generic.door.legs.threshold.double.y":{frame:{x:469,y:452,w:Rn.w*2,h:24}},"shadowMask.door.legs.threshold.double.y":{frame:{x:469,y:430,w:Rn.w*2,h:21,pivot:{x:0,y:21}}},"generic.door.floatingThreshold.x":{frame:{x:457,y:492,w:26,h:19,pivot:{x:18,y:12}}},"generic.door.floatingThreshold.y":{frame:{x:430,y:492,w:26,h:19,pivot:{x:8,y:12}}},"shadowMask.door.floatingThreshold.double.y":{frame:{x:541,y:480,w:42,h:21,pivot:{x:8,y:20}}},"shadow.door.floatingThreshold.double.y":{frame:{x:584,y:480,w:42,h:21,pivot:{x:8,y:20}}},...et("moonbase.wall.screen.window1.away",3,{x:883,y:217},{w:10,h:7}),...et("moonbase.wall.screen.window2.away",2,{x:867,y:209},{w:10,h:7}),...et("moonbase.wall.screen.window3.away",4,{x:851,y:201},{w:10,h:7})},$S={frames:Yj,animations:{"moonbase.wall.screen.window1.away":je(["moonbase.wall.screen.window1.away.1","moonbase.wall.screen.window1.away.2","moonbase.wall.screen.window1.away.3"],1/16),"moonbase.wall.screen.window2.away":je(["moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.2"],1/16),"moonbase.wall.screen.window3.away":je(["moonbase.wall.screen.window3.away.1","moonbase.wall.screen.window3.away.2","moonbase.wall.screen.window3.away.3","moonbase.wall.screen.window3.away.4","moonbase.wall.screen.window3.away.4"],1/16)}},Xj={...NS.frames,...GS.frames,...$S.frames,...Gj.frames,...Cj.frames,...Oj.frames},Wj={frames:Xj,animations:{...GS.animations,...NS.animations,...$S.animations},meta:{scale:1}};let No;const Qj=async()=>{if(No!==void 0)return No;let n;try{n=await Mo.load(kj)}catch{console.warn("did not load textures - hopefully this is running on a server!"),n=Pe.EMPTY}const e=new Yp(n,Wj);return await e.parse(),e.textureSource.scaleMode="nearest",No=e,e},jz=()=>{if(No===void 0)throw new Error(`spritesheet not loaded - only call this from inside code 
      (like in a render loop) that is protected and only executed once 
      loading has happened`);return No},Kj=n=>({children:t})=>{const[i,a]=de.useState(!1);return de.useEffect(()=>{n().then(()=>{a(!0)})}),i?t:null},Zj=Kj(Qj),Jj=t1(async()=>{const[n,e]=await Promise.all([Vn(()=>import("./LevelEditor-Cw5IL6Q3.js").then(t=>t.L),__vite__mapDeps([6,7,1])),Vn(()=>import("./levelEditorSlice-C2P-6cwg.js").then(t=>t.aP),__vite__mapDeps([7,1]))]);return aP(e.levelEditorSlice),qg.dispatch(e.injected()),n}),e4=de.lazy(Jj),t4=()=>Co.jsx(Zj,{children:Co.jsx(e4,{})});ET.createRoot(document.getElementById("root")).render(Co.jsx(de.StrictMode,{children:Co.jsx(qT,{store:qg,children:Co.jsx(t4,{})})}));export{aw as $,Vg as A,Vt as B,ol as C,dt as D,be as E,Pe as F,ji as G,wP as H,kc as I,aS as J,OB as K,_r as L,De as M,U1 as N,Bn as O,Ut as P,ZP as Q,Wp as R,XD as S,Gu as T,$p as U,nD as V,iw as W,Qo as X,SD as Y,ut as Z,lt as _,Ac as a,sn as a$,$d as a0,lw as a1,tD as a2,Ct as a3,N1 as a4,eB as a5,bB as a6,wB as a7,TB as a8,kB as a9,fg as aA,BM as aB,R4 as aC,Bz as aD,wk as aE,E4 as aF,vk as aG,m4 as aH,y4 as aI,s4 as aJ,g4 as aK,yp as aL,d4 as aM,vr as aN,fx as aO,Vn as aP,an as aQ,tt as aR,Jo as aS,Fw as aT,P4 as aU,de as aV,HO as aW,E1 as aX,T1 as aY,q4 as aZ,Hx as a_,CB as aa,Cg as ab,A4 as ac,o4 as ad,f4 as ae,w4 as af,qM as ag,Qu as ah,GM as ai,p4 as aj,l4 as ak,c4 as al,Mg as am,Rn as an,xn as ao,IM as ap,zk as aq,a4 as ar,UM as as,X4 as at,qg as au,Y4 as av,NM as aw,nl as ax,zM as ay,x4 as az,Eg as b,_w as b$,v4 as b0,h4 as b1,u4 as b2,i4 as b3,Co as b4,O4 as b5,C4 as b6,Bk as b7,kM as b8,xk as b9,r4 as bA,$4 as bB,F4 as bC,N4 as bD,Kr as bE,kg as bF,n4 as bG,LM as bH,Tg as bI,t1 as bJ,mc as bK,Z4 as bL,Az as bM,Ng as bN,jj as bO,Bj as bP,jC as bQ,M4 as bR,Dz as bS,Xo as bT,Rz as bU,k4 as bV,L4 as bW,vT as bX,S4 as bY,T3 as bZ,xS as b_,_4 as ba,$x as bb,Q4 as bc,Wj as bd,jz as be,T4 as bf,b4 as bg,K4 as bh,Do as bi,Ak as bj,G4 as bk,Dj as bl,lp as bm,$j as bn,ue as bo,VO as bp,V4 as bq,KO as br,W4 as bs,_P as bt,XM as bu,ik as bv,uk as bw,Ag as bx,Nx as by,xT as bz,jP as c,vw as c0,Ww as c1,P3 as c2,xP as c3,pc as c4,tg as c5,Yw as c6,ES as c7,it as d,Xn as e,Yt as f,Yn as g,FD as h,Gx as i,bw as j,Ko as k,ec as l,Fg as m,Q1 as n,gk as o,Wn as p,cS as q,ta as r,$w as s,vB as t,_B as u,zt as v,We as w,AB as x,MB as y,fS as z};
