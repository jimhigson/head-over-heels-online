import{a5 as q,a6 as ie,a7 as G,a8 as F,a9 as X,aa as z,ab as M,ac as Xe,ad as fo,ae as J,af as Ue,ag as Ve,ah as uo,ai as mo,aj as yo,ak as po,al as go,am as L,an as ho,ao as ke,ap as U,aq as Ye,ar as vo,as as Io,at as Ke,au as wo,av as Ze,aw as xo,ax as bo,ay as Ro}from"./index-DrY3yDqk.js";var V={},Y={},ze;function Eo(){if(ze)return Y;ze=1;function e(c,y){var i;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(i=o(c))||y){i&&(c=i);var f=0,n=function(){};return{s:n,n:function(){return f>=c.length?{done:!0}:{done:!1,value:c[f++]}},e:function(m){throw m},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,p=!1,u;return{s:function(){i=c[Symbol.iterator]()},n:function(){var m=i.next();return d=m.done,m},e:function(m){p=!0,u=m},f:function(){try{!d&&i.return!=null&&i.return()}finally{if(p)throw u}}}}function o(c,y){if(c){if(typeof c=="string")return t(c,y);var i=Object.prototype.toString.call(c).slice(8,-1);if(i==="Object"&&c.constructor&&(i=c.constructor.name),i==="Map"||i==="Set")return Array.from(c);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(c,y)}}function t(c,y){(y==null||y>c.length)&&(y=c.length);for(var i=0,f=new Array(y);i<y;i++)f[i]=c[i];return f}var r=q(),s=r.ensureIterable;function a(c){var y=[],i=e(c),f;try{for(i.s();!(f=i.n()).done;){var n=f.value;y.push(n)}}catch(d){i.e(d)}finally{i.f()}return y}Y.__toArray=a;function l(c){return a(s(c))}return Y.toArray=l,Y}var Se;function Ao(){if(Se)return V;Se=1;var e=ie(),o=e.mark(l),t=q(),r=t.iterableCurry,s=Eo(),a=s.__toArray;function l(y,i){var f;return e.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(f=Array.isArray(y)?y:a(y),f.length){d.next=3;break}return d.abrupt("return");case 3:if(!i--){d.next=7;break}return d.delegateYield(f,"t0",5);case 5:d.next=3;break;case 7:case"end":return d.stop()}},o)}V.__cycleTimes=l;var c=r(l);return V.cycleTimes=c,V}var K={},Ce;function ko(){if(Ce)return K;Ce=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var d=0,p=function(){};return{s:p,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,d=new Array(f);n<f;n++)d[n]=i[n];return d}var a=q(),l=a.iterableCurry;function c(i,f){var n,d,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=0,d=t(i),m.prev=2,d.s();case 4:if((p=d.n()).done){m.next=11;break}if(u=p.value,!f(u,n++)){m.next=9;break}return m.next=9,u;case 9:m.next=4;break;case 11:m.next=16;break;case 13:m.prev=13,m.t0=m.catch(2),d.e(m.t0);case 16:return m.prev=16,d.f(),m.finish(16);case 19:case"end":return m.stop()}},o,null,[[2,13,16,19]])}K.__filter=c;var y=l(c);return K.filter=y,K}var Z={},Te;function zo(){if(Te)return Z;Te=1;var e=q(),o=e.iterableCurry,t=Ao(),r=t.__cycleTimes;function s(l){return r(l,1/0)}Z.__cycle=s;var a=o(s);return Z.cycle=a,Z}var Q={},Pe;function So(){if(Pe)return Q;Pe=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var d=0,p=function(){};return{s:p,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,d=new Array(f);n<f;n++)d[n]=i[n];return d}var a=q(),l=a.iterableCurry;function c(i,f){var n,d,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=0,d=t(i),m.prev=2,d.s();case 4:if((p=d.n()).done){m.next=11;break}if(u=p.value,!(n++>=f)){m.next=9;break}return m.next=9,u;case 9:m.next=4;break;case 11:m.next=16;break;case 13:m.prev=13,m.t0=m.catch(2),d.e(m.t0);case 16:return m.prev=16,d.f(),m.finish(16);case 19:case"end":return m.stop()}},o,null,[[2,13,16,19]])}Q.__drop=c;var y=l(c);return Q.drop=y,Q}var ee={},oe={},Fe;function Co(){if(Fe)return oe;Fe=1;var e=q(),o=e.iterableCurry,t=e.callReturn;function r(a,l){var c=a[Symbol.iterator](),y=c.next(),i=y.value,f=y.done;return f?l:(t(c),i)}oe.__firstOr=r;var s=o(r,{reduces:!0});return oe.firstOr=s,oe}var Oe;function To(){if(Oe)return ee;Oe=1;var e=q(),o=e.iterableCurry,t=Co(),r=t.__firstOr;function s(l){return r(l,void 0)}ee.__first=s;var a=o(s,{reduces:!0});return ee.first=a,ee}var te={},$e;function Po(){if($e)return te;$e=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var d=0,p=function(){};return{s:p,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,d=new Array(f);n<f;n++)d[n]=i[n];return d}var a=q(),l=a.iterableCurry;function c(i,f){var n,d,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(f!==0){m.next=2;break}return m.abrupt("return");case 2:n=0,d=t(i),m.prev=4,d.s();case 6:if((p=d.n()).done){m.next=14;break}return u=p.value,m.next=10,u;case 10:if(++n!==f){m.next=12;break}return m.abrupt("break",14);case 12:m.next=6;break;case 14:m.next=19;break;case 16:m.prev=16,m.t0=m.catch(4),d.e(m.t0);case 19:return m.prev=19,d.f(),m.finish(19);case 22:case"end":return m.stop()}},o,null,[[4,16,19,22]])}te.__take=c;var y=l(c);return te.take=y,te}var ae,We;function Fo(){return We||(We=1,ae=zo().cycle),ae}var Oo=Fo();const $o=G(Oo);var ce,_e;function Wo(){return _e||(_e=1,ce=So().drop),ce}var _o=Wo();const qo=G(_o);var le,qe;function Mo(){return qe||(qe=1,le=ko().filter),le}var No=Mo();const Ho=G(No);var de,Me;function Bo(){return Me||(Me=1,de=To().first),de}var Jo=Bo();const ge=G(Jo);var fe,Ne;function Lo(){return Ne||(Ne=1,fe=Po().take),fe}var jo=Lo();const Do=G(jo),T=e=>e.campaignInProgress.rooms[e.currentlyEditingRoomId],he=(e,o)=>e.campaignInProgress.rooms[o],Qe=(e,o,t)=>e.campaignInProgress.rooms[t??e.currentlyEditingRoomId]?.items[o],Go=(e,o)=>e.selectedJsonItemIds.includes(o),H=e=>{const o=structuredClone(F(T(e))),{history:t}=e;t.redo=[],t.undo.push(o)},Xo={undo(e){const o=e,{campaignInProgress:t,history:{undo:r,redo:s},currentlyEditingRoomId:a}=o;r.length!==0&&(s.push(t.rooms[a]),t.rooms[a]=r.pop())},redo(e){const o=e,{campaignInProgress:t,history:{redo:r,undo:s},currentlyEditingRoomId:a}=o;r.length!==0&&(s.push(t.rooms[a]),t.rooms[a]=r.pop())}},Uo={selectCanUndo:e=>e.history.undo.length>0,selectCanRedo:e=>e.history.redo.length>0},ue={x:1,y:0,z:0},me={x:-1,y:0,z:0},ye={x:0,y:-1,z:0},pe={x:0,y:1,z:0},j={away:pe,left:ue,right:me,towards:ye,down:{x:0,y:0,z:-1},up:{x:0,y:0,z:1},awayRight:X(z(pe,me)),towardsRight:X(z(ye,me)),towardsLeft:X(z(ye,ue)),awayLeft:X(z(pe,ue))},Vo=(e,o,t)=>{if(o==="*")return!0;const r=t.meta.subRooms[o];return e.x>=r.physicalPosition.from.x&&e.y>=r.physicalPosition.from.y&&e.x<=r.physicalPosition.to.x&&e.y<=r.physicalPosition.to.y},Yo=({position:e},o,t)=>Vo(e,o,t),re=(e,o,t,r)=>o.some(s=>s.config.direction===e)?"doorway":t===void 0?"wall":Object.values(t).some(({gridPosition:s})=>uo(j[e],mo(s,r)))?"open":"wall";function*N(e){try{yield*Ko(e)}catch(o){const t=o;throw new Error(`
  error in recursion ${e.roomId}/${e.subRoomId??"*"}`,{cause:t})}}function*Ko({roomId:e,subRoomId:o="*",campaign:t,visited:r={},vectorFromPrevious:s,previousRoomGridPosition:a=J}){if(e==="nowhere"||r[e]?.[o])return;r[e]===void 0&&(r[e]={}),r[e][o]=!0;const l=t.rooms[e];if(l===void 0)throw new Error(`no room in the campaign with id="${e}"`);const c=[...M(Xe(l.items)).filter(p=>p.type==="door").filter(p=>Yo(p,o,l))],y=z(a,s===void 0?fo:s),i=l.meta?.subRooms;if(i){if(o==="*")throw new Error(`subRoomId '*' means 'all' and is not allowed for big rooms. Must be one of the sub-rooms in ${e}: ${Object.keys(i)}`);if(!i[o])throw new Error(`Sub-room ${o} not found in room ${e}. Available sub-rooms: ${Object.keys(i)}`)}const f=i?.[o].gridPosition,n={left:re("left",c,i,f),right:re("right",c,i,f),away:re("away",c,i,f),towards:re("towards",c,i,f)};if(yield{roomId:e,subRoomId:o,gridPosition:y,boundaries:n},i!==void 0){if(f===void 0)throw new Error(`Sub-room ${o} not found in room ${e}. Available sub-rooms: ${Object.keys(i)}`);for(const[p,{gridPosition:u}]of M(Ue(i)))p!==o&&(yield*N({roomId:e,subRoomId:p,campaign:t,visited:r,vectorFromPrevious:Ve({...u,z:0},f),previousRoomGridPosition:y}))}if(l.roomAbove!==void 0){const{roomAbove:p,subRoomAbove:u}=l;yield*N({roomId:p,subRoomId:u,campaign:t,visited:r,vectorFromPrevious:j.up,previousRoomGridPosition:y})}if(l.roomBelow!==void 0){const{roomBelow:p,subRoomBelow:u}=l;yield*N({roomId:p,subRoomId:u,campaign:t,visited:r,vectorFromPrevious:j.down,previousRoomGridPosition:y})}for(const p of c){const{toRoom:u}=p.config;yield*N({roomId:u,campaign:t,visited:r,subRoomId:p.config.meta?.toSubRoom,vectorFromPrevious:j[p.config.direction],previousRoomGridPosition:y})}const d=l.meta?.nonContiguousRelationship;if(d!==void 0){const{with:{room:p},gridOffset:u}=d;yield*N({roomId:p,campaign:t,visited:r,subRoomId:"*",vectorFromPrevious:u,previousRoomGridPosition:y})}}const Zo={jail:["bars"],blacktooth:["plain","plain","armour","shield","shield","armour"],bookworld:["book","book","cowboy"],egyptus:["hieroglyphics","hieroglyphics","hieroglyphics","sarcophagus","sarcophagus"],market:["passage","more-fruits","fruits","more-fruits","fruits"],moonbase:["coil","window1","window2","window3"],penitentiary:["loop","loop","skeleton"],safari:["wall","shield","wall","window","window","wall","shield"]},D=(e,o,t=0)=>{const r=$o(Zo[e]);return qo(t,Do(o+t,r))},Qo=e=>({awayWall:{type:"wall",config:{direction:"away",tiles:Array.from(D("blacktooth",e.x))},position:{x:0,y:e.y,z:0}},leftWall:{type:"wall",config:{direction:"left",tiles:Array.from(D("blacktooth",e.y))},position:{x:e.x,y:0,z:0}},towardsWall:{type:"wall",config:{direction:"towards",times:{x:e.x}},position:{x:0,y:0,z:0}},rightWall:{type:"wall",config:{direction:"right",times:{y:e.y}},position:{x:0,y:0,z:0}}}),eo=e=>({planet:"blacktooth",color:{hue:"cyan",shade:"basic"},items:{floor:{type:"floor",config:{floorType:"standable",scenery:"blacktooth",times:e},position:{x:0,y:0,z:0}},...Qo(e)}}),oo=(e,o)=>{e.planet=o;for(const t of Object.values(e.items))t.type==="floor"&&t.config.floorType==="standable"&&(t.config.scenery=o),t.type==="wall"&&(t.config.direction==="away"||t.config.direction==="left")&&(t.config.tiles=Array.from(D(o,t.config.tiles.length))),t.type==="pickup"&&t.config.gives==="crown"&&yo.includes(o)&&(t.config.planet=o)},et=e=>e[Math.floor(Math.random()*e.length)],Ie=(e,o,t)=>{const s=`room_${M(po({start:0})).find(c=>e.campaignInProgress.rooms[`room_${c}`]===void 0)}`,a=t??{hue:et(go),shade:Math.random()<.66?"basic":"dimmed"},l={id:s,...structuredClone(eo({x:8,y:8})),color:a};return oo(l,o),e.campaignInProgress.rooms[s]=l,l},we=(e,o,t)=>{if(o.type==="player"){const{which:s}=o.config;return t?`preview-${s}`:s}const r=o.type==="monster"?o.config.which:o.type;for(let s=1;;s++){const a=s===1?r:`${r}_${s}`;if(!e.items[a])return a}},ve=(e,o,t,r)=>{const s=T(e),a=we(s,o,r),l=to(e,r),c={type:o.type,config:o.config,position:t};return l[a]=c,[a,c]},to=(e,o,t=e.currentlyEditingRoomId)=>o?e.previewedEdits:e.campaignInProgress.rooms[t].items,ot=["head","heels"],tt=[...ot,"headOverHeels"],S=(...e)=>o=>e.includes(o.type),rt=S("bubbles","stopAutowalk","firedDoughnut","floatingText","emitter","particle"),nt=(e,o)=>rt(e)||ut(e)&&(o!==void 0&&ct(o)||e.config.direction.z!==0)||yt(e)&&e.config.floorType==="none",_r=(e,o)=>!nt(e,o),it=["ball","slidingBlock","slidingDeadly"];S(...it);const st=["portableBlock","spring","sceneryPlayer","sceneryCrown","monster","slidingBlock"],at=["dalek","turtle","elephantHead","homingBot","helicopterBug"],qr=e=>e.type==="slidingBlock"?e.config.style==="puck":e.type==="monster"?at.includes(e.config.which):st.includes(e.type),ct=e=>e.type==="head"||e.type==="heels"||e.type==="headOverHeels";function Mr(e){return lt.includes(e.type)}const lt=[...tt,"monster","ball","charles","pushableBlock","movingPlatform","moveableDeadly","pickup","portableBlock","slidingBlock","slidingDeadly","spring","sceneryPlayer","sceneryCrown"],dt=["monster","deadlyBlock","moveableDeadly","slidingDeadly"];S(...dt);const ft=e=>e.config.times!==void 0,ut=S("portal");S("teleporter");S("heels");S("head");S("heels","headOverHeels");S("head","headOverHeels");S("lift");S("emitter");const mt=S("monster"),yt=S("floor");S("pickup");S("spring");const Nr=S("joystick");S("monster","movingPlatform");const Hr=e=>mt(e)&&e.config.which==="cyberman"&&e.state.everActivated===!1,se=e=>({x:e.direction==="away"?e.tiles.length:e.direction==="towards"?e.times?.x:1,y:e.direction==="left"?e.tiles.length:e.direction==="right"?e.times?.y:1}),Br=e=>e.type==="wall"?se(e.config):ft(e)?e.config.times:void 0,He=(e=L)=>({x:e.x??1,y:e.y??1,z:e.z??1}),pt=e=>({x:e.x??1,y:e.y??1}),$=e=>{const o=t=>t.config.times!==void 0;return e.type==="wall"?He(se(e.config)):o(e)?He(e.config.times):L},ro=e=>{const o={};let t=!1;return e.x!==1&&(o.x=e.x,t=!0),e.y!==1&&(o.y=e.y,t=!0),e.z!==1&&(o.z=e.z,t=!0),t?o:void 0};function*no(e,o,t){for(const r of Ue(e)){const[s,a]=r;if(a===null||a.type!=="wall"||a.config.direction!==o)continue;const{position:l,config:c}=a,y=pt(se(c)),i=ho(ke(c.direction)),f=ke(c.direction),n=Ve(t,l);if(n[f]!==0||n[i]<-1||n[i]>=y[i])continue;if(n[i]===0&&y[i]===2){yield[s,null];continue}const d=2+n[i];if(d===1||d===2){const g=U(a,w=>{w.position=z(l,{[i]:d});const I=w.config;switch(I.direction){case"towards":case"right":I.times[i]=y[i]-d;break;default:I.tiles=I.tiles.slice(d)}});yield[s,g];continue}const u=y[i]-n[i];if(u===2||u===1){const g=U(a,w=>{const I=w.config;switch(I.direction){case"towards":case"right":I.times[i]=y[i]-u;break;default:I.tiles=I.tiles.slice(0,-u)}});yield[s,g];continue}const m=U(a,g=>{const w=g.config;switch(w.direction){case"towards":case"right":w.times[i]=n[i];break;default:w.tiles=w.tiles.slice(0,n[i])}});yield[`${s}/beforeDoor`,m];const v=U(a,g=>{g.position={...l,[i]:t[i]+2};const w=g.config;switch(w.direction){case"towards":case"right":w.times[i]=y[i]-n[i]-2;break;default:w.tiles=w.tiles.slice(n[i]+2)}});yield[`${s}/afterDoor`,v],yield[s,null]}}const Be=(e,o,t,r,s)=>{const a=he(e,o);if(a===void 0)throw new Error("can't cut hole in walls for a room that does not exist");const l=to(e,s,o);for(const[c,y]of no(a.items,t,r))s?l[c]=y:y===null?delete l[c]:l[c]=y},gt=e=>Xe(e.items),ht=e=>Ye(e),vt=e=>M(gt(e)),_=(e,...o)=>{const t=M(ht(e));return o.length===0?t:t.filter(([,r])=>o.includes(r.type))},It=({state:e,fromRoomJson:o,direction:t,isPreview:r,autoAddRooms:s})=>{const a=e.campaignInProgress,l=M(N({campaign:a,roomId:o.id})).find(({gridPosition:c})=>Io(c,j[t]));if(l)return a.rooms[l.roomId];if(!r)return s?Ie(e,o.planet):void 0},wt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.y;return Math.min(o,r)},Number.POSITIVE_INFINITY),xt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.y+t.config.times.y;return Math.max(o,r)},Number.NEGATIVE_INFINITY),bt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.x;return Math.min(o,r)},Number.POSITIVE_INFINITY),Rt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.x+t.config.times.x;return Math.max(o,r)},Number.NEGATIVE_INFINITY),Et=(e,o,t,r,s)=>{const a=T(e),l=t;Be(e,a.id,l,o,s);const c=r.config.toRoom==="+";console.log("autoAddRooms:",c);const y=It({state:e,fromRoomJson:a,direction:l,isPreview:s,autoAddRooms:c}),[i,f]=ve(e,{type:"door",config:{...r.config,toRoom:y?y.id:r.config.toRoom,direction:l}},o,s);if(!s&&y){const n=we(y,r,s),d={x:l==="left"?bt(y):l==="right"?Rt(y):o.x,y:l==="away"?wt(y):l==="towards"?xt(y):o.y,z:o.z},p=vo(l),u={type:"door",config:{toRoom:a.id,direction:p},position:d};y.items[n]=u,u.config.toDoor=i,f.config.toDoor=n,Be(e,y.id,p,d,!1)}};function Je(e){var o="";return t(e),o;function t(s){if(s===null||typeof s!="object"||s.toJSON!=null)o+=JSON.stringify(s);else if(Array.isArray(s)){o+="[";var a=!1;s.forEach(function(c){a&&(o+=","),a=!0,c===void 0&&(c=null),t(c)}),o+="]"}else{o+="{";var l=Object.keys(s).filter(function(c){return s[c]!==void 0}).sort();l.forEach(function(c,y){return r(s,c,y)}),o+="}"}}function r(s,a,l){l>0&&(o+=","),o+=JSON.stringify(a),o+=":",t(s[a])}}const Jr=(e,...o)=>{const t={};for(const r of o)t[r]=e[r];return t},Le=(e,...o)=>{const t={...e};for(const r of o)delete t[r];return t},io=e=>Ke(xe(e))>0,xe=e=>{switch(e.type){case"deadlyBlock":return L;case"conveyor":if(e.config.disappearing)return J;switch(e.config.direction){case"left":case"right":return{x:1,y:0,z:0};case"away":case"towards":return{x:0,y:1,z:0};default:throw e.config.direction,new Error}case"hushPuppy":return L;case"teleporter":return{x:1,y:1,z:0};case"floor":case"spikes":return{x:1,y:1,z:0};case"block":return e.config.disappearing?J:L;case"barrier":if(e.config.disappearing)return J;switch(e.config.axis){case"x":return{x:1,y:0,z:1};case"y":return{x:0,y:1,z:1};default:throw e.config.axis,new Error}case"wall":switch(e.config.direction){case"left":case"right":return{x:0,y:1,z:1};case"away":case"towards":return{x:1,y:0,z:1};default:throw e.config,new Error}default:return J}};class ne{#t;#o;#e;constructor(o,t){this.#o={x:-o.x,y:-o.y,z:-o.z},this.#e={x:t.x-o.x+1,y:t.y-o.y+1,z:t.z-o.z+1},this.#t=Array.from({length:this.#e.x},()=>Array.from({length:this.#e.y},()=>Array.from({length:this.#e.z},()=>new Set)))}static fromItems(o){let t=1/0,r=1/0,s=1/0,a=-1/0,l=-1/0,c=-1/0;const y=[...o];for(const[,f]of y){const{x:n,y:d,z:p}=f.position,u=$(f);t=Math.min(t,n),r=Math.min(r,d),s=Math.min(s,p),a=Math.max(a,n+u.x-1),l=Math.max(l,d+u.y-1),c=Math.max(c,p+u.z-1)}if(y.length===0)return new ne({x:0,y:0,z:0},{x:0,y:0,z:0});const i=new ne({x:t,y:r,z:s},{x:a,y:l,z:c});for(const f of y){const[,n]=f,{x:d,y:p,z:u}=n.position,h=$(n);for(let m=0;m<h.x;m++)for(let v=0;v<h.y;v++)for(let g=0;g<h.z;g++)i.add({x:d+m,y:p+v,z:u+g},f)}return i}get(o){const t=o.x+this.#o.x,r=o.y+this.#o.y,s=o.z+this.#o.z;if(this.#r(t,r,s))return this.#t[t][r][s]}set(o,t){const r=o.x+this.#o.x,s=o.y+this.#o.y,a=o.z+this.#o.z;this.#r(r,s,a)&&(this.#t[r][s][a]=t)}add(o,t){const r=this.get(o);r&&r.add(t)}remove(o,t){const r=this.get(o);r&&r.delete(t)}get size(){return{...this.#e}}get minBounds(){return{x:-this.#o.x,y:-this.#o.y,z:-this.#o.z}}get maxBounds(){const o=this.minBounds;return{x:o.x+this.#e.x-1,y:o.y+this.#e.y-1,z:o.z+this.#e.z-1}}*iterate(){const{minBounds:o}=this;for(let t=0;t<this.#e.x;t++)for(let r=0;r<this.#e.y;r++)for(let s=0;s<this.#e.z;s++)yield[{x:t+o.x,y:r+o.y,z:s+o.z},this.#t[t][r][s]]}extractUniqueItems(){const o=new Set,t=[];for(const[,r]of this.iterate())for(const s of r)o.has(s)||(o.add(s),t.push(s));return t}#r(o,t,r){return o>=0&&o<this.#e.x&&t>=0&&t<this.#e.y&&r>=0&&r<this.#e.z}}const O=e=>e.type==="wall"?`wall/${e.config.direction}`:e.type==="teleporter"?Je({type:e.type,config:Le(e.config,"toPosition","times")}):Je({type:e.type,config:Le(e.config,"times")}),At=e=>io(e[1]),kt=e=>{let o=[...e],t=o.length;for(;;){const r=[...zt(o)];if(r.length===t)return r;t=r.length,o=r}},zt=e=>{const o=[],t=[];for(const n of e)At(n)?o.push(n):t.push(n);const r=ne.fromItems(o),s=r.size,{minBounds:a}=r,l=new Map,c=new Map;for(const[,n]of r.iterate())for(const[,d]of n){const p=O(d);c.has(p)||c.set(p,d)}for(const[n]of c)l.set(n,Array.from({length:s.x},()=>Array.from({length:s.y},()=>Array(s.z).fill(!1))));const y=(n,d)=>{const p=$(d),u={x:n.x+p.x-1,y:n.y+p.y-1,z:n.z+p.z-1},h=xe(d),m=O(d),v=new Set;v.add(d);const g=I=>{const E=new Set;let A=!1;for(let{x}=n;x<=I.x;x++)for(let{y:b}=n;b<=I.y;b++)for(let{z:R}=n;R<=I.z;R++){const C=r.get({x,y:b,z:R});let W=!1,B=!1;if(C)for(const[,P]of C)O(P)===m?(W=!0,E.add(P)):io(P)&&P.type!=="wall"&&(B=!0);B&&!W&&(A=!0),(!C||C.size===0)&&(A=!0),W||(A=!0)}if(A)return!1;let k=!1;for(const x of E)v.has(x)||(k=!0,v.add(x));if(!k)return!1;for(const x of E){const b=$(x),R={x:x.position.x+b.x-1,y:x.position.y+b.y-1,z:x.position.z+b.z-1};if(x.position.x<n.x||x.position.y<n.y||x.position.z<n.z||R.x>I.x||R.y>I.y||R.z>I.z)return!1}return!0};let w=!0;for(;w;){if(w=!1,h.x>0&&u.x+1<a.x+s.x){let I=u.x;for(let{y:E}=n;E<=u.y;E++)for(let{z:A}=n;A<=u.z;A++){const k=r.get({x:u.x+1,y:E,z:A});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.x+b.x-1;I=Math.max(I,R)}}}I>u.x&&g({...u,x:I})&&(u.x=I,w=!0)}if(h.y>0&&u.y+1<a.y+s.y){let I=u.y;for(let{x:E}=n;E<=u.x;E++)for(let{z:A}=n;A<=u.z;A++){const k=r.get({x:E,y:u.y+1,z:A});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.y+b.y-1;I=Math.max(I,R)}}}I>u.y&&g({...u,y:I})&&(u.y=I,w=!0)}if(h.z>0&&u.z+1<a.z+s.z){let I=u.z;for(let{x:E}=n;E<=u.x;E++)for(let{y:A}=n;A<=u.y;A++){const k=r.get({x:E,y:A,z:u.z+1});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.z+b.z-1;I=Math.max(I,R)}}}I>u.z&&g({...u,z:I})&&(u.z=I,w=!0)}}return u},i=(n,d)=>{if(n.type==="wall"){if(d.type!=="wall")throw new Error("only walls can join walls");if(n.config.direction!==d.config.direction)throw new Error("walls must have the same direction to join");return n.config.direction==="right"||n.config.direction==="towards"?n:{...n,config:{...n.config,tiles:[...n.config.tiles,...d.config.tiles]}}}return n},f=({x:n,y:d,z:p},{x:u,y:h,z:m},v)=>{const[g,w]=v,I=O(w),E=u-n+1,A=h-d+1,k=m-p+1;let x=w;if(E+A+k>3){const b={...w.config};if(w.type==="wall")switch(w.config.direction){case"away":case"left":break;case"towards":E!==1&&(b.times={x:E});break;case"right":A!==1&&(b.times={y:A});break}else{const R={...ro($(w))};E!==1&&(R.x=E),A!==1&&(R.y=A),k!==1&&(R.z=k),b.times=R}x={...w,config:b}}for(let b=n;b<=u;b++)for(let R=d;R<=h;R++)for(let C=p;C<=m;C++)if(l.get(I)[b-a.x][R-a.y][C-a.z]=!0,b!==n||R!==d||C!==p){const W=r.get({x:b,y:R,z:C});if(W)e:for(const B of W){const[,P]=B;if(O(P)===I){P.position.x===b&&P.position.y===R&&P.position.z===C&&(x=i(x,P)),r.remove({x:b,y:R,z:C},B);break e}}}return[g,x]};for(const[n,d]of r.iterate())for(const p of d){const[,u]=p;if(u.position.x===n.x&&u.position.y===n.y&&u.position.z===n.z){const h=O(u),m=l.get(h),v=n.x-a.x,g=n.y-a.y,w=n.z-a.z;if(m&&!m[v][g][w]){const I=y(n,u),E=f(n,I,p);r.remove(n,p),r.add(n,E)}}}return[...r.extractUniqueItems(),...t]},be=e=>Object.fromEntries(kt(Object.entries(e))),St=e=>e.type==="door",Ct=e=>e.type==="monster"&&e.config.which==="cyberman",Tt={applyItemTool(e,{payload:{blockPosition:o,pointedAtItemJson:t,preview:r}}){const s=e,{tool:a}=s;if(a.type!=="item")throw new Error("applying item tool reducer while the current tool is not an item tool");switch(r||(H(s),s.previewedEdits={}),s.selectedJsonItemIds=[],!0){case St(a.item):{if(t.type!=="wall")throw new Error("doors can only be added on walls");Et(s,o,t.config.direction,a.item,r);break}case(Ct(a.item)&&t.type==="deadlyBlock"&&t.config.style==="toaster"&&t.position.z+1===o.z):{ve(s,{...a.item,config:{...a.item.config,activated:"off"}},o,r);break}default:ve(s,a.item,o,r)}if(!r&&s.autoCoalesce){const l=T(s);l.items=be(l.items)}}},Pt={changeDragInProgress(e,{payload:o}){const t=e;t.dragInProgress=o}},Ft={changeGridResolution(e,{payload:o}){const t=e;t.halfGridResolution=o},changeWallsFloorsLocked(e,{payload:o}){const t=e;t.wallsFloorsLocked=o}},Ot={setSelectedItemsInRoom(e,{payload:{jsonItemIds:o}}){e.selectedJsonItemIds=o},toggleSelectedItemInRoom(e,{payload:{jsonItemId:o}}){const t=e.selectedJsonItemIds.indexOf(o);t===-1?e.selectedJsonItemIds.push(o):e.selectedJsonItemIds.splice(t,1)},setHoveredItemInRoom(e,o){e.hoveredItem=o.payload},setClickableAnnotationHovered(e,o){e.clickableAnnotationHovered=o.payload}},$t=(e,...o)=>({x:e(...o.map(t=>t.x)),y:e(...o.map(t=>t.y)),z:e(...o.map(t=>t.z))}),je=(e,o,t)=>{const r=t-e.length;r>0?e.push(...D(o,r,e.length)):r<0&&e.splice(t)},Wt=e=>e==="towards"||e==="right";function*so(e,o){const t={type:"wall",config:Wt(e.config.direction)?e.config.direction==="towards"?{direction:e.config.direction,times:{x:2}}:{direction:e.config.direction,times:{y:2}}:{direction:e.config.direction,tiles:[...D(o.planet,2,e.position[e.config.direction==="away"?"x":"y"])]},position:{...e.position,z:0}};yield[we(o,t,!1),t]}function ao(e,o){const t=se(e.config),r=z(o.position,o.config.times);switch(e.config.direction){case"towards":if(e.position.y===o.position.y&&e.position.x>=o.position.x&&e.position.x<r.x)return{tangentAxis:"x",normalAxis:"y",edgePosition:e.position.y,wallStart:e.position.x,wallLength:t.x??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.x===o.position.x&&t.x===o.config.times.x,wallTouchesFloorEnd:e.position.x+(t.x??1)===r.x};break;case"right":if(e.position.x===o.position.x&&e.position.y>=o.position.y&&e.position.y<r.y)return{tangentAxis:"y",normalAxis:"x",edgePosition:e.position.x,wallStart:e.position.y,wallLength:t.y??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.y===o.position.y&&t.y===o.config.times.y,wallTouchesFloorEnd:e.position.y+(t.y??1)===r.y};break;case"away":if(e.position.y===o.position.y+o.config.times.y&&e.position.x>=o.position.x&&e.position.x<r.x)return{tangentAxis:"x",normalAxis:"y",edgePosition:e.position.y,wallStart:e.position.x,wallLength:t.x??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.x===o.position.x&&t.x===o.config.times.x,wallTouchesFloorEnd:e.position.x+(t.x??1)===r.x};break;case"left":if(e.position.x===o.position.x+o.config.times.x&&e.position.y>=o.position.y&&e.position.y<r.y)return{tangentAxis:"y",normalAxis:"x",edgePosition:e.position.x,wallStart:e.position.y,wallLength:t.y??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.y===o.position.y&&t.y===o.config.times.y,wallTouchesFloorEnd:e.position.y+(t.y??1)===r.y};break}return null}function*co(e,o,t,r,s){const a=z(o.position,r),l=o.config.times,c=s?z(l,s):o.config.times,y=z(o.position,l),i=z(a,c);for(const[f,n]of M(e)){if(n.type==="wall"&&n.position.z!==o.position.z)continue;if(n.type==="door"){const h=n.config;let m=!1,v={...F(n.position)};switch(h.direction){case"towards":n.position.y===o.position.y&&n.position.x>=o.position.x&&n.position.x<o.position.x+l.x&&(m=!0,v=z(n.position,r));break;case"right":n.position.x===o.position.x&&n.position.y>=o.position.y&&n.position.y<o.position.y+l.y&&(m=!0,v=z(n.position,r));break;case"away":n.position.y===o.position.y+l.y&&n.position.x>=o.position.x&&n.position.x<o.position.x+l.x&&(m=!0,v=z(n.position,{x:r.x,y:r.y+(s?.y??0),z:r.z}));break;case"left":n.position.x===o.position.x+l.x&&n.position.y>=o.position.y&&n.position.y<o.position.y+l.y&&(m=!0,v=z(n.position,{x:r.x+(s?.x??0),y:r.y,z:r.z}));break}if(m){const g=structuredClone(F(n));g.position=v,yield[f,g]}continue}const d=n,p=ao(d,o);if(!p||!p.isOnFloorEdge)continue;const u=structuredClone(F(d));switch(d.config.direction){case"towards":case"right":u.position=z(d.position,r);break;case"away":{const h=a.y+c.y;u.position={...d.position,x:d.position.x+r.x,y:h};break}case"left":{const h=a.x+c.x;u.position={...d.position,x:h,y:d.position.y+r.y};break}}if(p.wallFullySpansFloor){const h=c[p.tangentAxis];d.config.direction==="away"||d.config.direction==="left"?je(u.config.tiles,t,h):u.config.times={[p.tangentAxis]:h},yield[f,u]}else{const h=o.position[p.tangentAxis],m=y[p.tangentAxis],v=a[p.tangentAxis],g=i[p.tangentAxis],w=u.position[p.tangentAxis];if(w>=g){yield[f,null];continue}const I=Math.max(p.wallStart,h),A=Math.min(p.wallStart+p.wallLength,m)-I;let k;if(d.config.direction==="away"||d.config.direction==="left"){const C=o.position[p.normalAxis]+l[p.normalAxis],W=a[p.normalAxis]+c[p.normalAxis];k=C!==W}else k=o.position[p.normalAxis]!==a[p.normalAxis];const x=Math.max(w,v);let b;p.wallTouchesFloorEnd&&!k?b=g:b=Math.min(w+A,g);const R=b-x;R<=0?yield[f,null]:(d.config.direction==="away"||d.config.direction==="left"?je(u.config.tiles,t,R):u.config.times={[p.tangentAxis]:R},yield[f,u])}}}function*_t(e,o,t,r){for(const[s,a]of _(e.items,"floor")){const l=ao(o,a);if(!l)continue;const c={x:0,y:0,z:0},y={x:0,y:0,z:0},i=t[l.normalAxis],f=t[l.tangentAxis],n=r?r[l.tangentAxis]:0;if(i!==0&&(o.config.direction==="towards"||o.config.direction==="right"?(c[l.normalAxis]=i,y[l.normalAxis]=-i):y[l.normalAxis]=i),f!==0&&(l.wallStart===a.position[l.tangentAxis]?(c[l.tangentAxis]=f,y[l.tangentAxis]=-f):l.wallTouchesFloorEnd&&(y[l.tangentAxis]=f)),n!==0&&l.wallTouchesFloorEnd&&(y[l.tangentAxis]=n),c.x!==0||c.y!==0||y.x!==0||y.y!==0){const d=z(a.config.times,y),p={...a,position:z(a.position,c),config:{...a.config,times:{x:d.x,y:d.y}}};yield[s,p]}yield*co(_(e.items,"wall","door"),a,e.planet,c,y)}}const qt={moveOrResizeItemAsPreview(e,{payload:{jsonItemIds:o,timesDelta:t,positionDelta:r}}){const s=e,a=T(s);for(const l of o){const c=Qe(s,l);if(c===void 0)throw new Error(`no json item found for some of the ids in resize ${l}`);if(c.type==="wall"){for(const[i,f]of _t(a,c,r,t))s.previewedEdits[i]=f;continue}if(c.type==="floor")for(const[i,f]of co(_(a.items,"wall","door"),c,a.planet,r,t))s.previewedEdits[i]=f;if(c.type==="door"){console.log("before healing, room items are",F(a.items));for(const[i,f]of so(c,F(a)))console.log("healing",`"${i}"`,f),s.previewedEdits[i]=f}const y={...c,position:z(c.position,r),config:{...c.config}};if(s.previewedEdits[l]=y,Mt(y,t),c.type==="door"){console.log("before cutting room plus previews is",{...F(a.items),...F(s.previewedEdits)});for(const[i,f]of no({...F(a.items),...F(s.previewedEdits)},y.config.direction,y.position))console.log("cutting",`"${i}"`,f),s.previewedEdits[i]=f}}s.dragInProgress=!0}},Mt=(e,o)=>{if(o!==void 0){const t=$(e),r=xe(e),s=wo(o,r);if(Ke(s)>0){const a=ro($t((l,c)=>Math.max(1,l+c),t,s));a===void 0?delete e.config.times:e.config.times=a}}},Nt=(e,o)=>{const t=e.items[o];if(t.type==="door"){for(const[r,s]of so(t,e))e.items[r]=s;e.items=be(e.items)}delete e.items[o]},De=(e,o)=>{vt(e).filter(t=>t.type==="floor").filter(t=>t.position.z===0).forEach(t=>{t.config={...t.config,floorType:o,scenery:o==="standable"?e.planet:void 0}})},Ht={changeRoomColour(e,{payload:o}){const t=e,r=t.campaignInProgress.rooms[t.currentlyEditingRoomId].color;H(t),Object.assign(r,o)},changeRoomScenery(e,{payload:o}){const t=e,r=T(t);H(t),oo(r,o)},roomJsonEdited(e,{payload:o}){const t=e;t.campaignInProgress.rooms[t.currentlyEditingRoomId]=o},deleteSelected(e){const o=e,t=T(o);H(o),o.selectedJsonItemIds.forEach(r=>{Nt(t,r)}),o.selectedJsonItemIds=[]},clearRoom(e){const o=e,t=T(o);H(o);for(const r of Ze(t.items)){const s=t.items[r];s.type!=="floor"&&s.type!=="wall"&&s.type!=="door"&&(delete t.items[r],o.selectedJsonItemIds=o.selectedJsonItemIds.filter(a=>a!==r))}},setRoomAboveOrBelow(e,{payload:o}){const t=e,r=o.direction==="above"?"roomAbove":"roomBelow",s=r==="roomAbove"?"roomBelow":"roomAbove",a=T(t),l=o.createNew?Ie(t,a.planet,a.color).id:o.roomId,c=a[r]&&he(t,a[r]);c?.[s]===t.currentlyEditingRoomId&&(c[s]=void 0),a[r]=l;const y=l&&he(t,l);y!==void 0&&(y[s]=a.id),y?De(r==="roomBelow"?a:y,"none"):De(r==="roomBelow"?a:c,"standable")}},Bt=(e,o)=>{const t=Ye(o);for(const[r,s]of t)s===null?delete e.items[r]:e.items[r]=s},Jt={setAutoCoalesce(e,o){e.autoCoalesce=o.payload},resetPreviewedEdits(e){e.previewedEdits={}},commitCurrentPreviewedEdits(e){if(H(e),Bt(T(e),e.previewedEdits),e.autoCoalesce){const o=T(e);o.items=be(o.items)}e.previewedEdits={}}},Re="room_0",Lt={id:Re,...eo({x:8,y:8})},Ge={name:"new campaign",rooms:{[Re]:Lt}},Ee={campaignInProgress:Ge,savedCampaign:Ge,currentlyEditingRoomId:Re,editingRoomIdHistory:{back:[],forward:[]},previewedEdits:{},tool:{type:"pointer"},hoveredItem:void 0,clickableAnnotationHovered:!1,selectedJsonItemIds:[],halfGridResolution:!1,autoCoalesce:!0,wallsFloorsLocked:!0,dragInProgress:!1,history:{undo:[],redo:[]}},jt={loadCampaign(e,{payload:{campaign:o}}){const t=e;t.savedCampaign=o,t.campaignInProgress=o,t.hoveredItem=void 0,t.selectedJsonItemIds=[],t.clickableAnnotationHovered=!1,t.dragInProgress=!1,t.history=Ee.history;const r=ge(Ze(o.rooms));if(r===void 0)throw new Error("could not find any rooms in this campaign");t.currentlyEditingRoomId=r},campaignSaved(e,{payload:{campaign:o}}){const t=e;t.savedCampaign=o}},lo=(e,o)=>{if(!e.campaignInProgress.rooms[o]){console.warn(`can't change to room ${o} - it doesn't exist`);return}e.editingRoomIdHistory.back.push(e.currentlyEditingRoomId),e.currentlyEditingRoomId=o,e.clickableAnnotationHovered=!1,e.hoveredItem=void 0,e.selectedJsonItemIds=[],e.history=Ee.history},Dt={changeToRoom(e,{payload:o}){lo(e,o)},roomBack(e){const o=e,{editingRoomIdHistory:t}=o;if(t.back.length===0)return;const r=t.back.pop();t.forward.push(o.currentlyEditingRoomId),o.currentlyEditingRoomId=r},roomForward(e){const o=e,{editingRoomIdHistory:t}=o;if(t.forward.length===0)return;const r=t.forward.pop();t.back.push(o.currentlyEditingRoomId),o.currentlyEditingRoomId=r}},Gt={addRoom(e){const o=e.campaignInProgress.rooms[e.currentlyEditingRoomId],t=Ie(e,o.planet);lo(e,t.id)},removeRoom(e){const o=e.campaignInProgress.rooms[e.currentlyEditingRoomId],r=ge(_(o.items,"door","teleporter"))?.[1].config.toRoom??ge(Ho(s=>s!==e.currentlyEditingRoomId,xo(e.campaignInProgress.rooms)));r!==void 0&&(delete e.campaignInProgress.rooms[e.currentlyEditingRoomId],e.currentlyEditingRoomId=r)}},Ae=bo({name:"levelEditor",initialState:Ee,reducers:{setTool(e,{payload:o}){const t=e;o.type==="item"&&(t.selectedJsonItemIds=[]),t.tool=o},injected(){},...Ft,...Xo,...Tt,...Pt,...Ot,...Ht,...qt,...Jt,...jt,...Gt,...Dt},selectors:{selectCurrentCampaignInProgress:e=>e.campaignInProgress,selectCurrentEditingRoomJson:T,selectItem:Qe,selectCurrentEditingRoomColour:e=>T(e).color,selectCurrentEditingRoomScenery:e=>T(e).planet,selectTool:e=>e.tool,selectSelectedJsonItemIds:e=>e.selectedJsonItemIds,selectHoveredItem:e=>e.hoveredItem,selectItemIsSelected:Go,...Uo}}),{addRoom:Xt,applyItemTool:Ut,campaignSaved:Vt,changeDragInProgress:Yt,changeGridResolution:Kt,changeRoomColour:Zt,changeRoomScenery:Qt,changeToRoom:er,changeWallsFloorsLocked:or,clearRoom:tr,commitCurrentPreviewedEdits:rr,deleteSelected:nr,injected:ir,loadCampaign:sr,moveOrResizeItemAsPreview:ar,redo:cr,removeRoom:lr,resetPreviewedEdits:dr,roomBack:fr,roomJsonEdited:ur,setAutoCoalesce:mr,setClickableAnnotationHovered:yr,setHoveredItemInRoom:pr,setRoomAboveOrBelow:gr,setSelectedItemsInRoom:hr,setTool:vr,toggleSelectedItemInRoom:Ir,undo:wr,roomForward:xr}=Ae.actions,{selectCanRedo:br,selectCanUndo:Rr,selectCurrentCampaignInProgress:Er,selectCurrentEditingRoomColour:Ar,selectCurrentEditingRoomJson:kr,selectCurrentEditingRoomScenery:zr,selectHoveredItem:Sr,selectItem:Cr,selectItemIsSelected:Tr,selectSelectedJsonItemIds:Pr,selectTool:Fr}=Ae.selectors,Or=Ro.withTypes(),Lr=Object.freeze(Object.defineProperty({__proto__:null,addRoom:Xt,applyItemTool:Ut,campaignSaved:Vt,changeDragInProgress:Yt,changeGridResolution:Kt,changeRoomColour:Zt,changeRoomScenery:Qt,changeToRoom:er,changeWallsFloorsLocked:or,clearRoom:tr,commitCurrentPreviewedEdits:rr,deleteSelected:nr,injected:ir,levelEditorSlice:Ae,loadCampaign:sr,moveOrResizeItemAsPreview:ar,redo:cr,removeRoom:lr,resetPreviewedEdits:dr,roomBack:fr,roomForward:xr,roomJsonEdited:ur,selectCanRedo:br,selectCanUndo:Rr,selectCurrentCampaignInProgress:Er,selectCurrentEditingRoomColour:Ar,selectCurrentEditingRoomJson:kr,selectCurrentEditingRoomScenery:zr,selectHoveredItem:Sr,selectItem:Cr,selectItemIsSelected:Tr,selectSelectedJsonItemIds:Pr,selectTool:Fr,setAutoCoalesce:mr,setClickableAnnotationHovered:yr,setHoveredItemInRoom:pr,setRoomAboveOrBelow:gr,setSelectedItemsInRoom:hr,setTool:vr,toggleSelectedItemInRoom:Ir,undo:wr,useAppSelectorWithLevelEditorSlice:Or},Symbol.toStringTag,{value:"Module"}));export{pt as $,j as A,it as B,Jr as C,He as D,se as E,Wt as F,yt as G,_r as H,Mr as I,Mt as J,Ho as K,ar as L,rr as M,fr as N,xr as O,mr as P,er as Q,S as R,ft as S,Br as T,ct as U,Nr as V,Hr as W,qr as X,yr as Y,Sr as Z,Pr as _,vr as a,$ as a0,xe as a1,$t as a2,Yt as a3,hr as a4,Ir as a5,Ut as a6,pr as a7,dr as a8,Qe as a9,Cr as aa,Tr as ab,io as ac,ur as ad,Lr as ae,Ar as b,Kt as c,nr as d,Zt as e,zr as f,Qt as g,Rr as h,br as i,wr as j,cr as k,or as l,kr as m,D as n,tr as o,T as p,gr as q,Co as r,Fr as s,Er as t,Or as u,Vt as v,sr as w,Xt as x,lr as y,lt as z};
