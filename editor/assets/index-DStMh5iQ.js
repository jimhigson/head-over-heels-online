const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/campaign-JmJOGSQZ.js","assets/RoomJson-CLLcxHQU.js","assets/browserAll-DNstrC_7.js","assets/webworkerAll-B5BXJ_H3.js","assets/CanvasTextGenerator-D3epXUZX.js","assets/colorToUniform-BXaCBwVl.js","assets/LevelEditor-DzSI1LRT.js","assets/levelEditorSlice-Mf4CLfNX.js"])))=>i.map(i=>d[i]);
function JE(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Zz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ai(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function eT(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var ud={exports:{}},lo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function tT(){if(Hb)return lo;Hb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:o}}return lo.Fragment=e,lo.jsx=t,lo.jsxs=t,lo}var $b;function nT(){return $b||($b=1,ud.exports=tT()),ud.exports}var jo=nT(),cd={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function iT(){if(Fb)return ve;Fb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=m&&j[m]||j["@@iterator"],typeof j=="function"?j:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(j,Y,ne){this.props=j,this.context=Y,this.refs=S,this.updater=ne||v}_.prototype.isReactComponent={},_.prototype.setState=function(j,Y){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Y,"setState")},_.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function E(){}E.prototype=_.prototype;function M(j,Y,ne){this.props=j,this.context=Y,this.refs=S,this.updater=ne||v}var A=M.prototype=new E;A.constructor=M,w(A,_.prototype),A.isPureReactComponent=!0;var T=Array.isArray,R={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function C(j,Y,ne,te,J,le){return ne=le.ref,{$$typeof:n,type:j,key:Y,ref:ne!==void 0?ne:null,props:le}}function P(j,Y){return C(j.type,Y,void 0,void 0,void 0,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function z(j){var Y={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ne){return Y[ne]})}var U=/\/+/g;function F(j,Y){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):Y.toString(36)}function Q(){}function ee(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Q,Q):(j.status="pending",j.then(function(Y){j.status==="pending"&&(j.status="fulfilled",j.value=Y)},function(Y){j.status==="pending"&&(j.status="rejected",j.reason=Y)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ae(j,Y,ne,te,J){var le=typeof j;(le==="undefined"||le==="boolean")&&(j=null);var oe=!1;if(j===null)oe=!0;else switch(le){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(j.$$typeof){case n:case e:oe=!0;break;case g:return oe=j._init,ae(oe(j._payload),Y,ne,te,J)}}if(oe)return J=J(j),oe=te===""?"."+F(j,0):te,T(J)?(ne="",oe!=null&&(ne=oe.replace(U,"$&/")+"/"),ae(J,Y,ne,"",function(Pe){return Pe})):J!=null&&(D(J)&&(J=P(J,ne+(J.key==null||j&&j.key===J.key?"":(""+J.key).replace(U,"$&/")+"/")+oe)),Y.push(J)),1;oe=0;var ze=te===""?".":te+":";if(T(j))for(var xe=0;xe<j.length;xe++)te=j[xe],le=ze+F(te,xe),oe+=ae(te,Y,ne,le,J);else if(xe=b(j),typeof xe=="function")for(j=xe.call(j),xe=0;!(te=j.next()).done;)te=te.value,le=ze+F(te,xe++),oe+=ae(te,Y,ne,le,J);else if(le==="object"){if(typeof j.then=="function")return ae(ee(j),Y,ne,te,J);throw Y=String(j),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return oe}function L(j,Y,ne){if(j==null)return j;var te=[],J=0;return ae(j,te,"","",function(le){return Y.call(ne,le,J++)}),te}function $(j){if(j._status===-1){var Y=j._result;Y=Y(),Y.then(function(ne){(j._status===0||j._status===-1)&&(j._status=1,j._result=ne)},function(ne){(j._status===0||j._status===-1)&&(j._status=2,j._result=ne)}),j._status===-1&&(j._status=0,j._result=Y)}if(j._status===1)return j._result.default;throw j._result}var Z=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function re(){}return ve.Children={map:L,forEach:function(j,Y,ne){L(j,function(){Y.apply(this,arguments)},ne)},count:function(j){var Y=0;return L(j,function(){Y++}),Y},toArray:function(j){return L(j,function(Y){return Y})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ve.Component=_,ve.Fragment=t,ve.Profiler=a,ve.PureComponent=M,ve.StrictMode=s,ve.Suspense=f,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ve.act=function(){throw Error("act(...) is not supported in production builds of React.")},ve.cache=function(j){return function(){return j.apply(null,arguments)}},ve.cloneElement=function(j,Y,ne){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var te=w({},j.props),J=j.key,le=void 0;if(Y!=null)for(oe in Y.ref!==void 0&&(le=void 0),Y.key!==void 0&&(J=""+Y.key),Y)!O.call(Y,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Y.ref===void 0||(te[oe]=Y[oe]);var oe=arguments.length-2;if(oe===1)te.children=ne;else if(1<oe){for(var ze=Array(oe),xe=0;xe<oe;xe++)ze[xe]=arguments[xe+2];te.children=ze}return C(j.type,J,void 0,void 0,le,te)},ve.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},ve.createElement=function(j,Y,ne){var te,J={},le=null;if(Y!=null)for(te in Y.key!==void 0&&(le=""+Y.key),Y)O.call(Y,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(J[te]=Y[te]);var oe=arguments.length-2;if(oe===1)J.children=ne;else if(1<oe){for(var ze=Array(oe),xe=0;xe<oe;xe++)ze[xe]=arguments[xe+2];J.children=ze}if(j&&j.defaultProps)for(te in oe=j.defaultProps,oe)J[te]===void 0&&(J[te]=oe[te]);return C(j,le,void 0,void 0,null,J)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(j){return{$$typeof:h,render:j}},ve.isValidElement=D,ve.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:$}},ve.memo=function(j,Y){return{$$typeof:d,type:j,compare:Y===void 0?null:Y}},ve.startTransition=function(j){var Y=R.T,ne={};R.T=ne;try{var te=j(),J=R.S;J!==null&&J(ne,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(re,Z)}catch(le){Z(le)}finally{R.T=Y}},ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ve.use=function(j){return R.H.use(j)},ve.useActionState=function(j,Y,ne){return R.H.useActionState(j,Y,ne)},ve.useCallback=function(j,Y){return R.H.useCallback(j,Y)},ve.useContext=function(j){return R.H.useContext(j)},ve.useDebugValue=function(){},ve.useDeferredValue=function(j,Y){return R.H.useDeferredValue(j,Y)},ve.useEffect=function(j,Y){return R.H.useEffect(j,Y)},ve.useId=function(){return R.H.useId()},ve.useImperativeHandle=function(j,Y,ne){return R.H.useImperativeHandle(j,Y,ne)},ve.useInsertionEffect=function(j,Y){return R.H.useInsertionEffect(j,Y)},ve.useLayoutEffect=function(j,Y){return R.H.useLayoutEffect(j,Y)},ve.useMemo=function(j,Y){return R.H.useMemo(j,Y)},ve.useOptimistic=function(j,Y){return R.H.useOptimistic(j,Y)},ve.useReducer=function(j,Y,ne){return R.H.useReducer(j,Y,ne)},ve.useRef=function(j){return R.H.useRef(j)},ve.useState=function(j){return R.H.useState(j)},ve.useSyncExternalStore=function(j,Y,ne){return R.H.useSyncExternalStore(j,Y,ne)},ve.useTransition=function(){return R.H.useTransition()},ve.version="19.0.0",ve}var Vb;function Ic(){return Vb||(Vb=1,cd.exports=iT()),cd.exports}var ce=Ic();const sT=Ai(ce),Jz=JE({__proto__:null,default:sT},[ce]);var hd={exports:{}},uo={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function rT(){return Yb||(Yb=1,(function(n){function e(L,$){var Z=L.length;L.push($);e:for(;0<Z;){var re=Z-1>>>1,j=L[re];if(0<a(j,$))L[re]=$,L[Z]=j,Z=re;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var $=L[0],Z=L.pop();if(Z!==$){L[0]=Z;e:for(var re=0,j=L.length,Y=j>>>1;re<Y;){var ne=2*(re+1)-1,te=L[ne],J=ne+1,le=L[J];if(0>a(te,Z))J<j&&0>a(le,te)?(L[re]=le,L[J]=Z,re=J):(L[re]=te,L[ne]=Z,re=ne);else if(J<j&&0>a(le,Z))L[re]=le,L[J]=Z,re=J;else break e}}return $}function a(L,$){var Z=L.sortIndex-$.sortIndex;return Z!==0?Z:L.id-$.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],d=[],g=1,m=null,b=3,v=!1,w=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function A(L){for(var $=t(d);$!==null;){if($.callback===null)s(d);else if($.startTime<=L)s(d),$.sortIndex=$.expirationTime,e(f,$);else break;$=t(d)}}function T(L){if(S=!1,A(L),!w)if(t(f)!==null)w=!0,ee();else{var $=t(d);$!==null&&ae(T,$.startTime-L)}}var R=!1,O=-1,C=5,P=-1;function D(){return!(n.unstable_now()-P<C)}function z(){if(R){var L=n.unstable_now();P=L;var $=!0;try{e:{w=!1,S&&(S=!1,E(O),O=-1),v=!0;var Z=b;try{t:{for(A(L),m=t(f);m!==null&&!(m.expirationTime>L&&D());){var re=m.callback;if(typeof re=="function"){m.callback=null,b=m.priorityLevel;var j=re(m.expirationTime<=L);if(L=n.unstable_now(),typeof j=="function"){m.callback=j,A(L),$=!0;break t}m===t(f)&&s(f),A(L)}else s(f);m=t(f)}if(m!==null)$=!0;else{var Y=t(d);Y!==null&&ae(T,Y.startTime-L),$=!1}}break e}finally{m=null,b=Z,v=!1}$=void 0}}finally{$?U():R=!1}}}var U;if(typeof M=="function")U=function(){M(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Q=F.port2;F.port1.onmessage=z,U=function(){Q.postMessage(null)}}else U=function(){_(z,0)};function ee(){R||(R=!0,U())}function ae(L,$){O=_(function(){L(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,ee())},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(L){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var Z=b;b=$;try{return L()}finally{b=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Z=b;b=L;try{return $()}finally{b=Z}},n.unstable_scheduleCallback=function(L,$,Z){var re=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?re+Z:re):Z=re,L){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Z+j,L={id:g++,callback:$,priorityLevel:L,startTime:Z,expirationTime:j,sortIndex:-1},Z>re?(L.sortIndex=Z,e(d,L),t(f)===null&&L===t(d)&&(S?(E(O),O=-1):S=!0,ae(T,Z-re))):(L.sortIndex=j,e(f,L),w||v||(w=!0,ee())),L},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(L){var $=b;return function(){var Z=b;b=$;try{return L.apply(this,arguments)}finally{b=Z}}}})(dd)),dd}var Xb;function aT(){return Xb||(Xb=1,fd.exports=rT()),fd.exports}var pd={exports:{}},kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function oT(){if(Wb)return kt;Wb=1;var n=Ic();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:d,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kt.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,g)},kt.flushSync=function(f){var d=u.T,g=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=g,s.d.f()}},kt.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},kt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},kt.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,m=h(g,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(f,{crossOrigin:m,integrity:b,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kt.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=h(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},kt.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,m=h(g,d.crossOrigin);s.d.L(f,g,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kt.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=h(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},kt.requestFormReset=function(f){s.d.r(f)},kt.unstable_batchedUpdates=function(f,d){return f(d)},kt.useFormState=function(f,d,g){return u.H.useFormState(f,d,g)},kt.useFormStatus=function(){return u.H.useHostTransitionStatus()},kt.version="19.0.0",kt}var Qb;function lT(){if(Qb)return pd.exports;Qb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pd.exports=oT(),pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function uT(){if(Kb)return uo;Kb=1;var n=aT(),e=Ic(),t=lT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),T=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=R&&i[R]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case d:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case v:return(i.displayName||"Context")+".Provider";case b:return(i._context.displayName||"Context")+".Consumer";case w:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case E:return r=i.displayName||null,r!==null?r:P(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return P(i(r))}catch{}}return null}var D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=Object.assign,U,F;function Q(i){if(U===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);U=r&&r[1]||"",F=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+U+i+F}var ee=!1;function ae(i,r){if(!i||ee)return"";ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(V){var H=V}Reflect.construct(i,[],K)}else{try{K.call()}catch(V){H=V}i.call(K.prototype)}}else{try{throw Error()}catch(V){H=V}(K=i())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),x=y[0],k=y[1];if(x&&k){var B=x.split(`
`),N=k.split(`
`);for(p=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;p<N.length&&!N[p].includes("DetermineComponentFrameRoot");)p++;if(c===B.length||p===N.length)for(c=B.length-1,p=N.length-1;1<=c&&0<=p&&B[c]!==N[p];)p--;for(;1<=c&&0<=p;c--,p--)if(B[c]!==N[p]){if(c!==1||p!==1)do if(c--,p--,0>p||B[c]!==N[p]){var X=`
`+B[c].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=c&&0<=p);break}}}finally{ee=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Q(l):""}function L(i){switch(i.tag){case 26:case 27:case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return i=ae(i.type,!1),i;case 11:return i=ae(i.type.render,!1),i;case 1:return i=ae(i.type,!0),i;default:return""}}function $(i){try{var r="";do r+=L(i),i=i.return;while(i);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Z(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function re(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function j(i){if(Z(i)!==i)throw Error(s(188))}function Y(i){var r=i.alternate;if(!r){if(r=Z(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,c=r;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return j(p),i;if(y===c)return j(p),r;y=y.sibling}throw Error(s(188))}if(l.return!==c.return)l=p,c=y;else{for(var x=!1,k=p.child;k;){if(k===l){x=!0,l=p,c=y;break}if(k===c){x=!0,c=p,l=y;break}k=k.sibling}if(!x){for(k=y.child;k;){if(k===l){x=!0,l=y,c=p;break}if(k===c){x=!0,c=y,l=p;break}k=k.sibling}if(!x)throw Error(s(189))}}if(l.alternate!==c)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function ne(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=ne(i),r!==null)return r;i=i.sibling}return null}var te=Array.isArray,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},oe=[],ze=-1;function xe(i){return{current:i}}function Pe(i){0>ze||(i.current=oe[ze],oe[ze]=null,ze--)}function Re(i,r){ze++,oe[ze]=i.current,i.current=r}var ut=xe(null),vt=xe(null),ct=xe(null),jt=xe(null);function qt(i,r){switch(Re(ct,r),Re(vt,i),Re(ut,null),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?bb(r):0;break;default:if(i=i===8?r.parentNode:r,r=i.tagName,i=i.namespaceURI)i=bb(i),r=vb(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Pe(ut),Re(ut,r)}function Ei(){Pe(ut),Pe(vt),Pe(ct)}function Qs(i){i.memoizedState!==null&&Re(jt,i);var r=ut.current,l=vb(r,i.type);r!==l&&(Re(vt,i),Re(ut,l))}function Ks(i){vt.current===i&&(Pe(ut),Pe(vt)),jt.current===i&&(Pe(jt),io._currentValue=le)}var vl=Object.prototype.hasOwnProperty,th=n.unstable_scheduleCallback,nh=n.unstable_cancelCallback,O1=n.unstable_shouldYield,P1=n.unstable_requestPaint,Un=n.unstable_now,D1=n.unstable_getCurrentPriorityLevel,oy=n.unstable_ImmediatePriority,ly=n.unstable_UserBlockingPriority,_l=n.unstable_NormalPriority,B1=n.unstable_LowPriority,uy=n.unstable_IdlePriority,z1=n.log,j1=n.unstable_setDisableYieldValue,fa=null,Wt=null;function U1(i){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(fa,i,void 0,(i.current.flags&128)===128)}catch{}}function Ti(i){if(typeof z1=="function"&&j1(i),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(fa,i)}catch{}}var Qt=Math.clz32?Math.clz32:N1,L1=Math.log,I1=Math.LN2;function N1(i){return i>>>=0,i===0?32:31-(L1(i)/I1|0)|0}var wl=128,xl=4194304;function rs(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Sl(i,r){var l=i.pendingLanes;if(l===0)return 0;var c=0,p=i.suspendedLanes,y=i.pingedLanes,x=i.warmLanes;i=i.finishedLanes!==0;var k=l&134217727;return k!==0?(l=k&~p,l!==0?c=rs(l):(y&=k,y!==0?c=rs(y):i||(x=k&~x,x!==0&&(c=rs(x))))):(k=l&~p,k!==0?c=rs(k):y!==0?c=rs(y):i||(x=l&~x,x!==0&&(c=rs(x)))),c===0?0:r!==0&&r!==c&&(r&p)===0&&(p=c&-c,x=r&-r,p>=x||p===32&&(x&4194176)!==0)?r:c}function da(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function q1(i,r){switch(i){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cy(){var i=wl;return wl<<=1,(wl&4194176)===0&&(wl=128),i}function hy(){var i=xl;return xl<<=1,(xl&62914560)===0&&(xl=4194304),i}function ih(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function pa(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function G1(i,r,l,c,p,y){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var k=i.entanglements,B=i.expirationTimes,N=i.hiddenUpdates;for(l=x&~l;0<l;){var X=31-Qt(l),K=1<<X;k[X]=0,B[X]=-1;var H=N[X];if(H!==null)for(N[X]=null,X=0;X<H.length;X++){var V=H[X];V!==null&&(V.lane&=-536870913)}l&=~K}c!==0&&fy(i,c,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(x&~r))}function fy(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-Qt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194218}function dy(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var c=31-Qt(l),p=1<<c;p&r|i[c]&r&&(i[c]|=r),l&=~p}}function py(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gy(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:Ub(i.type))}function H1(i,r){var l=J.p;try{return J.p=i,r()}finally{J.p=l}}var Mi=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Mi,Gt="__reactProps$"+Mi,Zs="__reactContainer$"+Mi,sh="__reactEvents$"+Mi,$1="__reactListeners$"+Mi,F1="__reactHandles$"+Mi,yy="__reactResources$"+Mi,ga="__reactMarker$"+Mi;function rh(i){delete i[Tt],delete i[Gt],delete i[sh],delete i[$1],delete i[F1]}function as(i){var r=i[Tt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Zs]||l[Tt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=xb(i);i!==null;){if(l=i[Tt])return l;i=xb(i)}return r}i=l,l=i.parentNode}return null}function Js(i){if(i=i[Tt]||i[Zs]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ya(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function er(i){var r=i[yy];return r||(r=i[yy]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ht(i){i[ga]=!0}var my=new Set,by={};function os(i,r){tr(i,r),tr(i+"Capture",r)}function tr(i,r){for(by[i]=r,i=0;i<r.length;i++)my.add(r[i])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vy={},_y={};function Y1(i){return vl.call(_y,i)?!0:vl.call(vy,i)?!1:V1.test(i)?_y[i]=!0:(vy[i]=!0,!1)}function Al(i,r,l){if(Y1(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function El(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function Qn(i,r,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+c)}}function on(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function wy(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function X1(i){var r=wy(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),c=""+i[r];if(!i.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return p.call(this)},set:function(x){c=""+x,y.call(this,x)}}),Object.defineProperty(i,r,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Tl(i){i._valueTracker||(i._valueTracker=X1(i))}function xy(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return i&&(c=wy(i)?i.checked?"true":"false":i.value),i=c,i!==l?(r.setValue(i),!0):!1}function Ml(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var W1=/[\n"\\]/g;function ln(i){return i.replace(W1,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ah(i,r,l,c,p,y,x,k){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),r!=null?x==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+on(r)):i.value!==""+on(r)&&(i.value=""+on(r)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),r!=null?oh(i,x,on(r)):l!=null?oh(i,x,on(l)):c!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+on(k):i.removeAttribute("name")}function Sy(i,r,l,c,p,y,x,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),r!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||r!=null))return;l=l!=null?""+on(l):"",r=r!=null?""+on(r):l,k||r===i.value||(i.value=r),i.defaultValue=r}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=k?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function oh(i,r,l){r==="number"&&Ml(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function nr(i,r,l,c){if(i=i.options,r){r={};for(var p=0;p<l.length;p++)r["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=r.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&c&&(i[l].defaultSelected=!0)}else{for(l=""+on(l),r=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}r!==null||i[p].disabled||(r=i[p])}r!==null&&(r.selected=!0)}}function Ay(i,r,l){if(r!=null&&(r=""+on(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+on(l):""}function Ey(i,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(s(92));if(te(c)){if(1<c.length)throw Error(s(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=on(r),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function ir(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var Q1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ty(i,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,l):typeof l!="number"||l===0||Q1.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function My(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in r)c=r[p],r.hasOwnProperty(p)&&l[p]!==c&&Ty(i,p,c)}else for(var y in r)r.hasOwnProperty(y)&&Ty(i,y,r[y])}function lh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(i){return Z1.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var uh=null;function ch(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sr=null,rr=null;function ky(i){var r=Js(i);if(r&&(i=r.stateNode)){var l=i[Gt]||null;e:switch(i=r.stateNode,r.type){case"input":if(ah(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ln(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==i&&c.form===i.form){var p=c[Gt]||null;if(!p)throw Error(s(90));ah(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===i.form&&xy(c)}break e;case"textarea":Ay(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&nr(i,!!l.multiple,r,!1)}}}var hh=!1;function Cy(i,r,l){if(hh)return i(r,l);hh=!0;try{var c=i(r);return c}finally{if(hh=!1,(sr!==null||rr!==null)&&(hu(),sr&&(r=sr,i=rr,rr=sr=null,ky(r),i)))for(r=0;r<i.length;r++)ky(i[r])}}function ma(i,r){var l=i.stateNode;if(l===null)return null;var c=l[Gt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var fh=!1;if(Wn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){fh=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{fh=!1}var ki=null,dh=null,Cl=null;function Ry(){if(Cl)return Cl;var i,r=dh,l=r.length,c,p="value"in ki?ki.value:ki.textContent,y=p.length;for(i=0;i<l&&r[i]===p[i];i++);var x=l-i;for(c=1;c<=x&&r[l-c]===p[y-c];c++);return Cl=p.slice(i,1<c?1-c:void 0)}function Rl(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ol(){return!0}function Oy(){return!1}function Ht(i){function r(l,c,p,y,x){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ol:Oy,this.isPropagationStopped=Oy,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),r}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=Ht(ls),va=z({},ls,{view:0,detail:0}),J1=Ht(va),ph,gh,_a,Dl=z({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_a&&(_a&&i.type==="mousemove"?(ph=i.screenX-_a.screenX,gh=i.screenY-_a.screenY):gh=ph=0,_a=i),ph)},movementY:function(i){return"movementY"in i?i.movementY:gh}}),Py=Ht(Dl),eA=z({},Dl,{dataTransfer:0}),tA=Ht(eA),nA=z({},va,{relatedTarget:0}),yh=Ht(nA),iA=z({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),sA=Ht(iA),rA=z({},ls,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),aA=Ht(rA),oA=z({},ls,{data:0}),Dy=Ht(oA),lA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hA(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=cA[i])?!!r[i]:!1}function mh(){return hA}var fA=z({},va,{key:function(i){if(i.key){var r=lA[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Rl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?uA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mh,charCode:function(i){return i.type==="keypress"?Rl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),dA=Ht(fA),pA=z({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=Ht(pA),gA=z({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mh}),yA=Ht(gA),mA=z({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),bA=Ht(mA),vA=z({},Dl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_A=Ht(vA),wA=z({},ls,{newState:0,oldState:0}),xA=Ht(wA),SA=[9,13,27,32],bh=Wn&&"CompositionEvent"in window,wa=null;Wn&&"documentMode"in document&&(wa=document.documentMode);var AA=Wn&&"TextEvent"in window&&!wa,zy=Wn&&(!bh||wa&&8<wa&&11>=wa),jy=" ",Uy=!1;function Ly(i,r){switch(i){case"keyup":return SA.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ar=!1;function EA(i,r){switch(i){case"compositionend":return Iy(r);case"keypress":return r.which!==32?null:(Uy=!0,jy);case"textInput":return i=r.data,i===jy&&Uy?null:i;default:return null}}function TA(i,r){if(ar)return i==="compositionend"||!bh&&Ly(i,r)?(i=Ry(),Cl=dh=ki=null,ar=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zy&&r.locale!=="ko"?null:r.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!MA[i.type]:r==="textarea"}function qy(i,r,l,c){sr?rr?rr.push(c):rr=[c]:sr=c,r=yu(r,"onChange"),0<r.length&&(l=new Pl("onChange","change",null,l,c),i.push({event:l,listeners:r}))}var xa=null,Sa=null;function kA(i){db(i,0)}function Bl(i){var r=ya(i);if(xy(r))return i}function Gy(i,r){if(i==="change")return r}var Hy=!1;if(Wn){var vh;if(Wn){var _h="oninput"in document;if(!_h){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),_h=typeof $y.oninput=="function"}vh=_h}else vh=!1;Hy=vh&&(!document.documentMode||9<document.documentMode)}function Fy(){xa&&(xa.detachEvent("onpropertychange",Vy),Sa=xa=null)}function Vy(i){if(i.propertyName==="value"&&Bl(Sa)){var r=[];qy(r,Sa,i,ch(i)),Cy(kA,r)}}function CA(i,r,l){i==="focusin"?(Fy(),xa=r,Sa=l,xa.attachEvent("onpropertychange",Vy)):i==="focusout"&&Fy()}function RA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bl(Sa)}function OA(i,r){if(i==="click")return Bl(r)}function PA(i,r){if(i==="input"||i==="change")return Bl(r)}function DA(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Kt=typeof Object.is=="function"?Object.is:DA;function Aa(i,r){if(Kt(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!vl.call(r,p)||!Kt(i[p],r[p]))return!1}return!0}function Yy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xy(i,r){var l=Yy(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=r&&c>=r)return{node:l,offset:r-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yy(l)}}function Wy(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Wy(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Qy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ml(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Ml(i.document)}return r}function wh(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function BA(i,r){var l=Qy(r);r=i.focusedElem;var c=i.selectionRange;if(l!==r&&r&&r.ownerDocument&&Wy(r.ownerDocument.documentElement,r)){if(c!==null&&wh(r)){if(i=c.start,l=c.end,l===void 0&&(l=i),"selectionStart"in r)r.selectionStart=i,r.selectionEnd=Math.min(l,r.value.length);else if(l=(i=r.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var p=r.textContent.length,y=Math.min(c.start,p);c=c.end===void 0?y:Math.min(c.end,p),!l.extend&&y>c&&(p=c,c=y,y=p),p=Xy(r,y);var x=Xy(r,c);p&&x&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==x.node||l.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),l.removeAllRanges(),y>c?(l.addRange(i),l.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),l.addRange(i)))}}for(i=[],l=r;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<i.length;r++)l=i[r],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var zA=Wn&&"documentMode"in document&&11>=document.documentMode,or=null,xh=null,Ea=null,Sh=!1;function Ky(i,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sh||or==null||or!==Ml(c)||(c=or,"selectionStart"in c&&wh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&Aa(Ea,c)||(Ea=c,c=yu(xh,"onSelect"),0<c.length&&(r=new Pl("onSelect","select",null,r,l),i.push({event:r,listeners:c}),r.target=or)))}function us(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var lr={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Ah={},Zy={};Wn&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function cs(i){if(Ah[i])return Ah[i];if(!lr[i])return i;var r=lr[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in Zy)return Ah[i]=r[l];return i}var Jy=cs("animationend"),em=cs("animationiteration"),tm=cs("animationstart"),jA=cs("transitionrun"),UA=cs("transitionstart"),LA=cs("transitioncancel"),nm=cs("transitionend"),im=new Map,sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function An(i,r){im.set(i,r),os(r,[i])}var un=[],ur=0,Eh=0;function zl(){for(var i=ur,r=Eh=ur=0;r<i;){var l=un[r];un[r++]=null;var c=un[r];un[r++]=null;var p=un[r];un[r++]=null;var y=un[r];if(un[r++]=null,c!==null&&p!==null){var x=c.pending;x===null?p.next=p:(p.next=x.next,x.next=p),c.pending=p}y!==0&&rm(l,p,y)}}function jl(i,r,l,c){un[ur++]=i,un[ur++]=r,un[ur++]=l,un[ur++]=c,Eh|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Th(i,r,l,c){return jl(i,r,l,c),Ul(i)}function Ci(i,r){return jl(i,null,null,r),Ul(i)}function rm(i,r,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=i.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;p&&r!==null&&i.tag===3&&(y=i.stateNode,p=31-Qt(l),y=y.hiddenUpdates,i=y[p],i===null?y[p]=[r]:i.push(r),r.lane=l|536870912)}function Ul(i){if(50<Qa)throw Qa=0,Df=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var cr={},am=new WeakMap;function cn(i,r){if(typeof i=="object"&&i!==null){var l=am.get(i);return l!==void 0?l:(r={value:i,source:r,stack:$(r)},am.set(i,r),r)}return{value:i,source:r,stack:$(r)}}var hr=[],fr=0,Ll=null,Il=0,hn=[],fn=0,hs=null,Kn=1,Zn="";function fs(i,r){hr[fr++]=Il,hr[fr++]=Ll,Ll=i,Il=r}function om(i,r,l){hn[fn++]=Kn,hn[fn++]=Zn,hn[fn++]=hs,hs=i;var c=Kn;i=Zn;var p=32-Qt(c)-1;c&=~(1<<p),l+=1;var y=32-Qt(r)+p;if(30<y){var x=p-p%5;y=(c&(1<<x)-1).toString(32),c>>=x,p-=x,Kn=1<<32-Qt(r)+p|l<<p|c,Zn=y+i}else Kn=1<<y|l<<p|c,Zn=i}function Mh(i){i.return!==null&&(fs(i,1),om(i,1,0))}function kh(i){for(;i===Ll;)Ll=hr[--fr],hr[fr]=null,Il=hr[--fr],hr[fr]=null;for(;i===hs;)hs=hn[--fn],hn[fn]=null,Zn=hn[--fn],hn[fn]=null,Kn=hn[--fn],hn[fn]=null}var Ut=null,_t=null,De=!1,En=null,Ln=!1,Ch=Error(s(519));function ds(i){var r=Error(s(418,""));throw ka(cn(r,i)),Ch}function lm(i){var r=i.stateNode,l=i.type,c=i.memoizedProps;switch(r[Tt]=i,r[Gt]=c,l){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(l=0;l<Za.length;l++)ke(Za[l],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),Sy(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Tl(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),Ey(r,c.value,c.defaultValue,c.children),Tl(r)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||mb(r.textContent,l)?(c.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),c.onScroll!=null&&ke("scroll",r),c.onScrollEnd!=null&&ke("scrollend",r),c.onClick!=null&&(r.onclick=mu),r=!0):r=!1,r||ds(i)}function um(i){for(Ut=i.return;Ut;)switch(Ut.tag){case 3:case 27:Ln=!0;return;case 5:case 13:Ln=!1;return;default:Ut=Ut.return}}function Ta(i){if(i!==Ut)return!1;if(!De)return um(i),De=!0,!1;var r=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Qf(i.type,i.memoizedProps)),l=!l),l&&(r=!0),r&&_t&&ds(i),um(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(r===0){_t=Mn(i.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;i=i.nextSibling}_t=null}}else _t=Ut?Mn(i.stateNode.nextSibling):null;return!0}function Ma(){_t=Ut=null,De=!1}function ka(i){En===null?En=[i]:En.push(i)}var Ca=Error(s(460)),cm=Error(s(474)),Rh={then:function(){}};function hm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Nl(){}function fm(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(Nl,Nl),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,i===Ca?Error(s(483)):i;default:if(typeof r.status=="string")r.then(Nl,Nl);else{if(i=Ne,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=c}},function(c){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,i===Ca?Error(s(483)):i}throw Ra=r,Ca}}var Ra=null;function dm(){if(Ra===null)throw Error(s(459));var i=Ra;return Ra=null,i}var dr=null,Oa=0;function ql(i){var r=Oa;return Oa+=1,dr===null&&(dr=[]),fm(dr,i,r)}function Pa(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Gl(i,r){throw r.$$typeof===o?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function pm(i){var r=i._init;return r(i._payload)}function gm(i){function r(q,I){if(i){var G=q.deletions;G===null?(q.deletions=[I],q.flags|=16):G.push(I)}}function l(q,I){if(!i)return null;for(;I!==null;)r(q,I),I=I.sibling;return null}function c(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function p(q,I){return q=qi(q,I),q.index=0,q.sibling=null,q}function y(q,I,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<I?(q.flags|=33554434,I):G):(q.flags|=33554434,I)):(q.flags|=1048576,I)}function x(q){return i&&q.alternate===null&&(q.flags|=33554434),q}function k(q,I,G,W){return I===null||I.tag!==6?(I=Ef(G,q.mode,W),I.return=q,I):(I=p(I,G),I.return=q,I)}function B(q,I,G,W){var ue=G.type;return ue===f?X(q,I,G.props.children,W,G.key):I!==null&&(I.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===M&&pm(ue)===I.type)?(I=p(I,G.props),Pa(I,G),I.return=q,I):(I=au(G.type,G.key,G.props,null,q.mode,W),Pa(I,G),I.return=q,I)}function N(q,I,G,W){return I===null||I.tag!==4||I.stateNode.containerInfo!==G.containerInfo||I.stateNode.implementation!==G.implementation?(I=Tf(G,q.mode,W),I.return=q,I):(I=p(I,G.children||[]),I.return=q,I)}function X(q,I,G,W,ue){return I===null||I.tag!==7?(I=Ss(G,q.mode,W,ue),I.return=q,I):(I=p(I,G),I.return=q,I)}function K(q,I,G){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Ef(""+I,q.mode,G),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case u:return G=au(I.type,I.key,I.props,null,q.mode,G),Pa(G,I),G.return=q,G;case h:return I=Tf(I,q.mode,G),I.return=q,I;case M:var W=I._init;return I=W(I._payload),K(q,I,G)}if(te(I)||O(I))return I=Ss(I,q.mode,G,null),I.return=q,I;if(typeof I.then=="function")return K(q,ql(I),G);if(I.$$typeof===v)return K(q,iu(q,I),G);Gl(q,I)}return null}function H(q,I,G,W){var ue=I!==null?I.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ue!==null?null:k(q,I,""+G,W);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case u:return G.key===ue?B(q,I,G,W):null;case h:return G.key===ue?N(q,I,G,W):null;case M:return ue=G._init,G=ue(G._payload),H(q,I,G,W)}if(te(G)||O(G))return ue!==null?null:X(q,I,G,W,null);if(typeof G.then=="function")return H(q,I,ql(G),W);if(G.$$typeof===v)return H(q,I,iu(q,G),W);Gl(q,G)}return null}function V(q,I,G,W,ue){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return q=q.get(G)||null,k(I,q,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case u:return q=q.get(W.key===null?G:W.key)||null,B(I,q,W,ue);case h:return q=q.get(W.key===null?G:W.key)||null,N(I,q,W,ue);case M:var Se=W._init;return W=Se(W._payload),V(q,I,G,W,ue)}if(te(W)||O(W))return q=q.get(G)||null,X(I,q,W,ue,null);if(typeof W.then=="function")return V(q,I,G,ql(W),ue);if(W.$$typeof===v)return V(q,I,G,iu(I,W),ue);Gl(I,W)}return null}function he(q,I,G,W){for(var ue=null,Se=null,de=I,pe=I=0,pt=null;de!==null&&pe<G.length;pe++){de.index>pe?(pt=de,de=null):pt=de.sibling;var Be=H(q,de,G[pe],W);if(Be===null){de===null&&(de=pt);break}i&&de&&Be.alternate===null&&r(q,de),I=y(Be,I,pe),Se===null?ue=Be:Se.sibling=Be,Se=Be,de=pt}if(pe===G.length)return l(q,de),De&&fs(q,pe),ue;if(de===null){for(;pe<G.length;pe++)de=K(q,G[pe],W),de!==null&&(I=y(de,I,pe),Se===null?ue=de:Se.sibling=de,Se=de);return De&&fs(q,pe),ue}for(de=c(de);pe<G.length;pe++)pt=V(de,q,pe,G[pe],W),pt!==null&&(i&&pt.alternate!==null&&de.delete(pt.key===null?pe:pt.key),I=y(pt,I,pe),Se===null?ue=pt:Se.sibling=pt,Se=pt);return i&&de.forEach(function(Xi){return r(q,Xi)}),De&&fs(q,pe),ue}function ye(q,I,G,W){if(G==null)throw Error(s(151));for(var ue=null,Se=null,de=I,pe=I=0,pt=null,Be=G.next();de!==null&&!Be.done;pe++,Be=G.next()){de.index>pe?(pt=de,de=null):pt=de.sibling;var Xi=H(q,de,Be.value,W);if(Xi===null){de===null&&(de=pt);break}i&&de&&Xi.alternate===null&&r(q,de),I=y(Xi,I,pe),Se===null?ue=Xi:Se.sibling=Xi,Se=Xi,de=pt}if(Be.done)return l(q,de),De&&fs(q,pe),ue;if(de===null){for(;!Be.done;pe++,Be=G.next())Be=K(q,Be.value,W),Be!==null&&(I=y(Be,I,pe),Se===null?ue=Be:Se.sibling=Be,Se=Be);return De&&fs(q,pe),ue}for(de=c(de);!Be.done;pe++,Be=G.next())Be=V(de,q,pe,Be.value,W),Be!==null&&(i&&Be.alternate!==null&&de.delete(Be.key===null?pe:Be.key),I=y(Be,I,pe),Se===null?ue=Be:Se.sibling=Be,Se=Be);return i&&de.forEach(function(ZE){return r(q,ZE)}),De&&fs(q,pe),ue}function Ze(q,I,G,W){if(typeof G=="object"&&G!==null&&G.type===f&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case u:e:{for(var ue=G.key;I!==null;){if(I.key===ue){if(ue=G.type,ue===f){if(I.tag===7){l(q,I.sibling),W=p(I,G.props.children),W.return=q,q=W;break e}}else if(I.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===M&&pm(ue)===I.type){l(q,I.sibling),W=p(I,G.props),Pa(W,G),W.return=q,q=W;break e}l(q,I);break}else r(q,I);I=I.sibling}G.type===f?(W=Ss(G.props.children,q.mode,W,G.key),W.return=q,q=W):(W=au(G.type,G.key,G.props,null,q.mode,W),Pa(W,G),W.return=q,q=W)}return x(q);case h:e:{for(ue=G.key;I!==null;){if(I.key===ue)if(I.tag===4&&I.stateNode.containerInfo===G.containerInfo&&I.stateNode.implementation===G.implementation){l(q,I.sibling),W=p(I,G.children||[]),W.return=q,q=W;break e}else{l(q,I);break}else r(q,I);I=I.sibling}W=Tf(G,q.mode,W),W.return=q,q=W}return x(q);case M:return ue=G._init,G=ue(G._payload),Ze(q,I,G,W)}if(te(G))return he(q,I,G,W);if(O(G)){if(ue=O(G),typeof ue!="function")throw Error(s(150));return G=ue.call(G),ye(q,I,G,W)}if(typeof G.then=="function")return Ze(q,I,ql(G),W);if(G.$$typeof===v)return Ze(q,I,iu(q,G),W);Gl(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,I!==null&&I.tag===6?(l(q,I.sibling),W=p(I,G),W.return=q,q=W):(l(q,I),W=Ef(G,q.mode,W),W.return=q,q=W),x(q)):l(q,I)}return function(q,I,G,W){try{Oa=0;var ue=Ze(q,I,G,W);return dr=null,ue}catch(de){if(de===Ca)throw de;var Se=yn(29,de,null,q.mode);return Se.lanes=W,Se.return=q,Se}finally{}}}var ps=gm(!0),ym=gm(!1),pr=xe(null),Hl=xe(0);function mm(i,r){i=ui,Re(Hl,i),Re(pr,r),ui=i|r.baseLanes}function Oh(){Re(Hl,ui),Re(pr,pr.current)}function Ph(){ui=Hl.current,Pe(pr),Pe(Hl)}var dn=xe(null),In=null;function Ri(i){var r=i.alternate;Re(ot,ot.current&1),Re(dn,i),In===null&&(r===null||pr.current!==null||r.memoizedState!==null)&&(In=i)}function bm(i){if(i.tag===22){if(Re(ot,ot.current),Re(dn,i),In===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(In=i)}}else Oi()}function Oi(){Re(ot,ot.current),Re(dn,dn.current)}function Jn(i){Pe(dn),In===i&&(In=null),Pe(ot)}var ot=xe(0);function $l(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var IA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},NA=n.unstable_scheduleCallback,qA=n.unstable_NormalPriority,lt={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dh(){return{controller:new IA,data:new Map,refCount:0}}function Da(i){i.refCount--,i.refCount===0&&NA(qA,function(){i.controller.abort()})}var Ba=null,Bh=0,gr=0,yr=null;function GA(i,r){if(Ba===null){var l=Ba=[];Bh=0,gr=qf(),yr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Bh++,r.then(vm,vm),r}function vm(){if(--Bh===0&&Ba!==null){yr!==null&&(yr.status="fulfilled");var i=Ba;Ba=null,gr=0,yr=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function HA(i,r){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var p=0;p<l.length;p++)(0,l[p])(r)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var _m=D.S;D.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&GA(i,r),_m!==null&&_m(i,r)};var gs=xe(null);function zh(){var i=gs.current;return i!==null?i:Ne.pooledCache}function Fl(i,r){r===null?Re(gs,gs.current):Re(gs,r.pool)}function wm(){var i=zh();return i===null?null:{parent:lt._currentValue,pool:i}}var Pi=0,we=null,je=null,st=null,Vl=!1,mr=!1,ys=!1,Yl=0,za=0,br=null,$A=0;function tt(){throw Error(s(321))}function jh(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!Kt(i[l],r[l]))return!1;return!0}function Uh(i,r,l,c,p,y){return Pi=y,we=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,D.H=i===null||i.memoizedState===null?ms:Di,ys=!1,y=l(c,p),ys=!1,mr&&(y=Sm(r,l,c,p)),xm(i),y}function xm(i){D.H=Nn;var r=je!==null&&je.next!==null;if(Pi=0,st=je=we=null,Vl=!1,za=0,br=null,r)throw Error(s(300));i===null||ft||(i=i.dependencies,i!==null&&nu(i)&&(ft=!0))}function Sm(i,r,l,c){we=i;var p=0;do{if(mr&&(br=null),za=0,mr=!1,25<=p)throw Error(s(301));if(p+=1,st=je=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}D.H=bs,y=r(l,c)}while(mr);return y}function FA(){var i=D.H,r=i.useState()[0];return r=typeof r.then=="function"?ja(r):r,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(we.flags|=1024),r}function Lh(){var i=Yl!==0;return Yl=0,i}function Ih(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Nh(i){if(Vl){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Vl=!1}Pi=0,st=je=we=null,mr=!1,za=Yl=0,br=null}function $t(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?we.memoizedState=st=i:st=st.next=i,st}function rt(){if(je===null){var i=we.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var r=st===null?we.memoizedState:st.next;if(r!==null)st=r,je=i;else{if(i===null)throw we.alternate===null?Error(s(467)):Error(s(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},st===null?we.memoizedState=st=i:st=st.next=i}return st}var Xl;Xl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ja(i){var r=za;return za+=1,br===null&&(br=[]),i=fm(br,i,r),r=we,(st===null?r.memoizedState:st.next)===null&&(r=r.alternate,D.H=r===null||r.memoizedState===null?ms:Di),i}function Wl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ja(i);if(i.$$typeof===v)return Mt(i)}throw Error(s(438,String(i)))}function qh(i){var r=null,l=we.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=we.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Xl(),we.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),c=0;c<i;c++)l[c]=T;return r.index++,l}function ei(i,r){return typeof r=="function"?r(i):r}function Ql(i){var r=rt();return Gh(r,je,i)}function Gh(i,r,l){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=l;var p=i.baseQueue,y=c.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}r.baseQueue=p=y,c.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{r=p.next;var k=x=null,B=null,N=r,X=!1;do{var K=N.lane&-536870913;if(K!==N.lane?(Oe&K)===K:(Pi&K)===K){var H=N.revertLane;if(H===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),K===gr&&(X=!0);else if((Pi&H)===H){N=N.next,H===gr&&(X=!0);continue}else K={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},B===null?(k=B=K,x=y):B=B.next=K,we.lanes|=H,Gi|=H;K=N.action,ys&&l(y,K),y=N.hasEagerState?N.eagerState:l(y,K)}else H={lane:K,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},B===null?(k=B=H,x=y):B=B.next=H,we.lanes|=K,Gi|=K;N=N.next}while(N!==null&&N!==r);if(B===null?x=y:B.next=k,!Kt(y,i.memoizedState)&&(ft=!0,X&&(l=yr,l!==null)))throw l;i.memoizedState=y,i.baseState=x,i.baseQueue=B,c.lastRenderedState=y}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Hh(i){var r=rt(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var c=l.dispatch,p=l.pending,y=r.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do y=i(y,x.action),x=x.next;while(x!==p);Kt(y,r.memoizedState)||(ft=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,c]}function Am(i,r,l){var c=we,p=rt(),y=De;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=r();var x=!Kt((je||p).memoizedState,l);if(x&&(p.memoizedState=l,ft=!0),p=p.queue,Vh(Mm.bind(null,c,p,i),[i]),p.getSnapshot!==r||x||st!==null&&st.memoizedState.tag&1){if(c.flags|=2048,vr(9,Tm.bind(null,c,p,l,r),{destroy:void 0},null),Ne===null)throw Error(s(349));y||(Pi&60)!==0||Em(c,r,l)}return l}function Em(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=we.updateQueue,r===null?(r=Xl(),we.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Tm(i,r,l,c){r.value=l,r.getSnapshot=c,km(r)&&Cm(i)}function Mm(i,r,l){return l(function(){km(r)&&Cm(i)})}function km(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!Kt(i,l)}catch{return!0}}function Cm(i){var r=Ci(i,2);r!==null&&Lt(r,i,2)}function $h(i){var r=$t();if(typeof i=="function"){var l=i;if(i=l(),ys){Ti(!0);try{l()}finally{Ti(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},r}function Rm(i,r,l,c){return i.baseState=l,Gh(i,je,typeof c=="function"?c:ei)}function VA(i,r,l,c,p){if(Jl(i))throw Error(s(485));if(i=r.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};D.T!==null?l(!0):y.isTransition=!1,c(y),l=r.pending,l===null?(y.next=r.pending=y,Om(r,y)):(y.next=l.next,r.pending=l.next=y)}}function Om(i,r){var l=r.action,c=r.payload,p=i.state;if(r.isTransition){var y=D.T,x={};D.T=x;try{var k=l(p,c),B=D.S;B!==null&&B(x,k),Pm(i,r,k)}catch(N){Fh(i,r,N)}finally{D.T=y}}else try{y=l(p,c),Pm(i,r,y)}catch(N){Fh(i,r,N)}}function Pm(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Dm(i,r,c)},function(c){return Fh(i,r,c)}):Dm(i,r,l)}function Dm(i,r,l){r.status="fulfilled",r.value=l,Bm(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Om(i,l)))}function Fh(i,r,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Bm(r),r=r.next;while(r!==c)}i.action=null}function Bm(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function zm(i,r){return r}function jm(i,r){if(De){var l=Ne.formState;if(l!==null){e:{var c=we;if(De){if(_t){t:{for(var p=_t,y=Ln;p.nodeType!==8;){if(!y){p=null;break t}if(p=Mn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){_t=Mn(p.nextSibling),c=p.data==="F!";break e}}ds(c)}c=!1}c&&(r=l[0])}}return l=$t(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zm,lastRenderedState:r},l.queue=c,l=e0.bind(null,we,c),c.dispatch=l,c=$h(!1),y=Kh.bind(null,we,!1,c.queue),c=$t(),p={state:r,dispatch:null,action:i,pending:null},c.queue=p,l=VA.bind(null,we,p,y,l),p.dispatch=l,c.memoizedState=i,[r,l,!1]}function Um(i){var r=rt();return Lm(r,je,i)}function Lm(i,r,l){r=Gh(i,r,zm)[0],i=Ql(ei)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?ja(r):r;var c=rt(),p=c.queue,y=p.dispatch;return l!==c.memoizedState&&(we.flags|=2048,vr(9,YA.bind(null,p,l),{destroy:void 0},null)),[r,y,i]}function YA(i,r){i.action=r}function Im(i){var r=rt(),l=je;if(l!==null)return Lm(r,l,i);rt(),r=r.memoizedState,l=rt();var c=l.queue.dispatch;return l.memoizedState=i,[r,c,!1]}function vr(i,r,l,c){return i={tag:i,create:r,inst:l,deps:c,next:null},r=we.updateQueue,r===null&&(r=Xl(),we.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,r.lastEffect=i),i}function Nm(){return rt().memoizedState}function Kl(i,r,l,c){var p=$t();we.flags|=i,p.memoizedState=vr(1|r,l,{destroy:void 0},c===void 0?null:c)}function Zl(i,r,l,c){var p=rt();c=c===void 0?null:c;var y=p.memoizedState.inst;je!==null&&c!==null&&jh(c,je.memoizedState.deps)?p.memoizedState=vr(r,l,y,c):(we.flags|=i,p.memoizedState=vr(1|r,l,y,c))}function qm(i,r){Kl(8390656,8,i,r)}function Vh(i,r){Zl(2048,8,i,r)}function Gm(i,r){return Zl(4,2,i,r)}function Hm(i,r){return Zl(4,4,i,r)}function $m(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Fm(i,r,l){l=l!=null?l.concat([i]):null,Zl(4,4,$m.bind(null,r,i),l)}function Yh(){}function Vm(i,r){var l=rt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&jh(r,c[1])?c[0]:(l.memoizedState=[i,r],i)}function Ym(i,r){var l=rt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&jh(r,c[1]))return c[0];if(c=i(),ys){Ti(!0);try{i()}finally{Ti(!1)}}return l.memoizedState=[c,r],c}function Xh(i,r,l){return l===void 0||(Pi&1073741824)!==0?i.memoizedState=r:(i.memoizedState=l,i=W0(),we.lanes|=i,Gi|=i,l)}function Xm(i,r,l,c){return Kt(l,r)?l:pr.current!==null?(i=Xh(i,l,c),Kt(i,r)||(ft=!0),i):(Pi&42)===0?(ft=!0,i.memoizedState=l):(i=W0(),we.lanes|=i,Gi|=i,r)}function Wm(i,r,l,c,p){var y=J.p;J.p=y!==0&&8>y?y:8;var x=D.T,k={};D.T=k,Kh(i,!1,r,l);try{var B=p(),N=D.S;if(N!==null&&N(k,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var X=HA(B,c);Ua(i,r,X,tn(i))}else Ua(i,r,c,tn(i))}catch(K){Ua(i,r,{then:function(){},status:"rejected",reason:K},tn())}finally{J.p=y,D.T=x}}function XA(){}function Wh(i,r,l,c){if(i.tag!==5)throw Error(s(476));var p=Qm(i).queue;Wm(i,p,r,le,l===null?XA:function(){return Km(i),l(c)})}function Qm(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:le},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Km(i){var r=Qm(i).next.queue;Ua(i,r,{},tn())}function Qh(){return Mt(io)}function Zm(){return rt().memoizedState}function Jm(){return rt().memoizedState}function WA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=tn();i=ji(l);var c=Ui(r,i,l);c!==null&&(Lt(c,r,l),Na(c,r,l)),r={cache:Dh()},i.payload=r;return}r=r.return}}function QA(i,r,l){var c=tn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Jl(i)?t0(r,l):(l=Th(i,r,l,c),l!==null&&(Lt(l,i,c),n0(l,r,c)))}function e0(i,r,l){var c=tn();Ua(i,r,l,c)}function Ua(i,r,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jl(i))t0(r,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var x=r.lastRenderedState,k=y(x,l);if(p.hasEagerState=!0,p.eagerState=k,Kt(k,x))return jl(i,r,p,0),Ne===null&&zl(),!1}catch{}finally{}if(l=Th(i,r,p,c),l!==null)return Lt(l,i,c),n0(l,r,c),!0}return!1}function Kh(i,r,l,c){if(c={lane:2,revertLane:qf(),action:c,hasEagerState:!1,eagerState:null,next:null},Jl(i)){if(r)throw Error(s(479))}else r=Th(i,l,c,2),r!==null&&Lt(r,i,2)}function Jl(i){var r=i.alternate;return i===we||r!==null&&r===we}function t0(i,r){mr=Vl=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function n0(i,r,l){if((l&4194176)!==0){var c=r.lanes;c&=i.pendingLanes,l|=c,r.lanes=l,dy(i,l)}}var Nn={readContext:Mt,use:Wl,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt};Nn.useCacheRefresh=tt,Nn.useMemoCache=tt,Nn.useHostTransitionStatus=tt,Nn.useFormState=tt,Nn.useActionState=tt,Nn.useOptimistic=tt;var ms={readContext:Mt,use:Wl,useCallback:function(i,r){return $t().memoizedState=[i,r===void 0?null:r],i},useContext:Mt,useEffect:qm,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Kl(4194308,4,$m.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Kl(4194308,4,i,r)},useInsertionEffect:function(i,r){Kl(4,2,i,r)},useMemo:function(i,r){var l=$t();r=r===void 0?null:r;var c=i();if(ys){Ti(!0);try{i()}finally{Ti(!1)}}return l.memoizedState=[c,r],c},useReducer:function(i,r,l){var c=$t();if(l!==void 0){var p=l(r);if(ys){Ti(!0);try{l(r)}finally{Ti(!1)}}}else p=r;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=QA.bind(null,we,i),[c.memoizedState,i]},useRef:function(i){var r=$t();return i={current:i},r.memoizedState=i},useState:function(i){i=$h(i);var r=i.queue,l=e0.bind(null,we,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Yh,useDeferredValue:function(i,r){var l=$t();return Xh(l,i,r)},useTransition:function(){var i=$h(!1);return i=Wm.bind(null,we,i.queue,!0,!1),$t().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var c=we,p=$t();if(De){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Ne===null)throw Error(s(349));(Oe&60)!==0||Em(c,r,l)}p.memoizedState=l;var y={value:l,getSnapshot:r};return p.queue=y,qm(Mm.bind(null,c,y,i),[i]),c.flags|=2048,vr(9,Tm.bind(null,c,y,l,r),{destroy:void 0},null),l},useId:function(){var i=$t(),r=Ne.identifierPrefix;if(De){var l=Zn,c=Kn;l=(c&~(1<<32-Qt(c)-1)).toString(32)+l,r=":"+r+"R"+l,l=Yl++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=$A++,r=":"+r+"r"+l.toString(32)+":";return i.memoizedState=r},useCacheRefresh:function(){return $t().memoizedState=WA.bind(null,we)}};ms.useMemoCache=qh,ms.useHostTransitionStatus=Qh,ms.useFormState=jm,ms.useActionState=jm,ms.useOptimistic=function(i){var r=$t();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Kh.bind(null,we,!0,l),l.dispatch=r,[i,r]};var Di={readContext:Mt,use:Wl,useCallback:Vm,useContext:Mt,useEffect:Vh,useImperativeHandle:Fm,useInsertionEffect:Gm,useLayoutEffect:Hm,useMemo:Ym,useReducer:Ql,useRef:Nm,useState:function(){return Ql(ei)},useDebugValue:Yh,useDeferredValue:function(i,r){var l=rt();return Xm(l,je.memoizedState,i,r)},useTransition:function(){var i=Ql(ei)[0],r=rt().memoizedState;return[typeof i=="boolean"?i:ja(i),r]},useSyncExternalStore:Am,useId:Zm};Di.useCacheRefresh=Jm,Di.useMemoCache=qh,Di.useHostTransitionStatus=Qh,Di.useFormState=Um,Di.useActionState=Um,Di.useOptimistic=function(i,r){var l=rt();return Rm(l,je,i,r)};var bs={readContext:Mt,use:Wl,useCallback:Vm,useContext:Mt,useEffect:Vh,useImperativeHandle:Fm,useInsertionEffect:Gm,useLayoutEffect:Hm,useMemo:Ym,useReducer:Hh,useRef:Nm,useState:function(){return Hh(ei)},useDebugValue:Yh,useDeferredValue:function(i,r){var l=rt();return je===null?Xh(l,i,r):Xm(l,je.memoizedState,i,r)},useTransition:function(){var i=Hh(ei)[0],r=rt().memoizedState;return[typeof i=="boolean"?i:ja(i),r]},useSyncExternalStore:Am,useId:Zm};bs.useCacheRefresh=Jm,bs.useMemoCache=qh,bs.useHostTransitionStatus=Qh,bs.useFormState=Im,bs.useActionState=Im,bs.useOptimistic=function(i,r){var l=rt();return je!==null?Rm(l,je,i,r):(l.baseState=i,[i,l.queue.dispatch])};function Zh(i,r,l,c){r=i.memoizedState,l=l(c,r),l=l==null?r:z({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Jh={isMounted:function(i){return(i=i._reactInternals)?Z(i)===i:!1},enqueueSetState:function(i,r,l){i=i._reactInternals;var c=tn(),p=ji(c);p.payload=r,l!=null&&(p.callback=l),r=Ui(i,p,c),r!==null&&(Lt(r,i,c),Na(r,i,c))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var c=tn(),p=ji(c);p.tag=1,p.payload=r,l!=null&&(p.callback=l),r=Ui(i,p,c),r!==null&&(Lt(r,i,c),Na(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=tn(),c=ji(l);c.tag=2,r!=null&&(c.callback=r),r=Ui(i,c,l),r!==null&&(Lt(r,i,l),Na(r,i,l))}};function i0(i,r,l,c,p,y,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,x):r.prototype&&r.prototype.isPureReactComponent?!Aa(l,c)||!Aa(p,y):!0}function s0(i,r,l,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==i&&Jh.enqueueReplaceState(r,r.state,null)}function vs(i,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(i=i.defaultProps){l===r&&(l=z({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}var eu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function r0(i){eu(i)}function a0(i){console.error(i)}function o0(i){eu(i)}function tu(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function l0(i,r,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function ef(i,r,l){return l=ji(l),l.tag=3,l.payload={element:null},l.callback=function(){tu(i,r)},l}function u0(i){return i=ji(i),i.tag=3,i}function c0(i,r,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;i.payload=function(){return p(y)},i.callback=function(){l0(r,l,c)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){l0(r,l,c),typeof p!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function KA(i,r,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Ia(r,l,p,!0),l=dn.current,l!==null){switch(l.tag){case 13:return In===null?jf():l.alternate===null&&Ke===0&&(Ke=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Rh?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Lf(i,c,p)),!1;case 22:return l.flags|=65536,c===Rh?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Lf(i,c,p)),!1}throw Error(s(435,l.tag))}return Lf(i,c,p),jf(),!1}if(De)return r=dn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,c!==Ch&&(i=Error(s(422),{cause:c}),ka(cn(i,l)))):(c!==Ch&&(r=Error(s(423),{cause:c}),ka(cn(r,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=cn(c,l),p=ef(i.stateNode,c,p),yf(i,p),Ke!==4&&(Ke=2)),!1;var y=Error(s(520),{cause:c});if(y=cn(y,l),Xa===null?Xa=[y]:Xa.push(y),Ke!==4&&(Ke=2),r===null)return!0;c=cn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=ef(l.stateNode,c,i),yf(l,i),!1;case 1:if(r=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hi===null||!Hi.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=u0(p),c0(p,i,l,c),yf(l,p),!1}l=l.return}while(l!==null);return!1}var h0=Error(s(461)),ft=!1;function wt(i,r,l,c){r.child=i===null?ym(r,null,l,c):ps(r,i.child,l,c)}function f0(i,r,l,c,p){l=l.render;var y=r.ref;if("ref"in c){var x={};for(var k in c)k!=="ref"&&(x[k]=c[k])}else x=c;return ws(r),c=Uh(i,r,l,x,y,p),k=Lh(),i!==null&&!ft?(Ih(i,r,p),ti(i,r,p)):(De&&k&&Mh(r),r.flags|=1,wt(i,r,c,p),r.child)}function d0(i,r,l,c,p){if(i===null){var y=l.type;return typeof y=="function"&&!Af(y)&&y.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=y,p0(i,r,y,c,p)):(i=au(l.type,null,c,r,r.mode,p),i.ref=r.ref,i.return=r,r.child=i)}if(y=i.child,!cf(i,p)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:Aa,l(x,c)&&i.ref===r.ref)return ti(i,r,p)}return r.flags|=1,i=qi(y,c),i.ref=r.ref,i.return=r,r.child=i}function p0(i,r,l,c,p){if(i!==null){var y=i.memoizedProps;if(Aa(y,c)&&i.ref===r.ref)if(ft=!1,r.pendingProps=c=y,cf(i,p))(i.flags&131072)!==0&&(ft=!0);else return r.lanes=i.lanes,ti(i,r,p)}return tf(i,r,l,c,p)}function g0(i,r,l){var c=r.pendingProps,p=c.children,y=(r.stateNode._pendingVisibility&2)!==0,x=i!==null?i.memoizedState:null;if(La(i,r),c.mode==="hidden"||y){if((r.flags&128)!==0){if(c=x!==null?x.baseLanes|l:l,i!==null){for(p=r.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;r.childLanes=y&~c}else r.childLanes=0,r.child=null;return y0(i,r,c,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fl(r,x!==null?x.cachePool:null),x!==null?mm(r,x):Oh(),bm(r);else return r.lanes=r.childLanes=536870912,y0(i,r,x!==null?x.baseLanes|l:l,l)}else x!==null?(Fl(r,x.cachePool),mm(r,x),Oi(),r.memoizedState=null):(i!==null&&Fl(r,null),Oh(),Oi());return wt(i,r,p,l),r.child}function y0(i,r,l,c){var p=zh();return p=p===null?null:{parent:lt._currentValue,pool:p},r.memoizedState={baseLanes:l,cachePool:p},i!==null&&Fl(r,null),Oh(),bm(r),i!==null&&Ia(i,r,c,!0),null}function La(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=2097664)}}function tf(i,r,l,c,p){return ws(r),l=Uh(i,r,l,c,void 0,p),c=Lh(),i!==null&&!ft?(Ih(i,r,p),ti(i,r,p)):(De&&c&&Mh(r),r.flags|=1,wt(i,r,l,p),r.child)}function m0(i,r,l,c,p,y){return ws(r),r.updateQueue=null,l=Sm(r,c,l,p),xm(i),c=Lh(),i!==null&&!ft?(Ih(i,r,y),ti(i,r,y)):(De&&c&&Mh(r),r.flags|=1,wt(i,r,l,y),r.child)}function b0(i,r,l,c,p){if(ws(r),r.stateNode===null){var y=cr,x=l.contextType;typeof x=="object"&&x!==null&&(y=Mt(x)),y=new l(c,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Jh,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=c,y.state=r.memoizedState,y.refs={},pf(r),x=l.contextType,y.context=typeof x=="object"&&x!==null?Mt(x):cr,y.state=r.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Zh(r,l,x,c),y.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Jh.enqueueReplaceState(y,y.state,null),Ga(r,c,y,p),qa(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){y=r.stateNode;var k=r.memoizedProps,B=vs(l,k);y.props=B;var N=y.context,X=l.contextType;x=cr,typeof X=="object"&&X!==null&&(x=Mt(X));var K=l.getDerivedStateFromProps;X=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||N!==x)&&s0(r,y,c,x),zi=!1;var H=r.memoizedState;y.state=H,Ga(r,c,y,p),qa(),N=r.memoizedState,k||H!==N||zi?(typeof K=="function"&&(Zh(r,l,K,c),N=r.memoizedState),(B=zi||i0(r,l,B,c,H,N,x))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=N),y.props=c,y.state=N,y.context=x,c=B):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{y=r.stateNode,gf(i,r),x=r.memoizedProps,X=vs(l,x),y.props=X,K=r.pendingProps,H=y.context,N=l.contextType,B=cr,typeof N=="object"&&N!==null&&(B=Mt(N)),k=l.getDerivedStateFromProps,(N=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==K||H!==B)&&s0(r,y,c,B),zi=!1,H=r.memoizedState,y.state=H,Ga(r,c,y,p),qa();var V=r.memoizedState;x!==K||H!==V||zi||i!==null&&i.dependencies!==null&&nu(i.dependencies)?(typeof k=="function"&&(Zh(r,l,k,c),V=r.memoizedState),(X=zi||i0(r,l,X,c,H,V,B)||i!==null&&i.dependencies!==null&&nu(i.dependencies))?(N||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,V,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,V,B)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&H===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&H===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=V),y.props=c,y.state=V,y.context=B,c=X):(typeof y.componentDidUpdate!="function"||x===i.memoizedProps&&H===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&H===i.memoizedState||(r.flags|=1024),c=!1)}return y=c,La(i,r),c=(r.flags&128)!==0,y||c?(y=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,i!==null&&c?(r.child=ps(r,i.child,null,p),r.child=ps(r,null,l,p)):wt(i,r,l,p),r.memoizedState=y.state,i=r.child):i=ti(i,r,p),i}function v0(i,r,l,c){return Ma(),r.flags|=256,wt(i,r,l,c),r.child}var nf={dehydrated:null,treeContext:null,retryLane:0};function sf(i){return{baseLanes:i,cachePool:wm()}}function rf(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=mn),i}function _0(i,r,l){var c=r.pendingProps,p=!1,y=(r.flags&128)!==0,x;if((x=y)||(x=i!==null&&i.memoizedState===null?!1:(ot.current&2)!==0),x&&(p=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,i===null){if(De){if(p?Ri(r):Oi(),De){var k=_t,B;if(B=k){e:{for(B=k,k=Ln;B.nodeType!==8;){if(!k){k=null;break e}if(B=Mn(B.nextSibling),B===null){k=null;break e}}k=B}k!==null?(r.memoizedState={dehydrated:k,treeContext:hs!==null?{id:Kn,overflow:Zn}:null,retryLane:536870912},B=yn(18,null,null,0),B.stateNode=k,B.return=r,r.child=B,Ut=r,_t=null,B=!0):B=!1}B||ds(r)}if(k=r.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return k.data==="$!"?r.lanes=16:r.lanes=536870912,null;Jn(r)}return k=c.children,c=c.fallback,p?(Oi(),p=r.mode,k=of({mode:"hidden",children:k},p),c=Ss(c,p,l,null),k.return=r,c.return=r,k.sibling=c,r.child=k,p=r.child,p.memoizedState=sf(l),p.childLanes=rf(i,x,l),r.memoizedState=nf,c):(Ri(r),af(r,k))}if(B=i.memoizedState,B!==null&&(k=B.dehydrated,k!==null)){if(y)r.flags&256?(Ri(r),r.flags&=-257,r=lf(i,r,l)):r.memoizedState!==null?(Oi(),r.child=i.child,r.flags|=128,r=null):(Oi(),p=c.fallback,k=r.mode,c=of({mode:"visible",children:c.children},k),p=Ss(p,k,l,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,ps(r,i.child,null,l),c=r.child,c.memoizedState=sf(l),c.childLanes=rf(i,x,l),r.memoizedState=nf,r=p);else if(Ri(r),k.data==="$!"){if(x=k.nextSibling&&k.nextSibling.dataset,x)var N=x.dgst;x=N,c=Error(s(419)),c.stack="",c.digest=x,ka({value:c,source:null,stack:null}),r=lf(i,r,l)}else if(ft||Ia(i,r,l,!1),x=(l&i.childLanes)!==0,ft||x){if(x=Ne,x!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(x.suspendedLanes|l))!==0?0:c,c!==0&&c!==B.retryLane)throw B.retryLane=c,Ci(i,c),Lt(x,i,c),h0}k.data==="$?"||jf(),r=lf(i,r,l)}else k.data==="$?"?(r.flags|=128,r.child=i.child,r=fE.bind(null,i),k._reactRetry=r,r=null):(i=B.treeContext,_t=Mn(k.nextSibling),Ut=r,De=!0,En=null,Ln=!1,i!==null&&(hn[fn++]=Kn,hn[fn++]=Zn,hn[fn++]=hs,Kn=i.id,Zn=i.overflow,hs=r),r=af(r,c.children),r.flags|=4096);return r}return p?(Oi(),p=c.fallback,k=r.mode,B=i.child,N=B.sibling,c=qi(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&31457280,N!==null?p=qi(N,p):(p=Ss(p,k,l,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,k=i.child.memoizedState,k===null?k=sf(l):(B=k.cachePool,B!==null?(N=lt._currentValue,B=B.parent!==N?{parent:N,pool:N}:B):B=wm(),k={baseLanes:k.baseLanes|l,cachePool:B}),p.memoizedState=k,p.childLanes=rf(i,x,l),r.memoizedState=nf,c):(Ri(r),l=i.child,i=l.sibling,l=qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,i!==null&&(x=r.deletions,x===null?(r.deletions=[i],r.flags|=16):x.push(i)),r.child=l,r.memoizedState=null,l)}function af(i,r){return r=of({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function of(i,r){return V0(i,r,0,null)}function lf(i,r,l){return ps(r,i.child,null,l),i=af(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function w0(i,r,l){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),ff(i.return,r,l)}function uf(i,r,l,c,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=l,y.tailMode=p)}function x0(i,r,l){var c=r.pendingProps,p=c.revealOrder,y=c.tail;if(wt(i,r,c.children,l),c=ot.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&w0(i,l,r);else if(i.tag===19)w0(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(Re(ot,c),p){case"forwards":for(l=r.child,p=null;l!==null;)i=l.alternate,i!==null&&$l(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=r.child,r.child=null):(p=l.sibling,l.sibling=null),uf(r,!1,p,l,y);break;case"backwards":for(l=null,p=r.child,r.child=null;p!==null;){if(i=p.alternate,i!==null&&$l(i)===null){r.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}uf(r,!0,l,null,y);break;case"together":uf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ti(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Gi|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Ia(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=qi(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=qi(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function cf(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&nu(i)))}function ZA(i,r,l){switch(r.tag){case 3:qt(r,r.stateNode.containerInfo),Bi(r,lt,i.memoizedState.cache),Ma();break;case 27:case 5:Qs(r);break;case 4:qt(r,r.stateNode.containerInfo);break;case 10:Bi(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ri(r),r.flags|=128,null):(l&r.child.childLanes)!==0?_0(i,r,l):(Ri(r),i=ti(i,r,l),i!==null?i.sibling:null);Ri(r);break;case 19:var p=(i.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Ia(i,r,l,!1),c=(l&r.childLanes)!==0),p){if(c)return x0(i,r,l);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Re(ot,ot.current),c)break;return null;case 22:case 23:return r.lanes=0,g0(i,r,l);case 24:Bi(r,lt,i.memoizedState.cache)}return ti(i,r,l)}function S0(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)ft=!0;else{if(!cf(i,l)&&(r.flags&128)===0)return ft=!1,ZA(i,r,l);ft=(i.flags&131072)!==0}else ft=!1,De&&(r.flags&1048576)!==0&&om(r,Il,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var c=r.elementType,p=c._init;if(c=p(c._payload),r.type=c,typeof c=="function")Af(c)?(i=vs(c,i),r.tag=1,r=b0(null,r,c,i,l)):(r.tag=0,r=tf(null,r,c,i,l));else{if(c!=null){if(p=c.$$typeof,p===w){r.tag=11,r=f0(null,r,c,i,l);break e}else if(p===E){r.tag=14,r=d0(null,r,c,i,l);break e}}throw r=P(c)||c,Error(s(306,r,""))}}return r;case 0:return tf(i,r,r.type,r.pendingProps,l);case 1:return c=r.type,p=vs(c,r.pendingProps),b0(i,r,c,p,l);case 3:e:{if(qt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));var y=r.pendingProps;p=r.memoizedState,c=p.element,gf(i,r),Ga(r,y,null,l);var x=r.memoizedState;if(y=x.cache,Bi(r,lt,y),y!==p.cache&&df(r,[lt],l,!0),qa(),y=x.element,p.isDehydrated)if(p={element:y,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=v0(i,r,y,l);break e}else if(y!==c){c=cn(Error(s(424)),r),ka(c),r=v0(i,r,y,l);break e}else for(_t=Mn(r.stateNode.containerInfo.firstChild),Ut=r,De=!0,En=null,Ln=!0,l=ym(r,null,y,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ma(),y===c){r=ti(i,r,l);break e}wt(i,r,y,l)}r=r.child}return r;case 26:return La(i,r),i===null?(l=Tb(r.type,null,r.pendingProps,null))?r.memoizedState=l:De||(l=r.type,i=r.pendingProps,c=bu(ct.current).createElement(l),c[Tt]=r,c[Gt]=i,xt(c,l,i),ht(c),r.stateNode=c):r.memoizedState=Tb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Qs(r),i===null&&De&&(c=r.stateNode=Sb(r.type,r.pendingProps,ct.current),Ut=r,Ln=!0,_t=Mn(c.firstChild)),c=r.pendingProps.children,i!==null||De?wt(i,r,c,l):r.child=ps(r,null,c,l),La(i,r),r.child;case 5:return i===null&&De&&((p=c=_t)&&(c=kE(c,r.type,r.pendingProps,Ln),c!==null?(r.stateNode=c,Ut=r,_t=Mn(c.firstChild),Ln=!1,p=!0):p=!1),p||ds(r)),Qs(r),p=r.type,y=r.pendingProps,x=i!==null?i.memoizedProps:null,c=y.children,Qf(p,y)?c=null:x!==null&&Qf(p,x)&&(r.flags|=32),r.memoizedState!==null&&(p=Uh(i,r,FA,null,null,l),io._currentValue=p),La(i,r),wt(i,r,c,l),r.child;case 6:return i===null&&De&&((i=l=_t)&&(l=CE(l,r.pendingProps,Ln),l!==null?(r.stateNode=l,Ut=r,_t=null,i=!0):i=!1),i||ds(r)),null;case 13:return _0(i,r,l);case 4:return qt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=ps(r,null,c,l):wt(i,r,c,l),r.child;case 11:return f0(i,r,r.type,r.pendingProps,l);case 7:return wt(i,r,r.pendingProps,l),r.child;case 8:return wt(i,r,r.pendingProps.children,l),r.child;case 12:return wt(i,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Bi(r,r.type,c.value),wt(i,r,c.children,l),r.child;case 9:return p=r.type._context,c=r.pendingProps.children,ws(r),p=Mt(p),c=c(p),r.flags|=1,wt(i,r,c,l),r.child;case 14:return d0(i,r,r.type,r.pendingProps,l);case 15:return p0(i,r,r.type,r.pendingProps,l);case 19:return x0(i,r,l);case 22:return g0(i,r,l);case 24:return ws(r),c=Mt(lt),i===null?(p=zh(),p===null&&(p=Ne,y=Dh(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),r.memoizedState={parent:c,cache:p},pf(r),Bi(r,lt,p)):((i.lanes&l)!==0&&(gf(i,r),Ga(r,null,null,l),qa()),p=i.memoizedState,y=r.memoizedState,p.parent!==c?(p={parent:c,cache:c},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),Bi(r,lt,c)):(c=y.cache,Bi(r,lt,c),c!==p.cache&&df(r,[lt],l,!0))),wt(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var hf=xe(null),_s=null,ni=null;function Bi(i,r,l){Re(hf,r._currentValue),r._currentValue=l}function ii(i){i._currentValue=hf.current,Pe(hf)}function ff(i,r,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===l)break;i=i.return}}function df(i,r,l,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var x=p.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=p;for(var B=0;B<r.length;B++)if(k.context===r[B]){y.lanes|=l,k=y.alternate,k!==null&&(k.lanes|=l),ff(y.return,l,i),c||(x=null);break e}y=k.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(s(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),ff(x,l,i),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===i){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function Ia(i,r,l,c){i=null;for(var p=r,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var k=p.type;Kt(p.pendingProps.value,x.value)||(i!==null?i.push(k):i=[k])}}else if(p===jt.current){if(x=p.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(io):i=[io])}p=p.return}i!==null&&df(r,i,l,c),r.flags|=262144}function nu(i){for(i=i.firstContext;i!==null;){if(!Kt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ws(i){_s=i,ni=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mt(i){return A0(_s,i)}function iu(i,r){return _s===null&&ws(i),A0(i,r)}function A0(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ni===null){if(i===null)throw Error(s(308));ni=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ni=ni.next=r;return l}var zi=!1;function pf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ji(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ui(i,r,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var p=c.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),c.pending=r,r=Ul(i),rm(i,null,l),r}return jl(i,c,r,l),Ul(i)}function Na(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194176)!==0)){var c=r.lanes;c&=i.pendingLanes,l|=c,r.lanes=l,dy(i,l)}}function yf(i,r){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?p=y=r:y=y.next=r}else p=y=r;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var mf=!1;function qa(){if(mf){var i=yr;if(i!==null)throw i}}function Ga(i,r,l,c){mf=!1;var p=i.updateQueue;zi=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var B=k,N=B.next;B.next=null,x===null?y=N:x.next=N,x=B;var X=i.alternate;X!==null&&(X=X.updateQueue,k=X.lastBaseUpdate,k!==x&&(k===null?X.firstBaseUpdate=N:k.next=N,X.lastBaseUpdate=B))}if(y!==null){var K=p.baseState;x=0,X=N=B=null,k=y;do{var H=k.lane&-536870913,V=H!==k.lane;if(V?(Oe&H)===H:(c&H)===H){H!==0&&H===gr&&(mf=!0),X!==null&&(X=X.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var he=i,ye=k;H=r;var Ze=l;switch(ye.tag){case 1:if(he=ye.payload,typeof he=="function"){K=he.call(Ze,K,H);break e}K=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ye.payload,H=typeof he=="function"?he.call(Ze,K,H):he,H==null)break e;K=z({},K,H);break e;case 2:zi=!0}}H=k.callback,H!==null&&(i.flags|=64,V&&(i.flags|=8192),V=p.callbacks,V===null?p.callbacks=[H]:V.push(H))}else V={lane:H,tag:k.tag,payload:k.payload,callback:k.callback,next:null},X===null?(N=X=V,B=K):X=X.next=V,x|=H;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;V=k,k=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);X===null&&(B=K),p.baseState=B,p.firstBaseUpdate=N,p.lastBaseUpdate=X,y===null&&(p.shared.lanes=0),Gi|=x,i.lanes=x,i.memoizedState=K}}function E0(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function T0(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)E0(l[i],r)}function Ha(i,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&i)===i){c=void 0;var y=l.create,x=l.inst;c=y(),x.destroy=c}l=l.next}while(l!==p)}}catch(k){Ie(r,r.return,k)}}function Li(i,r,l){try{var c=r.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&i)===i){var x=c.inst,k=x.destroy;if(k!==void 0){x.destroy=void 0,p=r;var B=l;try{k()}catch(N){Ie(p,B,N)}}}c=c.next}while(c!==y)}}catch(N){Ie(r,r.return,N)}}function M0(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{T0(r,l)}catch(c){Ie(i,i.return,c)}}}function k0(i,r,l){l.props=vs(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){Ie(i,r,c)}}function xs(i,r){try{var l=i.ref;if(l!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var p=c;break;default:p=c}typeof l=="function"?i.refCleanup=l(p):l.current=p}}catch(y){Ie(i,r,y)}}function Zt(i,r){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){Ie(i,r,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Ie(i,r,p)}else l.current=null}function C0(i){var r=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){Ie(i,i.return,p)}}function R0(i,r,l){try{var c=i.stateNode;SE(c,i.type,l,r),c[Gt]=r}catch(p){Ie(i,i.return,p)}}function O0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function bf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||O0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vf(i,r,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(i,r):l.insertBefore(i,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(i,l)):(r=l,r.appendChild(i)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=mu));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(vf(i,r,l),i=i.sibling;i!==null;)vf(i,r,l),i=i.sibling}function su(i,r,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(su(i,r,l),i=i.sibling;i!==null;)su(i,r,l),i=i.sibling}var si=!1,Qe=!1,_f=!1,P0=typeof WeakSet=="function"?WeakSet:Set,dt=null,D0=!1;function JA(i,r){if(i=i.containerInfo,Xf=Au,i=Qy(i),wh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,k=-1,B=-1,N=0,X=0,K=i,H=null;t:for(;;){for(var V;K!==l||p!==0&&K.nodeType!==3||(k=x+p),K!==y||c!==0&&K.nodeType!==3||(B=x+c),K.nodeType===3&&(x+=K.nodeValue.length),(V=K.firstChild)!==null;)H=K,K=V;for(;;){if(K===i)break t;if(H===l&&++N===p&&(k=x),H===y&&++X===c&&(B=x),(V=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=V}l=k===-1||B===-1?null:{start:k,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wf={focusedElem:i,selectionRange:l},Au=!1,dt=r;dt!==null;)if(r=dt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,dt=i;else for(;dt!==null;){switch(r=dt,y=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=r,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var he=vs(l.type,p,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(he,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(ye){Ie(l,l.return,ye)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Jf(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,dt=i;break}dt=r.return}return he=D0,D0=!1,he}function B0(i,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ai(i,l),c&4&&Ha(5,l);break;case 1:if(ai(i,l),c&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(k){Ie(l,l.return,k)}else{var p=vs(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(p,r,i.__reactInternalSnapshotBeforeUpdate)}catch(k){Ie(l,l.return,k)}}c&64&&M0(l),c&512&&xs(l,l.return);break;case 3:if(ai(i,l),c&64&&(c=l.updateQueue,c!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{T0(c,i)}catch(k){Ie(l,l.return,k)}}break;case 26:ai(i,l),c&512&&xs(l,l.return);break;case 27:case 5:ai(i,l),r===null&&c&4&&C0(l),c&512&&xs(l,l.return);break;case 12:ai(i,l);break;case 13:ai(i,l),c&4&&U0(i,l);break;case 22:if(p=l.memoizedState!==null||si,!p){r=r!==null&&r.memoizedState!==null||Qe;var y=si,x=Qe;si=p,(Qe=r)&&!x?Ii(i,l,(l.subtreeFlags&8772)!==0):ai(i,l),si=y,Qe=x}c&512&&(l.memoizedProps.mode==="manual"?xs(l,l.return):Zt(l,l.return));break;default:ai(i,l)}}function z0(i){var r=i.alternate;r!==null&&(i.alternate=null,z0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&rh(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var at=null,Jt=!1;function ri(i,r,l){for(l=l.child;l!==null;)j0(i,r,l),l=l.sibling}function j0(i,r,l){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(fa,l)}catch{}switch(l.tag){case 26:Qe||Zt(l,r),ri(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Qe||Zt(l,r);var c=at,p=Jt;for(at=l.stateNode,ri(i,r,l),l=l.stateNode,r=l.attributes;r.length;)l.removeAttributeNode(r[0]);rh(l),at=c,Jt=p;break;case 5:Qe||Zt(l,r);case 6:p=at;var y=Jt;if(at=null,ri(i,r,l),at=p,Jt=y,at!==null)if(Jt)try{i=at,c=l.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(x){Ie(l,r,x)}else try{at.removeChild(l.stateNode)}catch(x){Ie(l,r,x)}break;case 18:at!==null&&(Jt?(r=at,l=l.stateNode,r.nodeType===8?Zf(r.parentNode,l):r.nodeType===1&&Zf(r,l),oo(r)):Zf(at,l.stateNode));break;case 4:c=at,p=Jt,at=l.stateNode.containerInfo,Jt=!0,ri(i,r,l),at=c,Jt=p;break;case 0:case 11:case 14:case 15:Qe||Li(2,l,r),Qe||Li(4,l,r),ri(i,r,l);break;case 1:Qe||(Zt(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&k0(l,r,c)),ri(i,r,l);break;case 21:ri(i,r,l);break;case 22:Qe||Zt(l,r),Qe=(c=Qe)||l.memoizedState!==null,ri(i,r,l),Qe=c;break;default:ri(i,r,l)}}function U0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{oo(i)}catch(l){Ie(r,r.return,l)}}function eE(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new P0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new P0),r;default:throw Error(s(435,i.tag))}}function wf(i,r){var l=eE(i);r.forEach(function(c){var p=dE.bind(null,i,c);l.has(c)||(l.add(c),c.then(p,p))})}function pn(i,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=i,x=r,k=x;e:for(;k!==null;){switch(k.tag){case 27:case 5:at=k.stateNode,Jt=!1;break e;case 3:at=k.stateNode.containerInfo,Jt=!0;break e;case 4:at=k.stateNode.containerInfo,Jt=!0;break e}k=k.return}if(at===null)throw Error(s(160));j0(y,x,p),at=null,Jt=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)L0(r,i),r=r.sibling}var Tn=null;function L0(i,r){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(r,i),gn(i),c&4&&(Li(3,i,i.return),Ha(3,i),Li(5,i,i.return));break;case 1:pn(r,i),gn(i),c&512&&(Qe||l===null||Zt(l,l.return)),c&64&&si&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Tn;if(pn(r,i),gn(i),c&512&&(Qe||l===null||Zt(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ga]||y[Tt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),xt(y,c,l),y[Tt]=i,ht(y),c=y;break e;case"link":var x=Cb("link","href",p).get(c+(l.href||""));if(x){for(var k=0;k<x.length;k++)if(y=x[k],y.getAttribute("href")===(l.href==null?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(k,1);break t}}y=p.createElement(c),xt(y,c,l),p.head.appendChild(y);break;case"meta":if(x=Cb("meta","content",p).get(c+(l.content||""))){for(k=0;k<x.length;k++)if(y=x[k],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(k,1);break t}}y=p.createElement(c),xt(y,c,l),p.head.appendChild(y);break;default:throw Error(s(468,c))}y[Tt]=i,ht(y),c=y}i.stateNode=c}else Rb(p,i.type,i.stateNode);else i.stateNode=kb(p,c,i.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?Rb(p,i.type,i.stateNode):kb(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&R0(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){p=i.stateNode,y=i.memoizedProps;try{for(var B=p.firstChild;B;){var N=B.nextSibling,X=B.nodeName;B[ga]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&B.rel.toLowerCase()==="stylesheet"||p.removeChild(B),B=N}for(var K=i.type,H=p.attributes;H.length;)p.removeAttributeNode(H[0]);xt(p,K,y),p[Tt]=i,p[Gt]=y}catch(he){Ie(i,i.return,he)}}case 5:if(pn(r,i),gn(i),c&512&&(Qe||l===null||Zt(l,l.return)),i.flags&32){p=i.stateNode;try{ir(p,"")}catch(he){Ie(i,i.return,he)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,R0(i,p,l!==null?l.memoizedProps:p)),c&1024&&(_f=!0);break;case 6:if(pn(r,i),gn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(he){Ie(i,i.return,he)}}break;case 3:if(wu=null,p=Tn,Tn=vu(r.containerInfo),pn(r,i),Tn=p,gn(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oo(r.containerInfo)}catch(he){Ie(i,i.return,he)}_f&&(_f=!1,I0(i));break;case 4:c=Tn,Tn=vu(i.stateNode.containerInfo),pn(r,i),gn(i),Tn=c;break;case 12:pn(r,i),gn(i);break;case 13:pn(r,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Rf=Un()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,wf(i,c)));break;case 22:if(c&512&&(Qe||l===null||Zt(l,l.return)),B=i.memoizedState!==null,N=l!==null&&l.memoizedState!==null,X=si,K=Qe,si=X||B,Qe=K||N,pn(r,i),Qe=K,si=X,gn(i),r=i.stateNode,r._current=i,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,c&8192&&(r._visibility=B?r._visibility&-2:r._visibility|1,B&&(r=si||Qe,l===null||N||r||_r(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,r=i;;){if(r.tag===5||r.tag===26||r.tag===27){if(l===null){N=l=r;try{if(p=N.stateNode,B)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{x=N.stateNode,k=N.memoizedProps.style;var V=k!=null&&k.hasOwnProperty("display")?k.display:null;x.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(he){Ie(N,N.return,he)}}}else if(r.tag===6){if(l===null){N=r;try{N.stateNode.nodeValue=B?"":N.memoizedProps}catch(he){Ie(N,N.return,he)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,wf(i,l))));break;case 19:pn(r,i),gn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,wf(i,c)));break;case 21:break;default:pn(r,i),gn(i)}}function gn(i){var r=i.flags;if(r&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(O0(l)){var c=l;break e}l=l.return}throw Error(s(160))}switch(c.tag){case 27:var p=c.stateNode,y=bf(i);su(i,y,p);break;case 5:var x=c.stateNode;c.flags&32&&(ir(x,""),c.flags&=-33);var k=bf(i);su(i,k,x);break;case 3:case 4:var B=c.stateNode.containerInfo,N=bf(i);vf(i,N,B);break;default:throw Error(s(161))}}}catch(X){Ie(i,i.return,X)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function I0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;I0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ai(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)B0(i,r.alternate,r),r=r.sibling}function _r(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Li(4,r,r.return),_r(r);break;case 1:Zt(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&k0(r,r.return,l),_r(r);break;case 26:case 27:case 5:Zt(r,r.return),_r(r);break;case 22:Zt(r,r.return),r.memoizedState===null&&_r(r);break;default:_r(r)}i=i.sibling}}function Ii(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,p=i,y=r,x=y.flags;switch(y.tag){case 0:case 11:case 15:Ii(p,y,l),Ha(4,y);break;case 1:if(Ii(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(N){Ie(c,c.return,N)}if(c=y,p=c.updateQueue,p!==null){var k=c.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)E0(B[p],k)}catch(N){Ie(c,c.return,N)}}l&&x&64&&M0(y),xs(y,y.return);break;case 26:case 27:case 5:Ii(p,y,l),l&&c===null&&x&4&&C0(y),xs(y,y.return);break;case 12:Ii(p,y,l);break;case 13:Ii(p,y,l),l&&x&4&&U0(p,y);break;case 22:y.memoizedState===null&&Ii(p,y,l),xs(y,y.return);break;default:Ii(p,y,l)}r=r.sibling}}function xf(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Da(l))}function Sf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Da(i))}function Ni(i,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)N0(i,r,l,c),r=r.sibling}function N0(i,r,l,c){var p=r.flags;switch(r.tag){case 0:case 11:case 15:Ni(i,r,l,c),p&2048&&Ha(9,r);break;case 3:Ni(i,r,l,c),p&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Da(i)));break;case 12:if(p&2048){Ni(i,r,l,c),i=r.stateNode;try{var y=r.memoizedProps,x=y.id,k=y.onPostCommit;typeof k=="function"&&k(x,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){Ie(r,r.return,B)}}else Ni(i,r,l,c);break;case 23:break;case 22:y=r.stateNode,r.memoizedState!==null?y._visibility&4?Ni(i,r,l,c):$a(i,r):y._visibility&4?Ni(i,r,l,c):(y._visibility|=4,wr(i,r,l,c,(r.subtreeFlags&10256)!==0)),p&2048&&xf(r.alternate,r);break;case 24:Ni(i,r,l,c),p&2048&&Sf(r.alternate,r);break;default:Ni(i,r,l,c)}}function wr(i,r,l,c,p){for(p=p&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var y=i,x=r,k=l,B=c,N=x.flags;switch(x.tag){case 0:case 11:case 15:wr(y,x,k,B,p),Ha(8,x);break;case 23:break;case 22:var X=x.stateNode;x.memoizedState!==null?X._visibility&4?wr(y,x,k,B,p):$a(y,x):(X._visibility|=4,wr(y,x,k,B,p)),p&&N&2048&&xf(x.alternate,x);break;case 24:wr(y,x,k,B,p),p&&N&2048&&Sf(x.alternate,x);break;default:wr(y,x,k,B,p)}r=r.sibling}}function $a(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,c=r,p=c.flags;switch(c.tag){case 22:$a(l,c),p&2048&&xf(c.alternate,c);break;case 24:$a(l,c),p&2048&&Sf(c.alternate,c);break;default:$a(l,c)}r=r.sibling}}var Fa=8192;function xr(i){if(i.subtreeFlags&Fa)for(i=i.child;i!==null;)q0(i),i=i.sibling}function q0(i){switch(i.tag){case 26:xr(i),i.flags&Fa&&i.memoizedState!==null&&GE(Tn,i.memoizedState,i.memoizedProps);break;case 5:xr(i);break;case 3:case 4:var r=Tn;Tn=vu(i.stateNode.containerInfo),xr(i),Tn=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Fa,Fa=16777216,xr(i),Fa=r):xr(i));break;default:xr(i)}}function G0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Va(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];dt=c,$0(c,i)}G0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H0(i),i=i.sibling}function H0(i){switch(i.tag){case 0:case 11:case 15:Va(i),i.flags&2048&&Li(9,i,i.return);break;case 3:Va(i);break;case 12:Va(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&4&&(i.return===null||i.return.tag!==13)?(r._visibility&=-5,ru(i)):Va(i);break;default:Va(i)}}function ru(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];dt=c,$0(c,i)}G0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Li(8,r,r.return),ru(r);break;case 22:l=r.stateNode,l._visibility&4&&(l._visibility&=-5,ru(r));break;default:ru(r)}i=i.sibling}}function $0(i,r){for(;dt!==null;){var l=dt;switch(l.tag){case 0:case 11:case 15:Li(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Da(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,dt=c;else e:for(l=i;dt!==null;){c=dt;var p=c.sibling,y=c.return;if(z0(c),c===l){dt=null;break e}if(p!==null){p.return=y,dt=p;break e}dt=y}}}function tE(i,r,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(i,r,l,c){return new tE(i,r,l,c)}function Af(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qi(i,r){var l=i.alternate;return l===null?(l=yn(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function F0(i,r){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function au(i,r,l,c,p,y){var x=0;if(c=i,typeof i=="function")Af(i)&&(x=1);else if(typeof i=="string")x=NE(i,l,ut.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case f:return Ss(l.children,p,y,r);case d:x=8,p|=24;break;case g:return i=yn(12,l,r,p|2),i.elementType=g,i.lanes=y,i;case S:return i=yn(13,l,r,p),i.elementType=S,i.lanes=y,i;case _:return i=yn(19,l,r,p),i.elementType=_,i.lanes=y,i;case A:return V0(l,p,y,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case m:case v:x=10;break e;case b:x=9;break e;case w:x=11;break e;case E:x=14;break e;case M:x=16,c=null;break e}x=29,l=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=yn(x,l,r,p),r.elementType=i,r.type=c,r.lanes=y,r}function Ss(i,r,l,c){return i=yn(7,i,c,r),i.lanes=l,i}function V0(i,r,l,c){i=yn(22,i,c,r),i.elementType=A,i.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=p._current;if(y===null)throw Error(s(456));if((p._pendingVisibility&2)===0){var x=Ci(y,2);x!==null&&(p._pendingVisibility|=2,Lt(x,y,2))}},attach:function(){var y=p._current;if(y===null)throw Error(s(456));if((p._pendingVisibility&2)!==0){var x=Ci(y,2);x!==null&&(p._pendingVisibility&=-3,Lt(x,y,2))}}};return i.stateNode=p,i}function Ef(i,r,l){return i=yn(6,i,null,r),i.lanes=l,i}function Tf(i,r,l){return r=yn(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function oi(i){i.flags|=4}function Y0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ob(r)){if(r=dn.current,r!==null&&((Oe&4194176)===Oe?In!==null:(Oe&62914560)!==Oe&&(Oe&536870912)===0||r!==In))throw Ra=Rh,cm;i.flags|=8192}}function ou(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?hy():536870912,i.lanes|=r,Ar|=r)}function Ya(i,r){if(!De)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Ve(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(r)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&31457280,c|=p.flags&31457280,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=l,r}function nE(i,r,l){var c=r.pendingProps;switch(kh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(r),null;case 1:return Ve(r),null;case 3:return l=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ii(lt),Ei(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ta(r)?oi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,En!==null&&(Bf(En),En=null))),Ve(r),null;case 26:return l=r.memoizedState,i===null?(oi(r),l!==null?(Ve(r),Y0(r,l)):(Ve(r),r.flags&=-16777217)):l?l!==i.memoizedState?(oi(r),Ve(r),Y0(r,l)):(Ve(r),r.flags&=-16777217):(i.memoizedProps!==c&&oi(r),Ve(r),r.flags&=-16777217),null;case 27:Ks(r),l=ct.current;var p=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==c&&oi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Ve(r),null}i=ut.current,Ta(r)?lm(r):(i=Sb(p,c,l),r.stateNode=i,oi(r))}return Ve(r),null;case 5:if(Ks(r),l=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&oi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Ve(r),null}if(i=ut.current,Ta(r))lm(r);else{switch(p=bu(ct.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}i[Tt]=r,i[Gt]=c;e:for(p=r.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===r)break e;for(;p.sibling===null;){if(p.return===null||p.return===r)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}r.stateNode=i;e:switch(xt(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&oi(r)}}return Ve(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&oi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=ct.current,Ta(r)){if(i=r.stateNode,l=r.memoizedProps,c=null,p=Ut,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[Tt]=r,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||mb(i.nodeValue,l)),i||ds(r)}else i=bu(i).createTextNode(c),i[Tt]=r,r.stateNode=i}return Ve(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=Ta(r),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Tt]=r}else Ma(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ve(r),p=!1}else En!==null&&(Bf(En),En=null),p=!0;if(!p)return r.flags&256?(Jn(r),r):(Jn(r),null)}if(Jn(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=r.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)}return l!==i&&l&&(r.child.flags|=8192),ou(r,r.updateQueue),Ve(r),null;case 4:return Ei(),i===null&&Ff(r.stateNode.containerInfo),Ve(r),null;case 10:return ii(r.type),Ve(r),null;case 19:if(Pe(ot),p=r.memoizedState,p===null)return Ve(r),null;if(c=(r.flags&128)!==0,y=p.rendering,y===null)if(c)Ya(p,!1);else{if(Ke!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(y=$l(i),y!==null){for(r.flags|=128,Ya(p,!1),i=y.updateQueue,r.updateQueue=i,ou(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)F0(l,i),l=l.sibling;return Re(ot,ot.current&1|2),r.child}i=i.sibling}p.tail!==null&&Un()>lu&&(r.flags|=128,c=!0,Ya(p,!1),r.lanes=4194304)}else{if(!c)if(i=$l(y),i!==null){if(r.flags|=128,c=!0,i=i.updateQueue,r.updateQueue=i,ou(r,i),Ya(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!De)return Ve(r),null}else 2*Un()-p.renderingStartTime>lu&&l!==536870912&&(r.flags|=128,c=!0,Ya(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(i=p.last,i!==null?i.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Un(),r.sibling=null,i=ot.current,Re(ot,c?i&1|2:i&1),r):(Ve(r),null);case 22:case 23:return Jn(r),Ph(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(Ve(r),r.subtreeFlags&6&&(r.flags|=8192)):Ve(r),l=r.updateQueue,l!==null&&ou(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),i!==null&&Pe(gs),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ii(lt),Ve(r),null;case 25:return null}throw Error(s(156,r.tag))}function iE(i,r){switch(kh(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ii(lt),Ei(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ks(r),null;case 13:if(Jn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ma()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Pe(ot),null;case 4:return Ei(),null;case 10:return ii(r.type),null;case 22:case 23:return Jn(r),Ph(),i!==null&&Pe(gs),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ii(lt),null;case 25:return null;default:return null}}function X0(i,r){switch(kh(r),r.tag){case 3:ii(lt),Ei();break;case 26:case 27:case 5:Ks(r);break;case 4:Ei();break;case 13:Jn(r);break;case 19:Pe(ot);break;case 10:ii(r.type);break;case 22:case 23:Jn(r),Ph(),i!==null&&Pe(gs);break;case 24:ii(lt)}}var sE={getCacheForType:function(i){var r=Mt(lt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l}},rE=typeof WeakMap=="function"?WeakMap:Map,Ye=0,Ne=null,Ae=null,Oe=0,qe=0,en=null,li=!1,Sr=!1,Mf=!1,ui=0,Ke=0,Gi=0,As=0,kf=0,mn=0,Ar=0,Xa=null,qn=null,Cf=!1,Rf=0,lu=1/0,uu=null,Hi=null,cu=!1,Es=null,Wa=0,Of=0,Pf=null,Qa=0,Df=null;function tn(){if((Ye&2)!==0&&Oe!==0)return Oe&-Oe;if(D.T!==null){var i=gr;return i!==0?i:qf()}return gy()}function W0(){mn===0&&(mn=(Oe&536870912)===0||De?cy():536870912);var i=dn.current;return i!==null&&(i.flags|=32),mn}function Lt(i,r,l){(i===Ne&&qe===2||i.cancelPendingCommit!==null)&&(Er(i,0),ci(i,Oe,mn,!1)),pa(i,l),((Ye&2)===0||i!==Ne)&&(i===Ne&&((Ye&2)===0&&(As|=l),Ke===4&&ci(i,Oe,mn,!1)),Gn(i))}function Q0(i,r,l){if((Ye&6)!==0)throw Error(s(327));var c=!l&&(r&60)===0&&(r&i.expiredLanes)===0||da(i,r),p=c?lE(i,r):Uf(i,r,!0),y=c;do{if(p===0){Sr&&!c&&ci(i,r,0,!1);break}else if(p===6)ci(i,r,0,!li);else{if(l=i.current.alternate,y&&!aE(l)){p=Uf(i,r,!1),y=!1;continue}if(p===2){if(y=r,i.errorRecoveryDisabledLanes&y)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var k=i;p=Xa;var B=k.current.memoizedState.isDehydrated;if(B&&(Er(k,x).flags|=256),x=Uf(k,x,!1),x!==2){if(Mf&&!B){k.errorRecoveryDisabledLanes|=y,As|=y,p=4;break e}y=qn,qn=p,y!==null&&Bf(y)}p=x}if(y=!1,p!==2)continue}}if(p===1){Er(i,0),ci(i,r,0,!0);break}e:{switch(c=i,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){ci(c,r,mn,!li);break e}break;case 2:qn=null;break;case 3:case 5:break;default:throw Error(s(329))}if(c.finishedWork=l,c.finishedLanes=r,(r&62914560)===r&&(y=Rf+300-Un(),10<y)){if(ci(c,r,mn,!li),Sl(c,0)!==0)break e;c.timeoutHandle=_b(K0.bind(null,c,l,qn,uu,Cf,r,mn,As,Ar,li,2,-0,0),y);break e}K0(c,l,qn,uu,Cf,r,mn,As,Ar,li,0,-0,0)}}break}while(!0);Gn(i)}function Bf(i){qn===null?qn=i:qn.push.apply(qn,i)}function K0(i,r,l,c,p,y,x,k,B,N,X,K,H){var V=r.subtreeFlags;if((V&8192||(V&16785408)===16785408)&&(no={stylesheets:null,count:0,unsuspend:qE},q0(r),r=HE(),r!==null)){i.cancelPendingCommit=r(sb.bind(null,i,l,c,p,x,k,B,1,K,H)),ci(i,y,x,!N);return}sb(i,l,c,p,x,k,B,X,K,H)}function aE(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!Kt(y(),p))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ci(i,r,l,c){r&=~kf,r&=~As,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var p=r;0<p;){var y=31-Qt(p),x=1<<y;c[y]=-1,p&=~x}l!==0&&fy(i,l,r)}function hu(){return(Ye&6)===0?(Ka(0),!1):!0}function zf(){if(Ae!==null){if(qe===0)var i=Ae.return;else i=Ae,ni=_s=null,Nh(i),dr=null,Oa=0,i=Ae;for(;i!==null;)X0(i.alternate,i),i=i.return;Ae=null}}function Er(i,r){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,EE(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),zf(),Ne=i,Ae=l=qi(i.current,null),Oe=r,qe=0,en=null,li=!1,Sr=da(i,r),Mf=!1,Ar=mn=kf=As=Gi=Ke=0,qn=Xa=null,Cf=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var p=31-Qt(c),y=1<<p;r|=i[p],c&=~y}return ui=r,zl(),l}function Z0(i,r){we=null,D.H=Nn,r===Ca?(r=dm(),qe=3):r===cm?(r=dm(),qe=4):qe=r===h0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,en=r,Ae===null&&(Ke=1,tu(i,cn(r,i.current)))}function J0(){var i=D.H;return D.H=Nn,i===null?Nn:i}function eb(){var i=D.A;return D.A=sE,i}function jf(){Ke=4,li||(Oe&4194176)!==Oe&&dn.current!==null||(Sr=!0),(Gi&134217727)===0&&(As&134217727)===0||Ne===null||ci(Ne,Oe,mn,!1)}function Uf(i,r,l){var c=Ye;Ye|=2;var p=J0(),y=eb();(Ne!==i||Oe!==r)&&(uu=null,Er(i,r)),r=!1;var x=Ke;e:do try{if(qe!==0&&Ae!==null){var k=Ae,B=en;switch(qe){case 8:zf(),x=6;break e;case 3:case 2:case 6:dn.current===null&&(r=!0);var N=qe;if(qe=0,en=null,Tr(i,k,B,N),l&&Sr){x=0;break e}break;default:N=qe,qe=0,en=null,Tr(i,k,B,N)}}oE(),x=Ke;break}catch(X){Z0(i,X)}while(!0);return r&&i.shellSuspendCounter++,ni=_s=null,Ye=c,D.H=p,D.A=y,Ae===null&&(Ne=null,Oe=0,zl()),x}function oE(){for(;Ae!==null;)tb(Ae)}function lE(i,r){var l=Ye;Ye|=2;var c=J0(),p=eb();Ne!==i||Oe!==r?(uu=null,lu=Un()+500,Er(i,r)):Sr=da(i,r);e:do try{if(qe!==0&&Ae!==null){r=Ae;var y=en;t:switch(qe){case 1:qe=0,en=null,Tr(i,r,y,1);break;case 2:if(hm(y)){qe=0,en=null,nb(r);break}r=function(){qe===2&&Ne===i&&(qe=7),Gn(i)},y.then(r,r);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:hm(y)?(qe=0,en=null,nb(r)):(qe=0,en=null,Tr(i,r,y,7));break;case 5:var x=null;switch(Ae.tag){case 26:x=Ae.memoizedState;case 5:case 27:var k=Ae;if(!x||Ob(x)){qe=0,en=null;var B=k.sibling;if(B!==null)Ae=B;else{var N=k.return;N!==null?(Ae=N,fu(N)):Ae=null}break t}}qe=0,en=null,Tr(i,r,y,5);break;case 6:qe=0,en=null,Tr(i,r,y,6);break;case 8:zf(),Ke=6;break e;default:throw Error(s(462))}}uE();break}catch(X){Z0(i,X)}while(!0);return ni=_s=null,D.H=c,D.A=p,Ye=l,Ae!==null?0:(Ne=null,Oe=0,zl(),Ke)}function uE(){for(;Ae!==null&&!O1();)tb(Ae)}function tb(i){var r=S0(i.alternate,i,ui);i.memoizedProps=i.pendingProps,r===null?fu(i):Ae=r}function nb(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=m0(l,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=m0(l,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Nh(r);default:X0(l,r),r=Ae=F0(r,ui),r=S0(l,r,ui)}i.memoizedProps=i.pendingProps,r===null?fu(i):Ae=r}function Tr(i,r,l,c){ni=_s=null,Nh(r),dr=null,Oa=0;var p=r.return;try{if(KA(i,p,r,l,Oe)){Ke=1,tu(i,cn(l,i.current)),Ae=null;return}}catch(y){if(p!==null)throw Ae=p,y;Ke=1,tu(i,cn(l,i.current)),Ae=null;return}r.flags&32768?(De||c===1?i=!0:Sr||(Oe&536870912)!==0?i=!1:(li=i=!0,(c===2||c===3||c===6)&&(c=dn.current,c!==null&&c.tag===13&&(c.flags|=16384))),ib(r,i)):fu(r)}function fu(i){var r=i;do{if((r.flags&32768)!==0){ib(r,li);return}i=r.return;var l=nE(r.alternate,r,ui);if(l!==null){Ae=l;return}if(r=r.sibling,r!==null){Ae=r;return}Ae=r=i}while(r!==null);Ke===0&&(Ke=5)}function ib(i,r){do{var l=iE(i.alternate,i);if(l!==null){l.flags&=32767,Ae=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){Ae=i;return}Ae=i=l}while(i!==null);Ke=6,Ae=null}function sb(i,r,l,c,p,y,x,k,B,N){var X=D.T,K=J.p;try{J.p=2,D.T=null,cE(i,r,l,c,K,p,y,x,k,B,N)}finally{D.T=X,J.p=K}}function cE(i,r,l,c,p,y,x,k){do Mr();while(Es!==null);if((Ye&6)!==0)throw Error(s(327));var B=i.finishedWork;if(c=i.finishedLanes,B===null)return null;if(i.finishedWork=null,i.finishedLanes=0,B===i.current)throw Error(s(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var N=B.lanes|B.childLanes;if(N|=Eh,G1(i,c,N,y,x,k),i===Ne&&(Ae=Ne=null,Oe=0),(B.subtreeFlags&10256)===0&&(B.flags&10256)===0||cu||(cu=!0,Of=N,Pf=l,pE(_l,function(){return Mr(),null})),l=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||l?(l=D.T,D.T=null,y=J.p,J.p=2,x=Ye,Ye|=4,JA(i,B),L0(B,i),BA(Wf,i.containerInfo),Au=!!Xf,Wf=Xf=null,i.current=B,B0(i,B.alternate,B),P1(),Ye=x,J.p=y,D.T=l):i.current=B,cu?(cu=!1,Es=i,Wa=c):rb(i,N),N=i.pendingLanes,N===0&&(Hi=null),U1(B.stateNode),Gn(i),r!==null)for(p=i.onRecoverableError,B=0;B<r.length;B++)N=r[B],p(N.value,{componentStack:N.stack});return(Wa&3)!==0&&Mr(),N=i.pendingLanes,(c&4194218)!==0&&(N&42)!==0?i===Df?Qa++:(Qa=0,Df=i):Qa=0,Ka(0),null}function rb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Da(r)))}function Mr(){if(Es!==null){var i=Es,r=Of;Of=0;var l=py(Wa),c=D.T,p=J.p;try{if(J.p=32>l?32:l,D.T=null,Es===null)var y=!1;else{l=Pf,Pf=null;var x=Es,k=Wa;if(Es=null,Wa=0,(Ye&6)!==0)throw Error(s(331));var B=Ye;if(Ye|=4,H0(x.current),N0(x,x.current,k,l),Ye=B,Ka(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(fa,x)}catch{}y=!0}return y}finally{J.p=p,D.T=c,rb(i,r)}}return!1}function ab(i,r,l){r=cn(l,r),r=ef(i.stateNode,r,2),i=Ui(i,r,2),i!==null&&(pa(i,2),Gn(i))}function Ie(i,r,l){if(i.tag===3)ab(i,i,l);else for(;r!==null;){if(r.tag===3){ab(r,i,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hi===null||!Hi.has(c))){i=cn(l,i),l=u0(2),c=Ui(r,l,2),c!==null&&(c0(l,c,r,i),pa(c,2),Gn(c));break}}r=r.return}}function Lf(i,r,l){var c=i.pingCache;if(c===null){c=i.pingCache=new rE;var p=new Set;c.set(r,p)}else p=c.get(r),p===void 0&&(p=new Set,c.set(r,p));p.has(l)||(Mf=!0,p.add(l),i=hE.bind(null,i,r,l),r.then(i,i))}function hE(i,r,l){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ne===i&&(Oe&l)===l&&(Ke===4||Ke===3&&(Oe&62914560)===Oe&&300>Un()-Rf?(Ye&2)===0&&Er(i,0):kf|=l,Ar===Oe&&(Ar=0)),Gn(i)}function ob(i,r){r===0&&(r=hy()),i=Ci(i,r),i!==null&&(pa(i,r),Gn(i))}function fE(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),ob(i,l)}function dE(i,r){var l=0;switch(i.tag){case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),ob(i,l)}function pE(i,r){return th(i,r)}var du=null,kr=null,If=!1,pu=!1,Nf=!1,Ts=0;function Gn(i){i!==kr&&i.next===null&&(kr===null?du=kr=i:kr=kr.next=i),pu=!0,If||(If=!0,yE(gE))}function Ka(i,r){if(!Nf&&pu){Nf=!0;do for(var l=!1,c=du;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var x=c.suspendedLanes,k=c.pingedLanes;y=(1<<31-Qt(42|i)+1)-1,y&=p&~(x&~k),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(l=!0,cb(c,y))}else y=Oe,y=Sl(c,c===Ne?y:0),(y&3)===0||da(c,y)||(l=!0,cb(c,y));c=c.next}while(l);Nf=!1}}function gE(){pu=If=!1;var i=0;Ts!==0&&(AE()&&(i=Ts),Ts=0);for(var r=Un(),l=null,c=du;c!==null;){var p=c.next,y=lb(c,r);y===0?(c.next=null,l===null?du=p:l.next=p,p===null&&(kr=l)):(l=c,(i!==0||(y&3)!==0)&&(pu=!0)),c=p}Ka(i)}function lb(i,r){for(var l=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var x=31-Qt(y),k=1<<x,B=p[x];B===-1?((k&l)===0||(k&c)!==0)&&(p[x]=q1(k,r)):B<=r&&(i.expiredLanes|=k),y&=~k}if(r=Ne,l=Oe,l=Sl(i,i===r?l:0),c=i.callbackNode,l===0||i===r&&qe===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&nh(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||da(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(c!==null&&nh(c),py(l)){case 2:case 8:l=ly;break;case 32:l=_l;break;case 268435456:l=uy;break;default:l=_l}return c=ub.bind(null,i),l=th(l,c),i.callbackPriority=r,i.callbackNode=l,r}return c!==null&&c!==null&&nh(c),i.callbackPriority=2,i.callbackNode=null,2}function ub(i,r){var l=i.callbackNode;if(Mr()&&i.callbackNode!==l)return null;var c=Oe;return c=Sl(i,i===Ne?c:0),c===0?null:(Q0(i,c,r),lb(i,Un()),i.callbackNode!=null&&i.callbackNode===l?ub.bind(null,i):null)}function cb(i,r){if(Mr())return null;Q0(i,r,!0)}function yE(i){TE(function(){(Ye&6)!==0?th(oy,i):i()})}function qf(){return Ts===0&&(Ts=cy()),Ts}function hb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kl(""+i)}function fb(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function mE(i,r,l,c,p){if(r==="submit"&&l&&l.stateNode===p){var y=hb((p[Gt]||null).action),x=c.submitter;x&&(r=(r=x[Gt]||null)?hb(r.formAction):x.getAttribute("formAction"),r!==null&&(y=r,x=null));var k=new Pl("action","action",null,c,p);i.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ts!==0){var B=x?fb(p,x):new FormData(p);Wh(l,{pending:!0,data:B,method:p.method,action:y},null,B)}}else typeof y=="function"&&(k.preventDefault(),B=x?fb(p,x):new FormData(p),Wh(l,{pending:!0,data:B,method:p.method,action:y},y,B))},currentTarget:p}]})}}for(var Gf=0;Gf<sm.length;Gf++){var Hf=sm[Gf],bE=Hf.toLowerCase(),vE=Hf[0].toUpperCase()+Hf.slice(1);An(bE,"on"+vE)}An(Jy,"onAnimationEnd"),An(em,"onAnimationIteration"),An(tm,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(jA,"onTransitionRun"),An(UA,"onTransitionStart"),An(LA,"onTransitionCancel"),An(nm,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_E=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Za));function db(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],p=c.event;c=c.listeners;e:{var y=void 0;if(r)for(var x=c.length-1;0<=x;x--){var k=c[x],B=k.instance,N=k.currentTarget;if(k=k.listener,B!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=N;try{y(p)}catch(X){eu(X)}p.currentTarget=null,y=B}else for(x=0;x<c.length;x++){if(k=c[x],B=k.instance,N=k.currentTarget,k=k.listener,B!==y&&p.isPropagationStopped())break e;y=k,p.currentTarget=N;try{y(p)}catch(X){eu(X)}p.currentTarget=null,y=B}}}}function ke(i,r){var l=r[sh];l===void 0&&(l=r[sh]=new Set);var c=i+"__bubble";l.has(c)||(pb(r,i,2,!1),l.add(c))}function $f(i,r,l){var c=0;r&&(c|=4),pb(l,i,c,r)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Ff(i){if(!i[gu]){i[gu]=!0,my.forEach(function(l){l!=="selectionchange"&&(_E.has(l)||$f(l,!1,i),$f(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[gu]||(r[gu]=!0,$f("selectionchange",!1,r))}}function pb(i,r,l,c){switch(Ub(r)){case 2:var p=VE;break;case 8:p=YE;break;default:p=sd}l=p.bind(null,r,l,i),p=void 0,!fh||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(r,l,{capture:!0,passive:p}):i.addEventListener(r,l,!0):p!==void 0?i.addEventListener(r,l,{passive:p}):i.addEventListener(r,l,!1)}function Vf(i,r,l,c,p){var y=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var k=c.stateNode.containerInfo;if(k===p||k.nodeType===8&&k.parentNode===p)break;if(x===4)for(x=c.return;x!==null;){var B=x.tag;if((B===3||B===4)&&(B=x.stateNode.containerInfo,B===p||B.nodeType===8&&B.parentNode===p))return;x=x.return}for(;k!==null;){if(x=as(k),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){c=y=x;continue e}k=k.parentNode}}c=c.return}Cy(function(){var N=y,X=ch(l),K=[];e:{var H=im.get(i);if(H!==void 0){var V=Pl,he=i;switch(i){case"keypress":if(Rl(l)===0)break e;case"keydown":case"keyup":V=dA;break;case"focusin":he="focus",V=yh;break;case"focusout":he="blur",V=yh;break;case"beforeblur":case"afterblur":V=yh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=tA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=yA;break;case Jy:case em:case tm:V=sA;break;case nm:V=bA;break;case"scroll":case"scrollend":V=J1;break;case"wheel":V=_A;break;case"copy":case"cut":case"paste":V=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=By;break;case"toggle":case"beforetoggle":V=xA}var ye=(r&4)!==0,Ze=!ye&&(i==="scroll"||i==="scrollend"),q=ye?H!==null?H+"Capture":null:H;ye=[];for(var I=N,G;I!==null;){var W=I;if(G=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||G===null||q===null||(W=ma(I,q),W!=null&&ye.push(Ja(I,W,G))),Ze)break;I=I.return}0<ye.length&&(H=new V(H,he,null,l,X),K.push({event:H,listeners:ye}))}}if((r&7)===0){e:{if(H=i==="mouseover"||i==="pointerover",V=i==="mouseout"||i==="pointerout",H&&l!==uh&&(he=l.relatedTarget||l.fromElement)&&(as(he)||he[Zs]))break e;if((V||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,V?(he=l.relatedTarget||l.toElement,V=N,he=he?as(he):null,he!==null&&(Ze=Z(he),ye=he.tag,he!==Ze||ye!==5&&ye!==27&&ye!==6)&&(he=null)):(V=null,he=N),V!==he)){if(ye=Py,W="onMouseLeave",q="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(ye=By,W="onPointerLeave",q="onPointerEnter",I="pointer"),Ze=V==null?H:ya(V),G=he==null?H:ya(he),H=new ye(W,I+"leave",V,l,X),H.target=Ze,H.relatedTarget=G,W=null,as(X)===N&&(ye=new ye(q,I+"enter",he,l,X),ye.target=G,ye.relatedTarget=Ze,W=ye),Ze=W,V&&he)t:{for(ye=V,q=he,I=0,G=ye;G;G=Cr(G))I++;for(G=0,W=q;W;W=Cr(W))G++;for(;0<I-G;)ye=Cr(ye),I--;for(;0<G-I;)q=Cr(q),G--;for(;I--;){if(ye===q||q!==null&&ye===q.alternate)break t;ye=Cr(ye),q=Cr(q)}ye=null}else ye=null;V!==null&&gb(K,H,V,ye,!1),he!==null&&Ze!==null&&gb(K,Ze,he,ye,!0)}}e:{if(H=N?ya(N):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var ue=Gy;else if(Ny(H))if(Hy)ue=PA;else{ue=RA;var Se=CA}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?N&&lh(N.elementType)&&(ue=Gy):ue=OA;if(ue&&(ue=ue(i,N))){qy(K,ue,l,X);break e}Se&&Se(i,H,N),i==="focusout"&&N&&H.type==="number"&&N.memoizedProps.value!=null&&oh(H,"number",H.value)}switch(Se=N?ya(N):window,i){case"focusin":(Ny(Se)||Se.contentEditable==="true")&&(or=Se,xh=N,Ea=null);break;case"focusout":Ea=xh=or=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,Ky(K,l,X);break;case"selectionchange":if(zA)break;case"keydown":case"keyup":Ky(K,l,X)}var de;if(bh)e:{switch(i){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else ar?Ly(i,l)&&(pe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(pe="onCompositionStart");pe&&(zy&&l.locale!=="ko"&&(ar||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&ar&&(de=Ry()):(ki=X,dh="value"in ki?ki.value:ki.textContent,ar=!0)),Se=yu(N,pe),0<Se.length&&(pe=new Dy(pe,i,null,l,X),K.push({event:pe,listeners:Se}),de?pe.data=de:(de=Iy(l),de!==null&&(pe.data=de)))),(de=AA?EA(i,l):TA(i,l))&&(pe=yu(N,"onBeforeInput"),0<pe.length&&(Se=new Dy("onBeforeInput","beforeinput",null,l,X),K.push({event:Se,listeners:pe}),Se.data=de)),mE(K,i,N,l,X)}db(K,r)})}function Ja(i,r,l){return{instance:i,listener:r,currentTarget:l}}function yu(i,r){for(var l=r+"Capture",c=[];i!==null;){var p=i,y=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=ma(i,l),p!=null&&c.unshift(Ja(i,p,y)),p=ma(i,r),p!=null&&c.push(Ja(i,p,y))),i=i.return}return c}function Cr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function gb(i,r,l,c,p){for(var y=r._reactName,x=[];l!==null&&l!==c;){var k=l,B=k.alternate,N=k.stateNode;if(k=k.tag,B!==null&&B===c)break;k!==5&&k!==26&&k!==27||N===null||(B=N,p?(N=ma(l,y),N!=null&&x.unshift(Ja(l,N,B))):p||(N=ma(l,y),N!=null&&x.push(Ja(l,N,B)))),l=l.return}x.length!==0&&i.push({event:r,listeners:x})}var wE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function yb(i){return(typeof i=="string"?i:""+i).replace(wE,`
`).replace(xE,"")}function mb(i,r){return r=yb(r),yb(i)===r}function mu(){}function Ue(i,r,l,c,p,y){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||ir(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&ir(i,""+c);break;case"className":El(i,"class",c);break;case"tabIndex":El(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":El(i,l,c);break;case"style":My(i,c,y);break;case"data":if(r!=="object"){El(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=kl(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(r!=="input"&&Ue(i,r,"name",p.name,p,null),Ue(i,r,"formEncType",p.formEncType,p,null),Ue(i,r,"formMethod",p.formMethod,p,null),Ue(i,r,"formTarget",p.formTarget,p,null)):(Ue(i,r,"encType",p.encType,p,null),Ue(i,r,"method",p.method,p,null),Ue(i,r,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=kl(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=mu);break;case"onScroll":c!=null&&ke("scroll",i);break;case"onScrollEnd":c!=null&&ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=kl(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":ke("beforetoggle",i),ke("toggle",i),Al(i,"popover",c);break;case"xlinkActuate":Qn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Qn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Qn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Qn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Qn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Qn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Qn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Al(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=K1.get(l)||l,Al(i,l,c))}}function Yf(i,r,l,c,p,y){switch(l){case"style":My(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof c=="string"?ir(i,c):(typeof c=="number"||typeof c=="bigint")&&ir(i,""+c);break;case"onScroll":c!=null&&ke("scroll",i);break;case"onScrollEnd":c!=null&&ke("scrollend",i);break;case"onClick":c!=null&&(i.onclick=mu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!by.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),r=l.slice(2,p?l.length-7:void 0),y=i[Gt]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(r,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,c,p);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Al(i,l,c)}}}function xt(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",i),ke("load",i);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ue(i,r,y,x,l,null)}}p&&Ue(i,r,"srcSet",l.srcSet,l,null),c&&Ue(i,r,"src",l.src,l,null);return;case"input":ke("invalid",i);var k=y=x=p=null,B=null,N=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":p=X;break;case"type":x=X;break;case"checked":B=X;break;case"defaultChecked":N=X;break;case"value":y=X;break;case"defaultValue":k=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:Ue(i,r,c,X,l,null)}}Sy(i,y,k,B,N,x,p,!1),Tl(i);return;case"select":ke("invalid",i),c=x=y=null;for(p in l)if(l.hasOwnProperty(p)&&(k=l[p],k!=null))switch(p){case"value":y=k;break;case"defaultValue":x=k;break;case"multiple":c=k;default:Ue(i,r,p,k,l,null)}r=y,l=x,i.multiple=!!c,r!=null?nr(i,!!c,r,!1):l!=null&&nr(i,!!c,l,!0);return;case"textarea":ke("invalid",i),y=p=c=null;for(x in l)if(l.hasOwnProperty(x)&&(k=l[x],k!=null))switch(x){case"value":c=k;break;case"defaultValue":p=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:Ue(i,r,x,k,l,null)}Ey(i,c,p,y),Tl(i);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(c=l[B],c!=null))switch(B){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ue(i,r,B,c,l,null)}return;case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":ke("load",i);break;case"video":case"audio":for(c=0;c<Za.length;c++)ke(Za[c],i);break;case"image":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"embed":case"source":case"link":ke("error",i),ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in l)if(l.hasOwnProperty(N)&&(c=l[N],c!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ue(i,r,N,c,l,null)}return;default:if(lh(r)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&Yf(i,r,X,c,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(c=l[k],c!=null&&Ue(i,r,k,c,l,null))}function SE(i,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,x=null,k=null,B=null,N=null,X=null;for(V in l){var K=l[V];if(l.hasOwnProperty(V)&&K!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":B=K;default:c.hasOwnProperty(V)||Ue(i,r,V,null,c,K)}}for(var H in c){var V=c[H];if(K=l[H],c.hasOwnProperty(H)&&(V!=null||K!=null))switch(H){case"type":y=V;break;case"name":p=V;break;case"checked":N=V;break;case"defaultChecked":X=V;break;case"value":x=V;break;case"defaultValue":k=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,r));break;default:V!==K&&Ue(i,r,H,V,c,K)}}ah(i,x,k,B,N,X,y,p);return;case"select":V=x=k=H=null;for(y in l)if(B=l[y],l.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":V=B;default:c.hasOwnProperty(y)||Ue(i,r,y,null,c,B)}for(p in c)if(y=c[p],B=l[p],c.hasOwnProperty(p)&&(y!=null||B!=null))switch(p){case"value":H=y;break;case"defaultValue":k=y;break;case"multiple":x=y;default:y!==B&&Ue(i,r,p,y,c,B)}r=k,l=x,c=V,H!=null?nr(i,!!l,H,!1):!!c!=!!l&&(r!=null?nr(i,!!l,r,!0):nr(i,!!l,l?[]:"",!1));return;case"textarea":V=H=null;for(k in l)if(p=l[k],l.hasOwnProperty(k)&&p!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Ue(i,r,k,null,c,p)}for(x in c)if(p=c[x],y=l[x],c.hasOwnProperty(x)&&(p!=null||y!=null))switch(x){case"value":H=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&Ue(i,r,x,p,c,y)}Ay(i,H,V);return;case"option":for(var he in l)if(H=l[he],l.hasOwnProperty(he)&&H!=null&&!c.hasOwnProperty(he))switch(he){case"selected":i.selected=!1;break;default:Ue(i,r,he,null,c,H)}for(B in c)if(H=c[B],V=l[B],c.hasOwnProperty(B)&&H!==V&&(H!=null||V!=null))switch(B){case"selected":i.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ue(i,r,B,H,c,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in l)H=l[ye],l.hasOwnProperty(ye)&&H!=null&&!c.hasOwnProperty(ye)&&Ue(i,r,ye,null,c,H);for(N in c)if(H=c[N],V=l[N],c.hasOwnProperty(N)&&H!==V&&(H!=null||V!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:Ue(i,r,N,H,c,V)}return;default:if(lh(r)){for(var Ze in l)H=l[Ze],l.hasOwnProperty(Ze)&&H!==void 0&&!c.hasOwnProperty(Ze)&&Yf(i,r,Ze,void 0,c,H);for(X in c)H=c[X],V=l[X],!c.hasOwnProperty(X)||H===V||H===void 0&&V===void 0||Yf(i,r,X,H,c,V);return}}for(var q in l)H=l[q],l.hasOwnProperty(q)&&H!=null&&!c.hasOwnProperty(q)&&Ue(i,r,q,null,c,H);for(K in c)H=c[K],V=l[K],!c.hasOwnProperty(K)||H===V||H==null&&V==null||Ue(i,r,K,H,c,V)}var Xf=null,Wf=null;function bu(i){return i.nodeType===9?i:i.ownerDocument}function bb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vb(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Qf(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Kf=null;function AE(){var i=window.event;return i&&i.type==="popstate"?i===Kf?!1:(Kf=i,!0):(Kf=null,!1)}var _b=typeof setTimeout=="function"?setTimeout:void 0,EE=typeof clearTimeout=="function"?clearTimeout:void 0,wb=typeof Promise=="function"?Promise:void 0,TE=typeof queueMicrotask=="function"?queueMicrotask:typeof wb<"u"?function(i){return wb.resolve(null).then(i).catch(ME)}:_b;function ME(i){setTimeout(function(){throw i})}function Zf(i,r){var l=r,c=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(c===0){i.removeChild(p),oo(r);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=p}while(l);oo(r)}function Jf(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jf(l),rh(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function kE(i,r,l,c){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ga])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Mn(i.nextSibling),i===null)break}return null}function CE(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Mn(i.nextSibling),i===null))return null;return i}function Mn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}function xb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return i;r--}else l==="/$"&&r++}i=i.previousSibling}return null}function Sb(i,r,l){switch(r=bu(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}var bn=new Map,Ab=new Set;function vu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var hi=J.d;J.d={f:RE,r:OE,D:PE,C:DE,L:BE,m:zE,X:UE,S:jE,M:LE};function RE(){var i=hi.f(),r=hu();return i||r}function OE(i){var r=Js(i);r!==null&&r.tag===5&&r.type==="form"?Km(r):hi.r(i)}var Rr=typeof document>"u"?null:document;function Eb(i,r,l){var c=Rr;if(c&&typeof r=="string"&&r){var p=ln(r);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Ab.has(p)||(Ab.add(p),i={rel:i,crossOrigin:l,href:r},c.querySelector(p)===null&&(r=c.createElement("link"),xt(r,"link",i),ht(r),c.head.appendChild(r)))}}function PE(i){hi.D(i),Eb("dns-prefetch",i,null)}function DE(i,r){hi.C(i,r),Eb("preconnect",i,r)}function BE(i,r,l){hi.L(i,r,l);var c=Rr;if(c&&i&&r){var p='link[rel="preload"][as="'+ln(r)+'"]';r==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+ln(l.imageSizes)+'"]')):p+='[href="'+ln(i)+'"]';var y=p;switch(r){case"style":y=Or(i);break;case"script":y=Pr(i)}bn.has(y)||(i=z({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),bn.set(y,i),c.querySelector(p)!==null||r==="style"&&c.querySelector(eo(y))||r==="script"&&c.querySelector(to(y))||(r=c.createElement("link"),xt(r,"link",i),ht(r),c.head.appendChild(r)))}}function zE(i,r){hi.m(i,r);var l=Rr;if(l&&i){var c=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+ln(c)+'"][href="'+ln(i)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Pr(i)}if(!bn.has(y)&&(i=z({rel:"modulepreload",href:i},r),bn.set(y,i),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(to(y)))return}c=l.createElement("link"),xt(c,"link",i),ht(c),l.head.appendChild(c)}}}function jE(i,r,l){hi.S(i,r,l);var c=Rr;if(c&&i){var p=er(c).hoistableStyles,y=Or(i);r=r||"default";var x=p.get(y);if(!x){var k={loading:0,preload:null};if(x=c.querySelector(eo(y)))k.loading=5;else{i=z({rel:"stylesheet",href:i,"data-precedence":r},l),(l=bn.get(y))&&ed(i,l);var B=x=c.createElement("link");ht(B),xt(B,"link",i),B._p=new Promise(function(N,X){B.onload=N,B.onerror=X}),B.addEventListener("load",function(){k.loading|=1}),B.addEventListener("error",function(){k.loading|=2}),k.loading|=4,_u(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:k},p.set(y,x)}}}function UE(i,r){hi.X(i,r);var l=Rr;if(l&&i){var c=er(l).hoistableScripts,p=Pr(i),y=c.get(p);y||(y=l.querySelector(to(p)),y||(i=z({src:i,async:!0},r),(r=bn.get(p))&&td(i,r),y=l.createElement("script"),ht(y),xt(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function LE(i,r){hi.M(i,r);var l=Rr;if(l&&i){var c=er(l).hoistableScripts,p=Pr(i),y=c.get(p);y||(y=l.querySelector(to(p)),y||(i=z({src:i,async:!0,type:"module"},r),(r=bn.get(p))&&td(i,r),y=l.createElement("script"),ht(y),xt(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function Tb(i,r,l,c){var p=(p=ct.current)?vu(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Or(l.href),l=er(p).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Or(l.href);var y=er(p).hoistableStyles,x=y.get(i);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,x),(y=p.querySelector(eo(i)))&&!y._p&&(x.instance=y,x.state.loading=5),bn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},bn.set(i,l),y||IE(p,i,l,x.state))),r&&c===null)throw Error(s(528,""));return x}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Pr(l),l=er(p).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Or(i){return'href="'+ln(i)+'"'}function eo(i){return'link[rel="stylesheet"]['+i+"]"}function Mb(i){return z({},i,{"data-precedence":i.precedence,precedence:null})}function IE(i,r,l,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),xt(r,"link",l),ht(r),i.head.appendChild(r))}function Pr(i){return'[src="'+ln(i)+'"]'}function to(i){return"script[async]"+i}function kb(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+ln(l.href)+'"]');if(c)return r.instance=c,ht(c),c;var p=z({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),ht(c),xt(c,"style",p),_u(c,l.precedence,i),r.instance=c;case"stylesheet":p=Or(l.href);var y=i.querySelector(eo(p));if(y)return r.state.loading|=4,r.instance=y,ht(y),y;c=Mb(l),(p=bn.get(p))&&ed(c,p),y=(i.ownerDocument||i).createElement("link"),ht(y);var x=y;return x._p=new Promise(function(k,B){x.onload=k,x.onerror=B}),xt(y,"link",c),r.state.loading|=4,_u(y,l.precedence,i),r.instance=y;case"script":return y=Pr(l.src),(p=i.querySelector(to(y)))?(r.instance=p,ht(p),p):(c=l,(p=bn.get(y))&&(c=z({},l),td(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),ht(p),xt(p,"link",c),i.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,_u(c,l.precedence,i));return r.instance}function _u(i,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,x=0;x<c.length;x++){var k=c[x];if(k.dataset.precedence===r)y=k;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function ed(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function td(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var wu=null;function Cb(i,r,l){if(wu===null){var c=new Map,p=wu=new Map;p.set(l,c)}else p=wu,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var y=l[p];if(!(y[ga]||y[Tt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(r)||"";x=i+x;var k=c.get(x);k?k.push(y):c.set(x,[y])}}return c}function Rb(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function NE(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ob(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var no=null;function qE(){}function GE(i,r,l){if(no===null)throw Error(s(475));var c=no;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Or(l.href),y=i.querySelector(eo(p));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=xu.bind(c),i.then(c,c)),r.state.loading|=4,r.instance=y,ht(y);return}y=i.ownerDocument||i,l=Mb(l),(p=bn.get(p))&&ed(l,p),y=y.createElement("link"),ht(y);var x=y;x._p=new Promise(function(k,B){x.onload=k,x.onerror=B}),xt(y,"link",l),r.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=xu.bind(c),i.addEventListener("load",r),i.addEventListener("error",r))}}function HE(){if(no===null)throw Error(s(475));var i=no;return i.stylesheets&&i.count===0&&nd(i,i.stylesheets),0<i.count?function(r){var l=setTimeout(function(){if(i.stylesheets&&nd(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(l)}}:null}function xu(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Su=null;function nd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Su=new Map,r.forEach($E,i),Su=null,xu.call(i))}function $E(i,r){if(!(r.state.loading&4)){var l=Su.get(i);if(l)var c=l.get(null);else{l=new Map,Su.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var x=p[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),c=x)}c&&l.set(null,c)}p=r.instance,x=p.getAttribute("data-precedence"),y=l.get(x)||c,y===c&&l.set(null,p),l.set(x,p),this.count++,c=xu.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),r.state.loading|=4}}var io={$$typeof:v,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function FE(i,r,l,c,p,y,x,k){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ih(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.hiddenUpdates=ih(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Pb(i,r,l,c,p,y,x,k,B,N,X,K){return i=new FE(i,r,l,x,k,B,N,K),r=1,y===!0&&(r|=24),y=yn(3,null,null,r),i.current=y,y.stateNode=i,r=Dh(),r.refCount++,i.pooledCache=r,r.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:r},pf(y),i}function Db(i){return i?(i=cr,i):cr}function Bb(i,r,l,c,p,y){p=Db(p),c.context===null?c.context=p:c.pendingContext=p,c=ji(r),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=Ui(i,c,r),l!==null&&(Lt(l,i,r),Na(l,i,r))}function zb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function id(i,r){zb(i,r),(i=i.alternate)&&zb(i,r)}function jb(i){if(i.tag===13){var r=Ci(i,67108864);r!==null&&Lt(r,i,67108864),id(i,67108864)}}var Au=!0;function VE(i,r,l,c){var p=D.T;D.T=null;var y=J.p;try{J.p=2,sd(i,r,l,c)}finally{J.p=y,D.T=p}}function YE(i,r,l,c){var p=D.T;D.T=null;var y=J.p;try{J.p=8,sd(i,r,l,c)}finally{J.p=y,D.T=p}}function sd(i,r,l,c){if(Au){var p=rd(c);if(p===null)Vf(i,r,c,Eu,l),Lb(i,c);else if(WE(p,i,r,l,c))c.stopPropagation();else if(Lb(i,c),r&4&&-1<XE.indexOf(i)){for(;p!==null;){var y=Js(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=rs(y.pendingLanes);if(x!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;x;){var B=1<<31-Qt(x);k.entanglements[1]|=B,x&=~B}Gn(y),(Ye&6)===0&&(lu=Un()+500,Ka(0))}}break;case 13:k=Ci(y,2),k!==null&&Lt(k,y,2),hu(),id(y,2)}if(y=rd(c),y===null&&Vf(i,r,c,Eu,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else Vf(i,r,c,null,l)}}function rd(i){return i=ch(i),ad(i)}var Eu=null;function ad(i){if(Eu=null,i=as(i),i!==null){var r=Z(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=re(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Eu=i,null}function Ub(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D1()){case oy:return 2;case ly:return 8;case _l:case B1:return 32;case uy:return 268435456;default:return 32}default:return 32}}var od=!1,$i=null,Fi=null,Vi=null,so=new Map,ro=new Map,Yi=[],XE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lb(i,r){switch(i){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":so.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(r.pointerId)}}function ao(i,r,l,c,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},r!==null&&(r=Js(r),r!==null&&jb(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),i)}function WE(i,r,l,c,p){switch(r){case"focusin":return $i=ao($i,i,r,l,c,p),!0;case"dragenter":return Fi=ao(Fi,i,r,l,c,p),!0;case"mouseover":return Vi=ao(Vi,i,r,l,c,p),!0;case"pointerover":var y=p.pointerId;return so.set(y,ao(so.get(y)||null,i,r,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,ro.set(y,ao(ro.get(y)||null,i,r,l,c,p)),!0}return!1}function Ib(i){var r=as(i.target);if(r!==null){var l=Z(r);if(l!==null){if(r=l.tag,r===13){if(r=re(l),r!==null){i.blockedOn=r,H1(i.priority,function(){if(l.tag===13){var c=tn(),p=Ci(l,c);p!==null&&Lt(p,l,c),id(l,c)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Tu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=rd(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);uh=c,l.target.dispatchEvent(c),uh=null}else return r=Js(l),r!==null&&jb(r),i.blockedOn=l,!1;r.shift()}return!0}function Nb(i,r,l){Tu(i)&&l.delete(r)}function QE(){od=!1,$i!==null&&Tu($i)&&($i=null),Fi!==null&&Tu(Fi)&&(Fi=null),Vi!==null&&Tu(Vi)&&(Vi=null),so.forEach(Nb),ro.forEach(Nb)}function Mu(i,r){i.blockedOn===r&&(i.blockedOn=null,od||(od=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,QE)))}var ku=null;function qb(i){ku!==i&&(ku=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ku===i&&(ku=null);for(var r=0;r<i.length;r+=3){var l=i[r],c=i[r+1],p=i[r+2];if(typeof c!="function"){if(ad(c||l)===null)continue;break}var y=Js(l);y!==null&&(i.splice(r,3),r-=3,Wh(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function oo(i){function r(B){return Mu(B,i)}$i!==null&&Mu($i,i),Fi!==null&&Mu(Fi,i),Vi!==null&&Mu(Vi,i),so.forEach(r),ro.forEach(r);for(var l=0;l<Yi.length;l++){var c=Yi[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Yi.length&&(l=Yi[0],l.blockedOn===null);)Ib(l),l.blockedOn===null&&Yi.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],x=p[Gt]||null;if(typeof y=="function")x||qb(l);else if(x){var k=null;if(y&&y.hasAttribute("formAction")){if(p=y,x=y[Gt]||null)k=x.formAction;else if(ad(p)!==null)continue}else k=x.action;typeof k=="function"?l[c+1]=k:(l.splice(c,3),c-=3),qb(l)}}}function ld(i){this._internalRoot=i}Cu.prototype.render=ld.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,c=tn();Bb(l,c,i,r,null,null)},Cu.prototype.unmount=ld.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;i.tag===0&&Mr(),Bb(i.current,2,null,i,null,null),hu(),r[Zs]=null}};function Cu(i){this._internalRoot=i}Cu.prototype.unstable_scheduleHydration=function(i){if(i){var r=gy();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Yi.length&&r!==0&&r<Yi[l].priority;l++);Yi.splice(l,0,i),l===0&&Ib(i)}};var Gb=e.version;if(Gb!=="19.0.0")throw Error(s(527,Gb,"19.0.0"));J.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=Y(r),i=i!==null?ne(i):null,i=i===null?null:i.stateNode,i};var KE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:as,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{fa=Ru.inject(KE),Wt=Ru}catch{}}return uo.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,c="",p=r0,y=a0,x=o0,k=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(k=r.unstable_transitionCallbacks)),r=Pb(i,1,!1,null,null,l,c,p,y,x,k,null),i[Zs]=r.current,Ff(i.nodeType===8?i.parentNode:i),new ld(r)},uo.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var c=!1,p="",y=r0,x=a0,k=o0,B=null,N=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(B=l.unstable_transitionCallbacks),l.formState!==void 0&&(N=l.formState)),r=Pb(i,1,!0,r,l??null,c,p,y,x,k,B,N),r.context=Db(null),l=r.current,c=tn(),p=ji(c),p.callback=null,Ui(l,p,c),r.current.lanes=c,pa(r,c),Gn(r),i[Zs]=r.current,Ff(i),new Cu(r)},uo.version="19.0.0",uo}var Zb;function cT(){if(Zb)return hd.exports;Zb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hd.exports=uT(),hd.exports}var hT=cT(),gd={exports:{}},yd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb;function fT(){if(Jb)return yd;Jb=1;var n=Ic();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var t=typeof Object.is=="function"?Object.is:e,s=n.useSyncExternalStore,a=n.useRef,o=n.useEffect,u=n.useMemo,h=n.useDebugValue;return yd.useSyncExternalStoreWithSelector=function(f,d,g,m,b){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=u(function(){function _(R){if(!E){if(E=!0,M=R,R=m(R),b!==void 0&&w.hasValue){var O=w.value;if(b(O,R))return A=O}return A=R}if(O=A,t(M,R))return O;var C=m(R);return b!==void 0&&b(O,C)?(M=R,O):(M=R,A=C)}var E=!1,M,A,T=g===void 0?null:g;return[function(){return _(d())},T===null?void 0:function(){return _(T())}]},[d,g,m,b]);var S=s(f,v[0],v[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),h(S),S},yd}var ev;function dT(){return ev||(ev=1,gd.exports=fT()),gd.exports}var pT=dT();function Fw(n){n()}function gT(){let n=null,e=null;return{clear(){n=null,e=null},notify(){Fw(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let s=n;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!s||n===null||(s=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var tv={notify(){},get:()=>[]};function yT(n,e){let t,s=tv,a=0,o=!1;function u(S){g();const _=s.subscribe(S);let E=!1;return()=>{E||(E=!0,_(),m())}}function h(){s.notify()}function f(){w.onStateChange&&w.onStateChange()}function d(){return o}function g(){a++,t||(t=n.subscribe(f),s=gT())}function m(){a--,t&&a===0&&(t(),t=void 0,s.clear(),s=tv)}function b(){o||(o=!0,g())}function v(){o&&(o=!1,m())}const w={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:d,trySubscribe:b,tryUnsubscribe:v,getListeners:()=>s};return w}var mT=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bT=mT(),vT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_T=vT(),wT=()=>bT||_T?ce.useLayoutEffect:ce.useEffect,xT=wT();function nv(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function Uo(n,e){if(nv(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(!Object.prototype.hasOwnProperty.call(e,t[a])||!nv(n[t[a]],e[t[a]]))return!1;return!0}var ST=Symbol.for("react-redux-context"),AT=typeof globalThis<"u"?globalThis:{};function ET(){if(!ce.createContext)return{};const n=AT[ST]??=new Map;let e=n.get(ce.createContext);return e||(e=ce.createContext(null),n.set(ce.createContext,e)),e}var es=ET();function TT(n){const{children:e,context:t,serverState:s,store:a}=n,o=ce.useMemo(()=>{const f=yT(a);return{store:a,subscription:f,getServerState:s?()=>s:void 0}},[a,s]),u=ce.useMemo(()=>a.getState(),[a]);xT(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,u]);const h=t||es;return ce.createElement(h.Provider,{value:o},e)}var MT=TT;function hg(n=es){return function(){return ce.useContext(n)}}var Vw=hg();function Yw(n=es){const e=n===es?Vw:hg(n),t=()=>{const{store:s}=e();return s};return Object.assign(t,{withTypes:()=>t}),t}var fg=Yw();function kT(n=es){const e=n===es?fg:Yw(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Xw=kT(),CT=(n,e)=>n===e;function RT(n=es){const e=n===es?Vw:hg(n),t=(s,a={})=>{const{equalityFn:o=CT}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:h,subscription:f,getServerState:d}=u;ce.useRef(!0);const g=ce.useCallback({[s.name](b){return s(b)}}[s.name],[s]),m=pT.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,d||h.getState,g,o);return ce.useDebugValue(m),m};return Object.assign(t,{withTypes:()=>t}),t}var Ww=RT(),OT=Fw;function At(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var PT=typeof Symbol=="function"&&Symbol.observable||"@@observable",iv=PT,md=()=>Math.random().toString(36).substring(7).split("").join("."),DT={INIT:`@@redux/INIT${md()}`,REPLACE:`@@redux/REPLACE${md()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${md()}`},vc=DT;function ea(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function dg(n,e,t){if(typeof n!="function")throw new Error(At(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(At(1));return t(dg)(n,e)}let s=n,a=e,o=new Map,u=o,h=0,f=!1;function d(){u===o&&(u=new Map,o.forEach((_,E)=>{u.set(E,_)}))}function g(){if(f)throw new Error(At(3));return a}function m(_){if(typeof _!="function")throw new Error(At(4));if(f)throw new Error(At(5));let E=!0;d();const M=h++;return u.set(M,_),function(){if(E){if(f)throw new Error(At(6));E=!1,d(),u.delete(M),o=null}}}function b(_){if(!ea(_))throw new Error(At(7));if(typeof _.type>"u")throw new Error(At(8));if(typeof _.type!="string")throw new Error(At(17));if(f)throw new Error(At(9));try{f=!0,a=s(a,_)}finally{f=!1}return(o=u).forEach(M=>{M()}),_}function v(_){if(typeof _!="function")throw new Error(At(10));s=_,b({type:vc.REPLACE})}function w(){const _=m;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(At(11));function M(){const T=E;T.next&&T.next(g())}return M(),{unsubscribe:_(M)}},[iv](){return this}}}return b({type:vc.INIT}),{dispatch:b,subscribe:m,getState:g,replaceReducer:v,[iv]:w}}function BT(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:vc.INIT})>"u")throw new Error(At(12));if(typeof t(void 0,{type:vc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function pg(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const u=e[o];typeof n[u]=="function"&&(t[u]=n[u])}const s=Object.keys(t);let a;try{BT(t)}catch(o){a=o}return function(u={},h){if(a)throw a;let f=!1;const d={};for(let g=0;g<s.length;g++){const m=s[g],b=t[m],v=u[m],w=b(v,h);if(typeof w>"u")throw h&&h.type,new Error(At(14));d[m]=w,f=f||w!==v}return f=f||s.length!==Object.keys(u).length,f?d:u}}function _c(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...s)=>e(t(...s)))}function zT(...n){return e=>(t,s)=>{const a=e(t,s);let o=()=>{throw new Error(At(15))};const u={getState:a.getState,dispatch:(f,...d)=>o(f,...d)},h=n.map(f=>f(u));return o=_c(...h)(a.dispatch),{...a,dispatch:o}}}function gg(n){return ea(n)&&"type"in n&&typeof n.type=="string"}var yg=Symbol.for("immer-nothing"),Lo=Symbol.for("immer-draftable"),Xt=Symbol.for("immer-state");function Et(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Gs=Object.getPrototypeOf;function Vn(n){return!!n&&!!n[Xt]}function Dn(n){return n?Qw(n)||Array.isArray(n)||!!n[Lo]||!!n.constructor?.[Lo]||hl(n)||fl(n):!1}var jT=Object.prototype.constructor.toString();function Qw(n){if(!n||typeof n!="object")return!1;const e=Gs(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===jT}function UT(n){return Vn(n)||Et(15,n),n[Xt].base_}function Qo(n,e){Hs(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,s)=>e(s,t,n))}function Hs(n){const e=n[Xt];return e?e.type_:Array.isArray(n)?1:hl(n)?2:fl(n)?3:0}function Ko(n,e){return Hs(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function bd(n,e){return Hs(n)===2?n.get(e):n[e]}function Kw(n,e,t){const s=Hs(n);s===2?n.set(e,t):s===3?n.add(t):n[e]=t}function LT(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function hl(n){return n instanceof Map}function fl(n){return n instanceof Set}function Os(n){return n.copy_||n.base_}function yp(n,e){if(hl(n))return new Map(n);if(fl(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=Qw(n);if(e===!0||e==="class_only"&&!t){const s=Object.getOwnPropertyDescriptors(n);delete s[Xt];let a=Reflect.ownKeys(s);for(let o=0;o<a.length;o++){const u=a[o],h=s[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(s[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[u]})}return Object.create(Gs(n),s)}else{const s=Gs(n);if(s!==null&&t)return{...n};const a=Object.create(s);return Object.assign(a,n)}}function mg(n,e=!1){return Nc(n)||Vn(n)||!Dn(n)||(Hs(n)>1&&(n.set=n.add=n.clear=n.delete=IT),Object.freeze(n),e&&Object.entries(n).forEach(([t,s])=>mg(s,!0))),n}function IT(){Et(2)}function Nc(n){return Object.isFrozen(n)}var mp={};function $s(n){const e=mp[n];return e||Et(0,n),e}function NT(n,e){mp[n]||(mp[n]=e)}var Zo;function Zw(){return Zo}function qT(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sv(n,e){e&&($s("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function bp(n){vp(n),n.drafts_.forEach(GT),n.drafts_=null}function vp(n){n===Zo&&(Zo=n.parent_)}function rv(n){return Zo=qT(Zo,n)}function GT(n){const e=n[Xt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function av(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Xt].modified_&&(bp(e),Et(4)),Dn(n)&&(n=wc(e,n),e.parent_||xc(e,n)),e.patches_&&$s("Patches").generateReplacementPatches_(t[Xt].base_,n,e.patches_,e.inversePatches_)):n=wc(e,t,[]),bp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==yg?n:void 0}function wc(n,e,t){if(Nc(e))return e;const s=e[Xt];if(!s)return Qo(e,(a,o)=>ov(n,s,e,a,o,t)),e;if(s.scope_!==n)return e;if(!s.modified_)return xc(n,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let o=a,u=!1;s.type_===3&&(o=new Set(a),a.clear(),u=!0),Qo(o,(h,f)=>ov(n,s,a,h,f,t,u)),xc(n,a,!1),t&&n.patches_&&$s("Patches").generatePatches_(s,t,n.patches_,n.inversePatches_)}return s.copy_}function ov(n,e,t,s,a,o,u){if(Vn(a)){const h=o&&e&&e.type_!==3&&!Ko(e.assigned_,s)?o.concat(s):void 0,f=wc(n,a,h);if(Kw(t,s,f),Vn(f))n.canAutoFreeze_=!1;else return}else u&&t.add(a);if(Dn(a)&&!Nc(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;wc(n,a),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,s)&&xc(n,a)}}function xc(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mg(e,t)}function HT(n,e){const t=Array.isArray(n),s={type_:t?1:0,scope_:e?e.scope_:Zw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,o=bg;t&&(a=[s],o=Jo);const{revoke:u,proxy:h}=Proxy.revocable(a,o);return s.draft_=h,s.revoke_=u,h}var bg={get(n,e){if(e===Xt)return n;const t=Os(n);if(!Ko(t,e))return $T(n,t,e);const s=t[e];return n.finalized_||!Dn(s)?s:s===vd(n.base_,e)?(_d(n),n.copy_[e]=wp(s,n)):s},has(n,e){return e in Os(n)},ownKeys(n){return Reflect.ownKeys(Os(n))},set(n,e,t){const s=Jw(Os(n),e);if(s?.set)return s.set.call(n.draft_,t),!0;if(!n.modified_){const a=vd(Os(n),e),o=a?.[Xt];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(LT(t,a)&&(t!==void 0||Ko(n.base_,e)))return!0;_d(n),_p(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return vd(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,_d(n),_p(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Os(n),s=Reflect.getOwnPropertyDescriptor(t,e);return s&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:s.enumerable,value:t[e]}},defineProperty(){Et(11)},getPrototypeOf(n){return Gs(n.base_)},setPrototypeOf(){Et(12)}},Jo={};Qo(bg,(n,e)=>{Jo[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Jo.deleteProperty=function(n,e){return Jo.set.call(this,n,e,void 0)};Jo.set=function(n,e,t){return bg.set.call(this,n[0],e,t,n[0])};function vd(n,e){const t=n[Xt];return(t?Os(t):n)[e]}function $T(n,e,t){const s=Jw(e,t);return s?"value"in s?s.value:s.get?.call(n.draft_):void 0}function Jw(n,e){if(!(e in n))return;let t=Gs(n);for(;t;){const s=Object.getOwnPropertyDescriptor(t,e);if(s)return s;t=Gs(t)}}function _p(n){n.modified_||(n.modified_=!0,n.parent_&&_p(n.parent_))}function _d(n){n.copy_||(n.copy_=yp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var FT=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,s)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const u=this;return function(f=o,...d){return u.produce(f,g=>t.call(this,g,...d))}}typeof t!="function"&&Et(6),s!==void 0&&typeof s!="function"&&Et(7);let a;if(Dn(e)){const o=rv(this),u=wp(e,void 0);let h=!0;try{a=t(u),h=!1}finally{h?bp(o):vp(o)}return sv(o,s),av(a,o)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===yg&&(a=void 0),this.autoFreeze_&&mg(a,!0),s){const o=[],u=[];$s("Patches").generateReplacementPatches_(e,a,o,u),s(o,u)}return a}else Et(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,f=>e(f,...h));let s,a;return[this.produce(e,t,(u,h)=>{s=u,a=h}),s,a]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Dn(n)||Et(8),Vn(n)&&(n=VT(n));const e=rv(this),t=wp(n,void 0);return t[Xt].isManual_=!0,vp(e),t}finishDraft(n,e){const t=n&&n[Xt];(!t||!t.isManual_)&&Et(9);const{scope_:s}=t;return sv(s,e),av(void 0,s)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const s=$s("Patches").applyPatches_;return Vn(n)?s(n,e):this.produce(n,a=>s(a,e))}};function wp(n,e){const t=hl(n)?$s("MapSet").proxyMap_(n,e):fl(n)?$s("MapSet").proxySet_(n,e):HT(n,e);return(e?e.scope_:Zw()).drafts_.push(t),t}function VT(n){return Vn(n)||Et(10,n),ex(n)}function ex(n){if(!Dn(n)||Nc(n))return n;const e=n[Xt];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=yp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=yp(n,!0);return Qo(t,(s,a)=>{Kw(t,s,ex(a))}),e&&(e.finalized_=!1),t}function YT(){const e="replace",s="remove";function a(b,v,w,S){switch(b.type_){case 0:case 2:return u(b,v,w,S);case 1:return o(b,v,w,S);case 3:return h(b,v,w,S)}}function o(b,v,w,S){let{base_:_,assigned_:E}=b,M=b.copy_;M.length<_.length&&([_,M]=[M,_],[w,S]=[S,w]);for(let A=0;A<_.length;A++)if(E[A]&&M[A]!==_[A]){const T=v.concat([A]);w.push({op:e,path:T,value:m(M[A])}),S.push({op:e,path:T,value:m(_[A])})}for(let A=_.length;A<M.length;A++){const T=v.concat([A]);w.push({op:"add",path:T,value:m(M[A])})}for(let A=M.length-1;_.length<=A;--A){const T=v.concat([A]);S.push({op:s,path:T})}}function u(b,v,w,S){const{base_:_,copy_:E}=b;Qo(b.assigned_,(M,A)=>{const T=bd(_,M),R=bd(E,M),O=A?Ko(_,M)?e:"add":s;if(T===R&&O===e)return;const C=v.concat(M);w.push(O===s?{op:O,path:C}:{op:O,path:C,value:R}),S.push(O==="add"?{op:s,path:C}:O===s?{op:"add",path:C,value:m(T)}:{op:e,path:C,value:m(T)})})}function h(b,v,w,S){let{base_:_,copy_:E}=b,M=0;_.forEach(A=>{if(!E.has(A)){const T=v.concat([M]);w.push({op:s,path:T,value:A}),S.unshift({op:"add",path:T,value:A})}M++}),M=0,E.forEach(A=>{if(!_.has(A)){const T=v.concat([M]);w.push({op:"add",path:T,value:A}),S.unshift({op:s,path:T,value:A})}M++})}function f(b,v,w,S){w.push({op:e,path:[],value:v===yg?void 0:v}),S.push({op:e,path:[],value:b})}function d(b,v){return v.forEach(w=>{const{path:S,op:_}=w;let E=b;for(let R=0;R<S.length-1;R++){const O=Hs(E);let C=S[R];typeof C!="string"&&typeof C!="number"&&(C=""+C),(O===0||O===1)&&(C==="__proto__"||C==="constructor")&&Et(19),typeof E=="function"&&C==="prototype"&&Et(19),E=bd(E,C),typeof E!="object"&&Et(18,S.join("/"))}const M=Hs(E),A=g(w.value),T=S[S.length-1];switch(_){case e:switch(M){case 2:return E.set(T,A);case 3:Et(16);default:return E[T]=A}case"add":switch(M){case 1:return T==="-"?E.push(A):E.splice(T,0,A);case 2:return E.set(T,A);case 3:return E.add(A);default:return E[T]=A}case s:switch(M){case 1:return E.splice(T,1);case 2:return E.delete(T);case 3:return E.delete(w.value);default:return delete E[T]}default:Et(17,_)}}),b}function g(b){if(!Dn(b))return b;if(Array.isArray(b))return b.map(g);if(hl(b))return new Map(Array.from(b.entries()).map(([w,S])=>[w,g(S)]));if(fl(b))return new Set(Array.from(b).map(g));const v=Object.create(Gs(b));for(const w in b)v[w]=g(b[w]);return Ko(b,Lo)&&(v[Lo]=b[Lo]),v}function m(b){return Vn(b)?g(b):b}NT("Patches",{applyPatches_:d,generatePatches_:a,generateReplacementPatches_:f})}var an=new FT,dl=an.produce,tx=an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseStrictShallowCopy.bind(an);var lv=an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function XT(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function WT(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function QT(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${e}[${t}]`)}}var uv=n=>Array.isArray(n)?n:[n];function KT(n){const e=Array.isArray(n[0])?n[0]:n;return QT(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ZT(n,e){const t=[],{length:s}=n;for(let a=0;a<s;a++)t.push(n[a].apply(null,e));return t}var JT=class{constructor(n){this.value=n}deref(){return this.value}},e2=typeof WeakRef<"u"?WeakRef:JT,t2=0,cv=1;function Ou(){return{s:t2,v:void 0,o:null,p:null}}function Sc(n,e={}){let t=Ou();const{resultEqualityCheck:s}=e;let a,o=0;function u(){let h=t;const{length:f}=arguments;for(let m=0,b=f;m<b;m++){const v=arguments[m];if(typeof v=="function"||typeof v=="object"&&v!==null){let w=h.o;w===null&&(h.o=w=new WeakMap);const S=w.get(v);S===void 0?(h=Ou(),w.set(v,h)):h=S}else{let w=h.p;w===null&&(h.p=w=new Map);const S=w.get(v);S===void 0?(h=Ou(),w.set(v,h)):h=S}}const d=h;let g;if(h.s===cv)g=h.v;else if(g=n.apply(null,arguments),o++,s){const m=a?.deref?.()??a;m!=null&&s(m,g)&&(g=m,o!==0&&o--),a=typeof g=="object"&&g!==null||typeof g=="function"?new e2(g):g}return d.s=cv,d.v=g,g}return u.clearCache=()=>{t=Ou(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function n2(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,s=(...a)=>{let o=0,u=0,h,f={},d=a.pop();typeof d=="object"&&(f=d,d=a.pop()),XT(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const g={...t,...f},{memoize:m,memoizeOptions:b=[],argsMemoize:v=Sc,argsMemoizeOptions:w=[]}=g,S=uv(b),_=uv(w),E=KT(a),M=m(function(){return o++,d.apply(null,arguments)},...S),A=v(function(){u++;const R=ZT(E,arguments);return h=M.apply(null,R),h},..._);return Object.assign(A,{resultFunc:d,memoizedResultFunc:M,dependencies:E,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>h,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:m,argsMemoize:v})};return Object.assign(s,{withTypes:()=>s}),s}var vg=n2(Sc),i2=Object.assign((n,e=vg)=>{WT(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),s=t.map(o=>n[o]);return e(s,(...o)=>o.reduce((u,h,f)=>(u[t[f]]=h,u),{}))},{withTypes:()=>i2});function nx(n){return({dispatch:t,getState:s})=>a=>o=>typeof o=="function"?o(t,s,n):a(o)}var s2=nx(),r2=nx,a2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_c:_c.apply(null,arguments)},o2=n=>n&&typeof n.match=="function";function Nt(n,e){function t(...s){if(e){let a=e(...s);if(!a)throw new Error(bt(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:s[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=s=>gg(s)&&s.type===n,t}var ix=class Mo extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Mo.prototype)}static get[Symbol.species](){return Mo}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Mo(...e[0].concat(this)):new Mo(...e.concat(this))}};function hv(n){return Dn(n)?dl(n,()=>{}):n}function xp(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function l2(n){return typeof n=="boolean"}var u2=()=>function(e){const{thunk:t=!0,immutableCheck:s=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=e??{};let u=new ix;return t&&(l2(t)?u.push(s2):u.push(r2(t.extraArgument))),u},qc="RTK_autoBatch",co=()=>n=>({payload:n,meta:{[qc]:!0}}),fv=n=>e=>{setTimeout(e,n)},c2=(n={type:"raf"})=>e=>(...t)=>{const s=e(...t);let a=!0,o=!1,u=!1;const h=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fv(10):n.type==="callback"?n.queueNotification:fv(n.timeout),d=()=>{u=!1,o&&(o=!1,h.forEach(g=>g()))};return Object.assign({},s,{subscribe(g){const m=()=>a&&g(),b=s.subscribe(m);return h.add(g),()=>{b(),h.delete(g)}},dispatch(g){try{return a=!g?.meta?.[qc],o=!a,o&&(u||(u=!0,f(d))),s.dispatch(g)}finally{a=!0}}})},h2=n=>function(t){const{autoBatch:s=!0}=t??{};let a=new ix(n);return s&&a.push(c2(typeof s=="object"?s:void 0)),a};function f2(n){const e=u2(),{reducer:t=void 0,middleware:s,devTools:a=!0,preloadedState:o=void 0,enhancers:u=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(ea(t))h=pg(t);else throw new Error(bt(1));let f;typeof s=="function"?f=s(e):f=e();let d=_c;a&&(d=a2({trace:!1,...typeof a=="object"&&a}));const g=zT(...f),m=h2(g);let b=typeof u=="function"?u(m):m();const v=d(...b);return dg(h,o,v)}function sx(n){const e={},t=[];let s;const a={addCase(o,u){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(bt(28));if(h in e)throw new Error(bt(29));return e[h]=u,a},addMatcher(o,u){return t.push({matcher:o,reducer:u}),a},addDefaultCase(o){return s=o,a}};return n(a),[e,t,s]}function d2(n){return typeof n=="function"}function p2(n,e){let[t,s,a]=sx(e),o;if(d2(n))o=()=>hv(n());else{const h=hv(n);o=()=>h}function u(h=o(),f){let d=[t[f.type],...s.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[a]),d.reduce((g,m)=>{if(m)if(Vn(g)){const v=m(g,f);return v===void 0?g:v}else{if(Dn(g))return dl(g,b=>m(b,f));{const b=m(g,f);if(b===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return g},h)}return u.getInitialState=o,u}var rx=(n,e)=>o2(n)?n.match(e):n(e);function xi(...n){return e=>n.some(t=>rx(t,e))}function Io(...n){return e=>n.every(t=>rx(t,e))}function Gc(n,e){if(!n||!n.meta)return!1;const t=typeof n.meta.requestId=="string",s=e.indexOf(n.meta.requestStatus)>-1;return t&&s}function pl(n){return typeof n[0]=="function"&&"pending"in n[0]&&"fulfilled"in n[0]&&"rejected"in n[0]}function _g(...n){return n.length===0?e=>Gc(e,["pending"]):pl(n)?xi(...n.map(e=>e.pending)):_g()(n[0])}function ta(...n){return n.length===0?e=>Gc(e,["rejected"]):pl(n)?xi(...n.map(e=>e.rejected)):ta()(n[0])}function Hc(...n){const e=t=>t&&t.meta&&t.meta.rejectedWithValue;return n.length===0?Io(ta(...n),e):pl(n)?Io(ta(...n),e):Hc()(n[0])}function ts(...n){return n.length===0?e=>Gc(e,["fulfilled"]):pl(n)?xi(...n.map(e=>e.fulfilled)):ts()(n[0])}function Sp(...n){return n.length===0?e=>Gc(e,["pending","fulfilled","rejected"]):pl(n)?xi(...n.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):Sp()(n[0])}var g2="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gl=(n=21)=>{let e="",t=n;for(;t--;)e+=g2[Math.random()*64|0];return e},y2=["name","message","stack","code"],wd=class{constructor(n,e){this.payload=n,this.meta=e}_type},dv=class{constructor(n,e){this.payload=n,this.meta=e}_type},m2=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of y2)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},pv="External signal was aborted",gv=(()=>{function n(e,t,s){const a=Nt(e+"/fulfilled",(f,d,g,m)=>({payload:f,meta:{...m||{},arg:g,requestId:d,requestStatus:"fulfilled"}})),o=Nt(e+"/pending",(f,d,g)=>({payload:void 0,meta:{...g||{},arg:d,requestId:f,requestStatus:"pending"}})),u=Nt(e+"/rejected",(f,d,g,m,b)=>({payload:m,error:(s&&s.serializeError||m2)(f||"Rejected"),meta:{...b||{},arg:g,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function h(f,{signal:d}={}){return(g,m,b)=>{const v=s?.idGenerator?s.idGenerator(f):gl(),w=new AbortController;let S,_;function E(A){_=A,w.abort()}d&&(d.aborted?E(pv):d.addEventListener("abort",()=>E(pv),{once:!0}));const M=(async function(){let A;try{let R=s?.condition?.(f,{getState:m,extra:b});if(v2(R)&&(R=await R),R===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const O=new Promise((C,P)=>{S=()=>{P({name:"AbortError",message:_||"Aborted"})},w.signal.addEventListener("abort",S)});g(o(v,f,s?.getPendingMeta?.({requestId:v,arg:f},{getState:m,extra:b}))),A=await Promise.race([O,Promise.resolve(t(f,{dispatch:g,getState:m,extra:b,requestId:v,signal:w.signal,abort:E,rejectWithValue:(C,P)=>new wd(C,P),fulfillWithValue:(C,P)=>new dv(C,P)})).then(C=>{if(C instanceof wd)throw C;return C instanceof dv?a(C.payload,v,f,C.meta):a(C,v,f)})])}catch(R){A=R instanceof wd?u(null,v,f,R.payload,R.meta):u(R,v,f)}finally{S&&w.signal.removeEventListener("abort",S)}return s&&!s.dispatchConditionRejection&&u.match(A)&&A.meta.condition||g(A),A})();return Object.assign(M,{abort:E,requestId:v,arg:f,unwrap(){return M.then(b2)}})}}return Object.assign(h,{pending:o,rejected:u,fulfilled:a,settled:xi(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function b2(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function v2(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var _2=Symbol.for("rtk-slice-createasyncthunk");function w2(n,e){return`${n}/${e}`}function x2({creators:n}={}){const e=n?.asyncThunk?.[_2];return function(s){const{name:a,reducerPath:o=a}=s;if(!a)throw new Error(bt(11));const u=(typeof s.reducers=="function"?s.reducers(A2()):s.reducers)||{},h=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(M,A){const T=typeof M=="string"?M:M.type;if(!T)throw new Error(bt(12));if(T in f.sliceCaseReducersByType)throw new Error(bt(13));return f.sliceCaseReducersByType[T]=A,d},addMatcher(M,A){return f.sliceMatchers.push({matcher:M,reducer:A}),d},exposeAction(M,A){return f.actionCreators[M]=A,d},exposeCaseReducer(M,A){return f.sliceCaseReducersByName[M]=A,d}};h.forEach(M=>{const A=u[M],T={reducerName:M,type:w2(a,M),createNotation:typeof s.reducers=="function"};T2(A)?k2(T,A,d,e):E2(T,A,d)});function g(){const[M={},A=[],T=void 0]=typeof s.extraReducers=="function"?sx(s.extraReducers):[s.extraReducers],R={...M,...f.sliceCaseReducersByType};return p2(s.initialState,O=>{for(let C in R)O.addCase(C,R[C]);for(let C of f.sliceMatchers)O.addMatcher(C.matcher,C.reducer);for(let C of A)O.addMatcher(C.matcher,C.reducer);T&&O.addDefaultCase(T)})}const m=M=>M,b=new Map;let v;function w(M,A){return v||(v=g()),v(M,A)}function S(){return v||(v=g()),v.getInitialState()}function _(M,A=!1){function T(O){let C=O[M];return typeof C>"u"&&A&&(C=S()),C}function R(O=m){const C=xp(b,A,()=>new WeakMap);return xp(C,O,()=>{const P={};for(const[D,z]of Object.entries(s.selectors??{}))P[D]=S2(z,O,S,A);return P})}return{reducerPath:M,getSelectors:R,get selectors(){return R(T)},selectSlice:T}}const E={name:a,reducer:w,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:S,..._(o),injectInto(M,{reducerPath:A,...T}={}){const R=A??o;return M.inject({reducerPath:R,reducer:w},T),{...E,..._(R,!0)}}};return E}}function S2(n,e,t,s){function a(o,...u){let h=e(o);return typeof h>"u"&&s&&(h=t()),n(h,...u)}return a.unwrapped=n,a}var mi=x2();function A2(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function E2({type:n,reducerName:e,createNotation:t},s,a){let o,u;if("reducer"in s){if(t&&!M2(s))throw new Error(bt(17));o=s.reducer,u=s.prepare}else o=s;a.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,u?Nt(n,u):Nt(n))}function T2(n){return n._reducerDefinitionType==="asyncThunk"}function M2(n){return n._reducerDefinitionType==="reducerWithPrepare"}function k2({type:n,reducerName:e},t,s,a){if(!a)throw new Error(bt(18));const{payloadCreator:o,fulfilled:u,pending:h,rejected:f,settled:d,options:g}=t,m=a(n,o,g);s.exposeAction(e,m),u&&s.addCase(m.fulfilled,u),h&&s.addCase(m.pending,h),f&&s.addCase(m.rejected,f),d&&s.addMatcher(m.settled,d),s.exposeCaseReducer(e,{fulfilled:u||Pu,pending:h||Pu,rejected:f||Pu,settled:d||Pu})}function Pu(){}var C2="task",ax="listener",ox="completed",wg="cancelled",R2=`task-${wg}`,O2=`task-${ox}`,Ap=`${ax}-${wg}`,P2=`${ax}-${ox}`,$c=class{constructor(n){this.code=n,this.message=`${C2} ${wg} (reason: ${n})`}name="TaskAbortError";message},xg=(n,e)=>{if(typeof n!="function")throw new TypeError(bt(32))},Ac=()=>{},lx=(n,e=Ac)=>(n.catch(e),n),ux=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Ns=(n,e)=>{const t=n.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),n.abort(e))},qs=n=>{if(n.aborted){const{reason:e}=n;throw new $c(e)}};function cx(n,e){let t=Ac;return new Promise((s,a)=>{const o=()=>a(new $c(n.reason));if(n.aborted){o();return}t=ux(n,o),e.finally(()=>t()).then(s,a)}).finally(()=>{t=Ac})}var D2=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof $c?"cancelled":"rejected",error:t}}finally{e?.()}},Ec=n=>e=>lx(cx(n,e).then(t=>(qs(n),t))),hx=n=>{const e=Ec(n);return t=>e(new Promise(s=>setTimeout(s,t)))},{assign:Qr}=Object,yv={},Fc="listenerMiddleware",B2=(n,e)=>{const t=s=>ux(n,()=>Ns(s,n.reason));return(s,a)=>{xg(s);const o=new AbortController;t(o);const u=D2(async()=>{qs(n),qs(o.signal);const h=await s({pause:Ec(o.signal),delay:hx(o.signal),signal:o.signal});return qs(o.signal),h},()=>Ns(o,O2));return a?.autoJoin&&e.push(u.catch(Ac)),{result:Ec(n)(u),cancel(){Ns(o,R2)}}}},z2=(n,e)=>{const t=async(s,a)=>{qs(e);let o=()=>{};const h=[new Promise((f,d)=>{let g=n({predicate:s,effect:(m,b)=>{b.unsubscribe(),f([m,b.getState(),b.getOriginalState()])}});o=()=>{g(),d()}})];a!=null&&h.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await cx(e,Promise.race(h));return qs(e),f}finally{o()}};return(s,a)=>lx(t(s,a))},fx=n=>{let{type:e,actionCreator:t,matcher:s,predicate:a,effect:o}=n;if(e)a=Nt(e).match;else if(t)e=t.type,a=t.match;else if(s)a=s;else if(!a)throw new Error(bt(21));return xg(o),{predicate:a,type:e,effect:o}},dx=Qr(n=>{const{type:e,predicate:t,effect:s}=fx(n);return{id:gl(),effect:s,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(bt(22))}}},{withTypes:()=>dx}),mv=(n,e)=>{const{type:t,effect:s,predicate:a}=fx(e);return Array.from(n.values()).find(o=>(typeof t=="string"?o.type===t:o.predicate===a)&&o.effect===s)},Ep=n=>{n.pending.forEach(e=>{Ns(e,Ap)})},j2=n=>()=>{n.forEach(Ep),n.clear()},bv=(n,e,t)=>{try{n(e,t)}catch(s){setTimeout(()=>{throw s},0)}},px=Qr(Nt(`${Fc}/add`),{withTypes:()=>px}),U2=Nt(`${Fc}/removeAll`),gx=Qr(Nt(`${Fc}/remove`),{withTypes:()=>gx}),L2=(...n)=>{console.error(`${Fc}/error`,...n)},I2=(n={})=>{const e=new Map,{extra:t,onError:s=L2}=n;xg(s);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),m=>{g.unsubscribe(),m?.cancelActive&&Ep(g)}),o=g=>{const m=mv(e,g)??dx(g);return a(m)};Qr(o,{withTypes:()=>o});const u=g=>{const m=mv(e,g);return m&&(m.unsubscribe(),g.cancelActive&&Ep(m)),!!m};Qr(u,{withTypes:()=>u});const h=async(g,m,b,v)=>{const w=new AbortController,S=z2(o,w.signal),_=[];try{g.pending.add(w),await Promise.resolve(g.effect(m,Qr({},b,{getOriginalState:v,condition:(E,M)=>S(E,M).then(Boolean),take:S,delay:hx(w.signal),pause:Ec(w.signal),extra:t,signal:w.signal,fork:B2(w.signal,_),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((E,M,A)=>{E!==w&&(Ns(E,Ap),A.delete(E))})},cancel:()=>{Ns(w,Ap),g.pending.delete(w)},throwIfCancelled:()=>{qs(w.signal)}})))}catch(E){E instanceof $c||bv(s,E,{raisedBy:"effect"})}finally{await Promise.all(_),Ns(w,P2),g.pending.delete(w)}},f=j2(e);return{middleware:g=>m=>b=>{if(!gg(b))return m(b);if(px.match(b))return o(b.payload);if(U2.match(b)){f();return}if(gx.match(b))return u(b.payload);let v=g.getState();const w=()=>{if(v===yv)throw new Error(bt(23));return v};let S;try{if(S=m(b),e.size>0){const _=g.getState(),E=Array.from(e.values());for(const M of E){let A=!1;try{A=M.predicate(b,_,v)}catch(T){A=!1,bv(s,T,{raisedBy:"predicate"})}A&&h(M,b,g,w)}}}finally{v=yv}return S},startListening:o,stopListening:u,clearListeners:f}},N2=n=>"reducerPath"in n&&typeof n.reducerPath=="string",q2=n=>n.flatMap(e=>N2(e)?[[e.reducerPath,e.reducer]]:Object.entries(e)),Sg=Symbol.for("rtk-state-proxy-original"),G2=n=>!!n&&!!n[Sg],H2=new WeakMap,$2=(n,e)=>xp(H2,n,()=>new Proxy(n,{get:(t,s,a)=>{if(s===Sg)return t;const o=Reflect.get(t,s,a);if(typeof o>"u"){const u=e[s.toString()];if(u){const h=u(void 0,{type:gl()});if(typeof h>"u")throw new Error(bt(24));return h}}return o}})),F2=n=>{if(!G2(n))throw new Error(bt(25));return n[Sg]},V2=(n={})=>n;function Y2(...n){const e=Object.fromEntries(q2(n)),t=()=>Object.keys(e).length?pg(e):V2;let s=t();function a(h,f){return s(h,f)}a.withLazyLoadedSlices=()=>a;const o=(h,f={})=>{const{reducerPath:d,reducer:g}=h,m=e[d];return!f.overrideExisting&&m&&m!==g||(e[d]=g,s=t()),a},u=Object.assign(function(f,d){return function(m,...b){return f($2(d?d(m,...b):m,e),...b)}},{original:F2});return Object.assign(a,{inject:o,selector:u})}function bt(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Ag="persist:",Eg="persist/FLUSH",yl="persist/REHYDRATE",Tg="persist/PAUSE",Mg="persist/PERSIST",kg="persist/PURGE",Cg="persist/REGISTER",yx=-1;function fc(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fc=function(t){return typeof t}:fc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(n)}function vv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function X2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vv(t,!0).forEach(function(s){W2(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vv(t).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function W2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Q2(n,e,t,s){s.debug;var a=X2({},t);return n&&fc(n)==="object"&&Object.keys(n).forEach(function(o){o!=="_persist"&&e[o]===t[o]&&(a[o]=n[o])}),a}function K2(n){var e=n.blacklist||null,t=n.whitelist||null,s=n.transforms||[],a=n.throttle||0,o="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ag).concat(n.key),u=n.storage,h;n.serialize===!1?h=function(R){return R}:typeof n.serialize=="function"?h=n.serialize:h=Z2;var f=n.writeFailHandler||null,d={},g={},m=[],b=null,v=null,w=function(R){Object.keys(R).forEach(function(O){E(O)&&d[O]!==R[O]&&m.indexOf(O)===-1&&m.push(O)}),Object.keys(d).forEach(function(O){R[O]===void 0&&E(O)&&m.indexOf(O)===-1&&d[O]!==void 0&&m.push(O)}),b===null&&(b=setInterval(S,a)),d=R};function S(){if(m.length===0){b&&clearInterval(b),b=null;return}var T=m.shift(),R=s.reduce(function(O,C){return C.in(O,T,d)},d[T]);if(R!==void 0)try{g[T]=h(R)}catch(O){console.error("redux-persist/createPersistoid: error serializing state",O)}else delete g[T];m.length===0&&_()}function _(){Object.keys(g).forEach(function(T){d[T]===void 0&&delete g[T]}),v=u.setItem(o,h(g)).catch(M)}function E(T){return!(t&&t.indexOf(T)===-1&&T!=="_persist"||e&&e.indexOf(T)!==-1)}function M(T){f&&f(T)}var A=function(){for(;m.length!==0;)S();return v||Promise.resolve()};return{update:w,flush:A}}function Z2(n){return JSON.stringify(n)}function J2(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ag).concat(n.key),s=n.storage;n.debug;var a;return n.deserialize===!1?a=function(u){return u}:typeof n.deserialize=="function"?a=n.deserialize:a=eM,s.getItem(t).then(function(o){if(o)try{var u={},h=a(o);return Object.keys(h).forEach(function(f){u[f]=e.reduceRight(function(d,g){return g.out(d,f,h)},a(h[f]))}),u}catch(f){throw f}else return})}function eM(n){return JSON.parse(n)}function tM(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ag).concat(n.key);return e.removeItem(t,nM)}function nM(n){}function _v(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function fi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_v(t,!0).forEach(function(s){iM(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_v(t).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function iM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sM(n,e){if(n==null)return{};var t=rM(n,e),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function rM(n,e){if(n==null)return{};var t={},s=Object.keys(n),a,o;for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}var aM=5e3;function oM(n,e){var t=n.version!==void 0?n.version:yx;n.debug;var s=n.stateReconciler===void 0?Q2:n.stateReconciler,a=n.getStoredState||J2,o=n.timeout!==void 0?n.timeout:aM,u=null,h=!1,f=!0,d=function(m){return m._persist.rehydrated&&u&&!f&&u.update(m),m};return function(g,m){var b=g||{},v=b._persist,w=sM(b,["_persist"]),S=w;if(m.type===Mg){var _=!1,E=function(P,D){_||(m.rehydrate(n.key,P,D),_=!0)};if(o&&setTimeout(function(){!_&&E(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},o),f=!1,u||(u=K2(n)),v)return fi({},e(S,m),{_persist:v});if(typeof m.rehydrate!="function"||typeof m.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return m.register(n.key),a(n).then(function(C){var P=n.migrate||function(D,z){return Promise.resolve(D)};P(C,t).then(function(D){E(D)},function(D){E(void 0,D)})},function(C){E(void 0,C)}),fi({},e(S,m),{_persist:{version:t,rehydrated:!1}})}else{if(m.type===kg)return h=!0,m.result(tM(n)),fi({},e(S,m),{_persist:v});if(m.type===Eg)return m.result(u&&u.flush()),fi({},e(S,m),{_persist:v});if(m.type===Tg)f=!0;else if(m.type===yl){if(h)return fi({},S,{_persist:fi({},v,{rehydrated:!0})});if(m.key===n.key){var M=e(S,m),A=m.payload,T=s!==!1&&A!==void 0?s(A,g,M,n):M,R=fi({},T,{_persist:fi({},v,{rehydrated:!0})});return d(R)}}}if(!v)return e(g,m);var O=e(S,m);return O===S?g:d(fi({},O,{_persist:v}))}}function wv(n){return cM(n)||uM(n)||lM()}function lM(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function uM(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function cM(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function xv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Tp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xv(t,!0).forEach(function(s){hM(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xv(t).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function hM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var mx={registry:[],bootstrapped:!1},fM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Cg:return Tp({},e,{registry:[].concat(wv(e.registry),[t.key])});case yl:var s=e.registry.indexOf(t.key),a=wv(e.registry);return a.splice(s,1),Tp({},e,{registry:a,bootstrapped:a.length===0});default:return e}};function dM(n,e,t){var s=dg(fM,mx,void 0),a=function(f){s.dispatch({type:Cg,key:f})},o=function(f,d,g){var m={type:yl,payload:d,err:g,key:f};n.dispatch(m),s.dispatch(m)},u=Tp({},s,{purge:function(){var f=[];return n.dispatch({type:kg,result:function(g){f.push(g)}}),Promise.all(f)},flush:function(){var f=[];return n.dispatch({type:Eg,result:function(g){f.push(g)}}),Promise.all(f)},pause:function(){n.dispatch({type:Tg})},persist:function(){n.dispatch({type:Mg,register:a,rehydrate:o})}});return u.persist(),u}function pM(n,e){return function(t,s){if(!t)return Promise.resolve(void 0);var a=t._persist&&t._persist.version!==void 0?t._persist.version:yx;if(a===s||a>s)return Promise.resolve(t);var o=Object.keys(n).map(function(h){return parseInt(h)}).filter(function(h){return s>=h&&h>a}).sort(function(h,f){return h-f});try{var u=o.reduce(function(h,f){return n[f](h)},t);return Promise.resolve(u)}catch(h){return Promise.reject(h)}}}const bx=I2(),vx=bx.startListening.withTypes();var ho={},Du={},Bu={},Sv;function gM(){if(Sv)return Bu;Sv=1,Bu.__esModule=!0,Bu.default=a;function n(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(h){return typeof h}:n=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(o)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function s(o){if((typeof self>"u"?"undefined":n(self))!=="object"||!(o in self))return!1;try{var u=self[o],h="redux-persist ".concat(o," test");u.setItem(h,"test"),u.getItem(h),u.removeItem(h)}catch{return!1}return!0}function a(o){var u="".concat(o,"Storage");return s(u)?self[u]:t}return Bu}var Av;function yM(){if(Av)return Du;Av=1,Du.__esModule=!0,Du.default=t;var n=e(gM());function e(s){return s&&s.__esModule?s:{default:s}}function t(s){var a=(0,n.default)(s);return{getItem:function(u){return new Promise(function(h,f){h(a.getItem(u))})},setItem:function(u,h){return new Promise(function(f,d){f(a.setItem(u,h))})},removeItem:function(u){return new Promise(function(h,f){h(a.removeItem(u))})}}}return Du}var Ev;function mM(){if(Ev)return ho;Ev=1,ho.__esModule=!0,ho.default=void 0;var n=e(yM());function e(s){return s&&s.__esModule?s:{default:s}}var t=(0,n.default)("local");return ho.default=t,ho}var bM=mM();const vM=Ai(bM);function _M(n){var e="";return t(n),e;function t(a){if(a===null||typeof a!="object"||a.toJSON!=null)e+=JSON.stringify(a);else if(Array.isArray(a)){e+="[";var o=!1;a.forEach(function(h){o&&(e+=","),o=!0,h===void 0&&(h=null),t(h)}),e+="]"}else{e+="{";var u=Object.keys(a).filter(function(h){return a[h]!==void 0}).sort();u.forEach(function(h,f){return s(a,h,f)}),e+="}"}}function s(a,o,u){u>0&&(e+=","),e+=JSON.stringify(o),e+=":",t(a[o])}}const dc=1e-4,Tc=(n,e)=>Math.abs(n-e)<dc,ej=n=>n===0?dc:Math.abs(n)<dc?dc*Math.sign(n):n,Rg=["away","towards","left","right"],wM=["awayRight","towardsRight","towardsLeft","awayLeft"],_x=[...Rg,...wM],xM=n=>n==="away"||n==="towards"?"y":"x",tj=n=>n==="away"?"towards":n==="towards"?"away":n==="left"?"right":"left",nj=n=>SM(xM(n)),SM=n=>n==="x"?"y":"x",No=(n,...e)=>{const t={x:n.x,y:n.y};for(const s of e)t.x+=s.x??0,t.y+=s.y??0;return t},ij=(n,...e)=>{const t={x:n.x,y:n.y};for(const s of e)t.x-=s.x??0,t.y-=s.y??0;return t},AM=(n,e)=>({x:n.x*e,y:n.y*e}),sj=(n,e)=>({x:n.x*e,y:n.y*e,z:n.z*e}),rj=(n,e,t)=>{const s=n;return s.x=e.x*t,s.y=e.y*t,s.z=e.z*t,s},EM=(n,e)=>(n.x*=e,n.y*=e,n.z*=e,n),aj=(n,e)=>({x:n.x*e.x,y:n.y*e.y,z:n.z*e.z}),TM=({x:n,y:e,z:t})=>Math.hypot(n,e,t),oj=({x:n,y:e})=>Math.hypot(n,e),lj=n=>{const e=TM(n);if(e===0)throw new Error("unitVectorInPlace called with zero length vector");return EM(n,1/e)},uj=[{x:0,y:0,z:0},{x:0,y:0,z:1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:1}],cj=(...n)=>{if(n.length===0)return{x:0,y:0,z:0};const[e,...t]=n,s={x:e.x??0,y:e.y??0,z:e.z??0};for(const a of t)s.x+=a.x??0,s.y+=a.y??0,s.z+=a.z??0;return s},hj=(n,...e)=>{for(const t of e)n.x+=t.x??0,n.y+=t.y??0,n.z+=t.z??0;return n},fj=(...n)=>n.reduce(({x:e,y:t,z:s},{x:a,y:o,z:u})=>({x:e*a,y:t*o,z:s*u}),MM),dj=(n,...e)=>{const t={x:n.x,y:n.y,z:n.z};for(const s of e)t.x-=s.x??0,t.y-=s.y??0,t.z-=s.z??0;return t},pj=(n,...e)=>{for(const t of e)n.x-=t.x??0,n.y-=t.y??0,n.z-=t.z??0;return n},gj=({x:n,y:e,z:t},{x:s,y:a,z:o})=>n===s&&e===a&&t===o,yj=({x:n,y:e},{x:t,y:s})=>n===t&&e===s,mj=Object.freeze({x:0,y:0}),bj=Object.freeze({x:0,y:0,z:0}),MM=Object.freeze({x:1,y:1,z:1}),vj=Object.freeze({x:1,y:1,z:0}),_j=Object.freeze({x:1,y:0,z:1}),wj=Object.freeze({x:0,y:1,z:1}),xj=Object.freeze({x:1,y:0,z:0}),Sj=Object.freeze({x:0,y:1,z:0}),Aj=Object.freeze({x:0,y:0,z:1}),Ej=["x","y","z"],Tj=({x:n,y:e})=>{if(!(Tc(n,0)&&Tc(e,0)))return e>n?e>-n?"away":"right":e>-n?"left":"towards"},kM=["right","towardsRight","towards","towardsLeft","left","awayLeft","away","awayRight"],Mj=({x:n,y:e})=>{if(Tc(n,0)&&Tc(e,0))return;const t=Math.atan2(-e,-n),s=Math.round(8*t/(2*Math.PI))&7;return kM[s]},CM=["lookUp","lookDown","lookLeft","lookRight"],RM=["jump","fire","carry","swop","swop.head","swop.heels","hold","toggleColourisation","toggleCrtFilter","cycleResolution","toggleShowFps","menu_select","menu_openOrExit","menu_exit","map",...Rg,"lookShift",...CM,"pageUp","pageDown","home","end"],wx=[...RM];var nn={},xd={},Sd={},Tv;function Og(){if(Tv)return Sd;Tv=1;function n(e){return typeof e<"u"}return Sd.notUndefined=n,Sd}var Mv;function xx(){if(Mv)return xd;Mv=1;const{notUndefined:n}=Og();function e(t){return t!=null&&n(t[Symbol.iterator])}return xd.isIterable=e,xd}var Ad={},kv;function OM(){return kv||(kv=1,Ad.isLoopable=xx().isIterable),Ad}var Ed={},Cv;function PM(){if(Cv)return Ed;Cv=1;const{notUndefined:n}=Og();function e(t){return t==null||n(t[Symbol.iterator])}return Ed.isWrappable=e,Ed}var zu={},Rv;function DM(){if(Rv)return zu;Rv=1;function*n(t){yield*t}zu.wrap=n;function*e(t){t!=null&&(yield*t)}return zu.nullableWrap=e,zu}var ju={},Ov;function BM(){if(Ov)return ju;Ov=1;function n(s,a=s.length,o=[]){return(...u)=>a<=u.length?s(...o,...u):n(s,a-u.length,[...o,...u])}ju.curry=n;function e(s,a){const{fn:o,validateArgs:u,variadic:h,reduces:f,growRight:d,minArgs:g,maxArgs:m,isIterable:b,iterableType:v,applyOnIterableArgs:w,IterableClass:S}=s;if(a.length>g){let _=!0;const E=h?a.findIndex((A,T)=>b(A)&&T>=g):Math.min(m,a.length-1),M=h?a.length:E+1;if(h)for(let A=E;A<a.length;A++)_=_&&b(a[A]);else _=b(a[E]);if(a.length>m&&(E===-1||!_)){const A=h?`...${v}s`:v,T=`${o.name} takes up to ${m} arguments, followed by ${A}. You already passed ${a.length} arguments`;throw h?new Error(`${T} and the following arguments were not all ${v}s`):new Error(`${T} and the last argument was not ${v}`)}if(E>=0&&_){for(let T=E;T<M;T++)a[T]=w(a[T]);const A=h?a.slice(E):a[E];return a.splice(E),d||a.reverse(),a.unshift(A),u(a),f?o(...a):new S(o,a)}}return t(s,a)}function t(s,a=[]){return(...o)=>{if(o.length===0)throw new Error("Cannot make a partial application with no arguments");return o.unshift(...a),e(s,o)}}return ju.variadicCurryWithValidation=t,ju}var fo={},Pv;function zM(){if(Pv)return fo;Pv=1;const n=Symbol.for("_");fo._=n;const e=Symbol("__iterate");fo.__iterate=e;const t=Symbol("split");return fo.split=t,fo}var Dv;function Pg(){if(Dv)return nn;Dv=1;const{isIterable:n}=xx(),{isLoopable:e}=OM(),{isWrappable:t}=PM(),{nullableWrap:s}=DM(),{variadicCurryWithValidation:a}=BM(),{_:o,__iterate:u}=zM();nn.wrap=s,nn.isIterable=n,nn.isLoopable=e,nn.isWrappable=t;function h(S){if(t(S))return n(S)?S:s(S);throw typeof S.next=="function"?new TypeError("iter-tools received a value that looked like an iterator but was not iterable. Get help fixing this: https://github.com/iter-tools/iter-tools/wiki/Making-iterators-iterable"):new TypeError("Expected an iterable, null, or undefined")}nn.ensureIterable=h;function f(S){"return"in S&&S.return()}nn.callReturn=f;function d(S,_){this[o]={fn:S,args:_,staticIterator:null}}nn.BaseIterableIterator=d,Object.assign(d.prototype,{constructor:d,[u](){const{fn:S,args:_}=this[o];return S(..._)},next(){const S=this[o];return S.staticIterator=S.staticIterator||this[u](),S.staticIterator.next()},return(S){const _=this[o];return _.staticIterator=_.staticIterator||this[u](),_.staticIterator.return(S)},throw(S){const _=this[o];return _.staticIterator=_.staticIterator||this[u](),_.staticIterator.throw(S)}});function g(...S){d.apply(this,S)}nn.IterableIterator=g,g.prototype=Object.assign(Object.create(d.prototype),{constructor:g,[Symbol.iterator](){return this[u]()}});function m(S,_={}){const{validateArgs:E=P=>{},variadic:M=!1,reduces:A=!1,growRight:T=!1,minArgs:R=S.length-1,maxArgs:O=S.length-1,applyOnIterableArgs:C=h}=_;return{fn:S,validateArgs:E,variadic:M,reduces:A,growRight:T,minArgs:R,maxArgs:O,isIterable:t,iterableType:"iterable",applyOnIterableArgs:C,IterableClass:g}}function b(S){return[...S]}nn.cache=b;function v(S,{validateArgs:_=E=>E}={}){return(...E)=>(_(E),new g(S,E))}nn.wrapWithIterableIterator=v;const w=(S,_)=>a(m(S,_));return nn.iterableCurry=w,nn}var po={},Bv;function jM(){if(Bv)return po;Bv=1;function n(s,a=!1){return typeof s=="number"&&!isNaN(s)&&isFinite(s)&&!(a&&s===0)}po.isInteger=n;function e(s,a=!1){return n(s)&&(a?s>0:s>=0)}po.isPositiveInteger=e;function t(s,a=!1){return typeof s=="number"&&!isNaN(s)&&!(a&&s===0)}return po.isIntegerOrInfinite=t,po}var Td={},zv;function UM(){if(zv)return Td;zv=1;function n(e){return typeof e=="object"&&e!==null}return Td.isObject=n,Td}var Uu={},jv;function LM(){if(jv)return Uu;jv=1;const{wrapWithIterableIterator:n}=Pg(),{hasOwnProperty:e}=Object.prototype;function*t(a){if(a!=null)for(const o in a)e.call(a,o)&&(yield[o,a[o]])}Uu.__objectEntries=t;const s=n(t,{validateArgs(a){if(!(a[0]==null||typeof a[0]=="object"))throw new Error("obj argument to objectEntries must be an object, null, or undefined")}});return Uu.objectEntries=s,Uu}var Lu={},Uv;function IM(){if(Uv)return Lu;Uv=1;const{wrapWithIterableIterator:n}=Pg(),{hasOwnProperty:e}=Object.prototype;function*t(a){if(a!=null)for(const o in a)e.call(a,o)&&(yield o)}Lu.__objectKeys=t;const s=n(t,{validateArgs(a){if(!(a[0]==null||typeof a[0]=="object"))throw new Error("obj argument to objectKeys must be an object, null, or undefined")}});return Lu.objectKeys=s,Lu}var Iu={},Lv;function NM(){if(Lv)return Iu;Lv=1;const{wrapWithIterableIterator:n}=Pg(),{isInteger:e,isIntegerOrInfinite:t}=jM(),{isObject:s}=UM(),{notUndefined:a}=Og();function*o(h=0,f=1/0,d=1){for(let g=h;d>0?g<f:g>f;g+=d)yield g}Iu.__range=o;const u=n(o,{growRight:!0,validateArgs(h){let[f,d=1/0,g]=h,m;if(s(f)?{start:m,end:d,step:g}=f:h.length>1?m=f:d=f,a(m)&&!e(m))throw new TypeError("The specified start was not an integer");if(a(d)&&!t(d))throw new TypeError("The specified end was not an integer or infinite");if(a(g)&&!e(g,!0))throw new TypeError("The specified step was not a non-zero integer");h[0]=m,h[1]=d,h[2]=g}});return Iu.range=u,Iu}var Md,Iv;function qM(){return Iv||(Iv=1,Md=LM().objectEntries),Md}var GM=qM();const HM=Ai(GM);var kd,Nv;function $M(){return Nv||(Nv=1,kd=IM().objectKeys),kd}var FM=$M();const VM=Ai(FM);var Cd,qv;function YM(){return qv||(qv=1,Cd=NM().range),Cd}var XM=YM();const WM=Ai(XM),Sx=n=>n[Symbol.iterator](),kj=Object.entries,QM=HM,Cj=Object.keys,Rj=VM,KM=Object.fromEntries,Dg=Object.fromEntries,ZM=(n,e)=>{const s=Sx(QM(n)).map(e);return KM(s)},Ax={presses:Dg(wx.map(n=>[n,{keys:[],gamepadButtons:[]}])),axes:{x:[],y:[],xLook:[],yLook:[]},radialAxes:{xy:[]}},Nu=(n,e)=>Array.from(new Set([...n??[],...e??[]]));function Ys(...n){const e=new Set,t=new Set,s=new Set,a=new Set;return n.reduceRight((o,u)=>{const h=new Set(e),f=new Set(t),d=new Set(s),g=new Set(a);for(const v of wx){const w=u?.presses?.[v]?.keys??[],S=u?.presses?.[v]?.gamepadButtons??[],_=w.filter(M=>!h.has(M)),E=S.filter(M=>!f.has(M));o.presses[v]={keys:Nu(o.presses[v]?.keys,_),gamepadButtons:Nu(o.presses[v]?.gamepadButtons,E)};for(const M of w)e.add(M);for(const M of S)t.add(M)}for(const v of["x","y","xLook","yLook"]){const w=u.axes?.[v]??[],S=w.filter(_=>!d.has(_));o.axes[v]=Nu(o.axes[v],S);for(const _ of w)s.add(_)}const m=u.radialAxes?.xy??[],b=m.filter(v=>!g.has(v));o.radialAxes&&(o.radialAxes.xy=Nu(o.radialAxes.xy,b));for(const v of m)a.add(v);return o},structuredClone(Ax))}const ra={buttons:{dPadDown:13,dPadUp:12,dPadLeft:14,dPadRight:15,a:0,b:1,x:2,y:3,lb:4,lt:6,rb:5,rt:7,select:8,start:9,lPress:10,rPress:11},axes:{lStickX:0,lStickY:1,rStickX:2,rStickY:3},radialAxes:{}},JM={buttons:{a:0,b:1,x:3,y:4,lb:6,lt:8,rb:7,rt:9,select:10,start:11,l3:2,r3:5},axes:{lStickX:0,lStickY:1,rStickX:2,rStickY:5},radialAxes:{xy:9}};ZM(ra.buttons,([n,e])=>[e,n]);const ek={start:"1",coin:"5",directions:{up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},buttons:["Control","Alt"," ","Shift","Z","X"]},Dr={directions:{up:"R",down:"F",left:"D",right:"G"},buttons:["A","S","Q","W","I","K"]},vn={dPadUp:"C",dPadDown:"D",dPadLeft:"E",dPadRight:"F",a:"J",b:"G",y:"H",x:"I",rb:"M",start:"O",select:"N"},Xs={presses:{right:{keys:["ArrowRight"]},towards:{keys:["ArrowDown"]},left:{keys:["ArrowLeft"]},away:{keys:["ArrowUp"]},jump:{keys:[" ","`","Z","\\"]},carry:{keys:["Shift","`","Z","\\"]},fire:{keys:["D"]},swop:{keys:["Enter"]},"swop.head":{keys:["[","A"]},"swop.heels":{keys:["]","S"]},hold:{keys:["P"]},map:{keys:["M","Tab"]},menu_openOrExit:{keys:["Escape",""]},menu_select:{keys:["Enter"]},toggleCrtFilter:{keys:["F8","T"]},toggleShowFps:{keys:["F9"]},toggleColourisation:{keys:["F10"]},cycleResolution:{keys:["0"]},pageDown:{keys:["PageDown"]},pageUp:{keys:["PageUp"]},home:{keys:["Home"]},end:{keys:["End"]}}},aa=({buttons:n,axes:e,radialAxes:t})=>{const s=a=>a!==void 0;return{presses:{right:{gamepadButtons:[n.dPadRight].filter(s)},towards:{gamepadButtons:[n.dPadDown].filter(s)},left:{gamepadButtons:[n.dPadLeft].filter(s)},away:{gamepadButtons:[n.dPadUp].filter(s)},jump:{gamepadButtons:[n.a,n.y].filter(s)},carry:{gamepadButtons:[n.x,n.y].filter(s)},fire:{gamepadButtons:[n.b].filter(s)},lookShift:{gamepadButtons:[n.rb].filter(s)},"swop.head":{gamepadButtons:[n.lt].filter(s)},"swop.heels":{gamepadButtons:[n.rt].filter(s)},hold:{gamepadButtons:[n.start].filter(s)},menu_select:{gamepadButtons:[n.a].filter(s)},menu_exit:{gamepadButtons:[n.b].filter(s)},menu_openOrExit:{gamepadButtons:[n.select].filter(s)},map:{gamepadButtons:[n.lb].filter(s)},toggleCrtFilter:{gamepadButtons:[n.l3].filter(s)},toggleShowFps:{gamepadButtons:[n.r3].filter(s)}},axes:{x:[e.lStickX].filter(s),y:[e.lStickY].filter(s),xLook:[e.rStickX].filter(s),yLook:[e.rStickY].filter(s)},radialAxes:{xy:[t.xy].filter(s)}}},tk={inputAssignment:Ys(Xs,aa(ra),{presses:{right:{keys:["P","7"]},towards:{keys:["A","8"]},left:{keys:["O","6"]},away:{keys:["Q","9"]},jump:{keys:[" ","M","N","B","Alt"]},carry:{keys:[" ","Enter","L","K","J"]},fire:{keys:["Shift","Z","X","C","V"]},swop:{keys:["S","D","F","G"]},hold:{keys:["H"]}}}),description:"Closely matches the ZX Spectrum original game's keys"},nk={inputAssignment:Ys(Xs,aa(ra),{presses:{carry:{keys:["F3","F5"]},fire:{keys:[" "]},jump:{keys:["F5"]},swop:{keys:["F1"]},hold:{keys:["H"]}}}),description:"Closely matches Amiga version keys - heavy on the F-keys"},ik={inputAssignment:Ys(Xs,aa(ra),{presses:{lookUp:{keys:["I"]},lookDown:{keys:["K"]},lookLeft:{keys:["J"]},lookRight:{keys:["L"]},lookShift:{keys:["C"]}}}),description:"Combined key and joystick/gamepad assignment, should work on most setups"},sk={inputAssignment:Ys(Xs,aa(ra),{presses:{right:{keys:["D"]},towards:{keys:["S"]},left:{keys:["A"]},away:{keys:["W"]},jump:{keys:[" ","F","P"]},carry:{keys:["Shift","F","I","P"]},fire:{keys:["E","O","Control"]},swop:{keys:["Q"]},hold:{keys:["H"]}}}),description:"Modern, minimalist WASD key layout"},rk={inputAssignment:Ys(Xs,aa(ra),{presses:{right:{keys:[vn.dPadRight]},towards:{keys:[vn.dPadDown]},left:{keys:[vn.dPadLeft]},away:{keys:[vn.dPadUp]},jump:{keys:[vn.a,vn.y]},carry:{keys:[vn.b,vn.y]},fire:{keys:[vn.x]},swop:{keys:[vn.rb]},hold:{keys:[vn.start]},menu_openOrExit:{keys:[vn.select]}}}),description:"8bitdo controllers in keyboard mode (identifies to OS as a keyboard). They work as controllers even on phones that dont support controllers"},ak={inputAssignment:Ys(Xs,aa(JM)),description:"8Bitdo Ultimate 2c Wired reports in a non-standard way on some systems - use this if you have this controller and it doesn't work as expected"},ok=n=>({presses:{right:{keys:[n.directions.right]},towards:{keys:[n.directions.down]},left:{keys:[n.directions.left]},away:{keys:[n.directions.up]},jump:{keys:[n.buttons[0],n.buttons[3]]},carry:{keys:[n.buttons[1],n.buttons[3]]},fire:{keys:[n.buttons[2]]},swop:{keys:[n.start]},hold:{keys:[n.coin]},menu_openOrExit:{keys:[n.buttons[4]]},lookShift:{keys:[n.buttons[5]]}}}),lk={inputAssignment:Ys(Ax,Xs,{presses:{menu_openOrExit:{keys:["`","Tab"]}}},ok(ek),{presses:{lookDown:{keys:[Dr.directions.down]},lookLeft:{keys:[Dr.directions.left]},lookRight:{keys:[Dr.directions.right]},lookUp:{keys:[Dr.directions.up]},"swop.head":{keys:[Dr.buttons[0]]},"swop.heels":{keys:[Dr.buttons[1]]}}}),description:"Arcade-style control panels"},Mp={Default:ik,"ZX Spec":tk,Amiga:nk,MAME:lk,WASD:sk," 8b kbd":rk," 8b U2c":ak},qo=(n=typeof globalThis.window>"u"?"":window.location.search)=>new URLSearchParams(n),uk=()=>qo().get("campaignName")?.startsWith("data:"),Oj=["yellow","cyan","green","magenta","white"],Bg=25,Pj=1e3/Bg,zg={amigaHiResPal:{name:"Amiga Hi-Res PAL",size:{x:640,y:512}},classicMac:{name:"Classic Mac",size:{x:512,y:384}},amigaLowResPal:{name:"Amiga Lo-Res PAL",size:{x:320,y:256}},zxSpectrum:{name:"ZX Spectrum",size:{x:256,y:192}},handheld:{name:"Handheld",size:{x:256,y:135}}},ck=Object.keys(zg),Dj={zxGreen:"#0f0",zxCyan:"#0ff",zxMagenta:"#f0f",zxYellow:"#ff0",zxWhite:"#fff"},Bj="1987-06-01T00:00:00Z",vi=()=>{if(typeof globalThis.window>"u")return"server";const n=new URLSearchParams(window.location.search).get("device");if(n!==null)return n;const e=navigator.userAgent;return navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||/iPad|Tablet|Android(?!.*Mobi)/i.test(e)?"tablet":/Mobi|Android|iPhone|iPod/i.test(e)?"mobile":"desktop"},zj=[],Ex=new Set;Ex.add=()=>{throw new Error("emptySet.add")};Ex.clear=()=>{throw new Error("emptySet.clear")};const wn=Object.freeze({}),Mc=(n,e)=>e.split(".").reduce((t,s)=>t[s],n),hk=(n,e,t)=>{const s=e.split(".");let a=n;for(let o=0;o<s.length-1;o++){const u=s[o];a=a[u]}a[s[s.length-1]]=t},qu=(n,e)=>{const t=n.indexOf(e);return n[(t+1)%n.length]},fk=(n,...e)=>{const t={};for(const s of e)t[s]=n[s];return t},jj=(n,...e)=>{const t={...n};for(const s of e)delete t[s];return t},dk=["world","screen","mixed"];var Rd,Gv;function pk(){if(Gv)return Rd;Gv=1;function n(s){if(Array.isArray(s))return!0;var a=s.length;return typeof a=="number"&&a>-1?a?0 in s&&a-1 in s:!0:!1}function e(s){var a=typeof s;return a==="object"?s===null?"null":n(s)?"array":s.constructor===Object?"pure-object":"object":a}function t(s,a){if(s===a||s!==s&&a!==a)return!0;var o=e(s),u=e(a);if(o!==u)return!1;if(o==="pure-object"){if(s===a)return!0;var h=Object.keys(s),f=Object.keys(a).length;if(h.length!==f)return!1;for(var d=0,g=h.length;d<g;d++){var m=h[d];if(!a.hasOwnProperty(h[d]))return!1;var b=s[m],v=a[m];if(b===s||v===a||b===a||v===s)return b===v;if(!t(b,v))return!1}return!0}else if(o==="array"){if(s.length===a.length)for(var w=0;w<s.length;w++){var S=s[w],_=a[w];if(S===s||_===a||S===a||_===s)return S===_;if(!t(S,_))return!1}else return!1;return!0}else if(o==="object"){if(s.valueOf!==Object.prototype.valueOf()&&a.valueOf!==Object.prototype.valueOf())return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString()&&a.toString!==Object.prototype.toString())return s.toString()===a.toString()}return!1}return Rd=t,Rd}var gk=pk();const Uj=Ai(gk),Lj=Xw.withTypes(),Tx=Ww.withTypes();fg.withTypes();var Mx=(n=>(n.uninitialized="uninitialized",n.pending="pending",n.fulfilled="fulfilled",n.rejected="rejected",n))(Mx||{});function Hv(n){return{status:n,isUninitialized:n==="uninitialized",isLoading:n==="pending",isSuccess:n==="fulfilled",isError:n==="rejected"}}var $v=ea;function kx(n,e){if(n===e||!($v(n)&&$v(e)||Array.isArray(n)&&Array.isArray(e)))return e;const t=Object.keys(e),s=Object.keys(n);let a=t.length===s.length;const o=Array.isArray(e)?[]:{};for(const u of t)o[u]=kx(n[u],e[u]),a&&(a=n[u]===o[u]);return a?n:o}function Kr(n){let e=0;for(const t in n)e++;return e}var Fv=n=>[].concat(...n);function yk(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function kc(n){return n!=null}function mk(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function bk(n,e,t){return n.has(e)?n.get(e):n.set(e,t).get(e)}var Vv=class{constructor(n,e=void 0){this.value=n,this.meta=e}},jg=Nt("__rtkq/focused"),Cx=Nt("__rtkq/unfocused"),Ug=Nt("__rtkq/online"),Rx=Nt("__rtkq/offline");function Lg(n){return n.type==="query"}function vk(n){return n.type==="mutation"}function Ig(n){return n.type==="infinitequery"}function Ng(n,e,t,s,a,o){return _k(n)?n(e,t,s,a).filter(kc).map(kp).map(o):Array.isArray(n)?n.map(kp).map(o):[]}function _k(n){return typeof n=="function"}function kp(n){return typeof n=="string"?{type:n}:n}function wk(n,e){return n.catch(e)}var el=Symbol("forceQueryFn"),Cp=n=>typeof n[el]=="function";function xk({serializeQueryArgs:n,queryThunk:e,infiniteQueryThunk:t,mutationThunk:s,api:a,context:o}){const u=new Map,h=new Map,{unsubscribeQueryResult:f,removeMutationResult:d,updateSubscriptionOptions:g}=a.internalActions;return{buildInitiateQuery:_,buildInitiateInfiniteQuery:E,buildInitiateMutation:M,getRunningQueryThunk:m,getRunningMutationThunk:b,getRunningQueriesThunk:v,getRunningMutationsThunk:w};function m(A,T){return R=>{const O=o.endpointDefinitions[A],C=n({queryArgs:T,endpointDefinition:O,endpointName:A});return u.get(R)?.[C]}}function b(A,T){return R=>h.get(R)?.[T]}function v(){return A=>Object.values(u.get(A)||{}).filter(kc)}function w(){return A=>Object.values(h.get(A)||{}).filter(kc)}function S(A,T){const R=(O,{subscribe:C=!0,forceRefetch:P,subscriptionOptions:D,[el]:z,...U}={})=>(F,Q)=>{const ee=n({queryArgs:O,endpointDefinition:T,endpointName:A});let ae;const L={...U,type:"query",subscribe:C,forceRefetch:P,subscriptionOptions:D,endpointName:A,originalArgs:O,queryCacheKey:ee,[el]:z};if(Lg(T))ae=e(L);else{const{direction:oe,initialPageParam:ze}=U;ae=t({...L,direction:oe,initialPageParam:ze})}const $=a.endpoints[A].select(O),Z=F(ae),re=$(Q()),{requestId:j,abort:Y}=Z,ne=re.requestId!==j,te=u.get(F)?.[ee],J=()=>$(Q()),le=Object.assign(z?Z.then(J):ne&&!te?Promise.resolve(re):Promise.all([te,Z]).then(J),{arg:O,requestId:j,subscriptionOptions:D,queryCacheKey:ee,abort:Y,async unwrap(){const oe=await le;if(oe.isError)throw oe.error;return oe.data},refetch:()=>F(R(O,{subscribe:!1,forceRefetch:!0})),unsubscribe(){C&&F(f({queryCacheKey:ee,requestId:j}))},updateSubscriptionOptions(oe){le.subscriptionOptions=oe,F(g({endpointName:A,requestId:j,queryCacheKey:ee,options:oe}))}});if(!te&&!ne&&!z){const oe=bk(u,F,{});oe[ee]=le,le.then(()=>{delete oe[ee],Kr(oe)||u.delete(F)})}return le};return R}function _(A,T){return S(A,T)}function E(A,T){return S(A,T)}function M(A){return(T,{track:R=!0,fixedCacheKey:O}={})=>(C,P)=>{const D=s({type:"mutation",endpointName:A,originalArgs:T,track:R,fixedCacheKey:O}),z=C(D),{requestId:U,abort:F,unwrap:Q}=z,ee=wk(z.unwrap().then(Z=>({data:Z})),Z=>({error:Z})),ae=()=>{C(d({requestId:U,fixedCacheKey:O}))},L=Object.assign(ee,{arg:z.arg,requestId:U,abort:F,unwrap:Q,reset:ae}),$=h.get(C)||{};return h.set(C,$),$[U]=L,L.then(()=>{delete $[U],Kr($)||h.delete(C)}),O&&($[O]=L,L.then(()=>{$[O]===L&&(delete $[O],Kr($)||h.delete(C))})),L}}}function Sk(n){return n}var Gu=(n={})=>({...n,[qc]:!0});function Ak({reducerPath:n,baseQuery:e,context:{endpointDefinitions:t},serializeQueryArgs:s,api:a,assertTagType:o,selectors:u}){const h=(P,D,z,U)=>(F,Q)=>{const ee=t[P],ae=s({queryArgs:D,endpointDefinition:ee,endpointName:P});if(F(a.internalActions.queryResultPatched({queryCacheKey:ae,patches:z})),!U)return;const L=a.endpoints[P].select(D)(Q()),$=Ng(ee.providesTags,L.data,void 0,D,{},o);F(a.internalActions.updateProvidedBy({queryCacheKey:ae,providedTags:$}))};function f(P,D,z=0){const U=[D,...P];return z&&U.length>z?U.slice(0,-1):U}function d(P,D,z=0){const U=[...P,D];return z&&U.length>z?U.slice(1):U}const g=(P,D,z,U=!0)=>(F,Q)=>{const ae=a.endpoints[P].select(D)(Q()),L={patches:[],inversePatches:[],undo:()=>F(a.util.patchQueryData(P,D,L.inversePatches,U))};if(ae.status==="uninitialized")return L;let $;if("data"in ae)if(Dn(ae.data)){const[Z,re,j]=tx(ae.data,z);L.patches.push(...re),L.inversePatches.push(...j),$=Z}else $=z(ae.data),L.patches.push({op:"replace",path:[],value:$}),L.inversePatches.push({op:"replace",path:[],value:ae.data});return L.patches.length===0||F(a.util.patchQueryData(P,D,L.patches,U)),L},m=(P,D,z)=>U=>U(a.endpoints[P].initiate(D,{subscribe:!1,forceRefetch:!0,[el]:()=>({data:z})})),b=(P,D)=>P.query&&P[D]?P[D]:Sk,v=async(P,{signal:D,abort:z,rejectWithValue:U,fulfillWithValue:F,dispatch:Q,getState:ee,extra:ae})=>{const L=t[P.endpointName];try{let $=b(L,"transformResponse");const Z={signal:D,abort:z,dispatch:Q,getState:ee,extra:ae,endpoint:P.endpointName,type:P.type,forced:P.type==="query"?w(P,ee()):void 0,queryCacheKey:P.type==="query"?P.queryCacheKey:void 0},re=P.type==="query"?P[el]:void 0;let j;const Y=async(te,J,le,oe)=>{if(J==null&&te.pages.length)return Promise.resolve({data:te});const ze={queryArg:P.originalArgs,pageParam:J},xe=await ne(ze),Pe=oe?f:d;return{data:{pages:Pe(te.pages,xe.data,le),pageParams:Pe(te.pageParams,J,le)}}};async function ne(te){let J;const{extraOptions:le}=L;if(re?J=re():L.query?J=await e(L.query(te),Z,le):J=await L.queryFn(te,Z,le,ze=>e(ze,Z,le)),typeof process<"u",J.error)throw new Vv(J.error,J.meta);const oe=await $(J.data,J.meta,te);return{...J,data:oe}}if(P.type==="query"&&"infiniteQueryOptions"in L){const{infiniteQueryOptions:te}=L,{maxPages:J=1/0}=te;let le;const oe={pages:[],pageParams:[]},ze=u.selectQueryEntry(ee(),P.queryCacheKey)?.data,Pe=w(P,ee())&&!P.direction||!ze?oe:ze;if("direction"in P&&P.direction&&Pe.pages.length){const Re=P.direction==="backward",vt=(Re?Ox:Rp)(te,Pe);le=await Y(Pe,vt,J,Re)}else{const{initialPageParam:Re=te.initialPageParam}=P,ut=ze?.pageParams??[],vt=ut[0]??Re,ct=ut.length;le=await Y(Pe,vt,J),re&&(le={data:le.data.pages[0]});for(let jt=1;jt<ct;jt++){const qt=Rp(te,le.data);le=await Y(le.data,qt,J)}}j=le}else j=await ne(P.originalArgs);return F(j.data,Gu({fulfilledTimeStamp:Date.now(),baseQueryMeta:j.meta}))}catch($){let Z=$;if(Z instanceof Vv){let re=b(L,"transformErrorResponse");try{return U(await re(Z.value,Z.meta,P.originalArgs),Gu({baseQueryMeta:Z.meta}))}catch(j){Z=j}}throw console.error(Z),Z}};function w(P,D){const z=u.selectQueryEntry(D,P.queryCacheKey),U=u.selectConfig(D).refetchOnMountOrArgChange,F=z?.fulfilledTimeStamp,Q=P.forceRefetch??(P.subscribe&&U);return Q?Q===!0||(Number(new Date)-Number(F))/1e3>=Q:!1}const S=()=>gv(`${n}/executeQuery`,v,{getPendingMeta({arg:D}){const z=t[D.endpointName];return Gu({startedTimeStamp:Date.now(),...Ig(z)?{direction:D.direction}:{}})},condition(D,{getState:z}){const U=z(),F=u.selectQueryEntry(U,D.queryCacheKey),Q=F?.fulfilledTimeStamp,ee=D.originalArgs,ae=F?.originalArgs,L=t[D.endpointName],$=D.direction;return Cp(D)?!0:F?.status==="pending"?!1:w(D,U)||Lg(L)&&L?.forceRefetch?.({currentArg:ee,previousArg:ae,endpointState:F,state:U})?!0:!(Q&&!$)},dispatchConditionRejection:!0}),_=S(),E=S(),M=gv(`${n}/executeMutation`,v,{getPendingMeta(){return Gu({startedTimeStamp:Date.now()})}}),A=P=>"force"in P,T=P=>"ifOlderThan"in P,R=(P,D,z)=>(U,F)=>{const Q=A(z)&&z.force,ee=T(z)&&z.ifOlderThan,ae=($=!0)=>{const Z={forceRefetch:$,isPrefetch:!0};return a.endpoints[P].initiate(D,Z)},L=a.endpoints[P].select(D)(F());if(Q)U(ae());else if(ee){const $=L?.fulfilledTimeStamp;if(!$){U(ae());return}(Number(new Date)-Number(new Date($)))/1e3>=ee&&U(ae())}else U(ae(!1))};function O(P){return D=>D?.meta?.arg?.endpointName===P}function C(P,D){return{matchPending:Io(_g(P),O(D)),matchFulfilled:Io(ts(P),O(D)),matchRejected:Io(ta(P),O(D))}}return{queryThunk:_,mutationThunk:M,infiniteQueryThunk:E,prefetch:R,updateQueryData:g,upsertQueryData:m,patchQueryData:h,buildMatchThunkActions:C}}function Rp(n,{pages:e,pageParams:t}){const s=e.length-1;return n.getNextPageParam(e[s],e,t[s],t)}function Ox(n,{pages:e,pageParams:t}){return n.getPreviousPageParam?.(e[0],e,t[0],t)}function Px(n,e,t,s){return Ng(t[n.meta.arg.endpointName][e],ts(n)?n.payload:void 0,Hc(n)?n.payload:void 0,n.meta.arg.originalArgs,"baseQueryMeta"in n.meta?n.meta.baseQueryMeta:void 0,s)}function Hu(n,e,t){const s=n[e];s&&t(s)}function tl(n){return("arg"in n?n.arg.fixedCacheKey:n.fixedCacheKey)??n.requestId}function Yv(n,e,t){const s=n[tl(e)];s&&t(s)}var go={};function Ek({reducerPath:n,queryThunk:e,mutationThunk:t,serializeQueryArgs:s,context:{endpointDefinitions:a,apiUid:o,extractRehydrationInfo:u,hasRehydrationInfo:h},assertTagType:f,config:d}){const g=Nt(`${n}/resetApiState`);function m(C,P,D,z){C[P.queryCacheKey]??={status:"uninitialized",endpointName:P.endpointName},Hu(C,P.queryCacheKey,U=>{U.status="pending",U.requestId=D&&U.requestId?U.requestId:z.requestId,P.originalArgs!==void 0&&(U.originalArgs=P.originalArgs),U.startedTimeStamp=z.startedTimeStamp;const F=a[z.arg.endpointName];Ig(F)&&"direction"in P&&(U.direction=P.direction)})}function b(C,P,D,z){Hu(C,P.arg.queryCacheKey,U=>{if(U.requestId!==P.requestId&&!z)return;const{merge:F}=a[P.arg.endpointName];if(U.status="fulfilled",F)if(U.data!==void 0){const{fulfilledTimeStamp:Q,arg:ee,baseQueryMeta:ae,requestId:L}=P;let $=dl(U.data,Z=>F(Z,D,{arg:ee.originalArgs,baseQueryMeta:ae,fulfilledTimeStamp:Q,requestId:L}));U.data=$}else U.data=D;else U.data=a[P.arg.endpointName].structuralSharing??!0?kx(Vn(U.data)?UT(U.data):U.data,D):D;delete U.error,U.fulfilledTimeStamp=P.fulfilledTimeStamp})}const v=mi({name:`${n}/queries`,initialState:go,reducers:{removeQueryResult:{reducer(C,{payload:{queryCacheKey:P}}){delete C[P]},prepare:co()},cacheEntriesUpserted:{reducer(C,P){for(const D of P.payload){const{queryDescription:z,value:U}=D;m(C,z,!0,{arg:z,requestId:P.meta.requestId,startedTimeStamp:P.meta.timestamp}),b(C,{arg:z,requestId:P.meta.requestId,fulfilledTimeStamp:P.meta.timestamp,baseQueryMeta:{}},U,!0)}},prepare:C=>({payload:C.map(z=>{const{endpointName:U,arg:F,value:Q}=z,ee=a[U];return{queryDescription:{type:"query",endpointName:U,originalArgs:z.arg,queryCacheKey:s({queryArgs:F,endpointDefinition:ee,endpointName:U})},value:Q}}),meta:{[qc]:!0,requestId:gl(),timestamp:Date.now()}})},queryResultPatched:{reducer(C,{payload:{queryCacheKey:P,patches:D}}){Hu(C,P,z=>{z.data=lv(z.data,D.concat())})},prepare:co()}},extraReducers(C){C.addCase(e.pending,(P,{meta:D,meta:{arg:z}})=>{const U=Cp(z);m(P,z,U,D)}).addCase(e.fulfilled,(P,{meta:D,payload:z})=>{const U=Cp(D.arg);b(P,D,z,U)}).addCase(e.rejected,(P,{meta:{condition:D,arg:z,requestId:U},error:F,payload:Q})=>{Hu(P,z.queryCacheKey,ee=>{if(!D){if(ee.requestId!==U)return;ee.status="rejected",ee.error=Q??F}})}).addMatcher(h,(P,D)=>{const{queries:z}=u(D);for(const[U,F]of Object.entries(z))(F?.status==="fulfilled"||F?.status==="rejected")&&(P[U]=F)})}}),w=mi({name:`${n}/mutations`,initialState:go,reducers:{removeMutationResult:{reducer(C,{payload:P}){const D=tl(P);D in C&&delete C[D]},prepare:co()}},extraReducers(C){C.addCase(t.pending,(P,{meta:D,meta:{requestId:z,arg:U,startedTimeStamp:F}})=>{U.track&&(P[tl(D)]={requestId:z,status:"pending",endpointName:U.endpointName,startedTimeStamp:F})}).addCase(t.fulfilled,(P,{payload:D,meta:z})=>{z.arg.track&&Yv(P,z,U=>{U.requestId===z.requestId&&(U.status="fulfilled",U.data=D,U.fulfilledTimeStamp=z.fulfilledTimeStamp)})}).addCase(t.rejected,(P,{payload:D,error:z,meta:U})=>{U.arg.track&&Yv(P,U,F=>{F.requestId===U.requestId&&(F.status="rejected",F.error=D??z)})}).addMatcher(h,(P,D)=>{const{mutations:z}=u(D);for(const[U,F]of Object.entries(z))(F?.status==="fulfilled"||F?.status==="rejected")&&U!==F?.requestId&&(P[U]=F)})}}),S=mi({name:`${n}/invalidation`,initialState:go,reducers:{updateProvidedBy:{reducer(C,P){const{queryCacheKey:D,providedTags:z}=P.payload;for(const U of Object.values(C))for(const F of Object.values(U)){const Q=F.indexOf(D);Q!==-1&&F.splice(Q,1)}for(const{type:U,id:F}of z){const Q=(C[U]??={})[F||"__internal_without_id"]??=[];Q.includes(D)||Q.push(D)}},prepare:co()}},extraReducers(C){C.addCase(v.actions.removeQueryResult,(P,{payload:{queryCacheKey:D}})=>{for(const z of Object.values(P))for(const U of Object.values(z)){const F=U.indexOf(D);F!==-1&&U.splice(F,1)}}).addMatcher(h,(P,D)=>{const{provided:z}=u(D);for(const[U,F]of Object.entries(z))for(const[Q,ee]of Object.entries(F)){const ae=(P[U]??={})[Q||"__internal_without_id"]??=[];for(const L of ee)ae.includes(L)||ae.push(L)}}).addMatcher(xi(ts(e),Hc(e)),(P,D)=>{_(P,D)}).addMatcher(v.actions.cacheEntriesUpserted.match,(P,D)=>{for(const{queryDescription:z,value:U}of D.payload)_(P,{type:"UNKNOWN",payload:U,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:z}})})}});function _(C,P){const D=Px(P,"providesTags",a,f),{queryCacheKey:z}=P.meta.arg;S.caseReducers.updateProvidedBy(C,S.actions.updateProvidedBy({queryCacheKey:z,providedTags:D}))}const E=mi({name:`${n}/subscriptions`,initialState:go,reducers:{updateSubscriptionOptions(C,P){},unsubscribeQueryResult(C,P){},internal_getRTKQSubscriptions(){}}}),M=mi({name:`${n}/internalSubscriptions`,initialState:go,reducers:{subscriptionsUpdated:{reducer(C,P){return lv(C,P.payload)},prepare:co()}}}),A=mi({name:`${n}/config`,initialState:{online:mk(),focused:yk(),middlewareRegistered:!1,...d},reducers:{middlewareRegistered(C,{payload:P}){C.middlewareRegistered=C.middlewareRegistered==="conflict"||o!==P?"conflict":!0}},extraReducers:C=>{C.addCase(Ug,P=>{P.online=!0}).addCase(Rx,P=>{P.online=!1}).addCase(jg,P=>{P.focused=!0}).addCase(Cx,P=>{P.focused=!1}).addMatcher(h,P=>({...P}))}}),T=pg({queries:v.reducer,mutations:w.reducer,provided:S.reducer,subscriptions:M.reducer,config:A.reducer}),R=(C,P)=>T(g.match(P)?void 0:C,P),O={...A.actions,...v.actions,...E.actions,...M.actions,...w.actions,...S.actions,resetApiState:g};return{reducer:R,actions:O}}var bi=Symbol.for("RTKQ/skipToken"),Dx={status:"uninitialized"},Xv=dl(Dx,()=>{}),Wv=dl(Dx,()=>{});function Tk({serializeQueryArgs:n,reducerPath:e,createSelector:t}){const s=A=>Xv,a=A=>Wv;return{buildQuerySelector:b,buildInfiniteQuerySelector:v,buildMutationSelector:w,selectInvalidatedBy:S,selectCachedArgsForQuery:_,selectApiState:u,selectQueries:h,selectMutations:d,selectQueryEntry:f,selectConfig:g};function o(A){return{...A,...Hv(A.status)}}function u(A){return A[e]}function h(A){return u(A)?.queries}function f(A,T){return h(A)?.[T]}function d(A){return u(A)?.mutations}function g(A){return u(A)?.config}function m(A,T,R){return O=>{if(O===bi)return t(s,R);const C=n({queryArgs:O,endpointDefinition:T,endpointName:A});return t(D=>f(D,C)??Xv,R)}}function b(A,T){return m(A,T,o)}function v(A,T){const{infiniteQueryOptions:R}=T;function O(C){const P={...C,...Hv(C.status)},{isLoading:D,isError:z,direction:U}=P,F=U==="forward",Q=U==="backward";return{...P,hasNextPage:E(R,P.data),hasPreviousPage:M(R,P.data),isFetchingNextPage:D&&F,isFetchingPreviousPage:D&&Q,isFetchNextPageError:z&&F,isFetchPreviousPageError:z&&Q}}return m(A,T,O)}function w(){return A=>{let T;return typeof A=="object"?T=tl(A)??bi:T=A,t(T===bi?a:C=>u(C)?.mutations?.[T]??Wv,o)}}function S(A,T){const R=A[e],O=new Set;for(const C of T.filter(kc).map(kp)){const P=R.provided[C.type];if(!P)continue;let D=(C.id!==void 0?P[C.id]:Fv(Object.values(P)))??[];for(const z of D)O.add(z)}return Fv(Array.from(O.values()).map(C=>{const P=R.queries[C];return P?[{queryCacheKey:C,endpointName:P.endpointName,originalArgs:P.originalArgs}]:[]}))}function _(A,T){return Object.values(h(A)).filter(R=>R?.endpointName===T&&R.status!=="uninitialized").map(R=>R.originalArgs)}function E(A,T){return T?Rp(A,T)!=null:!1}function M(A,T){return!T||!A.getPreviousPageParam?!1:Ox(A,T)!=null}}var Qv=WeakMap?new WeakMap:void 0,Op=({endpointName:n,queryArgs:e})=>{let t="";const s=Qv?.get(e);if(typeof s=="string")t=s;else{const a=JSON.stringify(e,(o,u)=>(u=typeof u=="bigint"?{$bigint:u.toString()}:u,u=ea(u)?Object.keys(u).sort().reduce((h,f)=>(h[f]=u[f],h),{}):u,u));ea(e)&&Qv?.set(e,a),t=a}return`${n}(${t})`};function Bx(...n){return function(t){const s=Sc(d=>t.extractRehydrationInfo?.(d,{reducerPath:t.reducerPath??"api"})),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:s,serializeQueryArgs(d){let g=Op;if("serializeQueryArgs"in d.endpointDefinition){const m=d.endpointDefinition.serializeQueryArgs;g=b=>{const v=m(b);return typeof v=="string"?v:Op({...b,queryArgs:v})}}else t.serializeQueryArgs&&(g=t.serializeQueryArgs);return g(d)},tagTypes:[...t.tagTypes||[]]},o={endpointDefinitions:{},batch(d){d()},apiUid:gl(),extractRehydrationInfo:s,hasRehydrationInfo:Sc(d=>s(d)!=null)},u={injectEndpoints:f,enhanceEndpoints({addTagTypes:d,endpoints:g}){if(d)for(const m of d)a.tagTypes.includes(m)||a.tagTypes.push(m);if(g)for(const[m,b]of Object.entries(g))typeof b=="function"?b(o.endpointDefinitions[m]):Object.assign(o.endpointDefinitions[m]||{},b);return u}},h=n.map(d=>d.init(u,a,o));function f(d){const g=d.endpoints({query:m=>({...m,type:"query"}),mutation:m=>({...m,type:"mutation"}),infiniteQuery:m=>({...m,type:"infinitequery"})});for(const[m,b]of Object.entries(g)){if(d.overrideExisting!==!0&&m in o.endpointDefinitions){if(d.overrideExisting==="throw")throw new Error(bt(39));continue}o.endpointDefinitions[m]=b;for(const v of h)v.injectEndpoint(m,b)}return u}return u.injectEndpoints({endpoints:t.endpoints})}}function Mk(){return function(){throw new Error(bt(33))}}function di(n,...e){return Object.assign(n,...e)}var kk=({api:n,queryThunk:e,internalState:t})=>{const s=`${n.reducerPath}/subscriptions`;let a=null,o=null;const{updateSubscriptionOptions:u,unsubscribeQueryResult:h}=n.internalActions,f=(v,w)=>{if(u.match(w)){const{queryCacheKey:_,requestId:E,options:M}=w.payload;return v?.[_]?.[E]&&(v[_][E]=M),!0}if(h.match(w)){const{queryCacheKey:_,requestId:E}=w.payload;return v[_]&&delete v[_][E],!0}if(n.internalActions.removeQueryResult.match(w))return delete v[w.payload.queryCacheKey],!0;if(e.pending.match(w)){const{meta:{arg:_,requestId:E}}=w,M=v[_.queryCacheKey]??={};return M[`${E}_running`]={},_.subscribe&&(M[E]=_.subscriptionOptions??M[E]??{}),!0}let S=!1;if(e.fulfilled.match(w)||e.rejected.match(w)){const _=v[w.meta.arg.queryCacheKey]||{},E=`${w.meta.requestId}_running`;S||=!!_[E],delete _[E]}if(e.rejected.match(w)){const{meta:{condition:_,arg:E,requestId:M}}=w;if(_&&E.subscribe){const A=v[E.queryCacheKey]??={};A[M]=E.subscriptionOptions??A[M]??{},S=!0}}return S},d=()=>t.currentSubscriptions,b={getSubscriptions:d,getSubscriptionCount:v=>{const S=d()[v]??{};return Kr(S)},isRequestSubscribed:(v,w)=>!!d()?.[v]?.[w]};return(v,w)=>{if(a||(a=JSON.parse(JSON.stringify(t.currentSubscriptions))),n.util.resetApiState.match(v))return a=t.currentSubscriptions={},o=null,[!0,!1];if(n.internalActions.internal_getRTKQSubscriptions.match(v))return[!1,b];const S=f(t.currentSubscriptions,v);let _=!0;if(S){o||(o=setTimeout(()=>{const A=JSON.parse(JSON.stringify(t.currentSubscriptions)),[,T]=tx(a,()=>A);w.next(n.internalActions.subscriptionsUpdated(T)),a=A,o=null},500));const E=typeof v.type=="string"&&!!v.type.startsWith(s),M=e.rejected.match(v)&&v.meta.condition&&!!v.meta.arg.subscribe;_=!E&&!M}return[_,!1]}};function Ck(n){for(const e in n)return!1;return!0}var Rk=2147483647/1e3-1,Ok=({reducerPath:n,api:e,queryThunk:t,context:s,internalState:a,selectors:{selectQueryEntry:o,selectConfig:u}})=>{const{removeQueryResult:h,unsubscribeQueryResult:f,cacheEntriesUpserted:d}=e.internalActions,g=xi(f.match,t.fulfilled,t.rejected,d.match);function m(_){const E=a.currentSubscriptions[_];return!!E&&!Ck(E)}const b={},v=(_,E,M)=>{const A=E.getState(),T=u(A);if(g(_)){let R;if(d.match(_))R=_.payload.map(O=>O.queryDescription.queryCacheKey);else{const{queryCacheKey:O}=f.match(_)?_.payload:_.meta.arg;R=[O]}w(R,E,T)}if(e.util.resetApiState.match(_))for(const[R,O]of Object.entries(b))O&&clearTimeout(O),delete b[R];if(s.hasRehydrationInfo(_)){const{queries:R}=s.extractRehydrationInfo(_);w(Object.keys(R),E,T)}};function w(_,E,M){const A=E.getState();for(const T of _){const R=o(A,T);S(T,R?.endpointName,E,M)}}function S(_,E,M,A){const R=s.endpointDefinitions[E]?.keepUnusedDataFor??A.keepUnusedDataFor;if(R===1/0)return;const O=Math.max(0,Math.min(R,Rk));if(!m(_)){const C=b[_];C&&clearTimeout(C),b[_]=setTimeout(()=>{m(_)||M.dispatch(h({queryCacheKey:_})),delete b[_]},O*1e3)}}return v},Kv=new Error("Promise never resolved before cacheEntryRemoved."),Pk=({api:n,reducerPath:e,context:t,queryThunk:s,mutationThunk:a,internalState:o,selectors:{selectQueryEntry:u,selectApiState:h}})=>{const f=Sp(s),d=Sp(a),g=ts(s,a),m={};function b(E,M,A){const T=m[E];T?.valueResolved&&(T.valueResolved({data:M,meta:A}),delete T.valueResolved)}function v(E){const M=m[E];M&&(delete m[E],M.cacheEntryRemoved())}const w=(E,M,A)=>{const T=S(E);function R(O,C,P,D){const z=u(A,C),U=u(M.getState(),C);!z&&U&&_(O,D,C,M,P)}if(s.pending.match(E))R(E.meta.arg.endpointName,T,E.meta.requestId,E.meta.arg.originalArgs);else if(n.internalActions.cacheEntriesUpserted.match(E))for(const{queryDescription:O,value:C}of E.payload){const{endpointName:P,originalArgs:D,queryCacheKey:z}=O;R(P,z,E.meta.requestId,D),b(z,C,{})}else if(a.pending.match(E))M.getState()[e].mutations[T]&&_(E.meta.arg.endpointName,E.meta.arg.originalArgs,T,M,E.meta.requestId);else if(g(E))b(T,E.payload,E.meta.baseQueryMeta);else if(n.internalActions.removeQueryResult.match(E)||n.internalActions.removeMutationResult.match(E))v(T);else if(n.util.resetApiState.match(E))for(const O of Object.keys(m))v(O)};function S(E){return f(E)?E.meta.arg.queryCacheKey:d(E)?E.meta.arg.fixedCacheKey??E.meta.requestId:n.internalActions.removeQueryResult.match(E)?E.payload.queryCacheKey:n.internalActions.removeMutationResult.match(E)?tl(E.payload):""}function _(E,M,A,T,R){const O=t.endpointDefinitions[E],C=O?.onCacheEntryAdded;if(!C)return;const P={},D=new Promise(ae=>{P.cacheEntryRemoved=ae}),z=Promise.race([new Promise(ae=>{P.valueResolved=ae}),D.then(()=>{throw Kv})]);z.catch(()=>{}),m[A]=P;const U=n.endpoints[E].select(O.type==="query"?M:A),F=T.dispatch((ae,L,$)=>$),Q={...T,getCacheEntry:()=>U(T.getState()),requestId:R,extra:F,updateCachedData:O.type==="query"?ae=>T.dispatch(n.util.updateQueryData(E,M,ae)):void 0,cacheDataLoaded:z,cacheEntryRemoved:D},ee=C(M,Q);Promise.resolve(ee).catch(ae=>{if(ae!==Kv)throw ae})}return w},Dk=({api:n,context:{apiUid:e},reducerPath:t})=>(s,a)=>{n.util.resetApiState.match(s)&&a.dispatch(n.internalActions.middlewareRegistered(e))},Bk=({reducerPath:n,context:e,context:{endpointDefinitions:t},mutationThunk:s,queryThunk:a,api:o,assertTagType:u,refetchQuery:h,internalState:f})=>{const{removeQueryResult:d}=o.internalActions,g=xi(ts(s),Hc(s)),m=xi(ts(s,a),ta(s,a));let b=[];const v=(_,E)=>{g(_)?S(Px(_,"invalidatesTags",t,u),E):m(_)?S([],E):o.util.invalidateTags.match(_)&&S(Ng(_.payload,void 0,void 0,void 0,void 0,u),E)};function w(_){const{queries:E,mutations:M}=_;for(const A of[E,M])for(const T in A)if(A[T]?.status==="pending")return!0;return!1}function S(_,E){const M=E.getState(),A=M[n];if(b.push(..._),A.config.invalidationBehavior==="delayed"&&w(A))return;const T=b;if(b=[],T.length===0)return;const R=o.util.selectInvalidatedBy(M,T);e.batch(()=>{const O=Array.from(R.values());for(const{queryCacheKey:C}of O){const P=A.queries[C],D=f.currentSubscriptions[C]??{};P&&(Kr(D)===0?E.dispatch(d({queryCacheKey:C})):P.status!=="uninitialized"&&E.dispatch(h(P)))}})}return v},zk=({reducerPath:n,queryThunk:e,api:t,refetchQuery:s,internalState:a})=>{const o={},u=(b,v)=>{(t.internalActions.updateSubscriptionOptions.match(b)||t.internalActions.unsubscribeQueryResult.match(b))&&f(b.payload,v),(e.pending.match(b)||e.rejected.match(b)&&b.meta.condition)&&f(b.meta.arg,v),(e.fulfilled.match(b)||e.rejected.match(b)&&!b.meta.condition)&&h(b.meta.arg,v),t.util.resetApiState.match(b)&&g()};function h({queryCacheKey:b},v){const w=v.getState()[n],S=w.queries[b],_=a.currentSubscriptions[b];if(!S||S.status==="uninitialized")return;const{lowestPollingInterval:E,skipPollingIfUnfocused:M}=m(_);if(!Number.isFinite(E))return;const A=o[b];A?.timeout&&(clearTimeout(A.timeout),A.timeout=void 0);const T=Date.now()+E;o[b]={nextPollTimestamp:T,pollingInterval:E,timeout:setTimeout(()=>{(w.config.focused||!M)&&v.dispatch(s(S)),h({queryCacheKey:b},v)},E)}}function f({queryCacheKey:b},v){const S=v.getState()[n].queries[b],_=a.currentSubscriptions[b];if(!S||S.status==="uninitialized")return;const{lowestPollingInterval:E}=m(_);if(!Number.isFinite(E)){d(b);return}const M=o[b],A=Date.now()+E;(!M||A<M.nextPollTimestamp)&&h({queryCacheKey:b},v)}function d(b){const v=o[b];v?.timeout&&clearTimeout(v.timeout),delete o[b]}function g(){for(const b of Object.keys(o))d(b)}function m(b={}){let v=!1,w=Number.POSITIVE_INFINITY;for(let S in b)b[S].pollingInterval&&(w=Math.min(b[S].pollingInterval,w),v=b[S].skipPollingIfUnfocused||v);return{lowestPollingInterval:w,skipPollingIfUnfocused:v}}return u},jk=({api:n,context:e,queryThunk:t,mutationThunk:s})=>{const a=_g(t,s),o=ta(t,s),u=ts(t,s),h={};return(d,g)=>{if(a(d)){const{requestId:m,arg:{endpointName:b,originalArgs:v}}=d.meta,w=e.endpointDefinitions[b],S=w?.onQueryStarted;if(S){const _={},E=new Promise((R,O)=>{_.resolve=R,_.reject=O});E.catch(()=>{}),h[m]=_;const M=n.endpoints[b].select(w.type==="query"?v:m),A=g.dispatch((R,O,C)=>C),T={...g,getCacheEntry:()=>M(g.getState()),requestId:m,extra:A,updateCachedData:w.type==="query"?R=>g.dispatch(n.util.updateQueryData(b,v,R)):void 0,queryFulfilled:E};S(v,T)}}else if(u(d)){const{requestId:m,baseQueryMeta:b}=d.meta;h[m]?.resolve({data:d.payload,meta:b}),delete h[m]}else if(o(d)){const{requestId:m,rejectedWithValue:b,baseQueryMeta:v}=d.meta;h[m]?.reject({error:d.payload??d.error,isUnhandledError:!b,meta:v}),delete h[m]}}},Uk=({reducerPath:n,context:e,api:t,refetchQuery:s,internalState:a})=>{const{removeQueryResult:o}=t.internalActions,u=(f,d)=>{jg.match(f)&&h(d,"refetchOnFocus"),Ug.match(f)&&h(d,"refetchOnReconnect")};function h(f,d){const g=f.getState()[n],m=g.queries,b=a.currentSubscriptions;e.batch(()=>{for(const v of Object.keys(b)){const w=m[v],S=b[v];if(!S||!w)continue;(Object.values(S).some(E=>E[d]===!0)||Object.values(S).every(E=>E[d]===void 0)&&g.config[d])&&(Kr(S)===0?f.dispatch(o({queryCacheKey:v})):w.status!=="uninitialized"&&f.dispatch(s(w)))}})}return u};function Lk(n){const{reducerPath:e,queryThunk:t,api:s,context:a}=n,{apiUid:o}=a,u={invalidateTags:Nt(`${e}/invalidateTags`)},h=m=>m.type.startsWith(`${e}/`),f=[Dk,Ok,Bk,zk,Pk,jk];return{middleware:m=>{let b=!1;const w={...n,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:h},S=f.map(M=>M(w)),_=kk(w),E=Uk(w);return M=>A=>{if(!gg(A))return M(A);b||(b=!0,m.dispatch(s.internalActions.middlewareRegistered(o)));const T={...m,next:M},R=m.getState(),[O,C]=_(A,T,R);let P;if(O?P=M(A):P=C,m.getState()[e]&&(E(A,T,R),h(A)||a.hasRehydrationInfo(A)))for(const D of S)D(A,T,R);return P}},actions:u};function g(m){return n.api.endpoints[m.endpointName].initiate(m.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Zv=Symbol(),zx=({createSelector:n=vg}={})=>({name:Zv,init(e,{baseQuery:t,tagTypes:s,reducerPath:a,serializeQueryArgs:o,keepUnusedDataFor:u,refetchOnMountOrArgChange:h,refetchOnFocus:f,refetchOnReconnect:d,invalidationBehavior:g},m){YT();const b=ne=>ne;Object.assign(e,{reducerPath:a,endpoints:{},internalActions:{onOnline:Ug,onOffline:Rx,onFocus:jg,onFocusLost:Cx},util:{}});const v=Tk({serializeQueryArgs:o,reducerPath:a,createSelector:n}),{selectInvalidatedBy:w,selectCachedArgsForQuery:S,buildQuerySelector:_,buildInfiniteQuerySelector:E,buildMutationSelector:M}=v;di(e.util,{selectInvalidatedBy:w,selectCachedArgsForQuery:S});const{queryThunk:A,infiniteQueryThunk:T,mutationThunk:R,patchQueryData:O,updateQueryData:C,upsertQueryData:P,prefetch:D,buildMatchThunkActions:z}=Ak({baseQuery:t,reducerPath:a,context:m,api:e,serializeQueryArgs:o,assertTagType:b,selectors:v}),{reducer:U,actions:F}=Ek({context:m,queryThunk:A,mutationThunk:R,serializeQueryArgs:o,reducerPath:a,assertTagType:b,config:{refetchOnFocus:f,refetchOnReconnect:d,refetchOnMountOrArgChange:h,keepUnusedDataFor:u,reducerPath:a,invalidationBehavior:g}});di(e.util,{patchQueryData:O,updateQueryData:C,upsertQueryData:P,prefetch:D,resetApiState:F.resetApiState,upsertQueryEntries:F.cacheEntriesUpserted}),di(e.internalActions,F);const{middleware:Q,actions:ee}=Lk({reducerPath:a,context:m,queryThunk:A,mutationThunk:R,infiniteQueryThunk:T,api:e,assertTagType:b,selectors:v});di(e.util,ee),di(e,{reducer:U,middleware:Q});const{buildInitiateQuery:ae,buildInitiateInfiniteQuery:L,buildInitiateMutation:$,getRunningMutationThunk:Z,getRunningMutationsThunk:re,getRunningQueriesThunk:j,getRunningQueryThunk:Y}=xk({queryThunk:A,mutationThunk:R,infiniteQueryThunk:T,api:e,serializeQueryArgs:o,context:m});return di(e.util,{getRunningMutationThunk:Z,getRunningMutationsThunk:re,getRunningQueryThunk:Y,getRunningQueriesThunk:j}),{name:Zv,injectEndpoint(ne,te){const J=e,le=J.endpoints[ne]??={};Lg(te)&&di(le,{name:ne,select:_(ne,te),initiate:ae(ne,te)},z(A,ne)),vk(te)&&di(le,{name:ne,select:M(),initiate:$(ne)},z(R,ne)),Ig(te)&&di(le,{name:ne,select:E(ne,te),initiate:L(ne,te)},z(A,ne))}}}});zx();function $u(n){return n.replace(n[0],n[0].toUpperCase())}function Ik(n){return n.type==="query"}function Nk(n){return n.type==="mutation"}function jx(n){return n.type==="infinitequery"}function yo(n,...e){return Object.assign(n,...e)}var Od=Symbol();function Jv(n,e,t,s){const a=ce.useMemo(()=>({queryArgs:n,serialized:typeof n=="object"?e({queryArgs:n,endpointDefinition:t,endpointName:s}):n}),[n,e,t,s]),o=ce.useRef(a);return ce.useEffect(()=>{o.current.serialized!==a.serialized&&(o.current=a)},[a]),o.current.serialized===a.serialized?o.current.queryArgs:n}function Fu(n){const e=ce.useRef(n);return ce.useEffect(()=>{Uo(e.current,n)||(e.current=n)},[n]),Uo(e.current,n)?e.current:n}var qk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gk=qk(),Hk=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$k=Hk(),Fk=()=>Gk||$k?ce.useLayoutEffect:ce.useEffect,Vk=Fk(),e_=n=>n.isUninitialized?{...n,isUninitialized:!1,isFetching:!0,isLoading:n.data===void 0,status:Mx.pending}:n;function Pd(n,...e){const t={};return e.forEach(s=>{t[s]=n[s]}),t}var Dd=["data","status","isLoading","isSuccess","isError","error"];function Yk({api:n,moduleOptions:{batch:e,hooks:{useDispatch:t,useSelector:s,useStore:a},unstable__sideEffectsInRender:o,createSelector:u},serializeQueryArgs:h,context:f}){const d=o?T=>T():ce.useEffect;return{buildQueryHooks:E,buildInfiniteQueryHooks:M,buildMutationHook:A,usePrefetch:b};function g(T,R,O){if(R?.endpointName&&T.isUninitialized){const{endpointName:F}=R,Q=f.endpointDefinitions[F];O!==bi&&h({queryArgs:R.originalArgs,endpointDefinition:Q,endpointName:F})===h({queryArgs:O,endpointDefinition:Q,endpointName:F})&&(R=void 0)}let C=T.isSuccess?T.data:R?.data;C===void 0&&(C=T.data);const P=C!==void 0,D=T.isLoading,z=(!R||R.isLoading||R.isUninitialized)&&!P&&D,U=T.isSuccess||P&&(D&&!R?.isError||T.isUninitialized);return{...T,data:C,currentData:T.data,isFetching:D,isLoading:z,isSuccess:U}}function m(T,R,O){if(R?.endpointName&&T.isUninitialized){const{endpointName:F}=R,Q=f.endpointDefinitions[F];h({queryArgs:R.originalArgs,endpointDefinition:Q,endpointName:F})===h({queryArgs:O,endpointDefinition:Q,endpointName:F})&&(R=void 0)}let C=T.isSuccess?T.data:R?.data;C===void 0&&(C=T.data);const P=C!==void 0,D=T.isLoading,z=(!R||R.isLoading||R.isUninitialized)&&!P&&D,U=T.isSuccess||D&&P;return{...T,data:C,currentData:T.data,isFetching:D,isLoading:z,isSuccess:U}}function b(T,R){const O=t(),C=Fu(R);return ce.useCallback((P,D)=>O(n.util.prefetch(T,P,{...C,...D})),[T,O,C])}function v(T,R,{refetchOnReconnect:O,refetchOnFocus:C,refetchOnMountOrArgChange:P,skip:D=!1,pollingInterval:z=0,skipPollingIfUnfocused:U=!1,...F}={}){const{initiate:Q}=n.endpoints[T],ee=t(),ae=ce.useRef(void 0);if(!ae.current){const oe=ee(n.internalActions.internal_getRTKQSubscriptions());ae.current=oe}const L=Jv(D?bi:R,Op,f.endpointDefinitions[T],T),$=Fu({refetchOnReconnect:O,refetchOnFocus:C,pollingInterval:z,skipPollingIfUnfocused:U}),Z=ce.useRef(!1),re=F.initialPageParam,j=Fu(re),Y=ce.useRef(void 0);let{queryCacheKey:ne,requestId:te}=Y.current||{},J=!1;ne&&te&&(J=ae.current.isRequestSubscribed(ne,te));const le=!J&&Z.current;return d(()=>{Z.current=J}),d(()=>{le&&(Y.current=void 0)},[le]),d(()=>{const oe=Y.current;if(L===bi){oe?.unsubscribe(),Y.current=void 0;return}const ze=Y.current?.subscriptionOptions;if(!oe||oe.arg!==L){oe?.unsubscribe();const xe=ee(Q(L,{subscriptionOptions:$,forceRefetch:P,...jx(f.endpointDefinitions[T])?{initialPageParam:j}:{}}));Y.current=xe}else $!==ze&&oe.updateSubscriptionOptions($)},[ee,Q,P,L,$,le,j,T]),[Y,ee,Q,$]}function w(T,R){return(C,{skip:P=!1,selectFromResult:D}={})=>{const{select:z}=n.endpoints[T],U=Jv(P?bi:C,h,f.endpointDefinitions[T],T),F=ce.useRef(void 0),Q=ce.useMemo(()=>u([z(U),(Z,re)=>re,Z=>U],R,{memoizeOptions:{resultEqualityCheck:Uo}}),[z,U]),ee=ce.useMemo(()=>D?u([Q],D,{devModeChecks:{identityFunctionCheck:"never"}}):Q,[Q,D]),ae=s(Z=>ee(Z,F.current),Uo),L=a(),$=Q(L.getState(),F.current);return Vk(()=>{F.current=$},[$]),ae}}function S(T){ce.useEffect(()=>()=>{T.current?.unsubscribe?.(),T.current=void 0},[T])}function _(T){if(!T.current)throw new Error(bt(38));return T.current.refetch()}function E(T){const R=(P,D={})=>{const[z]=v(T,P,D);return S(z),ce.useMemo(()=>({refetch:()=>_(z)}),[z])},O=({refetchOnReconnect:P,refetchOnFocus:D,pollingInterval:z=0,skipPollingIfUnfocused:U=!1}={})=>{const{initiate:F}=n.endpoints[T],Q=t(),[ee,ae]=ce.useState(Od),L=ce.useRef(void 0),$=Fu({refetchOnReconnect:P,refetchOnFocus:D,pollingInterval:z,skipPollingIfUnfocused:U});d(()=>{const Y=L.current?.subscriptionOptions;$!==Y&&L.current?.updateSubscriptionOptions($)},[$]);const Z=ce.useRef($);d(()=>{Z.current=$},[$]);const re=ce.useCallback(function(Y,ne=!1){let te;return e(()=>{L.current?.unsubscribe(),L.current=te=Q(F(Y,{subscriptionOptions:Z.current,forceRefetch:!ne})),ae(Y)}),te},[Q,F]),j=ce.useCallback(()=>{L.current?.queryCacheKey&&Q(n.internalActions.removeQueryResult({queryCacheKey:L.current?.queryCacheKey}))},[Q]);return ce.useEffect(()=>()=>{L?.current?.unsubscribe()},[]),ce.useEffect(()=>{ee!==Od&&!L.current&&re(ee,!0)},[ee,re]),ce.useMemo(()=>[re,ee,{reset:j}],[re,ee,j])},C=w(T,g);return{useQueryState:C,useQuerySubscription:R,useLazyQuerySubscription:O,useLazyQuery(P){const[D,z,{reset:U}]=O(P),F=C(z,{...P,skip:z===Od}),Q=ce.useMemo(()=>({lastArg:z}),[z]);return ce.useMemo(()=>[D,{...F,reset:U},Q],[D,F,U,Q])},useQuery(P,D){const z=R(P,D),U=C(P,{selectFromResult:P===bi||D?.skip?void 0:e_,...D}),F=Pd(U,...Dd);return ce.useDebugValue(F),ce.useMemo(()=>({...U,...z}),[U,z])}}}function M(T){const R=(C,P={})=>{const[D,z,U,F]=v(T,C,P),Q=ce.useRef(F);d(()=>{Q.current=F},[F]);const ee=ce.useCallback(function(ae,L){let $;return e(()=>{D.current?.unsubscribe(),D.current=$=z(U(ae,{subscriptionOptions:Q.current,direction:L}))}),$},[D,z,U]);return S(D),ce.useMemo(()=>({trigger:ee,refetch:()=>_(D),fetchNextPage:()=>ee(C,"forward"),fetchPreviousPage:()=>ee(C,"backward")}),[D,ee,C])},O=w(T,m);return{useInfiniteQueryState:O,useInfiniteQuerySubscription:R,useInfiniteQuery(C,P){const{refetch:D,fetchNextPage:z,fetchPreviousPage:U}=R(C,P),F=O(C,{selectFromResult:C===bi||P?.skip?void 0:e_,...P}),Q=Pd(F,...Dd,"hasNextPage","hasPreviousPage");return ce.useDebugValue(Q),ce.useMemo(()=>({...F,fetchNextPage:z,fetchPreviousPage:U,refetch:D}),[F,z,U,D])}}}function A(T){return({selectFromResult:R,fixedCacheKey:O}={})=>{const{select:C,initiate:P}=n.endpoints[T],D=t(),[z,U]=ce.useState();ce.useEffect(()=>()=>{z?.arg.fixedCacheKey||z?.reset()},[z]);const F=ce.useCallback(function(Y){const ne=D(P(Y,{fixedCacheKey:O}));return U(ne),ne},[D,P,O]),{requestId:Q}=z||{},ee=ce.useMemo(()=>C({fixedCacheKey:O,requestId:z?.requestId}),[O,z,C]),ae=ce.useMemo(()=>R?u([ee],R):ee,[R,ee]),L=s(ae,Uo),$=O==null?z?.arg.originalArgs:void 0,Z=ce.useCallback(()=>{e(()=>{z&&U(void 0),O&&D(n.internalActions.removeMutationResult({requestId:Q,fixedCacheKey:O}))})},[D,O,z,Q]),re=Pd(L,...Dd,"endpointName");ce.useDebugValue(re);const j=ce.useMemo(()=>({...L,originalArgs:$,reset:Z}),[L,$,Z]);return ce.useMemo(()=>[F,j],[F,j])}}}var Xk=Symbol(),Wk=({batch:n=OT,hooks:e={useDispatch:Xw,useSelector:Ww,useStore:fg},createSelector:t=vg,unstable__sideEffectsInRender:s=!1,...a}={})=>({name:Xk,init(o,{serializeQueryArgs:u},h){const f=o,{buildQueryHooks:d,buildInfiniteQueryHooks:g,buildMutationHook:m,usePrefetch:b}=Yk({api:o,moduleOptions:{batch:n,hooks:e,unstable__sideEffectsInRender:s,createSelector:t},serializeQueryArgs:u,context:h});return yo(f,{usePrefetch:b}),yo(h,{batch:n}),{injectEndpoint(v,w){if(Ik(w)){const{useQuery:S,useLazyQuery:_,useLazyQuerySubscription:E,useQueryState:M,useQuerySubscription:A}=d(v);yo(f.endpoints[v],{useQuery:S,useLazyQuery:_,useLazyQuerySubscription:E,useQueryState:M,useQuerySubscription:A}),o[`use${$u(v)}Query`]=S,o[`useLazy${$u(v)}Query`]=_}if(Nk(w)){const S=m(v);yo(f.endpoints[v],{useMutation:S}),o[`use${$u(v)}Mutation`]=S}else if(jx(w)){const{useInfiniteQuery:S,useInfiniteQuerySubscription:_,useInfiniteQueryState:E}=g(v);yo(f.endpoints[v],{useInfiniteQuery:S,useInfiniteQuerySubscription:_,useInfiniteQueryState:E}),o[`use${$u(v)}InfiniteQuery`]=S}}}}}),Qk=Bx(zx(),Wk());const Kk=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),Zk=function(n){return"/editor/"+n},t_={},Yn=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=f(t.map(d=>{if(d=Zk(d),d in t_)return;t_[d]=!0;const g=d.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":Kk,g||(b.as="script"),b.crossOrigin="",b.href=d,h&&b.setAttribute("nonce",h),document.head.appendChild(b),g)return new Promise((v,w)=>{b.addEventListener("load",v),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},Ux=n=>{let e;return(...t)=>(e||(e=n(...t)),e)},Jk=Ux(()=>Yn(()=>import("./campaign-JmJOGSQZ.js"),__vite__mapDeps([0,1]))),Vc=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const eC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ko=Array.prototype.slice.call(eC),Vu=(n=>{let e={};return n.forEach((t,s)=>e[t]=s),e})(ko),tC=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,pc=String.fromCharCode.bind(String),n_=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0)),nC=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Lx=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),iC=n=>{let e,t,s,a,o="";const u=n.length%3;for(let h=0;h<n.length;){if((t=n.charCodeAt(h++))>255||(s=n.charCodeAt(h++))>255||(a=n.charCodeAt(h++))>255)throw new TypeError("invalid character found");e=t<<16|s<<8|a,o+=ko[e>>18&63]+ko[e>>12&63]+ko[e>>6&63]+ko[e&63]}return u?o.slice(0,u-3)+"===".substring(u):o},sC=typeof btoa=="function"?n=>btoa(n):Vc?n=>Buffer.from(n,"binary").toString("base64"):iC,i_=Vc?n=>Buffer.from(n).toString("base64"):n=>{let t=[];for(let s=0,a=n.length;s<a;s+=4096)t.push(pc.apply(null,n.subarray(s,s+4096)));return sC(t.join(""))},rC=(n,e=!1)=>e?nC(i_(n)):i_(n),aC=n=>{if(n=n.replace(/\s+/g,""),!tC.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t="",s,a;for(let o=0;o<n.length;)e=Vu[n.charAt(o++)]<<18|Vu[n.charAt(o++)]<<12|(s=Vu[n.charAt(o++)])<<6|(a=Vu[n.charAt(o++)]),t+=s===64?pc(e>>16&255):a===64?pc(e>>16&255,e>>8&255):pc(e>>16&255,e>>8&255,e&255);return t},oC=typeof atob=="function"?n=>atob(Lx(n)):Vc?n=>Buffer.from(n,"base64").toString("binary"):aC,lC=Vc?n=>n_(Buffer.from(n,"base64")):n=>n_(oC(n).split("").map(e=>e.charCodeAt(0))),uC=n=>lC(cC(n)),cC=n=>Lx(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),hC=!0,Ix="gzip",fC=async n=>{const e=JSON.stringify(n),s=new TextEncoder().encode(e),a=new Blob([s]),o=new CompressionStream(Ix),u=a.stream().pipeThrough(o),h=await new Response(u).arrayBuffer(),f=new Uint8Array(h);return rC(f,hC)},Nx=async n=>{try{const e=uC(n),t=new Blob([new Uint8Array(e)]),s=new DecompressionStream(Ix),a=t.stream().pipeThrough(s),o=await new Response(a).text();return JSON.parse(o)}catch(e){throw new Error("error decompressing object",{cause:e})}},dC=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yn(async()=>{const{default:s}=await Promise.resolve().then(()=>oa);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class qg extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class pC extends qg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s_ extends qg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class r_ extends qg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Pp||(Pp={}));var gC=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};class yC{constructor(e,{headers:t={},customFetch:s,region:a=Pp.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=dC(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return gC(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:u}=t;let h={},{region:f}=t;f||(f=this.region);const d=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g}).catch(S=>{throw new pC(S)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new s_(m);if(!m.ok)throw new r_(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield m.json():v==="application/octet-stream"?w=yield m.blob():v==="text/event-stream"?w=m:v==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof r_||a instanceof s_?a.context:void 0}}})}}var gt={},Br={},zr={},jr={},Ur={},Lr={},mC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},na=mC();const bC=na.fetch,qx=na.fetch.bind(na),Gx=na.Headers,vC=na.Request,_C=na.Response,oa=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gx,Request:vC,Response:_C,default:qx,fetch:bC},Symbol.toStringTag,{value:"Module"})),wC=eT(oa);var Yu={},a_;function Hx(){if(a_)return Yu;a_=1,Object.defineProperty(Yu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Yu.default=n,Yu}var o_;function $x(){if(o_)return Lr;o_=1;var n=Lr&&Lr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Lr,"__esModule",{value:!0});const e=n(wC),t=n(Hx());class s{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var g,m,b;let v=null,w=null,S=null,_=d.status,E=d.statusText;if(d.ok){if(this.method!=="HEAD"){const R=await d.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=R:w=JSON.parse(R))}const A=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),T=(m=d.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");A&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(v={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,_=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const A=await d.text();try{v=JSON.parse(A),Array.isArray(v)&&d.status===404&&(w=[],v=null,_=200,E="OK")}catch{d.status===404&&A===""?(_=204,E="No Content"):v={message:A}}if(v&&this.isMaybeSingle&&(!((b=v?.details)===null||b===void 0)&&b.includes("0 rows"))&&(v=null,_=200,E="OK"),v&&this.shouldThrowOnError)throw new t.default(v)}return{error:v,data:w,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(f=f.catch(d=>{var g,m,b;return{error:{message:`${(g=d?.name)!==null&&g!==void 0?g:"FetchError"}: ${d?.message}`,details:`${(m=d?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(b=d?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,u)}returns(){return this}overrideTypes(){return this}}return Lr.default=s,Lr}var l_;function Fx(){if(l_)return Ur;l_=1;var n=Ur&&Ur.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ur,"__esModule",{value:!0});const e=n($x());class t extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const d=f?`${f}.order`:"order",g=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,d=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(d,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:d="text"}={}){var g;const m=[a?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${b}"; options=${m};`,d==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ur.default=t,Ur}var u_;function Gg(){if(u_)return jr;u_=1;var n=jr&&jr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(jr,"__esModule",{value:!0});const e=n(Fx());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const d=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${f}fts${d}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return jr.default=t,jr}var c_;function Vx(){if(c_)return zr;c_=1;var n=zr&&zr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(zr,"__esModule",{value:!0});const e=n(Gg());class t{constructor(a,{headers:o={},schema:u,fetch:h}){this.url=a,this.headers=o,this.schema=u,this.fetch=h}select(a,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let f=!1;const d=(a??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",d),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:u=!0}={}){const h="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),u||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(a)){const d=a.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(d.length>0){const g=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){const d="POST",g=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),h&&g.push(`count=${h}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const m=a.reduce((b,v)=>b.concat(Object.keys(v)),[]);if(m.length>0){const b=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",u=[];return a&&u.push(`count=${a}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return zr.default=t,zr}var mo={},bo={},h_;function xC(){return h_||(h_=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.version=void 0,bo.version="0.0.0-automated"),bo}var f_;function SC(){if(f_)return mo;f_=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.DEFAULT_HEADERS=void 0;const n=xC();return mo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},mo}var d_;function AC(){if(d_)return Br;d_=1;var n=Br&&Br.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Br,"__esModule",{value:!0});const e=n(Vx()),t=n(Gg()),s=SC();class a{constructor(u,{headers:h={},schema:f,fetch:d}={}){this.url=u,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=f,this.fetch=d}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:f=!1,get:d=!1,count:g}={}){let m;const b=new URL(`${this.url}/rpc/${u}`);let v;f||d?(m=f?"HEAD":"GET",Object.entries(h).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{b.searchParams.append(S,_)})):(m="POST",v=h);const w=Object.assign({},this.headers);return g&&(w.Prefer=`count=${g}`),new t.default({method:m,url:b,headers:w,schema:this.schemaName,body:v,fetch:this.fetch,allowEmpty:!1})}}return Br.default=a,Br}var p_;function EC(){if(p_)return gt;p_=1;var n=gt&&gt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(gt,"__esModule",{value:!0}),gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const e=n(AC());gt.PostgrestClient=e.default;const t=n(Vx());gt.PostgrestQueryBuilder=t.default;const s=n(Gg());gt.PostgrestFilterBuilder=s.default;const a=n(Fx());gt.PostgrestTransformBuilder=a.default;const o=n($x());gt.PostgrestBuilder=o.default;const u=n(Hx());return gt.PostgrestError=u.default,gt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},gt}var TC=EC();const MC=Ai(TC),{PostgrestClient:kC,PostgrestQueryBuilder:Ij,PostgrestFilterBuilder:Nj,PostgrestTransformBuilder:qj,PostgrestBuilder:Gj,PostgrestError:Hj}=MC;function CC(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const RC=CC(),OC="2.11.15",PC=`realtime-js/${OC}`,DC="1.0.0",Yx=1e4,BC=1e3;var Go;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Go||(Go={}));var Ot;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ot||(Ot={}));var On;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(On||(On={}));var Dp;(function(n){n.websocket="websocket"})(Dp||(Dp={}));var Ls;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ls||(Ls={}));class zC{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2);let u=this.HEADER_LENGTH+2;const h=s.decode(e.slice(u,u+a));u=u+a;const f=s.decode(e.slice(u,u+o));u=u+o;const d=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:d}}}class Xx{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ge||(Ge={}));const g_=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((o,u)=>(o[u]=jC(u,n,e,a),o),{})},jC=(n,e,t,s)=>{const a=e.find(h=>h.name===n),o=a?.type,u=t[n];return o&&!s.includes(o)?Wx(o,u):Bp(u)},Wx=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return NC(e,t)}switch(n){case Ge.bool:return UC(e);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return LC(e);case Ge.json:case Ge.jsonb:return IC(e);case Ge.timestamp:return qC(e);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return Bp(e);default:return Bp(e)}},Bp=n=>n,UC=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},LC=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},IC=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},NC=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const u=n.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>Wx(e,h))}return n},qC=n=>typeof n=="string"?n.replace(" ","T"):n,Qx=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Bd{constructor(e,t,s={},a=Yx){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var y_;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(y_||(y_={}));class Ho{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ho.syncState(this.state,a,o,u),this.pendingDiffs.forEach(f=>{this.state=Ho.syncDiff(this.state,f,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ho.syncDiff(this.state,a,o,u),h())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),h={},f={};return this.map(o,(d,g)=>{u[d]||(f[d]=g)}),this.map(u,(d,g)=>{const m=o[d];if(m){const b=g.map(_=>_.presence_ref),v=m.map(_=>_.presence_ref),w=g.filter(_=>v.indexOf(_.presence_ref)<0),S=m.filter(_=>b.indexOf(_.presence_ref)<0);w.length>0&&(h[d]=w),S.length>0&&(f[d]=S)}else h[d]=g}),this.syncDiff(o,{joins:h,leaves:f},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(h,f)=>{var d;const g=(d=e[h])!==null&&d!==void 0?d:[];if(e[h]=this.cloneDeep(f),g.length>0){const m=e[h].map(v=>v.presence_ref),b=g.filter(v=>m.indexOf(v.presence_ref)<0);e[h].unshift(...b)}s(h,g,f)}),this.map(u,(h,f)=>{let d=e[h];if(!d)return;const g=f.map(m=>m.presence_ref);d=d.filter(m=>g.indexOf(m.presence_ref)<0),e[h]=d,a(h,d,f),d.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var m_;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(m_||(m_={}));var b_;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(b_||(b_={}));var yi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yi||(yi={}));class Hg{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Bd(this,On.join,this.params,this.timeout),this.rejoinTimer=new Xx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(On.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Ho(this),this.broadcastEndpointURL=Qx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(g=>e?.(yi.CHANNEL_ERROR,g)),this._onClose(()=>e?.(yi.CLOSED));const f={},d={broadcast:o,presence:u,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket.setAuth(),g===void 0){e?.(yi.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,v=(m=b?.length)!==null&&m!==void 0?m:0,w=[];for(let S=0;S<v;S++){const _=b[S],{filter:{event:E,schema:M,table:A,filter:T}}=_,R=g&&g[S];if(R&&R.event===E&&R.schema===M&&R.table===A&&R.filter===T)w.push(Object.assign(Object.assign({},_),{id:R.id}));else{this.unsubscribe(),this.state=Ot.errored,e?.(yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(yi.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ot.errored,e?.(yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,f;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ot.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(On.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Bd(this,On.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Bd(this,e,t,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:d,join:g}=On;if(s&&[h,f,d,g].indexOf(u)>=0&&s!==this._joinRef())return;let b=this._onMessage(u,t,s);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var w,S,_;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(S=v.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===u}).map(v=>v.callback(b,s)):(o=this.bindings[u])===null||o===void 0||o.filter(v=>{var w,S,_,E,M,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in v){const T=v.id,R=(w=v.filter)===null||w===void 0?void 0:w.event;return T&&((S=t.ids)===null||S===void 0?void 0:S.includes(T))&&(R==="*"||R?.toLocaleLowerCase()===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const T=(M=(E=v?.filter)===null||E===void 0?void 0:E.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return T==="*"||T===((A=t?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===u}).map(v=>{if(typeof b=="object"&&"ids"in b){const w=b.data,{schema:S,table:_,commit_timestamp:E,type:M,errors:A}=w;b=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:E,eventType:M,new:{},old:{},errors:A}),this._getPayloadRecords(w))}v.callback(b,s)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Hg.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(On.close,{},e)}_onError(e){this._on(On.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=g_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=g_(e.columns,e.old_record)),t}}const v_=()=>{},GC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HC{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yx,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=v_,this.ref=0,this.logger=v_,this.conn=null,this.sendBuffer=[],this.serializer=new zC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>Yn(async()=>{const{default:f}=await Promise.resolve().then(()=>oa);return{default:f}},void 0).then(({default:f})=>f(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${Dp.websocket}`,this.httpEndpoint=Qx(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t?.encode?t.encode:(o,u)=>u(JSON.stringify(o)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=RC),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:DC}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Go.connecting:return Ls.Connecting;case Go.open:return Ls.Open;case Go.closing:return Ls.Closing;default:return Ls.Closed}}isConnected(){return this.connectionState()===Ls.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new Hg(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:PC};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(On.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(BC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:a,payload:o,ref:u}=t;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${a} ${u&&"("+u+")"||""}`,o),Array.from(this.channels).filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(On.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([GC],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class $g extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class $C extends $g{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class zp extends $g{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var FC=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};const Kx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yn(async()=>{const{default:s}=await Promise.resolve().then(()=>oa);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},VC=()=>FC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yn(()=>Promise.resolve().then(()=>oa),void 0)).Response:Response}),jp=n=>{if(Array.isArray(n))return n.map(t=>jp(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=jp(s)}),e};var Ws=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};const zd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),YC=(n,e,t)=>Ws(void 0,void 0,void 0,function*(){const s=yield VC();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{e(new $C(zd(a),n.status||500))}).catch(a=>{e(new zp(zd(a),a))}):e(new zp(zd(n),n))}),XC=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),t))};function ml(n,e,t,s,a,o){return Ws(this,void 0,void 0,function*(){return new Promise((u,h)=>{n(t,XC(e,s,a,o)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>YC(f,h,s))})})}function Cc(n,e,t,s){return Ws(this,void 0,void 0,function*(){return ml(n,"GET",e,t,s)})}function Ki(n,e,t,s,a){return Ws(this,void 0,void 0,function*(){return ml(n,"POST",e,s,a,t)})}function WC(n,e,t,s,a){return Ws(this,void 0,void 0,function*(){return ml(n,"PUT",e,s,a,t)})}function QC(n,e,t,s){return Ws(this,void 0,void 0,function*(){return ml(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Zx(n,e,t,s,a){return Ws(this,void 0,void 0,function*(){return ml(n,"DELETE",e,s,a,t)})}var Ft=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};const KC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},__={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZC{constructor(e,t={},s,a){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Kx(a)}uploadOrUpdate(e,t,s,a){return Ft(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},__),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const d=this._removeEmptyFolders(t),g=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:h},u?.duplex?{duplex:u.duplex}:{})),b=yield m.json();return m.ok?{data:{path:d,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(o){if(yt(o))return{data:null,error:o};throw o}})}upload(e,t,s){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return Ft(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",t);try{let f;const d=Object.assign({upsert:__.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",d.cacheControl)):(f=s,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType);const m=yield this.fetch(h.toString(),{method:"PUT",body:f,headers:g}),b=yield m.json();return m.ok?{data:{path:o,fullPath:b.Key},error:null}:{data:null,error:b}}catch(f){if(yt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return Ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield Ki(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new $g("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(s){if(yt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ft(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Ki(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return Ft(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Ki(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return Ft(this,void 0,void 0,function*(){try{const a=yield Ki(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}download(e,t){return Ft(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Cc(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(yt(h))return{data:null,error:h};throw h}})}info(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Cc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:jp(s),error:null}}catch(s){if(yt(s))return{data:null,error:s};throw s}})}exists(e){return Ft(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield QC(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(yt(s)&&s instanceof zp){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const h=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&a.push(f);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${d}`)}}}remove(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield Zx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ft(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},KC),t),{prefix:e||""});return{data:yield Ki(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const JC="2.7.1",eR={"X-Client-Info":`storage-js/${JC}`};var Ir=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};class tR{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},eR),t),this.fetch=Kx(s)}listBuckets(){return Ir(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(yt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ir(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(yt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Ir(this,void 0,void 0,function*(){try{return{data:yield WC(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(yt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield Zx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}}class nR extends tR{constructor(e,t={},s){super(e,t,s)}from(e){return new ZC(this.url,this.headers,e,this.fetch)}}const iR="2.51.0";let Co="";typeof Deno<"u"?Co="deno":typeof document<"u"?Co="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Co="react-native":Co="node";const sR={"X-Client-Info":`supabase-js-${Co}/${iR}`},rR={headers:sR},aR={schema:"public"},oR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lR={};var uR=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};const cR=n=>{let e;return n?e=n:typeof fetch>"u"?e=qx:e=fetch,(...t)=>e(...t)},hR=()=>typeof Headers>"u"?Gx:Headers,fR=(n,e,t)=>{const s=cR(t),a=hR();return(o,u)=>uR(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:n;let d=new a(u?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},u),{headers:d}))})};var dR=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};function pR(n){return n.endsWith("/")?n:n+"/"}function gR(n,e){var t,s;const{db:a,auth:o,realtime:u,global:h}=n,{db:f,auth:d,realtime:g,global:m}=e,b={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},g),u),global:Object.assign(Object.assign(Object.assign({},m),h),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(s=h?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>dR(this,void 0,void 0,function*(){return""})};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}const Jx="2.71.0",Vr=30*1e3,Up=3,jd=Up*Vr,yR="http://localhost:9999",mR="supabase.auth.token",bR={"X-Client-Info":`gotrue-js/${Jx}`},Lp="X-Supabase-Api-Version",eS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_R=600*1e3;class Fg extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wR extends Fg{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function xR(n){return be(n)&&n.name==="AuthApiError"}class tS extends Fg{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ns extends Fg{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Qi extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function SR(n){return be(n)&&n.name==="AuthSessionMissingError"}class Xu extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wu extends ns{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qu extends ns{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function AR(n){return be(n)&&n.name==="AuthImplicitGrantRedirectError"}class w_ extends ns{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ip extends ns{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ud(n){return be(n)&&n.name==="AuthRetryableFetchError"}class x_ extends ns{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Np extends ns{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),S_=` 	
\r=`.split(""),ER=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<S_.length;e+=1)n[S_[e].charCodeAt(0)]=-2;for(let e=0;e<Rc.length;e+=1)n[Rc[e].charCodeAt(0)]=e;return n})();function A_(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rc[s]),e.queuedBits-=6}}function nS(n,e,t){const s=ER[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function E_(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{kR(u,s,t)};for(let u=0;u<n.length;u+=1)nS(n.charCodeAt(u),a,o);return e.join("")}function TR(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function MR(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}TR(s,e)}}function kR(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function CR(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)nS(n.charCodeAt(a),t,s);return new Uint8Array(e)}function RR(n){const e=[];return MR(n,t=>e.push(t)),new Uint8Array(e)}function OR(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>A_(a,t,s)),A_(null,t,s),e.join("")}function PR(n){return Math.round(Date.now()/1e3)+n}function DR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Cn=()=>typeof window<"u"&&typeof document<"u",Ms={tested:!1,writable:!1},iS=()=>{if(!Cn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ms.tested)return Ms.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ms.tested=!0,Ms.writable=!0}catch{Ms.tested=!0,Ms.writable=!1}return Ms.writable};function BR(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const sS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Yn(async()=>{const{default:s}=await Promise.resolve().then(()=>oa);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},zR=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yr=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ks=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Wi=async(n,e)=>{await n.removeItem(e)};class Yc{constructor(){this.promise=new Yc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yc.promiseConstructor=Promise;function Ld(n){const e=n.split(".");if(e.length!==3)throw new Np("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!vR.test(e[s]))throw new Np("JWT not in base64url format");return{header:JSON.parse(E_(e[0])),payload:JSON.parse(E_(e[1])),signature:CR(e[2]),raw:{header:e[0],payload:e[1]}}}async function jR(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function UR(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await n(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function LR(n){return("0"+n.toString(16)).substr(-2)}function IR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,LR).join("")}async function NR(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function qR(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await NR(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nr(n,e,t=!1){const s=IR();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Yr(n,`${e}-code-verifier`,a);const o=await qR(s);return[o,s===o?"plain":"s256"]}const GR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HR(n){const e=n.headers.get(Lp);if(!e||!e.match(GR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $R(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function FR(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(n){if(!VR.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Id(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var YR=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const Ps=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),XR=[502,503,504];async function T_(n){var e;if(!zR(n))throw new Ip(Ps(n),0);if(XR.includes(n.status))throw new Ip(Ps(n),n.status);let t;try{t=await n.json()}catch(o){throw new tS(Ps(o),o)}let s;const a=HR(n);if(a&&a.getTime()>=eS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new x_(Ps(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Qi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new x_(Ps(t),n.status,t.weak_password.reasons);throw new wR(Ps(t),n.status||500,s)}const WR=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Ee(n,e,t,s){var a;const o=Object.assign({},s?.headers);o[Lp]||(o[Lp]=eS["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await QR(n,e,t+h,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function QR(n,e,t,s,a,o){const u=WR(e,s,a,o);let h;try{h=await n(t,Object.assign({},u))}catch(f){throw console.error(f),new Ip(Ps(f),0)}if(h.ok||await T_(h),s?.noResolveJson)return h;try{return await h.json()}catch(f){await T_(f)}}function gi(n){var e;let t=null;eO(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=PR(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function M_(n){const e=gi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Zi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function KR(n){return{data:n,error:null}}function ZR(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,u=YR(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function JR(n){return n}function eO(n){return n.access_token&&n.refresh_token&&n.expires_in}const Nd=["global","local","others"];var tO=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class nO{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=sS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Nd[0]){if(Nd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nd.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Zi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=tO(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ZR,redirectTo:t?.redirectTo})}catch(t){if(be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zi})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,h,f;try{const d={nextPage:null,lastPage:0,total:0},g=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:JR});if(g.error)throw g.error;const m=await g.json(),b=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,v=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);d[`${_}Page`]=S}),d.total=parseInt(b)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(be(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){qr(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zi})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){qr(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Zi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){qr(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Zi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){qr(e.userId);try{const{data:t,error:s}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){qr(e.userId),qr(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}}function k_(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function iO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gr={debug:!!(globalThis&&iS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sO extends rS{}async function rO(n,e,t){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new sO(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Gr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}iO();const aO={url:yR,storageKey:mR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function C_(n,e,t){return await t()}const Hr={};class nl{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nl.nextInstanceID,nl.nextInstanceID+=1,this.instanceID>0&&Cn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},aO),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new nO({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=sS(a.fetch),this.lock=a.lock||C_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Cn()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=rO:this.lock=C_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:iS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=k_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=k_(this.memoryStorage)),Cn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Hr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Hr[this.storageKey]=Object.assign(Object.assign({},Hr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Hr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hr[this.storageKey]=Object.assign(Object.assign({},Hr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=BR(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Cn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),AR(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return be(t)?{error:t}:{error:new tS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:gi}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:g,password:m,options:b}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Nr(this.storage,this.storageKey)),o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:m,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:v,code_challenge_method:w},xform:gi})}else if("phone"in e){const{phone:g,password:m,options:b}=e;o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(s=b?.data)!==null&&s!==void 0?s:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:gi})}else throw new Wu("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:h}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:M_})}else if("phone"in e){const{phone:o,password:u,options:h}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:M_})}else throw new Wu("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Xu}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,a,o,u,h,f,d,g,m,b,v;let w,S;if("message"in e)w=e.message,S=e.signature;else{const{chain:_,wallet:E,statement:M,options:A}=e;let T;if(Cn())if(typeof E=="object")T=E;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))T=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=E}const R=new URL((t=A?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in T&&T.signIn){const O=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),M?{statement:M}:null));let C;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")C=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)C=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)w=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),S=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${R.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(a=(s=A?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=A?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((m=(g=A?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...A.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const O=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=O}}try{const{data:_,error:E}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:OR(S)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:gi});if(E)throw E;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Xu}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:E})}catch(_){if(be(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await ks(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:u}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:gi});if(await Wi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Xu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(be(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,h=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:gi}),{data:f,error:d}=h;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Xu}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:h,options:f}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Nr(this.storage,this.storageKey));const{error:m}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:h,options:f}=e,{data:d,error:g}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:g}}throw new Wu("You must provide either an email or phone number.")}catch(h){if(be(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:h}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:gi});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,d=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await Nr(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:KR})}catch(o){if(be(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Qi;const{error:a}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:h}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Wu("You must provide either an email or phone number and a type")}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<jd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await ks(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Id()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,d,g)=>(!u&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,g))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zi}):await this._useSession(async t=>{var s,a,o;const{data:u,error:h}=t;if(h)throw h;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qi}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Zi})})}catch(t){if(be(t))return SR(t)&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Qi;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Nr(this.storage,this.storageKey));const{data:d,error:g}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Zi});if(g)throw g;return u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qi;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Ld(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Qi;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Cn())throw new Qu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new w_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qu("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new w_("No code detected.");const{data:M,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:h,expires_at:f,token_type:d}=e;if(!o||!h||!u||!d)throw new Qu("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(h);let b=g+m;f&&(b=parseInt(f));const v=b-g;v*1e3<=Vr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const w=b-m;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,b,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,b,g);const{data:S,error:_}=await this._getUser(o);if(_)throw _;const E={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:m,expires_at:b,refresh_token:u,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(s){if(be(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ks(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(xR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=DR(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Nr(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(be(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,h,f,d,g;const{data:m,error:b}=o;if(b)throw b;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",v,{headers:this.headers,jwt:(g=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Cn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(be(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await UR(async a=>(a>0&&await jR(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gi})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Ud(o)&&Date.now()+u-s<Vr})}catch(s){if(this._debug(t,"error",s),be(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Cn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ks(this.storage,this.storageKey);if(a&&this.userStorage){let u=await ks(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await Yr(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Id()}else if(a&&!a.user&&!a.user){const u=await ks(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Wi(this.storage,this.storageKey+"-user"),await Yr(this.storage,this.storageKey,a)):a.user=Id()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jd;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${jd}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Ud(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Qi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Yc;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Qi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),be(o)){const u={session:null,error:o};return Ud(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Yr(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=structuredClone(a);await Yr(this.storage,this.storageKey,o)}else{const a=structuredClone(t);await Yr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Wi(this.storage,this.storageKey),await Wi(this.storage,this.storageKey+"-code-verifier"),await Wi(this.storage,this.storageKey+"-user"),this.userStorage&&await Wi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Cn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Vr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Vr}ms, refresh threshold is ${Up} ticks`),a<=Up&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await Nr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:d}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const{data:u,error:h}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?{data:null,error:o}:await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],a=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Ld(a.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+_R>a)return s;const{data:o,error:u}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};s=v.session.access_token}const{header:a,payload:o,signature:u,raw:{header:h,payload:f}}=Ld(s);t?.allowExpired||$R(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:o,header:a,signature:u},error:null}}const g=FR(a.alg),m=await crypto.subtle.importKey("jwk",d,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,u,RR(`${h}.${f}`)))throw new Np("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}}}nl.nextInstanceID=0;const oO=nl;class lO extends oO{constructor(e){super(e)}}var uO=function(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function h(g){try{d(s.next(g))}catch(m){u(m)}}function f(g){try{d(s.throw(g))}catch(m){u(m)}}function d(g){g.done?o(g.value):a(g.value).then(h,f)}d((s=s.apply(n,e||[])).next())})};class cO{constructor(e,t,s){var a,o,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=pR(e),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const d=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:aR,realtime:lR,auth:Object.assign(Object.assign({},oR),{storageKey:d}),global:rR},m=gR(s??{},g);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(b,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=fR(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new kC(new URL("rest/v1",f).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new yC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new nR(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return uO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,storageKey:o,flowType:u,lock:h,debug:f},d,g){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lO({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new HC(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hO=(n,e,t)=>new cO(n,e,t),Vg=hO("https://pkswdnpftrundnewgnya.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrc3dkbnBmdHJ1bmRuZXdnbnlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODI2MzIsImV4cCI6MjA2ODI1ODYzMn0.r_Y1RLOGJ55C0De5SBTVXqO09SMDqgV38sQuE-oDxXE"),fO=async n=>{if(n.locator.campaignName===void 0)throw new Error("can not save a campaign without a name");const e=await Vg.rpc("save_campaign_version",{p_name:n.locator.campaignName,p_data:await fC(n),p_published:n.meta?.published??!1});if(e.error)throw new Error(`error saving to db ${e.error.message} ${e.error.details}`,{cause:e.error});return e.data},dO=async n=>{const e=await Vg.rpc("get_latest_campaign",{p_campaign_name:n.campaignName,p_user_id:n.userId,p_version:n.version===-1?void 0:n.version});if(e.error)throw new Error("could not get campaign",{cause:e.error});const t=await Nx(e.data.data);return Object.values(t.rooms).forEach(s=>{delete s.size}),t.locator===void 0&&(t.locator={userId:n.userId||"upgraded, unknown",campaignName:n.campaignName,version:e.data.version}),delete t.name,t},pO=async({publishedOnly:n})=>{const e=await Vg.rpc("get_all_users_latest_campaigns",{p_published_only:n});if(e.error)throw new Error("could not get user campaigns",{cause:e.error});return e.data},qd=n=>{const e=[];for(let t=n;t!==void 0;t=t instanceof Error?t.cause:void 0)t instanceof Error&&e.push({message:t.message,stack:t.stack});return e},il=Qk({reducerPath:"campaignsApi",baseQuery:Mk(),endpoints:n=>({getCampaign:n.query({async queryFn(e){try{return e.userId==="@@original"&&e.campaignName==="original"?{data:(await Jk()).campaign}:e.campaignName.startsWith("data:")?{data:await Nx(e.campaignName.substring(5))}:{data:await dO(e)}}catch(t){return{error:qd(new Error(`getCampaign queryFn( ${JSON.stringify(e)} ) failed: ${t}`))}}}}),getAllUsersLatestCampaigns:n.query({async queryFn({publishedOnly:e}){try{return{data:await pO({publishedOnly:e})}}catch(t){return{error:qd(new Error(`getAllUsersLatestCampaigns queryFn() failed: ${t}`))}}}}),saveCampaign:n.mutation({async queryFn(e){try{return{data:await fO(e)}}catch(t){return{error:qd(new Error(`saveCampaign queryFn( ${JSON.stringify(e)} ) failed: ${t}`))}}}})})}),{useGetAllUsersLatestCampaignsQuery:$j}=il,gO=il.endpoints.getCampaign.select,yO=(n,e)=>gO(e)(n).data,Oc={inputAssignment:Mp.Default.inputAssignment,infiniteLivesPoke:!1,infiniteDoughnutsPoke:!1,displaySettings:{showBoundingBoxes:"none",showShadowMasks:!1,crtFilter:!1,uncolourised:!1,emulatedResolution:vi()==="mobile"?"handheld":"zxSpectrum"},gameSpeed:1.2,showFps:!1,onScreenControls:vi()==="mobile"||vi()==="tablet",inputDirectionMode:"8-way",directionsRelativeTo:"mixed",soundSettings:{mute:!1,noFootsteps:!1}},is=n=>e=>Mc(e.gameMenus.userSettings,n)??Mc(Oc,n),Yg=is("displaySettings.emulatedResolution"),mO=is("gameSpeed"),Fj=()=>Tx(Yg),Vj=is("displaySettings.uncolourised"),Yj=is("infiniteLivesPoke"),Xj=is("infiniteDoughnutsPoke"),bO=is("directionsRelativeTo"),vO=is("inputDirectionMode"),_O=is("displaySettings.showBoundingBoxes"),Wj=()=>Tx(_O),wO=(n,e)=>!!(Mc(n.userSettings,e)??Mc(Oc,e)??!1),Qj=n=>{const e=n.gameMenus.gameInPlay.campaignLocator;return e===void 0?void 0:yO(n,e)},xO=[1,1.2,1.5,2],Kj=["none","non-wall","all"],vo=n=>_M(fk(n,"userId","campaignName")),SO=["4-way","8-way","analogue"],AO=vi()!=="server",EO=AO?qo().has("cheats"):!1,TO={blacktooth:!1,bookworld:!1,egyptus:!1,penitentiary:!1,safari:!1},qp={planetsLiberated:TO,roomsExplored:{},scrollsRead:{},reincarnationPoint:void 0,freeCharacters:{}},Gp={userSettings:{displaySettings:{},soundSettings:navigator.webdriver?{mute:!0}:{}},gameRunning:!1,gameInPlay:qp,openMenus:[{menuId:"mainMenu",scrollableSelection:!1,menuParam:wn}],assigningInput:void 0,cheatsOn:EO,savedGames:{saves:{}}},la=mi({name:"gameMenus",initialState:Gp,reducers:{setEmulatedResolution(n,{payload:e}){let t;e===void 0?t=qu(ck,Yg({gameMenus:n})):t=e,n.userSettings.displaySettings.emulatedResolution=t},setGameSpeed(n,{payload:e}){let t;e===void 0?t=qu(xO,mO({gameMenus:n})):t=e,n.userSettings.gameSpeed=t},scrollRead(n,{payload:e}){e.source==="manual"?(n.gameInPlay.scrollsRead[e.page]=!0,n.openMenus=[{menuId:`markdown/${e.page}`,scrollableSelection:!1,menuParam:wn}]):n.openMenus=[{menuId:"markdown/inline",scrollableSelection:!1,menuParam:{markdown:e.markdown}}]},nextInputDirectionMode(n){n.userSettings.inputDirectionMode=qu(SO,vO({gameMenus:n}))},nextDirectionRelativeTo(n){n.userSettings.directionsRelativeTo=qu(dk,bO({gameMenus:n}))},inputAddedDuringAssignment(n,{payload:e}){if(n.assigningInput===void 0)throw new Error("reducer called while not assigning keys");const t=(u,h)=>{u.includes(h)||u.push(h)},{presses:s,axes:a,action:o}=n.assigningInput;switch(e.type){case"key":t(s.keys,e.input);break;case"gamepadButtons":t(s.gamepadButtons,e.input);break;case"gamepadAxes":{Rg.includes(o)&&t(a,e.input);break}}},doneAssigningInput(n){if(n.assigningInput===void 0)throw new Error("illegal action for state");const{action:e,presses:t,axes:s}=n.assigningInput,a=t.keys.length+t.gamepadButtons.length+s.length,o=n.userSettings.inputAssignment===void 0?n.userSettings.inputAssignment=structuredClone(Mp.Default.inputAssignment):n.userSettings.inputAssignment;a>0&&(o.presses[e]=t,(e==="left"||e==="right")&&(o.axes.x=s),(e==="towards"||e==="away")&&(o.axes.y=s)),n.assigningInput=void 0},menuOpenOrExitPressed(n){if(n.openMenus.length>0){if(n.openMenus.length===1&&!n.gameRunning)return;const[,...e]=n.openMenus;n.openMenus=e}else n.openMenus=[{menuId:"mainMenu",scrollableSelection:!1,menuParam:wn}]},goToSubmenu(n,{payload:e}){n.openMenus=[{menuId:e,scrollableSelection:!1,menuParam:{}},...n.openMenus]},closeAllMenus(n){n.openMenus=[]},gameStarted(n,{payload:{campaignLocator:e,noShowCrowns:t}}){if(n.gameRunning)throw new Error("game is already running");n.openMenus=t?[]:[{menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!1}}],n.gameRunning=!0,n.gameInPlay={...qp,campaignLocator:e}},backToParentMenu(n){const[,...e]=n.openMenus;n.openMenus=e},assignInputStart(n,{payload:e}){n.assigningInput={action:e,presses:{gamepadButtons:[],keys:[]},axes:[]}},keyAssignmentPresetChosen(n,{payload:e}){const[,...t]=n.openMenus;n.openMenus=t,n.userSettings.inputAssignment=Mp[e].inputAssignment},setFocussedMenuItemId(n,{payload:{focussedItemId:e,scrollableSelection:t}}){const[s]=n.openMenus;s.focussedItemId=e,s.scrollableSelection=t},holdPressed(n,{payload:e}){n.openMenus.length>0?n.openMenus[0]?.menuId==="hold"&&e!=="hold"&&(n.openMenus=[]):e!=="unhold"&&(n.openMenus=[{menuId:"hold",scrollableSelection:!1,menuParam:wn}])},mapPressed(n){n.openMenus.length>0?n.openMenus[0]?.menuId==="map"&&(n.openMenus=[]):n.openMenus=[{menuId:"map",scrollableSelection:!1,menuParam:wn}]},setShowBoundingBoxes(n,{payload:e}){n.userSettings.displaySettings.showBoundingBoxes=e},setShowShadowMasks(n,{payload:e}){n.userSettings.displaySettings.showShadowMasks=e},toggleUserSetting(n,{payload:{path:e,value:t}}){hk(n.userSettings,e,t??!wO(n,e))},crownCollected(n,{payload:e}){n.gameInPlay.planetsLiberated[e]=!0;const t=Object.values(n.gameInPlay.planetsLiberated).every(a=>a),s={menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!0}};t?n.openMenus=[{menuId:"proclaimEmperor",scrollableSelection:!1,menuParam:wn},s]:n.openMenus=[s]},roomExplored(n,{payload:e}){n.gameInPlay.roomsExplored[e]=!0},gameOver(n,{payload:{offerReincarnation:e}}){if(e&&n.gameInPlay.reincarnationPoint!==void 0)n.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:wn},{menuId:"offerReincarnation",scrollableSelection:!1,menuParam:wn}];else{n.gameRunning=!1,delete n.gameInPlay.reincarnationPoint;const t=n.gameInPlay.campaignLocator,s=t&&vo(t);s&&(delete n.savedGames.saves[s],delete n.savedGames.lastSavedCampaignLocator),n.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:wn},{menuId:"mainMenu",scrollableSelection:!0,menuParam:wn}]}},reincarnationFishEaten(n,{payload:e}){n.gameInPlay.reincarnationPoint=e},reincarnationAccepted(n){delete n.gameInPlay.reincarnationPoint,n.openMenus=[{menuId:"reincarnatedRestart",scrollableSelection:!1,menuParam:wn}]},saveGame(n,{payload:e}){const t=n.gameInPlay.campaignLocator;if(t===void 0)throw new Error("trying to save a game, but seems like there's no campaign to save against");if(uk())throw new Error("shouldn't be saving in playtest mode");n.savedGames.saves[vo(t)]=e,n.savedGames.lastSavedCampaignLocator=t},gameRestoreFromSave(n,{payload:e}){n.gameInPlay={freeCharacters:{},...e},e.freeCharacters===void 0&&(n.gameInPlay.freeCharacters={})},errorCaught(n,{payload:e}){n.openMenus=[{menuId:"errorCaught",scrollableSelection:!1,menuParam:e}]},errorDismissed(n,{payload:e}){switch(e){case"ignore":n.openMenus=[];break;case"clearAllData":Object.assign(n,Gp),n.gameRunning=!1;break}},debugItemClicked(n,e){},characterRoomChange(n,e){},lostLife(n,e){},characterReachesFreedom(n,{payload:e}){n.gameInPlay.freeCharacters[e]=!0}},extraReducers(n){n.addCase(yl,(e,t)=>{if(qo().get("campaignName")?.startsWith("data:"))return;const s=[{menuId:"hold",scrollableSelection:!1,menuParam:wn}],a={userId:qo().get("campaignAuthorUserId")??void 0,campaignName:qo().get("campaignName")??void 0},o=t.payload?.savedGames;if((d=>d.userId!==void 0&&d.campaignName!==void 0)(a)){e.gameRunning=!0;const d=o?.saves[vo(a)];if(d){e.gameRunning=!0,e.gameInPlay={freeCharacters:{},...d.store.gameMenus.gameInPlay},e.openMenus=s;return}else{e.gameRunning=!0,e.gameInPlay={...qp,campaignLocator:a},e.openMenus=s;return}}const h=o?.lastSavedCampaignLocator,f=h&&o.saves[vo(h)];f&&(e.gameRunning=!0,e.gameInPlay={freeCharacters:{},...f.store.gameMenus.gameInPlay},e.openMenus=s)})},selectors:{selectHasError(n){return n.openMenus.some(e=>e.menuId==="errorCaught")},selectSaveForCampaign(n,e){return n.savedGames.saves[vo(e)]}}}),{assignInputStart:Zj,backToParentMenu:Jj,characterReachesFreedom:e4,characterRoomChange:t4,closeAllMenus:n4,crownCollected:i4,debugItemClicked:MO,doneAssigningInput:s4,errorCaught:r4,errorDismissed:a4,gameOver:o4,gameRestoreFromSave:l4,gameStarted:u4,goToSubmenu:c4,holdPressed:h4,inputAddedDuringAssignment:f4,keyAssignmentPresetChosen:d4,lostLife:p4,mapPressed:g4,menuOpenOrExitPressed:y4,nextDirectionRelativeTo:m4,nextInputDirectionMode:b4,reincarnationAccepted:v4,reincarnationFishEaten:_4,roomExplored:w4,saveGame:x4,scrollRead:S4,setEmulatedResolution:kO,setFocussedMenuItemId:A4,setGameSpeed:E4,setShowBoundingBoxes:T4,setShowShadowMasks:M4,toggleUserSetting:k4}=la.actions,{selectHasError:C4}=la.selectors;la.selectors.selectSaveForCampaign;la.actions;const St=n=>{const e=Gp.userSettings;return console.log("migrating state: persisted is:",n,"I am not migrating - reverting to initial/default state:",e),e},CO=pM({1:St,2:St,3:St,4:St,5:St,6:St,7:St,8:St,9:St,10:St,11:St,12:St,13:St,14:St,15:St,16:St,17:St}),RO=["userSettings","savedGames"],OO=17,PO={key:"hohol/gameMenus/userSettings",version:OO,migrate:CO,storage:vM,whitelist:RO},DO=oM(PO,la.reducer),BO={count:0},Pc=mi({name:"manualLoading",initialState:BO,reducers:{manualLoadingStarted(n){n.count++},manualLoadingFinished(n){n.count=Math.max(0,n.count-1)}},selectors:{selectManualLoadingCount(n){return n.count}}}),{manualLoadingStarted:R4,manualLoadingFinished:O4}=Pc.actions,{selectManualLoadingCount:P4}=Pc.selectors,zO=n=>vi()==="server"?zg.zxSpectrum.size:n?{x:n.clientWidth,y:n.clientHeight}:{x:window.innerWidth,y:window.innerHeight},aS=(n,e,t)=>{const s=vi();return{renderAreaSize:zO(t),emulatedResolutionName:n,devicePixelRatio:s==="server"?1:window.devicePixelRatio,maximumCanvasUpscale:e.crtFilter?6:8}},oS=({renderAreaSize:n,emulatedResolutionName:e,devicePixelRatio:t,deviceType:s=vi(),maximumCanvasUpscale:a})=>{const o=zg[e],{renderAreaSize:u,rotate90:h}=s!=="desktop"&&n.x<n.y?{renderAreaSize:{x:n.y,y:n.x},rotate90:!0}:{renderAreaSize:n,rotate90:!1},f=AM(u,t),d=Math.max(Math.floor(Math.min(f.x/o.size.x,f.y/o.size.y)),1),g=Math.min(a,d),m=d/g/t,b={x:Math.floor(f.x/d),y:Math.floor(f.y/d)},v={x:Math.ceil(u.x/m),y:Math.ceil(u.y/m)};return{gameEngineUpscale:g,cssUpscale:m,gameEngineScreenSize:b,canvasSize:v,rotate90:h}},jO={upscale:oS(aS(Oc.displaySettings.emulatedResolution,Oc.displaySettings))},sl=mi({name:"upscale",initialState:jO,reducers:{upscaleToWindow(n,{payload:e}){n.upscale=oS(e)}},selectors:{selectCanvasSize(n){return n.upscale.canvasSize},selectGameEngineUpscale(n){return n.upscale.gameEngineUpscale},selectGameEngineScreenSize(n){return n.upscale.gameEngineScreenSize},selectRot90(n){return n.upscale.rotate90},selectUpscale(n){return n.upscale},selectTotalUpscale({upscale:{cssUpscale:n,gameEngineUpscale:e}}){return n*e}}}),{upscaleToWindow:UO}=sl.actions,{selectCanvasSize:D4,selectRot90:B4,selectUpscale:z4,selectGameEngineUpscale:j4,selectTotalUpscale:U4,selectGameEngineScreenSize:L4}=sl.selectors;sl.actions;const lS=(n,e,t,s)=>{n(UO(aS(t??Yg(e()),e().gameMenus.userSettings.displaySettings,s)))},LO=()=>{vi()!=="server"&&vx({actionCreator:kO,effect(n,{dispatch:e,getState:t}){lS(e,t)}})},IO=()=>{vi()!=="server"&&vx({predicate(n,{gameMenus:{userSettings:{displaySettings:e}}},{gameMenus:{userSettings:{displaySettings:t}}}){return e!==t},effect(n,{dispatch:e,getState:t}){lS(e,t)}})},Hp=Y2({[la.reducerPath]:DO,[sl.reducerPath]:sl.reducer,[il.reducerPath]:il.reducer,[Pc.reducerPath]:Pc.reducer}).withLazyLoadedSlices(),NO=Hp.inject,qO=(n,e)=>e.type==="@@_RESET_FOR_TESTS"?Hp(void 0,e):Hp(n,e),Xc=f2({reducer:qO,middleware:n=>n({serializableCheck:{ignoredActions:[Eg,yl,Tg,Mg,kg,Cg,MO.type]}}).prepend(bx.middleware).concat(il.middleware)});typeof window<"u"&&(window._e2e_store=Xc);LO();IO();dM(Xc);var ge=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(ge||{});const $p=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ku=(n,e)=>$p(n).priority??e,Yt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map($p).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map($p).forEach(e=>{e.type.forEach(t=>{const s=this._addHandlers,a=this._queue;s[t]?s[t]?.(e):(a[t]=a[t]||[],a[t]?.push(e))})}),this},handle(n,e,t){const s=this._addHandlers,a=this._removeHandlers;if(s[n]||a[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=e,a[n]=t;const o=this._queue;return o[n]&&(o[n]?.forEach(u=>e(u)),delete o[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,s=>{e.findIndex(o=>o.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((o,u)=>Ku(u.value,t)-Ku(o.value,t)))},s=>{const a=e.findIndex(o=>o.name===s.name);a!==-1&&e.splice(a,1)})},handleByList(n,e,t=-1){return this.handle(n,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((a,o)=>Ku(o,t)-Ku(a,t)))},s=>{const a=e.indexOf(s.ref);a!==-1&&e.splice(a,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},GO={extension:{type:ge.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Yn(()=>import("./browserAll-DNstrC_7.js"),__vite__mapDeps([2,3,4,5]))}},HO={extension:{type:ge.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Yn(()=>import("./webworkerAll-B5BXJ_H3.js"),__vite__mapDeps([3,4,5]))}};class Pt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Pt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Gd={exports:{}},R_;function $O(){return R_||(R_=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function a(f,d,g){this.fn=f,this.context=d,this.once=g||!1}function o(f,d,g,m,b){if(typeof g!="function")throw new TypeError("The listener must be a function");var v=new a(g,m||f,b),w=t?t+d:d;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],v]:f._events[w].push(v):(f._events[w]=v,f._eventsCount++),f}function u(f,d){--f._eventsCount===0?f._events=new s:delete f._events[d]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],g,m;if(this._eventsCount===0)return d;for(m in g=this._events)e.call(g,m)&&d.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},h.prototype.listeners=function(d){var g=t?t+d:d,m=this._events[g];if(!m)return[];if(m.fn)return[m.fn];for(var b=0,v=m.length,w=new Array(v);b<v;b++)w[b]=m[b].fn;return w},h.prototype.listenerCount=function(d){var g=t?t+d:d,m=this._events[g];return m?m.fn?1:m.length:0},h.prototype.emit=function(d,g,m,b,v,w){var S=t?t+d:d;if(!this._events[S])return!1;var _=this._events[S],E=arguments.length,M,A;if(_.fn){switch(_.once&&this.removeListener(d,_.fn,void 0,!0),E){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,g),!0;case 3:return _.fn.call(_.context,g,m),!0;case 4:return _.fn.call(_.context,g,m,b),!0;case 5:return _.fn.call(_.context,g,m,b,v),!0;case 6:return _.fn.call(_.context,g,m,b,v,w),!0}for(A=1,M=new Array(E-1);A<E;A++)M[A-1]=arguments[A];_.fn.apply(_.context,M)}else{var T=_.length,R;for(A=0;A<T;A++)switch(_[A].once&&this.removeListener(d,_[A].fn,void 0,!0),E){case 1:_[A].fn.call(_[A].context);break;case 2:_[A].fn.call(_[A].context,g);break;case 3:_[A].fn.call(_[A].context,g,m);break;case 4:_[A].fn.call(_[A].context,g,m,b);break;default:if(!M)for(R=1,M=new Array(E-1);R<E;R++)M[R-1]=arguments[R];_[A].fn.apply(_[A].context,M)}}return!0},h.prototype.on=function(d,g,m){return o(this,d,g,m,!1)},h.prototype.once=function(d,g,m){return o(this,d,g,m,!0)},h.prototype.removeListener=function(d,g,m,b){var v=t?t+d:d;if(!this._events[v])return this;if(!g)return u(this,v),this;var w=this._events[v];if(w.fn)w.fn===g&&(!b||w.once)&&(!m||w.context===m)&&u(this,v);else{for(var S=0,_=[],E=w.length;S<E;S++)(w[S].fn!==g||b&&!w[S].once||m&&w[S].context!==m)&&_.push(w[S]);_.length?this._events[v]=_.length===1?_[0]:_:u(this,v)}return this},h.prototype.removeAllListeners=function(d){var g;return d?(g=t?t+d:d,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,n.exports=h})(Gd)),Gd.exports}var FO=$O();const Xn=Ai(FO),VO=Math.PI*2,YO=180/Math.PI,XO=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Hd.x=0,Hd.y=0,Hd}}const Hd=new Bt;class Me{constructor(e=1,t=0,s=0,a=1,o=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=a,this.tx=o,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,a,o,u){return this.a=e,this.b=t,this.c=s,this.d=a,this.tx=o,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Bt;const s=e.x,a=e.y;return t.x=this.a*s+this.c*a+this.tx,t.y=this.b*s+this.d*a+this.ty,t}applyInverse(e,t){t=t||new Bt;const s=this.a,a=this.b,o=this.c,u=this.d,h=this.tx,f=this.ty,d=1/(s*u+o*-a),g=e.x,m=e.y;return t.x=u*d*g+-o*d*m+(f*o-h*u)*d,t.y=s*d*m+-a*d*g+(-f*s+h*a)*d,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),a=this.a,o=this.c,u=this.tx;return this.a=a*t-this.b*s,this.b=a*s+this.b*t,this.c=o*t-this.d*s,this.d=o*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,a=this.c,o=this.d;return this.a=e.a*t+e.b*a,this.b=e.a*s+e.b*o,this.c=e.c*t+e.d*a,this.d=e.c*s+e.d*o,this.tx=e.tx*t+e.ty*a+this.tx,this.ty=e.tx*s+e.ty*o+this.ty,this}appendFrom(e,t){const s=e.a,a=e.b,o=e.c,u=e.d,h=e.tx,f=e.ty,d=t.a,g=t.b,m=t.c,b=t.d;return this.a=s*d+a*m,this.b=s*g+a*b,this.c=o*d+u*m,this.d=o*g+u*b,this.tx=h*d+f*m+t.tx,this.ty=h*g+f*b+t.ty,this}setTransform(e,t,s,a,o,u,h,f,d){return this.a=Math.cos(h+d)*o,this.b=Math.sin(h+d)*o,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(s*this.a+a*this.c),this.ty=t-(s*this.b+a*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,a=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=a*e.a+this.d*e.c,this.d=a*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,a=this.c,o=this.d,u=e.pivot,h=-Math.atan2(-a,o),f=Math.atan2(s,t),d=Math.abs(h+f);return d<1e-5||Math.abs(VO-d)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(a*a+o*o),e.position.x=this.tx+(u.x*t+u.y*a),e.position.y=this.ty+(u.x*s+u.y*o),e}invert(){const e=this.a,t=this.b,s=this.c,a=this.d,o=this.tx,u=e*a-t*s;return this.a=a/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-a*o)/u,this.ty=-(e*this.ty-t*o)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Me;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return QO.identity()}static get shared(){return WO.identity()}}const WO=new Me,QO=new Me,Ds=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Bs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],js=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Fp=[],uS=[],Zu=Math.sign;function KO(){for(let n=0;n<16;n++){const e=[];Fp.push(e);for(let t=0;t<16;t++){const s=Zu(Ds[n]*Ds[t]+zs[n]*Bs[t]),a=Zu(Bs[n]*Ds[t]+js[n]*Bs[t]),o=Zu(Ds[n]*zs[t]+zs[n]*js[t]),u=Zu(Bs[n]*zs[t]+js[n]*js[t]);for(let h=0;h<16;h++)if(Ds[h]===s&&Bs[h]===a&&zs[h]===o&&js[h]===u){e.push(h);break}}}for(let n=0;n<16;n++){const e=new Me;e.set(Ds[n],Bs[n],zs[n],js[n],0,0),uS.push(e)}}KO();const Le={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Ds[n],uY:n=>Bs[n],vX:n=>zs[n],vY:n=>js[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Fp[n][e],sub:(n,e)=>Fp[n][Le.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Le.S:Le.N:Math.abs(e)*2<=Math.abs(n)?n>0?Le.E:Le.W:e>0?n>0?Le.SE:Le.SW:n>0?Le.NE:Le.NW,matrixAppendRotationInv:(n,e,t=0,s=0)=>{const a=uS[Le.inv(e)];a.tx=t,a.ty=s,n.append(a)},transformRectCoords:(n,e,t,s)=>{const{x:a,y:o,width:u,height:h}=n,{x:f,y:d,width:g,height:m}=e;return t===Le.E?(s.set(a+f,o+d,u,h),s):t===Le.S?s.set(g-o-h+f,a+d,h,u):t===Le.W?s.set(g-a-u+f,m-o-h+d,u,h):t===Le.N?s.set(o+f,m-a-u+d,h,u):s.set(a+f,o+d,u,h)}},Ju=[new Bt,new Bt,new Bt,new Bt];class nt{constructor(e=0,t=0,s=0,a=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new nt(0,0,0,0)}clone(){return new nt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,a=.5){const{width:o,height:u}=this;if(o<=0||u<=0)return!1;const h=this.x,f=this.y,d=s*(1-a),g=s-d,m=h-d,b=h+o+d,v=f-d,w=f+u+d,S=h+g,_=h+o-g,E=f+g,M=f+u-g;return e>=m&&e<=b&&t>=v&&t<=w&&!(e>S&&e<_&&t>E&&t<M)}intersects(e,t){if(!t){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const z=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>z}const s=this.left,a=this.right,o=this.top,u=this.bottom;if(a<=s||u<=o)return!1;const h=Ju[0].set(e.left,e.top),f=Ju[1].set(e.left,e.bottom),d=Ju[2].set(e.right,e.top),g=Ju[3].set(e.right,e.bottom);if(d.x<=h.x||f.y<=h.y)return!1;const m=Math.sign(t.a*t.d-t.b*t.c);if(m===0||(t.apply(h,h),t.apply(f,f),t.apply(d,d),t.apply(g,g),Math.max(h.x,f.x,d.x,g.x)<=s||Math.min(h.x,f.x,d.x,g.x)>=a||Math.max(h.y,f.y,d.y,g.y)<=o||Math.min(h.y,f.y,d.y,g.y)>=u))return!1;const b=m*(f.y-h.y),v=m*(h.x-f.x),w=b*s+v*o,S=b*a+v*o,_=b*s+v*u,E=b*a+v*u;if(Math.max(w,S,_,E)<=b*h.x+v*h.y||Math.min(w,S,_,E)>=b*g.x+v*g.y)return!1;const M=m*(h.y-d.y),A=m*(d.x-h.x),T=M*s+A*o,R=M*a+A*o,O=M*s+A*u,C=M*a+A*u;return!(Math.max(T,R,O,C)<=M*h.x+A*h.y||Math.min(T,R,O,C)>=M*g.x+A*g.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),a=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=a,this.height=Math.max(o-a,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,a=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=a-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),a=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=a,this.height=o-a,this}getBounds(e){return e||(e=new nt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,a=e.x+e.width,o=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&a>=this.x&&a<this.x+this.width&&o>=this.y&&o<this.y+this.height}set(e,t,s,a){return this.x=e,this.y=t,this.width=s,this.height=a,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const $d={default:-1};function it(n="default"){return $d[n]===void 0&&($d[n]=-1),++$d[n]}const O_=new Set,Dt="8.0.0",ZO="8.3.4",Wr={quiet:!1,noColor:!1},$e=(n,e,t=3)=>{if(Wr.quiet||O_.has(e))return;let s=new Error().stack;const a=`${e}
Deprecated since v${n}`,o=typeof console.groupCollapsed=="function"&&!Wr.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",a):(s=s.split(`
`).splice(t).join(`
`),o?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a),console.warn(s))),O_.add(e)};Object.defineProperties($e,{quiet:{get:()=>Wr.quiet,set:n=>{Wr.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>Wr.noColor,set:n=>{Wr.noColor=n},enumerable:!0,configurable:!1}});const cS=()=>{};function Dc(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function P_(n){return!(n&n-1)&&!!n}function hS(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const D_=Object.create(null);function JO(n){const e=D_[n];return e===void 0&&(D_[n]=it("resource")),e}const fS=class dS extends Xn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...dS.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){$e(Dt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=JO(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};fS.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Bc=fS;const pS=class gS extends Xn{constructor(e={}){super(),this.options=e,this.uid=it("textureSource"),this._resourceType="textureSource",this._resourceId=it("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...gS.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Bc(hS(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=it("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const a=Math.round(e*s),o=Math.round(t*s);return this.width=a/s,this.height=o/s,this._resolution=s,this.pixelWidth===a&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=o,this.emit("resize",this),this._resourceId=it("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=P_(this.pixelWidth)&&P_(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};pS.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let zn=pS;class Xg extends zn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Xg.extension=ge.TextureSource;const B_=new Me;class eP{constructor(e,t){this.mapCoord=new Me,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let a=0;a<e.length;a+=2){const o=e[a],u=e[a+1];t[a]=o*s.a+u*s.c+s.tx,t[a+1]=o*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,a=e.trim;a&&(B_.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(B_));const o=e.source,u=this.uClampFrame,h=this.clampMargin/o._resolution,f=this.clampOffset/o._resolution;return u[0]=(e.frame.x+h+f)/o.width,u[1]=(e.frame.y+h+f)/o.height,u[2]=(e.frame.x+e.frame.width-h+f)/o.width,u[3]=(e.frame.y+e.frame.height-h+f)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=e.frame.width===o.width&&e.frame.height===o.height&&e.rotate===0,!0}}class Ce extends Xn{constructor({source:e,label:t,frame:s,orig:a,trim:o,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:d}={}){if(super(),this.uid=it("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new nt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new zn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:m}=this._source;this.frame.width=g,this.frame.height=m}this.orig=a||this.frame,this.trim=o,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new eP(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:a}=this._source,o=t.x/s,u=t.y/a,h=t.width/s,f=t.height/a;let d=this.rotate;if(d){const g=h/2,m=f/2,b=o+g,v=u+m;d=Le.add(d,Le.NW),e.x0=b+g*Le.uX(d),e.y0=v+m*Le.uY(d),d=Le.add(d,2),e.x1=b+g*Le.uX(d),e.y1=v+m*Le.uY(d),d=Le.add(d,2),e.x2=b+g*Le.uX(d),e.y2=v+m*Le.uY(d),d=Le.add(d,2),e.x3=b+g*Le.uX(d),e.y3=v+m*Le.uY(d)}else e.x0=o,e.y0=u,e.x1=o+h,e.y1=u,e.x2=o+h,e.y2=u+f,e.x3=o,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return $e(Dt,"Texture.baseTexture is now Texture.source"),this._source}}Ce.EMPTY=new Ce({label:"EMPTY",source:new zn({label:"EMPTY"})});Ce.EMPTY.destroy=cS;Ce.WHITE=new Ce({source:new Xg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ce.WHITE.destroy=cS;function tP(n,e,t){const{width:s,height:a}=t.orig,o=t.trim;if(o){const u=o.width,h=o.height;n.minX=o.x-e._x*s,n.maxX=n.minX+u,n.minY=o.y-e._y*a,n.maxY=n.minY+h}else n.minX=-e._x*s,n.maxX=n.minX+s,n.minY=-e._y*a,n.maxY=n.minY+a}const z_=new Me;class Bn{constructor(e=1/0,t=1/0,s=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=z_,this.minX=e,this.minY=t,this.maxX=s,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new nt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=z_,this}set(e,t,s,a){this.minX=e,this.minY=t,this.maxX=s,this.maxY=a}addFrame(e,t,s,a,o){o||(o=this.matrix);const u=o.a,h=o.b,f=o.c,d=o.d,g=o.tx,m=o.ty;let b=this.minX,v=this.minY,w=this.maxX,S=this.maxY,_=u*e+f*t+g,E=h*e+d*t+m;_<b&&(b=_),E<v&&(v=E),_>w&&(w=_),E>S&&(S=E),_=u*s+f*t+g,E=h*s+d*t+m,_<b&&(b=_),E<v&&(v=E),_>w&&(w=_),E>S&&(S=E),_=u*e+f*a+g,E=h*e+d*a+m,_<b&&(b=_),E<v&&(v=E),_>w&&(w=_),E>S&&(S=E),_=u*s+f*a+g,E=h*s+d*a+m,_<b&&(b=_),E<v&&(v=E),_>w&&(w=_),E>S&&(S=E),this.minX=b,this.minY=v,this.maxX=w,this.maxY=S}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,a=this.maxX,o=this.maxY,{a:u,b:h,c:f,d,tx:g,ty:m}=e;let b=u*t+f*s+g,v=h*t+d*s+m;this.minX=b,this.minY=v,this.maxX=b,this.maxY=v,b=u*a+f*s+g,v=h*a+d*s+m,this.minX=b<this.minX?b:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=v>this.maxY?v:this.maxY,b=u*t+f*o+g,v=h*t+d*o+m,this.minX=b<this.minX?b:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=v>this.maxY?v:this.maxY,b=u*a+f*o+g,v=h*a+d*o+m,this.minX=b<this.minX?b:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=b>this.maxX?b:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,a){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>a&&(this.maxY=a),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,a){let o=this.minX,u=this.minY,h=this.maxX,f=this.maxY;a||(a=this.matrix);const d=a.a,g=a.b,m=a.c,b=a.d,v=a.tx,w=a.ty;for(let S=t;S<s;S+=2){const _=e[S],E=e[S+1],M=d*_+m*E+v,A=g*_+b*E+w;o=M<o?M:o,u=A<u?A:u,h=M>h?M:h,f=A>f?A:f}this.minX=o,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var nP={grad:.9,turn:360,rad:360/(2*Math.PI)},pi=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},mt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},xn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},yS=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},j_=function(n){return{r:xn(n.r,0,255),g:xn(n.g,0,255),b:xn(n.b,0,255),a:xn(n.a)}},Fd=function(n){return{r:mt(n.r),g:mt(n.g),b:mt(n.b),a:mt(n.a,3)}},iP=/^#([0-9a-f]{3,8})$/i,ec=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},mS=function(n){var e=n.r,t=n.g,s=n.b,a=n.a,o=Math.max(e,t,s),u=o-Math.min(e,t,s),h=u?o===e?(t-s)/u:o===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:o?u/o*100:0,v:o/255*100,a}},bS=function(n){var e=n.h,t=n.s,s=n.v,a=n.a;e=e/360*6,t/=100,s/=100;var o=Math.floor(e),u=s*(1-t),h=s*(1-(e-o)*t),f=s*(1-(1-e+o)*t),d=o%6;return{r:255*[s,h,u,u,f,s][d],g:255*[f,s,s,h,u,u][d],b:255*[u,u,f,s,s,h][d],a}},U_=function(n){return{h:yS(n.h),s:xn(n.s,0,100),l:xn(n.l,0,100),a:xn(n.a)}},L_=function(n){return{h:mt(n.h),s:mt(n.s),l:mt(n.l),a:mt(n.a,3)}},I_=function(n){return bS((t=(e=n).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},$o=function(n){return{h:(e=mS(n)).h,s:(a=(200-(t=e.s))*(s=e.v)/100)>0&&a<200?t*s/100/(a<=100?a:200-a)*100:0,l:a/2,a:e.a};var e,t,s,a},sP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rP=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oP=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vp={string:[[function(n){var e=iP.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?mt(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?mt(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=aP.exec(n)||oP.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:j_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=sP.exec(n)||rP.exec(n);if(!e)return null;var t,s,a=U_({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(nP[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return I_(a)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,s=n.b,a=n.a,o=a===void 0?1:a;return pi(e)&&pi(t)&&pi(s)?j_({r:Number(e),g:Number(t),b:Number(s),a:Number(o)}):null},"rgb"],[function(n){var e=n.h,t=n.s,s=n.l,a=n.a,o=a===void 0?1:a;if(!pi(e)||!pi(t)||!pi(s))return null;var u=U_({h:Number(e),s:Number(t),l:Number(s),a:Number(o)});return I_(u)},"hsl"],[function(n){var e=n.h,t=n.s,s=n.v,a=n.a,o=a===void 0?1:a;if(!pi(e)||!pi(t)||!pi(s))return null;var u=(function(h){return{h:yS(h.h),s:xn(h.s,0,100),v:xn(h.v,0,100),a:xn(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(o)});return bS(u)},"hsv"]]},N_=function(n,e){for(var t=0;t<e.length;t++){var s=e[t][0](n);if(s)return[s,e[t][1]]}return[null,void 0]},lP=function(n){return typeof n=="string"?N_(n.trim(),Vp.string):typeof n=="object"&&n!==null?N_(n,Vp.object):[null,void 0]},Vd=function(n,e){var t=$o(n);return{h:t.h,s:xn(t.s+100*e,0,100),l:t.l,a:t.a}},Yd=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},q_=function(n,e){var t=$o(n);return{h:t.h,s:t.s,l:xn(t.l+100*e,0,100),a:t.a}},Yp=(function(){function n(e){this.parsed=lP(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return mt(Yd(this.rgba),2)},n.prototype.isDark=function(){return Yd(this.rgba)<.5},n.prototype.isLight=function(){return Yd(this.rgba)>=.5},n.prototype.toHex=function(){return e=Fd(this.rgba),t=e.r,s=e.g,a=e.b,u=(o=e.a)<1?ec(mt(255*o)):"","#"+ec(t)+ec(s)+ec(a)+u;var e,t,s,a,o,u},n.prototype.toRgb=function(){return Fd(this.rgba)},n.prototype.toRgbString=function(){return e=Fd(this.rgba),t=e.r,s=e.g,a=e.b,(o=e.a)<1?"rgba("+t+", "+s+", "+a+", "+o+")":"rgb("+t+", "+s+", "+a+")";var e,t,s,a,o},n.prototype.toHsl=function(){return L_($o(this.rgba))},n.prototype.toHslString=function(){return e=L_($o(this.rgba)),t=e.h,s=e.s,a=e.l,(o=e.a)<1?"hsla("+t+", "+s+"%, "+a+"%, "+o+")":"hsl("+t+", "+s+"%, "+a+"%)";var e,t,s,a,o},n.prototype.toHsv=function(){return e=mS(this.rgba),{h:mt(e.h),s:mt(e.s),v:mt(e.v),a:mt(e.a,3)};var e},n.prototype.invert=function(){return $n({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),$n(Vd(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),$n(Vd(this.rgba,-e))},n.prototype.grayscale=function(){return $n(Vd(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),$n(q_(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),$n(q_(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?$n({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):mt(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=$o(this.rgba);return typeof e=="number"?$n({h:e,s:t.s,l:t.l,a:t.a}):mt(t.h)},n.prototype.isEqual=function(e){return this.toHex()===$n(e).toHex()},n})(),$n=function(n){return n instanceof Yp?n:new Yp(n)},G_=[],uP=function(n){n.forEach(function(e){G_.indexOf(e)<0&&(e(Yp,Vp),G_.push(e))})};function cP(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var a in t)s[t[a]]=a;var o={};n.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,d=s[this.toHex()];if(d)return d;if(u?.closest){var g=this.toRgb(),m=1/0,b="black";if(!o.length)for(var v in t)o[v]=new n(t[v]).toRgb();for(var w in t){var S=(h=g,f=o[w],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));S<m&&(m=S,b=w)}return b}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new n(f).toRgb():null},"name"])}uP([cP]);const ia=class Ro{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ro)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((o,u)=>o===t[u]);if(e!==null&&t!==null){const o=Object.keys(e),u=Object.keys(t);return o.length!==u.length?!1:o.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,a]=this._components;return{r:e,g:t,b:s,a}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(a*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,a,o]=this._components;return e[0]=t,e[1]=s,e[2]=a,e[3]=o,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,a]=this._components;return e[0]=t,e[1]=s,e[2]=a,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,a,o]=Ro._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=a,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,a=this._int>>8&255,o=this._int&255;return t&&(s=s*e+.5|0,a=a*e+.5|0,o=o*e+.5|0),(e*255<<24)+(s<<16)+(a<<8)+o}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,a,o;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,a=(u&255)/255,o=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,a,o=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,a,o=255]=e,t/=255,s/=255,a/=255,o/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Ro.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=$n(e);u.isValid()&&({r:t,g:s,b:a,a:o}=u.rgba,t/=255,s/=255,a/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=a,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((a,o)=>{e[o]=Math.min(Math.max(a,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Ro||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};ia.shared=new ia;ia._temp=new ia;ia.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let zt=ia;const hP={cullArea:null,cullable:!1,cullableChildren:!0};let Xd=0;const H_=500;function Fe(...n){Xd!==H_&&(Xd++,Xd===H_?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Wc={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class fP{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class dP{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new fP(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Sn=new dP;Wc.register(Sn);const pP={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){$e("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function gP(n,e,t){const s=n.length;let a;if(e>=s||t===0)return;t=e+t>s?s-e:t;const o=s-t;for(a=e;a<o;++a)n[a]=n[a+t];n.length=o}const yP={allowChildren:!0,removeChildren(n=0,e){const t=e??this.children.length,s=t-n,a=[];if(s>0&&s<=t){for(let u=t-1;u>=n;u--){const h=this.children[u];h&&(a.push(h),h.parent=null)}gP(this.children,n,t);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(a);for(let u=0;u<a.length;++u){const h=a[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),a[u].emit("removed",this)}return a.length>0&&this._didViewChangeTick++,a}else if(s===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||$e(Dt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const a=n.parent.children.indexOf(n);if(n.parent===this&&a===e)return n;a!==-1&&n.parent.children.splice(a,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=n;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),n.setFromMatrix(t),n},replaceChild(n,e){n.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(n)),e.setFromMatrix(n.localTransform),e.updateLocalTransform(),this.removeChild(n)}},mP={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const s=this.children,a=s.length;for(let o=0;o<a;o++)s[o].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:s}=e;for(let a=0;a<this.effects.length;a++){const o=this.effects[a];s[o.pipe].push(o,this,n)}this.collectRenderablesSimple(n,e,t);for(let a=this.effects.length-1;a>=0;a--){const o=this.effects[a];s[o.pipe].pop(o,this,n)}}};class $_{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class bP{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return Sn.get(s.maskClass,e)}return e}returnMaskEffect(e){Sn.return(e)}}const Xp=new bP;Yt.handleByList(ge.MaskEffect,Xp._effectClasses);const vP={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;e?.mask!==n&&(e&&(this.removeEffect(e),Xp.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=Xp.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new $_);n=n;const t=n?.length>0,s=e.filters?.length>0,a=t!==s;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),a&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){return this._filterEffect?.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new $_),this._filterEffect.filterArea=n},get filterArea(){return this._filterEffect?.filterArea}},_P={label:null,get name(){return $e(Dt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){$e(Dt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const a=t[s];if(a.label===n||n instanceof RegExp&&n.test(a.label))return a}if(e)for(let s=0;s<t.length;s++){const o=t[s].getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel(n,e=!1,t=[]){const s=this.children;for(let a=0;a<s.length;a++){const o=s[a];(o.label===n||n instanceof RegExp&&n.test(o.label))&&t.push(o)}if(e)for(let a=0;a<s.length;a++)s[a].getChildrenByLabel(n,!0,t);return t}},It=Sn.getPool(Me),_i=Sn.getPool(Bn),wP=new Me,xP={getFastGlobalBounds(n,e){e||(e=new Bn),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let s=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(s=_i.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const o=this.children;for(let u=0;u<o.length;u++)o[u]._getGlobalBoundsRecursive(n,s,t)}if(a){let o=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(o||(o=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));o&&s.applyMatrix(u.worldTransform.copyTo(wP).invert()),e.addBounds(s),_i.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),_i.return(s))}};function vS(n,e,t){t.clear();let s,a;return n.parent?e?s=n.parent.worldTransform:(a=It.get().identity(),s=Wg(n,a)):s=Me.IDENTITY,_S(n,t,s,e),a&&It.return(a),t.isValid||t.set(0,0,0,0),t}function _S(n,e,t,s){if(!n.visible||!n.measurable)return;let a;s?a=n.worldTransform:(n.updateLocalTransform(),a=It.get(),a.appendFrom(n.localTransform,t));const o=e,u=!!n.effects.length;if(u&&(e=_i.get().clear()),n.boundsArea)e.addRect(n.boundsArea,a);else{const h=n.bounds;h&&!h.isEmpty()&&(e.matrix=a,e.addBounds(h));for(let f=0;f<n.children.length;f++)_S(n.children[f],e,a,s)}if(u){for(let h=0;h<n.effects.length;h++)n.effects[h].addBounds?.(e);o.addBounds(e,Me.IDENTITY),_i.return(e)}s||It.return(a)}function Wg(n,e){const t=n.parent;return t&&(Wg(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function wS(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,s=n>>8&255,a=n&255,o=e>>16&255,u=e>>8&255,h=e&255,f=t*o/255|0,d=s*u/255|0,g=a*h/255|0;return(f<<16)+(d<<8)+g}const F_=16777215;function V_(n,e){return n===F_?e:e===F_?n:wS(n,e)}function gc(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const SP={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n=new Me,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Wg(this,It.get().identity());return n.appendFrom(this.localTransform,t),It.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?gc(this.renderGroup.worldColor):this.parentRenderGroup?gc(V_(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=V_(e,t.localColor),t=t.parent;return gc(e)}};function xS(n,e,t){return e.clear(),t||(t=Me.IDENTITY),SS(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function SS(n,e,t,s,a){let o;if(a)o=It.get(),o=t.copyTo(o);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const f=n.localTransform;o=It.get(),o.appendFrom(f,t)}const u=e,h=!!n.effects.length;if(h&&(e=_i.get().clear()),n.boundsArea)e.addRect(n.boundsArea,o);else{n.renderPipeId&&(e.matrix=o,e.addBounds(n.bounds));const f=n.children;for(let d=0;d<f.length;d++)SS(f[d],e,o,s,!1)}if(h){for(let f=0;f<n.effects.length;f++)n.effects[f].addLocalBounds?.(e,s);u.addBounds(e,Me.IDENTITY),_i.return(e)}It.return(o)}function AS(n,e){const t=n.children;for(let s=0;s<t.length;s++){const a=t[s],o=a.uid,u=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,h=e.index;(e.data[h]!==o||e.data[h+1]!==u)&&(e.data[e.index]=o,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,a.children.length&&AS(a,e)}return e.didChange}const AP=new Me,EP={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),AS(this,n),n.didChange&&xS(this,n.localBounds,AP),n.localBounds},getBounds(n,e){return vS(this,n,e||new Bn)}},TP={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},MP={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(kP))}};function kP(n,e){return n._zIndex-e._zIndex}const CP={getGlobalPosition(n=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const s=this.getGlobalTransform(It.get(),t);return e=s.apply(n,e),It.return(s),e},toLocal(n,e,t,s){e&&(n=e.toGlobal(n,t,s));const a=this.getGlobalTransform(It.get(),s);return t=a.applyInverse(n,t),It.return(a),t}};class ES{constructor(){this.uid=it("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let RP=0;class OP{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Bc(this.textureOptions)}createTexture(e,t,s){const a=new zn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ce({source:a,label:`texturePool_${RP++}`})}getOptimalTexture(e,t,s=1,a){let o=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);o=Dc(o),u=Dc(u);const h=(o<<17)+(u<<1)+(a?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(o,u,a)),f.source._resolution=s,f.source.width=o/s,f.source.height=u/s,f.source.pixelWidth=o,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let a=0;a<s.length;a++)s[a].destroy(!0)}this._texturePool={}}}const TS=new OP;Wc.register(TS);class PP{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Me,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new ES,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const a=t[s];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(TS.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let a=0;a<s.length;a++)this._getChildren(s[a],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Me),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Me),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Me),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function DP(n,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(n[s]=e[s])}const Wd=new Pt(null),tc=new Pt(null),Qd=new Pt(null,1,1),nc=new Pt(null),Y_=1,BP=2,Kd=4;class bl extends Xn{constructor(e={}){super(),this.uid=it("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Me,this.relativeGroupTransform=new Me,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Pt(this,0,0),this._scale=Qd,this._pivot=tc,this._origin=nc,this._skew=Wd,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],DP(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){$e("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Yt.mixin(bl,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||$e(Dt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let a=0;a<e.length;a++)this.addChild(e[a]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let a=0;a<e.length;a++)this.removeChild(e[a]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=Sn.get(PP,this),this.groupTransform=Me.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),Sn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Me),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*YO}set angle(e){this.rotation=e*XO}get pivot(){return this._pivot===tc&&(this._pivot=new Pt(this,0,0)),this._pivot}set pivot(e){this._pivot===tc&&(this._pivot=new Pt(this,0,0),this._origin!==nc&&Fe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Wd&&(this._skew=new Pt(this,0,0)),this._skew}set skew(e){this._skew===Wd&&(this._skew=new Pt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Qd&&(this._scale=new Pt(this,1,1)),this._scale}set scale(e){this._scale===Qd&&(this._scale=new Pt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===nc&&(this._origin=new Pt(this,0,0)),this._origin}set origin(e){this._origin===nc&&(this._origin=new Pt(this,0,0),this._pivot!==tc&&Fe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,a=this._pivot,o=this._origin,u=this._position,h=s._x,f=s._y,d=a._x,g=a._y,m=-o._x,b=-o._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*f,t.d=this._sy*f,t.tx=u._x-(d*t.a+g*t.c)+(m*t.a+b*t.c)-m,t.ty=u._y-(d*t.b+g*t.d)+(m*t.b+b*t.d)-b}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Y_,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=zt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Y_,this._onUpdate())}get tint(){return gc(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=BP,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Kd,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Kd,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Kd,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let a=0;a<t.length;++a)t[a].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}Yt.mixin(bl,yP,xP,CP,TP,EP,vP,_P,MP,hP,pP,SP,mP);class zP extends bl{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Bn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:a}=e;return s>=t.minX&&s<=t.maxX&&a>=t.minY&&a<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null;for(const t in this._gpuData)this._gpuData[t].destroy?.();this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:a}=t;a.blendMode.pushBlendMode(this,this.groupBlendMode,e),a[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let f=0;f<h;f++)u[f].collectRenderables(e,t,s);a.blendMode.popBlendMode(e)}}class rl extends zP{constructor(e=Ce.EMPTY){e instanceof Ce&&(e={texture:e});const{texture:t=Ce.EMPTY,anchor:s,roundPixels:a,width:o,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Pt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=a??!1,o!==void 0&&(this.width=o),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Ce?new rl(e):new rl(Ce.from(e,t))}set texture(e){e||(e=Ce.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return tP(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return $e("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:a,height:o}=t.orig;s.minX=-e._x*a,s.maxX=s.minX+a,s.minY=-e._y*o,s.maxY=s.minY+o}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const jP=new Bn;function MS(n,e,t){const s=jP;n.measurable=!0,vS(n,t,s),e.addBoundsMask(s),n.measurable=!1}function kS(n,e,t){const s=_i.get();n.measurable=!0;const a=It.get().identity(),o=CS(n,t,a);xS(n,s,o),n.measurable=!1,e.addBoundsMask(s),It.return(a),_i.return(s)}function CS(n,e,t){return n?(n!==e&&(CS(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(Fe("Mask bounds, renderable is not inside the root container"),t)}class RS{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof rl),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||MS(this.mask,e,t)}addLocalBounds(e,t){kS(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof rl}}RS.extension=ge.MaskEffect;class OS{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}OS.extension=ge.MaskEffect;class PS{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){MS(this.mask,e,t)}addLocalBounds(e,t){kS(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof bl}}PS.extension=ge.MaskEffect;const UP={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let X_=UP;const et={get(){return X_},set(n){X_=n}};class DS extends zn{constructor(e){e.resource||(e.resource=et.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const a=super.resize(e,t,s);return a&&this.resizeCanvas(),a}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}DS.extension=ge.TextureSource;class Fs extends zn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Fs.extension=ge.TextureSource;var Wp=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Wp||{});class Zd{constructor(e,t=null,s=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=a}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const BS=class sn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zd(null,null,1/0),this.deltaMS=1/sn.targetFPMS,this.elapsedMS=1/sn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Wp.NORMAL){return this._addListener(new Zd(e,t,s))}addOnce(e,t,s=Wp.NORMAL){return this._addListener(new Zd(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const o=e-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=e-o%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*sn.targetFPMS;const s=this._head;let a=s.next;for(;a;)a=a.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,sn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!sn._shared){const e=sn._shared=new sn;e.autoStart=!0,e._protected=!0}return sn._shared}static get system(){if(!sn._system){const e=sn._system=new sn;e.autoStart=!0,e._protected=!0}return sn._system}};BS.targetFPMS=.06;let ic=BS,Jd;async function zS(){return Jd??(Jd=(async()=>{const e=et.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const o=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,o),e.deleteFramebuffer(a),e.deleteTexture(s),e.getExtension("WEBGL_lose_context")?.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Jd}const Qc=class jS extends zn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...jS.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=ic.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await zS(),this._load=new Promise((s,a)=>{this.isValid?s(this):(this._resolve=s,this._reject=a,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ic.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ic.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ic.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Qc.extension=ge.TextureSource;Qc.defaultOptions={...zn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Qc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Fo=Qc;const Pn=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(s=>typeof s=="string"||t?e(s):s):n);class LP{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Fe(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Pn(e);let a;for(let f=0;f<this.parsers.length;f++){const d=this.parsers[f];if(d.test(t)){a=d.getCacheableAssets(s,t);break}}const o=new Map(Object.entries(a||{}));a||s.forEach(f=>{o.set(f,t)});const u=[...o.keys()],h={cacheKeys:u,keys:s};s.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const d=a?a[f]:t;this._cache.has(f)&&this._cache.get(f)!==d&&Fe("[Cache] already has key:",f),this._cache.set(f,o.get(f))})}remove(e){if(!this._cacheMap.has(e)){Fe(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(a=>{this._cache.delete(a)}),t.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const He=new LP,Qp=[];Yt.handleByList(ge.TextureSource,Qp);function US(n={}){const e=n&&n.resource,t=e?n.resource:n,s=e?n:{resource:n};for(let a=0;a<Qp.length;a++){const o=Qp[a];if(o.test(t))return new o(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function IP(n={},e=!1){const t=n&&n.resource,s=t?n.resource:n,a=t?n:{resource:n};if(!e&&He.has(s))return He.get(s);const o=new Ce({source:US(a)});return o.on("destroy",()=>{He.has(s)&&He.remove(s)}),e||He.set(s,o),o}function NP(n,e=!1){return typeof n=="string"?He.get(n):n instanceof zn?new Ce({source:n}):IP(n,e)}Ce.from=NP;zn.from=US;Yt.add(RS,OS,PS,Fo,Fs,DS,Xg);var ss=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(ss||{});function kn(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function _o(n){return n.split("?")[0].split("#")[0]}function qP(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function GP(n,e,t){return n.replace(new RegExp(qP(e),"g"),t)}function HP(n,e){let t="",s=0,a=-1,o=0,u=-1;for(let h=0;h<=n.length;++h){if(h<n.length)u=n.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(a===h-1||o===1))if(a!==h-1&&o===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",s=0):(t=t.slice(0,f),s=t.length-1-t.lastIndexOf("/")),a=h,o=0;continue}}else if(t.length===2||t.length===1){t="",s=0,a=h,o=0;continue}}}else t.length>0?t+=`/${n.slice(a+1,h)}`:t=n.slice(a+1,h),s=h-a-1;a=h,o=0}else u===46&&o!==-1?++o:o=-1}return t}const rn={toPosix(n){return GP(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){kn(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(kn(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=_o(this.toPosix(e??et.get().getBaseUrl())),a=_o(this.toPosix(t??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?rn.join(a,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(kn(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const s=n.endsWith("/");return n=HP(n),n.length>0&&s&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return kn(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const s=n[t];if(kn(s),s.length>0)if(e===void 0)e=s;else{const a=n[t-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(kn(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let s=-1,a=!0;const o=this.getProtocol(n),u=n;n=n.slice(o.length);for(let h=n.length-1;h>=1;--h)if(e=n.charCodeAt(h),e===47){if(!a){s=h;break}}else a=!1;return s===-1?t?"/":this.isUrl(u)?o+n:o:t&&s===1?"//":o+n.slice(0,s)},rootname(n){kn(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){kn(n),e&&kn(e),n=_o(this.toPosix(n));let t=0,s=-1,a=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let u=e.length-1,h=-1;for(o=n.length-1;o>=0;--o){const f=n.charCodeAt(o);if(f===47){if(!a){t=o+1;break}}else h===-1&&(a=!1,h=o+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(s=o):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=n.length),n.slice(t,s)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!a){t=o+1;break}}else s===-1&&(a=!1,s=o+1);return s===-1?"":n.slice(t,s)},extname(n){kn(n),n=_o(this.toPosix(n));let e=-1,t=0,s=-1,a=!0,o=0;for(let u=n.length-1;u>=0;--u){const h=n.charCodeAt(u);if(h===47){if(!a){t=u+1;break}continue}s===-1&&(a=!1,s=u+1),h===46?e===-1?e=u:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||s===-1||o===0||o===1&&e===s-1&&e===t+1?"":n.slice(e,s)},parse(n){kn(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=_o(this.toPosix(n));let t=n.charCodeAt(0);const s=this.isAbsolute(n);let a;e.root=this.rootname(n),s||this.hasProtocol(n)?a=1:a=0;let o=-1,u=0,h=-1,f=!0,d=n.length-1,g=0;for(;d>=a;--d){if(t=n.charCodeAt(d),t===47){if(!f){u=d+1;break}continue}h===-1&&(f=!1,h=d+1),t===46?o===-1?o=d:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||h===-1||g===0||g===1&&o===h-1&&o===u+1?h!==-1&&(u===0&&s?e.base=e.name=n.slice(1,h):e.base=e.name=n.slice(u,h)):(u===0&&s?(e.name=n.slice(1,o),e.base=n.slice(1,h)):(e.name=n.slice(u,o),e.base=n.slice(u,h)),e.ext=n.slice(o,h)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function LS(n,e,t,s,a){const o=e[t];for(let u=0;u<o.length;u++){const h=o[u];t<e.length-1?LS(n.replace(s[t],h),e,t+1,s,a):a.push(n.replace(s[t],h))}}function $P(n){const e=/\{(.*?)\}/g,t=n.match(e),s=[];if(t){const a=[];t.forEach(o=>{const u=o.substring(1,o.length-1).split(",");a.push(u)}),LS(n,a,0,t,s)}else s.push(n);return s}const zc=n=>!Array.isArray(n);class ua{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Pn(t||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(u=>u?.src??u):o?.src?o.src:o,!0)}addManifest(e){this._manifest&&Fe("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let a=t;Array.isArray(t)||(a=Object.entries(t).map(([o,u])=>typeof u=="string"||Array.isArray(u)?{alias:o,src:u}:{alias:o,...u})),a.forEach(o=>{const u=o.src,h=o.alias;let f;if(typeof h=="string"){const d=this._createBundleAssetId(e,h);s.push(d),f=[h,d]}else{const d=h.map(g=>this._createBundleAssetId(e,g));s.push(...d),f=[...h,...d]}this.add({...o,alias:f,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=o=>{this.hasKey(o)&&Fe(`[Resolver] already has key: ${o} overwriting`)},Pn(t).forEach(o=>{const{src:u}=o;let{data:h,format:f,loadParser:d,parser:g}=o;const m=Pn(u).map(S=>typeof S=="string"?$P(S):Array.isArray(S)?S:[S]),b=this.getAlias(o);Array.isArray(b)?b.forEach(s):s(b);const v=[],w=S=>({...this._parsers.find(E=>E.test(S))?.parse(S),src:S});m.forEach(S=>{S.forEach(_=>{let E={};if(typeof _!="object"?E=w(_):(h=_.data??h,f=_.format??f,(_.loadParser||_.parser)&&(d=_.loadParser??d,g=_.parser??g),E={...w(_.src),..._}),!b)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this._buildResolvedAsset(E,{aliases:b,data:h,format:f,loadParser:d,parser:g,progressSize:o.progressSize}),v.push(E)})}),b.forEach(S=>{this._assetMap[S]=v})})}resolveBundle(e){const t=zc(e);e=Pn(e);const s={};return e.forEach(a=>{const o=this._bundles[a];if(o){const u=this.resolve(o),h={};for(const f in u){const d=u[f];h[this._extractAssetIdFromBundle(a,f)]=d}s[a]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const a in t)s[a]=t[a].src;return s}return t.src}resolve(e){const t=zc(e);e=Pn(e);const s={};return e.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let o=this._assetMap[a];const u=this._getPreferredOrder(o);u?.priority.forEach(h=>{u.params[h].forEach(f=>{const d=o.filter(g=>g[h]?g[h]===f:!1);d.length&&(o=d)})}),this._resolverHash[a]=o[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});s[a]=this._resolverHash[a]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],a=this._preferredOrder.find(o=>o.params.format.includes(s.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:a,loadParser:o,parser:u,format:h,progressSize:f}=t;return(this._basePath||this._rootPath)&&(e.src=rn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...a||{},...e.data},e.loadParser=o??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??FP(e.src),f!==void 0&&(e.progressSize=f),e}}ua.RETINA_PREFIX=/@([0-9\.]+)x/;function FP(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Kp=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},IS=class Oo{constructor(e,t){this.linkedSheets=[];let s=e;e?.source instanceof zn&&(s={texture:e,data:t});const{texture:a,data:o,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=a instanceof Ce?a:null,this.textureSource=a.source,this.textures={},this.animations={},this.data=o;const h=parseFloat(o.meta.scale);h?(this.resolution=h,a.source.resolution=this.resolution):this.resolution=a.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Oo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=Oo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const a=this._frameKeys[t],o=this._frames[a],u=o.frame;if(u){let h=null,f=null;const d=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new nt(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);o.rotated?h=new nt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new nt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(f=new nt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[a]=new Ce({source:this.textureSource,frame:h,orig:g,trim:f,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:a.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const a=e[t][s];this.animations[t].push(this.textures[a])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Oo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Oo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};IS.BATCH_SIZE=1e3;let Zp=IS;const VP=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function NS(n,e,t){const s={};if(n.forEach(a=>{s[a]=e}),Object.keys(e.textures).forEach(a=>{s[`${e.cachePrefix}${a}`]=e.textures[a]}),!t){const a=rn.dirname(n[0]);e.linkedSheets.forEach((o,u)=>{const h=NS([`${a}/${e.data.meta.related_multi_packs[u]}`],o,!0);Object.assign(s,h)})}return s}const YP={extension:ge.Asset,cache:{test:n=>n instanceof Zp,getCacheableAssets:(n,e)=>NS(n,e,!1)},resolver:{extension:{type:ge.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),s=t.pop(),a=t.pop();return s==="json"&&VP.includes(a)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(ua.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ge.LoadParser,priority:ss.Normal,name:"spritesheetLoader"},async testParse(n,e){return rn.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){const{texture:s,imageFilename:a,textureOptions:o,cachePrefix:u}=e?.data??{};let h=rn.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(s instanceof Ce)f=s;else{const m=Kp(h+(a??n.meta.image),e.src);f=(await t.load([{src:m,data:o}]))[m]}const d=new Zp({texture:f.source,data:n,cachePrefix:u});await d.parse();const g=n?.meta?.related_multi_packs;if(Array.isArray(g)){const m=[];for(const v of g){if(typeof v!="string")continue;let w=h+v;e.data?.ignoreMultiPack||(w=Kp(w,e.src),m.push(t.load({src:w,data:{textureOptions:o,ignoreMultiPack:!0}})))}const b=await Promise.all(m);d.linkedSheets=b,b.forEach(v=>{v.linkedSheets=[d].concat(d.linkedSheets.filter(w=>w!==v))})}return d},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Yt.add(YP);const ep=Object.create(null),W_=Object.create(null);function Qg(n,e){let t=W_[n];return t===void 0&&(ep[e]===void 0&&(ep[e]=1),W_[n]=t=ep[e]++),t}let sc;function qS(){return(!sc||sc?.isContextLost())&&(sc=et.get().createCanvas().getContext("webgl",{})),sc}let rc;function XP(){if(!rc){rc="mediump";const n=qS();n&&n.getShaderPrecisionFormat&&(rc=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return rc}function WP(n,e,t){return e?n:t?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function QP(n,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let a=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return a==="highp"&&s!=="highp"&&(a="mediump"),`precision ${a} float;
${n}`}else if(s!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function KP(n,e){return e?`#version 300 es
${n}`:n}const ZP={},JP={};function eD(n,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?ZP:JP;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function tD(n,e){return e?n.replace("#version 300 es",""):n}const tp={stripVersion:tD,ensurePrecision:QP,addProgramDefines:WP,setProgramName:eD,insertVersion:KP},wo=Object.create(null),GS=class Jp{constructor(e){e={...Jp.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:XP()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let a=e.fragment,o=e.vertex;Object.keys(tp).forEach(u=>{const h=s[u];a=tp[u](a,h,!0),o=tp[u](o,h,!1)}),this.fragment=a,this.vertex=o,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Qg(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,wo[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return wo[t]||(wo[t]=new Jp(e),wo[t]._cacheKey=t),wo[t]}};GS.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let HS=GS;const Q_={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function nD(n){return Q_[n]??Q_.float32}const iD={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function sD({source:n,entryPoint:e}){const t={},s=n.indexOf(`fn ${e}`);if(s!==-1){const a=n.indexOf("->",s);if(a!==-1){const o=n.substring(s,a),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(o))!==null;){const f=iD[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:nD(f).stride,offset:0,instance:!1,start:0}}}}return t}function np(n){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,d=n.match(e)?.map(m=>({group:parseInt(m.match(t)[1],10),binding:parseInt(m.match(s)[1],10),name:m.match(a)[2],isUniform:m.match(a)[1]==="<uniform>",type:m.match(o)[1]}));if(!d)return{groups:[],structs:[]};const g=n.match(u)?.map(m=>{const b=m.match(f)[1],v=m.match(h).reduce((w,S)=>{const[_,E]=S.split(":");return w[_.trim()]=E.trim(),w},{});return v?{name:b,members:v}:null}).filter(({name:m})=>d.some(b=>b.type===m))??[];return{groups:d,structs:g}}var Po=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Po||{});function rD({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:Po.VERTEX|Po.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:Po.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:Po.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function aD({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function oD(n,e){const t=new Set,s=new Set,a=[...n.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),o=[...n.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:a,groups:o}}const xo=Object.create(null);class Kc{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:a,gpuLayout:o,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const h=np(t.source);this.structsAndGroups=h}else{const h=np(s.source),f=np(t.source);this.structsAndGroups=oD(h,f)}this.layout=a??aD(this.structsAndGroups),this.gpuLayout=o??rD(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Qg(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=sD(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,xo[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return xo[t]||(xo[t]=new Kc(e),xo[t]._cacheKey=t),xo[t]}}const $S=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],lD=$S.reduce((n,e)=>(n[e]=!0,n),{});function uD(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const FS=class VS{constructor(e,t){this._touched=0,this.uid=it("uniform"),this._resourceType="uniformGroup",this._resourceId=it("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...VS.defaultOptions,...t},this.uniformStructures=e;const s={};for(const a in e){const o=e[a];if(o.name=a,o.size=o.size??1,!lD[o.type]){const u=o.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${o.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${$S.join(", ")}`)}o.value??(o.value=uD(o.type,o.size)),s[a]=o.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Qg(Object.keys(s).map(a=>`${a}-${e[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};FS.defaultOptions={ubo:!1,isStatic:!1};let YS=FS;class yc{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const a=e[s];this.setResource(a,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){const s=this.resources[t];e!==s&&(s&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){const e=this.resources;for(const t in e)e[t]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var eg=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(eg||{});class Kg extends Xn{constructor(e){super(),this.uid=it("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:a,resources:o,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=eg.WEBGPU),s&&(u|=eg.WEBGL)),this.compatibleRenderers=u;const f={};if(!o&&!a&&(o={}),o&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&a&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&a&&h)for(const d in h)for(const g in h[d]){const m=h[d][g];f[m]={group:d,binding:g,name:m}}else if(t&&a&&!h){const d=t.structsAndGroups.groups;h={},d.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g})}else if(o){a={},h={},t&&t.structsAndGroups.groups.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,f[m.name]=m});let d=0;for(const g in o)f[g]||(a[99]||(a[99]=new yc,this._ownedBindGroups.push(a[99])),f[g]={group:99,binding:d,name:g},h[99]=h[99]||{},h[99][d]=g,d++);for(const g in o){const m=g;let b=o[g];!b.source&&!b._resourceType&&(b=new YS(b));const v=f[m];v&&(a[v.group]||(a[v.group]=new yc,this._ownedBindGroups.push(a[v.group])),a[v.group].setResource(b,v.binding))}}this.groups=a,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(a,f)}addResource(e,t,s){var a,o;(a=this._uniformBindMap)[t]||(a[t]={}),(o=this._uniformBindMap[t])[s]||(o[s]=e),this.groups[t]||(this.groups[t]=new yc,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const a in t){const o=t[a];Object.defineProperty(s,o.name,{get(){return e[o.group].getResource(o.binding)},set(u){e[o.group].setResource(u,o.binding)}})}return s}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...a}=e;let o,u;return t&&(o=Kc.from(t)),s&&(u=HS.from(s)),new Kg({gpuProgram:o,glProgram:u,...a})}}function K_(n,e,t=2){const s=e&&e.length,a=s?e[0]*t:n.length;let o=XS(n,0,a,t,!0);const u=[];if(!o||o.next===o.prev)return u;let h,f,d;if(s&&(o=pD(n,e,o,t)),n.length>80*t){h=n[0],f=n[1];let g=h,m=f;for(let b=t;b<a;b+=t){const v=n[b],w=n[b+1];v<h&&(h=v),w<f&&(f=w),v>g&&(g=v),w>m&&(m=w)}d=Math.max(g-h,m-f),d=d!==0?32767/d:0}return al(o,u,t,h,f,d,0),u}function XS(n,e,t,s,a){let o;if(a===ED(n,e,t,s)>0)for(let u=e;u<t;u+=s)o=Z_(u/s|0,n[u],n[u+1],o);else for(let u=t-s;u>=e;u-=s)o=Z_(u/s|0,n[u],n[u+1],o);return o&&sa(o,o.next)&&(ll(o),o=o.next),o}function Vs(n,e){if(!n)return n;e||(e=n);let t=n,s;do if(s=!1,!t.steiner&&(sa(t,t.next)||We(t.prev,t,t.next)===0)){if(ll(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function al(n,e,t,s,a,o,u){if(!n)return;!u&&o&&vD(n,s,a,o);let h=n;for(;n.prev!==n.next;){const f=n.prev,d=n.next;if(o?hD(n,s,a,o):cD(n)){e.push(f.i,n.i,d.i),ll(n),n=d.next,h=d.next;continue}if(n=d,n===h){u?u===1?(n=fD(Vs(n),e),al(n,e,t,s,a,o,2)):u===2&&dD(n,e,t,s,a,o):al(Vs(n),e,t,s,a,o,1);break}}}function cD(n){const e=n.prev,t=n,s=n.next;if(We(e,t,s)>=0)return!1;const a=e.x,o=t.x,u=s.x,h=e.y,f=t.y,d=s.y,g=Math.min(a,o,u),m=Math.min(h,f,d),b=Math.max(a,o,u),v=Math.max(h,f,d);let w=s.next;for(;w!==e;){if(w.x>=g&&w.x<=b&&w.y>=m&&w.y<=v&&Do(a,h,o,f,u,d,w.x,w.y)&&We(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function hD(n,e,t,s){const a=n.prev,o=n,u=n.next;if(We(a,o,u)>=0)return!1;const h=a.x,f=o.x,d=u.x,g=a.y,m=o.y,b=u.y,v=Math.min(h,f,d),w=Math.min(g,m,b),S=Math.max(h,f,d),_=Math.max(g,m,b),E=tg(v,w,e,t,s),M=tg(S,_,e,t,s);let A=n.prevZ,T=n.nextZ;for(;A&&A.z>=E&&T&&T.z<=M;){if(A.x>=v&&A.x<=S&&A.y>=w&&A.y<=_&&A!==a&&A!==u&&Do(h,g,f,m,d,b,A.x,A.y)&&We(A.prev,A,A.next)>=0||(A=A.prevZ,T.x>=v&&T.x<=S&&T.y>=w&&T.y<=_&&T!==a&&T!==u&&Do(h,g,f,m,d,b,T.x,T.y)&&We(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;A&&A.z>=E;){if(A.x>=v&&A.x<=S&&A.y>=w&&A.y<=_&&A!==a&&A!==u&&Do(h,g,f,m,d,b,A.x,A.y)&&We(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;T&&T.z<=M;){if(T.x>=v&&T.x<=S&&T.y>=w&&T.y<=_&&T!==a&&T!==u&&Do(h,g,f,m,d,b,T.x,T.y)&&We(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function fD(n,e){let t=n;do{const s=t.prev,a=t.next.next;!sa(s,a)&&QS(s,t,t.next,a)&&ol(s,a)&&ol(a,s)&&(e.push(s.i,t.i,a.i),ll(t),ll(t.next),t=n=a),t=t.next}while(t!==n);return Vs(t)}function dD(n,e,t,s,a,o){let u=n;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&xD(u,h)){let f=KS(u,h);u=Vs(u,u.next),f=Vs(f,f.next),al(u,e,t,s,a,o,0),al(f,e,t,s,a,o,0);return}h=h.next}u=u.next}while(u!==n)}function pD(n,e,t,s){const a=[];for(let o=0,u=e.length;o<u;o++){const h=e[o]*s,f=o<u-1?e[o+1]*s:n.length,d=XS(n,h,f,s,!1);d===d.next&&(d.steiner=!0),a.push(wD(d))}a.sort(gD);for(let o=0;o<a.length;o++)t=yD(a[o],t);return t}function gD(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const s=(n.next.y-n.y)/(n.next.x-n.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=s-a}return t}function yD(n,e){const t=mD(n,e);if(!t)return e;const s=KS(t,n);return Vs(s,s.next),Vs(t,t.next)}function mD(n,e){let t=e;const s=n.x,a=n.y;let o=-1/0,u;if(sa(n,t))return t;do{if(sa(n,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const m=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>o&&(o=m,u=t.x<t.next.x?t:t.next,m===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,f=u.x,d=u.y;let g=1/0;t=u;do{if(s>=t.x&&t.x>=f&&s!==t.x&&WS(a<d?s:o,a,f,d,a<d?o:s,a,t.x,t.y)){const m=Math.abs(a-t.y)/(s-t.x);ol(t,n)&&(m<g||m===g&&(t.x>u.x||t.x===u.x&&bD(u,t)))&&(u=t,g=m)}t=t.next}while(t!==h);return u}function bD(n,e){return We(n.prev,n,e.prev)<0&&We(e.next,n,n.next)<0}function vD(n,e,t,s){let a=n;do a.z===0&&(a.z=tg(a.x,a.y,e,t,s)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,_D(a)}function _D(n){let e,t=1;do{let s=n,a;n=null;let o=null;for(e=0;s;){e++;let u=s,h=0;for(let d=0;d<t&&(h++,u=u.nextZ,!!u);d++);let f=t;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||s.z<=u.z)?(a=s,s=s.nextZ,h--):(a=u,u=u.nextZ,f--),o?o.nextZ=a:n=a,a.prevZ=o,o=a;s=u}o.nextZ=null,t*=2}while(e>1);return n}function tg(n,e,t,s,a){return n=(n-t)*a|0,e=(e-s)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function wD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function WS(n,e,t,s,a,o,u,h){return(a-u)*(e-h)>=(n-u)*(o-h)&&(n-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(o-h)>=(a-u)*(s-h)}function Do(n,e,t,s,a,o,u,h){return!(n===u&&e===h)&&WS(n,e,t,s,a,o,u,h)}function xD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!SD(n,e)&&(ol(n,e)&&ol(e,n)&&AD(n,e)&&(We(n.prev,n,e.prev)||We(n,e.prev,e))||sa(n,e)&&We(n.prev,n,n.next)>0&&We(e.prev,e,e.next)>0)}function We(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function sa(n,e){return n.x===e.x&&n.y===e.y}function QS(n,e,t,s){const a=oc(We(n,e,t)),o=oc(We(n,e,s)),u=oc(We(t,s,n)),h=oc(We(t,s,e));return!!(a!==o&&u!==h||a===0&&ac(n,t,e)||o===0&&ac(n,s,e)||u===0&&ac(t,n,s)||h===0&&ac(t,e,s))}function ac(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function oc(n){return n>0?1:n<0?-1:0}function SD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&QS(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ol(n,e){return We(n.prev,n,n.next)<0?We(n,e,n.next)>=0&&We(n,n.prev,e)>=0:We(n,e,n.prev)<0||We(n,n.next,e)<0}function AD(n,e){let t=n,s=!1;const a=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&a<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==n);return s}function KS(n,e){const t=ng(n.i,n.x,n.y),s=ng(e.i,e.x,e.y),a=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=a,a.prev=t,s.next=t,t.prev=s,o.next=s,s.prev=o,s}function Z_(n,e,t,s){const a=ng(n,e,t);return s?(a.next=s.next,a.prev=s,s.next.prev=a,s.next=a):(a.prev=a,a.next=a),a}function ll(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ng(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ED(n,e,t,s){let a=0;for(let o=e,u=t-s;o<t;o+=s)a+=(n[u]-n[o])*(n[o+1]+n[u+1]),u=o;return a}const TD=K_.default||K_;class ZS extends Xn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return $e(Dt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return $e(Dt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return $e(Dt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return $e(Dt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return $e(Dt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class MD{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let a=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(a={...this.first},this.evict(!0));let o=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=o:this.last.next=o,this.last=o}return a}set(e,t,s=!1,a=this.resetTtl){let o=this.items[e];return s||o!==void 0?(o.value=t,s===!1&&a&&(o.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(o)):(this.max>0&&this.size===this.max&&this.evict(!0),o=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=o:this.last.next=o,this.last=o),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function JS(n=1e3,e=0,t=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new MD(n,e,t)}const kD=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ig(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let a=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&!kD.includes(a)&&(a=`"${a}"`),t[s]=a}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const ip={willReadFrequently:!0},jn=class fe{static get experimentalLetterSpacingSupported(){let e=fe._experimentalLetterSpacingSupported;if(e===void 0){const t=et.get().getCanvasRenderingContext2D().prototype;e=fe._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,a,o,u,h,f,d){this.text=e,this.style=t,this.width=s,this.height=a,this.lines=o,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=d}static measureText(e=" ",t,s=fe._canvas,a=t.wordWrap){const o=`${e}-${t.styleKey}-wordWrap-${a}`;if(fe._measurementCache.has(o))return fe._measurementCache.get(o);const u=ig(t),h=fe.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=fe.__context;f.font=u;const g=(a?fe._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),m=new Array(g.length);let b=0;for(let M=0;M<g.length;M++){const A=fe._measureText(g[M],t.letterSpacing,f);m[M]=A,b=Math.max(b,A)}const v=t._stroke?.width||0;let w=b+v;t.dropShadow&&(w+=t.dropShadow.distance);const S=t.lineHeight||h.fontSize;let _=Math.max(S,h.fontSize+v)+(g.length-1)*(S+t.leading);t.dropShadow&&(_+=t.dropShadow.distance);const E=new fe(e,t,w,_,g,m,S+t.leading,b,h);return fe._measurementCache.set(o,E),E}static _measureText(e,t,s){let a=!1;fe.experimentalLetterSpacingSupported&&(fe.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,a=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const o=s.measureText(e);let u=o.width;const h=-o.actualBoundingBoxLeft;let d=o.actualBoundingBoxRight-h;if(u>0)if(a)u-=t,d-=t;else{const g=(fe.graphemeSegmenter(e).length-1)*t;u+=g,d+=g}return Math.max(u,d)}static _wordWrap(e,t,s=fe._canvas){const a=s.getContext("2d",ip);let o=0,u="",h="";const f=Object.create(null),{letterSpacing:d,whiteSpace:g}=t,m=fe._collapseSpaces(g),b=fe._collapseNewlines(g);let v=!m;const w=t.wordWrapWidth+d,S=fe._tokenize(e);for(let _=0;_<S.length;_++){let E=S[_];if(fe._isNewline(E)){if(!b){h+=fe._addLine(u),v=!m,u="",o=0;continue}E=" "}if(m){const A=fe.isBreakingSpace(E),T=fe.isBreakingSpace(u[u.length-1]);if(A&&T)continue}const M=fe._getFromCache(E,d,f,a);if(M>w)if(u!==""&&(h+=fe._addLine(u),u="",o=0),fe.canBreakWords(E,t.breakWords)){const A=fe.wordWrapSplit(E);for(let T=0;T<A.length;T++){let R=A[T],O=R,C=1;for(;A[T+C];){const D=A[T+C];if(!fe.canBreakChars(O,D,E,T,t.breakWords))R+=D;else break;O=D,C++}T+=C-1;const P=fe._getFromCache(R,d,f,a);P+o>w&&(h+=fe._addLine(u),v=!1,u="",o=0),u+=R,o+=P}}else{u.length>0&&(h+=fe._addLine(u),u="",o=0);const A=_===S.length-1;h+=fe._addLine(E,!A),v=!1,u="",o=0}else M+o>w&&(v=!1,h+=fe._addLine(u),u="",o=0),(u.length>0||!fe.isBreakingSpace(E)||v)&&(u+=E,o+=M)}return h+=fe._addLine(u,!1),h}static _addLine(e,t=!0){return e=fe._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,a){let o=s[e];return typeof o!="number"&&(o=fe._measureText(e,t,a)+t,s[e]=o),o}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!fe.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:fe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:fe._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let a=0;a<e.length;a++){const o=e[a],u=e[a+1];if(fe.isBreakingSpace(o,u)||fe._isNewline(o)){s!==""&&(t.push(s),s=""),o==="\r"&&u===`
`?(t.push(`\r
`),a++):t.push(o);continue}s+=o}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,a,o){return!0}static wordWrapSplit(e){return fe.graphemeSegmenter(e)}static measureFont(e){if(fe._fonts[e])return fe._fonts[e];const t=fe._context;t.font=e;const s=t.measureText(fe.METRICS_STRING+fe.BASELINE_SYMBOL),a={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return fe._fonts[e]=a,a}static clearMetrics(e=""){e?delete fe._fonts[e]:fe._fonts={}}static get _canvas(){if(!fe.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",ip)?.measureText)return fe.__canvas=t,t;e=et.get().createCanvas()}catch{e=et.get().createCanvas()}e.width=e.height=10,fe.__canvas=e}return fe.__canvas}static get _context(){return fe.__context||(fe.__context=fe._canvas.getContext("2d",ip)),fe.__context}};jn.METRICS_STRING="|q";jn.BASELINE_SYMBOL="M";jn.BASELINE_MULTIPLIER=1.4;jn.HEIGHT_MULTIPLIER=2;jn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const n=new Intl.Segmenter;return e=>{const t=n.segment(e),s=[];let a=0;for(const o of t)s[a++]=o.segment;return s}}return n=>[...n]})();jn.experimentalLetterSpacing=!1;jn._fonts={};jn._newlines=[10,13];jn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];jn._measurementCache=JS(1e3);let mc=jn;const J_=[{offset:0,color:"white"},{offset:1,color:"black"}],Zg=class sg{constructor(...e){this.uid=it("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=CD(e);t={...t.type==="radial"?sg.defaultRadialOptions:sg.defaultLinearOptions,...hS(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:zt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:a}=this.end,o=s-e,u=a-t;const h=o<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(o<0){const _=e;e=s,s=_,o*=-1}if(u<0){const _=t;t=a,a=_,u*=-1}}const f=this.colorStops.length?this.colorStops:J_,d=this._textureSize,{canvas:g,context:m}=tw(d,1),b=h?m.createLinearGradient(this._textureSize,0,0,0):m.createLinearGradient(0,0,this._textureSize,0);ew(b,f),m.fillStyle=b,m.fillRect(0,0,d,1),this.texture=new Ce({source:new Fs({resource:g,addressMode:this._wrapMode})});const v=Math.sqrt(o*o+u*u),w=Math.atan2(u,o),S=new Me;S.scale(v/d,1),S.rotate(w),S.translate(e,t),this.textureSpace==="local"&&S.scale(d,d),this.transform=S}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:J_,t=this._textureSize,{canvas:s,context:a}=tw(t,t),{x:o,y:u}=this.center,{x:h,y:f}=this.outerCenter,d=this.innerRadius,g=this.outerRadius,m=h-g,b=f-g,v=t/(g*2),w=(o-m)*v,S=(u-b)*v,_=a.createRadialGradient(w,S,d*v,(h-m)*v,(f-b)*v,g*v);ew(_,e),a.fillStyle=e[e.length-1].color,a.fillRect(0,0,t,t),a.fillStyle=_,a.translate(w,S),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-w,-S),a.fillRect(0,0,t,t),this.texture=new Ce({source:new Fs({resource:s,addressMode:this._wrapMode})});const E=new Me;E.scale(1/v,1/v),E.translate(m,b),this.textureSpace==="local"&&E.scale(t,t),this.transform=E}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Zg.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Zg.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Si=Zg;function ew(n,e){for(let t=0;t<e.length;t++){const s=e[t];n.addColorStop(s.offset,s.color)}}function tw(n,e){const t=et.get().createCanvas(n,e),s=t.getContext("2d");return{canvas:t,context:s}}function CD(n){let e=n[0]??{};return(typeof e=="number"||n[1])&&($e("8.5.2","use options object instead"),e={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Si.defaultLinearOptions.textureSize}),e}const nw={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Zc{constructor(e,t){this.uid=it("fillPattern"),this._tick=0,this.transform=new Me,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=nw[t].addressModeU,e.source.style.addressModeV=nw[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var sp,iw;function RD(){if(iw)return sp;iw=1,sp=t;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(o){var u=[];return o.replace(e,function(h,f,d){var g=f.toLowerCase();for(d=a(d),g=="m"&&d.length>2&&(u.push([f].concat(d.splice(0,2))),g="l",f=f=="m"?"l":"L");;){if(d.length==n[g])return d.unshift(f),u.push(d);if(d.length<n[g])throw new Error("malformed path data");u.push([f].concat(d.splice(0,n[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(o){var u=o.match(s);return u?u.map(Number):[]}return sp}var OD=RD();const PD=Ai(OD);function DD(n,e){const t=PD(n),s=[];let a=null,o=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],d=f[0],g=f;switch(d){case"M":o=g[1],u=g[2],e.moveTo(o,u);break;case"m":o+=g[1],u+=g[2],e.moveTo(o,u);break;case"H":o=g[1],e.lineTo(o,u);break;case"h":o+=g[1],e.lineTo(o,u);break;case"V":u=g[1],e.lineTo(o,u);break;case"v":u+=g[1],e.lineTo(o,u);break;case"L":o=g[1],u=g[2],e.lineTo(o,u);break;case"l":o+=g[1],u+=g[2],e.lineTo(o,u);break;case"C":o=g[5],u=g[6],e.bezierCurveTo(g[1],g[2],g[3],g[4],o,u);break;case"c":e.bezierCurveTo(o+g[1],u+g[2],o+g[3],u+g[4],o+g[5],u+g[6]),o+=g[5],u+=g[6];break;case"S":o=g[3],u=g[4],e.bezierCurveToShort(g[1],g[2],o,u);break;case"s":e.bezierCurveToShort(o+g[1],u+g[2],o+g[3],u+g[4]),o+=g[3],u+=g[4];break;case"Q":o=g[3],u=g[4],e.quadraticCurveTo(g[1],g[2],o,u);break;case"q":e.quadraticCurveTo(o+g[1],u+g[2],o+g[3],u+g[4]),o+=g[3],u+=g[4];break;case"T":o=g[1],u=g[2],e.quadraticCurveToShort(o,u);break;case"t":o+=g[1],u+=g[2],e.quadraticCurveToShort(o,u);break;case"A":o=g[6],u=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,u);break;case"a":o+=g[6],u+=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,u);break;case"Z":case"z":e.closePath(),s.length>0&&(a=s.pop(),a?(o=a.startX,u=a.startY):(o=0,u=0)),a=null;break;default:Fe(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&a===null&&(a={startX:o,startY:u},s.push(a))}return e}class Jg{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Jg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let a=this.x-e,o=this.y-t;return a*=a,o*=o,a+o<=s}strokeContains(e,t,s,a=.5){if(this.radius===0)return!1;const o=this.x-e,u=this.y-t,h=this.radius,f=(1-a)*s,d=Math.sqrt(o*o+u*u);return d<=h+f&&d>h-(s-f)}getBounds(e){return e||(e=new nt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class ey{constructor(e=0,t=0,s=0,a=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=a}clone(){return new ey(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,a=(t-this.y)/this.halfHeight;return s*=s,a*=a,s+a<=1}strokeContains(e,t,s,a=.5){const{halfWidth:o,halfHeight:u}=this;if(o<=0||u<=0)return!1;const h=s*(1-a),f=s-h,d=o-f,g=u-f,m=o+h,b=u+h,v=e-this.x,w=t-this.y,S=v*v/(d*d)+w*w/(g*g),_=v*v/(m*m)+w*w/(b*b);return S>1&&_<=1}getBounds(e){return e||(e=new nt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function BD(n,e,t,s,a,o){const u=n-t,h=e-s,f=a-t,d=o-s,g=u*f+h*d,m=f*f+d*d;let b=-1;m!==0&&(b=g/m);let v,w;b<0?(v=t,w=s):b>1?(v=a,w=o):(v=t+b*f,w=s+b*d);const S=n-v,_=e-w;return S*S+_*_}let zD,jD;class Vo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let a=0,o=t.length;a<o;a++)s.push(t[a].x,t[a].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let a=0;a<s;a+=2){const o=t[a],u=t[a+1],h=t[(a+2)%s],f=t[(a+3)%s];e+=(h-o)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(zD),s=e.getBounds(jD);if(!t.containsRect(s))return!1;const a=e.points;for(let o=0;o<a.length;o+=2){const u=a[o],h=a[o+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new Vo(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const a=this.points.length/2;for(let o=0,u=a-1;o<a;u=o++){const h=this.points[o*2],f=this.points[o*2+1],d=this.points[u*2],g=this.points[u*2+1];f>t!=g>t&&e<(d-h)*((t-f)/(g-f))+h&&(s=!s)}return s}strokeContains(e,t,s,a=.5){const o=s*s,u=o*(1-a),h=o-u,{points:f}=this,d=f.length-(this.closePath?0:2);for(let g=0;g<d;g+=2){const m=f[g],b=f[g+1],v=f[(g+2)%f.length],w=f[(g+3)%f.length],S=BD(e,t,m,b,v,w),_=Math.sign((v-m)*(t-b)-(w-b)*(e-m));if(S<=(_<0?h:u))return!0}return!1}getBounds(e){e||(e=new nt);const t=this.points;let s=1/0,a=-1/0,o=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const d=t[h],g=t[h+1];s=d<s?d:s,a=d>a?d:a,o=g<o?g:o,u=g>u?g:u}return e.x=s,e.width=a-s,e.y=o,e.height=u-o,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return $e("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return $e("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const lc=(n,e,t,s,a,o,u)=>{const h=n-t,f=e-s,d=Math.sqrt(h*h+f*f);return d>=a-o&&d<=a+u};class ty{constructor(e=0,t=0,s=0,a=0,o=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=a,this.radius=o}getBounds(e){return e||(e=new nt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new ty(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let a=e-(this.x+s),o=t-(this.y+s);const u=s*s;if(a*a+o*o<=u||(a=e-(this.x+this.width-s),a*a+o*o<=u)||(o=t-(this.y+this.height-s),a*a+o*o<=u)||(a=e-(this.x+s),a*a+o*o<=u))return!0}return!1}strokeContains(e,t,s,a=.5){const{x:o,y:u,width:h,height:f,radius:d}=this,g=s*(1-a),m=s-g,b=o+d,v=u+d,w=h-d*2,S=f-d*2,_=o+h,E=u+f;return(e>=o-g&&e<=o+m||e>=_-m&&e<=_+g)&&t>=v&&t<=v+S||(t>=u-g&&t<=u+m||t>=E-m&&t<=E+g)&&e>=b&&e<=b+w?!0:e<b&&t<v&&lc(e,t,b,v,d,m,g)||e>_-d&&t<v&&lc(e,t,_-d,v,d,m,g)||e>_-d&&t>E-d&&lc(e,t,_-d,E-d,d,m,g)||e<b&&t>E-d&&lc(e,t,b,E-d,d,m,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const e1={};function UD(n,e,t){let s=2166136261;for(let a=0;a<e;a++)s^=n[a].uid,s=Math.imul(s,16777619),s>>>=0;return e1[s]||LD(n,e,s,t)}function LD(n,e,t,s){const a={};let o=0;for(let h=0;h<s;h++){const f=h<e?n[h]:Ce.EMPTY.source;a[o++]=f.source,a[o++]=f.style}const u=new yc(a);return e1[t]=u,u}class sw{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function rw(n,e){const t=n.byteLength/8|0,s=new Float64Array(n,0,t);new Float64Array(e,0,t).set(s);const o=n.byteLength-t*8;if(o>0){const u=new Uint8Array(n,t*8,o);new Uint8Array(e,t*8,o).set(u)}}const ID={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var ND=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(ND||{});function aw(n,e){return e.alphaMode==="no-premultiply-alpha"&&ID[n]||n}const qD=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function GD(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function HD(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=qD.replace(/%forloop%/gi,GD(n));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(t)}return n}let $r=null;function $D(){if($r)return $r;const n=qS();return $r=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),$r=HD($r,n),n.getExtension("WEBGL_lose_context")?.loseContext(),$r}class FD{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class VD{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new FD,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Yo=[];let jc=0;Wc.register({clear:()=>{if(Yo.length>0)for(const n of Yo)n&&n.destroy();Yo.length=0,jc=0}});function ow(){return jc>0?Yo[--jc]:new VD}function lw(n){Yo[jc++]=n}let So=0;const t1=class n1{constructor(e){this.uid=it("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...n1.defaultOptions,...e},e.maxTextures||($e("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=$D());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:a}=e;this.attributeBuffer=new sw(s*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)lw(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=ow(),a=s.textures;a.clear();const o=t[this.elementStart];let u=aw(o.blendMode,o.texture._source),h=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,d=this.attributeBuffer.uint32View,g=this.indexBuffer;let m=this._batchIndexSize,b=this._batchIndexStart,v="startBatch";const w=this.maxTextures;for(let S=this.elementStart;S<this.elementSize;++S){const _=t[S];t[S]=null;const M=_.texture._source,A=aw(_.blendMode,M),T=u!==A||h!==_.topology;if(M._batchTick===So&&!T){_._textureId=M._textureBindLocation,m+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,f,d,_._attributeStart,_._textureId),this.packQuadIndex(g,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,f,d,_._attributeStart,_._textureId),this.packIndex(_,g,_._indexStart,_._attributeStart/this.vertexSize)),_._batch=s;continue}M._batchTick=So,(a.count>=w||T)&&(this._finishBatch(s,b,m-b,a,u,h,e,v),v="renderBatch",b=m,u=A,h=_.topology,s=ow(),a=s.textures,a.clear(),++So),_._textureId=M._textureBindLocation=a.count,a.ids[M.uid]=a.count,a.textures[a.count++]=M,_._batch=s,m+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,f,d,_._attributeStart,_._textureId),this.packQuadIndex(g,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,f,d,_._attributeStart,_._textureId),this.packIndex(_,g,_._indexStart,_._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(s,b,m-b,a,u,h,e,v),b=m,++So),this.elementStart=this.elementSize,this._batchIndexStart=b,this._batchIndexSize=m}_finishBatch(e,t,s,a,o,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=a,e.blendMode=o,e.topology=u,e.start=t,e.size=s,++So,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new sw(t);rw(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const a=s>65535?new Uint32Array(s):new Uint16Array(s);if(a.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let o=0;o<t.length;o++)a[o]=t[o];else rw(t.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,a){const o=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let d=0;d<u;d++)t[s++]=a+o[d+h]-f}destroy(e={}){if(this.batches!==null){for(let t=0;t<this.batches.length;t++)lw(this.batches[t]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let t=0;t<this._elements.length;t++)this._elements[t]&&(this._elements[t]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};t1.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let YD=t1;var Vt=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Vt||{});let ul=class extends Xn{constructor(e){let{data:t,size:s}=e;const{usage:a,label:o,shrinkToFit:u}=e;super(),this.uid=it("buffer"),this._resourceType="buffer",this._resourceId=it("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t?.byteLength);const h=!!t;this.descriptor={size:s,usage:a,mappedAtCreation:h,label:o},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Vt.STATIC)}set static(e){e?this.descriptor.usage|=Vt.STATIC:this.descriptor.usage&=~Vt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const a=this._data;if(this._data=e,this._dataInt32=null,!a||a.length!==e.length){!this.shrinkToFit&&a&&e.byteLength<a.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=it("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function i1(n,e){if(!(n instanceof ul)){let t=e?Vt.INDEX:Vt.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=Vt.INDEX|Vt.COPY_DST):(n=new Float32Array(n),t=Vt.VERTEX|Vt.COPY_DST)),n=new ul({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function XD(n,e,t){const s=n.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const a=s.buffer.data;let o=1/0,u=1/0,h=-1/0,f=-1/0;const d=a.BYTES_PER_ELEMENT,g=(s.offset||0)/d,m=(s.stride||8)/d;for(let b=g;b<a.length;b+=m){const v=a[b],w=a[b+1];v>h&&(h=v),w>f&&(f=w),v<o&&(o=v),w<u&&(u=w)}return t.minX=o,t.minY=u,t.maxX=h,t.maxY=f,t}function WD(n){return(n instanceof ul||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=i1(n.buffer,!1),n}class QD extends Xn{constructor(e={}){super(),this.uid=it("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:a}=e;if(this.buffers=[],this.attributes={},t)for(const o in t)this.addAttribute(o,t[o]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=WD(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=i1(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,XD(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const KD=new Float32Array(1),ZD=new Uint32Array(1);class JD extends QD{constructor(){const t=new ul({data:KD,label:"attribute-batch-buffer",usage:Vt.VERTEX|Vt.COPY_DST,shrinkToFit:!1}),s=new ul({data:ZD,label:"index-batch-buffer",usage:Vt.INDEX|Vt.COPY_DST,shrinkToFit:!1}),a=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:a,offset:0},aUV:{buffer:t,format:"float32x2",stride:a,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:a,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:a,offset:20}},indexBuffer:s})}}function uw(n,e,t){if(n)for(const s in n){const a=s.toLocaleLowerCase(),o=e[a];if(o){let u=n[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&o.push(`//----${t}----//`),o.push(u)}else Fe(`${s} placement hook does not exist in shader`)}}const eB=/\{\{(.*?)\}\}/g;function cw(n){const e={};return(n.match(eB)?.map(s=>s.replace(/[{()}]/g,""))??[]).forEach(s=>{e[s]=[]}),e}function hw(n,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function fw(n,e,t=!1){const s=[];hw(e,s),n.forEach(h=>{h.header&&hw(h.header,s)});const a=s;t&&a.sort();const o=a.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${o}
`),u}function dw(n,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function tB(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function nB(n){const e=/@.*?\s+/g;return n.replace(e,"")}function iB(n,e){const t=[];dw(e,t),n.forEach(f=>{f.header&&dw(f.header,t)});let s=0;const a=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${s++}) ${f}`).join(`,
`),o=t.sort().map(f=>`       var ${nB(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${tB(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${a}
`),h=h.replace("{{start}}",`
${o}
`),h=h.replace("{{return}}",`
${u}
`),h}function pw(n,e){let t=n;for(const s in e){const a=e[s];a.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${a.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Ji=Object.create(null),rp=new Map;let sB=0;function rB({template:n,bits:e}){const t=s1(n,e);if(Ji[t])return Ji[t];const{vertex:s,fragment:a}=oB(n,e);return Ji[t]=r1(s,a,e),Ji[t]}function aB({template:n,bits:e}){const t=s1(n,e);return Ji[t]||(Ji[t]=r1(n.vertex,n.fragment,e)),Ji[t]}function oB(n,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let a=fw(t,n.vertex,!0);a=iB(t,a);const o=fw(s,n.fragment,!0);return{vertex:a,fragment:o}}function s1(n,e){return e.map(t=>(rp.has(t)||rp.set(t,sB++),rp.get(t))).sort((t,s)=>t-s).join("-")+n.vertex+n.fragment}function r1(n,e,t){const s=cw(n),a=cw(e);return t.forEach(o=>{uw(o.vertex,s,o.name),uw(o.fragment,a,o.name)}),{vertex:pw(n,s),fragment:pw(e,a)}}const lB=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,uB=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,cB=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,hB=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,fB={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},dB={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function pB({bits:n,name:e}){const t=rB({template:{fragment:uB,vertex:lB},bits:[fB,...n]});return Kc.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function gB({bits:n,name:e}){return new HS({name:e,...aB({template:{vertex:cB,fragment:hB},bits:[dB,...n]})})}const yB={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},mB={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},ap={};function bB(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<n;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function vB(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<n;t++)t===n-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function _B(n){return ap[n]||(ap[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${bB(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${vB(n)}
            `}}),ap[n]}const op={};function wB(n){const e=[];for(let t=0;t<n;t++)t>0&&e.push("else"),t<n-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function xB(n){return op[n]||(op[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${wB(n)}
            `}}),op[n]}const SB={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},AB={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},gw={};function EB(n){let e=gw[n];if(e)return e;const t=new Int32Array(n);for(let s=0;s<n;s++)t[s]=s;return e=gw[n]=new YS({uTextures:{value:t,type:"i32",size:n}},{isStatic:!0}),e}class yw extends Kg{constructor(e){const t=gB({name:"batch",bits:[mB,xB(e),AB]}),s=pB({name:"batch",bits:[yB,_B(e),SB]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:EB(e)}}),this.maxTextures=e}}let Ao=null;const a1=class o1 extends YD{constructor(e){super(e),this.geometry=new JD,this.name=o1.extension.name,this.vertexSize=6,Ao??(Ao=new yw(e.maxTextures)),this.shader=Ao}packAttributes(e,t,s,a,o){const u=o<<16|e.roundPixels&65535,h=e.transform,f=h.a,d=h.b,g=h.c,m=h.d,b=h.tx,v=h.ty,{positions:w,uvs:S}=e,_=e.color,E=e.attributeOffset,M=E+e.attributeSize;for(let A=E;A<M;A++){const T=A*2,R=w[T],O=w[T+1];t[a++]=f*R+g*O+b,t[a++]=m*O+d*R+v,t[a++]=S[T],t[a++]=S[T+1],s[a++]=_,s[a++]=u}}packQuadAttributes(e,t,s,a,o){const u=e.texture,h=e.transform,f=h.a,d=h.b,g=h.c,m=h.d,b=h.tx,v=h.ty,w=e.bounds,S=w.maxX,_=w.minX,E=w.maxY,M=w.minY,A=u.uvs,T=e.color,R=o<<16|e.roundPixels&65535;t[a+0]=f*_+g*M+b,t[a+1]=m*M+d*_+v,t[a+2]=A.x0,t[a+3]=A.y0,s[a+4]=T,s[a+5]=R,t[a+6]=f*S+g*M+b,t[a+7]=m*M+d*S+v,t[a+8]=A.x1,t[a+9]=A.y1,s[a+10]=T,s[a+11]=R,t[a+12]=f*S+g*E+b,t[a+13]=m*E+d*S+v,t[a+14]=A.x2,t[a+15]=A.y2,s[a+16]=T,s[a+17]=R,t[a+18]=f*_+g*E+b,t[a+19]=m*E+d*_+v,t[a+20]=A.x3,t[a+21]=A.y3,s[a+22]=T,s[a+23]=R}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Ao=new yw(e),this.shader=Ao)}destroy(){this.shader=null,super.destroy()}};a1.extension={type:[ge.Batcher],name:"default"};let TB=a1;function MB(n,e,t,s,a,o,u,h=null){let f=0;t*=e,a*=o;const d=h.a,g=h.b,m=h.c,b=h.d,v=h.tx,w=h.ty;for(;f<u;){const S=n[t],_=n[t+1];s[a]=d*S+m*_+v,s[a+1]=g*S+b*_+w,a+=o,t+=e,f++}}function kB(n,e,t,s){let a=0;for(e*=t;a<s;)n[e]=0,n[e+1]=0,e+=t,a++}function l1(n,e,t,s,a){const o=e.a,u=e.b,h=e.c,f=e.d,d=e.tx,g=e.ty;t||(t=0),s||(s=2),a||(a=n.length/s-t);let m=t*s;for(let b=0;b<a;b++){const v=n[m],w=n[m+1];n[m]=o*v+h*w+d,n[m+1]=u*v+f*w+g,m+=s}}const CB=new Me;class u1{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?wS(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||CB}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const cl={extension:{type:ge.ShapeBuilder,name:"circle"},build(n,e){let t,s,a,o,u,h;if(n.type==="circle"){const T=n;if(u=h=T.radius,u<=0)return!1;t=T.x,s=T.y,a=o=0}else if(n.type==="ellipse"){const T=n;if(u=T.halfWidth,h=T.halfHeight,u<=0||h<=0)return!1;t=T.x,s=T.y,a=o=0}else{const T=n,R=T.width/2,O=T.height/2;t=T.x+R,s=T.y+O,u=h=Math.max(0,Math.min(T.radius,Math.min(R,O))),a=R-u,o=O-h}if(a<0||o<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),d=f*8+(a?4:0)+(o?4:0);if(d===0)return!1;if(f===0)return e[0]=e[6]=t+a,e[1]=e[3]=s+o,e[2]=e[4]=t-a,e[5]=e[7]=s-o,!0;let g=0,m=f*4+(a?2:0)+2,b=m,v=d,w=a+u,S=o,_=t+w,E=t-w,M=s+S;if(e[g++]=_,e[g++]=M,e[--m]=M,e[--m]=E,o){const T=s-S;e[b++]=E,e[b++]=T,e[--v]=T,e[--v]=_}for(let T=1;T<f;T++){const R=Math.PI/2*(T/f),O=a+Math.cos(R)*u,C=o+Math.sin(R)*h,P=t+O,D=t-O,z=s+C,U=s-C;e[g++]=P,e[g++]=z,e[--m]=z,e[--m]=D,e[b++]=D,e[b++]=U,e[--v]=U,e[--v]=P}w=a,S=o+h,_=t+w,E=t-w,M=s+S;const A=s-S;return e[g++]=_,e[g++]=M,e[--v]=A,e[--v]=_,a&&(e[g++]=E,e[g++]=M,e[--v]=A,e[--v]=E),!0},triangulate(n,e,t,s,a,o){if(n.length===0)return;let u=0,h=0;for(let g=0;g<n.length;g+=2)u+=n[g],h+=n[g+1];u/=n.length/2,h/=n.length/2;let f=s;e[f*t]=u,e[f*t+1]=h;const d=f++;for(let g=0;g<n.length;g+=2)e[f*t]=n[g],e[f*t+1]=n[g+1],g>0&&(a[o++]=f,a[o++]=d,a[o++]=f-1),f++;a[o++]=d+1,a[o++]=d,a[o++]=f-1}},RB={...cl,extension:{...cl.extension,name:"ellipse"}},OB={...cl,extension:{...cl.extension,name:"roundedRectangle"}},c1=1e-4,mw=1e-4;function PB(n){const e=n.length;if(e<6)return 1;let t=0;for(let s=0,a=n[e-2],o=n[e-1];s<e;s+=2){const u=n[s],h=n[s+1];t+=(u-a)*(h+o),a=u,o=h}return t<0?-1:1}function bw(n,e,t,s,a,o,u,h){const f=n-t*a,d=e-s*a,g=n+t*o,m=e+s*o;let b,v;u?(b=s,v=-t):(b=-s,v=t);const w=f+b,S=d+v,_=g+b,E=m+v;return h.push(w,S),h.push(_,E),2}function Cs(n,e,t,s,a,o,u,h){const f=t-n,d=s-e;let g=Math.atan2(f,d),m=Math.atan2(a-n,o-e);h&&g<m?g+=Math.PI*2:!h&&g>m&&(m+=Math.PI*2);let b=g;const v=m-g,w=Math.abs(v),S=Math.sqrt(f*f+d*d),_=(15*w*Math.sqrt(S)/Math.PI>>0)+1,E=v/_;if(b+=E,h){u.push(n,e),u.push(t,s);for(let M=1,A=b;M<_;M++,A+=E)u.push(n,e),u.push(n+Math.sin(A)*S,e+Math.cos(A)*S);u.push(n,e),u.push(a,o)}else{u.push(t,s),u.push(n,e);for(let M=1,A=b;M<_;M++,A+=E)u.push(n+Math.sin(A)*S,e+Math.cos(A)*S),u.push(n,e);u.push(a,o),u.push(n,e)}return _*2}function DB(n,e,t,s,a,o){const u=c1;if(n.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let re=PB(n);f=(f-.5)*re+.5}const d=new Bt(n[0],n[1]),g=new Bt(n[n.length-2],n[n.length-1]),m=s,b=Math.abs(d.x-g.x)<u&&Math.abs(d.y-g.y)<u;if(m){n=n.slice(),b&&(n.pop(),n.pop(),g.set(n[n.length-2],n[n.length-1]));const re=(d.x+g.x)*.5,j=(g.y+d.y)*.5;n.unshift(re,j),n.push(re,j)}const v=a,w=n.length/2;let S=n.length;const _=v.length/2,E=h.width/2,M=E*E,A=h.miterLimit*h.miterLimit;let T=n[0],R=n[1],O=n[2],C=n[3],P=0,D=0,z=-(R-C),U=T-O,F=0,Q=0,ee=Math.sqrt(z*z+U*U);z/=ee,U/=ee,z*=E,U*=E;const ae=f,L=(1-ae)*2,$=ae*2;m||(h.cap==="round"?S+=Cs(T-z*(L-$)*.5,R-U*(L-$)*.5,T-z*L,R-U*L,T+z*$,R+U*$,v,!0)+2:h.cap==="square"&&(S+=bw(T,R,z,U,L,$,!0,v))),v.push(T-z*L,R-U*L),v.push(T+z*$,R+U*$);for(let re=1;re<w-1;++re){T=n[(re-1)*2],R=n[(re-1)*2+1],O=n[re*2],C=n[re*2+1],P=n[(re+1)*2],D=n[(re+1)*2+1],z=-(R-C),U=T-O,ee=Math.sqrt(z*z+U*U),z/=ee,U/=ee,z*=E,U*=E,F=-(C-D),Q=O-P,ee=Math.sqrt(F*F+Q*Q),F/=ee,Q/=ee,F*=E,Q*=E;const j=O-T,Y=R-C,ne=O-P,te=D-C,J=j*ne+Y*te,le=Y*ne-te*j,oe=le<0;if(Math.abs(le)<.001*Math.abs(J)){v.push(O-z*L,C-U*L),v.push(O+z*$,C+U*$),J>=0&&(h.join==="round"?S+=Cs(O,C,O-z*L,C-U*L,O-F*L,C-Q*L,v,!1)+4:S+=2,v.push(O-F*$,C-Q*$),v.push(O+F*L,C+Q*L));continue}const ze=(-z+T)*(-U+C)-(-z+O)*(-U+R),xe=(-F+P)*(-Q+C)-(-F+O)*(-Q+D),Pe=(j*xe-ne*ze)/le,Re=(te*ze-Y*xe)/le,ut=(Pe-O)*(Pe-O)+(Re-C)*(Re-C),vt=O+(Pe-O)*L,ct=C+(Re-C)*L,jt=O-(Pe-O)*$,qt=C-(Re-C)*$,Ei=Math.min(j*j+Y*Y,ne*ne+te*te),Qs=oe?L:$,Ks=Ei+Qs*Qs*M;ut<=Ks?h.join==="bevel"||ut/M>A?(oe?(v.push(vt,ct),v.push(O+z*$,C+U*$),v.push(vt,ct),v.push(O+F*$,C+Q*$)):(v.push(O-z*L,C-U*L),v.push(jt,qt),v.push(O-F*L,C-Q*L),v.push(jt,qt)),S+=2):h.join==="round"?oe?(v.push(vt,ct),v.push(O+z*$,C+U*$),S+=Cs(O,C,O+z*$,C+U*$,O+F*$,C+Q*$,v,!0)+4,v.push(vt,ct),v.push(O+F*$,C+Q*$)):(v.push(O-z*L,C-U*L),v.push(jt,qt),S+=Cs(O,C,O-z*L,C-U*L,O-F*L,C-Q*L,v,!1)+4,v.push(O-F*L,C-Q*L),v.push(jt,qt)):(v.push(vt,ct),v.push(jt,qt)):(v.push(O-z*L,C-U*L),v.push(O+z*$,C+U*$),h.join==="round"?oe?S+=Cs(O,C,O+z*$,C+U*$,O+F*$,C+Q*$,v,!0)+2:S+=Cs(O,C,O-z*L,C-U*L,O-F*L,C-Q*L,v,!1)+2:h.join==="miter"&&ut/M<=A&&(oe?(v.push(jt,qt),v.push(jt,qt)):(v.push(vt,ct),v.push(vt,ct)),S+=2),v.push(O-F*L,C-Q*L),v.push(O+F*$,C+Q*$),S+=2)}T=n[(w-2)*2],R=n[(w-2)*2+1],O=n[(w-1)*2],C=n[(w-1)*2+1],z=-(R-C),U=T-O,ee=Math.sqrt(z*z+U*U),z/=ee,U/=ee,z*=E,U*=E,v.push(O-z*L,C-U*L),v.push(O+z*$,C+U*$),m||(h.cap==="round"?S+=Cs(O-z*(L-$)*.5,C-U*(L-$)*.5,O-z*L,C-U*L,O+z*$,C+U*$,v,!1)+2:h.cap==="square"&&(S+=bw(O,C,z,U,L,$,!1,v)));const Z=mw*mw;for(let re=_;re<S+_-2;++re)T=v[re*2],R=v[re*2+1],O=v[(re+1)*2],C=v[(re+1)*2+1],P=v[(re+2)*2],D=v[(re+2)*2+1],!(Math.abs(T*(C-D)+O*(D-R)+P*(R-C))<Z)&&o.push(re,re+1,re+2)}function BB(n,e,t,s){const a=c1;if(n.length===0)return;const o=n[0],u=n[1],h=n[n.length-2],f=n[n.length-1],d=e||Math.abs(o-h)<a&&Math.abs(u-f)<a,g=t,m=n.length/2,b=g.length/2;for(let v=0;v<m;v++)g.push(n[v*2]),g.push(n[v*2+1]);for(let v=0;v<m-1;v++)s.push(b+v,b+v+1);d&&s.push(b+m-1,b)}function h1(n,e,t,s,a,o,u){const h=TD(n,e,2);if(!h)return;for(let d=0;d<h.length;d+=3)o[u++]=h[d]+a,o[u++]=h[d+1]+a,o[u++]=h[d+2]+a;let f=a*s;for(let d=0;d<n.length;d+=2)t[f]=n[d],t[f+1]=n[d+1],f+=s}const zB=[],jB={extension:{type:ge.ShapeBuilder,name:"polygon"},build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return!0},triangulate(n,e,t,s,a,o){h1(n,zB,e,t,s,a,o)}},UB={extension:{type:ge.ShapeBuilder,name:"rectangle"},build(n,e){const t=n,s=t.x,a=t.y,o=t.width,u=t.height;return o>0&&u>0?(e[0]=s,e[1]=a,e[2]=s+o,e[3]=a,e[4]=s+o,e[5]=a+u,e[6]=s,e[7]=a+u,!0):!1},triangulate(n,e,t,s,a,o){let u=0;s*=t,e[s+u]=n[0],e[s+u+1]=n[1],u+=t,e[s+u]=n[2],e[s+u+1]=n[3],u+=t,e[s+u]=n[6],e[s+u+1]=n[7],u+=t,e[s+u]=n[4],e[s+u+1]=n[5],u+=t;const h=s/t;a[o++]=h,a[o++]=h+1,a[o++]=h+2,a[o++]=h+1,a[o++]=h+3,a[o++]=h+2}},LB={extension:{type:ge.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,!0},triangulate(n,e,t,s,a,o){let u=0;s*=t,e[s+u]=n[0],e[s+u+1]=n[1],u+=t,e[s+u]=n[2],e[s+u+1]=n[3],u+=t,e[s+u]=n[4],e[s+u+1]=n[5];const h=s/t;a[o++]=h,a[o++]=h+1,a[o++]=h+2}},IB=new Me,NB=new nt;function qB(n,e,t,s){const a=e.matrix?n.copyFrom(e.matrix).invert():n.identity();if(e.textureSpace==="local"){const u=t.getBounds(NB);e.width&&u.pad(e.width);const{x:h,y:f}=u,d=1/u.width,g=1/u.height,m=-h*d,b=-f*g,v=a.a,w=a.b,S=a.c,_=a.d;a.a*=d,a.b*=d,a.c*=g,a.d*=g,a.tx=m*v+b*S+a.tx,a.ty=m*w+b*_+a.ty}else a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height);const o=e.texture.source.style;return!(e.fill instanceof Si)&&o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update()),s&&a.append(IB.copyFrom(s).invert()),a}const Jc={};Yt.handleByMap(ge.ShapeBuilder,Jc);Yt.add(UB,jB,LB,cl,RB,OB);const GB=new nt,HB=new Me;function $B(n,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let a=0;a<n.instructions.length;a++){const o=n.instructions[a];if(o.action==="texture")FB(o.data,s,t);else if(o.action==="fill"||o.action==="stroke"){const u=o.action==="stroke",h=o.data.path.shapePath,f=o.data.style,d=o.data.hole;u&&d&&vw(d.shapePath,f,!0,s,t),d&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=d.shapePath.shapePrimitives),vw(h,f,u,s,t)}}}function FB(n,e,t){const s=[],a=Jc.rectangle,o=GB;o.x=n.dx,o.y=n.dy,o.width=n.dw,o.height=n.dh;const u=n.transform;if(!a.build(o,s))return;const{vertices:h,uvs:f,indices:d}=t,g=d.length,m=h.length/2;u&&l1(s,u),a.triangulate(s,h,2,m,d,g);const b=n.image,v=b.uvs;f.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const w=Sn.get(u1);w.indexOffset=g,w.indexSize=d.length-g,w.attributeOffset=m,w.attributeSize=h.length/2-m,w.baseColor=n.style,w.alpha=n.alpha,w.texture=b,w.geometryData=t,e.push(w)}function vw(n,e,t,s,a){const{vertices:o,uvs:u,indices:h}=a;n.shapePrimitives.forEach(({shape:f,transform:d,holes:g})=>{const m=[],b=Jc[f.type];if(!b.build(f,m))return;const v=h.length,w=o.length/2;let S="triangle-list";if(d&&l1(m,d),t){const A=f.closePath??!0,T=e;T.pixelLine?(BB(m,A,o,h),S="line-list"):DB(m,T,!1,A,o,h)}else if(g){const A=[],T=m.slice();VB(g).forEach(O=>{A.push(T.length/2),T.push(...O)}),h1(T,A,o,2,w,h,v)}else b.triangulate(m,o,2,w,h,v);const _=u.length/2,E=e.texture;if(E!==Ce.WHITE){const A=qB(HB,e,f,d);MB(o,2,w,u,_,2,o.length/2-w,A)}else kB(u,_,2,o.length/2-w);const M=Sn.get(u1);M.indexOffset=v,M.indexSize=h.length-v,M.attributeOffset=w,M.attributeSize=o.length/2-w,M.baseColor=e.color,M.alpha=e.alpha,M.texture=E,M.geometryData=a,M.topology=S,s.push(M)})}function VB(n){const e=[];for(let t=0;t<n.length;t++){const s=n[t].shape,a=[];Jc[s.type].build(s,a)&&e.push(a)}return e}class YB{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class XB{constructor(){this.instructions=new ES}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new TB({maxTextures:t}),this.instructions.reset()}get geometry(){return $e(ZO,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const ny=class rg{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){rg.defaultOptions.bezierSmoothness=e?.bezierSmoothness??rg.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),$B(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=Sn.get(XB,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:a}=this._gpuContextHash[e.uid],o=a.vertices.length,u=a.indices.length;for(let g=0;g<s.length;g++)s[g].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(o),h.ensureIndexBuffer(u),h.begin();for(let g=0;g<s.length;g++){const m=s[g];h.add(m)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const d=h.batches;for(let g=0;g<d.length;g++){const m=d[g];m.bindGroup=UD(m.textures.textures,m.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new YB;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(Sn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{Sn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};ny.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"graphicsContext"};ny.defaultOptions={bezierSmoothness:.5};let f1=ny;const WB=8,uc=11920929e-14,QB=1;function d1(n,e,t,s,a,o,u,h,f,d){const m=Math.min(.99,Math.max(0,d??f1.defaultOptions.bezierSmoothness));let b=(QB-m)/1;return b*=b,KB(e,t,s,a,o,u,h,f,n,b),n}function KB(n,e,t,s,a,o,u,h,f,d){ag(n,e,t,s,a,o,u,h,f,d,0),f.push(u,h)}function ag(n,e,t,s,a,o,u,h,f,d,g){if(g>WB)return;const m=(n+t)/2,b=(e+s)/2,v=(t+a)/2,w=(s+o)/2,S=(a+u)/2,_=(o+h)/2,E=(m+v)/2,M=(b+w)/2,A=(v+S)/2,T=(w+_)/2,R=(E+A)/2,O=(M+T)/2;if(g>0){let C=u-n,P=h-e;const D=Math.abs((t-u)*P-(s-h)*C),z=Math.abs((a-u)*P-(o-h)*C);if(D>uc&&z>uc){if((D+z)*(D+z)<=d*(C*C+P*P)){f.push(R,O);return}}else if(D>uc){if(D*D<=d*(C*C+P*P)){f.push(R,O);return}}else if(z>uc){if(z*z<=d*(C*C+P*P)){f.push(R,O);return}}else if(C=R-(n+u)/2,P=O-(e+h)/2,C*C+P*P<=d){f.push(R,O);return}}ag(n,e,m,b,E,M,R,O,f,d,g+1),ag(R,O,A,T,S,_,u,h,f,d,g+1)}const ZB=8,JB=11920929e-14,e3=1;function t3(n,e,t,s,a,o,u,h){const d=Math.min(.99,Math.max(0,h??f1.defaultOptions.bezierSmoothness));let g=(e3-d)/1;return g*=g,n3(e,t,s,a,o,u,n,g),n}function n3(n,e,t,s,a,o,u,h){og(u,n,e,t,s,a,o,h,0),u.push(a,o)}function og(n,e,t,s,a,o,u,h,f){if(f>ZB)return;const d=(e+s)/2,g=(t+a)/2,m=(s+o)/2,b=(a+u)/2,v=(d+m)/2,w=(g+b)/2;let S=o-e,_=u-t;const E=Math.abs((s-o)*_-(a-u)*S);if(E>JB){if(E*E<=h*(S*S+_*_)){n.push(v,w);return}}else if(S=v-(e+o)/2,_=w-(t+u)/2,S*S+_*_<=h){n.push(v,w);return}og(n,e,t,d,g,v,w,h,f+1),og(n,v,w,m,b,o,u,h,f+1)}function p1(n,e,t,s,a,o,u,h){let f=Math.abs(a-o);(!u&&a>o||u&&o>a)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(f/Math.PI)))),h=Math.max(h,3);let d=f/h,g=a;d*=u?-1:1;for(let m=0;m<h+1;m++){const b=Math.cos(g),v=Math.sin(g),w=e+b*s,S=t+v*s;n.push(w,S),g+=d}}function i3(n,e,t,s,a,o){const u=n[n.length-2],f=n[n.length-1]-t,d=u-e,g=a-t,m=s-e,b=Math.abs(f*m-d*g);if(b<1e-8||o===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const v=f*f+d*d,w=g*g+m*m,S=f*g+d*m,_=o*Math.sqrt(v)/b,E=o*Math.sqrt(w)/b,M=_*S/v,A=E*S/w,T=_*m+E*d,R=_*g+E*f,O=d*(E+M),C=f*(E+M),P=m*(_+A),D=g*(_+A),z=Math.atan2(C-R,O-T),U=Math.atan2(D-R,P-T);p1(n,T+e,R+t,o,z,U,d*g>m*f)}const Xo=Math.PI*2,lp={centerX:0,centerY:0,ang1:0,ang2:0},up=({x:n,y:e},t,s,a,o,u,h,f)=>{n*=t,e*=s;const d=a*n-o*e,g=o*n+a*e;return f.x=d+u,f.y=g+h,f};function s3(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,a=Math.cos(n),o=Math.sin(n),u=Math.cos(n+e),h=Math.sin(n+e);return[{x:a-o*s,y:o+a*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const _w=(n,e,t,s)=>{const a=n*s-e*t<0?-1:1;let o=n*t+e*s;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},r3=(n,e,t,s,a,o,u,h,f,d,g,m,b)=>{const v=Math.pow(a,2),w=Math.pow(o,2),S=Math.pow(g,2),_=Math.pow(m,2);let E=v*w-v*_-w*S;E<0&&(E=0),E/=v*_+w*S,E=Math.sqrt(E)*(u===h?-1:1);const M=E*a/o*m,A=E*-o/a*g,T=d*M-f*A+(n+t)/2,R=f*M+d*A+(e+s)/2,O=(g-M)/a,C=(m-A)/o,P=(-g-M)/a,D=(-m-A)/o,z=_w(1,0,O,C);let U=_w(O,C,P,D);h===0&&U>0&&(U-=Xo),h===1&&U<0&&(U+=Xo),b.centerX=T,b.centerY=R,b.ang1=z,b.ang2=U};function a3(n,e,t,s,a,o,u,h=0,f=0,d=0){if(o===0||u===0)return;const g=Math.sin(h*Xo/360),m=Math.cos(h*Xo/360),b=m*(e-s)/2+g*(t-a)/2,v=-g*(e-s)/2+m*(t-a)/2;if(b===0&&v===0)return;o=Math.abs(o),u=Math.abs(u);const w=Math.pow(b,2)/Math.pow(o,2)+Math.pow(v,2)/Math.pow(u,2);w>1&&(o*=Math.sqrt(w),u*=Math.sqrt(w)),r3(e,t,s,a,o,u,f,d,g,m,b,v,lp);let{ang1:S,ang2:_}=lp;const{centerX:E,centerY:M}=lp;let A=Math.abs(_)/(Xo/4);Math.abs(1-A)<1e-7&&(A=1);const T=Math.max(Math.ceil(A),1);_/=T;let R=n[n.length-2],O=n[n.length-1];const C={x:0,y:0};for(let P=0;P<T;P++){const D=s3(S,_),{x:z,y:U}=up(D[0],o,u,m,g,E,M,C),{x:F,y:Q}=up(D[1],o,u,m,g,E,M,C),{x:ee,y:ae}=up(D[2],o,u,m,g,E,M,C);d1(n,R,O,z,U,F,Q,ee,ae),R=ee,O=ae,S+=_}}function o3(n,e,t){const s=(u,h)=>{const f=h.x-u.x,d=h.y-u.y,g=Math.sqrt(f*f+d*d),m=f/g,b=d/g;return{len:g,nx:m,ny:b}},a=(u,h)=>{u===0?n.moveTo(h.x,h.y):n.lineTo(h.x,h.y)};let o=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){a(u,h),o=h;continue}const d=e[(u+1)%e.length],g=s(h,o),m=s(h,d);if(g.len<1e-4||m.len<1e-4){a(u,h),o=h;continue}let b=Math.asin(g.nx*m.ny-g.ny*m.nx),v=1,w=!1;g.nx*m.nx-g.ny*-m.ny<0?b<0?b=Math.PI+b:(b=Math.PI-b,v=-1,w=!0):b>0&&(v=-1,w=!0);const S=b/2;let _,E=Math.abs(Math.cos(S)*f/Math.sin(S));E>Math.min(g.len/2,m.len/2)?(E=Math.min(g.len/2,m.len/2),_=Math.abs(E*Math.sin(S)/Math.cos(S))):_=f;const M=h.x+m.nx*E+-m.ny*_*v,A=h.y+m.ny*E+m.nx*_*v,T=Math.atan2(g.ny,g.nx)+Math.PI/2*v,R=Math.atan2(m.ny,m.nx)-Math.PI/2*v;u===0&&n.moveTo(M+Math.cos(T)*_,A+Math.sin(T)*_),n.arc(M,A,_,T,R,w),o=h}}function l3(n,e,t,s){const a=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),o=(h,f,d)=>({x:h.x+(f.x-h.x)*d,y:h.y+(f.y-h.y)*d}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],d=f.radius??t;if(d<=0){h===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y);continue}const g=e[h],m=e[(h+2)%u],b=a(g,f);let v;if(b<1e-4)v=f;else{const _=Math.min(b/2,d);v=o(f,g,_/b)}const w=a(m,f);let S;if(w<1e-4)S=f;else{const _=Math.min(w/2,d);S=o(f,m,_/w)}h===0?n.moveTo(v.x,v.y):n.lineTo(v.x,v.y),n.quadraticCurveTo(f.x,f.y,S.x,S.y,s)}}const u3=new nt;class c3{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,a=s[s.length-2],o=s[s.length-1];return(a!==e||o!==t)&&s.push(e,t),this}arc(e,t,s,a,o,u){this._ensurePoly(!1);const h=this._currentPoly.points;return p1(h,e,t,s,a,o,u),this}arcTo(e,t,s,a,o){this._ensurePoly();const u=this._currentPoly.points;return i3(u,e,t,s,a,o),this}arcToSvg(e,t,s,a,o,u,h){const f=this._currentPoly.points;return a3(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,a,o),this}bezierCurveTo(e,t,s,a,o,u,h){this._ensurePoly();const f=this._currentPoly;return d1(this._currentPoly.points,f.lastX,f.lastY,e,t,s,a,o,u,h),this}quadraticCurveTo(e,t,s,a,o){this._ensurePoly();const u=this._currentPoly;return t3(this._currentPoly.points,u.lastX,u.lastY,e,t,s,a,o),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,a=s.length;for(let o=0;o<e.instructions.length;o++){const u=e.instructions[o];this[u.action](...u.data)}if(e.checkForHoles&&s.length-a>1){let o=null;for(let u=a;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const f=h.shape,d=o?.shape;d&&d.containsPolygon(f)?(o.holes||(o.holes=[]),o.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):o=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,a,o){return this.drawShape(new nt(e,t,s,a),o),this}circle(e,t,s,a){return this.drawShape(new Jg(e,t,s),a),this}poly(e,t,s){const a=new Vo(e);return a.closePath=t,this.drawShape(a,s),this}regularPoly(e,t,s,a,o=0,u){a=Math.max(a|0,3);const h=-1*Math.PI/2+o,f=Math.PI*2/a,d=[];for(let g=0;g<a;g++){const m=h-g*f;d.push(e+s*Math.cos(m),t+s*Math.sin(m))}return this.poly(d,!0,u),this}roundPoly(e,t,s,a,o,u=0,h){if(a=Math.max(a|0,3),o<=0)return this.regularPoly(e,t,s,a,u);const f=s*Math.sin(Math.PI/a)-.001;o=Math.min(o,f);const d=-1*Math.PI/2+u,g=Math.PI*2/a,m=(a-2)*Math.PI/a/2;for(let b=0;b<a;b++){const v=b*g+d,w=e+s*Math.cos(v),S=t+s*Math.sin(v),_=v+Math.PI+m,E=v-Math.PI-m,M=w+o*Math.cos(_),A=S+o*Math.sin(_),T=w+o*Math.cos(E),R=S+o*Math.sin(E);b===0?this.moveTo(M,A):this.lineTo(M,A),this.quadraticCurveTo(w,S,T,R,h)}return this.closePath()}roundShape(e,t,s=!1,a){return e.length<3?this:(s?l3(this,e,t,a):o3(this,e,t),this.closePath())}filletRect(e,t,s,a,o){if(o===0)return this.rect(e,t,s,a);const u=Math.min(s,a)/2,h=Math.min(u,Math.max(-u,o)),f=e+s,d=t+a,g=h<0?-h:0,m=Math.abs(h);return this.moveTo(e,t+m).arcTo(e+g,t+g,e+m,t,m).lineTo(f-m,t).arcTo(f-g,t+g,f,t+m,m).lineTo(f,d-m).arcTo(f-g,d-g,e+s-m,d,m).lineTo(e+m,d).arcTo(e+g,d-g,e,d-m,m).closePath()}chamferRect(e,t,s,a,o,u){if(o<=0)return this.rect(e,t,s,a);const h=Math.min(o,Math.min(s,a)/2),f=e+s,d=t+a,g=[e+h,t,f-h,t,f,t+h,f,d-h,f-h,d,e+h,d,e,d-h,e,t+h];for(let m=g.length-1;m>=2;m-=2)g[m]===g[m-2]&&g[m-1]===g[m-3]&&g.splice(m-1,2);return this.poly(g,!0,u)}ellipse(e,t,s,a,o){return this.drawShape(new ey(e,t,s,a),o),this}roundRect(e,t,s,a,o,u){return this.drawShape(new ty(e,t,s,a,o),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Vo,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Vo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,a=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const o=t.transform,u=s;s=o.a*s+o.c*a+o.tx,a=o.b*u+o.d*a+o.ty}this._currentPoly.points.push(s,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const a=t[s],o=a.shape.getBounds(u3);a.transform?e.addRect(o,a.transform):e.addRect(o)}return e}}class wi{constructor(e,t=!1){this.instructions=[],this.uid=it("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?DD(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new c3(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,a,o){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Bt.shared);let f=0,d=0;if(!u||u.action!=="bezierCurveTo")f=h.x,d=h.y;else{f=u.data[2],d=u.data[3];const g=h.x,m=h.y;f=g+(g-f),d=m+(m-d)}return this.instructions.push({action:"bezierCurveTo",data:[f,d,e,t,s,a,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(Bt.shared);let u=0,h=0;if(!a||a.action!=="quadraticCurveTo")u=o.x,h=o.y;else{u=a.data[0],h=a.data[1];const f=o.x,d=o.y;u=f+(f-u),h=d+(d-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,a,o){return this.instructions.push({action:"rect",data:[e,t,s,a,o]}),this._dirty=!0,this}circle(e,t,s,a){return this.instructions.push({action:"circle",data:[e,t,s,a]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,a,o,u,h){o||(o=a/2);const f=-1*Math.PI/2+u,d=s*2,g=Math.PI*2/d,m=[];for(let b=0;b<d;b++){const v=b%2?o:a,w=b*g+f;m.push(e+v*Math.cos(w),t+v*Math.sin(w))}return this.poly(m,!0,h),this}clone(e=!1){const t=new wi;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const a=this.instructions[s];t.instructions.push({action:a.action,data:a.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,a=e.c,o=e.d,u=e.tx,h=e.ty;let f=0,d=0,g=0,m=0,b=0,v=0,w=0,S=0;for(let _=0;_<this.instructions.length;_++){const E=this.instructions[_],M=E.data;switch(E.action){case"moveTo":case"lineTo":f=M[0],d=M[1],M[0]=t*f+a*d+u,M[1]=s*f+o*d+h;break;case"bezierCurveTo":g=M[0],m=M[1],b=M[2],v=M[3],f=M[4],d=M[5],M[0]=t*g+a*m+u,M[1]=s*g+o*m+h,M[2]=t*b+a*v+u,M[3]=s*b+o*v+h,M[4]=t*f+a*d+u,M[5]=s*f+o*d+h;break;case"quadraticCurveTo":g=M[0],m=M[1],f=M[2],d=M[3],M[0]=t*g+a*m+u,M[1]=s*g+o*m+h,M[2]=t*f+a*d+u,M[3]=s*f+o*d+h;break;case"arcToSvg":f=M[5],d=M[6],w=M[0],S=M[1],M[0]=t*w+a*S,M[1]=s*w+o*S,M[5]=t*f+a*d+u,M[6]=s*f+o*d+h;break;case"circle":M[4]=Eo(M[3],e);break;case"rect":M[4]=Eo(M[4],e);break;case"ellipse":M[8]=Eo(M[8],e);break;case"roundRect":M[5]=Eo(M[5],e);break;case"addPath":M[0].transform(e);break;case"poly":M[2]=Eo(M[2],e);break;default:Fe("unknown transform action",E.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Eo(n,e){return n?n.prepend(e):e.clone()}function Je(n,e,t){const s=n.getAttribute(e);return s?Number(s):t}function h3(n,e){const t=n.querySelectorAll("defs");for(let s=0;s<t.length;s++){const a=t[s];for(let o=0;o<a.children.length;o++){const u=a.children[o];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=f3(u);break;case"radialgradient":e.defs[u.id]=d3();break}}}}function f3(n){const e=Je(n,"x1",0),t=Je(n,"y1",0),s=Je(n,"x2",1),a=Je(n,"y2",0),o=n.getAttribute("gradientUnits")||"objectBoundingBox",u=new Si(e,t,s,a,o==="objectBoundingBox"?"local":"global");for(let h=0;h<n.children.length;h++){const f=n.children[h],d=Je(f,"offset",0),g=zt.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(d,g)}return u}function d3(n){return Fe("[SVG Parser] Radial gradients are not yet supported"),new Si(0,0,1,0)}function ww(n){const e=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const xw={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function g1(n,e){const t=n.getAttribute("style"),s={},a={},o={strokeStyle:s,fillStyle:a,useFill:!1,useStroke:!1};for(const u in xw){const h=n.getAttribute(u);h&&Sw(e,o,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[d,g]=f.split(":");xw[d]&&Sw(e,o,d,g.trim())}}return{strokeStyle:o.useStroke?s:null,fillStyle:o.useFill?a:null,useFill:o.useFill,useStroke:o.useStroke}}function Sw(n,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const a=ww(s);e.strokeStyle.fill=n.defs[a]}else e.strokeStyle.color=zt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const a=ww(s);e.fillStyle.fill=n.defs[a]}else e.fillStyle.color=zt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function p3(n){if(n.length<=2)return!0;const e=n.map(h=>h.area).sort((h,f)=>f-h),[t,s]=e,a=e[e.length-1],o=t/s,u=s/a;return!(o>3&&u<2)}function g3(n){return n.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function y3(n){const e=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],a=[];for(let g=0;g<t.length;g+=2)g+1<t.length&&(s.push(t[g]),a.push(t[g+1]));if(s.length===0||a.length===0)return 0;const o=Math.min(...s),u=Math.max(...s),h=Math.min(...a),f=Math.max(...a);return(u-o)*(f-h)}function Aw(n,e){const t=new wi(n,!1);for(const s of t.instructions)e.instructions.push(s)}function m3(n,e){if(typeof n=="string"){const u=document.createElement("div");u.innerHTML=n.trim(),n=u.querySelector("svg")}const t={context:e,defs:{},path:new wi};h3(n,t);const s=n.children,{fillStyle:a,strokeStyle:o}=g1(n,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&y1(h,t,a,o)}return e}function y1(n,e,t,s){const a=n.children,{fillStyle:o,strokeStyle:u}=g1(n,e);o&&t?t={...t,...o}:o&&(t=o),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let f,d,g,m,b,v,w,S,_,E,M,A,T,R,O,C,P;switch(n.nodeName.toLowerCase()){case"path":{R=n.getAttribute("d");const D=n.getAttribute("fill-rule"),z=g3(R),U=D==="evenodd",F=z.length>1;if(U&&F){const ee=z.map(L=>({path:L,area:y3(L)}));if(ee.sort((L,$)=>$.area-L.area),z.length>3||!p3(ee))for(let L=0;L<ee.length;L++){const $=ee[L],Z=L===0;e.context.beginPath();const re=new wi(void 0,!0);Aw($.path,re),e.context.path(re),Z?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let L=0;L<ee.length;L++){const $=ee[L],Z=L%2===1;e.context.beginPath();const re=new wi(void 0,!0);Aw($.path,re),e.context.path(re),Z?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const ee=D?D==="evenodd":!0;O=new wi(R,ee),e.context.path(O),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":w=Je(n,"cx",0),S=Je(n,"cy",0),_=Je(n,"r",0),e.context.ellipse(w,S,_,_),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":f=Je(n,"x",0),d=Je(n,"y",0),C=Je(n,"width",0),P=Je(n,"height",0),E=Je(n,"rx",0),M=Je(n,"ry",0),E||M?e.context.roundRect(f,d,C,P,E||M):e.context.rect(f,d,C,P),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":w=Je(n,"cx",0),S=Je(n,"cy",0),E=Je(n,"rx",0),M=Je(n,"ry",0),e.context.beginPath(),e.context.ellipse(w,S,E,M),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":g=Je(n,"x1",0),m=Je(n,"y1",0),b=Je(n,"x2",0),v=Je(n,"y2",0),e.context.beginPath(),e.context.moveTo(g,m),e.context.lineTo(b,v),s&&e.context.stroke(s);break;case"polygon":T=n.getAttribute("points"),A=T.match(/\d+/g).map(D=>parseInt(D,10)),e.context.poly(A,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":T=n.getAttribute("points"),A=T.match(/\d+/g).map(D=>parseInt(D,10)),e.context.poly(A,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Fe(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}h&&(t=null);for(let D=0;D<a.length;D++)y1(a[D],e,t,s)}function b3(n){return zt.isColorLike(n)}function Ew(n){return n instanceof Zc}function Tw(n){return n instanceof Si}function v3(n){return n instanceof Ce}function _3(n,e,t){const s=zt.shared.setValue(e??0);return n.color=s.toNumber(),n.alpha=s.alpha===1?t.alpha:s.alpha,n.texture=Ce.WHITE,{...t,...n}}function w3(n,e,t){return n.texture=e,{...t,...n}}function Mw(n,e,t){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...t,...n}}function kw(n,e,t){return e.buildGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,n.textureSpace=e.textureSpace,{...t,...n}}function x3(n,e){const t={...e,...n},s=zt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function Is(n,e){if(n==null)return null;const t={},s=n;return b3(n)?_3(t,n,e):v3(n)?w3(t,n,e):Ew(n)?Mw(t,n,e):Tw(n)?kw(t,n,e):s.fill&&Ew(s.fill)?Mw(s,s.fill,e):s.fill&&Tw(s.fill)?kw(s,s.fill,e):x3(s,e)}function Uc(n,e){const{width:t,alignment:s,miterLimit:a,cap:o,join:u,pixelLine:h,...f}=e,d=Is(n,f);return d?{width:t,alignment:s,miterLimit:a,cap:o,join:u,pixelLine:h,...d}:null}const S3=new Bt,Cw=new Me,iy=class Fn extends Xn{constructor(){super(...arguments),this.uid=it("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new wi,this._transform=new Me,this._fillStyle={...Fn.defaultFillStyle},this._strokeStyle={...Fn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bn,this._boundsDirty=!0}clone(){const e=new Fn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Is(e,Fn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Uc(e,Fn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Is(e,Fn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Is(e,Fn.defaultStrokeStyle),this}texture(e,t,s,a,o,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:a||0,dw:o||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?zt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new wi,this}fill(e,t){let s;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a?.action==="stroke"?s=a.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&($e(Dt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Is(e,Fn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s?.action==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Uc(e,Fn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,a,o,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,a,o,u),this}arcTo(e,t,s,a,o){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*a+u.tx,u.b*s+u.d*a+u.ty,o),this}arcToSvg(e,t,s,a,o,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,s,a,o,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,s,a,o,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*s+f.c*a+f.tx,f.b*s+f.d*a+f.ty,f.a*o+f.c*u+f.tx,f.b*o+f.d*u+f.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,s,a){return this._tick++,this._activePath.ellipse(e,t,s,a,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,a=this._activePath.instructions,o=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=o,a[0].data[1]=u,this):(this._activePath.moveTo(o,u),this)}quadraticCurveTo(e,t,s,a,o){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*a+u.tx,u.b*s+u.d*a+u.ty,o),this}rect(e,t,s,a){return this._tick++,this._activePath.rect(e,t,s,a,this._transform.clone()),this}roundRect(e,t,s,a,o){return this._tick++,this._activePath.roundRect(e,t,s,a,o,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,a,o=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,a,o,u),this}roundPoly(e,t,s,a,o,u){return this._tick++,this._activePath.roundPoly(e,t,s,a,o,u),this}roundShape(e,t,s,a){return this._tick++,this._activePath.roundShape(e,t,s,a),this}filletRect(e,t,s,a,o){return this._tick++,this._activePath.filletRect(e,t,s,a,o),this}chamferRect(e,t,s,a,o,u){return this._tick++,this._activePath.chamferRect(e,t,s,a,o,u),this}star(e,t,s,a,o=0,u=0){return this._tick++,this._activePath.star(e,t,s,a,o,u,this._transform.clone()),this}svg(e){return this._tick++,m3(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,a,o,u){return e instanceof Me?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,a,o,u),this)}transform(e,t,s,a,o,u){return e instanceof Me?(this._transform.append(e),this):(Cw.set(e,t,s,a,o,u),this._transform.append(Cw),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],a=s.action;if(a==="fill"){const o=s.data;e.addBounds(o.path.bounds)}else if(a==="texture"){const o=s.data;e.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(a==="stroke"){const o=s.data,u=o.style.alignment,h=o.style.width*(1-u),f=o.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let a=0;a<t.length;a++){const o=t[a],u=o.data,h=u.path;if(!o.action||!h)continue;const f=u.style,d=h.shapePath.shapePrimitives;for(let g=0;g<d.length;g++){const m=d[g].shape;if(!f||!m)continue;const b=d[g].transform,v=b?b.applyInverse(e,S3):e;if(o.action==="fill")s=m.contains(v.x,v.y);else{const S=f;s=m.strokeContains(v.x,v.y,S.width,S.alignment)}const w=u.hole;if(w){const S=w.shapePath?.shapePrimitives;if(S)for(let _=0;_<S.length;_++)S[_].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};iy.defaultFillStyle={color:16777215,alpha:1,texture:Ce.WHITE,matrix:null,fill:null,textureSpace:"local"};iy.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ce.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Us=iy;const sy=class Xr extends Xn{constructor(e={}){super(),this.uid=it("textStyle"),this._tick=0,A3(e);const t={...Xr.defaultTextStyle,...e};for(const s in t){const a=s;this[a]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Xr.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Xr.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Us.defaultFillStyle,...e},()=>{this._fill=Is({...this._originalFill},Us.defaultFillStyle)})),this._fill=Is(e===0?"black":e,Us.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Us.defaultStrokeStyle,...e},()=>{this._stroke=Uc({...this._originalStroke},Us.defaultStrokeStyle)})),this._stroke=Uc(e,Us.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Xr.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Xr({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const s=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(s),this._originalFill?.texture&&this._originalFill.texture.destroy(s),this._stroke?.texture&&this._stroke.texture.destroy(s),this._originalStroke?.texture&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,a,o)=>(s[a]===o||(s[a]=o,t?.(a,o),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(zt.isColorLike(e)||e instanceof Si||e instanceof Zc)}};sy.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};sy.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Lc=sy;function A3(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Lc.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){$e(Dt,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(zt.isColorLike(t))s.color=t;else if(t instanceof Si||t instanceof Zc)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");n.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if($e(Dt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Fe("The number of fill colors must match the number of fill gradient stops.");const t=new Si({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),a=e.fill.map(o=>zt.shared.setValue(o).toNumber());s.forEach((o,u)=>{t.addColorStop(o,a[u])}),n.fill={fill:t}}}class E3{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=et.get().createCanvas();s.width=e,s.height=t;const a=s.getContext("2d");return{canvas:s,context:a}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Dc(e),t=Dc(t);const a=(e<<17)+(t<<1);this._canvasPool[a]||(this._canvasPool[a]=[]);let o=this._canvasPool[a].pop();return o||(o=this._createCanvasAndContext(e,t)),o}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:a}=t,o=(s<<17)+(a<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,a),this._canvasPool[o].push(e)}clear(){this._canvasPool={}}}const lg=new E3;Wc.register(lg);const Rw=1e5;function Ow(n,e,t,s=0){if(n.texture===Ce.WHITE&&!n.fill)return zt.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Zc){const a=n.fill,o=e.createPattern(a.texture.source.resource,"repeat"),u=a.transform.copyTo(Me.shared);return u.scale(a.texture.frame.width,a.texture.frame.height),o.setTransform(u),o}else if(n.fill instanceof Si){const a=n.fill,o=a.type==="linear",u=a.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let d,g=!1;if(o){const{start:m,end:b}=a;d=e.createLinearGradient(m.x*h,m.y*f,b.x*h,b.y*f),g=Math.abs(b.x-m.x)<Math.abs((b.y-m.y)*.1)}else{const{center:m,innerRadius:b,outerCenter:v,outerRadius:w}=a;d=e.createRadialGradient(m.x*h,m.y*f,b*h,v.x*h,v.y*f,w*h)}if(g&&u&&t){const m=t.lineHeight/f;for(let b=0;b<t.lines.length;b++){const v=(b*t.lineHeight+s/2)/f;a.colorStops.forEach(w=>{const S=v+w.offset*m;d.addColorStop(Math.floor(S*Rw)/Rw,zt.shared.setValue(w.color).toHex())})}}else a.colorStops.forEach(m=>{d.addColorStop(m.offset,zt.shared.setValue(m.color).toHex())});return d}}else{const a=e.createPattern(n.texture.source.resource,"repeat"),o=n.matrix.copyTo(Me.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),a.setTransform(o),a}return Fe("FillStyle not recognised",n),"red"}const m1=class b1 extends ZS{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...b1.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ce.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const a=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const o=ig(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/a):s.fontSize=this.baseRenderedFontSize=a,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Bc?t.textureStyle:new Bc(t.textureStyle)),this.fontMetrics=mc.measureFont(o),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){const t=mc.graphemeSegmenter(e).filter(_=>!this._currentChars.includes(_)).filter((_,E,M)=>M.indexOf(_)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:a,context:o}=s.canvasAndContext,u=s.texture.source;const h=this._style;let f=this._currentX,d=this._currentY,g=this._currentMaxCharHeight;const m=this.baseRenderedFontSize/this.baseMeasurementFontSize,b=this._padding*m;let v=!1;const w=a.width/this.resolution,S=a.height/this.resolution;for(let _=0;_<t.length;_++){const E=t[_],M=mc.measureText(E,h,a,!1);M.lineHeight=M.height;const A=M.width*m,T=Math.ceil((h.fontStyle==="italic"?2:1)*A),R=M.height*m,O=T+b*2,C=R+b*2;if(v=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(v=!0,g=Math.ceil(Math.max(C,g))),f+O>w&&(d+=g,g=C,f=0,d+g>S)){u.update();const D=this._nextPage();a=D.canvasAndContext.canvas,o=D.canvasAndContext.context,u=D.texture.source,f=0,d=0,g=0}const P=A/m-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:P,kerning:{}},v){this._drawGlyph(o,M,f+b,d+b,m,h);const D=u.width*m,z=u.height*m,U=new nt(f/D*u.width,d/z*u.height,O/D*u.width,C/z*u.height);this.chars[E].texture=new Ce({source:u,frame:U}),f+=Math.ceil(O)}}u.update(),this._currentX=f,this._currentY=d,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(t,o)}get pageTextures(){return $e(Dt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let a=0;a<e.length;a++){const o=e[a];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=s[o];f||(f=s[o]=t.measureText(o).width);let d=s[h];d||(d=s[h]=t.measureText(h).width);let g=t.measureText(o+h).width,m=g-(f+d);m&&(this.chars[o].kerning[h]=m),g=t.measureText(o+h).width,m=g-(f+d),m&&(this.chars[h].kerning[o]=m)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=lg.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),a=new Ce({source:new Fs({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(a.source.style=this._textureStyle);const o={canvasAndContext:t,texture:a};return this.pages[this._currentPageIndex]=o,o}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=ig(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const a=t._stroke,o=a?.width??0;if(a&&(e.lineWidth=o,e.lineJoin=a.join,e.miterLimit=a.miterLimit,e.strokeStyle=Ow(a,e)),t._fill&&(e.fillStyle=Ow(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=zt.shared.setValue(u.color).toArray(),f=u.blur*s,d=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*d,e.shadowOffsetY=Math.sin(u.angle)*d}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,a,o,u){const h=t.text,f=t.fontProperties,g=(u._stroke?.width??0)*o,m=s+g/2,b=a-g/2,v=f.descent*o,w=t.lineHeight*o;let S=!1;u.stroke&&g&&(S=!0,e.strokeText(h,m,b+w-v));const{shadowBlur:_,shadowOffsetX:E,shadowOffsetY:M}=e;u._fill&&(S&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,m,b+w-v)),S&&(e.shadowBlur=_,e.shadowOffsetX=E,e.shadowOffsetY=M)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];lg.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};m1.defaultOptions={textureSize:512,style:new Lc,mipmap:!0};let Pw=m1;function T3(n,e,t,s){const a={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};a.offsetY=t.baseLineOffset;let o=a.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},d=t.baseMeasurementFontSize/e.fontSize,g=e.letterSpacing*d,m=e.wordWrapWidth*d,b=e.lineHeight?e.lineHeight*d:t.lineHeight,v=e.wordWrap&&e.breakWords,w=E=>{const M=o.width;for(let A=0;A<f.index;A++){const T=E.positions[A];o.chars.push(E.chars[A]),o.charPositions.push(T+M)}o.width+=E.width,h=!1,f.width=0,f.index=0,f.chars.length=0},S=()=>{let E=o.chars.length-1;if(s){let M=o.chars[E];for(;M===" ";)o.width-=t.chars[M].xAdvance,M=o.chars[--E]}a.width=Math.max(a.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,a.lines.push(o),a.height+=b},_=E=>E-g>m;for(let E=0;E<n.length+1;E++){let M;const A=E===n.length;A||(M=n[E]);const T=t.chars[M]||t.chars[" "];if(/(?:\s)/.test(M)||M==="\r"||M===`
`||A){if(!h&&e.wordWrap&&_(o.width+f.width)?(S(),w(f),A||o.charPositions.push(0)):(f.start=o.width,w(f),A||o.charPositions.push(0)),M==="\r"||M===`
`)S();else if(!A){const P=T.xAdvance+(T.kerning[u]||0)+g;o.width+=P,o.spaceWidth=P,o.spacesIndex.push(o.charPositions.length),o.chars.push(M)}}else{const C=T.kerning[u]||0,P=T.xAdvance+C+g;v&&_(o.width+f.width+P)&&(w(f),S()),f.positions[f.index++]=f.width+C,f.chars.push(M),f.width+=P}u=M}return S(),e.align==="center"?M3(a):e.align==="right"?k3(a):e.align==="justify"&&C3(a),a}function M3(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],s=n.width/2-t.width/2;for(let a=0;a<t.charPositions.length;a++)t.charPositions[a]+=s}}function k3(n){for(let e=0;e<n.lines.length;e++){const t=n.lines[e],s=n.width-t.width;for(let a=0;a<t.charPositions.length;a++)t.charPositions[a]+=s}}function C3(n){const e=n.width;for(let t=0;t<n.lines.length;t++){const s=n.lines[t];let a=0,o=s.spacesIndex[a++],u=0;const h=s.spacesIndex.length,d=(e-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===o&&(o=s.spacesIndex[a++],u+=d),s.charPositions[g]+=u}}function R3(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const e=[];for(let t=0,s=n.length;t<s;t++){const a=n[t];if(Array.isArray(a)){if(a.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${a.length}.`);if(a[0].length===0||a[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=a[0].charCodeAt(0),u=a[1].charCodeAt(0);if(u<o)throw new Error("[BitmapFont]: Invalid character range.");for(let h=o,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(a))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let cc=0;class O3{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=JS(1e3)}getFont(e,t){let s=`${t.fontFamily}-bitmap`,a=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,a=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,a=!1),!He.has(s)){const u=Object.create(t);u.lineHeight=0;const h=new Pw({style:u,overrideFill:a,overrideSize:!0,...this.defaultOptions});cc++,cc>50&&Fe("BitmapText",`You have dynamically created ${cc} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),h.once("destroy",()=>{cc--,He.remove(s)}),He.set(s,h)}const o=He.get(s);return o.ensureCharacters?.(e),o}getLayout(e,t,s=!0){const a=this.getFont(e,t),o=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(o))return this.measureCache.get(o);const u=mc.graphemeSegmenter(e),h=T3(u,t,a,s);return this.measureCache.set(o,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},$e(Dt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t?.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const a=t.style,o=a instanceof Lc?a:new Lc(a),u=t.dynamicFill??this._canUseTintForStyle(o),h=new Pw({style:o,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),f=R3(t.chars);return h.ensureCharacters(f.join("")),He.set(`${s}-bitmap`,h),h.once("destroy",()=>He.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=He.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const Dw=new O3;class v1 extends ZS{constructor(e,t){super();const{textures:s,data:a}=e;Object.keys(a.pages).forEach(o=>{const u=a.pages[parseInt(o,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(a.chars).forEach(o=>{const u=a.chars[o],{frame:h,source:f,rotate:d}=s[u.page],g=Le.transformRectCoords(u,h,d,new nt),m=new Ce({frame:g,orig:new nt(0,0,u.width,u.height),source:f,rotate:d});this.chars[o]={id:o.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:m}}),this.baseRenderedFontSize=a.fontSize,this.baseMeasurementFontSize=a.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:a.fontSize},this.baseLineOffset=a.baseLineOffset,this.lineHeight=a.lineHeight,this.fontFamily=a.fontFamily,this.distanceField=a.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Dw.install(e)}static uninstall(e){Dw.uninstall(e)}}const cp={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const e=n.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const m in e){const b=e[m].match(/^[a-z]+/gm)[0],v=e[m].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),w={};for(const S in v){const _=v[S].split("="),E=_[0],M=_[1].replace(/"/gm,""),A=parseFloat(M),T=isNaN(A)?M:A;w[E]=T}t[b].push(w)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[a]=t.info,[o]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(a.size,10),s.fontFamily=a.face,s.lineHeight=parseInt(o.lineHeight,10);const h=t.page;for(let m=0;m<h.length;m++)s.pages.push({id:parseInt(h[m].id,10)||0,file:h[m].file});const f={};s.baseLineOffset=s.lineHeight-parseInt(o.base,10);const d=t.char;for(let m=0;m<d.length;m++){const b=d[m],v=parseInt(b.id,10);let w=b.letter??b.char??String.fromCharCode(v);w==="space"&&(w=" "),f[v]=w,s.chars[w]={id:v,page:parseInt(b.page,10)||0,x:parseInt(b.x,10),y:parseInt(b.y,10),width:parseInt(b.width,10),height:parseInt(b.height,10),xOffset:parseInt(b.xoffset,10),yOffset:parseInt(b.yoffset,10),xAdvance:parseInt(b.xadvance,10),kerning:{}}}const g=t.kerning||[];for(let m=0;m<g.length;m++){const b=parseInt(g[m].first,10),v=parseInt(g[m].second,10),w=parseInt(g[m].amount,10);s.chars[f[v]].kerning[f[b]]=w}return s}},Bw={test(n){const e=n;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=n.getElementsByTagName("info")[0],s=n.getElementsByTagName("common")[0],a=n.getElementsByTagName("distanceField")[0];a&&(e.distanceField={type:a.getAttribute("fieldType"),range:parseInt(a.getAttribute("distanceRange"),10)});const o=n.getElementsByTagName("page"),u=n.getElementsByTagName("char"),h=n.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let d=0;d<o.length;d++)e.pages.push({id:parseInt(o[d].getAttribute("id"),10)||0,file:o[d].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let d=0;d<u.length;d++){const g=u[d],m=parseInt(g.getAttribute("id"),10);let b=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(m);b==="space"&&(b=" "),f[m]=b,e.chars[b]={id:m,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let d=0;d<h.length;d++){const g=parseInt(h[d].getAttribute("first"),10),m=parseInt(h[d].getAttribute("second"),10),b=parseInt(h[d].getAttribute("amount"),10);e.chars[f[m]].kerning[f[g]]=b}return e}},zw={test(n){return typeof n=="string"&&n.match(/<font(\s|>)/)?Bw.test(et.get().parseXML(n)):!1},parse(n){return Bw.parse(et.get().parseXML(n))}},P3=[".xml",".fnt"],D3={extension:{type:ge.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof v1,getCacheableAssets(n,e){const t={};return n.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},B3={extension:{type:ge.LoadParser,priority:ss.Normal},name:"loadBitmapFont",id:"bitmap-font",test(n){return P3.includes(rn.extname(n).toLowerCase())},async testParse(n){return cp.test(n)||zw.test(n)},async parse(n,e,t){const s=cp.test(n)?cp.parse(n):zw.parse(n),{src:a}=e,{pages:o}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let m=0;m<o.length;++m){const b=o[m].file;let v=rn.join(rn.dirname(a),b);v=Kp(v,a),u.push({src:v,data:h})}const f=await t.load(u),d=u.map(m=>f[m.src]);return new v1({data:s,textures:d},a)},async load(n,e){return await(await et.get().fetch(n)).text()},async unload(n,e,t){await Promise.all(n.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),n.destroy()}};class z3{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const j3={extension:{type:ge.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(e=>e instanceof Ce),getCacheableAssets:(n,e)=>{const t={};return n.forEach(s=>{e.forEach((a,o)=>{t[s+(o===0?"":o+1)]=a})}),t}};async function _1(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const U3={extension:{type:ge.DetectionParser,priority:1},test:async()=>_1("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")},jw=["png","jpg","jpeg"],L3={extension:{type:ge.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...jw],remove:async n=>n.filter(e=>!jw.includes(e))},I3="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function eh(n){return I3?!1:document.createElement("video").canPlayType(n)!==""}const N3={extension:{type:ge.DetectionParser,priority:0},test:async()=>eh("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")},q3={extension:{type:ge.DetectionParser,priority:0},test:async()=>eh("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")},G3={extension:{type:ge.DetectionParser,priority:0},test:async()=>eh("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")},H3={extension:{type:ge.DetectionParser,priority:0},test:async()=>_1("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")},w1=class bc{constructor(){this.loadOptions={...bc.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{let a=null,o=null;if((t.parser||t.loadParser)&&(o=this._parserHash[t.parser||t.loadParser],t.loadParser&&Fe(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),o||Fe(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!o){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&h.test?.(e,t,this)){o=h;break}}if(!o)return Fe(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await o.load(e,t,this),s.parser=o;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await h.testParse?.(a,t,this)&&(a=await h.parse(a,t,this)||a,s.parser=h)}return a})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...bc.defaultOptions,...this.loadOptions,onProgress:t}:{...bc.defaultOptions,...this.loadOptions,...t||{}},{onProgress:a,onError:o,strategy:u,retryCount:h,retryDelay:f}=s;let d=0;const g={},m=zc(e),b=Pn(e,S=>({alias:[S],src:S,data:{}})),v=b.reduce((S,_)=>S+(_.progressSize||1),0),w=b.map(async S=>{const _=rn.toAbsolute(S.src);g[S.src]||(await this._loadAssetWithRetry(_,S,{onProgress:a,onError:o,strategy:u,retryCount:h,retryDelay:f},g),d+=S.progressSize||1,a&&a(d/v))});return await Promise.all(w),m?g[b[0].src]:g}async unload(e){const s=Pn(e,a=>({alias:[a],src:a})).map(async a=>{const o=rn.toAbsolute(a.src),u=this.promiseCache[o];if(u){const h=await u.promise;delete this.promiseCache[o],await u.parser?.unload?.(h,a,this)}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Fe("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Fe(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,a){let o=0;const{onError:u,strategy:h,retryCount:f,retryDelay:d}=s,g=m=>new Promise(b=>setTimeout(b,m));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),a[t.src]=await this.promiseCache[e].promise;return}catch(m){delete this.promiseCache[e],delete a[t.src],o++;const b=h!=="retry"||o>f;if(h==="retry"&&!b){u&&u(m,t),await g(d);continue}if(h==="skip"){u&&u(m,t);return}throw u&&u(m,t),new Error(`[Loader.load] Failed to load ${e}.
${m}`)}}};w1.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let $3=w1;function ca(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function ha(n,e){const t=n.split("?")[0],s=rn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const F3=".json",V3="application/json",Y3={extension:{type:ge.LoadParser,priority:ss.Low},name:"loadJson",id:"json",test(n){return ca(n,V3)||ha(n,F3)},async load(n){return await(await et.get().fetch(n)).json()}},X3=".txt",W3="text/plain",Q3={name:"loadTxt",id:"text",extension:{type:ge.LoadParser,priority:ss.Low,name:"loadTxt"},test(n){return ca(n,W3)||ha(n,X3)},async load(n){return await(await et.get().fetch(n)).text()}},K3=["normal","bold","100","200","300","400","500","600","700","800","900"],Z3=[".ttf",".otf",".woff",".woff2"],J3=["font/ttf","font/otf","font/woff","font/woff2"],ez=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function tz(n){const e=rn.extname(n),a=rn.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let o=a.length>0;for(const h of a)if(!h.match(ez)){o=!1;break}let u=a.join(" ");return o||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const nz=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function iz(n){return nz.test(n)?n:encodeURI(n)}const sz={extension:{type:ge.LoadParser,priority:ss.Low},name:"loadWebFont",id:"web-font",test(n){return ca(n,J3)||ha(n,Z3)},async load(n,e){const t=et.get().getFontFaceSet();if(t){const s=[],a=e.data?.family??tz(n),o=e.data?.weights?.filter(h=>K3.includes(h))??["normal"],u=e.data??{};for(let h=0;h<o.length;h++){const f=o[h],d=new FontFace(a,`url(${iz(n)})`,{...u,weight:f});await d.load(),t.add(d),s.push(d)}return He.has(`${a}-and-url`)?He.get(`${a}-and-url`).entries.push({url:n,faces:s}):He.set(`${a}-and-url`,{entries:[{url:n,faces:s}]}),s.length===1?s[0]:s}return Fe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){const e=Array.isArray(n)?n:[n],t=e[0].family,s=He.get(`${t}-and-url`),a=s.entries.find(o=>o.faces.some(u=>e.indexOf(u)!==-1));a.faces=a.faces.filter(o=>e.indexOf(o)===-1),a.faces.length===0&&(s.entries=s.entries.filter(o=>o!==a)),e.forEach(o=>{et.get().getFontFaceSet().delete(o)}),s.entries.length===0&&He.remove(`${t}-and-url`)}};function ry(n,e=1){const t=ua.RETINA_PREFIX?.exec(n);return t?parseFloat(t[1]):e}function ay(n,e,t){n.label=t,n._sourceOrigin=t;const s=new Ce({source:n,label:t}),a=()=>{delete e.promiseCache[t],He.has(t)&&He.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Fe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),a())}),s.once("destroy",()=>{n.destroyed||(Fe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),a())}),s}const rz=".svg",az="image/svg+xml",oz={extension:{type:ge.LoadParser,priority:ss.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return ca(n,az)||ha(n,rz)},async load(n,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?uz(n):lz(n,e,t,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function lz(n,e,t,s){const a=await et.get().fetch(n),o=et.get().createImage();o.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await a.text())}`,o.crossOrigin=s,await o.decode();const u=e.data?.width??o.width,h=e.data?.height??o.height,f=e.data?.resolution||ry(n),d=Math.ceil(u*f),g=Math.ceil(h*f),m=et.get().createCanvas(d,g),b=m.getContext("2d");b.imageSmoothingEnabled=!0,b.imageSmoothingQuality="high",b.drawImage(o,0,0,u*f,h*f);const{parseAsGraphicsContext:v,...w}=e.data??{},S=new Fs({resource:m,alphaMode:"premultiply-alpha-on-upload",resolution:f,...w});return ay(S,t,n)}async function uz(n){const t=await(await et.get().fetch(n)).text(),s=new Us;return s.svg(t),s}const cz=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Zr=null,ug=class{constructor(){Zr||(Zr=URL.createObjectURL(new Blob([cz],{type:"application/javascript"}))),this.worker=new Worker(Zr)}};ug.revokeObjectURL=function(){Zr&&(URL.revokeObjectURL(Zr),Zr=null)};const hz=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Jr=null;class x1{constructor(){Jr||(Jr=URL.createObjectURL(new Blob([hz],{type:"application/javascript"}))),this.worker=new Worker(Jr)}}x1.revokeObjectURL=function(){Jr&&(URL.revokeObjectURL(Jr),Jr=null)};let Uw=0,hp;class fz{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new ug;t.addEventListener("message",s=>{t.terminate(),ug.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){hp===void 0&&(hp=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<hp&&(this._createdWorkers++,e=new x1().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((a,o)=>{this._queue.push({id:e,arguments:t,resolve:a,reject:o})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[Uw]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Uw++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Lw=new fz,dz=[".jpeg",".jpg",".png",".webp",".avif"],pz=["image/jpeg","image/png","image/webp","image/avif"];async function gz(n,e){const t=await et.get().fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const s=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const S1={name:"loadTextures",id:"texture",extension:{type:ge.LoadParser,priority:ss.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return ca(n,pz)||ha(n,dz)},async load(n,e,t){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Lw.isImageBitmapSupported()?s=await Lw.loadImageBitmap(n,e):s=await gz(n,e):s=await new Promise((o,u)=>{s=et.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=n,s.complete?o(s):(s.onload=()=>{o(s)},s.onerror=u)});const a=new Fs({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||ry(n),...e.data});return ay(a,t,n)},unload(n){n.destroy(!0)}},yz=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let fp,dp;function mz(n,e,t){t===void 0&&!e.startsWith("data:")?n.crossOrigin=vz(e):t!==!1&&(n.crossOrigin=typeof t=="string"?t:"anonymous")}function bz(n){return new Promise((e,t)=>{n.addEventListener("canplaythrough",s),n.addEventListener("error",a),n.load();function s(){o(),e()}function a(u){o(),t(u)}function o(){n.removeEventListener("canplaythrough",s),n.removeEventListener("error",a)}})}function vz(n,e=globalThis.location){if(n.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function _z(){const n=[],e=[];for(const t of yz){const s=Fo.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;eh(s)&&(n.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:n,validVideoMime:e}}const wz={name:"loadVideo",id:"video",extension:{type:ge.LoadParser,name:"loadVideo"},test(n){if(!fp||!dp){const{validVideoExtensions:s,validVideoMime:a}=_z();fp=s,dp=a}const e=ca(n,dp),t=ha(n,fp);return e||t},async load(n,e,t){const s={...Fo.defaultOptions,resolution:e.data?.resolution||ry(n),alphaMode:e.data?.alphaMode||await zS(),...e.data},a=document.createElement("video"),o={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(o).forEach(f=>{const d=o[f];d!==void 0&&a.setAttribute(f,d)}),s.muted===!0&&(a.muted=!0),mz(a,n,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(n.startsWith("data:"))h=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const f=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();h=Fo.MIME_TYPES[f]||`video/${f}`}return u.src=n,h&&(u.type=h),new Promise(f=>{const d=async()=>{const g=new Fo({...s,resource:a});a.removeEventListener("canplay",d),e.data.preload&&await bz(a),f(ay(g,t,n))};s.preload&&!s.autoPlay&&a.load(),a.addEventListener("canplay",d),a.appendChild(u)})},unload(n){n.destroy(!0)}},A1={extension:{type:ge.ResolveParser,name:"resolveTexture"},test:S1.test,parse:n=>({resolution:parseFloat(ua.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})},xz={extension:{type:ge.ResolveParser,priority:-2,name:"resolveJson"},test:n=>ua.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:A1.parse};class Sz{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ua,this.loader=new $3,this.cache=He,this._backgroundLoader=new z3(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Fe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const t=e.texturePreference?.resolution??1,s=typeof t=="number"?[t]:t,a=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:a,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=zc(e),a=Pn(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(d=>!this.resolver.hasKey(d))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),o=this.resolver.resolve(a),u=await this._mapLoadToResolve(o,t);return s?u[a[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const a=this.resolver.resolveBundle(e),o={},u=Object.keys(a);let h=0;const f=[],d=()=>{t?.(f.reduce((m,b)=>m+b,0)/h)},g=u.map((m,b)=>{const v=a[m],w=Object.values(v),_=[...new Set(w.flat())].reduce((E,M)=>E+(M.progressSize||1),0);return f.push(0),h+=_,this._mapLoadToResolve(v,E=>{f[b]=E*_,d()}).then(E=>{o[m]=E})});return await Promise.all(g),s?o[e[0]]:o}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return He.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=He.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const a=await this.loader.load(s,t);this._backgroundLoader.active=!0;const o={};return s.forEach(u=>{const h=a[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(d=>{o[d]=h}),He.set(f,h)}),o}async unload(e){this._initialized||await this.init();const t=Pn(e).map(a=>typeof a!="string"?a.src:a),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Pn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(a=>this._unloadFromResolved(t[a]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{He.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,a)=>t.indexOf(s)===a),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Bo=new Sz;Yt.handleByList(ge.LoadParser,Bo.loader.parsers).handleByList(ge.ResolveParser,Bo.resolver.parsers).handleByList(ge.CacheParser,Bo.cache.parsers).handleByList(ge.DetectionParser,Bo.detections);Yt.add(j3,L3,U3,H3,N3,q3,G3,Y3,Q3,sz,oz,S1,wz,B3,D3,A1,xz);const Iw={loader:ge.LoadParser,resolver:ge.ResolveParser,cache:ge.CacheParser,detection:ge.DetectionParser};Yt.handle(ge.Asset,n=>{const e=n.ref;Object.entries(Iw).filter(([t])=>!!e[t]).forEach(([t,s])=>Yt.add(Object.assign(e[t],{extension:e[t].extension??s})))},n=>{const e=n.ref;Object.keys(Iw).filter(t=>!!e[t]).forEach(t=>Yt.remove(e[t]))});Yt.add(GO,HO);const Az="/editor/assets/sprites-BhC7gWu8.png",Fr=(n,e,t)=>{const s=({x:o,y:u,w:h,h:f,pivot:d})=>e==="x"?{...No(t,{x:-o-h-1,y:u}),w:h,h:f,pivot:{x:h-d.x,y:d.y}}:{...No(t,{x:o+2,y:u}),w:h,h:f,pivot:d};function*a(){yield[`door.frame.${n}.${e}.whole`,{frame:{...s({x:-41,y:0,w:40,h:64,pivot:{x:9,y:63}})}}],yield[`door.frame.${n}.${e}.far`,{frame:{...s({x:-18,y:0,w:17,h:57,pivot:{x:9,y:52}})}}],yield[`door.frame.${n}.${e}.near`,{frame:{...s({x:-41,y:6,w:20,h:58,pivot:{x:8,y:58}})}}],yield[`door.frame.${n}.${e}.top`,{frame:{...s({x:-57,y:-1,w:15,h:36,pivot:{x:0,y:36.5}})}}]}return Dg(a())},Ez={frames:{...Fr("generic","y",{x:580,y:415}),...Fr("generic","x",{x:582,y:415}),...Fr("moonbase","y",{x:752,y:232}),...Fr("moonbase","x",{x:915,y:232}),...Fr("moonbase.dark","y",{x:752,y:306}),...Fr("moonbase.dark","x",{x:915,y:306})}},Rs=(n,{x:e,y:t},s)=>{function*a(){yield[`${n}.left`,{frame:{x:e,y:t,...s}}],yield[`${n}.away`,{frame:{x:e+s.w+1,y:t,...s}}],yield[`${n}.towards`,{frame:{x:e,y:t+s.h+1,...s}}],yield[`${n}.right`,{frame:{x:e+s.w+1,y:t+s.h+1,...s}}]}return Object.fromEntries(a())},Xe=(n,e,{x:t,y:s},a,o=e)=>{function*u(){for(let h=0;h<e;h++)yield[`${n}.${h+1}`,{frame:{x:t+h%o*(a.w+1),y:s+Math.floor(h/o)*(a.h+1),...a}}]}return Object.fromEntries(u())},Nw=(n,{x:e,y:t},s,a=n.length,o)=>{function*u(){for(let h=0;h<n.length;h++)yield[o?`${o}.${n[h]}`:n[h],{frame:{x:e+h%a*(s.w+1),y:t+Math.floor(h/a)*(s.h+1),...s}}]}return Object.fromEntries(u())},Tz=(n,e,t,s)=>({...Xe(`${n}.left`,e,t,s),...Xe(`${n}.away`,e,No(t,{x:(s.w+1)*e}),s),...Xe(`${n}.towards`,e,No(t,{y:s.h+1}),s),...Xe(`${n}.right`,e,No(t,{x:(s.w+1)*e,y:s.h+1}),s)}),zo=(n,e)=>[...Sx(WM(1,e+1)).map(t=>`${n}.${String(t)}`)],Mz={frames:{...Nw(["share","save","open","pointer","eyedropper"],{x:640,y:10},{w:12,h:12},void 0,"editor.tool"),...Nw(["single","corridor","double","triple.line","triple.^","quad.square","quad.s","quad.31","quad.t","5.x"],{x:640,y:0},{w:9,h:9},void 0,"editor.addRoom")}},E1={" ":"space",",":"comma",";":"scolon",":":"colon",".":"dot","'":"sQuote","":"lQuote","":"rQuote","`":"backtick","<":"lt",">":"gt","?":"questMk","!":"exclMk","-":"hyph","/":"slash","\\":"bSlash"},_n=n=>E1[n].toUpperCase(),kz=n=>E1[n]??n,cg={w:32,h:16},Rn={w:16,h:56},me={w:32,h:28},se={w:24,h:24},hc={w:8,h:8},q4={h:10},ie=n=>({x:n.x*(se.w+1)+1,y:n.y*(se.h+1)+2}),_e=n=>({x:n.x*(me.w+1)+1,y:n.y*(me.h+1)+682}),Cz="",Rz="",Oz="",Pz="",Dz="",Bz="",zz=[{char:"a",width:8},{char:"b",width:8},{char:"c",width:7},{char:"d",width:8},{char:"e",width:8},{char:"f",width:6},{char:"g",width:8},{char:"h",width:8},{char:"i",width:4},{char:"j",width:5},{char:"k",width:8},{char:"l",width:5},{char:"m",width:9},{char:"n",width:8},{char:"o",width:8},{char:"p",width:8},{char:"q",width:8},{char:"r",width:5},{char:"s",width:6},{char:"t",width:6},{char:"u",width:8},{char:"v",width:8},{char:"w",width:9},{char:"x",width:8},{char:"y",width:8},{char:"z",width:6},{char:"?",width:6},{char:"!",width:4},{char:".",width:4},{char:",",width:4},{char:";",width:4},{char:":",width:3},{char:"/",width:7},{char:"\\",width:7},{char:"",width:4},{char:"",width:4},{char:"'",width:4},{char:"-",width:5}],jz=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_","#","","","","",{char:"",width:16},{char:Cz,width:16},{char:Rz,width:16}],Uz=[" ",_n("?"),_n("!"),_n("."),_n(","),_n(";"),_n(":"),_n("/"),_n("\\"),_n(""),_n(""),_n("'"),"`",_n("-"),"+","%","","","","","","","","","(",")","[","]","<",">","","","","EnterFullscreen","ExitFullscreen","Menu","*","@","",Oz,Pz,Dz,Bz,"","","^","","","",""],pp=(n,e,t=hc.h)=>{function*s(){let{x:a}=e;for(let o=0;o<n.length;o++){const u=n[o],h=typeof u=="string"?u:u.char,d=(typeof u=="string"?void 0:u.width)??hc.w;yield[`hud.char.${kz(h)}`,{frame:{x:a,y:e.y,...hc,w:d,h:t}}],a+=Math.max(d,hc.w)+1}}return Dg(s())},Lz={frames:{...pp(zz,{x:1,y:994},10),...pp(jz,{x:1,y:1005}),...pp(Uz,{x:1,y:1014})}},Te=(n,e)=>Object.assign([...n],{animationSpeed:e}),Iz={...Xe("dalek",2,ie({x:0,y:0}),se),"shadowMask.dalek":{frame:{...ie({x:2,y:0}),...se}},...Xe("bubbles.cold",2,ie({x:3,y:0}),se),headlessBase:{frame:{...ie({x:7,y:0}),...se}},...Xe("headlessBase",4,ie({x:8,y:0}),se),"headlessBase.all":{frame:{...ie({x:12,y:0}),...se}},...Tz("turtle",2,ie({x:0,y:3}),se),"shadowMask.turtle.away":{frame:{...ie({x:4,y:3}),...se}},"shadowMask.turtle.right":{frame:{...ie({x:4,y:4}),...se}},...Rs("cyberman",ie({x:6,y:3}),se),...Rs("skiHead.greenAndPink",ie({x:9,y:3}),{w:24,h:32}),...Rs("skiHead.starsAndStripes",ie({x:11,y:3}),{w:24,h:32}),"shadowMask.skiHead.away":{frame:{...ie({x:13,y:3}),...se,h:32}},"shadowMask.skiHead.right":{frame:{...ie({x:14,y:3}),...se,h:32}},...Rs("monkey",ie({x:0,y:7}),se),...Rs("computerBot",ie({x:3,y:7}),se),...Rs("elephant",ie({x:6,y:7}),se),...Xe("helicopterBug",4,ie({x:9,y:7}),se),"barrier.x":{frame:{...ie({x:17,y:0}),...se,pivot:{x:18,y:23}}},"barrier.y":{frame:{...ie({x:18,y:0}),...se,pivot:{x:6,y:23}}},"shadow.barrier.y":{frame:{...ie({x:19,y:0}),...se,pivot:{x:6,y:22}}},"shadowMask.barrier.y":{frame:{...ie({x:20,y:0}),...se,pivot:{x:6,y:22}}},"joystick.stick":{frame:{...ie({x:18,y:1}),...se}},"joystick.ball":{frame:{...ie({x:19,y:1}),...se}},"joystick.whole":{frame:{...ie({x:20,y:1}),...se}},"shadowMask.joystick":{frame:{...ie({x:21,y:1}),...se}},ball:{frame:{...ie({x:17,y:2}),...se}},"shadowMask.ball":{frame:{...ie({x:18,y:2}),...se}},"spikyBall.1":{frame:{...ie({x:20,y:2}),...se}},"spikyBall.2":{frame:{...ie({x:21,y:2}),...se}},tower:{frame:{...ie({x:15,y:3}),...se}},"shadowMask.tower":{frame:{...ie({x:16,y:3}),...se}},sticks:{frame:{...ie({x:18,y:3}),...se}},cube:{frame:{...ie({x:19,y:3}),...se}},drum:{frame:{...ie({x:21,y:3}),...se}},"shadowMask.drum":{frame:{...ie({x:22,y:3}),...se}},puck:{frame:{...ie({x:15,y:4}),...se}},"shadow.smallRound":{frame:{...ie({x:16,y:4}),...se}},"shadowMask.smallRound":{frame:{...ie({x:17,y:4}),...se}},"spring.compressed":{frame:{...ie({x:19,y:4}),...se}},"spring.released":{frame:{...ie({x:20,y:4}),...se}},"shadowMask.spring.compressed":{frame:{...ie({x:21,y:4}),...se}},"shadowMask.spring.released":{frame:{...ie({x:22,y:4}),...se}},...Xe("fish",2,ie({x:15,y:6}),se),doughnuts:{frame:{...ie({x:18,y:6}),...se}},"shadowMask.doughnuts":{frame:{...ie({x:19,y:6}),...se}},hooter:{frame:{...ie({x:21,y:6}),...se}},bag:{frame:{...ie({x:22,y:6}),...se}},whiteRabbit:{frame:{...ie({x:24,y:6}),...se}},"shadowMask.whiteRabbit":{frame:{...ie({x:25,y:6}),...se}},"crown.blacktooth":{frame:{...ie({x:15,y:7}),...se}},"crown.safari":{frame:{...ie({x:16,y:7}),...se}},"crown.egyptus":{frame:{...ie({x:17,y:7}),...se}},"crown.penitentiary":{frame:{...ie({x:18,y:7}),...se}},"crown.bookworld":{frame:{...ie({x:19,y:7}),...se}},scroll:{frame:{...ie({x:15,y:8}),...se,pivot:{x:17,y:24}}},"shadow.scroll":{frame:{...ie({x:16,y:8}),...se,pivot:{x:17,y:24}}},"shadowMask.scroll":{frame:{...ie({x:17,y:8}),...se,pivot:{x:17,y:24}}},buttonInGame:{frame:{...ie({x:15,y:9}),...se}},"buttonInGame.pressed":{frame:{...ie({x:16,y:9}),...se}},"shadowMask.buttonInGame":{frame:{...ie({x:17,y:9}),...se}},"switch.left":{frame:{...ie({x:19,y:9}),...se}},"switch.right":{frame:{...ie({x:20,y:9}),...se}},"shadowMask.switch":{frame:{...ie({x:21,y:9}),...se}},"lift.static":{frame:{...ie({x:15,y:10}),...se}},...Xe("lift",4,ie({x:16,y:10}),se),...Xe("shadow.lift",4,ie({x:16,y:11}),se),"shadow.smallBlock":{frame:{...ie({x:20,y:10}),...se}},"shadowMask.smallBlock":{frame:{...ie({x:21,y:10}),...se}},...Rs("charles",ie({x:15,y:12}),se),"shadowMask.charles.away":{frame:{...ie({x:17,y:12}),...se}},"shadowMask.charles.right":{frame:{...ie({x:17,y:13}),...se}},...Xe("bubbles.white",3,ie({x:19,y:12}),se),...Xe("bubbles.taupe",3,ie({x:19,y:13}),se),"editor.cursor.xz":{frame:{..._e({x:7,y:-2}),...me}},"editor.cursor.floor":{frame:{..._e({x:7,y:-1}),...me}},"block.organic":{frame:{..._e({x:0,y:0}),...me}},"block.organic.disappearing":{frame:{..._e({x:1,y:0}),...me}},"block.organic.dark":{frame:{..._e({x:2,y:0}),...me}},"block.organic.dark.disappearing":{frame:{..._e({x:3,y:0}),...me}},"shadowMask.organic":{frame:{..._e({x:4,y:0}),...me}},"block.artificial":{frame:{..._e({x:5,y:0}),...me}},"block.artificial.disappearing":{frame:{..._e({x:6,y:0}),...me}},"shadowMask.artificial":{frame:{..._e({x:7,y:0}),...me}},"book.x":{frame:{..._e({x:8,y:0}),...me}},"book.y":{frame:{..._e({x:9,y:0}),...me}},"shadowMask.book":{frame:{..._e({x:10,y:0}),...me}},"shadowMask.fullBlock":{frame:{..._e({x:10,y:0}),...me}},"shadow.fullBlock":{frame:{..._e({x:11,y:0}),...me}},spikes:{frame:{..._e({x:12,y:0}),...me}},"shadowMask.spikes":{frame:{..._e({x:13,y:0}),...me}},stepStool:{frame:{..._e({x:0,y:1}),...me}},"shadowMask.stepStool":{frame:{..._e({x:1,y:1}),...me}},"volcano.1":{frame:{..._e({x:2,y:1}),...me}},"volcano.2":{frame:{..._e({x:3,y:1}),...me}},"shadowMask.volcano":{frame:{..._e({x:4,y:1}),...me}},hushPuppy:{frame:{..._e({x:5,y:1}),...me}},"shadowMask.hushPuppy":{frame:{..._e({x:6,y:1}),...me}},"toaster.on":{frame:{..._e({x:7,y:1}),...me}},"toaster.off":{frame:{..._e({x:8,y:1}),...me}},"shadowMask.toaster":{frame:{..._e({x:9,y:1}),...me}},sandwich:{frame:{..._e({x:10,y:1}),...me}},"shadowMask.sandwich":{frame:{..._e({x:11,y:1}),...me}},...Xe("conveyor.x",7,_e({x:0,y:2}),me),"shadowMask.conveyor":{frame:{..._e({x:7,y:2}),...me}},button:{frame:{..._e({x:9,y:2}),...me}},"button.pressed":{frame:{..._e({x:10,y:2}),...me}},"button.surfaceMask":{frame:{..._e({x:11,y:2}),...me}},...Xe("conveyor.y",7,_e({x:0,y:3}),me),teleporter:{frame:{..._e({x:7,y:3}),...me}},...Xe("teleporter.flashing",2,_e({x:8,y:3}),me),"shadowMask.teleporter":{frame:{..._e({x:10,y:3}),...me}},"shadowMask.teleporter.flashing":{frame:{..._e({x:11,y:3}),...me}},...Xe("particle",4,{x:100,y:798},{w:9,h:11})},T1={frames:Iz,animations:{"teleporter.flashing":Te(["teleporter.flashing.1","teleporter.flashing.2"],.5),fish:Te(["fish.1","fish.2"],.25),lift:Te(["lift.1","lift.2","lift.3","lift.4"],.5),"shadow.lift":Te(["shadow.lift.1","shadow.lift.2","shadow.lift.3","shadow.lift.4"],.5),dalek:Te(["dalek.1","dalek.2"],.5),"turtle.left":Te(["turtle.left.1","turtle.left.2"],.25),"turtle.away":Te(["turtle.away.1","turtle.away.2"],.25),"turtle.towards":Te(["turtle.towards.1","turtle.towards.2"],.25),"turtle.right":Te(["turtle.right.1","turtle.right.2"],.25),helicopterBug:Te(["helicopterBug.1","helicopterBug.2","helicopterBug.3","helicopterBug.4"],.5),"bubbles.cold":Te(["bubbles.cold.1","bubbles.cold.2"],.25),"bubbles.white":Te(["bubbles.white.1","bubbles.white.2","bubbles.white.3"],.5),"bubbles.bounce.white":Te(["bubbles.white.1","bubbles.white.2","bubbles.white.3","bubbles.white.2"],.5),"bubbles.doughnut":Te(["bubbles.taupe.1","bubbles.taupe.2"],.5),"conveyor.x":Te(zo("conveyor.x",7),.5),"conveyor.y":Te(zo("conveyor.y",7),.5),volcano:Te(zo("volcano",2),3/16),"spring.bounce":Te(["spring.released","spring.compressed","spring.released","spring.compressed","spring.released"],.5),"shadowMask.spring.bounce":Te(["shadowMask.spring.released","shadowMask.spring.compressed","shadowMask.spring.released","shadowMask.spring.compressed","shadowMask.spring.released"],.5),"headlessBase.scan":Te(["headlessBase.4","headlessBase","headlessBase.3","headlessBase","headlessBase.2","headlessBase","headlessBase.1","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase.all","headlessBase","headlessBase","headlessBase","headlessBase"],.25),"headlessBase.flash":Te(["headlessBase.all","headlessBase"],.5),switch:Te(["switch.left","switch.right"],.02),"particle.fade":Te(zo("particle",4),.5)}},Nz=.5,M1=5e3,qz=M1*2,To=(n,e)=>{const t=Math.round(M1/(Bg*4)),s=`head.walking.${n}.${e}`,a=`head.blinking.${n}`,o=[...new Array(t-3).fill(s),a,s,a];return Te(o,.5)},gp=(n,e=2)=>{const t=Math.round(qz/(Bg*4)),s=n==="towards"||n==="right"?`heels.standing.${n}`:`heels.walking.${n}.${e}`,a=`heels.blinking.${n}`,o=[...new Array(Math.floor(t*.8)).fill(s),...new Array(Math.ceil(t*.2)).fill(a)];return Te(o,.5)},qw=(n,e,t)=>{const s=["awayLeft","away","awayRight","right","towardsRight","towards","towardsLeft","left"];function*a(){for(let o=0;o<_x.length;o++){const u=s[o];t[u]?.noShadowMask||(yield[`shadowMask.${n}.${u}`,{frame:{...ie({x:e.x,y:e.y+o}),...se}}]);for(let h=1;h<=3;h++)yield[`${n}.walking.${u}.${h}`,{frame:{...ie({x:e.x+h,y:e.y+o}),...se}}];yield[`${n}.falling.${u}`,{frame:{...ie({x:e.x+4,y:e.y+o}),...se}}],t[u]?.noBlinking||(yield[`${n}.blinking.${u}`,{frame:{...ie({x:e.x+5,y:e.y+o}),...se}}]),t[u]?.noStanding||(yield[`${n}.standing.${u}`,{frame:{...ie({x:e.x+6,y:e.y+o}),...se}}])}}return Object.fromEntries(a())};function Gw(n){function*e(t,s){yield`${t}.walking.${s}.1`,yield`${t}.walking.${s}.2`,yield`${t}.walking.${s}.3`,yield`${t}.walking.${s}.2`}return _x.reduce((t,s)=>({...t,[`${n}.walking.${s}`]:Te([...e(n,s)],Nz)}),{})}const Gz={...Xe("bubbles.head",6,ie({x:0,y:10}),se),...qw("head",{x:0,y:11},{awayLeft:{noBlinking:!0,noStanding:!0},away:{noBlinking:!0,noStanding:!0},awayRight:{noStanding:!0},right:{noStanding:!0},towardsRight:{noStanding:!0},towards:{noShadowMask:!0,noStanding:!0},towardsLeft:{noShadowMask:!0,noStanding:!0},left:{noBlinking:!0,noShadowMask:!0,noStanding:!0}}),...Xe("bubbles.heels",6,ie({x:7,y:10}),se),...qw("heels",{x:7,y:11},{awayLeft:{noBlinking:!0,noStanding:!0},away:{noBlinking:!0,noStanding:!0},awayRight:{noBlinking:!0,noStanding:!0},right:{},towardsRight:{noStanding:!0},towards:{noShadowMask:!0},towardsLeft:{noBlinking:!0,noShadowMask:!0,noStanding:!0},left:{noBlinking:!0,noShadowMask:!0,noStanding:!0}}),...Xe("shine",6,_e({x:0,y:4}),me,3),blank:{frame:{...ie({x:0,y:2}),...se}},"shadow.playable":{frame:{...ie({x:6,y:10}),...se}}},k1={frames:Gz,animations:{...Gw("head"),...Gw("heels"),"heels.screenDirections":Te(["heels.walking.towardsRight.2","heels.walking.towardsLeft.2","heels.walking.awayLeft.2","heels.walking.awayRight.2"],1/16),"heels.worldDirections":Te(["heels.standing.towards","heels.walking.left.2","heels.walking.away.2","heels.standing.right"],1/16),"heels.mixedDirections":Te(["heels.walking.towardsRight.2","heels.standing.towards","heels.walking.towardsLeft.2","heels.walking.left.2","heels.walking.awayLeft.2","heels.walking.away.2","heels.walking.awayRight.2","heels.standing.right"],1/8),"head.idle.right":To("right",3),"head.idle.towards":To("towards",3),"head.idle.towardsRight":To("towardsRight",2),"head.idle.towardsLeft":To("towardsLeft",2),"head.idle.awayRight":To("awayRight",2),"heels.idle.right":gp("right"),"heels.idle.towards":gp("towards"),"heels.idle.towardsRight":gp("towardsRight",2),"head.fadeOut":Te(["bubbles.head.1","bubbles.head.2","bubbles.head.4","bubbles.head.3","bubbles.head.4","bubbles.head.6","bubbles.head.5","bubbles.head.6","bubbles.head.5"],.5),"heels.fadeOut":Te(["bubbles.heels.1","bubbles.heels.2","bubbles.heels.4","bubbles.heels.3","bubbles.heels.4","bubbles.heels.6","bubbles.heels.5","bubbles.heels.6","bubbles.heels.5"],.5),shine:Te(zo("shine",6),.5),"shine.headInSymbio":Te(["shine.1","shine.2","shine.3","blank","blank","blank","blank","blank","blank","shine.4","shine.5","shine.6"],.5),"shine.heelsInSymbio":Te(["blank","blank","blank","shine.1","shine.2","shine.3","shine.4","shine.5","shine.6","blank","blank","blank"],.5)}},C1={jail:["bars"],blacktooth:["plain","shield","armour"],bookworld:["book","cowboy"],egyptus:["hieroglyphics","sarcophagus"],market:["more-fruits","fruits","passage"],moonbase:["coil","window3","window2","window1","window-clear"],penitentiary:["skeleton","loop"],safari:["wall","shield","window"]},G4=Object.keys(C1),H4=["blacktooth","penitentiary","bookworld","egyptus","safari"],Ct=(n,e,t,s)=>{function*a(o,u,h){const f=C1[o],{w:d,h:g}=Rn,m=d>>1;for(let b=0;b<f.length;b++)yield[`${o}${s}.wall.${f[b]}.left`,{frame:{x:u-d*(b+1),y:h+m*b,...Rn}}],yield[`${o}${s}.wall.${f[b]}.away`,{frame:{x:u+d*b,y:h+m*b,...Rn}}];yield[`${o}${s}.floor`,{frame:{x:u-d,y:h+g,...cg}}]}return Object.fromEntries(a(n,e,t))},Hw={w:16,h:13},$w={w:8,h:9},Hn=74;let Rt=53;const Hz={...Ct("egyptus",834,Rt,""),...Ct("egyptus",834,Rt+=Hn,".dark"),...Ct("moonbase",834,Rt+=Hn,""),...Ct("moonbase",834,Rt+=Hn,".dark"),...Ct("bookworld",834,Rt+=Hn,""),...Ct("bookworld",834,Rt,".dark"),...Ct("jail",834,Rt+=Hn,""),...Ct("jail",834,Rt,".dark"),...Ct("blacktooth",834,Rt+=Hn,""),...Ct("blacktooth",834,Rt+=Hn,".dark"),...Ct("penitentiary",834,Rt+=Hn,""),...Ct("penitentiary",834,Rt,".dark"),...Ct("market",834,Rt+=Hn,""),...Ct("market",834,Rt,".dark"),...Ct("safari",834,Rt+=Hn,""),...Ct("safari",834,Rt,".dark"),"floorEdge.right":{frame:{x:418,y:466,...Hw,pivot:{x:0,y:4}}},"floorEdge.towards":{frame:{x:401,y:466,...Hw,pivot:{x:15,y:4}}},"floorEdge.half.right":{frame:{x:418,y:470,...$w,pivot:{x:0,y:0}}},"floorEdge.half.towards":{frame:{x:401,y:466,...$w,pivot:{x:7,y:0}}},"floorOverdraw.cornerNearWall":{frame:{x:623,y:452,w:Rn.w,h:8}},"shadow.wall.y":{frame:{x:432,y:435,w:36,h:16}},"generic.floor.deadly":{frame:{x:785,y:462,...cg}},"generic.dark.floor.deadly":{frame:{x:785,y:479,...cg}},"generic.door.legs.pillar.y":{frame:{x:508,y:476,w:Rn.w,h:12}},"generic.door.legs.base.y":{frame:{x:508,y:488,w:Rn.w,h:9}},"generic.door.legs.pillar.x":{frame:{x:524,y:476,w:Rn.w,h:12}},"generic.door.legs.base.x":{frame:{x:524,y:488,w:Rn.w,h:9}},"generic.door.legs.threshold.double.x":{frame:{x:508,y:452,w:Rn.w*2,h:24}},"generic.door.legs.threshold.double.y":{frame:{x:469,y:452,w:Rn.w*2,h:24}},"shadowMask.door.legs.threshold.double.y":{frame:{x:469,y:430,w:Rn.w*2,h:21,pivot:{x:0,y:21}}},"generic.door.floatingThreshold.x":{frame:{x:457,y:492,w:26,h:19,pivot:{x:18,y:12}}},"generic.door.floatingThreshold.y":{frame:{x:430,y:492,w:26,h:19,pivot:{x:8,y:12}}},"shadowMask.door.floatingThreshold.double.y":{frame:{x:541,y:480,w:42,h:21,pivot:{x:8,y:20}}},"shadow.door.floatingThreshold.double.y":{frame:{x:584,y:480,w:42,h:21,pivot:{x:8,y:20}}},...Xe("moonbase.wall.screen.window1.away",3,{x:883,y:217},{w:10,h:7}),...Xe("moonbase.wall.screen.window2.away",2,{x:867,y:209},{w:10,h:7}),...Xe("moonbase.wall.screen.window3.away",4,{x:851,y:201},{w:10,h:7})},R1={frames:Hz,animations:{"moonbase.wall.screen.window1.away":Te(["moonbase.wall.screen.window1.away.1","moonbase.wall.screen.window1.away.2","moonbase.wall.screen.window1.away.3"],1/16),"moonbase.wall.screen.window2.away":Te(["moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.2"],1/16),"moonbase.wall.screen.window3.away":Te(["moonbase.wall.screen.window3.away.1","moonbase.wall.screen.window3.away.2","moonbase.wall.screen.window3.away.3","moonbase.wall.screen.window3.away.4","moonbase.wall.screen.window3.away.4"],1/16)}},$z={...T1.frames,...k1.frames,...R1.frames,...Lz.frames,...Ez.frames,...Mz.frames},Fz={frames:$z,animations:{...k1.animations,...T1.animations,...R1.animations},meta:{scale:1}};let Wo;const Vz=async()=>{if(Wo!==void 0)return Wo;let n;try{n=await Bo.load(Az)}catch{console.warn("did not load textures - hopefully this is running on a server!"),n=Ce.EMPTY}const e=new Zp(n,Fz);return await e.parse(),e.textureSource.scaleMode="nearest",Wo=e,e},$4=()=>{if(Wo===void 0)throw new Error(`spritesheet not loaded - only call this from inside code 
      (like in a render loop) that is protected and only executed once 
      loading has happened`);return Wo},Yz=n=>({children:t})=>{const[s,a]=ce.useState(!1);return ce.useEffect(()=>{n().then(()=>{a(!0)})}),s?t:null},Xz=Yz(Vz),Wz=Ux(async()=>{const[n,e]=await Promise.all([Yn(()=>import("./LevelEditor-DzSI1LRT.js").then(t=>t.L),__vite__mapDeps([6,7,1])),Yn(()=>import("./levelEditorSlice-Mf4CLfNX.js").then(t=>t.b3),__vite__mapDeps([7,1]))]);return NO(e.levelEditorSlice),Xc.dispatch(e.injected()),n}),Qz=ce.lazy(Wz),Kz=()=>jo.jsx(Xz,{children:jo.jsx(Qz,{})});hT.createRoot(document.getElementById("root")).render(jo.jsx(ce.StrictMode,{children:jo.jsx(MT,{store:Xc,children:jo.jsx(Kz,{})})}));export{nD as $,YS as A,Vt as B,mc as C,et as D,ge as E,pB as F,Kc as G,yB as H,_B as I,SB as J,Ce as K,eg as L,Me as M,eP as N,TB as O,Bt as P,Sn as Q,nt as R,Kg as S,ic as T,Wp as U,zP as V,vS as W,Bn as X,TS as Y,$_ as Z,rl as _,HS as a,Yn as a$,Wc as a0,it as a1,V_ as a2,Kd as a3,Y_ as a4,BP as a5,Bc as a6,PP as a7,xS as a8,QD as a9,Xj as aA,Xc as aB,Yj as aC,TM as aD,dl as aE,xM as aF,kj as aG,vg as aH,_j as aI,wj as aJ,vj as aK,Sj as aL,xj as aM,_M as aN,jj as aO,H4 as aP,WM as aQ,Oj as aR,VM as aS,mj as aT,yj as aU,tj as aV,gj as aW,VT as aX,fj as aY,mi as aZ,Ww as a_,HD as aa,gB as ab,mB as ac,xB as ad,AB as ae,EB as af,Tx as ag,Rj as ah,Tc as ai,ij as aj,cj as ak,bj as al,dc as am,MM as an,dj as ao,pj as ap,aj as aq,lj as ar,ZM as as,Bg as at,Rn as au,wn as av,sj as aw,fk as ax,nj as ay,SM as az,Us as b,G4 as b$,Pt as b0,He as b1,Lc as b2,Lj as b3,ce as b4,lS as b5,z4 as b6,Ex as b7,Ej as b8,uj as b9,_O as bA,Vj as bB,MO as bC,Wj as bD,jM as bE,UM as bF,Og as bG,lT as bH,Jz as bI,U4 as bJ,Fj as bK,B4 as bL,vi as bM,zg as bN,Zz as bO,AM as bP,Dg as bQ,q4 as bR,Ux as bS,Ic as bT,Kj as bU,T4 as bV,Vg as bW,Rz as bX,Cz as bY,fC as bZ,Dj as b_,oj as ba,ej as bb,jo as bc,Uj as bd,zj as be,Aj as bf,ck as bg,vx as bh,QM as bi,Mj as bj,Oc as bk,wO as bl,Fz as bm,Mc as bn,hj as bo,rj as bp,$4 as bq,Pj as br,Tj as bs,Qj as bt,No as bu,j4 as bv,kz as bw,hc as bx,Nz as by,se as bz,lg as c,il as c0,P4 as c1,Bj as c2,$j as c3,sT as c4,Cj as c5,u1 as c6,aw as c7,sw as c8,Dw as c9,T3 as ca,tP as cb,f1 as cc,$e as d,zt as e,ig as f,Ai as g,Ow as h,Sx as i,gP as j,Xn as k,Yt as l,bl as m,Dc as n,HM as o,UD as p,rw as q,Pg as r,ND as s,ul as t,yc as u,Dt as v,Fe as w,Qg as x,DS as y,zn as z};
