const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JsonRoomEditor-DB18mj2l.js","assets/index-2gBPxVy0.js","assets/index-DNhzJ6w7.css","assets/levelEditorSlice-cm30WfiY.js","assets/JsonRoomEditor-Cpm53wG5.css","assets/RoomEditingArea-DsslEwRd.js","assets/Graphics-CqvpaiwL.js"])))=>i.map(i=>d[i]);
import{bs as Hh,bt as qh,a6 as $i,a5 as Vt,bu as Wh,bv as Gh,bw as Kh,bx as Vh,a7 as Ke,aY as zi,bf as u,b7 as Jh,aW as Xh,be as p,by as Yh,bz as fo,bA as ho,bB as Zh,ah as He,bl as ze,bg as Qh,bC as ep,bD as tp,an as Ae,bk as au,Z as le,bE as Nr,aH as rp,bF as np,aO as Jt,bG as op,bH as lu,bI as cu,aw as sp,au as ip,ab as Di,ar as po,aK as Qs,a9 as br,ap,b3 as lp,bJ as cp,a8 as up,bK as dp,bL as fp,bM as hp,bN as uu,bO as xn,b0 as pp,az as Li,ag as du,bP as mp,a$ as Mi,as as gp,bQ as fu,aG as vp,b9 as yp,bR as bp}from"./index-2gBPxVy0.js";import{a4 as xp,a5 as wp,a3 as se,a6 as _p,a7 as kp,a8 as Sp,C as hu,O as mo,a9 as Cp,aa as Da,ab as Ep,ac as jp,ad as Pp,ae as Rp,af as Ap,ag as Tp,ah as Op,ai as to,aj as Np,ak as Ip,al as Bi,y as Fi,am as Do,an as pu,ao as $p,ap as zp,aq as Dp,ar as Lp,F as Ui,as as Mp,at as mu,au as Bp,av as ei,Q as Fp,P as Up,$ as Hp,X as qp,Z as Wp,E as Qt,aw as Gp,ax as Kp,ay as Vp,p as Te,e as La,az as gu,aA as Jp,aB as Xp,aC as Yp,aD as Zp}from"./levelEditorSlice-cm30WfiY.js";var Lo={exports:{}},Ma;function Hi(){return Ma||(Ma=1,function(e){function t(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Lo)),Lo.exports}var Mo={exports:{}},Ba;function qi(){return Ba||(Ba=1,function(e){var t=Hh();function r(o,s){for(var i=0;i<s.length;i++){var a=s[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,t(a.key),a)}}function n(o,s,i){return s&&r(o.prototype,s),i&&r(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Mo)),Mo.exports}var Bo={exports:{}},Fo={exports:{}},Fa;function vu(){return Fa||(Fa=1,function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Fo)),Fo.exports}var Ua;function Qp(){return Ua||(Ua=1,function(e){var t=vu();function r(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&t(n,o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Bo)),Bo.exports}var Uo={exports:{}},Ho={exports:{}},Ha;function em(){return Ha||(Ha=1,function(e){function t(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ho)),Ho.exports}var qa;function tm(){return qa||(qa=1,function(e){var t=qh().default,r=em();function n(o,s){if(s&&(t(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(o)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Uo)),Uo.exports}var qo={exports:{}},Wa;function yu(){return Wa||(Wa=1,function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(qo)),qo.exports}var Wo={exports:{}},Go={exports:{}},Ga;function rm(){return Ga||(Ga=1,function(e){function t(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!r},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Go)),Go.exports}var Ka;function nm(){return Ka||(Ka=1,function(e){var t=rm(),r=vu();function n(o,s,i){if(t())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var l=new(o.bind.apply(o,a));return i&&r(l,i.prototype),l}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Wo)),Wo.exports}var Ko={},Va;function om(){if(Va)return Ko;Va=1;var e=Hi(),t=qi(),r=function(){function n(){e(this,n)}return t(n,[{key:Symbol.iterator,value:function(){return this}}]),n}();return Ko.IterableIterator=r,Ko}var Vo={exports:{}},Jo={exports:{}},Ja;function sm(){return Ja||(Ja=1,function(e){var t=yu();function r(n,o){for(;!{}.hasOwnProperty.call(n,o)&&(n=t(n))!==null;);return n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Jo)),Jo.exports}var Xa;function im(){return Xa||(Xa=1,function(e){var t=sm();function r(){return e.exports=r=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,o,s){var i=t(n,o);if(i){var a=Object.getOwnPropertyDescriptor(i,o);return a.get?a.get.call(arguments.length<3?n:s):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports,r.apply(null,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Vo)),Vo.exports}var wn={},Ya;function Wi(){if(Ya)return wn;Ya=1;var e=$i(),t=e.mark(a);function r(c,d){var f;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(f=n(c))||d){f&&(c=f);var h=0,m=function(){};return{s:m,n:function(){return h>=c.length?{done:!0}:{done:!1,value:c[h++]}},e:function(w){throw w},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,g=!1,y;return{s:function(){f=c[Symbol.iterator]()},n:function(){var w=f.next();return v=w.done,w},e:function(w){g=!0,y=w},f:function(){try{!v&&f.return!=null&&f.return()}finally{if(g)throw y}}}}function n(c,d){if(c){if(typeof c=="string")return o(c,d);var f=Object.prototype.toString.call(c).slice(8,-1);if(f==="Object"&&c.constructor&&(f=c.constructor.name),f==="Map"||f==="Set")return Array.from(c);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return o(c,d)}}function o(c,d){(d==null||d>c.length)&&(d=c.length);for(var f=0,h=new Array(d);f<d;f++)h[f]=c[f];return h}var s=Vt(),i=s.iterableCurry;function a(c,d){var f,h,m,v;return e.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:f=0,h=r(c),y.prev=2,h.s();case 4:if((m=h.n()).done){y.next=10;break}return v=m.value,y.next=8,d(v,f++);case 8:y.next=4;break;case 10:y.next=15;break;case 12:y.prev=12,y.t0=y.catch(2),h.e(y.t0);case 15:return y.prev=15,h.f(),y.finish(15);case 18:case"end":return y.stop()}},t,null,[[2,12,15,18]])}wn.__map=a;var l=i(a);return wn.map=l,wn}var _n={},Za;function am(){if(Za)return _n;Za=1;function e(a,l){var c;if(typeof Symbol>"u"||a[Symbol.iterator]==null){if(Array.isArray(a)||(c=t(a))||l){c&&(a=c);var d=0,f=function(){};return{s:f,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(y){throw y},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,m=!1,v;return{s:function(){c=a[Symbol.iterator]()},n:function(){var y=c.next();return h=y.done,y},e:function(y){m=!0,v=y},f:function(){try{!h&&c.return!=null&&c.return()}finally{if(m)throw v}}}}function t(a,l){if(a){if(typeof a=="string")return r(a,l);var c=Object.prototype.toString.call(a).slice(8,-1);if(c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set")return Array.from(a);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return r(a,l)}}function r(a,l){(l==null||l>a.length)&&(l=a.length);for(var c=0,d=new Array(l);c<l;c++)d[c]=a[c];return d}var n=Vt(),o=n.iterableCurry;function s(a,l){var c=0,d=e(a),f;try{for(d.s();!(f=d.n()).done;){var h=f.value;if(l(h,c++))return!0}}catch(m){d.e(m)}finally{d.f()}return!1}_n.__some=s;var i=o(s,{reduces:!0});return _n.some=i,_n}var Xo={},Qa;function lm(){if(Qa)return Xo;Qa=1;function e(o,s){var i;if(typeof Symbol>"u"||o[Symbol.iterator]==null){if(Array.isArray(o)||(i=t(o))||s){i&&(o=i);var a=0,l=function(){};return{s:l,n:function(){return a>=o.length?{done:!0}:{done:!1,value:o[a++]}},e:function(m){throw m},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,d=!1,f;return{s:function(){i=o[Symbol.iterator]()},n:function(){var m=i.next();return c=m.done,m},e:function(m){d=!0,f=m},f:function(){try{!c&&i.return!=null&&i.return()}finally{if(d)throw f}}}}function t(o,s){if(o){if(typeof o=="string")return r(o,s);var i=Object.prototype.toString.call(o).slice(8,-1);if(i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set")return Array.from(o);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(o,s)}}function r(o,s){(s==null||s>o.length)&&(s=o.length);for(var i=0,a=new Array(s);i<s;i++)a[i]=o[i];return a}function n(o,s){var i=e(o),a;try{for(i.s();!(a=i.n()).done;){var l=a.value;s(l)}}catch(c){i.e(c)}finally{i.f()}}return Xo.parallelEach=n,Xo}var Yo={},el;function cm(){if(el)return Yo;el=1;var e=nm(),t=Hi(),r=qi(),n=Vt(),o=n.ensureIterable,s=n.callReturn,i=Symbol.for("_"),a=function(){function c(d){t(this,c),this.peekr=d}return r(c,[{key:"next",value:function(){var f=this.peekr,h=f.current;return f.advance(),h}},{key:"return",value:function(){return this.peekr.return(),{value:void 0,done:!0}}},{key:Symbol.iterator,value:function(){return this}}]),c}(),l=function(){r(c,null,[{key:"from",value:function(f){for(var h=o(f)[Symbol.iterator](),m=h.next(),v=arguments.length,g=new Array(v>1?v-1:0),y=1;y<v;y++)g[y-1]=arguments[y];return e(this,[h,m].concat(g))}}]);function c(d,f){t(this,c),this[i]={iterator:d,current:f,index:0}}return r(c,[{key:"advance",value:function(){var f=this[i];return f.current.done||(f.index++,f.current=f.iterator.next()),this}},{key:"return",value:function(){var f=this[i];return this.done||s(f.iterator),f.current={value:void 0,done:!0},this}},{key:"asIterator",value:function(){return new a(this)}},{key:"current",get:function(){return this[i].current}},{key:"value",get:function(){return this[i].current.value}},{key:"done",get:function(){return this[i].current.done}},{key:"index",get:function(){return this[i].index}}]),c}();return Yo.Peekerator=l,Yo}var Zo={},tl;function um(){if(tl)return Zo;tl=1;var e=Wh(),t=e.isInteger,r=Gh(),n=r.isObject,o=Kh(),s=o.notUndefined,i=function(l){return function(d){if(n(d[1])){var f=d[1],h=f.start,m=f.step;d[1]=h,d[2]=m}if(s(d[2])&&(d[2]=Number(d[2]),!t(d[2],!0)))throw new Error("step argument to ".concat(l," must be a non-zero integer"))}};return Zo.makeValidateArgs=i,Zo}var Br={},rl;function dm(){if(rl)return Br;rl=1;var e=Vh(),t=Hi(),r=qi(),n=im(),o=Qp(),s=tm(),i=yu();function a(T){var z=l();return function(){var W=i(T),D;if(z){var J=i(this).constructor;D=Reflect.construct(W,arguments,J)}else D=W.apply(this,arguments);return s(this,D)}}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var c=Vt(),d=c.iterableCurry,f=c.callReturn,h=om(),m=h.IterableIterator,v=lm(),g=v.parallelEach,y=cm(),b=y.Peekerator,w=Wi(),x=w.__map,_=xp(),C=_.__toArray,S=Symbol.for("_"),k=Symbol.for("__advance"),M=function(T){o($,T);var z=a($);function $(W,D,J){var Q;return t(this,$),Q=z.call(this,W,D),Q[S].inputSummary=J,Q}return r($,[{key:"advance",value:function(){this[S].inputSummary.advanceBuffer(this)}},{key:k,value:function(){n(i($.prototype),"advance",this).call(this)}}]),$}(b),K=function(){function T(){t(this,T),this.buffers=[],this.notDoneBuffer=null,this.index=0}return r(T,[{key:"init",value:function($){this.buffers=$,this.updateNotDone()}},{key:"updateNotDone",value:function(){this.notDoneBuffer=this.buffers.find(function($){return!$.done})}},{key:"advanceBuffer",value:function($){var W=$.done;$[k](),this.index++,!W&&$.done&&this.updateNotDone()}}]),T}(),q=function(){function T(z){t(this,T),this[S]=z}return r(T,[{key:"advance",value:function(){throw new Error("advance() is not supported on an interleave summary")}},{key:"current",get:function(){return{value:this.value,done:this.done}}},{key:"value",get:function(){return this[S].notDoneBuffer}},{key:"done",get:function(){return this[S].notDoneBuffer===void 0}},{key:"index",get:function(){return this[S].index}}]),T}();Br.InputSummary=q;var V=function(T){o($,T);var z=a($);function $(W,D,J){var Q;return t(this,$),Q=z.call(this),Q.sources=W,Q.strategy=D,Q.options=J,Q.initialized=!1,Q.inputSummary=new K(W),Q}return r($,[{key:"init",value:function(){this.initialized=!0;var D=this.strategy,J=this.options,Q=this.inputSummary;this.buffers=C(x(this.sources,function(ie){return M.from(ie,Q)})),this.iterator=D.apply(void 0,[J,new q(Q)].concat(e(this.buffers))),Q.init(this.buffers)}},{key:"returnBuffers",value:function(){g(this.buffers,function(D){return D.return()})}},{key:"next",value:function(){this.initialized||this.init();var D=this.iterator.next();return D.done&&this.returnBuffers(),D}},{key:"return",value:function(){return f(this.iterator),this.returnBuffers(),{value:void 0,done:!0}}}]),$}(m);function O(T,z){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new V(T,z,$)}Br.__interleave=O;var B=d(O,{variadic:!0,growRight:!0,minArgs:1,maxArgs:2});return Br.interleave=B,Br}var kn={},nl;function fm(){if(nl)return kn;nl=1;var e=$i(),t=e.mark(c);function r(f,h){var m;if(typeof Symbol>"u"||f[Symbol.iterator]==null){if(Array.isArray(f)||(m=n(f))||h){m&&(f=m);var v=0,g=function(){};return{s:g,n:function(){return v>=f.length?{done:!0}:{done:!1,value:f[v++]}},e:function(_){throw _},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,b=!1,w;return{s:function(){m=f[Symbol.iterator]()},n:function(){var _=m.next();return y=_.done,_},e:function(_){b=!0,w=_},f:function(){try{!y&&m.return!=null&&m.return()}finally{if(b)throw w}}}}function n(f,h){if(f){if(typeof f=="string")return o(f,h);var m=Object.prototype.toString.call(f).slice(8,-1);if(m==="Object"&&f.constructor&&(m=f.constructor.name),m==="Map"||m==="Set")return Array.from(f);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return o(f,h)}}function o(f,h){(h==null||h>f.length)&&(h=f.length);for(var m=0,v=new Array(h);m<h;m++)v[m]=f[m];return v}var s=Vt(),i=s.iterableCurry,a=Wi(),l=a.__map;function c(f,h){var m,v,g;return e.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:m=r(l(f,h)),b.prev=1,m.s();case 3:if((v=m.n()).done){b.next=8;break}return g=v.value,b.delegateYield(g,"t0",6);case 6:b.next=3;break;case 8:b.next=13;break;case 10:b.prev=10,b.t1=b.catch(1),m.e(b.t1);case 13:return b.prev=13,m.f(),b.finish(13);case 16:case"end":return b.stop()}},t,null,[[1,10,13,16]])}kn.__flatMap=c;var d=i(c);return kn.flatMap=d,kn}var Sn={},ol;function hm(){if(ol)return Sn;ol=1;var e=Vt(),t=e.iterableCurry,r=wp(),n=r.__firstOr,o=Symbol("none");function s(a){return n(a,o)===o}Sn.__isEmpty=s;var i=t(s,{reduces:!0});return Sn.isEmpty=i,Sn}var Cn={},sl;function pm(){if(sl)return Cn;sl=1;var e=$i(),t=e.mark(l),r=Vt(),n=r.iterableCurry,o=dm(),s=o.__interleave,i=um(),a=i.makeValidateArgs;function l(f,h){var m,v,g,y,b,w,x,_=arguments;return e.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:for(m=f.start,v=f.step,g=_.length,y=new Array(g>2?g-2:0),b=2;b<g;b++)y[b-2]=_[b];m=m%y.length,w=m;case 4:if(h.done){S.next=13;break}if(x=y[w],x.done){S.next=10;break}return S.next=9,x.value;case 9:x.advance();case 10:w=(w+v)%y.length,S.next=4;break;case 13:case"end":return S.stop()}},t)}function c(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return s(f,l,{start:m,step:h})}Cn.__roundRobin=c;var d=n(c,{variadic:!0,minArgs:0,maxArgs:2,validateArgs:a("roundRobin")});return Cn.roundRobin=d,Cn}var Qo,il;function mm(){return il||(il=1,Qo=fm().flatMap),Qo}var gm=mm();const vm=Ke(gm);var es,al;function ym(){return al||(al=1,es=hm().isEmpty),es}var bm=ym();const xm=Ke(bm);var ts,ll;function wm(){return ll||(ll=1,ts=Wi().map),ts}var _m=wm();const cl=Ke(_m);var rs={},ul;function km(){if(ul)return rs;ul=1;var e=function(n){return n};function t(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return n.length||(n=[e]),n.reduce(function(s,i){return function(){return i(s.apply(void 0,arguments))}})}return rs.pipe=t,rs}var ns,dl;function Sm(){return dl||(dl=1,ns=km().pipe),ns}var Cm=Sm();const fl=Ke(Cm);var os,hl;function Em(){return hl||(hl=1,os=pm().roundRobin),os}var jm=Em();const Pm=Ke(jm);var ss,pl;function Rm(){return pl||(pl=1,ss=am().some),ss}var Am=Rm();const Tm=Ke(Am),Gi="-",Om=e=>{const t=Im(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const a=i.split(Gi);return a[0]===""&&a.length!==1&&a.shift(),bu(a,t)||Nm(i)},getConflictingClassGroupIds:(i,a)=>{const l=r[i]||[];return a&&n[i]?[...l,...n[i]]:l}}},bu=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),o=n?bu(e.slice(1),n):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Gi);return t.validators.find(({validator:i})=>i(s))?.classGroupId},ml=/^\[(.+)\]$/,Nm=e=>{if(ml.test(e)){const t=ml.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Im=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return zm(Object.entries(e.classGroups),r).forEach(([s,i])=>{ti(i,n,s,t)}),n},ti=(e,t,r,n)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:gl(t,o);s.classGroupId=r;return}if(typeof o=="function"){if($m(o)){ti(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([s,i])=>{ti(i,gl(t,s),r,n)})})},gl=(e,t)=>{let r=e;return t.split(Gi).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},$m=e=>e.isThemeGetter,zm=(e,t)=>t?e.map(([r,n])=>{const o=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[t+i,a])):s);return[r,o]}):e,Dm=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const o=(s,i)=>{r.set(s,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let i=r.get(s);if(i!==void 0)return i;if((i=n.get(s))!==void 0)return o(s,i),i},set(s,i){r.has(s)?r.set(s,i):o(s,i)}}},xu="!",Lm=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,o=t[0],s=t.length,i=a=>{const l=[];let c=0,d=0,f;for(let y=0;y<a.length;y++){let b=a[y];if(c===0){if(b===o&&(n||a.slice(y,y+s)===t)){l.push(a.slice(d,y)),d=y+s;continue}if(b==="/"){f=y;continue}}b==="["?c++:b==="]"&&c--}const h=l.length===0?a:a.substring(d),m=h.startsWith(xu),v=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:g}};return r?a=>r({className:a,parseClassName:i}):i},Mm=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Bm=e=>({cache:Dm(e.cacheSize),parseClassName:Lm(e),...Om(e)}),Fm=/\s+/,Um=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=t,s=[],i=e.trim().split(Fm);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(c);let v=!!m,g=n(v?h.substring(0,m):h);if(!g){if(!v){a=c+(a.length>0?" "+a:a);continue}if(g=n(h),!g){a=c+(a.length>0?" "+a:a);continue}v=!1}const y=Mm(d).join(":"),b=f?y+xu:y,w=b+g;if(s.includes(w))continue;s.push(w);const x=o(g,v);for(let _=0;_<x.length;++_){const C=x[_];s.push(b+C)}a=c+(a.length>0?" "+a:a)}return a};function Hm(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=wu(t))&&(n&&(n+=" "),n+=r);return n}const wu=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=wu(e[n]))&&(r&&(r+=" "),r+=t);return r};function qm(e,...t){let r,n,o,s=i;function i(l){const c=t.reduce((d,f)=>f(d),e());return r=Bm(c),n=r.cache.get,o=r.cache.set,s=a,a(l)}function a(l){const c=n(l);if(c)return c;const d=Um(l,r);return o(l,d),d}return function(){return s(Hm.apply(null,arguments))}}const ce=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},_u=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wm=/^\d+\/\d+$/,Gm=new Set(["px","full","screen"]),Km=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Vm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ym=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,st=e=>_r(e)||Gm.has(e)||Wm.test(e),mt=e=>Ir(e,"length",sg),_r=e=>!!e&&!Number.isNaN(Number(e)),is=e=>Ir(e,"number",_r),Fr=e=>!!e&&Number.isInteger(Number(e)),Zm=e=>e.endsWith("%")&&_r(e.slice(0,-1)),Y=e=>_u.test(e),gt=e=>Km.test(e),Qm=new Set(["length","size","percentage"]),eg=e=>Ir(e,Qm,ku),tg=e=>Ir(e,"position",ku),rg=new Set(["image","url"]),ng=e=>Ir(e,rg,ag),og=e=>Ir(e,"",ig),Ur=()=>!0,Ir=(e,t,r)=>{const n=_u.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},sg=e=>Vm.test(e)&&!Jm.test(e),ku=()=>!1,ig=e=>Xm.test(e),ag=e=>Ym.test(e),lg=()=>{const e=ce("colors"),t=ce("spacing"),r=ce("blur"),n=ce("brightness"),o=ce("borderColor"),s=ce("borderRadius"),i=ce("borderSpacing"),a=ce("borderWidth"),l=ce("contrast"),c=ce("grayscale"),d=ce("hueRotate"),f=ce("invert"),h=ce("gap"),m=ce("gradientColorStops"),v=ce("gradientColorStopPositions"),g=ce("inset"),y=ce("margin"),b=ce("opacity"),w=ce("padding"),x=ce("saturate"),_=ce("scale"),C=ce("sepia"),S=ce("skew"),k=ce("space"),M=ce("translate"),K=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Y,t],O=()=>[Y,t],B=()=>["",st,mt],T=()=>["auto",_r,Y],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",Y],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[_r,Y];return{cacheSize:500,separator:":",theme:{colors:[Ur],spacing:[st,mt],blur:["none","",gt,Y],brightness:ie(),borderColor:[e],borderRadius:["none","","full",gt,Y],borderSpacing:O(),borderWidth:B(),contrast:ie(),grayscale:J(),hueRotate:ie(),invert:J(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[Zm,mt],inset:V(),margin:V(),opacity:ie(),padding:O(),saturate:ie(),scale:ie(),sepia:J(),skew:ie(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Y]}],container:["container"],columns:[{columns:[gt]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Y]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fr,Y]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Y]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Fr,Y]}],"grid-cols":[{"grid-cols":[Ur]}],"col-start-end":[{col:["auto",{span:["full",Fr,Y]},Y]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[Ur]}],"row-start-end":[{row:["auto",{span:[Fr,Y]},Y]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Y]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Y]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Y,t]}],"min-w":[{"min-w":[Y,t,"min","max","fit"]}],"max-w":[{"max-w":[Y,t,"none","full","min","max","fit","prose",{screen:[gt]},gt]}],h:[{h:[Y,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Y,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gt,mt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",is]}],"font-family":[{font:[Ur]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Y]}],"line-clamp":[{"line-clamp":["none",_r,is]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",st,Y]}],"list-image":[{"list-image":["none",Y]}],"list-style-type":[{list:["none","disc","decimal",Y]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",st,mt]}],"underline-offset":[{"underline-offset":["auto",st,Y]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),tg]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ng]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:$()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[st,Y]}],"outline-w":[{outline:[st,mt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[st,mt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gt,og]}],"shadow-color":[{shadow:[Ur]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gt,Y]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Y]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Y]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Y]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Fr,Y]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Y]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[st,mt,is]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ki=qm(lg);function OS(e){if(!ri(e))throw new Error(`Invalid textureId: "${e}"; textureId ∋ {${Object.keys(zi.frames).sort().map(t=>`"${t}"`).join(`,
`)}}`)}function ri(e){return zi.frames[e]!==void 0}function NS(e){return zi.animations[e]!==void 0}const cg=({className:e,children:t})=>e?u.jsx("div",{className:`contents ${e}`,children:t}):t,ug=e=>e.replaceAll(/(?<!\.)\./g,"_"),I=({children:e,className:t,noSlitWords:r,classnameCycle:n,onClick:o,noTint:s=!1,TagName:i="span"})=>{const a=Array.isArray(e)?e.join(" "):typeof e=="number"?`${e}`:e;if(a.length===0)return null;const l=r?[a.toUpperCase()]:a.toUpperCase().split(/\s+/);return u.jsxs(i,{className:t,onClick:o,children:[u.jsx("span",{className:"sr-only",children:a}),l.map((c,d)=>u.jsx("span",{className:Ki("text-nowrap inline-block",d===l.length-1?"":"me-1"),children:Array.from(c).map((f,h)=>{const m=`hud.char.${Jh(f)}`;return ri(m)||console.error("no texture for char",f,f.charCodeAt(0),m,"we have:",Object.keys(Xh().textures)),u.jsx("span",{className:`sprite ${ri(m)?`texture-${ug(m)}`:"texture-hud_char_?"}
                  ${s?"":"sprite-tinted"}
                  ${n===void 0?"":n[h%n.length]}`},h)})},d))]})},dg=e=>e.props.children!==void 0,Be=({children:e,className:t})=>u.jsx(cg,{className:t,children:Array.isArray(e)?e.map((r,n)=>u.jsx(Be,{children:r},n)):typeof e=="number"?u.jsx(I,{children:String(e)}):typeof e=="string"?u.jsx(I,{children:e}):p.isValidElement(e)?e.type===I||e.type===Be?e:dg(e)?p.cloneElement(e,void 0,typeof e.props.children=="string"?u.jsx(I,{children:`${e.props.children}`}):u.jsx(Be,{children:e.props.children})):e:e});function Oe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}function vl(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Su(...e){return t=>{let r=!1;const n=e.map(o=>{const s=vl(o,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let o=0;o<n.length;o++){const s=n[o];typeof s=="function"?s():vl(e[o],null)}}}}function Ve(...e){return p.useCallback(Su(...e),e)}function fg(e,t){const r=p.createContext(t),n=s=>{const{children:i,...a}=s,l=p.useMemo(()=>a,Object.values(a));return u.jsx(r.Provider,{value:l,children:i})};n.displayName=e+"Provider";function o(s){const i=p.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,o]}function Vi(e,t=[]){let r=[];function n(s,i){const a=p.createContext(i),l=r.length;r=[...r,i];const c=f=>{const{scope:h,children:m,...v}=f,g=h?.[e]?.[l]||a,y=p.useMemo(()=>v,Object.values(v));return u.jsx(g.Provider,{value:y,children:m})};c.displayName=s+"Provider";function d(f,h){const m=h?.[e]?.[l]||a,v=p.useContext(m);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const o=()=>{const s=r.map(i=>p.createContext(i));return function(a){const l=a?.[e]||s;return p.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[n,hg(o,...t)]}function hg(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=n.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var go=Yh();const Cu=Ke(go);var vo=p.forwardRef((e,t)=>{const{children:r,...n}=e,o=p.Children.toArray(r),s=o.find(mg);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return u.jsx(ni,{...n,ref:t,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return u.jsx(ni,{...n,ref:t,children:r})});vo.displayName="Slot";var ni=p.forwardRef((e,t)=>{const{children:r,...n}=e;if(p.isValidElement(r)){const o=vg(r),s=gg(n,r.props);return r.type!==p.Fragment&&(s.ref=t?Su(t,o):o),p.cloneElement(r,s)}return p.Children.count(r)>1?p.Children.only(null):null});ni.displayName="SlotClone";var pg=({children:e})=>u.jsx(u.Fragment,{children:e});function mg(e){return p.isValidElement(e)&&e.type===pg}function gg(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...a)=>{s(...a),o(...a)}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}function vg(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var yg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],de=yg.reduce((e,t)=>{const r=p.forwardRef((n,o)=>{const{asChild:s,...i}=n,a=s?vo:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(a,{...i,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function bg(e,t){e&&go.flushSync(()=>e.dispatchEvent(t))}function Ct(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>t.current?.(...r),[])}function xg(e,t=globalThis?.document){const r=Ct(e);p.useEffect(()=>{const n=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var wg="DismissableLayer",oi="dismissableLayer.update",_g="dismissableLayer.pointerDownOutside",kg="dismissableLayer.focusOutside",yl,Eu=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ji=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=p.useContext(Eu),[d,f]=p.useState(null),h=d?.ownerDocument??globalThis?.document,[,m]=p.useState({}),v=Ve(t,k=>f(k)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=d?g.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,C=Eg(k=>{const M=k.target,K=[...c.branches].some(q=>q.contains(M));!_||K||(o?.(k),i?.(k),k.defaultPrevented||a?.())},h),S=jg(k=>{const M=k.target;[...c.branches].some(q=>q.contains(M))||(s?.(k),i?.(k),k.defaultPrevented||a?.())},h);return xg(k=>{w===c.layers.size-1&&(n?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yl=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),bl(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=yl)}},[d,h,r,c]),p.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),bl())},[d,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(oi,k),()=>document.removeEventListener(oi,k)},[]),u.jsx(de.div,{...l,ref:v,style:{pointerEvents:x?_?"auto":"none":void 0,...e.style},onFocusCapture:Oe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Oe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Oe(e.onPointerDownCapture,C.onPointerDownCapture)})});Ji.displayName=wg;var Sg="DismissableLayerBranch",Cg=p.forwardRef((e,t)=>{const r=p.useContext(Eu),n=p.useRef(null),o=Ve(t,n);return p.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),u.jsx(de.div,{...e,ref:o})});Cg.displayName=Sg;function Eg(e,t=globalThis?.document){const r=Ct(e),n=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){ju(_g,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function jg(e,t=globalThis?.document){const r=Ct(e),n=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!n.current&&ju(kg,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function bl(){const e=new CustomEvent(oi);document.dispatchEvent(e)}function ju(e,t,r,{discrete:n}){const o=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?bg(o,s):o.dispatchEvent(s)}var as=0;function Pu(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xl()),document.body.insertAdjacentElement("beforeend",e[1]??xl()),as++,()=>{as===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),as--}},[])}function xl(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ls="focusScope.autoFocusOnMount",cs="focusScope.autoFocusOnUnmount",wl={bubbles:!1,cancelable:!0},Pg="FocusScope",Xi=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,l]=p.useState(null),c=Ct(o),d=Ct(s),f=p.useRef(null),h=Ve(t,g=>l(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(x){if(m.paused||!a)return;const _=x.target;a.contains(_)?f.current=_:yt(f.current,{select:!0})},y=function(x){if(m.paused||!a)return;const _=x.relatedTarget;_!==null&&(a.contains(_)||yt(f.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const C of x)C.removedNodes.length>0&&yt(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const w=new MutationObserver(b);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),w.disconnect()}}},[n,a,m.paused]),p.useEffect(()=>{if(a){kl.add(m);const g=document.activeElement;if(!a.contains(g)){const b=new CustomEvent(ls,wl);a.addEventListener(ls,c),a.dispatchEvent(b),b.defaultPrevented||(Rg(Ig(Ru(a)),{select:!0}),document.activeElement===g&&yt(a))}return()=>{a.removeEventListener(ls,c),setTimeout(()=>{const b=new CustomEvent(cs,wl);a.addEventListener(cs,d),a.dispatchEvent(b),b.defaultPrevented||yt(g??document.body,{select:!0}),a.removeEventListener(cs,d),kl.remove(m)},0)}}},[a,c,d,m]);const v=p.useCallback(g=>{if(!r&&!n||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const w=g.currentTarget,[x,_]=Ag(w);x&&_?!g.shiftKey&&b===_?(g.preventDefault(),r&&yt(x,{select:!0})):g.shiftKey&&b===x&&(g.preventDefault(),r&&yt(_,{select:!0})):b===w&&g.preventDefault()}},[r,n,m.paused]);return u.jsx(de.div,{tabIndex:-1,...i,ref:h,onKeyDown:v})});Xi.displayName=Pg;function Rg(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(yt(n,{select:t}),document.activeElement!==r)return}function Ag(e){const t=Ru(e),r=_l(t,e),n=_l(t.reverse(),e);return[r,n]}function Ru(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _l(e,t){for(const r of e)if(!Tg(r,{upTo:t}))return r}function Tg(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Og(e){return e instanceof HTMLInputElement&&"select"in e}function yt(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Og(e)&&t&&e.select()}}var kl=Ng();function Ng(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=Sl(e,t),e.unshift(t)},remove(t){e=Sl(e,t),e[0]?.resume()}}}function Sl(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Ig(e){return e.filter(t=>t.tagName!=="A")}var Ft=globalThis?.document?p.useLayoutEffect:()=>{},$g=fo.useId||(()=>{}),zg=0;function et(e){const[t,r]=p.useState($g());return Ft(()=>{r(n=>n??String(zg++))},[e]),e||(t?`radix-${t}`:"")}const Dg=["top","right","bottom","left"],Et=Math.min,Re=Math.max,ro=Math.round,En=Math.floor,tt=e=>({x:e,y:e}),Lg={left:"right",right:"left",bottom:"top",top:"bottom"},Mg={start:"end",end:"start"};function si(e,t,r){return Re(e,Et(t,r))}function ht(e,t){return typeof e=="function"?e(t):e}function pt(e){return e.split("-")[0]}function $r(e){return e.split("-")[1]}function Yi(e){return e==="x"?"y":"x"}function Zi(e){return e==="y"?"height":"width"}function jt(e){return["top","bottom"].includes(pt(e))?"y":"x"}function Qi(e){return Yi(jt(e))}function Bg(e,t,r){r===void 0&&(r=!1);const n=$r(e),o=Qi(e),s=Zi(o);let i=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=no(i)),[i,no(i)]}function Fg(e){const t=no(e);return[ii(e),t,ii(t)]}function ii(e){return e.replace(/start|end/g,t=>Mg[t])}function Ug(e,t,r){const n=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?o:n:t?n:o;case"left":case"right":return t?s:i;default:return[]}}function Hg(e,t,r,n){const o=$r(e);let s=Ug(pt(e),r==="start",n);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(ii)))),s}function no(e){return e.replace(/left|right|bottom|top/g,t=>Lg[t])}function qg(e){return{top:0,right:0,bottom:0,left:0,...e}}function Au(e){return typeof e!="number"?qg(e):{top:e,right:e,bottom:e,left:e}}function oo(e){const{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function Cl(e,t,r){let{reference:n,floating:o}=e;const s=jt(t),i=Qi(t),a=Zi(i),l=pt(t),c=s==="y",d=n.x+n.width/2-o.width/2,f=n.y+n.height/2-o.height/2,h=n[a]/2-o[a]/2;let m;switch(l){case"top":m={x:d,y:n.y-o.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-o.width,y:f};break;default:m={x:n.x,y:n.y}}switch($r(t)){case"start":m[i]-=h*(r&&c?-1:1);break;case"end":m[i]+=h*(r&&c?-1:1);break}return m}const Wg=async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:i}=r,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:f}=Cl(c,n,l),h=n,m={},v=0;for(let g=0;g<a.length;g++){const{name:y,fn:b}=a[g],{x:w,y:x,data:_,reset:C}=await b({x:d,y:f,initialPlacement:n,placement:h,strategy:o,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=w??d,f=x??f,m={...m,[y]:{...m[y],..._}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:d,y:f}=Cl(c,h,l)),g=-1)}return{x:d,y:f,placement:h,strategy:o,middlewareData:m}};async function nn(e,t){var r;t===void 0&&(t={});const{x:n,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=ht(t,e),v=Au(m),y=a[h?f==="floating"?"reference":"floating":f],b=oo(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(y)))==null||r?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=f==="floating"?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},C=oo(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(b.top-C.top+v.top)/_.y,bottom:(C.bottom-b.bottom+v.bottom)/_.y,left:(b.left-C.left+v.left)/_.x,right:(C.right-b.right+v.right)/_.x}}const Gg=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:d=0}=ht(e,t)||{};if(c==null)return{};const f=Au(d),h={x:r,y:n},m=Qi(o),v=Zi(m),g=await i.getDimensions(c),y=m==="y",b=y?"top":"left",w=y?"bottom":"right",x=y?"clientHeight":"clientWidth",_=s.reference[v]+s.reference[m]-h[m]-s.floating[v],C=h[m]-s.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let k=S?S[x]:0;(!k||!await(i.isElement==null?void 0:i.isElement(S)))&&(k=a.floating[x]||s.floating[v]);const M=_/2-C/2,K=k/2-g[v]/2-1,q=Et(f[b],K),V=Et(f[w],K),O=q,B=k-g[v]-V,T=k/2-g[v]/2+M,z=si(O,T,B),$=!l.arrow&&$r(o)!=null&&T!==z&&s.reference[v]/2-(T<O?q:V)-g[v]/2<0,W=$?T<O?T-O:T-B:0;return{[m]:h[m]+W,data:{[m]:z,centerOffset:T-z-W,...$&&{alignmentOffset:W}},reset:$}}}),Kg=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=ht(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const b=pt(o),w=jt(a),x=pt(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(x||!g?[no(a)]:Fg(a)),S=v!=="none";!h&&S&&C.push(...Hg(a,g,v,_));const k=[a,...C],M=await nn(t,y),K=[];let q=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&K.push(M[b]),f){const T=Bg(o,i,_);K.push(M[T[0]],M[T[1]])}if(q=[...q,{placement:o,overflows:K}],!K.every(T=>T<=0)){var V,O;const T=(((V=s.flip)==null?void 0:V.index)||0)+1,z=k[T];if(z)return{data:{index:T,overflows:q},reset:{placement:z}};let $=(O=q.filter(W=>W.overflows[0]<=0).sort((W,D)=>W.overflows[1]-D.overflows[1])[0])==null?void 0:O.placement;if(!$)switch(m){case"bestFit":{var B;const W=(B=q.filter(D=>{if(S){const J=jt(D.placement);return J===w||J==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(J=>J>0).reduce((J,Q)=>J+Q,0)]).sort((D,J)=>D[1]-J[1])[0])==null?void 0:B[0];W&&($=W);break}case"initialPlacement":$=a;break}if(o!==$)return{reset:{placement:$}}}return{}}}};function El(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jl(e){return Dg.some(t=>e[t]>=0)}const Vg=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...o}=ht(e,t);switch(n){case"referenceHidden":{const s=await nn(t,{...o,elementContext:"reference"}),i=El(s,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:jl(i)}}}case"escaped":{const s=await nn(t,{...o,altBoundary:!0}),i=El(s,r.floating);return{data:{escapedOffsets:i,escaped:jl(i)}}}default:return{}}}}};async function Jg(e,t){const{placement:r,platform:n,elements:o}=e,s=await(n.isRTL==null?void 0:n.isRTL(o.floating)),i=pt(r),a=$r(r),l=jt(r)==="y",c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,f=ht(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}const Xg=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await Jg(t,e);return i===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},Yg=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:y=>{let{x:b,y:w}=y;return{x:b,y:w}}},...l}=ht(e,t),c={x:r,y:n},d=await nn(t,l),f=jt(pt(o)),h=Yi(f);let m=c[h],v=c[f];if(s){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=m+d[y],x=m-d[b];m=si(w,m,x)}if(i){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=v+d[y],x=v-d[b];v=si(w,v,x)}const g=a.fn({...t,[h]:m,[f]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:s,[f]:i}}}}}},Zg=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ht(e,t),d={x:r,y:n},f=jt(o),h=Yi(f);let m=d[h],v=d[f];const g=ht(a,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=h==="y"?"height":"width",_=s.reference[h]-s.floating[x]+y.mainAxis,C=s.reference[h]+s.reference[x]-y.mainAxis;m<_?m=_:m>C&&(m=C)}if(c){var b,w;const x=h==="y"?"width":"height",_=["top","left"].includes(pt(o)),C=s.reference[f]-s.floating[x]+(_&&((b=i.offset)==null?void 0:b[f])||0)+(_?0:y.crossAxis),S=s.reference[f]+s.reference[x]+(_?0:((w=i.offset)==null?void 0:w[f])||0)-(_?y.crossAxis:0);v<C?v=C:v>S&&(v=S)}return{[h]:m,[f]:v}}}},Qg=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=ht(e,t),d=await nn(t,c),f=pt(o),h=$r(o),m=jt(o)==="y",{width:v,height:g}=s.floating;let y,b;f==="top"||f==="bottom"?(y=f,b=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(b=f,y=h==="end"?"top":"bottom");const w=g-d.top-d.bottom,x=v-d.left-d.right,_=Et(g-d[y],w),C=Et(v-d[b],x),S=!t.middlewareData.shift;let k=_,M=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=w),S&&!h){const q=Re(d.left,0),V=Re(d.right,0),O=Re(d.top,0),B=Re(d.bottom,0);m?M=v-2*(q!==0||V!==0?q+V:Re(d.left,d.right)):k=g-2*(O!==0||B!==0?O+B:Re(d.top,d.bottom))}await l({...t,availableWidth:M,availableHeight:k});const K=await i.getDimensions(a.floating);return v!==K.width||g!==K.height?{reset:{rects:!0}}:{}}}};function yo(){return typeof window<"u"}function zr(e){return Tu(e)?(e.nodeName||"").toLowerCase():"#document"}function Ne(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ot(e){var t;return(t=(Tu(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tu(e){return yo()?e instanceof Node||e instanceof Ne(e).Node:!1}function We(e){return yo()?e instanceof Element||e instanceof Ne(e).Element:!1}function rt(e){return yo()?e instanceof HTMLElement||e instanceof Ne(e).HTMLElement:!1}function Pl(e){return!yo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ne(e).ShadowRoot}function hn(e){const{overflow:t,overflowX:r,overflowY:n,display:o}=Ge(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(o)}function ev(e){return["table","td","th"].includes(zr(e))}function bo(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ea(e){const t=ta(),r=We(e)?Ge(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function tv(e){let t=Pt(e);for(;rt(t)&&!jr(t);){if(ea(t))return t;if(bo(t))return null;t=Pt(t)}return null}function ta(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function jr(e){return["html","body","#document"].includes(zr(e))}function Ge(e){return Ne(e).getComputedStyle(e)}function xo(e){return We(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Pt(e){if(zr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Pl(e)&&e.host||ot(e);return Pl(t)?t.host:t}function Ou(e){const t=Pt(e);return jr(t)?e.ownerDocument?e.ownerDocument.body:e.body:rt(t)&&hn(t)?t:Ou(t)}function on(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=Ou(e),s=o===((n=e.ownerDocument)==null?void 0:n.body),i=Ne(o);if(s){const a=ai(i);return t.concat(i,i.visualViewport||[],hn(o)?o:[],a&&r?on(a):[])}return t.concat(o,on(o,[],r))}function ai(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Nu(e){const t=Ge(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=rt(e),s=o?e.offsetWidth:r,i=o?e.offsetHeight:n,a=ro(r)!==s||ro(n)!==i;return a&&(r=s,n=i),{width:r,height:n,$:a}}function ra(e){return We(e)?e:e.contextElement}function kr(e){const t=ra(e);if(!rt(t))return tt(1);const r=t.getBoundingClientRect(),{width:n,height:o,$:s}=Nu(t);let i=(s?ro(r.width):r.width)/n,a=(s?ro(r.height):r.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const rv=tt(0);function Iu(e){const t=Ne(e);return!ta()||!t.visualViewport?rv:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nv(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ne(e)?!1:t}function Ut(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),s=ra(e);let i=tt(1);t&&(n?We(n)&&(i=kr(n)):i=kr(e));const a=nv(s,r,n)?Iu(s):tt(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,d=o.width/i.x,f=o.height/i.y;if(s){const h=Ne(s),m=n&&We(n)?Ne(n):n;let v=h,g=ai(v);for(;g&&n&&m!==v;){const y=kr(g),b=g.getBoundingClientRect(),w=Ge(g),x=b.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,_=b.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,f*=y.y,l+=x,c+=_,v=Ne(g),g=ai(v)}}return oo({width:d,height:f,x:l,y:c})}function na(e,t){const r=xo(e).scrollLeft;return t?t.left+r:Ut(ot(e)).left+r}function $u(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-(r?0:na(e,n)),s=n.top+t.scrollTop;return{x:o,y:s}}function ov(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e;const s=o==="fixed",i=ot(n),a=t?bo(t.floating):!1;if(n===i||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=tt(1);const d=tt(0),f=rt(n);if((f||!f&&!s)&&((zr(n)!=="body"||hn(i))&&(l=xo(n)),rt(n))){const m=Ut(n);c=kr(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=i&&!f&&!s?$u(i,l,!0):tt(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-l.scrollTop*c.y+d.y+h.y}}function sv(e){return Array.from(e.getClientRects())}function iv(e){const t=ot(e),r=xo(e),n=e.ownerDocument.body,o=Re(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Re(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+na(e);const a=-r.scrollTop;return Ge(n).direction==="rtl"&&(i+=Re(t.clientWidth,n.clientWidth)-o),{width:o,height:s,x:i,y:a}}function av(e,t){const r=Ne(e),n=ot(e),o=r.visualViewport;let s=n.clientWidth,i=n.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=ta();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function lv(e,t){const r=Ut(e,!0,t==="fixed"),n=r.top+e.clientTop,o=r.left+e.clientLeft,s=rt(e)?kr(e):tt(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=n*s.y;return{width:i,height:a,x:l,y:c}}function Rl(e,t,r){let n;if(t==="viewport")n=av(e,r);else if(t==="document")n=iv(ot(e));else if(We(t))n=lv(t,r);else{const o=Iu(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return oo(n)}function zu(e,t){const r=Pt(e);return r===t||!We(r)||jr(r)?!1:Ge(r).position==="fixed"||zu(r,t)}function cv(e,t){const r=t.get(e);if(r)return r;let n=on(e,[],!1).filter(a=>We(a)&&zr(a)!=="body"),o=null;const s=Ge(e).position==="fixed";let i=s?Pt(e):e;for(;We(i)&&!jr(i);){const a=Ge(i),l=ea(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||hn(i)&&!l&&zu(e,i))?n=n.filter(d=>d!==i):o=a,i=Pt(i)}return t.set(e,n),n}function uv(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e;const i=[...r==="clippingAncestors"?bo(t)?[]:cv(t,this._c):[].concat(r),n],a=i[0],l=i.reduce((c,d)=>{const f=Rl(t,d,o);return c.top=Re(f.top,c.top),c.right=Et(f.right,c.right),c.bottom=Et(f.bottom,c.bottom),c.left=Re(f.left,c.left),c},Rl(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dv(e){const{width:t,height:r}=Nu(e);return{width:t,height:r}}function fv(e,t,r){const n=rt(t),o=ot(t),s=r==="fixed",i=Ut(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=tt(0);if(n||!n&&!s)if((zr(t)!=="body"||hn(o))&&(a=xo(t)),n){const h=Ut(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else o&&(l.x=na(o));const c=o&&!n&&!s?$u(o,a):tt(0),d=i.left+a.scrollLeft-l.x-c.x,f=i.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:i.width,height:i.height}}function us(e){return Ge(e).position==="static"}function Al(e,t){if(!rt(e)||Ge(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ot(e)===r&&(r=r.ownerDocument.body),r}function Du(e,t){const r=Ne(e);if(bo(e))return r;if(!rt(e)){let o=Pt(e);for(;o&&!jr(o);){if(We(o)&&!us(o))return o;o=Pt(o)}return r}let n=Al(e,t);for(;n&&ev(n)&&us(n);)n=Al(n,t);return n&&jr(n)&&us(n)&&!ea(n)?r:n||tv(e)||r}const hv=async function(e){const t=this.getOffsetParent||Du,r=this.getDimensions,n=await r(e.floating);return{reference:fv(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function pv(e){return Ge(e).direction==="rtl"}const mv={convertOffsetParentRelativeRectToViewportRelativeRect:ov,getDocumentElement:ot,getClippingRect:uv,getOffsetParent:Du,getElementRects:hv,getClientRects:sv,getDimensions:dv,getScale:kr,isElement:We,isRTL:pv};function Lu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gv(e,t){let r=null,n;const o=ot(e);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=c;if(a||t(),!h||!m)return;const v=En(f),g=En(o.clientWidth-(d+h)),y=En(o.clientHeight-(f+m)),b=En(d),x={rootMargin:-v+"px "+-g+"px "+-y+"px "+-b+"px",threshold:Re(0,Et(1,l))||1};let _=!0;function C(S){const k=S[0].intersectionRatio;if(k!==l){if(!_)return i();k?i(!1,k):n=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!Lu(c,e.getBoundingClientRect())&&i(),_=!1}try{r=new IntersectionObserver(C,{...x,root:o.ownerDocument})}catch{r=new IntersectionObserver(C,x)}r.observe(e)}return i(!0),s}function Mu(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=ra(e),d=o||s?[...c?on(c):[],...on(t)]:[];d.forEach(b=>{o&&b.addEventListener("scroll",r,{passive:!0}),s&&b.addEventListener("resize",r)});const f=c&&a?gv(c,r):null;let h=-1,m=null;i&&(m=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(t)})),r()}),c&&!l&&m.observe(c),m.observe(t));let v,g=l?Ut(e):null;l&&y();function y(){const b=Ut(e);g&&!Lu(g,b)&&r(),g=b,v=requestAnimationFrame(y)}return r(),()=>{var b;d.forEach(w=>{o&&w.removeEventListener("scroll",r),s&&w.removeEventListener("resize",r)}),f?.(),(b=m)==null||b.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const vv=Xg,yv=Yg,bv=Kg,xv=Qg,wv=Vg,Tl=Gg,_v=Zg,kv=(e,t,r)=>{const n=new Map,o={platform:mv,...r},s={...o.platform,_c:n};return Wg(e,t,{...o,platform:s})};var qn=typeof document<"u"?p.useLayoutEffect:p.useEffect;function so(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!so(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){const s=o[n];if(!(s==="_owner"&&e.$$typeof)&&!so(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Bu(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ol(e,t){const r=Bu(e);return Math.round(t*r)/r}function ds(e){const t=p.useRef(e);return qn(()=>{t.current=e}),t}function Fu(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[d,f]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(n);so(h,n)||m(n);const[v,g]=p.useState(null),[y,b]=p.useState(null),w=p.useCallback(D=>{D!==S.current&&(S.current=D,g(D))},[]),x=p.useCallback(D=>{D!==k.current&&(k.current=D,b(D))},[]),_=s||v,C=i||y,S=p.useRef(null),k=p.useRef(null),M=p.useRef(d),K=l!=null,q=ds(l),V=ds(o),O=ds(c),B=p.useCallback(()=>{if(!S.current||!k.current)return;const D={placement:t,strategy:r,middleware:h};V.current&&(D.platform=V.current),kv(S.current,k.current,D).then(J=>{const Q={...J,isPositioned:O.current!==!1};T.current&&!so(M.current,Q)&&(M.current=Q,go.flushSync(()=>{f(Q)}))})},[h,t,r,V,O]);qn(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[c]);const T=p.useRef(!1);qn(()=>(T.current=!0,()=>{T.current=!1}),[]),qn(()=>{if(_&&(S.current=_),C&&(k.current=C),_&&C){if(q.current)return q.current(_,C,B);B()}},[_,C,B,q,K]);const z=p.useMemo(()=>({reference:S,floating:k,setReference:w,setFloating:x}),[w,x]),$=p.useMemo(()=>({reference:_,floating:C}),[_,C]),W=p.useMemo(()=>{const D={position:r,left:0,top:0};if(!$.floating)return D;const J=Ol($.floating,d.x),Q=Ol($.floating,d.y);return a?{...D,transform:"translate("+J+"px, "+Q+"px)",...Bu($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:Q}},[r,a,$.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:B,refs:z,elements:$,floatingStyles:W}),[d,B,z,$,W])}const Sv=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:o}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Tl({element:n.current,padding:o}).fn(r):{}:n?Tl({element:n,padding:o}).fn(r):{}}}},Uu=(e,t)=>({...vv(e),options:[e,t]}),Hu=(e,t)=>({...yv(e),options:[e,t]}),qu=(e,t)=>({..._v(e),options:[e,t]}),Wu=(e,t)=>({...bv(e),options:[e,t]}),Gu=(e,t)=>({...xv(e),options:[e,t]}),Ku=(e,t)=>({...wv(e),options:[e,t]}),Vu=(e,t)=>({...Sv(e),options:[e,t]});var Cv="Arrow",Ju=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...s}=e;return u.jsx(de.svg,{...s,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ju.displayName=Cv;var Ev=Ju;function jv(e){const[t,r]=p.useState(void 0);return Ft(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;r({width:i,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var oa="Popper",[Xu,Yu]=Vi(oa),[Pv,Zu]=Xu(oa),Qu=e=>{const{__scopePopper:t,children:r}=e,[n,o]=p.useState(null);return u.jsx(Pv,{scope:t,anchor:n,onAnchorChange:o,children:r})};Qu.displayName=oa;var ed="PopperAnchor",td=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...o}=e,s=Zu(ed,r),i=p.useRef(null),a=Ve(t,i);return p.useEffect(()=>{s.onAnchorChange(n?.current||i.current)}),n?null:u.jsx(de.div,{...o,ref:a})});td.displayName=ed;var sa="PopperContent",[Rv,Av]=Xu(sa),rd=p.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:v,...g}=e,y=Zu(sa,r),[b,w]=p.useState(null),x=Ve(t,R=>w(R)),[_,C]=p.useState(null),S=jv(_),k=S?.width??0,M=S?.height??0,K=n+(s!=="center"?"-"+s:""),q=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},V=Array.isArray(c)?c:[c],O=V.length>0,B={padding:q,boundary:V.filter(Ov),altBoundary:O},{refs:T,floatingStyles:z,placement:$,isPositioned:W,middlewareData:D}=Fu({strategy:"fixed",placement:K,whileElementsMounted:(...R)=>Mu(...R,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Uu({mainAxis:o+M,alignmentAxis:i}),l&&Hu({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qu():void 0,...B}),l&&Wu({...B}),Gu({...B,apply:({elements:R,rects:F,availableWidth:ee,availableHeight:oe})=>{const{width:be,height:xe}=F.reference,ne=R.floating.style;ne.setProperty("--radix-popper-available-width",`${ee}px`),ne.setProperty("--radix-popper-available-height",`${oe}px`),ne.setProperty("--radix-popper-anchor-width",`${be}px`),ne.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),_&&Vu({element:_,padding:a}),Nv({arrowWidth:k,arrowHeight:M}),h&&Ku({strategy:"referenceHidden",...B})]}),[J,Q]=sd($),ie=Ct(v);Ft(()=>{W&&ie?.()},[W,ie]);const j=D.arrow?.x,E=D.arrow?.y,A=D.arrow?.centerOffset!==0,[P,N]=p.useState();return Ft(()=>{b&&N(window.getComputedStyle(b).zIndex)},[b]),u.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:W?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:P,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(Rv,{scope:r,placedSide:J,onArrowChange:C,arrowX:j,arrowY:E,shouldHideArrow:A,children:u.jsx(de.div,{"data-side":J,"data-align":Q,...g,ref:x,style:{...g.style,animation:W?void 0:"none"}})})})});rd.displayName=sa;var nd="PopperArrow",Tv={top:"bottom",right:"left",bottom:"top",left:"right"},od=p.forwardRef(function(t,r){const{__scopePopper:n,...o}=t,s=Av(nd,n),i=Tv[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(Ev,{...o,ref:r,style:{...o.style,display:"block"}})})});od.displayName=nd;function Ov(e){return e!==null}var Nv=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:o}=t,i=o.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,d]=sd(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(o.arrow?.x??0)+a/2,m=(o.arrow?.y??0)+l/2;let v="",g="";return c==="bottom"?(v=i?f:`${h}px`,g=`${-l}px`):c==="top"?(v=i?f:`${h}px`,g=`${n.floating.height+l}px`):c==="right"?(v=`${-l}px`,g=i?f:`${m}px`):c==="left"&&(v=`${n.floating.width+l}px`,g=i?f:`${m}px`),{data:{x:v,y:g}}}});function sd(e){const[t,r="center"]=e.split("-");return[t,r]}var Iv=Qu,id=td,$v=rd,zv=od,Dv="Portal",ad=p.forwardRef((e,t)=>{const{container:r,...n}=e,[o,s]=p.useState(!1);Ft(()=>s(!0),[]);const i=r||o&&globalThis?.document?.body;return i?Cu.createPortal(u.jsx(de.div,{...n,ref:t}),i):null});ad.displayName=Dv;function Lv(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var pn=e=>{const{present:t,children:r}=e,n=Mv(t),o=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),s=Ve(n.ref,Bv(o));return typeof r=="function"||n.isPresent?p.cloneElement(o,{ref:s}):null};pn.displayName="Presence";function Mv(e){const[t,r]=p.useState(),n=p.useRef({}),o=p.useRef(e),s=p.useRef("none"),i=e?"mounted":"unmounted",[a,l]=Lv(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=jn(n.current);s.current=a==="mounted"?c:"none"},[a]),Ft(()=>{const c=n.current,d=o.current;if(d!==e){const h=s.current,m=jn(c);e?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),Ft(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,f=m=>{const g=jn(n.current).includes(m.animationName);if(m.target===t&&g&&(l("ANIMATION_END"),!o.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(s.current=jn(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function jn(e){return e?.animationName||"none"}function Bv(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ld({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,o]=Fv({defaultProp:t,onChange:r}),s=e!==void 0,i=s?e:n,a=Ct(r),l=p.useCallback(c=>{if(s){const f=typeof c=="function"?c(e):c;f!==e&&a(f)}else o(c)},[s,e,o,a]);return[i,l]}function Fv({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,o=p.useRef(n),s=Ct(t);return p.useEffect(()=>{o.current!==n&&(s(n),o.current=n)},[n,o,s]),r}var Uv=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},er=new WeakMap,Pn=new WeakMap,Rn={},fs=0,cd=function(e){return e&&(e.host||cd(e.parentNode))},Hv=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=cd(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},qv=function(e,t,r,n){var o=Hv(t,Array.isArray(e)?e:[e]);Rn[r]||(Rn[r]=new WeakMap);var s=Rn[r],i=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var m=h.getAttribute(n),v=m!==null&&m!=="false",g=(er.get(h)||0)+1,y=(s.get(h)||0)+1;er.set(h,g),s.set(h,y),i.push(h),g===1&&v&&Pn.set(h,!0),y===1&&h.setAttribute(r,"true"),v||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),a.clear(),fs++,function(){i.forEach(function(f){var h=er.get(f)-1,m=s.get(f)-1;er.set(f,h),s.set(f,m),h||(Pn.has(f)||f.removeAttribute(n),Pn.delete(f)),m||f.removeAttribute(r)}),fs--,fs||(er=new WeakMap,er=new WeakMap,Pn=new WeakMap,Rn={})}},ud=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=Uv(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),qv(n,o,r,"aria-hidden")):function(){return null}},Qe=function(){return Qe=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Qe.apply(this,arguments)};function dd(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Wv(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var Wn="right-scroll-bar-position",Gn="width-before-scroll-bar",Gv="with-scroll-bars-hidden",Kv="--removed-body-scroll-bar-size";function hs(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Vv(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var Jv=typeof window<"u"?p.useLayoutEffect:p.useEffect,Nl=new WeakMap;function Xv(e,t){var r=Vv(null,function(n){return e.forEach(function(o){return hs(o,n)})});return Jv(function(){var n=Nl.get(r);if(n){var o=new Set(n),s=new Set(e),i=r.current;o.forEach(function(a){s.has(a)||hs(a,null)}),s.forEach(function(a){o.has(a)||hs(a,i)})}Nl.set(r,e)},[e]),r}function Yv(e){return e}function Zv(e,t){t===void 0&&(t=Yv);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var i=t(s,n);return r.push(i),function(){r=r.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(n=!0;r.length;){var i=r;r=[],i.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var i=[];if(r.length){var a=r;r=[],a.forEach(s),i=r}var l=function(){var d=i;i=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(d){i.push(d),c()},filter:function(d){return i=i.filter(d),r}}}};return o}function Qv(e){e===void 0&&(e={});var t=Zv(null);return t.options=Qe({async:!0,ssr:!1},e),t}var fd=function(e){var t=e.sideCar,r=dd(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Qe({},r))};fd.isSideCarExport=!0;function ey(e,t){return e.useMedium(t),fd}var hd=Qv(),ps=function(){},wo=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:ps,onWheelCapture:ps,onTouchMoveCapture:ps}),o=n[0],s=n[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,v=e.inert,g=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,x=dd(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,C=Xv([r,t]),S=Qe(Qe({},x),o);return p.createElement(p.Fragment,null,d&&p.createElement(_,{sideCar:hd,removeScrollBar:c,shards:f,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:w}),i?p.cloneElement(p.Children.only(a),Qe(Qe({},S),{ref:C})):p.createElement(b,Qe({},S,{className:l,ref:C}),a))});wo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wo.classNames={fullWidth:Gn,zeroRight:Wn};var ty=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ry(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ty();return t&&e.setAttribute("nonce",t),e}function ny(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function oy(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var sy=function(){var e=0,t=null;return{add:function(r){e==0&&(t=ry())&&(ny(t,r),oy(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},iy=function(){var e=sy();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},pd=function(){var e=iy(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},ay={left:0,top:0,right:0,gap:0},ms=function(e){return parseInt(e||"",10)||0},ly=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ms(r),ms(n),ms(o)]},cy=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ay;var t=ly(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},uy=pd(),Sr="data-scroll-locked",dy=function(e,t,r,n){var o=e.left,s=e.top,i=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Gv,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Sr,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wn,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Gn,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Wn," .").concat(Wn,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gn," .").concat(Gn,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Sr,`] {
    `).concat(Kv,": ").concat(a,`px;
  }
`)},Il=function(){var e=parseInt(document.body.getAttribute(Sr)||"0",10);return isFinite(e)?e:0},fy=function(){p.useEffect(function(){return document.body.setAttribute(Sr,(Il()+1).toString()),function(){var e=Il()-1;e<=0?document.body.removeAttribute(Sr):document.body.setAttribute(Sr,e.toString())}},[])},hy=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;fy();var s=p.useMemo(function(){return cy(o)},[o]);return p.createElement(uy,{styles:dy(s,!t,o,r?"":"!important")})},li=!1;if(typeof window<"u")try{var An=Object.defineProperty({},"passive",{get:function(){return li=!0,!0}});window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{li=!1}var tr=li?{passive:!1}:!1,py=function(e){return e.tagName==="TEXTAREA"},md=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!py(e)&&r[t]==="visible")},my=function(e){return md(e,"overflowY")},gy=function(e){return md(e,"overflowX")},$l=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=gd(e,n);if(o){var s=vd(e,n),i=s[1],a=s[2];if(i>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},vy=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},yy=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},gd=function(e,t){return e==="v"?my(t):gy(t)},vd=function(e,t){return e==="v"?vy(t):yy(t)},by=function(e,t){return e==="h"&&t==="rtl"?-1:1},xy=function(e,t,r,n,o){var s=by(e,window.getComputedStyle(t).direction),i=s*n,a=r.target,l=t.contains(a),c=!1,d=i>0,f=0,h=0;do{var m=vd(e,a),v=m[0],g=m[1],y=m[2],b=g-y-s*v;(v||b)&&gd(e,a)&&(f+=b,h+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(c=!0),c},Tn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zl=function(e){return[e.deltaX,e.deltaY]},Dl=function(e){return e&&"current"in e?e.current:e},wy=function(e,t){return e[0]===t[0]&&e[1]===t[1]},_y=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ky=0,rr=[];function Sy(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),o=p.useState(ky++)[0],s=p.useState(pd)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=Wv([e.lockRef.current],(e.shards||[]).map(Dl),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=p.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var b=Tn(g),w=r.current,x="deltaX"in g?g.deltaX:w[0]-b[0],_="deltaY"in g?g.deltaY:w[1]-b[1],C,S=g.target,k=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&S.type==="range")return!1;var M=$l(k,S);if(!M)return!0;if(M?C=k:(C=k==="v"?"h":"v",M=$l(k,S)),!M)return!1;if(!n.current&&"changedTouches"in g&&(x||_)&&(n.current=C),!C)return!0;var K=n.current||C;return xy(K,y,g,K==="h"?x:_)},[]),l=p.useCallback(function(g){var y=g;if(!(!rr.length||rr[rr.length-1]!==s)){var b="deltaY"in y?zl(y):Tn(y),w=t.current.filter(function(C){return C.name===y.type&&(C.target===y.target||y.target===C.shadowParent)&&wy(C.delta,b)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var x=(i.current.shards||[]).map(Dl).filter(Boolean).filter(function(C){return C.contains(y.target)}),_=x.length>0?a(y,x[0]):!i.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),c=p.useCallback(function(g,y,b,w){var x={name:g,delta:y,target:b,should:w,shadowParent:Cy(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(_){return _!==x})},1)},[]),d=p.useCallback(function(g){r.current=Tn(g),n.current=void 0},[]),f=p.useCallback(function(g){c(g.type,zl(g),g.target,a(g,e.lockRef.current))},[]),h=p.useCallback(function(g){c(g.type,Tn(g),g.target,a(g,e.lockRef.current))},[]);p.useEffect(function(){return rr.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,tr),document.addEventListener("touchmove",l,tr),document.addEventListener("touchstart",d,tr),function(){rr=rr.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,tr),document.removeEventListener("touchmove",l,tr),document.removeEventListener("touchstart",d,tr)}},[]);var m=e.removeScrollBar,v=e.inert;return p.createElement(p.Fragment,null,v?p.createElement(s,{styles:_y(o)}):null,m?p.createElement(hy,{gapMode:e.gapMode}):null)}function Cy(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ey=ey(hd,Sy);var ia=p.forwardRef(function(e,t){return p.createElement(wo,Qe({},e,{ref:t,sideCar:Ey}))});ia.classNames=wo.classNames;var aa="Popover",[yd,IS]=Vi(aa,[Yu]),mn=Yu(),[jy,Xt]=yd(aa),bd=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,a=mn(t),l=p.useRef(null),[c,d]=p.useState(!1),[f=!1,h]=ld({prop:n,defaultProp:o,onChange:s});return u.jsx(Iv,{...a,children:u.jsx(jy,{scope:t,contentId:et(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:i,children:r})})};bd.displayName=aa;var xd="PopoverAnchor",Py=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=Xt(xd,r),s=mn(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return p.useEffect(()=>(i(),()=>a()),[i,a]),u.jsx(id,{...s,...n,ref:t})});Py.displayName=xd;var wd="PopoverTrigger",_d=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=Xt(wd,r),s=mn(r),i=Ve(t,o.triggerRef),a=u.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ed(o.open),...n,ref:i,onClick:Oe(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:u.jsx(id,{asChild:!0,...s,children:a})});_d.displayName=wd;var Ry="PopoverPortal",[$S,Ay]=yd(Ry,{forceMount:void 0}),Pr="PopoverContent",kd=p.forwardRef((e,t)=>{const r=Ay(Pr,e.__scopePopover),{forceMount:n=r.forceMount,...o}=e,s=Xt(Pr,e.__scopePopover);return u.jsx(pn,{present:n||s.open,children:s.modal?u.jsx(Ty,{...o,ref:t}):u.jsx(Oy,{...o,ref:t})})});kd.displayName=Pr;var Ty=p.forwardRef((e,t)=>{const r=Xt(Pr,e.__scopePopover),n=p.useRef(null),o=Ve(t,n),s=p.useRef(!1);return p.useEffect(()=>{const i=n.current;if(i)return ud(i)},[]),u.jsx(ia,{as:vo,allowPinchZoom:!0,children:u.jsx(Sd,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(e.onCloseAutoFocus,i=>{i.preventDefault(),s.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Oe(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Oe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Oy=p.forwardRef((e,t)=>{const r=Xt(Pr,e.__scopePopover),n=p.useRef(!1),o=p.useRef(!1);return u.jsx(Sd,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||r.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;r.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Sd=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...f}=e,h=Xt(Pr,r),m=mn(r);return Pu(),u.jsx(Xi,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:s,children:u.jsx(Ji,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:u.jsx($v,{"data-state":Ed(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cd="PopoverClose",Ny=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=Xt(Cd,r);return u.jsx(de.button,{type:"button",...n,ref:t,onClick:Oe(e.onClick,()=>o.onOpenChange(!1))})});Ny.displayName=Cd;var Iy="PopoverArrow",$y=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,o=mn(r);return u.jsx(zv,{...o,...n,ref:t})});$y.displayName=Iy;function Ed(e){return e?"open":"closed"}var zy=_d;function jd(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=jd(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function la(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=jd(e))&&(n&&(n+=" "),n+=t);return n}function ge(...e){return Ki(la(e))}const Pd=bd,Rd=zy,Ad=p.forwardRef(({className:e,align:t="end",...r},n)=>u.jsx(kd,{ref:n,align:t,className:ge("z-popups drop-shadow-oneBlock p-0 border-shadow outline-none",e),...r,onKeyDown:o=>{o.stopPropagation()}})),_o=({children:e,scaleFactor:t})=>{const r=ho();return u.jsx("div",{className:"contents set-spritesheet-vars",style:{"--scale":t??r,"--block":`${(t??r)*8}px`},children:e})};var Ll=1,Dy=.9,Ly=.8,My=.17,gs=.1,vs=.999,By=.9999,Fy=.99,Uy=/[\\\/_+.#"@\[\(\{&]/,Hy=/[\\\/_+.#"@\[\(\{&]/g,qy=/[\s-]/,Td=/[\s-]/g;function ci(e,t,r,n,o,s,i){if(s===t.length)return o===e.length?Ll:Fy;var a=`${o},${s}`;if(i[a]!==void 0)return i[a];for(var l=n.charAt(s),c=r.indexOf(l,o),d=0,f,h,m,v;c>=0;)f=ci(e,t,r,n,c+1,s+1,i),f>d&&(c===o?f*=Ll:Uy.test(e.charAt(c-1))?(f*=Ly,m=e.slice(o,c-1).match(Hy),m&&o>0&&(f*=Math.pow(vs,m.length))):qy.test(e.charAt(c-1))?(f*=Dy,v=e.slice(o,c-1).match(Td),v&&o>0&&(f*=Math.pow(vs,v.length))):(f*=My,o>0&&(f*=Math.pow(vs,c-o))),e.charAt(c)!==t.charAt(s)&&(f*=By)),(f<gs&&r.charAt(c-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(c-1)!==n.charAt(s))&&(h=ci(e,t,r,n,c+1,s+2,i),h*gs>f&&(f=h*gs)),f>d&&(d=f),c=r.indexOf(l,c+1);return i[a]=d,d}function Ml(e){return e.toLowerCase().replace(Td," ")}function Wy(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ci(e,t,Ml(e),Ml(t),0,0,{})}var ca="Dialog",[Od,zS]=Vi(ca),[Gy,Je]=Od(ca),Nd=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=p.useRef(null),l=p.useRef(null),[c=!1,d]=ld({prop:n,defaultProp:o,onChange:s});return u.jsx(Gy,{scope:t,triggerRef:a,contentRef:l,contentId:et(),titleId:et(),descriptionId:et(),open:c,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:i,children:r})};Nd.displayName=ca;var Id="DialogTrigger",Ky=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Je(Id,r),s=Ve(t,o.triggerRef);return u.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":fa(o.open),...n,ref:s,onClick:Oe(e.onClick,o.onOpenToggle)})});Ky.displayName=Id;var ua="DialogPortal",[Vy,$d]=Od(ua,{forceMount:void 0}),zd=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,s=Je(ua,t);return u.jsx(Vy,{scope:t,forceMount:r,children:p.Children.map(n,i=>u.jsx(pn,{present:r||s.open,children:u.jsx(ad,{asChild:!0,container:o,children:i})}))})};zd.displayName=ua;var io="DialogOverlay",Dd=p.forwardRef((e,t)=>{const r=$d(io,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=Je(io,e.__scopeDialog);return s.modal?u.jsx(pn,{present:n||s.open,children:u.jsx(Jy,{...o,ref:t})}):null});Dd.displayName=io;var Jy=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Je(io,r);return u.jsx(ia,{as:vo,allowPinchZoom:!0,shards:[o.contentRef],children:u.jsx(de.div,{"data-state":fa(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ht="DialogContent",Ld=p.forwardRef((e,t)=>{const r=$d(Ht,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,s=Je(Ht,e.__scopeDialog);return u.jsx(pn,{present:n||s.open,children:s.modal?u.jsx(Xy,{...o,ref:t}):u.jsx(Yy,{...o,ref:t})})});Ld.displayName=Ht;var Xy=p.forwardRef((e,t)=>{const r=Je(Ht,e.__scopeDialog),n=p.useRef(null),o=Ve(t,r.contentRef,n);return p.useEffect(()=>{const s=n.current;if(s)return ud(s)},[]),u.jsx(Md,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(e.onCloseAutoFocus,s=>{s.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Oe(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:Oe(e.onFocusOutside,s=>s.preventDefault())})}),Yy=p.forwardRef((e,t)=>{const r=Je(Ht,e.__scopeDialog),n=p.useRef(!1),o=p.useRef(!1);return u.jsx(Md,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||r.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;r.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Md=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=Je(Ht,r),l=p.useRef(null),c=Ve(t,l);return Pu(),u.jsxs(u.Fragment,{children:[u.jsx(Xi,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:s,children:u.jsx(Ji,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":fa(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(tb,{titleId:a.titleId}),u.jsx(nb,{contentRef:l,descriptionId:a.descriptionId})]})]})}),da="DialogTitle",Zy=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Je(da,r);return u.jsx(de.h2,{id:o.titleId,...n,ref:t})});Zy.displayName=da;var Bd="DialogDescription",Qy=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Je(Bd,r);return u.jsx(de.p,{id:o.descriptionId,...n,ref:t})});Qy.displayName=Bd;var Fd="DialogClose",eb=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=Je(Fd,r);return u.jsx(de.button,{type:"button",...n,ref:t,onClick:Oe(e.onClick,()=>o.onOpenChange(!1))})});eb.displayName=Fd;function fa(e){return e?"open":"closed"}var Ud="DialogTitleWarning",[DS,Hd]=fg(Ud,{contentName:Ht,titleName:da,docsSlug:"dialog"}),tb=({titleId:e})=>{const t=Hd(Ud),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},rb="DialogDescriptionWarning",nb=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hd(rb).contentName}}.`;return p.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},ob=Nd,sb=zd,ib=Dd,ab=Ld,ys={exports:{}},bs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl;function lb(){if(Bl)return bs;Bl=1;var e=Zh();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function a(f,h){var m=h(),v=n({inst:{value:m,getSnapshot:h}}),g=v[0].inst,y=v[1];return s(function(){g.value=m,g.getSnapshot=h,l(g)&&y({inst:g})},[f,m,h]),o(function(){return l(g)&&y({inst:g}),f(function(){l(g)&&y({inst:g})})},[f]),i(m),m}function l(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function c(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return bs.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,bs}var Fl;function cb(){return Fl||(Fl=1,ys.exports=lb()),ys.exports}var ub=cb(),Hr='[cmdk-group=""]',xs='[cmdk-group-items=""]',db='[cmdk-group-heading=""]',ha='[cmdk-item=""]',Ul=`${ha}:not([aria-disabled="true"])`,ui="cmdk-item-select",zt="data-value",fb=(e,t,r)=>Wy(e,t,r),qd=p.createContext(void 0),gn=()=>p.useContext(qd),Wd=p.createContext(void 0),pa=()=>p.useContext(Wd),Gd=p.createContext(void 0),Kd=p.forwardRef((e,t)=>{let r=pr(()=>{var j,E;return{search:"",value:(E=(j=e.value)!=null?j:e.defaultValue)!=null?E:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=pr(()=>new Set),o=pr(()=>new Map),s=pr(()=>new Map),i=pr(()=>new Set),a=Vd(e),{label:l,children:c,value:d,onValueChange:f,filter:h,shouldFilter:m,loop:v,disablePointerSelection:g=!1,vimBindings:y=!0,...b}=e,w=et(),x=et(),_=et(),C=p.useRef(null),S=kb();qt(()=>{if(d!==void 0){let j=d.trim();r.current.value=j,k.emit()}},[d]),qt(()=>{S(6,B)},[]);let k=p.useMemo(()=>({subscribe:j=>(i.current.add(j),()=>i.current.delete(j)),snapshot:()=>r.current,setState:(j,E,A)=>{var P,N,R;if(!Object.is(r.current[j],E)){if(r.current[j]=E,j==="search")O(),q(),S(1,V);else if(j==="value"&&(A||S(5,B),((P=a.current)==null?void 0:P.value)!==void 0)){let F=E??"";(R=(N=a.current).onValueChange)==null||R.call(N,F);return}k.emit()}},emit:()=>{i.current.forEach(j=>j())}}),[]),M=p.useMemo(()=>({value:(j,E,A)=>{var P;E!==((P=s.current.get(j))==null?void 0:P.value)&&(s.current.set(j,{value:E,keywords:A}),r.current.filtered.items.set(j,K(E,A)),S(2,()=>{q(),k.emit()}))},item:(j,E)=>(n.current.add(j),E&&(o.current.has(E)?o.current.get(E).add(j):o.current.set(E,new Set([j]))),S(3,()=>{O(),q(),r.current.value||V(),k.emit()}),()=>{s.current.delete(j),n.current.delete(j),r.current.filtered.items.delete(j);let A=T();S(4,()=>{O(),A?.getAttribute("id")===j&&V(),k.emit()})}),group:j=>(o.current.has(j)||o.current.set(j,new Set),()=>{s.current.delete(j),o.current.delete(j)}),filter:()=>a.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:w,inputId:_,labelId:x,listInnerRef:C}),[]);function K(j,E){var A,P;let N=(P=(A=a.current)==null?void 0:A.filter)!=null?P:fb;return j?N(j,r.current.search,E):0}function q(){if(!r.current.search||a.current.shouldFilter===!1)return;let j=r.current.filtered.items,E=[];r.current.filtered.groups.forEach(P=>{let N=o.current.get(P),R=0;N.forEach(F=>{let ee=j.get(F);R=Math.max(ee,R)}),E.push([P,R])});let A=C.current;z().sort((P,N)=>{var R,F;let ee=P.getAttribute("id"),oe=N.getAttribute("id");return((R=j.get(oe))!=null?R:0)-((F=j.get(ee))!=null?F:0)}).forEach(P=>{let N=P.closest(xs);N?N.appendChild(P.parentElement===N?P:P.closest(`${xs} > *`)):A.appendChild(P.parentElement===A?P:P.closest(`${xs} > *`))}),E.sort((P,N)=>N[1]-P[1]).forEach(P=>{var N;let R=(N=C.current)==null?void 0:N.querySelector(`${Hr}[${zt}="${encodeURIComponent(P[0])}"]`);R?.parentElement.appendChild(R)})}function V(){let j=z().find(A=>A.getAttribute("aria-disabled")!=="true"),E=j?.getAttribute(zt);k.setState("value",E||void 0)}function O(){var j,E,A,P;if(!r.current.search||a.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let N=0;for(let R of n.current){let F=(E=(j=s.current.get(R))==null?void 0:j.value)!=null?E:"",ee=(P=(A=s.current.get(R))==null?void 0:A.keywords)!=null?P:[],oe=K(F,ee);r.current.filtered.items.set(R,oe),oe>0&&N++}for(let[R,F]of o.current)for(let ee of F)if(r.current.filtered.items.get(ee)>0){r.current.filtered.groups.add(R);break}r.current.filtered.count=N}function B(){var j,E,A;let P=T();P&&(((j=P.parentElement)==null?void 0:j.firstChild)===P&&((A=(E=P.closest(Hr))==null?void 0:E.querySelector(db))==null||A.scrollIntoView({block:"nearest"})),P.scrollIntoView({block:"nearest"}))}function T(){var j;return(j=C.current)==null?void 0:j.querySelector(`${ha}[aria-selected="true"]`)}function z(){var j;return Array.from(((j=C.current)==null?void 0:j.querySelectorAll(Ul))||[])}function $(j){let E=z()[j];E&&k.setState("value",E.getAttribute(zt))}function W(j){var E;let A=T(),P=z(),N=P.findIndex(F=>F===A),R=P[N+j];(E=a.current)!=null&&E.loop&&(R=N+j<0?P[P.length-1]:N+j===P.length?P[0]:P[N+j]),R&&k.setState("value",R.getAttribute(zt))}function D(j){let E=T(),A=E?.closest(Hr),P;for(;A&&!P;)A=j>0?wb(A,Hr):_b(A,Hr),P=A?.querySelector(Ul);P?k.setState("value",P.getAttribute(zt)):W(j)}let J=()=>$(z().length-1),Q=j=>{j.preventDefault(),j.metaKey?J():j.altKey?D(1):W(1)},ie=j=>{j.preventDefault(),j.metaKey?$(0):j.altKey?D(-1):W(-1)};return p.createElement(de.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:j=>{var E;if((E=b.onKeyDown)==null||E.call(b,j),!j.defaultPrevented)switch(j.key){case"n":case"j":{y&&j.ctrlKey&&Q(j);break}case"ArrowDown":{Q(j);break}case"p":case"k":{y&&j.ctrlKey&&ie(j);break}case"ArrowUp":{ie(j);break}case"Home":{j.preventDefault(),$(0);break}case"End":{j.preventDefault(),J();break}case"Enter":if(!j.nativeEvent.isComposing&&j.keyCode!==229){j.preventDefault();let A=T();if(A){let P=new Event(ui);A.dispatchEvent(P)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:Cb},l),ko(e,j=>p.createElement(Wd.Provider,{value:k},p.createElement(qd.Provider,{value:M},j))))}),hb=p.forwardRef((e,t)=>{var r,n;let o=et(),s=p.useRef(null),i=p.useContext(Gd),a=gn(),l=Vd(e),c=(n=(r=l.current)==null?void 0:r.forceMount)!=null?n:i?.forceMount;qt(()=>{if(!c)return a.item(o,i?.id)},[c]);let d=Jd(o,s,[e.value,e.children,s],e.keywords),f=pa(),h=Wt(S=>S.value&&S.value===d.current),m=Wt(S=>c||a.filter()===!1?!0:S.search?S.filtered.items.get(o)>0:!0);p.useEffect(()=>{let S=s.current;if(!(!S||e.disabled))return S.addEventListener(ui,v),()=>S.removeEventListener(ui,v)},[m,e.onSelect,e.disabled]);function v(){var S,k;g(),(k=(S=l.current).onSelect)==null||k.call(S,d.current)}function g(){f.setState("value",d.current,!0)}if(!m)return null;let{disabled:y,value:b,onSelect:w,forceMount:x,keywords:_,...C}=e;return p.createElement(de.div,{ref:sn([s,t]),...C,id:o,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!h,"data-disabled":!!y,"data-selected":!!h,onPointerMove:y||a.getDisablePointerSelection()?void 0:g,onClick:y?void 0:v},e.children)}),pb=p.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:o,...s}=e,i=et(),a=p.useRef(null),l=p.useRef(null),c=et(),d=gn(),f=Wt(m=>o||d.filter()===!1?!0:m.search?m.filtered.groups.has(i):!0);qt(()=>d.group(i),[]),Jd(i,a,[e.value,e.heading,l]);let h=p.useMemo(()=>({id:i,forceMount:o}),[o]);return p.createElement(de.div,{ref:sn([a,t]),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),ko(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},p.createElement(Gd.Provider,{value:h},m))))}),mb=p.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,o=p.useRef(null),s=Wt(i=>!i.search);return!r&&!s?null:p.createElement(de.div,{ref:sn([o,t]),...n,"cmdk-separator":"",role:"separator"})}),gb=p.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,o=e.value!=null,s=pa(),i=Wt(d=>d.search),a=Wt(d=>d.value),l=gn(),c=p.useMemo(()=>{var d;let f=(d=l.listInnerRef.current)==null?void 0:d.querySelector(`${ha}[${zt}="${encodeURIComponent(a)}"]`);return f?.getAttribute("id")},[]);return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(de.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:o?e.value:i,onChange:d=>{o||s.setState("search",d.target.value),r?.(d.target.value)}})}),vb=p.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...o}=e,s=p.useRef(null),i=p.useRef(null),a=gn();return p.useEffect(()=>{if(i.current&&s.current){let l=i.current,c=s.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=l.offsetHeight;c.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(l),()=>{cancelAnimationFrame(d),f.unobserve(l)}}},[]),p.createElement(de.div,{ref:sn([s,t]),...o,"cmdk-list":"",role:"listbox","aria-label":n,id:a.listId},ko(e,l=>p.createElement("div",{ref:sn([i,a.listInnerRef]),"cmdk-list-sizer":""},l)))}),yb=p.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:o,contentClassName:s,container:i,...a}=e;return p.createElement(ob,{open:r,onOpenChange:n},p.createElement(sb,{container:i},p.createElement(ib,{"cmdk-overlay":"",className:o}),p.createElement(ab,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(Kd,{ref:t,...a}))))}),bb=p.forwardRef((e,t)=>Wt(r=>r.filtered.count===0)?p.createElement(de.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),xb=p.forwardRef((e,t)=>{let{progress:r,children:n,label:o="Loading...",...s}=e;return p.createElement(de.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ko(e,i=>p.createElement("div",{"aria-hidden":!0},i)))}),Ee=Object.assign(Kd,{List:vb,Item:hb,Input:gb,Group:pb,Separator:mb,Dialog:yb,Empty:bb,Loading:xb});function wb(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function _b(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Vd(e){let t=p.useRef(e);return qt(()=>{t.current=e}),t}var qt=typeof window>"u"?p.useEffect:p.useLayoutEffect;function pr(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function sn(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Wt(e){let t=pa(),r=()=>e(t.snapshot());return ub.useSyncExternalStore(t.subscribe,r,r)}function Jd(e,t,r,n=[]){let o=p.useRef(),s=gn();return qt(()=>{var i;let a=(()=>{var c;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():o.current}})(),l=n.map(c=>c.trim());s.value(e,a,l),(i=t.current)==null||i.setAttribute(zt,a),o.current=a}),o}var kb=()=>{let[e,t]=p.useState(),r=pr(()=>new Map);return qt(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,o)=>{r.current.set(n,o),t({})}};function Sb(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ko({asChild:e,children:t},r){return e&&p.isValidElement(t)?p.cloneElement(Sb(t),{ref:t.ref},r(t.props.children)):r(t)}var Cb={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Xd=p.forwardRef(({className:e,...t},r)=>u.jsx(Ee,{ref:r,className:ge("flex h-full w-full flex-col overflow-hidden bg-metallicBlue text-popover-foreground",e),...t}));Xd.displayName=Ee.displayName;const Yd=p.forwardRef(({className:e,...t},r)=>u.jsxs("div",{className:"flex items-center border-b px-1 pb-1","cmdk-input-wrapper":"",children:[u.jsx("span",{className:"sprite mr-1 texture-hud_char_gt"}),u.jsx(Ee.Input,{ref:r,className:ge("flex h-1 w-full bg-pastelBlue py-1 outline-none placeholder:text-shadow disabled:cursor-not-allowed",e),...t})]}));Yd.displayName=Ee.Input.displayName;const Zd=p.forwardRef(({className:e,...t},r)=>u.jsx(Ee.List,{ref:r,className:ge("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Zd.displayName=Ee.List.displayName;const Qd=p.forwardRef((e,t)=>u.jsx(Ee.Empty,{ref:t,className:"pl-1",...e}));Qd.displayName=Ee.Empty.displayName;const ef=p.forwardRef(({className:e,...t},r)=>u.jsx(Ee.Group,{ref:r,className:ge("overflow-hidden",e),...t}));ef.displayName=Ee.Group.displayName;const Eb=p.forwardRef(({className:e,...t},r)=>u.jsx(Ee.Separator,{ref:r,className:ge("-mx-1 h-px bg-shadow",e),...t}));Eb.displayName=Ee.Separator.displayName;const So=p.forwardRef(({className:e,...t},r)=>u.jsx(Ee.Item,{ref:r,className:ge("relative flex cursor-default select-none items-center text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-midRed hover:bg-pastelBlue data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));So.displayName=Ee.Item.displayName;function ut(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}function Hl(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tf(...e){return t=>{let r=!1;const n=e.map(o=>{const s=Hl(o,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let o=0;o<n.length;o++){const s=n[o];typeof s=="function"?s():Hl(e[o],null)}}}}function Yt(...e){return p.useCallback(tf(...e),e)}function rf(e,t=[]){let r=[];function n(s,i){const a=p.createContext(i),l=r.length;r=[...r,i];const c=f=>{const{scope:h,children:m,...v}=f,g=h?.[e]?.[l]||a,y=p.useMemo(()=>v,Object.values(v));return u.jsx(g.Provider,{value:y,children:m})};c.displayName=s+"Provider";function d(f,h){const m=h?.[e]?.[l]||a,v=p.useContext(m);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const o=()=>{const s=r.map(i=>p.createContext(i));return function(a){const l=a?.[e]||s;return p.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[n,jb(o,...t)]}function jb(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=n.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Pb(e){const t=Rb(e),r=p.forwardRef((n,o)=>{const{children:s,...i}=n,a=p.Children.toArray(s),l=a.find(Tb);if(l){const c=l.props.children,d=a.map(f=>f===l?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:f);return u.jsx(t,{...i,ref:o,children:p.isValidElement(c)?p.cloneElement(c,void 0,d):null})}return u.jsx(t,{...i,ref:o,children:s})});return r.displayName=`${e}.Slot`,r}function Rb(e){const t=p.forwardRef((r,n)=>{const{children:o,...s}=r;if(p.isValidElement(o)){const i=Nb(o),a=Ob(s,o.props);return o.type!==p.Fragment&&(a.ref=n?tf(n,i):i),p.cloneElement(o,a)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nf=Symbol("radix.slottable");function Ab(e){const t=({children:r})=>u.jsx(u.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=nf,t}function Tb(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nf}function Ob(e,t){const r={...t};for(const n in t){const o=e[n],s=t[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...e,...r}}function Nb(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ib=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],At=Ib.reduce((e,t)=>{const r=Pb(`Primitive.${t}`),n=p.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function $b(e,t){e&&go.flushSync(()=>e.dispatchEvent(t))}function Co(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>t.current?.(...r),[])}function zb(e,t=globalThis?.document){const r=Co(e);p.useEffect(()=>{const n=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Db="DismissableLayer",di="dismissableLayer.update",Lb="dismissableLayer.pointerDownOutside",Mb="dismissableLayer.focusOutside",ql,of=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sf=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=p.useContext(of),[d,f]=p.useState(null),h=d?.ownerDocument??globalThis?.document,[,m]=p.useState({}),v=Yt(t,k=>f(k)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=d?g.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,C=Ub(k=>{const M=k.target,K=[...c.branches].some(q=>q.contains(M));!_||K||(o?.(k),i?.(k),k.defaultPrevented||a?.())},h),S=Hb(k=>{const M=k.target;[...c.branches].some(q=>q.contains(M))||(s?.(k),i?.(k),k.defaultPrevented||a?.())},h);return zb(k=>{w===c.layers.size-1&&(n?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(ql=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),Wl(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ql)}},[d,h,r,c]),p.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),Wl())},[d,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(di,k),()=>document.removeEventListener(di,k)},[]),u.jsx(At.div,{...l,ref:v,style:{pointerEvents:x?_?"auto":"none":void 0,...e.style},onFocusCapture:ut(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ut(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ut(e.onPointerDownCapture,C.onPointerDownCapture)})});sf.displayName=Db;var Bb="DismissableLayerBranch",Fb=p.forwardRef((e,t)=>{const r=p.useContext(of),n=p.useRef(null),o=Yt(t,n);return p.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),u.jsx(At.div,{...e,ref:o})});Fb.displayName=Bb;function Ub(e,t=globalThis?.document){const r=Co(e),n=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){af(Lb,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Hb(e,t=globalThis?.document){const r=Co(e),n=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!n.current&&af(Mb,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Wl(){const e=new CustomEvent(di);document.dispatchEvent(e)}function af(e,t,r,{discrete:n}){const o=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?$b(o,s):o.dispatchEvent(s)}var Rt=globalThis?.document?p.useLayoutEffect:()=>{},qb=fo[" useId ".trim().toString()]||(()=>{}),Wb=0;function Gb(e){const[t,r]=p.useState(qb());return Rt(()=>{r(n=>n??String(Wb++))},[e]),t?`radix-${t}`:""}var Kb="Arrow",lf=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...s}=e;return u.jsx(At.svg,{...s,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});lf.displayName=Kb;var Vb=lf;function Jb(e){const[t,r]=p.useState(void 0);return Rt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;r({width:i,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ma="Popper",[cf,uf]=rf(ma),[Xb,df]=cf(ma),ff=e=>{const{__scopePopper:t,children:r}=e,[n,o]=p.useState(null);return u.jsx(Xb,{scope:t,anchor:n,onAnchorChange:o,children:r})};ff.displayName=ma;var hf="PopperAnchor",pf=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...o}=e,s=df(hf,r),i=p.useRef(null),a=Yt(t,i);return p.useEffect(()=>{s.onAnchorChange(n?.current||i.current)}),n?null:u.jsx(At.div,{...o,ref:a})});pf.displayName=hf;var ga="PopperContent",[Yb,Zb]=cf(ga),mf=p.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:v,...g}=e,y=df(ga,r),[b,w]=p.useState(null),x=Yt(t,R=>w(R)),[_,C]=p.useState(null),S=Jb(_),k=S?.width??0,M=S?.height??0,K=n+(s!=="center"?"-"+s:""),q=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},V=Array.isArray(c)?c:[c],O=V.length>0,B={padding:q,boundary:V.filter(ex),altBoundary:O},{refs:T,floatingStyles:z,placement:$,isPositioned:W,middlewareData:D}=Fu({strategy:"fixed",placement:K,whileElementsMounted:(...R)=>Mu(...R,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Uu({mainAxis:o+M,alignmentAxis:i}),l&&Hu({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qu():void 0,...B}),l&&Wu({...B}),Gu({...B,apply:({elements:R,rects:F,availableWidth:ee,availableHeight:oe})=>{const{width:be,height:xe}=F.reference,ne=R.floating.style;ne.setProperty("--radix-popper-available-width",`${ee}px`),ne.setProperty("--radix-popper-available-height",`${oe}px`),ne.setProperty("--radix-popper-anchor-width",`${be}px`),ne.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),_&&Vu({element:_,padding:a}),tx({arrowWidth:k,arrowHeight:M}),h&&Ku({strategy:"referenceHidden",...B})]}),[J,Q]=yf($),ie=Co(v);Rt(()=>{W&&ie?.()},[W,ie]);const j=D.arrow?.x,E=D.arrow?.y,A=D.arrow?.centerOffset!==0,[P,N]=p.useState();return Rt(()=>{b&&N(window.getComputedStyle(b).zIndex)},[b]),u.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:W?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:P,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:u.jsx(Yb,{scope:r,placedSide:J,onArrowChange:C,arrowX:j,arrowY:E,shouldHideArrow:A,children:u.jsx(At.div,{"data-side":J,"data-align":Q,...g,ref:x,style:{...g.style,animation:W?void 0:"none"}})})})});mf.displayName=ga;var gf="PopperArrow",Qb={top:"bottom",right:"left",bottom:"top",left:"right"},vf=p.forwardRef(function(t,r){const{__scopePopper:n,...o}=t,s=Zb(gf,n),i=Qb[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(Vb,{...o,ref:r,style:{...o.style,display:"block"}})})});vf.displayName=gf;function ex(e){return e!==null}var tx=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:o}=t,i=o.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,d]=yf(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(o.arrow?.x??0)+a/2,m=(o.arrow?.y??0)+l/2;let v="",g="";return c==="bottom"?(v=i?f:`${h}px`,g=`${-l}px`):c==="top"?(v=i?f:`${h}px`,g=`${n.floating.height+l}px`):c==="right"?(v=`${-l}px`,g=i?f:`${m}px`):c==="left"&&(v=`${n.floating.width+l}px`,g=i?f:`${m}px`),{data:{x:v,y:g}}}});function yf(e){const[t,r="center"]=e.split("-");return[t,r]}var rx=ff,nx=pf,ox=mf,sx=vf,ix="Portal",bf=p.forwardRef((e,t)=>{const{container:r,...n}=e,[o,s]=p.useState(!1);Rt(()=>s(!0),[]);const i=r||o&&globalThis?.document?.body;return i?Cu.createPortal(u.jsx(At.div,{...n,ref:t}),i):null});bf.displayName=ix;function ax(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var va=e=>{const{present:t,children:r}=e,n=lx(t),o=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),s=Yt(n.ref,cx(o));return typeof r=="function"||n.isPresent?p.cloneElement(o,{ref:s}):null};va.displayName="Presence";function lx(e){const[t,r]=p.useState(),n=p.useRef(null),o=p.useRef(e),s=p.useRef("none"),i=e?"mounted":"unmounted",[a,l]=ax(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=On(n.current);s.current=a==="mounted"?c:"none"},[a]),Rt(()=>{const c=n.current,d=o.current;if(d!==e){const h=s.current,m=On(c);e?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),Rt(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,f=m=>{const g=On(n.current).includes(m.animationName);if(m.target===t&&g&&(l("ANIMATION_END"),!o.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(s.current=On(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function On(e){return e?.animationName||"none"}function cx(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ux=fo[" useInsertionEffect ".trim().toString()]||Rt;function dx({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[o,s,i]=fx({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:o;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,n])}const c=p.useCallback(d=>{if(a){const f=hx(d)?d(e):d;f!==e&&i.current?.(f)}else s(d)},[a,e,s,i]);return[l,c]}function fx({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),o=p.useRef(r),s=p.useRef(t);return ux(()=>{s.current=t},[t]),p.useEffect(()=>{o.current!==r&&(s.current?.(r),o.current=r)},[r,o]),[r,n,s]}function hx(e){return typeof e=="function"}var px=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mx="VisuallyHidden",xf=p.forwardRef((e,t)=>u.jsx(At.span,{...e,ref:t,style:{...px,...e.style}}));xf.displayName=mx;var gx=xf,[Eo,LS]=rf("Tooltip",[uf]),jo=uf(),wf="TooltipProvider",vx=700,fi="tooltip.open",[yx,ya]=Eo(wf),_f=e=>{const{__scopeTooltip:t,delayDuration:r=vx,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:s}=e,i=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),u.jsx(yx,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};_f.displayName=wf;var an="Tooltip",[bx,vn]=Eo(an),kf=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:o,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=e,l=ya(an,e.__scopeTooltip),c=jo(t),[d,f]=p.useState(null),h=Gb(),m=p.useRef(0),v=i??l.disableHoverableContent,g=a??l.delayDuration,y=p.useRef(!1),[b,w]=dx({prop:n,defaultProp:o??!1,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(fi))):l.onClose(),s?.(k)},caller:an}),x=p.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,w(!0)},[w]),C=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),S=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,w(!0),m.current=0},g)},[g,w]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),u.jsx(rx,{...c,children:u.jsx(bx,{scope:t,contentId:h,open:b,stateAttribute:x,trigger:d,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayedRef.current?S():_()},[l.isOpenDelayedRef,S,_]),onTriggerLeave:p.useCallback(()=>{v?C():(window.clearTimeout(m.current),m.current=0)},[C,v]),onOpen:_,onClose:C,disableHoverableContent:v,children:r})})};kf.displayName=an;var hi="TooltipTrigger",Sf=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=vn(hi,r),s=ya(hi,r),i=jo(r),a=p.useRef(null),l=Yt(t,a,o.onTriggerChange),c=p.useRef(!1),d=p.useRef(!1),f=p.useCallback(()=>c.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),u.jsx(nx,{asChild:!0,...i,children:u.jsx(At.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:l,onPointerMove:ut(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:ut(e.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:ut(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ut(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:ut(e.onBlur,o.onClose),onClick:ut(e.onClick,o.onClose)})})});Sf.displayName=hi;var ba="TooltipPortal",[xx,wx]=Eo(ba,{forceMount:void 0}),Cf=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:o}=e,s=vn(ba,t);return u.jsx(xx,{scope:t,forceMount:r,children:u.jsx(va,{present:r||s.open,children:u.jsx(bf,{asChild:!0,container:o,children:n})})})};Cf.displayName=ba;var Rr="TooltipContent",Ef=p.forwardRef((e,t)=>{const r=wx(Rr,e.__scopeTooltip),{forceMount:n=r.forceMount,side:o="top",...s}=e,i=vn(Rr,e.__scopeTooltip);return u.jsx(va,{present:n||i.open,children:i.disableHoverableContent?u.jsx(jf,{side:o,...s,ref:t}):u.jsx(_x,{side:o,...s,ref:t})})}),_x=p.forwardRef((e,t)=>{const r=vn(Rr,e.__scopeTooltip),n=ya(Rr,e.__scopeTooltip),o=p.useRef(null),s=Yt(t,o),[i,a]=p.useState(null),{trigger:l,onClose:c}=r,d=o.current,{onPointerInTransitChange:f}=n,h=p.useCallback(()=>{a(null),f(!1)},[f]),m=p.useCallback((v,g)=>{const y=v.currentTarget,b={x:v.clientX,y:v.clientY},w=jx(b,y.getBoundingClientRect()),x=Px(b,w),_=Rx(g.getBoundingClientRect()),C=Tx([...x,..._]);a(C),f(!0)},[f]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(l&&d){const v=y=>m(y,d),g=y=>m(y,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",g)}}},[l,d,m,h]),p.useEffect(()=>{if(i){const v=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},w=l?.contains(y)||d?.contains(y),x=!Ax(b,i);w?h():x&&(h(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,i,c,h]),u.jsx(jf,{...e,ref:s})}),[kx,Sx]=Eo(an,{isInside:!1}),Cx=Ab("TooltipContent"),jf=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=vn(Rr,r),c=jo(r),{onClose:d}=l;return p.useEffect(()=>(document.addEventListener(fi,d),()=>document.removeEventListener(fi,d)),[d]),p.useEffect(()=>{if(l.trigger){const f=h=>{h.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),u.jsx(sf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:u.jsxs(ox,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(Cx,{children:n}),u.jsx(kx,{scope:r,isInside:!0,children:u.jsx(gx,{id:l.contentId,role:"tooltip",children:o||n})})]})})});Ef.displayName=Rr;var Pf="TooltipArrow",Ex=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,o=jo(r);return Sx(Pf,r).isInside?null:u.jsx(sx,{...o,...n,ref:t})});Ex.displayName=Pf;function jx(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,o,s)){case s:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Px(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Rx(e){const{top:t,right:r,bottom:n,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:n},{x:o,y:n}]}function Ax(e,t){const{x:r,y:n}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],l=t[i],c=a.x,d=a.y,f=l.x,h=l.y;d>n!=h>n&&r<(f-c)*(n-d)/(h-d)+c&&(o=!o)}return o}function Tx(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Ox(t)}function Ox(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const o=e[n];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const o=e[n];for(;r.length>=2;){const s=r[r.length-1],i=r[r.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Nx=_f,Ix=kf;const $x={"":p.Fragment,pre:"pre",code:"code",ol:"ol",ul:"ul",hr:"hr",blockquote:"blockquote",li:"li",a:"a",img:"img",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",p:"p",em:"em",strong:"strong"},Gl=e=>e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),""),zx=e=>e&&typeof e!="string"&&["div","ul","ol","pre","h1","h2","h3","h4","h5","h6"].includes(e.t),ws=e=>e.replace(/^\s+|\s+$/g," "),fe=(e,t=[],r={})=>({t:e,c:Array.isArray(t)?t:[t],p:r}),Kr=(e,t=!1)=>{let r=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,n=0;const o=fe("");let s,i;t?(s=fe("p"),i=[o,s],o.c.push(s)):(s=o,i=[o]);let a;const l=(f,h=!0)=>(h&&i.push(f),s.c.push(f),h&&(s=f),f),c=f=>{const h=i.findIndex(m=>m.t===f);i=i.slice(0,h),s=i.at(-1)};for(;a=r.exec(e);){const f=e.substring(n,a.index);if(n=r.lastIndex,f!=="")if(s===o&&t){const h=fe("p",ws(f));o.c.push(h),i=[o,h],s=h}else s.c.push(ws(f));if(!f.match(/[^\\](\\\\)*\\$/)){if(a[3]||a[4]){const h=fe("pre",a[4]?Gl(a[4]):fe("code",Gl(a[3]),a[2]?{language:`language-${a[2].toLowerCase()}`}:{}));o.c.push(h),i=[o],s=o}else if(a[6]){const h=a[6],m=h!==">",v=!!h.match(/\./),g=m?v?"ol":"ul":"blockquote",y=a[5].split(`
`).map(w=>w.replace(/^(\*|-|\+|>|\d+\.)\s+/,"")).filter(w=>w.trim()!==""),b=fe(g,m?y.map(w=>fe("li",Kr(w).c)):Kr(y.join(`
`)).c);o.c.push(b),i=[o,b],s=o}else if(a[8]){const h=fe("img",[],{src:a[8],...a[7]?{alt:a[7]}:{}});if(t&&s===o){const m=fe("p",h);o.c.push(m),s=m,i=[o,m]}else l(h,!1)}else if(a[10]){const h=i.find(m=>m.t==="a");h&&(h.p.href=a[11])}else if(a[9])l(fe("a"));else if(a[14]){const h="h"+a[14].length;o.c.push(fe(h,Kr(a[15]).c)),i=[o],s=o}else if(a[13])o.c.push(fe("h1",Kr(a[12]).c)),i=[o],s=o;else if(a[16])l(fe("code",a[16]),!1);else if(a[17]?.[0]===`
`||a[17]===`  
`){if(!(i[1]?.t==="p")){const v=o.c;let g;for(g=v.length-1;g>=0&&!zx(v[g]);g--);if(g!==o.c.length-1){const y=o.c.splice(g+1);o.c.push(fe("p",y))}}const m=fe("p");o.c.push(m),i=[o,m],s=m}else if(a[1])o.c.push(fe("hr")),i=[o],s=o;else if(a[17]){const h=a[17].length===2?"strong":"em";i.findIndex(v=>v.t===h)===-1?l(fe(h)):c(h)}}}const d=ws(e.substring(n));if(d.length){const f=o.c.at(-1);let h;f?.t==="p"?h=f:t?(h=fe("p"),o.c.push(h)):h=o,h.c.push(d)}return o.c=o.c.filter(f=>typeof f=="string"||f.t!=="p"||f.c?.length>0),o},Dx=(e,t={})=>{const r={...$x,...t},n=(o,s=0)=>{const i=o.t===""?p.Fragment:r[o.t];return p.createElement(i,{...o.p,key:s},o.c.length===0?void 0:o.c.map((a,l)=>typeof a=="string"?a:n(a,l)))};return n(Kr(e,!0))},Lx=({markdown:e,customComponents:t})=>Dx(e,t),Vr="leading-none [&_[class*='texture-hud']]:mb-oneScaledPix",Mx={h2:function({children:t}){return u.jsx("h2",{className:`mb-1 sprites-double-height text-metallicBlue zx:text-zxBlue clear-both ${Vr}`,children:u.jsx(Be,{children:t})})},h3:function({children:t}){return u.jsx("h3",{className:"mt-1 mb-1 text-metallicBlue zx:text-zxBlue clear-both",children:u.jsx(Be,{children:t})})},blockquote:function({children:t}){return u.jsx("blockquote",{className:`${Vr} mt-1 mb-1 text-moss zx:text-zxBlue clear-both`,children:u.jsxs(Be,{children:["> ",t]})})},p:function({children:t}){return u.jsx("div",{className:`mb-1 last:mb-0 ${Vr}`,children:u.jsx(Be,{children:t})})},a:function({children:t,href:r}){return u.jsx("a",{className:"bitmap-text-link",href:r,target:"_blank",rel:"noopener noreferrer",children:u.jsx(Be,{children:t})})},li:function({children:t}){return u.jsx("div",{className:`mb-1 clear-both ${Vr}`,children:u.jsxs(Be,{children:[u.jsx(I,{className:"text-metallicBlue zx:text-zxYellow",children:"•"}),t]})})},strong:function({children:t}){return u.jsx(Be,{className:"strong text-midRed zx:text-zxRed",children:t})},em:function({children:t}){return u.jsx(Be,{className:"em text-moss zx:text-zxBlue",children:t})},img:function({src:t}){const r=ho();if(t===void 0)throw new Error("image without src");const n=t.split(/\?|&/);return u.jsx("span",{style:{"--scale":r*2},children:u.jsx("span",{className:Ki("sprite float-left mr-1 mb-1 zx:sprite-revert-to-two-tone",n.join(" "))})})},hr:function(){return u.jsx("hr",{className:"bg-metallicBlue zx:bg-zxWhite h-half mb-half border-none"})}},Bx=({markdown:e,className:t})=>u.jsx("div",{className:`contents ${t}`,children:u.jsx(Lx,{customComponents:Mx,markdown:e})}),xa=({triggerContent:e,tooltipContent:t})=>t?u.jsxs(Ix,{children:[u.jsx(Sf,{asChild:!0,children:e}),u.jsx(Cf,{children:u.jsx(_o,{scaleFactor:2,children:u.jsx(Ef,{side:"bottom",align:"end",className:"bg-highlightBeige text-white p-1 mt-oneScaledPix drop-shadow-oneBlock z-popups",children:typeof t=="string"?u.jsx("div",{className:"max-w-16",children:u.jsx(Bx,{markdown:t})}):t})})})]}):e,Fx=/^(?<modifiers>[⇧⌘^⌥]*)(?<key>.+)$/,Ux=e=>{const t=new Set;for(const r of e){if(t.has(r))return!0;t.add(r)}return!1},wa=(e,t,r)=>{const n=e?.join(" ");p.useEffect(()=>{if(!e||e.length===0)return;const o=s=>{if(s.target.closest(".monaco-editor")===null)for(const l of e){const c=l.match(Fx);if(!c||!c.groups)continue;const{modifiers:d,key:f}=c.groups;if(Ux(d)){console.warn(`Invalid shortcut "${l}": duplicate modifiers`);continue}const h=d.includes("^"),m=d.includes("⌘"),v=d.includes("⇧"),g=d.includes("⌥"),y=h||m||v||g,b=h===s.ctrlKey&&m===s.metaKey&&v===s.shiftKey&&g===s.altKey&&(y||!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey);if((g&&s.altKey?s.code.replace(/^Key/,"").toLowerCase():s.key.toLowerCase())===f.toLowerCase()&&b){t||r?.(),s.preventDefault();break}}};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[t,r,n])},Rf=e=>e.replace(/ArrowLeft/g,"⬅").replace(/ArrowRight/g,"➡").replace(/ArrowUp/g,"⬆").replace(/ArrowDown/g,"⬇"),Hx=e=>{const t=e.map(Rf);return t.length===1?`

Hotkey: **${t[0]}**`:`

Hotkeys: ${t.map(r=>`**${r}**`).join(" or ")}`},_a=(e,t)=>{if(!t)return e;if(e)return`${e}${Hx(t)}`;const r=t.map(Rf);return r.length===1?`Hotkey: **${r[0]}**`:`Hotkeys: ${r.map(n=>`**${n}**`).join(" or ")}`},Cr=({className:e,selected:t,disabled:r=!1,onClick:n,ref:o,tooltipContent:s,shortcutKeys:i,...a})=>{wa(i,r,n);const l=u.jsx("button",{disabled:r,onClick:n,"data-selected":t,className:ge(`inline-flex items-center justify-center whitespace-nowrap 
          bg-metallicBlue zx:bg-zxBlue border-none border-shadow
          gap-2
           disabled:bg-midGrey disabled:text-lightGrey 
           data-[selected=true]:bg-lightBeige
           [&:not(:disabled):hover:not([data-selected=true])]:bg-pastelBlue 
           `,e),ref:o,...a}),c=_a(typeof s=="string"?s:void 0,i)??s;return u.jsx(xa,{triggerContent:l,tooltipContent:c})};var Kl=!1,Dt,pi,mi,Kn,Vn,Af,Jn,gi,vi,yi,Tf,bi,xi,Of,Nf;function _e(){if(!Kl){Kl=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(bi=/\b(iPhone|iP[ao]d)/.exec(e),xi=/\b(iP[ao]d)/.exec(e),yi=/Android/i.exec(e),Of=/FBAN\/\w+;/i.exec(e),Nf=/Mobile/i.exec(e),Tf=!!/Win64/.exec(e),t){Dt=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Dt&&document&&document.documentMode&&(Dt=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);Af=n?parseFloat(n[1])+4:Dt,pi=t[2]?parseFloat(t[2]):NaN,mi=t[3]?parseFloat(t[3]):NaN,Kn=t[4]?parseFloat(t[4]):NaN,Kn?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),Vn=t&&t[1]?parseFloat(t[1]):NaN):Vn=NaN}else Dt=pi=mi=Vn=Kn=NaN;if(r){if(r[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Jn=o?parseFloat(o[1].replace("_",".")):!0}else Jn=!1;gi=!!r[2],vi=!!r[3]}else Jn=gi=vi=!1}}var wi={ie:function(){return _e()||Dt},ieCompatibilityMode:function(){return _e()||Af>Dt},ie64:function(){return wi.ie()&&Tf},firefox:function(){return _e()||pi},opera:function(){return _e()||mi},webkit:function(){return _e()||Kn},safari:function(){return wi.webkit()},chrome:function(){return _e()||Vn},windows:function(){return _e()||gi},osx:function(){return _e()||Jn},linux:function(){return _e()||vi},iphone:function(){return _e()||bi},mobile:function(){return _e()||bi||xi||yi||Nf},nativeApp:function(){return _e()||Of},android:function(){return _e()||yi},ipad:function(){return _e()||xi}},qx=wi,Wx=!!(typeof window<"u"&&window.document&&window.document.createElement),Gx={canUseDOM:Wx},If=Gx,$f;If.canUseDOM&&($f=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Kx(e,t){if(!If.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var o=document.createElement("div");o.setAttribute(r,"return;"),n=typeof o[r]=="function"}return!n&&$f&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var Vx=Kx,Vl=10,Jl=40,Xl=800;function zf(e){var t=0,r=0,n=0,o=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*Vl,o=r*Vl,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||o)&&e.deltaMode&&(e.deltaMode==1?(n*=Jl,o*=Jl):(n*=Xl,o*=Xl)),n&&!t&&(t=n<1?-1:1),o&&!r&&(r=o<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:o}}zf.getEventType=function(){return qx.firefox()?"DOMMouseScroll":Vx("wheel")?"wheel":"mousewheel"};var Jx=zf;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Xx=(e,t,r=!1)=>{const n=p.useRef(0),o=p.useCallback(s=>{if(r)return;const i=s;i.preventDefault(),i.stopPropagation();const a=Jx(i);n.current-=a.spinY,n.current>=1&&(t(1),n.current=0),n.current<=-1&&(t(-1),n.current=0)},[t,r]);p.useEffect(()=>{const s=e.current;if(s!==null)return s.addEventListener("wheel",o,{passive:!1}),()=>{s.removeEventListener("wheel",o)}},[e,o])},Df=(e,t,r,n=!1)=>{const o=p.useRef(0);return Xx(e,s=>{if(t.length===0)return;const i=(o.current+s+256*t.length)%t.length;o.current=i,r(t[i],i)},n)},Yx=({value:e,onSelect:t})=>u.jsx(So,{value:e,onSelect:t,className:"px-1",children:u.jsx(I,{children:e})}),Po=e=>{const{value:t,values:r,onSelect:n,triggerButtonClassName:o="",triggerButtonStyle:s=He,triggerButtonLabel:i="",OptionCommandItem:a=Yx,tooltipContent:l}=e,[c,d]=p.useState(!1),f=p.useRef(null);return Df(f,r,h=>{n(h)},!c),u.jsxs(Pd,{open:c,onOpenChange:d,children:[u.jsx(Rd,{asChild:!0,children:u.jsxs(Cr,{className:ge("h-2 px-1 flex flex-row gap-1 justify-start leading-none",o),style:s,ref:f,tooltipContent:!c&&l,children:[typeof i=="string"?u.jsx(I,{className:"grow overflow-hidden text-left",children:i}):i,u.jsx(I,{className:"grow-0",children:c?"X":"⬇"})]})}),u.jsx(Ad,{className:"p-0",children:u.jsx(_o,{scaleFactor:2,children:u.jsxs(Xd,{value:t,className:"w-[--radix-popper-anchor-width]",children:[e.disableCommandInput===!0?null:u.jsx(Yd,{placeholder:e.placeholder}),u.jsxs(Zd,{children:[u.jsx(Qd,{children:u.jsx(I,{children:"Nothing found"})}),u.jsx(ef,{children:r.map(h=>u.jsx(a,{value:h,onSelect:m=>{d(!1),n(m)}},h))})]})]})})})]})},Zx=()=>{const e=ze(),t=Qh();return u.jsx(u.Fragment,{children:u.jsx(Po,{value:t,values:ep,onSelect:r=>{e(tp(r))},disableCommandInput:!0,triggerButtonLabel:t,triggerButtonClassName:"w-13"})})};var _s={exports:{}},Yl;function Qx(){if(Yl)return _s.exports;Yl=1;/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var e=function(t,r){var n,o,s=1,i=0,a=0,l=String.alphabet;function c(d,f,h){if(h){for(n=f;h=c(d,n),h<76&&h>65;)++n;return+d.slice(f-1,n)}return h=l&&l.indexOf(d.charAt(f)),h>-1?h+76:(h=d.charCodeAt(f)||0,h<45||h>127?h:h<46?65:h<48?h-1:h<58?h+18:h<65?h-11:h<91?h+11:h<97?h-37:h<123?h+5:h-63)}if((t+="")!=(r+="")){for(;s;)if(o=c(t,i++),s=c(r,a++),o<76&&s<76&&o>66&&s>66&&(o=c(t,i,i),s=c(r,a,i=n),a=n),o!=s)return o<s?-1:1}return 0};try{_s.exports=e}catch{String.naturalCompare=e}return _s.exports}var ew=Qx();const tw=Ke(ew);function Lf({campaign:e,onSelect:t,headRoomId:r,heelsRoomId:n,value:o,triggerButtonClassName:s,excludeRoomIds:i=[],tooltipContent:a}){const l=Object.keys(e.rooms).filter(c=>!i.includes(c)).sort(tw);return u.jsx(Po,{onSelect:c=>t?.(c),value:o,values:l,triggerButtonClassName:s,placeholder:"search",tooltipContent:a,disableCommandInput:!1,triggerButtonLabel:o??"none",OptionCommandItem:({value:c,onSelect:d})=>u.jsxs(So,{value:c,onSelect:d,className:"px-1",children:[r===c&&u.jsx("span",{className:"sprite mr-1 my-1 texture-head_walking_towards_2"}),n===c&&u.jsx("span",{className:"sprite mr-1 my-1 texture-heels_walking_towards_2"}),u.jsx(I,{children:c})]})})}const Ue=e=>e,Mf="h-[calc(3*var(--block)-1px*var(--scale))] w-[calc(3*var(--block)-1px*var(--scale))]",rw="h-[calc(2*var(--block)-1px*var(--scale))] w-[calc(2*var(--block)-1px*var(--scale))]",G=Ue("[button:not([data-selected=true]):not(:hover)_&]:sprite-revert-to-two-tone-dim"),ve=Ue("flex flex-wrap gap-oneScaledPix w-full"),te=({className:e,onClick:t,children:r,disabled:n=!1,isCurrentTool:o=!1,shortcutKeys:s,small:i=!1,tooltipContent:a})=>u.jsx(Cr,{disabled:n,selected:o,className:`
        ${i?rw:Mf} 
        ${i?"leading-none":""} 
        active:pt-oneScaledPix gap-0 inline-flex overflow-hidden 
        
        ${e??""}`,onClick:t,tooltipContent:a,shortcutKeys:s,children:r}),nw=()=>{const e=se(t=>t.levelEditor.selectedJsonItemIds.length>0);return u.jsx(te,{className:"bg-midRed",disabled:!e,onClick:()=>Ae.dispatch(_p()),shortcutKeys:["Delete","Backspace"],tooltipContent:`## Delete items
delete selected item(s)`,children:u.jsx("span",{className:"sprite sprite-tinted texture-hud_char_X relative"})})},Ar=({className:e,value:t,onChange:r,trueLabel:n="ON",falseLabel:o="OFF",label:s,shortcutKeys:i,tooltipContent:a})=>{const l=Math.max(n.length,o.length)+1,c=n.padStart(l," "),d=o.padEnd(l," ");wa(i,!1,()=>{r?.(!t,void 0)});const f=u.jsxs("span",{onClick:m=>r?.(!t,m),className:ge("inline-flex justify-between",e),children:[s&&u.jsx(I,{className:"inline-block mr-1 text-lightGrey",noSlitWords:!0,children:s}),u.jsx(I,{className:la("inline-block w-min h-min",t?"bg-shadowHalfbrite text-moss zx:bg-zxBlack zx:text-zxGreen":"bg-redShadowHalfbrite text-midRed zx:bg-zxBlack zx:text-zxRed"),noSlitWords:!0,children:t?c:d})]}),h=_a(typeof a=="string"?a:void 0,i)??a;return u.jsx(xa,{triggerContent:f,tooltipContent:h})},ow=({className:e,value:t,onChange:r,values:n,valueLabels:o=[`${n[0]}`,`${n[1]}`,`${n[2]}`],label:s,shortcutKeys:i,tooltipContent:a})=>{const l=n.indexOf(t),c=Math.max(o[0].length,o[1].length+2,o[2].length)+1,d=p.useCallback(()=>{const m=(l+1)%3;r?.(n[m],void 0)},[r,l,n]);wa(i,!1,()=>{d()});const f=u.jsxs("span",{onClick:d,className:ge("inline-flex justify-between",e),children:[s&&u.jsx(I,{className:"inline-block mr-1 text-lightGrey",noSlitWords:!0,children:s}),u.jsx(I,{className:la("inline-block w-min h-min",l===0?"bg-redShadowHalfbrite text-highlightBeige zx:bg-zxBlack zx:text-zxGreen":l===1?"bg-metallicBlueHalfbrite text-pastelBlue zx:bg-zxBlack zx:text-zxBlue":"bg-pinkHalfbrite text-pink zx:bg-zxBlack zx:text-zxRed"),noSlitWords:!0,children:l===0?o[0].padEnd(c," "):l===1?o[1].padStart(Math.ceil((c+o[1].length)/2)," ").padEnd(c," "):o[2].padStart(c," ")})]}),h=_a(typeof a=="string"?a:void 0,i)??a;return u.jsx(xa,{triggerContent:f,tooltipContent:h})},sw=({className:e})=>{const t=ze();return u.jsx(ow,{className:e,label:"snap",values:kp,value:se(r=>r.levelEditor.gridResolution),onChange:r=>{t(Sp(r))},valueLabels:["block","half","fine"],shortcutKeys:["S"],tooltipContent:`snaps to either the grid (like the original game)

or, on a half-block grid

or to a fine 2px resolution`})},Bf=e=>{const t=se(hu);return au(t?.type==="item"&&t.item,e)},L=({itemTool:e,children:t,className:r,shortcutKeys:n,tooltipContent:o})=>{const s=Bf(e);return u.jsx(te,{isCurrentTool:s,className:r,onClick:()=>Ae.dispatch(mo({type:"item",item:e})),shortcutKeys:n,tooltipContent:o,children:t})},ka=({main:e,children:t,closeOnSelect:r,ref:n})=>{const[o,s]=p.useState(!1);return u.jsxs(Pd,{open:o,onOpenChange:s,children:[u.jsx("div",{ref:n,className:ge(Mf,"relative",{"drop-shadow-oneBlock z-popups":o}),children:u.jsxs("span",{className:"content",children:[e,u.jsx(Rd,{asChild:!0,children:u.jsx(Cr,{className:"absolute bottom-0 right-0 bg-metallicBlueHalfbrite",children:u.jsx(I,{className:"pl-oneScaledPix leading-none py-oneScaledPix",children:o?"X":"⬇"})})})]})}),u.jsx(Ad,{children:u.jsx(_o,{scaleFactor:2,children:u.jsx("div",{className:"flex flex-col gap-oneScaledPix py-oneScaledPix bg-metallicBlueHalfbrite",children:t.map((i,a)=>i===null?null:u.jsx("div",{className:"leading-none",onClick:()=>{r&&s(!1)},children:i},a))})})})]})},qr=({children:e})=>{const[t,r]=p.useState(0),n=p.useRef(null);Df(n,e,(s,i)=>{r(i)});const o=e[t];return u.jsx(ka,{main:o,closeOnSelect:!0,ref:n,children:e.map((s,i)=>i===t?null:u.jsx("div",{className:"leading-none",onClick:()=>{r(i)},children:s===null?null:p.cloneElement(s,{onClick(){r(i),s.props.onClick?.()}})},i))})},iw=()=>{const t=se(hu)?.type==="pointer";return u.jsx(te,{onClick:()=>Ae.dispatch(mo({type:"pointer"})),isCurrentTool:t,shortcutKeys:["Escape","."],tooltipContent:"## Pointer",children:u.jsx("span",{className:"sprite texture-editor_tool_pointer relative"})})},nt={pureBlack:new le("#000000"),shadow:new le("#325149"),midGrey:new le("#7F7773"),lightGrey:new le("#BBB1AB"),white:new le("#FBFEFB"),pastelBlue:new le("#75ACFF"),metallicBlue:new le("#366CAA"),pink:new le("#D68ED1"),moss:new le("#9E9600"),redShadow:new le("#805E50"),midRed:new le("#CA7463"),lightBeige:new le("#DAA78F"),highlightBeige:new le("#EBC690"),alpha:new le("#1E7790"),replaceLight:new le("#08A086"),replaceDark:new le("#0A4730")},Xn=.4,MS=e=>{const[t,r,n]=e.toUint8RgbArray();return new le({r:t*.75,g:r*.75,b:n*.75})},Ro=(e,t=Xn)=>{const[r,n,o]=e.toUint8RgbArray();return new le({r:r*t,g:n*t,b:o*t})};function BS(e){e=e.replace(/^#/,"");let t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);t=Math.floor(t*Xn),r=Math.floor(r*Xn),n=Math.floor(n*Xn);const o=s=>s.toString(16).padStart(2,"0");return`#${o(t)}${o(r)}${o(n)}`}const Le={original:new le(Nr.zxWhite),basic:nt.white,dimmed:nt.lightGrey},Xe={original:new le(Nr.zxYellow),basic:new le(15654246),dimmed:Ro(new le(15654246),.5)},aw={original:new le(Nr.zxYellow),basic:nt.midRed,dimmed:nt.redShadow},Ye={original:new le(Nr.zxMagenta),basic:nt.pink,dimmed:Ro(nt.pink,.5)},he={original:new le(Nr.zxCyan),basic:nt.pastelBlue,dimmed:Ro(nt.pastelBlue,.5)},Ze={original:new le(Nr.zxGreen),basic:nt.moss,dimmed:Ro(nt.moss,.5)},Ff={white:{basic:{main:Le,edges:{towards:{...he,dimInOriginal:!1},right:{...Xe,dimInOriginal:!0}},hud:{lives:Xe,dimmed:Ye,icons:he}},dimmed:{main:Le,edges:{towards:{...Ze,dimInOriginal:!1},right:{...he,dimInOriginal:!0}},hud:{lives:aw,dimmed:Ye,icons:he}}},yellow:{basic:{main:Xe,edges:{towards:{...Ze,dimInOriginal:!1},right:{...Le,dimInOriginal:!0}},hud:{lives:he,dimmed:Ye,icons:Ze}},dimmed:{main:Xe,edges:{towards:{...he,dimInOriginal:!0},right:{...he,dimInOriginal:!1}},hud:{lives:he,dimmed:Ye,icons:Ze}}},magenta:{basic:{main:Ye,edges:{towards:{...Ze,dimInOriginal:!0},right:{...he,dimInOriginal:!0}},hud:{lives:Le,dimmed:he,icons:Xe}},dimmed:{main:Ye,edges:{towards:{...Ze,dimInOriginal:!0},right:{...he,dimInOriginal:!0}},hud:{lives:Le,dimmed:he,icons:Xe}}},cyan:{basic:{main:he,edges:{towards:{...Ye,dimInOriginal:!1},right:{...Le,dimInOriginal:!1}},hud:{lives:Le,dimmed:Ze,icons:Xe}},dimmed:{main:he,edges:{towards:{...Ye,dimInOriginal:!0},right:{...Le,dimInOriginal:!0}},hud:{lives:Le,dimmed:Ze,icons:Xe}}},green:{basic:{main:Ze,edges:{towards:{...he,dimInOriginal:!1},right:{...Xe,dimInOriginal:!1}},hud:{lives:Le,dimmed:Ye,icons:he}},dimmed:{main:Ze,edges:{towards:{...he,dimInOriginal:!0},right:{...Xe,dimInOriginal:!0}},hud:{lives:Le,dimmed:Ye,icons:he}}}},FS=e=>Ff[e.hue][e.shade],US={head:"pastelBlue",heels:"pink"},Zl=e=>{const{main:t}=Ff[e].basic;return{backgroundColor:t.basic.toHex(),borderColor:t.dimmed.toHex()}};function lw(){const e=ze(),t=se(Cp);return u.jsxs(u.Fragment,{children:[u.jsx(Po,{value:t.hue,onSelect:r=>{e(Da({hue:r}))},values:rp,disableCommandInput:!0,OptionCommandItem:({value:r,onSelect:n})=>u.jsx(So,{value:r,className:"border-l-3 h-2 w-full p-0",style:Zl(r),onSelect:n}),triggerButtonLabel:"colour",triggerButtonClassName:ge("w-full",`${t.hue==="white"||t.hue==="yellow"?"text-pureBlack":"text-white"}`),triggerButtonStyle:Zl(t.hue),tooltipContent:"Change the colour of this room"}),u.jsx(Ar,{className:"",label:"shade",value:t.shade==="basic",onChange:r=>{e(Da({shade:r?"basic":"dimmed"}))},falseLabel:"dim",trueLabel:"basic"})]})}function cw(){const e=ze(),t=se(Ep);return u.jsx(Po,{value:t,onSelect:r=>{e(jp(r))},values:np,placeholder:"scenery",triggerButtonClassName:"w-full",triggerButtonLabel:t,tooltipContent:"Change this room’s scenery"})}const it=({iconClasses:e,text:t,className:r=""})=>u.jsxs("div",{className:`relative w-full h-full ${r}`,children:[u.jsx("span",{className:`sprite absolute top-0 left-0 ${e} ${G}`}),u.jsx(I,{className:"bg-moss text-pureBlack absolute top-0 left-0 pl-oneScaledPix py-oneScaledPix block leading-none",children:t})]}),Nn=({iconClassName:e})=>u.jsx(at,{topClasses:Ue("texture-bubbles_white_2 [button:hover_&]:texture-animated-bubbles_white"),bottomClasses:e}),at=({topClasses:e,bottomClasses:t="texture-headlessBase"})=>u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("span",{className:`sprite absolute top-[calc(9px*var(--scale))] left-0 ${t} ${G}`}),u.jsx("span",{className:`sprite absolute top-[calc(-3px*var(--scale))] left-0 ${e} ${G}`})]}),uw="[button:not(:disabled):hover_&]:hidden",dw="hidden [button:not(:disabled):hover_&]:inline mt-quarter",fw="hidden [button:not(:disabled):hover_&]:inline",_i=({icon:e,topText:t,bottomText:r})=>u.jsxs("span",{className:"w-full h-full flex flex-col items-center justify-center",children:[u.jsx("span",{className:uw,children:e}),u.jsx(I,{className:dw,children:t}),u.jsx(I,{className:fw,children:r})]}),hw=()=>{const e=ze(),t=se(Pp),r=se(Rp);return u.jsxs("div",{className:"flex flex-row gap-oneScaledPix bg-metallicBlue",children:[u.jsx(te,{disabled:!t,onClick:()=>{e(Ap())},shortcutKeys:["⌘Z","^Z"],children:u.jsx(_i,{icon:u.jsx(I,{children:"⬅"}),topText:"un",bottomText:"do"})}),u.jsx(te,{disabled:!r,onClick:()=>{e(Tp())},shortcutKeys:["⌘⇧Z","^⇧Z"],children:u.jsx(_i,{icon:u.jsx(I,{children:"➡"}),topText:"re",bottomText:"do"})})]})},pw=({className:e})=>{const t=ze();return u.jsx(Ar,{className:e,label:"scenery",value:se(r=>r.levelEditor.wallsFloorsLocked),onChange:r=>{t(Op(r))},falseLabel:"edit",trueLabel:"lock",shortcutKeys:["C"],tooltipContent:"locks walls and floors, to edit their contents"})};function Ql(e){return{type:"door",config:{direction:"away",toRoom:e?"+":"nowhere"}}}const mw=()=>{const[e,t]=p.useState(!0),r=se(i=>to(i).planet),n=Ue(r==="moonbase"?"texture-door_frame_moonbase_x_whole":"texture-door_frame_generic_x_whole"),o=Ql(e),s=Bf(o);return u.jsx(ka,{main:u.jsx(L,{itemTool:o,shortcutKeys:["D"],children:u.jsx(it,{iconClasses:`sprite top-[calc(-17px*var(--scale))] left-[calc(-2px*var(--scale))] ${n} ${G}`,text:e?"+":""})}),children:[u.jsx(Ar,{className:"w-full",value:e,label:"auto + room",onChange:i=>{t(i),s&&Ae.dispatch(mo({type:"item",item:Ql(i)}))}},"autoAddDoor")]})},gw=()=>{const e=se(n=>to(n).planet),t={type:"wall",config:{direction:"away",tiles:Array.from(Np(e,1))}},r=Ue(e==="blacktooth"?"texture-blacktooth_wall_plain_away":e==="bookworld"?"texture-bookworld_wall_cowboy_away":e==="jail"?"texture-jail_wall_bars_away":e==="egyptus"?"texture-egyptus_wall_hieroglyphics_away":e==="market"?"texture-market_wall_passage_away":e==="moonbase"?"texture-moonbase_wall_window1_away":e==="penitentiary"?"texture-penitentiary_wall_loop_away":"texture-safari_wall_wall_away");return u.jsx(L,{itemTool:t,children:u.jsx("span",{className:`sprite ${r} ${G}`})})},vw=()=>u.jsx(te,{className:"bg-midRed",onClick:()=>Ae.dispatch(Ip()),tooltipContent:`## Clear room

Clears the room out, leaving just walls, floors, and doors`,children:u.jsx(I,{className:"relative leading-none",children:"CLR"})}),Uf=({currentRoomId:e,direction:t})=>{const r=se(({levelEditor:i})=>i.campaignInProgress),n=se(({levelEditor:i})=>i.currentlyEditingRoomId),o=ze(),s=t==="above"?"⬆":"⬇";return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-row gap-oneScaledPix w-full flex-wrap pt-1 items-center",children:[u.jsxs(I,{className:"text-lightGrey leading-none h-1",children:["Room ",s]}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"flex flex-row gap-oneScaledPix",children:[u.jsx(te,{small:!0,className:"bg-highlightBeige w-max px-half",tooltipContent:`Switch to the room *${t}*`,disabled:!e,children:u.jsx(I,{onClick:()=>e&&o(Fi(e)),children:`go ${s}`})}),u.jsx(te,{small:!0,className:" bg-moss",tooltipContent:`Add a new room *${t}* this one`,children:u.jsx(I,{onClick:()=>o(Do({direction:t,createNew:!0})),children:"+"})}),u.jsx(te,{small:!0,className:"bg-midRed",tooltipContent:`Break the link with the room *${t}*`,children:u.jsx(I,{onClick:()=>o(Do({direction:t,createNew:!1,roomId:void 0})),children:"x"})})]})]}),u.jsx("div",{className:"flex flex-row gap-oneScaledPix w-full flex-wrap",children:u.jsx(Lf,{value:e,campaign:r,excludeRoomIds:[n],triggerButtonClassName:"w-full",onSelect:i=>{o(Do({direction:t,createNew:!1,roomId:i}))},tooltipContent:`Select a room to place *${t}* this one`})})]})},yw=()=>{const e=se(({levelEditor:t})=>Bi(t).roomAbove);return u.jsx(u.Fragment,{children:u.jsx(Uf,{currentRoomId:e,direction:"above"})})},bw=()=>{const e=se(({levelEditor:t})=>Bi(t).roomBelow);return u.jsx(u.Fragment,{children:u.jsx(Uf,{currentRoomId:e,direction:"below"})})},xw=()=>{const e=se(({levelEditor:t})=>t.tool.type==="eyeDropper");return u.jsx(te,{shortcutKeys:["I",","],isCurrentTool:e,onClick:()=>Ae.dispatch(mo({type:"eyeDropper"})),tooltipContent:`## eye-dropper

click on an item in the room to copy it and put a copy down somewhere else`,children:u.jsx("span",{className:"relative sprite texture-editor_tool_eyedropper leading-none"})})},Ao=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const ww="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Jr=Array.prototype.slice.call(ww),In=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(Jr),_w=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Yn=String.fromCharCode.bind(String),ec=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),kw=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Hf=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Sw=e=>{let t,r,n,o,s="";const i=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,s+=Jr[t>>18&63]+Jr[t>>12&63]+Jr[t>>6&63]+Jr[t&63]}return i?s.slice(0,i-3)+"===".substring(i):s},Cw=typeof btoa=="function"?e=>btoa(e):Ao?e=>Buffer.from(e,"binary").toString("base64"):Sw,tc=Ao?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,o=e.length;n<o;n+=4096)r.push(Yn.apply(null,e.subarray(n,n+4096)));return Cw(r.join(""))},Ew=(e,t=!1)=>t?kw(tc(e)):tc(e),jw=e=>{if(e=e.replace(/\s+/g,""),!_w.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,o;for(let s=0;s<e.length;)t=In[e.charAt(s++)]<<18|In[e.charAt(s++)]<<12|(n=In[e.charAt(s++)])<<6|(o=In[e.charAt(s++)]),r+=n===64?Yn(t>>16&255):o===64?Yn(t>>16&255,t>>8&255):Yn(t>>16&255,t>>8&255,t&255);return r},Pw=typeof atob=="function"?e=>atob(Hf(e)):Ao?e=>Buffer.from(e,"base64").toString("binary"):jw,Rw=Ao?e=>ec(Buffer.from(e,"base64")):e=>ec(Pw(e).split("").map(t=>t.charCodeAt(0))),Aw=e=>Rw(Tw(e)),Tw=e=>Hf(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ow=!0,qf="gzip",Wf=async e=>{const t=JSON.stringify(e),n=new TextEncoder().encode(t),o=new Blob([n]),s=new CompressionStream(qf),i=o.stream().pipeThrough(s),a=await new Response(i).arrayBuffer(),l=new Uint8Array(a);return Ew(l,Ow)},Nw=async e=>{try{const t=Aw(e),r=new Blob([t]),n=new DecompressionStream(qf),o=r.stream().pipeThrough(n),s=await new Response(o).text();return JSON.parse(s)}catch(t){throw new Error("error decompressing object",{cause:t})}},Iw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Jt(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Sa extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class $w extends Sa{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class rc extends Sa{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class nc extends Sa{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ki;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ki||(ki={}));var zw=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class Dw{constructor(t,{headers:r={},customFetch:n,region:o=ki.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=Iw(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return zw(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=r;let a={},{region:l}=r;l||(l=this.region);const c=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:d}).catch(g=>{throw new $w(g)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new rc(f);if(!f.ok)throw new nc(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield f.json():m==="application/octet-stream"?v=yield f.blob():m==="text/event-stream"?v=f:m==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(o){return{data:null,error:o,response:o instanceof nc||o instanceof rc?o.context:void 0}}})}}var pe={},nr={},or={},sr={},ir={},ar={},Lw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tr=Lw();const Mw=Tr.fetch,Gf=Tr.fetch.bind(Tr),Kf=Tr.Headers,Bw=Tr.Request,Fw=Tr.Response,Dr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Kf,Request:Bw,Response:Fw,default:Gf,fetch:Mw},Symbol.toStringTag,{value:"Module"})),Uw=op(Dr);var $n={},oc;function Vf(){if(oc)return $n;oc=1,Object.defineProperty($n,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return $n.default=e,$n}var sc;function Jf(){if(sc)return ar;sc=1;var e=ar&&ar.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ar,"__esModule",{value:!0});const t=e(Uw),r=e(Vf());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=Object.assign({},this.headers),this.headers[s]=i,this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,h;let m=null,v=null,g=null,y=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const C=await c.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=C:v=JSON.parse(C))}const x=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&_&&_.length>1&&(g=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,g=null,y=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const x=await c.text();try{m=JSON.parse(x),Array.isArray(m)&&c.status===404&&(v=[],m=null,y=200,b="OK")}catch{c.status===404&&x===""?(y=204,b="No Content"):m={message:x}}if(m&&this.isMaybeSingle&&(!((h=m?.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,y=200,b="OK"),m&&this.shouldThrowOnError)throw new r.default(m)}return{error:m,data:v,count:g,status:y,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,f,h;return{error:{message:`${(d=c?.name)!==null&&d!==void 0?d:"FetchError"}: ${c?.message}`,details:`${(f=c?.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return ar.default=n,ar}var ic;function Xf(){if(ic)return ir;ic=1;var e=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ir,"__esModule",{value:!0});const t=e(Jf());class r extends t.default{select(o){let s=!1;const i=(o??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:s=!0,nullsFirst:i,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${o}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${o}`),this}range(o,s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${o}`),this.url.searchParams.set(c,`${s-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:s=!1,settings:i=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const f=[o?"analyze":null,s?"verbose":null,i?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`,c==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ir.default=r,ir}var ac;function Ca(){if(ac)return sr;ac=1;var e=sr&&sr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sr,"__esModule",{value:!0});const t=e(Xf());class r extends t.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}in(o,s){const i=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(o,`in.(${i})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:i,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(o,`${l}fts${c}.${s}`),this}match(o){return Object.entries(o).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(o,s,i){return this.url.searchParams.append(o,`not.${s}.${i}`),this}or(o,{foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${o})`),this}filter(o,s,i){return this.url.searchParams.append(o,`${s}.${i}`),this}}return sr.default=r,sr}var lc;function Yf(){if(lc)return or;lc=1;var e=or&&or.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(or,"__esModule",{value:!0});const t=e(Ca());class r{constructor(o,{headers:s={},schema:i,fetch:a}){this.url=o,this.headers=s,this.schema=i,this.fetch=a}select(o,{head:s=!1,count:i}={}){const a=s?"HEAD":"GET";let l=!1;const c=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),i&&(this.headers.Prefer=`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:s,defaultToNull:i=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(o)){const c=o.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:s,ignoreDuplicates:i=!1,count:a,defaultToNull:l=!0}={}){const c="POST",d=[`resolution=${i?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&d.push(this.headers.Prefer),a&&d.push(`count=${a}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(o)){const f=o.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:s}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const s="DELETE",i=[];return o&&i.push(`count=${o}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return or.default=r,or}var Wr={},Gr={},cc;function Hw(){return cc||(cc=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.version=void 0,Gr.version="0.0.0-automated"),Gr}var uc;function qw(){if(uc)return Wr;uc=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.DEFAULT_HEADERS=void 0;const e=Hw();return Wr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Wr}var dc;function Ww(){if(dc)return nr;dc=1;var e=nr&&nr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(nr,"__esModule",{value:!0});const t=e(Yf()),r=e(Ca()),n=qw();class o{constructor(i,{headers:a={},schema:l,fetch:c}={}){this.url=i,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(i){const a=new URL(`${this.url}/${i}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:c=!1,count:d}={}){let f;const h=new URL(`${this.url}/rpc/${i}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(a).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{h.searchParams.append(g,y)})):(f="POST",m=a);const v=Object.assign({},this.headers);return d&&(v.Prefer=`count=${d}`),new r.default({method:f,url:h,headers:v,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return nr.default=o,nr}var fc;function Gw(){if(fc)return pe;fc=1;var e=pe&&pe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pe,"__esModule",{value:!0}),pe.PostgrestError=pe.PostgrestBuilder=pe.PostgrestTransformBuilder=pe.PostgrestFilterBuilder=pe.PostgrestQueryBuilder=pe.PostgrestClient=void 0;const t=e(Ww());pe.PostgrestClient=t.default;const r=e(Yf());pe.PostgrestQueryBuilder=r.default;const n=e(Ca());pe.PostgrestFilterBuilder=n.default;const o=e(Xf());pe.PostgrestTransformBuilder=o.default;const s=e(Jf());pe.PostgrestBuilder=s.default;const i=e(Vf());return pe.PostgrestError=i.default,pe.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:s.default,PostgrestError:i.default},pe}var Kw=Gw();const Vw=Ke(Kw),{PostgrestClient:Jw,PostgrestQueryBuilder:HS,PostgrestFilterBuilder:qS,PostgrestTransformBuilder:WS,PostgrestBuilder:GS,PostgrestError:KS}=Vw;function Xw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Yw=Xw(),Zw="2.11.15",Qw=`realtime-js/${Zw}`,e0="1.0.0",Zf=1e4,t0=1e3;var en;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(en||(en={}));var ye;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ye||(ye={}));var Fe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fe||(Fe={}));var Si;(function(e){e.websocket="websocket"})(Si||(Si={}));var Lt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Lt||(Lt={}));class r0{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const o=r.getUint8(1),s=r.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(t.slice(i,i+o));i=i+o;const l=n.decode(t.slice(i,i+s));i=i+s;const c=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Qf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ae||(ae={}));const hc=(e,t,r={})=>{var n;const o=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((s,i)=>(s[i]=n0(i,e,t,o),s),{})},n0=(e,t,r,n)=>{const o=t.find(a=>a.name===e),s=o?.type,i=r[e];return s&&!n.includes(s)?eh(s,i):Ci(i)},eh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return a0(t,r)}switch(e){case ae.bool:return o0(t);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return s0(t);case ae.json:case ae.jsonb:return i0(t);case ae.timestamp:return l0(t);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return Ci(t);default:return Ci(t)}},Ci=e=>e,o0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},s0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},i0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},a0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const i=e.slice(1,r);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>eh(t,a))}return e},l0=e=>typeof e=="string"?e.replace(" ","T"):e,th=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ks{constructor(t,r,n={},o=Zf){this.channel=t,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var pc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(pc||(pc={}));class tn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tn.syncState(this.state,o,s,i),this.pendingDiffs.forEach(l=>{this.state=tn.syncDiff(this.state,l,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=tn.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,o){const s=this.cloneDeep(t),i=this.transformState(r),a={},l={};return this.map(s,(c,d)=>{i[c]||(l[c]=d)}),this.map(i,(c,d)=>{const f=s[c];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),v=d.filter(y=>m.indexOf(y.presence_ref)<0),g=f.filter(y=>h.indexOf(y.presence_ref)<0);v.length>0&&(a[c]=v),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},n,o)}static syncDiff(t,r,n,o){const{joins:s,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),d.length>0){const f=t[a].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[a].unshift(...h)}n(a,d,l)}),this.map(i,(a,l)=>{let c=t[a];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[a]=c,o(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const o=t[n];return"metas"in o?r[n]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mc||(mc={}));var gc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gc||(gc={}));var ct;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ct||(ct={}));class Ea{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ks(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new Qf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ye.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new tn(this),this.broadcastEndpointURL=th(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ye.closed){const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(d=>t?.(ct.CHANNEL_ERROR,d)),this._onClose(()=>t?.(ct.CLOSED));const l={},c={broadcast:s,presence:i,postgres_changes:(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t?.(ct.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h?.length)!==null&&f!==void 0?f:0,v=[];for(let g=0;g<m;g++){const y=h[g],{filter:{event:b,schema:w,table:x,filter:_}}=y,C=d&&d[g];if(C&&C.event===b&&C.schema===w&&C.table===x&&C.filter===_)v.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=ye.errored,t?.(ct.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ct.SUBSCRIBED);return}}).receive("error",d=>{this.state=ye.errored,t?.(ct.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t?.(ct.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,o;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ye.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new ks(this,Fe.leave,{},t),n.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const o=new AbortController,s=setTimeout(()=>o.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(s),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new ks(this,t,r,n);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var o,s;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Fe;if(n&&[a,l,c,d].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(m=>{var v,g,y;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(m=>m.callback(h,n)):(s=this.bindings[i])===null||s===void 0||s.filter(m=>{var v,g,y,b,w,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const _=m.id,C=(v=m.filter)===null||v===void 0?void 0:v.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(C==="*"||C?.toLocaleLowerCase()===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(w=(b=m?.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((x=r?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:g,table:y,commit_timestamp:b,type:w,errors:x}=v;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:b,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(v))}m.callback(h,n)})}_isClosed(){return this.state===ye.closed}_isJoined(){return this.state===ye.joined}_isJoining(){return this.state===ye.joining}_isLeaving(){return this.state===ye.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const o=t.toLocaleLowerCase(),s={type:o,filter:r,callback:n};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Ea.isEqual(o.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fe.close,{},t)}_onError(t){this._on(Fe.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ye.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=hc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=hc(t.columns,t.old_record)),r}}const vc=()=>{},c0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u0{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vc,this.ref=0,this.logger=vc,this.conn=null,this.sendBuffer=[],this.serializer=new r0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Jt(async()=>{const{default:l}=await Promise.resolve().then(()=>Dr);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${Si.websocket}`,this.httpEndpoint=th(t),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const o=(n=r?.params)===null||n===void 0?void 0:n.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r?.encode?r.encode:(s,i)=>i(JSON.stringify(s)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Yw),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:e0}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case en.connecting:return Lt.Connecting;case en.open:return Lt.Open;case en.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(s=>s.topic===n);if(o)return o;{const s=new Ea(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:o,ref:s}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const o={access_token:r,version:Qw};r&&n.updateJoinPayload(o),n.joinedOnce&&n._isJoined()&&n._push(Fe.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(t0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:o,payload:s,ref:i}=r;n==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${o} ${i&&"("+i+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fe.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${n}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([c0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ja extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class d0 extends ja{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ei extends ja{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var f0=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const rh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Jt(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},h0=()=>f0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jt(()=>Promise.resolve().then(()=>Dr),void 0)).Response:Response}),ji=e=>{if(Array.isArray(e))return e.map(r=>ji(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const o=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[o]=ji(n)}),t};var Zt=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const Ss=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),p0=(e,t,r)=>Zt(void 0,void 0,void 0,function*(){const n=yield h0();e instanceof n&&!r?.noResolveJson?e.json().then(o=>{t(new d0(Ss(o),e.status||500))}).catch(o=>{t(new Ei(Ss(o),o))}):t(new Ei(Ss(e),e))}),m0=(e,t,r,n)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n&&(o.body=JSON.stringify(n)),Object.assign(Object.assign({},o),r))};function yn(e,t,r,n,o,s){return Zt(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(r,m0(t,n,o,s)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>p0(l,a,n))})})}function ao(e,t,r,n){return Zt(this,void 0,void 0,function*(){return yn(e,"GET",t,r,n)})}function xt(e,t,r,n,o){return Zt(this,void 0,void 0,function*(){return yn(e,"POST",t,n,o,r)})}function g0(e,t,r,n,o){return Zt(this,void 0,void 0,function*(){return yn(e,"PUT",t,n,o,r)})}function v0(e,t,r,n){return Zt(this,void 0,void 0,function*(){return yn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function nh(e,t,r,n,o){return Zt(this,void 0,void 0,function*(){return yn(e,"DELETE",t,n,o,r)})}var ke=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const y0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b0{constructor(t,r={},n,o){this.url=t,this.headers=r,this.bucketId=n,this.fetch=rh(o)}uploadOrUpdate(t,r,n,o){return ke(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},yc),o);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:s,headers:a},i?.duplex?{duplex:i.duplex}:{})),h=yield f.json();return f.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(me(s))return{data:null,error:s};throw s}})}upload(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,o){return ke(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:yc.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),h=yield f.json();return f.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(me(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const s=yield xt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new ja("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}update(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}copy(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield xt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,n){return ke(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),s=yield xt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,n){return ke(this,void 0,void 0,function*(){try{const o=yield xt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}download(t,r){return ke(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(r?.transform||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ao(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}info(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ao(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ji(n),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}exists(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield v0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(me(n)&&n instanceof Ei){const o=n.originalError;if([400,404].includes(o?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),o=[],s=r?.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&o.push(s);const a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&o.push(l);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return ke(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}list(t,r,n){return ke(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},y0),r),{prefix:t||""});return{data:yield xt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const x0="2.7.1",w0={"X-Client-Info":`storage-js/${x0}`};var lr=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class _0{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},w0),r),this.fetch=rh(n)}listBuckets(){return lr(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return lr(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return lr(this,void 0,void 0,function*(){try{return{data:yield g0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}emptyBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return lr(this,void 0,void 0,function*(){try{return{data:yield nh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}}class k0 extends _0{constructor(t,r={},n){super(t,r,n)}from(t){return new b0(this.url,this.headers,t,this.fetch)}}const S0="2.51.0";let Xr="";typeof Deno<"u"?Xr="deno":typeof document<"u"?Xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xr="react-native":Xr="node";const C0={"X-Client-Info":`supabase-js-${Xr}/${S0}`},E0={headers:C0},j0={schema:"public"},P0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R0={};var A0=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};const T0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Gf:t=fetch,(...r)=>t(...r)},O0=()=>typeof Headers>"u"?Kf:Headers,N0=(e,t,r)=>{const n=T0(r),o=O0();return(s,i)=>A0(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new o(i?.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},i),{headers:c}))})};var I0=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};function $0(e){return e.endsWith("/")?e:e+"/"}function z0(e,t){var r,n;const{db:o,auth:s,realtime:i,global:a}=e,{db:l,auth:c,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>I0(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const oh="2.71.0",mr=30*1e3,Pi=3,Cs=Pi*mr,D0="http://localhost:9999",L0="supabase.auth.token",M0={"X-Client-Info":`gotrue-js/${oh}`},Ri="X-Supabase-Api-Version",sh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F0=10*60*1e3;class Pa extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function X(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class U0 extends Pa{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function H0(e){return X(e)&&e.name==="AuthApiError"}class ih extends Pa{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Tt extends Pa{constructor(t,r,n,o){super(t,n,o),this.name=r,this.status=n}}class bt extends Tt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q0(e){return X(e)&&e.name==="AuthSessionMissingError"}class zn extends Tt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dn extends Tt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ln extends Tt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W0(e){return X(e)&&e.name==="AuthImplicitGrantRedirectError"}class bc extends Tt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ai extends Tt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Es(e){return X(e)&&e.name==="AuthRetryableFetchError"}class xc extends Tt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ti extends Tt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wc=` 	
\r=`.split(""),G0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<wc.length;t+=1)e[wc[t].charCodeAt(0)]=-2;for(let t=0;t<lo.length;t+=1)e[lo[t].charCodeAt(0)]=t;return e})();function _c(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(lo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(lo[n]),t.queuedBits-=6}}function ah(e,t,r){const n=G0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kc(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{J0(i,n,r)};for(let i=0;i<e.length;i+=1)ah(e.charCodeAt(i),o,s);return t.join("")}function K0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function V0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}K0(n,t)}}function J0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function X0(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)ah(e.charCodeAt(o),r,n);return new Uint8Array(t)}function Y0(e){const t=[];return V0(e,r=>t.push(r)),new Uint8Array(t)}function Z0(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};return e.forEach(o=>_c(o,r,n)),_c(null,r,n),t.join("")}function Q0(e){return Math.round(Date.now()/1e3)+e}function e_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",Ot={tested:!1,writable:!1},lh=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ot.tested)return Ot.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ot.tested=!0,Ot.writable=!0}catch{Ot.tested=!0,Ot.writable=!1}return Ot.writable};function t_(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,s)=>{t[s]=o})}catch{}return r.searchParams.forEach((n,o)=>{t[o]=n}),t}const ch=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Jt(async()=>{const{default:n}=await Promise.resolve().then(()=>Dr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},r_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",gr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Nt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vt=async(e,t)=>{await e.removeItem(t)};class To{constructor(){this.promise=new To.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}To.promiseConstructor=Promise;function js(e){const t=e.split(".");if(t.length!==3)throw new Ti("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!B0.test(t[n]))throw new Ti("JWT not in base64url format");return{header:JSON.parse(kc(t[0])),payload:JSON.parse(kc(t[1])),signature:X0(t[2]),raw:{header:t[0],payload:t[1]}}}async function n_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function o_(e,t){return new Promise((n,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){n(i);return}}catch(i){if(!t(s,i)){o(i);return}}})()})}function s_(e){return("0"+e.toString(16)).substr(-2)}function i_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let o="";for(let s=0;s<56;s++)o+=r.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,s_).join("")}async function a_(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(n);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function l_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await a_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(e,t,r=!1){const n=i_();let o=n;r&&(o+="/PASSWORD_RECOVERY"),await gr(e,`${t}-code-verifier`,o);const s=await l_(n);return[s,n===s?"plain":"s256"]}const c_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u_(e){const t=e.headers.get(Ri);if(!t||!t.match(c_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function d_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function f_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ur(e){if(!h_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ps(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var p_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const $t=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m_=[502,503,504];async function Sc(e){var t;if(!r_(e))throw new Ai($t(e),0);if(m_.includes(e.status))throw new Ai($t(e),e.status);let r;try{r=await e.json()}catch(s){throw new ih($t(s),s)}let n;const o=u_(e);if(o&&o.getTime()>=sh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xc($t(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new xc($t(r),e.status,r.weak_password.reasons);throw new U0($t(r),e.status||500,n)}const g_=(e,t,r,n)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};async function re(e,t,r,n){var o;const s=Object.assign({},n?.headers);s[Ri]||(s[Ri]=sh["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const i=(o=n?.query)!==null&&o!==void 0?o:{};n?.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await v_(e,t,r+a,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function v_(e,t,r,n,o,s){const i=g_(t,n,o,s);let a;try{a=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Ai($t(l),0)}if(a.ok||await Sc(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Sc(l)}}function lt(e){var t;let r=null;w_(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Q0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Cc(e){const t=lt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function wt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function y_(e){return{data:e,error:null}}function b_(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:s}=e,i=p_(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:s},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function x_(e){return e}function w_(e){return e.access_token&&e.refresh_token&&e.expires_in}const Rs=["global","local","others"];var __=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};class k_{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ch(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Rs[0]){if(Rs.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rs.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wt})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=__(t,["options"]),o=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(o.new_email=n?.newEmail,delete o.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:b_,redirectTo:r?.redirectTo})}catch(r){if(X(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wt})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,o,s,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:x_});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(X(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ur(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wt})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ur(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wt})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ur(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wt})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ur(t.userId);try{const{data:r,error:n}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:n}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ur(t.userId),ur(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}}function Ec(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function S_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dr={debug:!!(globalThis&&lh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C_ extends uh{}async function E_(e,t,r){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(dr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}S_();const j_={url:D0,storageKey:L0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function jc(e,t,r){return await r()}const fr={};class ln{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ln.nextInstanceID,ln.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},j_),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new k_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ch(o.fetch),this.lock=o.lock||jc,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Me()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=E_:this.lock=jc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:lh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ec(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ec(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=fr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=fr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=t_(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Me()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),W0(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return X(r)?{error:r}:{error:new ih("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,o;try{const s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:lt}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,n,o;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await cr(this.storage,this.storageKey)),s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:d,password:f,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:v},xform:lt})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(o=h?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:lt})}else throw new Dn("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(X(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:i,options:a}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Cc})}else if("phone"in t){const{phone:s,password:i,options:a}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Cc})}else throw new Dn("You must provide either an email or phone number and a password");const{data:n,error:o}=r;return o?{data:{user:null,session:null},error:o}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new zn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,o,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,o,s,i,a,l,c,d,f,h,m;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:y,wallet:b,statement:w,options:x}=t;let _;if(Me())if(typeof b=="object")_=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const C=new URL((r=x?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),w?{statement:w}:null));let k;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")k=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)k=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(o=(n=x?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=x?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((i=x?.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:y,error:b}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Z0(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:lt});if(b)throw b;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new zn}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:b})}catch(y){if(X(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Nt(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(r??"").split("/");try{const{data:s,error:i}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:lt});if(await vt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new zn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(X(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:o,access_token:s,nonce:i}=t,a=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:lt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,o,s,i;try{if("email"in t){const{email:a,options:l}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await cr(this.storage,this.storageKey));const{error:f}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(i=l?.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new Dn("You must provide either an email or phone number.")}catch(a){if(X(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let o,s;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:lt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(X(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,n,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await cr(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:y_})}catch(s){if(X(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new bt;const{error:o}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(X(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:s}=t,{error:i}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:o,options:s}=t,{data:i,error:a}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:i?.message_id},error:a}}throw new Dn("You must provide either an email or phone number and a type")}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Nt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Cs:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Nt(this.userStorage,this.storageKey+"-user");i?.user?t.user=i.user:t.user=Ps()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:t},error:null}}const{session:o,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wt}):await this._useSession(async r=>{var n,o,s;const{data:i,error:a}=r;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:wt})})}catch(r){if(X(r))return q0(r)&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:o,error:s}=n;if(s)throw s;if(!o.session)throw new bt;const i=o.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await cr(this.storage,this.storageKey));const{data:c,error:d}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:wt});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new bt;const r=Date.now()/1e3;let n=r,o=!0,s=null;const{payload:i}=js(t.access_token);if(i.exp&&(n=i.exp,o=n<=r),o){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(X(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:a}=r;if(a)throw a;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new bt;const{session:o,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(X(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Me())throw new Ln("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ln(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ln("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bc("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=t;if(!s||!a||!i||!c)throw new Ln("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;l&&(h=parseInt(l));const m=h-d;m*1e3<=mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:g,error:y}=await this._getUser(s);if(y)throw y;const b={provider_token:n,provider_refresh_token:o,access_token:s,expires_in:f,expires_at:h,refresh_token:i,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(n){if(X(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Nt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:o,error:s}=r;if(s)return{error:s};const i=(n=o.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(H0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=e_(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,o;try{const{data:{session:s},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await cr(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(X(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:o}=await this._useSession(async s=>{var i,a,l,c,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Me()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(X(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,o;const{data:s,error:i}=r;if(i)throw i;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await o_(async o=>(o>0&&await n_(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:lt})),(o,s)=>{const i=200*Math.pow(2,o);return s&&Es(s)&&Date.now()+i-n<mr})}catch(n){if(this._debug(r,"error",n),X(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Me()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await Nt(this.storage,this.storageKey);if(o&&this.userStorage){let i=await Nt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await gr(this.userStorage,this.storageKey+"-user",i)),o.user=(t=i?.user)!==null&&t!==void 0?t:Ps()}else if(o&&!o.user&&!o.user){const i=await Nt(this.storage,this.storageKey+"-user");i&&i?.user?(o.user=i.user,await vt(this.storage,this.storageKey+"-user"),await gr(this.storage,this.storageKey,o)):o.user=Ps()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&await this._removeSession();return}const s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Cs;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Cs}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),Es(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(o.access_token);!a&&i?.user?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new To;const{data:s,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!s.session)throw new bt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),X(s)){const i={session:null,error:s};return Es(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,n=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){s.push(l)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await gr(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const s=structuredClone(o);await gr(this.storage,this.storageKey,s)}else{const o=structuredClone(r);await gr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await vt(this.storage,this.storageKey),await vt(this.storage,this.storageKey+"-code-verifier"),await vt(this.storage,this.storageKey+"-user"),this.userStorage&&await vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Me()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),mr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${mr}ms, refresh threshold is ${Pi} ticks`),o<=Pi&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const o=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,i]=await cr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);o.push(s.toString())}return n?.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:o,error:s}=r;return s?{data:null,error:s}:await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,o;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:s}=r;if(s)return{data:null,error:s};const{data:i,error:a}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:s}=r;return s?{data:null,error:s}:await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(X(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=t?.factors||[],o=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:o},error:s}=t;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=js(o.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const o=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+F0>o)return n;const{data:s,error:i}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,n=s.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:o,payload:s,signature:i,raw:{header:a,payload:l}}=js(n);r?.allowExpired||d_(s.exp);const c=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:o,signature:i},error:null}}const d=f_(o.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,Y0(`${a}.${l}`)))throw new Ti("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}}ln.nextInstanceID=0;const P_=ln;class R_ extends P_{constructor(t){super(t)}}var A_=function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(f){i(f)}}function l(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};class T_{constructor(t,r,n){var o,s,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=$0(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:j0,realtime:R0,auth:Object.assign(Object.assign({},P0),{storageKey:c}),global:E0},f=z0(n??{},d);this.storageKey=(o=f.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=N0(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Jw(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Dw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new k0(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return A_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:o,storageKey:s,flowType:i,lock:a,debug:l},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new R_({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:o,flowType:i,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new u0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const O_=(e,t,r)=>new T_(e,t,r),Gt=O_("https://pkswdnpftrundnewgnya.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrc3dkbnBmdHJ1bmRuZXdnbnlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODI2MzIsImV4cCI6MjA2ODI1ODYzMn0.r_Y1RLOGJ55C0De5SBTVXqO09SMDqgV38sQuE-oDxXE"),N_=async(e,t)=>{const r=await Gt.rpc("save_campaign_version",{p_name:e,p_data:await Wf(t)});if(r.error)throw new Error(`error saving to db ${r.error.message} ${r.error.details}`,{cause:r.error});return r.data},I_=async e=>{const t=await Gt.rpc("get_latest_campaign",{p_name:e.name,p_created_by:e.createdBy,p_version:e.version});if(t.error)throw new Error("could not get campaign",{cause:t.error});const r=await Nw(t.data.data);return Object.values(r.rooms).forEach(n=>{delete n.size}),r},dh=()=>{const[e,t]=p.useState(void 0);return p.useEffect(()=>{Gt.auth.getUser().then(({data:{user:n}})=>{t(n)});const{data:{subscription:r}}=Gt.auth.onAuthStateChange((n,o)=>{t(o?.user??null)});return()=>r.unsubscribe()},[]),e},fh=()=>{const[e,t]=p.useState(0);return{justDone:e,doneNow(){t(r=>r+1),setTimeout(()=>t(r=>r-1),$_)}}},$_=2e3,z_=`
## Save

put your campaign on cassette tape, or even floppy disk!

to be shared or worked on later

(really, saves to a cloud database)
`,D_=`
## Load

continue working from your last save
`,hh=()=>se(({levelEditor:{savedCampaign:e,campaignInProgress:t}})=>au(e,t)),L_=()=>{const e=dh(),t=hh(),{doneNow:r,justDone:n}=fh(),o=async()=>{const i=Ae.getState(),a=pu(i);console.info("saving...",a);const l=await N_("sequel",a);console.info(`...saved as v${l}`),Ae.dispatch($p({campaign:a})),r()},s=async()=>{try{const i=await I_({name:"sequel"});console.info("loaded",i),Ae.dispatch(zp({campaign:i}))}catch(i){console.error(i)}};return u.jsxs(u.Fragment,{children:[n>0?u.jsx(te,{disabled:!0,className:"!bg-moss !text-white",children:u.jsx(I,{className:"relative leading-none",children:"OK!"})}):u.jsx(te,{disabled:e===null||t,onClick:o,shortcutKeys:["^S","⌘S"],tooltipContent:z_,children:u.jsxs("div",{className:"flex flex-row items-center",children:[u.jsx("span",{className:ge("sprite sprite-tinted text-highlightBeige texture-hud_char_➡ relative",{"text-lightGrey":e===null})}),u.jsx("span",{className:ge("sprite texture-editor_tool_save relative",{"sprite-revert-to-two-tone-dim":e===null})})]})}),u.jsx(te,{disabled:e===null,onClick:s,tooltipContent:D_,children:u.jsxs("div",{className:"flex flex-row items-center",children:[u.jsx("span",{className:ge("sprite texture-editor_tool_save relative",{"sprite-revert-to-two-tone-dim":e===null})}),u.jsx("span",{className:ge("sprite sprite-tinted text-highlightBeige texture-hud_char_➡ relative",{"text-lightGrey":e===null})})]})})]})},M_=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState(!1);return u.jsx(ka,{main:u.jsx(te,{onClick:async()=>{const o=Ae.getState(),s=pu(o),i=await Wf(s),a=new URL("https://blockstack.ing"),l=a.searchParams;l.set("campaignData",i),l.set("noSaves","1"),l.set("cheats","1"),r&&l.set("playAsHeels","1"),e||(a.hash=o.levelEditor.currentlyEditingRoomId),window.open(a.toString(),"playtest")},shortcutKeys:["⌘P","^P"],children:u.jsx(_i,{topText:"pl",bottomText:"ay",icon:u.jsx("span",{className:"sprite texture-joystick mt-half"})})}),children:[u.jsx(Ar,{className:"w-full",value:e,label:"from",falseLabel:"room",trueLabel:"start",onChange:o=>t(o)},"fromStart"),u.jsx(Ar,{className:"w-full",value:r,label:"as",falseLabel:"head",trueLabel:"heels",onChange:o=>n(o)},"playAsHeels")]})},B_=e=>{switch(e){case"github":return lu;case"discord":return cu;default:throw new Error}},F_=({className:e})=>{const t=dh();if(t===void 0)return u.jsx("div",{className:"bg-shadow h-4"});const r=o=>async()=>{const s=new URL(window.location.href);s.hash="";const i=s.toString(),{error:a}=await Gt.auth.signInWithOAuth({provider:o,options:{redirectTo:i}});a&&console.error("Login error:",a)},n=async()=>{const{error:o}=await Gt.auth.signOut();o&&console.error("Logout error:",o)};return u.jsx("div",{className:ge(e),children:t!==null?u.jsxs("div",{className:"bg-moss overflow-hidden text-center",children:[u.jsx(I,{noSlitWords:!0,className:"overflow-hidden",children:`${B_(t.app_metadata.provider)}${t.email}`}),u.jsx(Cr,{className:"px-1 w-full",onClick:n,children:u.jsx(I,{children:"Logout"})})]}):u.jsxs("div",{className:"px-1 bg-midRed",children:[u.jsx(I,{className:"block w-full sprites-double-height pb-1",children:"Not logged in"}),u.jsx(I,{className:"block w-full text-highlightBeige",children:"You will not be able to save"}),u.jsxs("div",{className:"pt-1 flex flex-col gap-half",children:[u.jsx(I,{children:"Log in with:"}),u.jsxs(Cr,{className:"px-1 w-full flex-row justify-between bg-redShadow",onClick:r("github"),children:[u.jsx(I,{children:lu}),u.jsx(I,{children:"GitHub"})]}),u.jsxs(Cr,{className:"px-1 w-full flex-row justify-between bg-redShadow",onClick:r("discord"),children:[u.jsx(I,{children:cu}),u.jsx(I,{children:"Discord"})]})]})]})})},U_=`
## Add room

Add a **new room** to this campaign

Nothing will link to the room so add *doors* and *teleporters* to get into it
`,H_=`
## Delete room

Delete this room
`,q_=()=>{const e=ze(),t=se(r=>Object.keys(r.levelEditor.campaignInProgress.rooms).length>1);return u.jsxs(u.Fragment,{children:[u.jsx(te,{className:"bg-moss",onClick:()=>e(Dp()),tooltipContent:U_,children:u.jsx("span",{className:"sprite texture-hud_char_+ relative"})}),u.jsx(te,{className:"bg-midRed",onClick:()=>e(Lp()),disabled:!t,tooltipContent:H_,children:u.jsx("span",{className:"sprite texture-hud_char_X relative"})})]})},W_=e=>sp(e.items).filter(t=>Ui(t)),ph=(e,t)=>{const r=po(W_(e));return t==="door"?r.filter(o=>o.type!=="wall"):r},G_=({roomState:e,jsonItemIds:t,blockPositionDelta:r,timesDelta:n})=>{const o=fl(cl(a=>[a,e.roomJson.items[a]]),cl(([a,l])=>[a,ip(l,c=>{c.position=Di(c.position,r),Mp(c,n)})]),vm(function*([a,l]){for(const c of mu(a,l,e.roomJson))yield[a,l,c]}),Bp(([,,a])=>Ui(a))),s=Array.from(o(t));return fl(Tm(([,a,l])=>{const c=po(ph(e,a.type)).filter(d=>d.jsonItemId&&!t.includes(d.jsonItemId));for(const d of ei(l,c))return console.warn(l.id,"colliding with static item",d.id),!0;for(const d of ei(l,s.map(([f,h,m])=>m)))return console.warn(l.id,"colliding with other mutating item",d.id),!0;return!1}))(s)},VS=({roomState:e,blockPosition:t,itemTool:r})=>{const n=mu("maybeAddedItem",{...r,position:t},e.roomJson).filter(s=>Ui(s)),o=Array.from(ph(e,r.type));return n.some(s=>{const i=ei(s,o);return!xm(i)})},K_=()=>{const e=ze(),t=se(i=>i.levelEditor.selectedJsonItemIds.map(a=>Bi(i.levelEditor).items[a])),r=t.length>0,n=r?Qs(...t.map(i=>Fp(i))):br,o=r?t.map(i=>Up(i)).reduce((i,a)=>({x:Math.max(i.x,a.x),y:Math.max(i.y,a.y),z:Math.max(i.z,a.z)}),ap):br,s=(i=br,a)=>()=>{const l=Ae.getState().levelEditor,c=Hp(Ae.getState()),{gridResolution:d,selectedJsonItemIds:f}=l,h=a?i:Qs(i,{x:d,y:d,z:1});if(G_({roomState:c,jsonItemIds:f,blockPositionDelta:h})){console.warn("nudge would collide");return}e(qp({jsonItemIds:f,positionDelta:h,timesDelta:{...br,...a}})),e(Wp())};return u.jsxs("div",{className:"flex flex-row flex-wrap gap-x-0 gap-y-oneScaledPix items-center mt-1",children:[u.jsx(I,{className:"inline-block mr-1 text-lightGrey leading-none pr-oneScaledPix",noSlitWords:!0,children:"move  "}),u.jsxs("div",{className:"flex flex-row flex-wrap gap-oneScaledPix items-center",children:[u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.left),shortcutKeys:["ArrowLeft"],children:u.jsx(I,{className:"relative leading-none",children:"↖"})}),u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.right),shortcutKeys:["ArrowRight"],children:u.jsx(I,{className:"relative leading-none",children:"↘"})}),u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.away),shortcutKeys:["ArrowUp"],children:u.jsx(I,{className:"relative leading-none",children:"↗"})}),u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.towards),shortcutKeys:["ArrowDown"],children:u.jsx(I,{className:"relative leading-none",children:"↙"})}),u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.up),shortcutKeys:["PageUp"],children:u.jsx(I,{className:"relative leading-none",children:"⬆"})}),u.jsx(te,{small:!0,disabled:!r,onClick:s(Qt.down),shortcutKeys:["PageDown"],children:u.jsx(I,{className:"relative leading-none",children:"⬇"})})]}),u.jsxs("div",{className:"flex flex-row flex-wrap gap-x-0 gap-y-oneScaledPix items-center",children:[u.jsx(I,{className:"inline-block mr-1 text-lightGrey leading-none pr-oneScaledPix",noSlitWords:!0,children:"grow  "}),u.jsxs("div",{className:"flex flex-row flex-wrap gap-oneScaledPix items-center",children:[u.jsx(te,{small:!0,disabled:n.x===0,onClick:s(void 0,{x:1}),shortcutKeys:["⌥ArrowLeft"],children:u.jsx(I,{className:"relative leading-none",children:"↖"})}),u.jsx(te,{small:!0,disabled:n.x===0,onClick:s({x:-1,y:0,z:0},{x:1}),shortcutKeys:["⌥ArrowRight"],children:u.jsx(I,{className:"relative leading-none",children:"↘"})}),u.jsx(te,{small:!0,disabled:n.y===0,onClick:s(void 0,{y:1}),shortcutKeys:["⌥ArrowUp"],children:u.jsx(I,{className:"relative leading-none",children:"↗"})}),u.jsx(te,{small:!0,disabled:n.y===0,onClick:s({x:0,y:-1,z:0},{y:1}),shortcutKeys:["⌥ArrowDown"],children:u.jsx(I,{className:"relative leading-none",children:"↙"})}),u.jsx(te,{small:!0,disabled:n.z===0,onClick:s(void 0,{z:1}),shortcutKeys:["⌥PageUp"],children:u.jsx(I,{className:"relative leading-none",children:"⬆"})}),u.jsx(te,{small:!0,disabled:n.z===0,onClick:s({x:0,y:0,z:-1},{z:1}),shortcutKeys:["⌥PageDown"],children:u.jsx(I,{className:"relative leading-none",children:"⬇"})})]})]}),u.jsxs("div",{className:"flex flex-row flex-wrap gap-x-0 gap-y-oneScaledPix items-center",children:[u.jsx(I,{className:"inline-block mr-1 text-lightGrey leading-none pr-oneScaledPix",noSlitWords:!0,children:"shrink"}),u.jsxs("div",{className:"flex flex-row flex-wrap gap-oneScaledPix items-center",children:[u.jsx(te,{small:!0,disabled:o.x<=1,onClick:s(void 0,{x:-1}),shortcutKeys:["⌥⇧ArrowRight"],children:u.jsx(I,{className:"relative leading-none",children:"↘"})}),u.jsx(te,{small:!0,disabled:o.x<=1,onClick:s({x:1,y:0,z:0},{x:-1}),shortcutKeys:["⌥⇧ArrowLeft"],children:u.jsx(I,{className:"relative leading-none",children:"↖"})}),u.jsx(te,{small:!0,disabled:o.y<=1,onClick:s(void 0,{y:-1}),shortcutKeys:["⌥⇧ArrowDown"],children:u.jsx(I,{className:"relative leading-none",children:"↙"})}),u.jsx(te,{small:!0,disabled:o.y<=1,onClick:s({x:0,y:1,z:0},{y:-1}),shortcutKeys:["⌥⇧ArrowUp"],children:u.jsx(I,{className:"relative leading-none",children:"↗"})}),u.jsx(te,{small:!0,disabled:o.z<=1,onClick:s(void 0,{z:-1}),shortcutKeys:["⌥⇧PageDown"],children:u.jsx(I,{className:"relative leading-none",children:"⬇"})}),u.jsx(te,{small:!0,disabled:o.z<=1,onClick:s({x:0,y:0,z:1},{z:-1}),shortcutKeys:["⌥⇧PageUp"],children:u.jsx(I,{className:"relative leading-none",children:"⬆"})})]})]})]})},V_=`
## Back

Go back to the previous room
`,J_=`
## Forward

The opposite of back
`,X_=()=>{const e=se(({levelEditor:n})=>{const{editingRoomIdHistory:o}=n;return o.back.length>0}),t=se(({levelEditor:n})=>{const{editingRoomIdHistory:o}=n;return o.forward.length>0}),r=ze();return u.jsxs(u.Fragment,{children:[u.jsx(te,{className:"bg-highlightBeige",disabled:!e,onClick:()=>{r(Gp())},shortcutKeys:["⇧<"],tooltipContent:V_,children:u.jsx("span",{className:"sprite texture-hud_char_lt relative"})}),u.jsx(te,{className:"bg-highlightBeige",disabled:!t,onClick:()=>{r(Kp())},shortcutKeys:["⇧>"],tooltipContent:J_,children:u.jsx("span",{className:"sprite texture-hud_char_gt relative"})})]})},Y_=({className:e})=>{const t=ze();return u.jsx(Ar,{className:e,label:"coalesce",value:se(r=>r.levelEditor.autoCoalesce),onChange:r=>{t(Vp(r))},shortcutKeys:["L"],tooltipContent:"optimise blocks into single items while editing, or keep separate?"})},Z_=`
## Share

copies a link to the clipboard

anyone with the link can play your game
`,Q_=()=>{const e=hh(),{doneNow:t,justDone:r}=fh();return r>0?u.jsx(te,{className:"bg-moss",children:u.jsx(I,{className:"relative leading-none",children:"OK!"})}):u.jsx(te,{disabled:!e,onClick:async()=>{const n=new URL("https://blockstack.ing"),o=n.searchParams,{data:{session:s}}=await Gt.auth.getSession(),i=s?.user.id;if(i===void 0)throw new Error("no user id on supabase session");o.set("campaignName","sequel"),o.set("campaignAuthor",i),o.set("noSaves","1"),navigator.clipboard.writeText(n.toString()).then(t)},tooltipContent:Z_,children:u.jsx("span",{className:"sprite sprite-tinted texture-hud_char_ relative"})})},Mn=()=>u.jsx("div",{className:"w-[calc(var(--block)-1px)]"}),ek=()=>{const e=se(n=>n.levelEditor.campaignInProgress),t=se(n=>n.levelEditor.currentlyEditingRoomId),r=ze();return u.jsxs("div",{className:"scale-editor flex w-full h-full text-white bg-metallicBlueHalfbrite pb-1 gap-1 flex-wrap justify-start overflow-auto",children:[u.jsx("div",{className:ve,children:u.jsx(F_,{className:"w-full mb-1"})}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"Campaign"}),u.jsx(L_,{}),u.jsx(Q_,{}),u.jsx(Mn,{}),u.jsx(M_,{})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full pt-1",children:"Room"}),u.jsx(X_,{}),u.jsx(Mn,{}),u.jsx(q_,{}),u.jsx(Mn,{}),u.jsx(vw,{}),u.jsx(Lf,{value:t,campaign:e,onSelect:n=>{r(Fi(n))},triggerButtonClassName:"w-full",tooltipContent:"Choose the room to view/edit"}),u.jsx("div",{className:"h-1 w-full"}),u.jsx(cw,{}),u.jsx(lw,{}),u.jsx("div",{className:"h-half w-full"}),u.jsx(yw,{}),u.jsx(bw,{})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full pt-1",children:"Edit"}),u.jsxs("div",{className:ve,children:[u.jsx(iw,{}),u.jsx(xw,{})]}),u.jsx(hw,{}),u.jsx(Mn,{}),u.jsx(nw,{}),u.jsx(K_,{}),u.jsx("div",{className:"h-1 w-full"}),u.jsxs("div",{className:"flex flex-row justify-between flex-wrap gap-x-2",children:[u.jsx(sw,{}),u.jsx(pw,{}),u.jsx(Y_,{})]})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full pt-1",children:"Blocks"}),u.jsx(L,{itemTool:{type:"block",config:{style:"organic"}},shortcutKeys:["B"],tooltipContent:`## Block 
The basic block`,children:u.jsx("span",{className:`sprite texture-block_organic ${G}`})}),u.jsx(L,{itemTool:{type:"block",config:{style:"organic",disappearing:{on:"stand"}}},shortcutKeys:["⇧B"],tooltipContent:`## Block 
Disappearing basic block`,children:u.jsx(Nn,{iconClassName:Ue("texture-block_organic_disappearing")})}),u.jsx(L,{itemTool:{type:"block",config:{style:"artificial"}},shortcutKeys:["⌥B"],tooltipContent:`## Block 
Basic block with a metallic look`,children:u.jsx("span",{className:`sprite texture-block_artificial ${G}`})}),u.jsx(L,{itemTool:{type:"block",config:{style:"artificial",disappearing:{on:"stand"}}},shortcutKeys:["⌥⇧B"],tooltipContent:`## Block 
Disappearing metallic look block`,children:u.jsx(Nn,{iconClassName:Ue("texture-block_artificial_disappearing")})}),u.jsx(L,{itemTool:{type:"block",config:{style:"tower"}},shortcutKeys:["T"],tooltipContent:`## Tower
Very high block`,children:u.jsx("span",{className:`sprite texture-tower ${G}`})}),u.jsx(L,{itemTool:{type:"block",config:{style:"book"}},children:u.jsx("span",{className:`sprite texture-book_x ${G}`})}),u.jsxs(qr,{children:[u.jsx(L,{itemTool:{type:"barrier",config:{axis:"x"}},children:u.jsx("span",{className:`sprite texture-barrier_x ${G}`})}),u.jsx(L,{itemTool:{type:"barrier",config:{axis:"y"}},children:u.jsx("span",{className:`sprite texture-barrier_y ${G}`})}),u.jsx(L,{itemTool:{type:"barrier",config:{axis:"x",disappearing:{on:"touch"}}},children:u.jsx(Nn,{iconClassName:Ue("texture-barrier_x")})}),u.jsx(L,{itemTool:{type:"barrier",config:{axis:"y",disappearing:{on:"touch"}}},children:u.jsx(Nn,{iconClassName:Ue("texture-barrier_y")})})]})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"Monsters"}),u.jsx(L,{itemTool:{type:"monster",config:{which:"dalek",movement:"patrol-randomly-diagonal",activated:"on"}},tooltipContent:`## mojo
the emperor’s worker bots

patrols randomly in a diagonal pattern`,children:u.jsx("span",{className:`sprite texture-dalek_1 [button:hover_&]:texture-animated-dalek" ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"cyberman",activated:"on",movement:"towards-on-shortest-axis-xy4",startDirection:"towards"}},tooltipContent:`## guard
hovers towards the player on the shortest axis

heels can outrun, but not head

place on a toaster to make a charging guard`,children:u.jsx(at,{topClasses:"texture-cyberman_towards [button:hover_&]:texture-cyberman_right",bottomClasses:"texture-bubbles_cold_2 [button:hover_&]:texture-animated-bubbles_cold"})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"skiHead",style:"greenAndPink",activated:"on",movement:"back-forth",startDirection:"towards"}},tooltipContent:`## monster
moves *back and forth* by default

or can be set to *patrol clockwise*`,children:u.jsx("span",{className:`sprite texture-skiHead_greenAndPink_towards [button:hover_&]:texture-skiHead_greenAndPink_right ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"helicopterBug",activated:"on",movement:"patrol-randomly-xy8"}},children:u.jsx("span",{className:`sprite texture-helicopterBug_1 [button:hover_&]:texture-animated-helicopterBug ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"turtle",activated:"on",movement:"clockwise",startDirection:"towards"}},tooltipContent:`## turtle
plods along in a clockwise pattern`,children:u.jsx("span",{className:`sprite texture-turtle_towards_1 [button:hover_&]:texture-animated-turtle_right ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"homingBot",activated:"on",movement:"towards-tripped-on-axis-xy4"}},tooltipContent:`## homing bot
detects a player in a straight line on an axis and rushes towards them`,children:u.jsx("span",{className:`sprite texture-headlessBase [button:hover_&]:texture-headlessBase_all ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"computerBot",activated:"on",movement:"patrol-randomly-xy4-and-reverse"}},tooltipContent:`## Computer bot
usually patrols randomly, but can be programmed to move towards the player`,children:u.jsx(at,{topClasses:"texture-computerBot_towards [button:hover_&]:texture-computerBot_right"})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"bubbleRobot",activated:"on",movement:"patrol-randomly-xy8"}},tooltipContent:`## Bubble bot
patrols randomly in 8 directions

fast and dangerous`,children:u.jsx(at,{topClasses:Ue("texture-bubbles_cold_2 [button:hover_&]:texture-animated-bubbles_cold"),bottomClasses:Ue("texture-headlessBase")})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"monkey",activated:"on",movement:"patrol-randomly-xy4"}},children:u.jsx(at,{topClasses:"texture-monkey_towards [button:hover_&]:texture-monkey_right"})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"elephant",activated:"on",movement:"patrol-randomly-xy4"}},children:u.jsx(at,{topClasses:"texture-elephant_towards [button:hover_&]:texture-elephant_right"})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"elephantHead",activated:"on",movement:"turn-to-player",startDirection:"towards"}},tooltipContent:`## Elephant head
Things have gone weird

Stationary, but deadly`,children:u.jsx("span",{className:`sprite texture-elephant_towards [button:hover_&]:texture-elephant_right ${G}`})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"emperorsGuardian",activated:"while-player-near",movement:"towards-analogue-unless-planet-crowns"}},className:"inline relative",tooltipContent:`## Emperor's Guardian

very dangerous

moves towards the player, unless they have all four planet crowns

does not *like doughnuts*
`,children:u.jsx(at,{topClasses:"texture-ball",bottomClasses:"texture-bubbles_cold_2 [button:hover_&]:texture-animated-bubbles_cold"})}),u.jsx(L,{itemTool:{type:"monster",config:{which:"emperor",activated:"while-player-near",movement:"towards-analogue"}},tooltipContent:`## Emperor
The end boss, usually found guarding his Blacktooth crown`,children:u.jsx("span",{className:`sprite texture-bubbles_cold_2 [button:hover_&]:texture-animated-bubbles_cold ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"Pickups"}),u.jsxs(qr,{children:[u.jsx(L,{itemTool:{type:"pickup",config:{gives:"extra-life"}},children:u.jsx(it,{iconClasses:"texture-whiteRabbit",text:"2"})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"shield"}},children:u.jsx(it,{iconClasses:"texture-whiteRabbit",text:"🛡"})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"jumps"}},children:u.jsx(it,{iconClasses:"texture-whiteRabbit",text:"♨"})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"fast"}},children:u.jsx(it,{iconClasses:"texture-whiteRabbit",text:"⚡"})})]}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"bag"}},children:u.jsx("span",{className:`sprite texture-bag ${G}`})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"hooter"}},tooltipContent:`## hooter

head's doughnut firing hooter`,children:u.jsx("span",{className:`sprite texture-hooter ${G}`})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"doughnuts"}},children:u.jsx("span",{className:`sprite texture-doughnuts ${G}`})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"reincarnation"}},children:u.jsx("span",{className:`sprite texture-fish_1 [button:hover_&]:texture-animated-fish ${G}`})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"crown",planet:"blacktooth"}},children:u.jsx("span",{className:`sprite texture-crown_blacktooth ${G}`})}),u.jsx(L,{itemTool:{type:"pickup",config:{gives:"scroll",source:"inline",markdown:`#Write me

TODO: Put content here`}},children:u.jsx("span",{className:`sprite texture-scroll ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"deadly"}),u.jsxs(qr,{children:[u.jsx(L,{itemTool:{type:"deadlyBlock",config:{style:"volcano"}},tooltipContent:"## Volcano",shortcutKeys:["V"],children:u.jsx("span",{className:`sprite texture-volcano_1 [button:hover_&]:texture-animated-volcano ${G}`})}),u.jsx(L,{itemTool:{type:"deadlyBlock",config:{style:"toaster"}},tooltipContent:`## Toaster

charging stations for the Emperor's Guardians`,children:u.jsx("span",{className:`sprite texture-toaster_off ${G}`})})]}),u.jsx(L,{itemTool:{type:"slidingDeadly",config:{style:"spikyBall",startingPhase:1}},tooltipContent:`## Spiky ball
rolls fast if pushed

deadly to touch`,children:u.jsx("span",{className:`sprite texture-spikyBall_1 [button:hover_&]:texture-spikyBall_2 ${G}`})}),u.jsx(L,{itemTool:{type:"spikes",config:He},tooltipContent:`## spikes

deadly to touch on top

safe to run into the sides`,children:u.jsx("span",{className:`sprite texture-spikes ${G}`})}),u.jsx(L,{itemTool:{type:"moveableDeadly",config:{style:"deadFish"}},tooltipContent:`## dead fish

(deadly to touch)

dead fish decompose very quickly and it rapidly
turns so poisonous that a single lick can kill`,children:u.jsx("span",{className:`sprite texture-fish_1 ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"control"}),u.jsx(L,{itemTool:{type:"charles",config:He},children:u.jsx(at,{topClasses:"texture-charles_towards [button:hover_&]:texture-charles_right"})}),u.jsx(L,{itemTool:{type:"joystick",config:{controls:["charles"]}},tooltipContent:`## Joystick
Controls one or more Charles bots

Change *which* Charles in the json`,children:u.jsx("span",{className:`sprite texture-joystick ${G}`})}),u.jsx(L,{itemTool:{type:"switch",config:{initialSetting:"left",type:"in-room",modifies:lp}},tooltipContent:`## Switch
toggles when touched.

edit the json to choose:

* de/activate monsters
* turn on/off moving platforms
* make blocks disappear on touch`,children:u.jsx("span",{className:`sprite texture-switch_left [button:hover_&]:texture-switch_right ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"movable"}),u.jsx(L,{itemTool:{type:"spring",config:{}},children:u.jsx("span",{className:`sprite texture-spring_released [button:hover_&]:texture-spring_compressed ${G}`})}),u.jsxs(qr,{children:[u.jsx(L,{itemTool:{type:"portableBlock",config:{style:"cube"}},children:u.jsx("span",{className:`sprite texture-cube ${G}`})}),u.jsx(L,{itemTool:{type:"portableBlock",config:{style:"drum"}},children:u.jsx("span",{className:`sprite texture-drum ${G}`})}),u.jsx(L,{itemTool:{type:"portableBlock",config:{style:"sticks"}},children:u.jsx("span",{className:`sprite texture-sticks ${G}`})})]}),u.jsx(L,{itemTool:{type:"pushableBlock",config:{}},children:u.jsx("span",{className:`sprite texture-stepStool ${G}`})}),u.jsx(L,{itemTool:{type:"ball",config:He},children:u.jsx("span",{className:`sprite texture-ball ${G}`})}),u.jsx(L,{itemTool:{type:"slidingBlock",config:{style:"puck"}},tooltipContent:`## Sliding puck

Small item that can be stood on and slides when touched`,children:u.jsx("span",{className:`sprite texture-puck ${G}`})}),u.jsx(L,{itemTool:{type:"slidingBlock",config:{style:"book"}},tooltipContent:`## Sliding book

Why are the books slippery?`,children:u.jsx("span",{className:`sprite texture-book_y ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"misc."}),u.jsxs(L,{itemTool:{type:"lift",config:{top:11,bottom:0}},className:"inline relative",children:[u.jsx("span",{className:`sprite inline-block absolute top-0 left-0 texture-lift_static ${G} [button:active_&]:top-oneScaledPix`}),u.jsx("span",{className:`sprite inline-block absolute top-0 left-0 texture-lift_1 [button:hover_&]:texture-animated-lift ${G} [button:active_&]:top-oneScaledPix`})]}),u.jsxs(qr,{children:[u.jsx(L,{itemTool:{type:"conveyor",config:{direction:"away"}},children:u.jsx(it,{iconClasses:"texture-conveyor_y_1 [button:hover_&]:texture-animated-conveyor_y",text:"↗"})}),u.jsx(L,{itemTool:{type:"conveyor",config:{direction:"towards"}},children:u.jsx(it,{iconClasses:"texture-conveyor_y_1 [button:hover_&]:texture-animated-reversed-conveyor_y",text:"↙"})}),u.jsx(L,{itemTool:{type:"conveyor",config:{direction:"left"}},children:u.jsx(it,{iconClasses:"texture-conveyor_x_1 [button:hover_&]:texture-animated-conveyor_x",text:"↖"})}),u.jsx(L,{itemTool:{type:"conveyor",config:{direction:"right"}},children:u.jsx(it,{iconClasses:"texture-conveyor_x_1 [button:hover_&]:texture-animated-reversed-conveyor_x",text:"↘"})})]}),u.jsx(L,{itemTool:{type:"teleporter",config:{toRoom:"to?",toPosition:br}},children:u.jsx("span",{className:`sprite texture-teleporter ${G}`})}),u.jsx(L,{itemTool:{type:"movingPlatform",config:{movement:"clockwise",activated:"on",startDirection:"towards"}},tooltipContent:`## Moving Platform
Clockwise or back-and-forth

Can be (de)activated by a switch, or touch 

Why a sandwich?`,children:u.jsx("span",{className:`sprite texture-sandwich ${G}`})}),u.jsx(L,{itemTool:{type:"hushPuppy",config:{}},children:u.jsx("span",{className:`sprite texture-hushPuppy ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"Structure"}),u.jsx(mw,{}),u.jsx(gw,{}),u.jsx(L,{itemTool:{type:"floor",config:{floorType:"standable",scenery:"blacktooth",times:{x:1,y:1}}},children:u.jsx("span",{className:`sprite texture-blacktooth_floor ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"Player"}),u.jsx(L,{itemTool:{type:"player",config:{which:"head"}},tooltipContent:`## Head

Place on of these into one room

This is where head will start the game`,children:u.jsx("span",{className:`sprite texture-head_walking_towards_2 [button:hover_&]:texture-animated-head_walking_right ${G}`})}),u.jsx(L,{itemTool:{type:"player",config:{which:"heels"}},tooltipContent:`## Heels

Place on of these into one room

This is where head will start the game`,children:u.jsx("span",{className:`sprite texture-heels_walking_towards_2 [button:hover_&]:texture-animated-heels_walking_right ${G}`})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full",children:"NPC’s"}),u.jsx(L,{itemTool:{type:"sceneryPlayer",config:{which:"head",startDirection:"towards"}},tooltipContent:`##NPC head
Citizens of Freedom

stand around not doing much`,children:u.jsx("span",{className:`sprite texture-head_walking_towards_2 [button:hover_&]:texture-animated-head_walking_right ${G}`})}),u.jsx(L,{itemTool:{type:"sceneryPlayer",config:{which:"heels",startDirection:"towards"}},tooltipContent:`##NPC heels
Citizens of Freedom

stand around not doing much`,children:u.jsx("span",{className:`sprite texture-heels_walking_towards_2 [button:hover_&]:texture-animated-heels_walking_right ${G}`})}),u.jsx(L,{itemTool:{type:"sceneryPlayer",config:{which:"headOverHeels",startDirection:"towards"}},tooltipContent:`##NPC head over heels
Citizens of Freedom

stand around not doing much`,children:u.jsx(at,{topClasses:"texture-head_walking_towards_2 [button:hover_&]:texture-animated-head_walking_right",bottomClasses:"texture-heels_walking_towards_2 [button:hover_&]:texture-animated-heels_walking_right"})})]}),u.jsxs("div",{className:ve,children:[u.jsx(I,{className:"w-full pt-2",children:"debug"}),u.jsx(Zx,{})]})]})},Pc=e=>`res${e[0].toUpperCase()}${e.slice(1)}`,tk=()=>{const e=cp(),t=up(dp);p.useEffect(()=>{document.body.classList.add("overscroll-none","overflow-hidden","select-none",fp())},[]),p.useEffect(()=>{document.body.classList.remove(...Object.keys(hp).map(Pc)),document.body.classList.add(Pc(e)),document.body.classList.toggle("portrait-rot",t)},[e,t])},Oo=p.createContext(null);Oo.displayName="PanelGroupContext";const ue={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Ra=10,Bt=p.useLayoutEffect,Rc=fo.useId,rk=typeof Rc=="function"?Rc:()=>null;let nk=0;function Aa(e=null){const t=rk(),r=p.useRef(e||t||null);return r.current===null&&(r.current=""+nk++),e??r.current}function mh({children:e,className:t="",collapsedSize:r,collapsible:n,defaultSize:o,forwardedRef:s,id:i,maxSize:a,minSize:l,onCollapse:c,onExpand:d,onResize:f,order:h,style:m,tagName:v="div",...g}){const y=p.useContext(Oo);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:b,expandPanel:w,getPanelSize:x,getPanelStyle:_,groupId:C,isPanelCollapsed:S,reevaluatePanelConstraints:k,registerPanel:M,resizePanel:K,unregisterPanel:q}=y,V=Aa(i),O=p.useRef({callbacks:{onCollapse:c,onExpand:d,onResize:f},constraints:{collapsedSize:r,collapsible:n,defaultSize:o,maxSize:a,minSize:l},id:V,idIsFromProps:i!==void 0,order:h});p.useRef({didLogMissingDefaultSizeWarning:!1}),Bt(()=>{const{callbacks:T,constraints:z}=O.current,$={...z};O.current.id=V,O.current.idIsFromProps=i!==void 0,O.current.order=h,T.onCollapse=c,T.onExpand=d,T.onResize=f,z.collapsedSize=r,z.collapsible=n,z.defaultSize=o,z.maxSize=a,z.minSize=l,($.collapsedSize!==z.collapsedSize||$.collapsible!==z.collapsible||$.maxSize!==z.maxSize||$.minSize!==z.minSize)&&k(O.current,$)}),Bt(()=>{const T=O.current;return M(T),()=>{q(T)}},[h,V,M,q]),p.useImperativeHandle(s,()=>({collapse:()=>{b(O.current)},expand:T=>{w(O.current,T)},getId(){return V},getSize(){return x(O.current)},isCollapsed(){return S(O.current)},isExpanded(){return!S(O.current)},resize:T=>{K(O.current,T)}}),[b,w,x,S,V,K]);const B=_(O.current,o);return p.createElement(v,{...g,children:e,className:t,id:V,style:{...B,...m},[ue.groupId]:C,[ue.panel]:"",[ue.panelCollapsible]:n||void 0,[ue.panelId]:V,[ue.panelSize]:parseFloat(""+B.flexGrow).toFixed(1)})}const vr=p.forwardRef((e,t)=>p.createElement(mh,{...e,forwardedRef:t}));mh.displayName="Panel";vr.displayName="forwardRef(Panel)";let Oi=null,Zn=-1,_t=null;function ok(e,t){if(t){const r=(t&xh)!==0,n=(t&wh)!==0,o=(t&_h)!==0,s=(t&kh)!==0;if(r)return o?"se-resize":s?"ne-resize":"e-resize";if(n)return o?"sw-resize":s?"nw-resize":"w-resize";if(o)return"s-resize";if(s)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function sk(){_t!==null&&(document.head.removeChild(_t),Oi=null,_t=null,Zn=-1)}function As(e,t){var r,n;const o=ok(e,t);if(Oi!==o){if(Oi=o,_t===null&&(_t=document.createElement("style"),document.head.appendChild(_t)),Zn>=0){var s;(s=_t.sheet)===null||s===void 0||s.removeRule(Zn)}Zn=(r=(n=_t.sheet)===null||n===void 0?void 0:n.insertRule(`*{cursor: ${o} !important;}`))!==null&&r!==void 0?r:-1}}function gh(e){return e.type==="keydown"}function vh(e){return e.type.startsWith("pointer")}function yh(e){return e.type.startsWith("mouse")}function No(e){if(vh(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(yh(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function ik(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ak(e,t,r){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function lk(e,t){if(e===t)throw new Error("Cannot compare node with itself");const r={a:Oc(e),b:Oc(t)};let n;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;Z(n,"Stacking order can only be calculated for elements with a common ancestor");const o={a:Tc(Ac(r.a)),b:Tc(Ac(r.b))};if(o.a===o.b){const s=n.childNodes,i={a:r.a.at(-1),b:r.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===i.a)return 1;if(l===i.b)return-1}}return Math.sign(o.a-o.b)}const ck=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function uk(e){var t;const r=getComputedStyle((t=bh(e))!==null&&t!==void 0?t:e).display;return r==="flex"||r==="inline-flex"}function dk(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||uk(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ck.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Ac(e){let t=e.length;for(;t--;){const r=e[t];if(Z(r,"Missing node"),dk(r))return r}return null}function Tc(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Oc(e){const t=[];for(;e;)t.push(e),e=bh(e);return t}function bh(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const xh=1,wh=2,_h=4,kh=8,fk=ik()==="coarse";let qe=[],Er=!1,kt=new Map,Io=new Map;const cn=new Set;function hk(e,t,r,n,o){var s;const{ownerDocument:i}=t,a={direction:r,element:t,hitAreaMargins:n,setResizeHandlerState:o},l=(s=kt.get(i))!==null&&s!==void 0?s:0;return kt.set(i,l+1),cn.add(a),co(),function(){var d;Io.delete(e),cn.delete(a);const f=(d=kt.get(i))!==null&&d!==void 0?d:1;if(kt.set(i,f-1),co(),f===1&&kt.delete(i),qe.includes(a)){const h=qe.indexOf(a);h>=0&&qe.splice(h,1),Oa(),o("up",!0,null)}}}function pk(e){const{target:t}=e,{x:r,y:n}=No(e);Er=!0,Ta({target:t,x:r,y:n}),co(),qe.length>0&&(uo("down",e),e.preventDefault(),Sh(t)||e.stopImmediatePropagation())}function Ts(e){const{x:t,y:r}=No(e);if(Er&&e.buttons===0&&(Er=!1,uo("up",e)),!Er){const{target:n}=e;Ta({target:n,x:t,y:r})}uo("move",e),Oa(),qe.length>0&&e.preventDefault()}function Os(e){const{target:t}=e,{x:r,y:n}=No(e);Io.clear(),Er=!1,qe.length>0&&(e.preventDefault(),Sh(t)||e.stopImmediatePropagation()),uo("up",e),Ta({target:t,x:r,y:n}),Oa(),co()}function Sh(e){let t=e;for(;t;){if(t.hasAttribute(ue.resizeHandle))return!0;t=t.parentElement}return!1}function Ta({target:e,x:t,y:r}){qe.splice(0);let n=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(n=e),cn.forEach(o=>{const{element:s,hitAreaMargins:i}=o,a=s.getBoundingClientRect(),{bottom:l,left:c,right:d,top:f}=a,h=fk?i.coarse:i.fine;if(t>=c-h&&t<=d+h&&r>=f-h&&r<=l+h){if(n!==null&&document.contains(n)&&s!==n&&!s.contains(n)&&!n.contains(s)&&lk(n,s)>0){let v=n,g=!1;for(;v&&!v.contains(s);){if(ak(v.getBoundingClientRect(),a)){g=!0;break}v=v.parentElement}if(g)return}qe.push(o)}})}function Ns(e,t){Io.set(e,t)}function Oa(){let e=!1,t=!1;qe.forEach(n=>{const{direction:o}=n;o==="horizontal"?e=!0:t=!0});let r=0;Io.forEach(n=>{r|=n}),e&&t?As("intersection",r):e?As("horizontal",r):t?As("vertical",r):sk()}let Is;function co(){var e;(e=Is)===null||e===void 0||e.abort(),Is=new AbortController;const t={capture:!0,signal:Is.signal};cn.size&&(Er?(qe.length>0&&kt.forEach((r,n)=>{const{body:o}=n;r>0&&(o.addEventListener("contextmenu",Os,t),o.addEventListener("pointerleave",Ts,t),o.addEventListener("pointermove",Ts,t))}),kt.forEach((r,n)=>{const{body:o}=n;o.addEventListener("pointerup",Os,t),o.addEventListener("pointercancel",Os,t)})):kt.forEach((r,n)=>{const{body:o}=n;r>0&&(o.addEventListener("pointerdown",pk,t),o.addEventListener("pointermove",Ts,t))}))}function uo(e,t){cn.forEach(r=>{const{setResizeHandlerState:n}=r,o=qe.includes(r);n(e,o,t)})}function mk(){const[e,t]=p.useState(0);return p.useCallback(()=>t(r=>r+1),[])}function Z(e,t){if(!e)throw console.error(t),Error(t)}function Kt(e,t,r=Ra){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function dt(e,t,r=Ra){return Kt(e,t,r)===0}function Pe(e,t,r){return Kt(e,t,r)===0}function gk(e,t,r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const o=e[n],s=t[n];if(!Pe(o,s,r))return!1}return!0}function xr({panelConstraints:e,panelIndex:t,size:r}){const n=e[t];Z(n!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:o=0,collapsible:s,maxSize:i=100,minSize:a=0}=n;if(Kt(r,a)<0)if(s){const l=(o+a)/2;Kt(r,l)<0?r=o:r=a}else r=a;return r=Math.min(i,r),r=parseFloat(r.toFixed(Ra)),r}function Yr({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:n,prevLayout:o,trigger:s}){if(Pe(e,0))return t;const i=[...t],[a,l]=n;Z(a!=null,"Invalid first pivot index"),Z(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const f=e<0?l:a,h=r[f];Z(h,`Panel constraints not found for index ${f}`);const{collapsedSize:m=0,collapsible:v,minSize:g=0}=h;if(v){const y=t[f];if(Z(y!=null,`Previous layout not found for panel index ${f}`),Pe(y,m)){const b=g-y;Kt(b,Math.abs(e))>0&&(e=e<0?0-b:b)}}}{const f=e<0?a:l,h=r[f];Z(h,`No panel constraints found for index ${f}`);const{collapsedSize:m=0,collapsible:v,minSize:g=0}=h;if(v){const y=t[f];if(Z(y!=null,`Previous layout not found for panel index ${f}`),Pe(y,g)){const b=y-m;Kt(b,Math.abs(e))>0&&(e=e<0?0-b:b)}}}}{const f=e<0?1:-1;let h=e<0?l:a,m=0;for(;;){const g=t[h];Z(g!=null,`Previous layout not found for panel index ${h}`);const b=xr({panelConstraints:r,panelIndex:h,size:100})-g;if(m+=b,h+=f,h<0||h>=r.length)break}const v=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-v:v}{let h=e<0?a:l;for(;h>=0&&h<r.length;){const m=Math.abs(e)-Math.abs(c),v=t[h];Z(v!=null,`Previous layout not found for panel index ${h}`);const g=v-m,y=xr({panelConstraints:r,panelIndex:h,size:g});if(!Pe(v,y)&&(c+=v-y,i[h]=y,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(gk(o,i))return o;{const f=e<0?l:a,h=t[f];Z(h!=null,`Previous layout not found for panel index ${f}`);const m=h+c,v=xr({panelConstraints:r,panelIndex:f,size:m});if(i[f]=v,!Pe(v,m)){let g=m-v,b=e<0?l:a;for(;b>=0&&b<r.length;){const w=i[b];Z(w!=null,`Previous layout not found for panel index ${b}`);const x=w+g,_=xr({panelConstraints:r,panelIndex:b,size:x});if(Pe(w,_)||(g-=_-w,i[b]=_),Pe(g,0))break;e>0?b--:b++}}}const d=i.reduce((f,h)=>h+f,0);return Pe(d,100)?i:o}function vk({layout:e,panelsArray:t,pivotIndices:r}){let n=0,o=100,s=0,i=0;const a=r[0];Z(a!=null,"No pivot index found"),t.forEach((f,h)=>{const{constraints:m}=f,{maxSize:v=100,minSize:g=0}=m;h===a?(n=g,o=v):(s+=g,i+=v)});const l=Math.min(o,100-s),c=Math.max(n,100-i),d=e[a];return{valueMax:l,valueMin:c,valueNow:d}}function un(e,t=document){return Array.from(t.querySelectorAll(`[${ue.resizeHandleId}][data-panel-group-id="${e}"]`))}function Ch(e,t,r=document){const o=un(e,r).findIndex(s=>s.getAttribute(ue.resizeHandleId)===t);return o??null}function Eh(e,t,r){const n=Ch(e,t,r);return n!=null?[n,n+1]:[-1,-1]}function yk(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function jh(e,t=document){if(yk(t)&&t.dataset.panelGroupId==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function $o(e,t=document){const r=t.querySelector(`[${ue.resizeHandleId}="${e}"]`);return r||null}function bk(e,t,r,n=document){var o,s,i,a;const l=$o(t,n),c=un(e,n),d=l?c.indexOf(l):-1,f=(o=(s=r[d])===null||s===void 0?void 0:s.id)!==null&&o!==void 0?o:null,h=(i=(a=r[d+1])===null||a===void 0?void 0:a.id)!==null&&i!==void 0?i:null;return[f,h]}function xk({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:n,panelDataArray:o,panelGroupElement:s,setLayout:i}){p.useRef({didWarnAboutMissingResizeHandle:!1}),Bt(()=>{if(!s)return;const a=un(r,s);for(let l=0;l<o.length-1;l++){const{valueMax:c,valueMin:d,valueNow:f}=vk({layout:n,panelsArray:o,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const m=o[l];Z(m,`No panel data found for index "${l}"`),h.setAttribute("aria-controls",m.id),h.setAttribute("aria-valuemax",""+Math.round(c)),h.setAttribute("aria-valuemin",""+Math.round(d)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[r,n,o,s]),p.useEffect(()=>{if(!s)return;const a=t.current;Z(a,"Eager values not found");const{panelDataArray:l}=a,c=jh(r,s);Z(c!=null,`No group found for id "${r}"`);const d=un(r,s);Z(d,`No resize handles found for group id "${r}"`);const f=d.map(h=>{const m=h.getAttribute(ue.resizeHandleId);Z(m,"Resize handle element has no handle id attribute");const[v,g]=bk(r,m,l,s);if(v==null||g==null)return()=>{};const y=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();const w=l.findIndex(x=>x.id===v);if(w>=0){const x=l[w];Z(x,`No panel data found for index ${w}`);const _=n[w],{collapsedSize:C=0,collapsible:S,minSize:k=0}=x.constraints;if(_!=null&&S){const M=Yr({delta:Pe(_,C)?k-C:C-_,initialLayout:n,panelConstraints:l.map(K=>K.constraints),pivotIndices:Eh(r,m,s),prevLayout:n,trigger:"keyboard"});n!==M&&i(M)}}break}}};return h.addEventListener("keydown",y),()=>{h.removeEventListener("keydown",y)}});return()=>{f.forEach(h=>h())}},[s,e,t,r,n,o,i])}function Nc(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ph(e,t){const r=e==="horizontal",{x:n,y:o}=No(t);return r?n:o}function wk(e,t,r,n,o){const s=r==="horizontal",i=$o(t,o);Z(i,`No resize handle element found for id "${t}"`);const a=i.getAttribute(ue.groupId);Z(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=n;const c=Ph(r,e),d=jh(a,o);Z(d,`No group element found for id "${a}"`);const f=d.getBoundingClientRect(),h=s?f.width:f.height;return(c-l)/h*100}function _k(e,t,r,n,o,s){if(gh(e)){const i=r==="horizontal";let a=0;e.shiftKey?a=100:o!=null?a=o:a=10;let l=0;switch(e.key){case"ArrowDown":l=i?0:a;break;case"ArrowLeft":l=i?-a:0;break;case"ArrowRight":l=i?a:0;break;case"ArrowUp":l=i?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return n==null?0:wk(e,t,r,n,s)}function kk({panelDataArray:e}){const t=Array(e.length),r=e.map(s=>s.constraints);let n=0,o=100;for(let s=0;s<e.length;s++){const i=r[s];Z(i,`Panel constraints not found for index ${s}`);const{defaultSize:a}=i;a!=null&&(n++,t[s]=a,o-=a)}for(let s=0;s<e.length;s++){const i=r[s];Z(i,`Panel constraints not found for index ${s}`);const{defaultSize:a}=i;if(a!=null)continue;const l=e.length-n,c=o/l;n++,t[s]=c,o-=c}return t}function hr(e,t,r){t.forEach((n,o)=>{const s=e[o];Z(s,`Panel data not found for index ${o}`);const{callbacks:i,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:d}=a,f=r[l];if(f==null||n!==f){r[l]=n;const{onCollapse:h,onExpand:m,onResize:v}=i;v&&v(n,f),d&&(h||m)&&(m&&(f==null||dt(f,c))&&!dt(n,c)&&m(),h&&(f==null||!dt(f,c))&&dt(n,c)&&h())}})}function Bn(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function Sk({defaultSize:e,dragState:t,layout:r,panelData:n,panelIndex:o,precision:s=3}){const i=r[o];let a;return i==null?a=e!=null?e.toPrecision(s):"1":n.length===1?a="1":a=i.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Ck(e,t=10){let r=null;return(...o)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...o)},t)}}function Ic(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,r)=>{localStorage.setItem(t,r)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Rh(e){return`react-resizable-panels:${e}`}function Ah(e){return e.map(t=>{const{constraints:r,id:n,idIsFromProps:o,order:s}=t;return o?n:s?`${s}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((t,r)=>t.localeCompare(r)).join(",")}function Th(e,t){try{const r=Rh(e),n=t.getItem(r);if(n){const o=JSON.parse(n);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function Ek(e,t,r){var n,o;const s=(n=Th(e,r))!==null&&n!==void 0?n:{},i=Ah(t);return(o=s[i])!==null&&o!==void 0?o:null}function jk(e,t,r,n,o){var s;const i=Rh(e),a=Ah(t),l=(s=Th(e,o))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{o.setItem(i,JSON.stringify(l))}catch(c){console.error(c)}}function $c({layout:e,panelConstraints:t}){const r=[...e],n=r.reduce((s,i)=>s+i,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(s=>`${s}%`).join(", ")}`);if(!Pe(n,100)&&r.length>0)for(let s=0;s<t.length;s++){const i=r[s];Z(i!=null,`No layout data found for index ${s}`);const a=100/n*i;r[s]=a}let o=0;for(let s=0;s<t.length;s++){const i=r[s];Z(i!=null,`No layout data found for index ${s}`);const a=xr({panelConstraints:t,panelIndex:s,size:i});i!=a&&(o+=i-a,r[s]=a)}if(!Pe(o,0))for(let s=0;s<t.length;s++){const i=r[s];Z(i!=null,`No layout data found for index ${s}`);const a=i+o,l=xr({panelConstraints:t,panelIndex:s,size:a});if(i!==l&&(o-=l-i,r[s]=l,Pe(o,0)))break}return r}const Pk=100,Zr={getItem:e=>(Ic(Zr),Zr.getItem(e)),setItem:(e,t)=>{Ic(Zr),Zr.setItem(e,t)}},zc={};function Oh({autoSaveId:e=null,children:t,className:r="",direction:n,forwardedRef:o,id:s=null,onLayout:i=null,keyboardResizeBy:a=null,storage:l=Zr,style:c,tagName:d="div",...f}){const h=Aa(s),m=p.useRef(null),[v,g]=p.useState(null),[y,b]=p.useState([]),w=mk(),x=p.useRef({}),_=p.useRef(new Map),C=p.useRef(0),S=p.useRef({autoSaveId:e,direction:n,dragState:v,id:h,keyboardResizeBy:a,onLayout:i,storage:l}),k=p.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});p.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),p.useImperativeHandle(o,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:E}=k.current;return E},setLayout:E=>{const{onLayout:A}=S.current,{layout:P,panelDataArray:N}=k.current,R=$c({layout:E,panelConstraints:N.map(F=>F.constraints)});Nc(P,R)||(b(R),k.current.layout=R,A&&A(R),hr(N,R,x.current))}}),[]),Bt(()=>{S.current.autoSaveId=e,S.current.direction=n,S.current.dragState=v,S.current.id=h,S.current.onLayout=i,S.current.storage=l}),xk({committedValuesRef:S,eagerValuesRef:k,groupId:h,layout:y,panelDataArray:k.current.panelDataArray,setLayout:b,panelGroupElement:m.current}),p.useEffect(()=>{const{panelDataArray:E}=k.current;if(e){if(y.length===0||y.length!==E.length)return;let A=zc[e];A==null&&(A=Ck(jk,Pk),zc[e]=A);const P=[...E],N=new Map(_.current);A(e,P,N,y,l)}},[e,y,l]),p.useEffect(()=>{});const M=p.useCallback(E=>{const{onLayout:A}=S.current,{layout:P,panelDataArray:N}=k.current;if(E.constraints.collapsible){const R=N.map(be=>be.constraints),{collapsedSize:F=0,panelSize:ee,pivotIndices:oe}=It(N,E,P);if(Z(ee!=null,`Panel size not found for panel "${E.id}"`),!dt(ee,F)){_.current.set(E.id,ee);const xe=yr(N,E)===N.length-1?ee-F:F-ee,ne=Yr({delta:xe,initialLayout:P,panelConstraints:R,pivotIndices:oe,prevLayout:P,trigger:"imperative-api"});Bn(P,ne)||(b(ne),k.current.layout=ne,A&&A(ne),hr(N,ne,x.current))}}},[]),K=p.useCallback((E,A)=>{const{onLayout:P}=S.current,{layout:N,panelDataArray:R}=k.current;if(E.constraints.collapsible){const F=R.map(De=>De.constraints),{collapsedSize:ee=0,panelSize:oe=0,minSize:be=0,pivotIndices:xe}=It(R,E,N),ne=A??be;if(dt(oe,ee)){const De=_.current.get(E.id),Lr=De!=null&&De>=ne?De:ne,zo=yr(R,E)===R.length-1?oe-Lr:Lr-oe,we=Yr({delta:zo,initialLayout:N,panelConstraints:F,pivotIndices:xe,prevLayout:N,trigger:"imperative-api"});Bn(N,we)||(b(we),k.current.layout=we,P&&P(we),hr(R,we,x.current))}}},[]),q=p.useCallback(E=>{const{layout:A,panelDataArray:P}=k.current,{panelSize:N}=It(P,E,A);return Z(N!=null,`Panel size not found for panel "${E.id}"`),N},[]),V=p.useCallback((E,A)=>{const{panelDataArray:P}=k.current,N=yr(P,E);return Sk({defaultSize:A,dragState:v,layout:y,panelData:P,panelIndex:N})},[v,y]),O=p.useCallback(E=>{const{layout:A,panelDataArray:P}=k.current,{collapsedSize:N=0,collapsible:R,panelSize:F}=It(P,E,A);return Z(F!=null,`Panel size not found for panel "${E.id}"`),R===!0&&dt(F,N)},[]),B=p.useCallback(E=>{const{layout:A,panelDataArray:P}=k.current,{collapsedSize:N=0,collapsible:R,panelSize:F}=It(P,E,A);return Z(F!=null,`Panel size not found for panel "${E.id}"`),!R||Kt(F,N)>0},[]),T=p.useCallback(E=>{const{panelDataArray:A}=k.current;A.push(E),A.sort((P,N)=>{const R=P.order,F=N.order;return R==null&&F==null?0:R==null?-1:F==null?1:R-F}),k.current.panelDataArrayChanged=!0,w()},[w]);Bt(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:E,onLayout:A,storage:P}=S.current,{layout:N,panelDataArray:R}=k.current;let F=null;if(E){const oe=Ek(E,R,P);oe&&(_.current=new Map(Object.entries(oe.expandToSizes)),F=oe.layout)}F==null&&(F=kk({panelDataArray:R}));const ee=$c({layout:F,panelConstraints:R.map(oe=>oe.constraints)});Nc(N,ee)||(b(ee),k.current.layout=ee,A&&A(ee),hr(R,ee,x.current))}}),Bt(()=>{const E=k.current;return()=>{E.layout=[]}},[]);const z=p.useCallback(E=>{let A=!1;const P=m.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(A=!0),function(R){R.preventDefault();const F=m.current;if(!F)return()=>null;const{direction:ee,dragState:oe,id:be,keyboardResizeBy:xe,onLayout:ne}=S.current,{layout:De,panelDataArray:Lr}=k.current,{initialLayout:bn}=oe??{},zo=Eh(be,E,F);let we=_k(R,E,ee,oe,xe,F);const $a=ee==="horizontal";$a&&A&&(we=-we);const Fh=Lr.map(Uh=>Uh.constraints),Mr=Yr({delta:we,initialLayout:bn??De,panelConstraints:Fh,pivotIndices:zo,prevLayout:De,trigger:gh(R)?"keyboard":"mouse-or-touch"}),za=!Bn(De,Mr);(vh(R)||yh(R))&&C.current!=we&&(C.current=we,!za&&we!==0?$a?Ns(E,we<0?xh:wh):Ns(E,we<0?_h:kh):Ns(E,0)),za&&(b(Mr),k.current.layout=Mr,ne&&ne(Mr),hr(Lr,Mr,x.current))}},[]),$=p.useCallback((E,A)=>{const{onLayout:P}=S.current,{layout:N,panelDataArray:R}=k.current,F=R.map(De=>De.constraints),{panelSize:ee,pivotIndices:oe}=It(R,E,N);Z(ee!=null,`Panel size not found for panel "${E.id}"`);const xe=yr(R,E)===R.length-1?ee-A:A-ee,ne=Yr({delta:xe,initialLayout:N,panelConstraints:F,pivotIndices:oe,prevLayout:N,trigger:"imperative-api"});Bn(N,ne)||(b(ne),k.current.layout=ne,P&&P(ne),hr(R,ne,x.current))},[]),W=p.useCallback((E,A)=>{const{layout:P,panelDataArray:N}=k.current,{collapsedSize:R=0,collapsible:F}=A,{collapsedSize:ee=0,collapsible:oe,maxSize:be=100,minSize:xe=0}=E.constraints,{panelSize:ne}=It(N,E,P);ne!=null&&(F&&oe&&dt(ne,R)?dt(R,ee)||$(E,ee):ne<xe?$(E,xe):ne>be&&$(E,be))},[$]),D=p.useCallback((E,A)=>{const{direction:P}=S.current,{layout:N}=k.current;if(!m.current)return;const R=$o(E,m.current);Z(R,`Drag handle element not found for id "${E}"`);const F=Ph(P,A);g({dragHandleId:E,dragHandleRect:R.getBoundingClientRect(),initialCursorPosition:F,initialLayout:N})},[]),J=p.useCallback(()=>{g(null)},[]),Q=p.useCallback(E=>{const{panelDataArray:A}=k.current,P=yr(A,E);P>=0&&(A.splice(P,1),delete x.current[E.id],k.current.panelDataArrayChanged=!0,w())},[w]),ie=p.useMemo(()=>({collapsePanel:M,direction:n,dragState:v,expandPanel:K,getPanelSize:q,getPanelStyle:V,groupId:h,isPanelCollapsed:O,isPanelExpanded:B,reevaluatePanelConstraints:W,registerPanel:T,registerResizeHandle:z,resizePanel:$,startDragging:D,stopDragging:J,unregisterPanel:Q,panelGroupElement:m.current}),[M,v,n,K,q,V,h,O,B,W,T,z,$,D,J,Q]),j={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return p.createElement(Oo.Provider,{value:ie},p.createElement(d,{...f,children:t,className:r,id:s,ref:m,style:{...j,...c},[ue.group]:"",[ue.groupDirection]:n,[ue.groupId]:h}))}const Ni=p.forwardRef((e,t)=>p.createElement(Oh,{...e,forwardedRef:t}));Oh.displayName="PanelGroup";Ni.displayName="forwardRef(PanelGroup)";function yr(e,t){return e.findIndex(r=>r===t||r.id===t.id)}function It(e,t,r){const n=yr(e,t),s=n===e.length-1?[n-1,n]:[n,n+1],i=r[n];return{...t.constraints,panelSize:i,pivotIndices:s}}function Rk({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:n}){p.useEffect(()=>{if(e||r==null||n==null)return;const o=$o(t,n);if(o==null)return;const s=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),r(i);break}case"F6":{i.preventDefault();const a=o.getAttribute(ue.groupId);Z(a,`No group element found for id "${a}"`);const l=un(a,n),c=Ch(a,t,n);Z(c!==null,`No resize element found for id "${t}"`);const d=i.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[d].focus();break}}};return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}},[n,e,t,r])}function Qn({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:n,id:o,onBlur:s,onClick:i,onDragging:a,onFocus:l,onPointerDown:c,onPointerUp:d,style:f={},tabIndex:h=0,tagName:m="div",...v}){var g,y;const b=p.useRef(null),w=p.useRef({onClick:i,onDragging:a,onPointerDown:c,onPointerUp:d});p.useEffect(()=>{w.current.onClick=i,w.current.onDragging=a,w.current.onPointerDown=c,w.current.onPointerUp=d});const x=p.useContext(Oo);if(x===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:_,groupId:C,registerResizeHandle:S,startDragging:k,stopDragging:M,panelGroupElement:K}=x,q=Aa(o),[V,O]=p.useState("inactive"),[B,T]=p.useState(!1),[z,$]=p.useState(null),W=p.useRef({state:V});Bt(()=>{W.current.state=V}),p.useEffect(()=>{if(r)$(null);else{const ie=S(q);$(()=>ie)}},[r,q,S]);const D=(g=n?.coarse)!==null&&g!==void 0?g:15,J=(y=n?.fine)!==null&&y!==void 0?y:5;p.useEffect(()=>{if(r||z==null)return;const ie=b.current;Z(ie,"Element ref not attached");let j=!1;return hk(q,ie,_,{coarse:D,fine:J},(A,P,N)=>{if(!P){O("inactive");return}switch(A){case"down":{O("drag"),j=!1,Z(N,'Expected event to be defined for "down" action'),k(q,N);const{onDragging:R,onPointerDown:F}=w.current;R?.(!0),F?.();break}case"move":{const{state:R}=W.current;j=!0,R!=="drag"&&O("hover"),Z(N,'Expected event to be defined for "move" action'),z(N);break}case"up":{O("hover"),M();const{onClick:R,onDragging:F,onPointerUp:ee}=w.current;F?.(!1),ee?.(),j||R?.();break}}})},[D,_,r,J,S,q,z,k,M]),Rk({disabled:r,handleId:q,resizeHandler:z,panelGroupElement:K});const Q={touchAction:"none",userSelect:"none"};return p.createElement(m,{...v,children:e,className:t,id:o,onBlur:()=>{T(!1),s?.()},onFocus:()=>{T(!0),l?.()},ref:b,role:"separator",style:{...Q,...f},tabIndex:h,[ue.groupDirection]:_,[ue.groupId]:C,[ue.resizeHandle]:"",[ue.resizeHandleActive]:V==="drag"?"pointer":B?"keyboard":void 0,[ue.resizeHandleEnabled]:!r,[ue.resizeHandleId]:q,[ue.resizeHandleState]:V})}Qn.displayName="PanelResizeHandle";const Ak=uu(()=>Jt(()=>import("./JsonRoomEditor-DB18mj2l.js").then(e=>e.J),__vite__mapDeps([0,1,2,3,4]))),Tk=p.lazy(Ak),Ok=uu(()=>Jt(()=>import("./RoomEditingArea-DsslEwRd.js").then(e=>e.b),__vite__mapDeps([5,1,2,3,6]))),Nk=p.lazy(Ok);var $s,Dc;function Na(){if(Dc)return $s;Dc=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return $s=e,$s}var zs,Lc;function Ik(){if(Lc)return zs;Lc=1;var e=typeof xn=="object"&&xn&&xn.Object===Object&&xn;return zs=e,zs}var Ds,Mc;function Nh(){if(Mc)return Ds;Mc=1;var e=Ik(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ds=r,Ds}var Ls,Bc;function $k(){if(Bc)return Ls;Bc=1;var e=Nh(),t=function(){return e.Date.now()};return Ls=t,Ls}var Ms,Fc;function zk(){if(Fc)return Ms;Fc=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Ms=t,Ms}var Bs,Uc;function Dk(){if(Uc)return Bs;Uc=1;var e=zk(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Bs=r,Bs}var Fs,Hc;function Ih(){if(Hc)return Fs;Hc=1;var e=Nh(),t=e.Symbol;return Fs=t,Fs}var Us,qc;function Lk(){if(qc)return Us;qc=1;var e=Ih(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,o=e?e.toStringTag:void 0;function s(i){var a=r.call(i,o),l=i[o];try{i[o]=void 0;var c=!0}catch{}var d=n.call(i);return c&&(a?i[o]=l:delete i[o]),d}return Us=s,Us}var Hs,Wc;function Mk(){if(Wc)return Hs;Wc=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Hs=r,Hs}var qs,Gc;function Bk(){if(Gc)return qs;Gc=1;var e=Ih(),t=Lk(),r=Mk(),n="[object Null]",o="[object Undefined]",s=e?e.toStringTag:void 0;function i(a){return a==null?a===void 0?o:n:s&&s in Object(a)?t(a):r(a)}return qs=i,qs}var Ws,Kc;function Fk(){if(Kc)return Ws;Kc=1;function e(t){return t!=null&&typeof t=="object"}return Ws=e,Ws}var Gs,Vc;function Uk(){if(Vc)return Gs;Vc=1;var e=Bk(),t=Fk(),r="[object Symbol]";function n(o){return typeof o=="symbol"||t(o)&&e(o)==r}return Gs=n,Gs}var Ks,Jc;function Hk(){if(Jc)return Ks;Jc=1;var e=Dk(),t=Na(),r=Uk(),n=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;function l(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=t(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=e(c);var f=s.test(c);return f||i.test(c)?a(c.slice(2),f?2:8):o.test(c)?n:+c}return Ks=l,Ks}var Vs,Xc;function $h(){if(Xc)return Vs;Xc=1;var e=Na(),t=$k(),r=Hk(),n="Expected a function",o=Math.max,s=Math.min;function i(a,l,c){var d,f,h,m,v,g,y=0,b=!1,w=!1,x=!0;if(typeof a!="function")throw new TypeError(n);l=r(l)||0,e(c)&&(b=!!c.leading,w="maxWait"in c,h=w?o(r(c.maxWait)||0,l):h,x="trailing"in c?!!c.trailing:x);function _(B){var T=d,z=f;return d=f=void 0,y=B,m=a.apply(z,T),m}function C(B){return y=B,v=setTimeout(M,l),b?_(B):m}function S(B){var T=B-g,z=B-y,$=l-T;return w?s($,h-z):$}function k(B){var T=B-g,z=B-y;return g===void 0||T>=l||T<0||w&&z>=h}function M(){var B=t();if(k(B))return K(B);v=setTimeout(M,S(B))}function K(B){return v=void 0,x&&d?_(B):(d=f=void 0,m)}function q(){v!==void 0&&clearTimeout(v),y=0,d=g=f=v=void 0}function V(){return v===void 0?m:K(t())}function O(){var B=t(),T=k(B);if(d=arguments,f=this,g=B,T){if(v===void 0)return C(g);if(w)return clearTimeout(v),v=setTimeout(M,l),_(g)}return v===void 0&&(v=setTimeout(M,l)),m}return O.cancel=q,O.flush=V,O}return Vs=i,Vs}var qk=$h();const Wk=Ke(qk);var Js,Yc;function Gk(){if(Yc)return Js;Yc=1;var e=$h(),t=Na(),r="Expected a function";function n(o,s,i){var a=!0,l=!0;if(typeof o!="function")throw new TypeError(r);return t(i)&&(a="leading"in i?!!i.leading:a,l="trailing"in i?!!i.trailing:l),e(o,s,{leading:a,maxWait:s,trailing:l})}return Js=n,Js}var Kk=Gk();const Vk=Ke(Kk),Jk=(e,t,r,n)=>{switch(t){case"debounce":return Wk(e,r,n);case"throttle":return Vk(e,r,n);default:return e}},Xk=e=>{const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])},Yk=e=>{const[t,r]=p.useState(e?.current||null);return e&&setTimeout(()=>{e.current!==t&&r(e.current)},0),{refProxy:p.useMemo(()=>new Proxy(o=>{o!==t&&r(o)},{get(o,s){return s==="current"?t:o[s]},set(o,s,i){return s==="current"?r(i):o[s]=i,!0}}),[t]),refElement:t,setRefElement:r}},Zk=(e,t)=>t==="border-box"?{width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize}:t==="content-box"?{width:e.contentBoxSize[0].inlineSize,height:e.contentBoxSize[0].blockSize}:{width:e.contentRect.width,height:e.contentRect.height};function Qk({skipOnMount:e=!1,refreshMode:t,refreshRate:r=1e3,refreshOptions:n,handleWidth:o=!0,handleHeight:s=!0,targetRef:i,observerOptions:a,onResize:l}={}){const c=p.useRef(e),d=Xk(l),[f,h]=p.useState({width:void 0,height:void 0}),{refProxy:m,refElement:v}=Yk(i),{box:g}=a||{},y=p.useCallback(w=>{if(!o&&!s)return;if(c.current){c.current=!1;return}const x=(_,C)=>o&&_.width!==C.width||s&&_.height!==C.height;w.forEach(_=>{const C=Zk(_,g);h(S=>x(S,C)?(d?.({width:C.width,height:C.height,entry:_}),C):S)})},[o,s,c,g]),b=p.useCallback(Jk(y,t,r,n),[y,t,r,n]);return p.useEffect(()=>{let w;return v?(w=new window.ResizeObserver(b),w.observe(v,a)):(f.width||f.height)&&(d?.({width:null,height:null,entry:null}),h({width:void 0,height:void 0})),()=>{var x,_,C;(x=w?.disconnect)===null||x===void 0||x.call(w),(C=(_=b).cancel)===null||C===void 0||C.call(_)}},[b,v]),Object.assign({ref:m},f)}const H=48,ft=36,dn=.55,Ce=H*((1-dn)/2),Se=H-Ce,fn=8,wr=128,Or=e=>Math.round(e*10)/10,Ia=e=>{const t=Te(e);return`translate(${Or(t.x)},${Or(t.y)})`},U=e=>{const t=Te(e);return je(t)},je=e=>`${Or(e.x)},${Or(e.y)}`,eS=({facingXy8:e,character:t,action:r})=>{switch(t){case"head":{switch(r){case"walking":switch(e){case"away":return"texture-animated-head_walking_away";case"towards":return"texture-animated-head_walking_towards";case"left":return"texture-animated-head_walking_left";case"right":return"texture-animated-head_walking_right";case"awayRight":return"texture-animated-head_walking_awayRight";case"towardsRight":return"texture-animated-head_walking_towardsRight";case"towardsLeft":return"texture-animated-head_walking_towardsLeft";case"awayLeft":return"texture-animated-head_walking_awayLeft";default:throw new Error(`Invalid facingXy8: ${e}`)}case"idle":switch(e){case"towards":return"texture-animated-head_idle_towards";case"right":return"texture-animated-head_idle_right";case"awayRight":return"texture-animated-head_idle_awayRight";case"towardsRight":return"texture-animated-head_idle_towardsRight";case"towardsLeft":return"texture-animated-head_idle_towardsLeft";case"away":return"texture-head_walking_away_2";case"left":return"texture-head_walking_left_2";case"awayLeft":return"texture-head_walking_awayLeft_2";default:throw new Error(`Invalid facingXy8: ${e}`)}}break}case"heels":{switch(r){case"walking":switch(e){case"away":return"texture-animated-heels_walking_away";case"towards":return"texture-animated-heels_walking_towards";case"left":return"texture-animated-heels_walking_left";case"right":return"texture-animated-heels_walking_right";case"awayRight":return"texture-animated-heels_walking_awayRight";case"towardsRight":return"texture-animated-heels_walking_towardsRight";case"towardsLeft":return"texture-animated-heels_walking_towardsLeft";case"awayLeft":return"texture-animated-heels_walking_awayLeft";default:throw new Error(`Invalid facingXy8: ${e}`)}case"idle":switch(e){case"towards":return"texture-heels_walking_towards_2";case"right":return"texture-heels_walking_right_2";case"awayRight":return"texture-heels_walking_awayRight_2";case"towardsRight":return"texture-heels_walking_towardsRight_2";case"towardsLeft":return"texture-heels_walking_towardsLeft_2";case"away":return"texture-heels_walking_away_2";case"left":return"texture-heels_walking_left_2";case"awayLeft":return"texture-heels_walking_awayLeft_2";default:throw new Error(`Invalid facingXy8: ${e}`)}}break}}},tS=()=>{const e=p.useRef(null);return p.useLayoutEffect(()=>{e.current?.scrollIntoView({behavior:"instant",block:"center"})}),u.jsx("div",{ref:e})},eo=({className:e,scrollTo:t=!1,onClick:r,yAdjust:n=0})=>u.jsxs("foreignObject",{x:-50,y:-100+n,width:100,height:100,className:e,style:{pointerEvents:"none"},children:[u.jsx("div",{className:`sprite zx:sprite-revert-to-two-tone ml-[calc(50px-var(--scale)*var(--w)/2)] mt-[calc(100px-var(--scale)*var(--h))] ${e}`,onClick:r,style:r?{pointerEvents:"all"}:{}}),t&&u.jsx(tS,{})]}),Qr=({characterName:e,facing:t,isCurrent:r=!1,onlyPlayableInRoom:n=!1,yAdjust:o=0,onClick:s})=>u.jsx(eo,{className:`${n?"[--scale:2.5]":"[--scale:1.5]"}
                ${eS({character:e,action:r?"walking":"idle",facingXy8:pp(t)??"towards"})}`,scrollTo:r,yAdjust:o,onClick:i=>{s?.(e),i.preventDefault(),i.stopPropagation()}}),rS=({item:e})=>{const r=e.type==="hushPuppy"||e.type==="teleporter"?"[--scale:1.25]":"[--scale:1.5]";if(e.type==="lift")return u.jsxs(u.Fragment,{children:[u.jsx(eo,{className:`${r} texture-lift_static`}),u.jsx(eo,{className:`${r} texture-lift_2`})]});const n=e.type==="teleporter"?"texture-teleporter":e.type==="hushPuppy"?"texture-hushPuppy":e.config.gives==="extra-life"||e.config.gives==="fast"||e.config.gives==="jumps"||e.config.gives==="shield"?"texture-whiteRabbit":e.config.gives==="doughnuts"?"texture-doughnuts":e.config.gives==="hooter"?"texture-hooter":e.config.gives==="bag"?"texture-bag":e.config.gives==="reincarnation"?"texture-animated-fish":e.config.gives==="crown"?e.config.planet==="blacktooth"?"texture-crown_blacktooth":e.config.planet==="egyptus"?"texture-crown_egyptus":e.config.planet==="penitentiary"?"texture-crown_penitentiary":e.config.planet==="safari"?"texture-crown_safari":e.config.planet==="bookworld"?"texture-crown_bookworld":"texture-crown_dark":"texture-block_organic";return u.jsx(eo,{className:`${r} ${n}`})},nS=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:0,y:.5},{x:.5,y:.5},{x:1,y:.5},{x:0,y:1},{x:.5,y:1},{x:1,y:1}],oS=({x:e,y:t},{x:r,y:n})=>(e-r)**2+(t-n)**2,sS=(e,t)=>{const r=e%3,n=Math.floor(e/3),o=t%3,s=Math.floor(t/3);return Math.abs(r-o)<=1&&Math.abs(n-s)<=1&&e!==t},Zc=e=>e.some((t,r)=>e.slice(r+1).some(n=>sS(t,n))),rn=(e,t)=>{if(t===0)return[[]];if(e.length<t)return[];const[r,...n]=e;return[...rn(n,t),...rn(n,t-1).map(o=>[r,...o])]},zh=e=>e.length<=1?[e]:e.flatMap((t,r)=>zh([...e.slice(0,r),...e.slice(r+1)]).map(n=>[t,...n])),Qc={1:rn([...Array(9).keys()],1),2:rn([...Array(9).keys()],2).filter(e=>!Zc(e)),3:rn([...Array(9).keys()],3).filter(e=>!Zc(e))},Ii=3,Dh=({items:e,itemNormalisedPosition:t})=>{const r=Li(e),n=r.length;if(n===0)return He;if(n>Ii)throw new Error(`roomItemPositions supports up to ${Ii} items, but got ${n}: ${Object.keys(e).join(", ")}`);const o=r.map(([a,l])=>({id:a,pos:t(l)}));let s=He,i=1/0;if(Qc[n]===void 0)throw new Error(`no precomputed valid grid index combinations for count ${n}`);for(const a of Qc[n]){const l=a.map(c=>nS[c]);for(const c of zh(l)){const d={};let f=0;for(let h=0;h<n;h++){const{id:m,pos:v}=o[h],g=c[h];d[m]=g,f+=oS(v,g)}f<i&&(i=f,s=d)}}return s},iS={x:1,y:1,z:1},eu=e=>Di(e.state.position,du(e.aabb,.5)),tu=(e,t,r)=>t===r?e===t?.5:e>t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:(e-t)/(r-t),Lh=({items:e,positions:t,ItemComponent:r})=>u.jsx("g",{"data-class":"items",children:Li(t).sort(([n,o],[s,i])=>i.y-o.y+(i.x-o.x)).map(([n,o])=>u.jsx("g",{"data-position":JSON.stringify(o),transform:`${Ia(mp(o,H*.5))} translate(0,-3)`,children:u.jsx(r,{item:e[n]})},n))}),aS=(e,t)=>{if(e==="*"){const r=gu(t);if(r===void 0)throw new Error(`no floors in room ${t.id} when trying to get start and end for subroom ${e}`);return r}else{if(!t.meta?.subRooms)throw new Error(`no subrooms in ${t.id} when trying to get start and end for subroom ${e}`);return t.meta.subRooms[e].physicalPosition}},lS=({items:e,roomJson:t,subRoomId:r})=>{const n=p.useMemo(()=>Dh({items:e,itemNormalisedPosition:s=>{const i={...s.config.times??He,...iS},a=Mi(s.position,du(i,.5)),l=aS(r,t);return{x:(a.x-l.from.x)/(l.to.x-l.from.x),y:(a.y-l.from.y)/(l.to.y-l.from.y)}}}),[e,t,r]);return u.jsx(Lh,{ItemComponent:rS,items:e,positions:n})},cS=({headItemInRoom:e,heelsItemInRoom:t,roomJson:r,currentCharacterName:n,onClick:o})=>{const s=p.useMemo(()=>({item:{type:l,state:{facing:c}}})=>u.jsx(Qr,{characterName:l,facing:c,isCurrent:n===l,onlyPlayableInRoom:!1,onClick:o}),[n,o]),i=p.useMemo(()=>({head:e,heels:t}),[e,t]),a=p.useMemo(()=>Dh({items:i,itemNormalisedPosition:c=>{const d=eu(c),f=Qs(eu(c),{x:1/La.w,y:1/La.d,z:1}),h=gu(r);if(h===void 0)throw new Error(`no floors in room ${r.id} when trying to get item position`);return{x:tu(f.x,h.from.x,h.to.x),y:tu(d.y,h.from.y,h.to.y)}}}),[i,r]);return u.jsx(Lh,{ItemComponent:s,items:i,positions:a})},St={blacktooth:{bgClassName:"fill-redShadow zx:fill-zxGreenDimmed text-lightGrey zx:text-zxWhite",containerClassName:"bg-moss zx:bg-zxGreenDimmed scrollbar-track-moss zx:scrollbar-track-zxGreenDimmed scrollbar-thumb-shadow zx:scrollbar-thumb-zxWhite"},bookworld:{bgClassName:"fill-redShadow zx:fill-zxBlue text-highlightBeige zx:text-zxWhite",containerClassName:"bg-redShadow zx:bg-zxBlue scrollbar-track-redShadow zx:scrollbar-track-zxBlue scrollbar-thumb-highlightBeige zx:scrollbar-thumb-zxWhite"},jail:{bgClassName:"fill-shadow zx:fill-zxBlue text-black zx:text-zxWhite",containerClassName:"bg-shadow zx:bg-zxBlue scrollbar-track-shadow zx:scrollbar-track-zxBlue scrollbar-thumb-lightGrey zx:scrollbar-thumb-zxWhite"},egyptus:{bgClassName:"fill-midRed zx:fill-zxRedDimmed text-highlightBeige zx:text-zxYellow",containerClassName:"bg-midRed zx:bg-zxRedDimmed scrollbar-track-midRed zx:scrollbar-track-zxBlue zx:scrollbar-track-zxRedDimmed scrollbar-thumb-highlightBeige zx:scrollbar-thumb-zxYellow"},moonbase:{bgClassName:"fill-pastelBlue zx:fill-zxBlue text-metallicBlue zx:text-zxWhite",containerClassName:"bg-pastelBlue zx:bg-zxBlue scrollbar-track-pastelBlue zx:scrollbar-track-zxBlue scrollbar-thumb-metallicBlue zx:scrollbar-thumb-zxWhite"},market:{bgClassName:"fill-metallicBlueHalfbrite zx:fill-zxCyan text-highlightBeige zx:text-zxBlack",containerClassName:"bg-metallicBlueHalfbrite zx:bg-zxCyan scrollbar-track-metallicBlueHalfbrite zx:scrollbar-track-zxBlue scrollbar-thumb-highlightBeige zx:scrollbar-thumb-zxBlack"},penitentiary:{bgClassName:"fill-shadow zx:fill-zxBlue text-moss zx:text-zxWhite",containerClassName:"bg-shadow zx:bg-zxBlue scrollbar-track-shadow zx:scrollbar-track-zxBlue scrollbar-thumb-moss zx:scrollbar-thumb-zxWhite"},safari:{bgClassName:"fill-redShadow zx:fill-zxBlue text-moss zx:text-zxWhite",containerClassName:"bg-redShadow zx:bg-zxBlue scrollbar-track-redShadow zx:scrollbar-track-zxBlue scrollbar-thumb-moss zx:scrollbar-thumb-zxWhite"},freedom:{bgClassName:"fill-moss zx:fill-zxGreen text-metallicBlue zx:text-zxBlack",containerClassName:"bg-moss zx:bg-zxGreen scrollbar-track-moss zx:scrollbar-track-zxGreen scrollbar-thumb-moss zx:scrollbar-thumb-zxBlack"}},uS=e=>{switch(e.hue){case"cyan":return"[--roomHintColor:theme(colors.pastelBlue)] [--roomHintColorDarker:theme(colors.pastelBlueHalfbrite)] zx:[--roomHintColor:theme(colors.zxCyan)] zx:[--roomHintColorDarker:theme(colors.zxCyanDimmed)]";case"green":return"[--roomHintColor:theme(colors.moss)] [--roomHintColorDarker:theme(colors.mossHalfbrite)] zx:[--roomHintColor:theme(colors.zxGreen)] zx:[--roomHintColorDarker:theme(colors.zxGreenDimmed)]";case"magenta":return"[--roomHintColor:theme(colors.pink)] [--roomHintColorDarker:theme(colors.pinkHalfbrite)] zx:[--roomHintColor:theme(colors.zxMagenta)] zx:[--roomHintColorDarker:theme(colors.zxMagentaDimmed)]";case"white":return"[--roomHintColor:theme(colors.lightGrey)] [--roomHintColorDarker:theme(colors.lightGreyHalfbrite)] zx:[--roomHintColor:theme(colors.zxWhiteDimmed)] zx:[--roomHintColorDarker:theme(colors.zxBlack)]";case"yellow":return"[--roomHintColor:theme(colors.lightBeige)] [--roomHintColorDarker:theme(colors.highlightBeigeHalfbrite)] zx:[--roomHintColor:theme(colors.zxYellow)] zx:[--roomHintColorDarker:theme(colors.zxYellowDimmed)]";default:throw e.hue,new Error("unknown hue")}},Mh=e=>(e&&St[e])??{bgClassName:"fill-shadow",containerClassName:""},$e=e=>({x:(e.x??0)*H,y:(e.y??0)*H,z:(e.z??0)*ft}),Bh=.15,Fn=Te($e({x:.5,y:.5,z:0})),ru=Te($e({x:Bh,y:0,z:0})),nu=Te($e({x:Bh*1.66,y:0,z:0})),dS=({className:e})=>u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{className:"fill-white",cx:Fn.x,cy:Fn.y,rx:Math.abs(nu.x),ry:Math.abs(nu.y)}),u.jsx("ellipse",{className:e,cx:Fn.x,cy:Fn.y,rx:Math.abs(ru.x),ry:Math.abs(ru.y)})]}),fS=(e,t,r)=>Jp(e,t,r)&&(e.type==="teleporter"||e.type==="hushPuppy"||e.type==="lift"||e.type==="pickup"&&e.config.gives!=="scroll"),hS=(e,t)=>{const r=Object.entries(e);if(r.length<=t)return e;const n=Object.groupBy(r,s=>s[1].type),o=Xp(t,Pm(...gp(n)));return Object.fromEntries(o)},pS=(e,t,r)=>p.useMemo(()=>{let n=!1,o=!1;const s=po(Li(e.items)).filter(([i,a])=>!t[i]).filter(([i,a])=>{if(a.type==="hushPuppy"){if(n)return!1;n=!0}if(a.type==="pickup"&&a.config.gives==="crown"){if(o)return!1;o=!0}return!0}).filter(i=>fS(i[1],r,e));return hS(fu(s),Ii)},[e,t,r]),Ie=3,ou=yp(Te({x:H,y:0})),Un={wall:void 0,open:"0,999",doorway:`${Or(ou*((1-dn)/2)-Ie/2)}, ${Or(ou*dn+Ie)}, 999`},Xs=`
M ${U({})}
L ${U({y:H})}
L ${U({x:H,y:H})}
L ${U({x:H})}
z`,Hn=(e,t=dn)=>{const r=H*((1-t)/2),n=H-r,o=e.away!=="wall",s=e.towards!=="wall",i=e.left!=="wall",a=e.right!=="wall";let l=`M${U({x:r,y:r})}`;return a&&(l+=`L${U({x:0,y:r})} L${U({x:0,y:n})}`),l+=`L${U({x:r,y:n})}`,o&&(l+=`L${U({x:r,y:H})} L${U({x:n,y:H})}`),l+=`L${U({x:n,y:n})}`,i&&(l+=`L${U({x:H,y:n})} L${U({x:H,y:r})}`),l+=`L${U({x:n,y:r})}`,s&&(l+=`L${U({x:n,y:0})} L${U({x:r,y:0})}`),l+="z",l},Ys=4,mS=po(vp(Ys)).map(e=>`
M${U({x:H*((e+.5)/Ys),y:0})}
L${U({x:H*((e+.5)/Ys),y:H})}`).toArray().join(""),su=e=>{const t=`
M${U({x:0,y:H})}
L${U({x:0,y:H,z:ft})}
L${U({x:H,y:H,z:ft})}
L${U({x:H,y:H})}
z
`;return e?t+`
M${U({x:Ce,y:H})}
L${U({x:Ce,y:H,z:ft})}
L${U({x:Se,y:H,z:ft})}
L${U({x:Se,y:H})}
L${U({x:Ce,y:H})}`:t},gS=`            
M${U({x:H,y:H,z:ft})}            
L${U({x:H,y:H})}            
M${U({x:H,y:0,z:ft})}            
L${U({x:H,y:0})}            
M${U({x:0,y:H,z:ft})}            
L${U({x:0,y:H})}            
`,vS=`            
M${U({x:0,y:0,z:ft})}            
L0, 0            
`,yS=({roomGridPositionSpec:{boundaries:e,subRoomId:t},roomPickupsCollected:r,roomJson:n,roomVisited:o,headItemInRoom:s,heelsItemInRoom:i,headOverHeelsItemInRoom:a,currentCharacterName:l,onPlayableClick:c,onRoomClick:d})=>{const{id:f,roomAbove:h,color:m,items:v}=n,g=n.meta?.label,y=pS(n,r,t),b=Object.values(v).filter(_=>_.type==="floor"),w=b.length===0,x=b.some(_=>_.config.floorType==="deadly");return u.jsxs("g",{"data-room-id":f,strokeWidth:Ie,className:uS(m),children:[w?u.jsxs(u.Fragment,{children:[u.jsx("path",{className:"fill-[var(--roomHintColor)]",fillRule:"evenodd",d:`${Xs} ${Hn(e)}`}),u.jsx("path",{className:"fill-white",fillRule:"evenodd",d:`${Hn(e)} ${Hn(e,dn*.7)}`})]}):u.jsxs(u.Fragment,{children:[u.jsx("path",{className:"fill-[var(--roomHintColor)]",d:Xs}),u.jsx("path",{className:"fill-white",d:Hn(e)}),x&&u.jsx("path",{className:"stroke-[var(--roomHintColor)]",strokeDasharray:"1, 12.4",d:mS})]}),n.id==="blacktooth11"?u.jsx("path",{className:"fill-[var(--roomHintColor)]",d:`
M${U({x:Ce,y:Ce})}
L${U({x:Se,y:Ce})}
L${U({x:Se,y:Ce-Ie*2})}
L${U({x:Ce,y:Ce-Ie*2})}
z
M${U({x:Ce,y:Se})}
L${U({x:Se,y:Se})}
L${U({x:Se,y:Se+Ie*2})}
L${U({x:Ce,y:Se+Ie*2})}
z
`}):n.id==="moonbase20"||n.id==="moonbase23"?u.jsx("path",{className:"stroke-[var(--roomHintColor)]",strokeWidth:Ie*2,d:`
M${U({x:Ce,y:H/2})}
L${U({x:Se,y:H/2})}

M${U({x:H/2,y:Ce})}
L${U({x:Se,y:H/2})}

M${U({x:H/2,y:Se})}
L${U({x:Se,y:H/2})}
`}):n.id==="blacktooth77"||n.id==="safari26"?u.jsx("path",{className:"fill-[var(--roomHintColor)]",strokeWidth:1,d:`
M${U({x:H/2-Ie,y:0})}
L${U({x:H/2+Ie,y:0})}
L${U({x:H/2+Ie,y:H})}
L${U({x:H/2-Ie,y:H})}
z
`}):null,h&&u.jsxs(u.Fragment,{children:[u.jsx("path",{className:"fill-[var(--roomHintColorDarker)]",fillRule:"evenodd",d:su(e.away==="doorway")}),u.jsx("path",{className:"fill-[var(--roomHintColor)]",fillRule:"evenodd",transform:"scale(-1, 1)",d:su(e.left==="doorway")})]}),u.jsxs("g",{className:"fill-transparent stroke-midGreyHalfbrite",children:[u.jsx("path",{d:`M${U({x:0,y:H})} L0, 0`,"data-direction":"right","data-boundary":e.right,strokeDasharray:Un[e.right]}),u.jsx("path",{d:`M${U({x:H,y:0})} L${U({x:H,y:H})}`,"data-direction":"left","data-boundary":e.left,strokeDasharray:Un[e.left]}),u.jsx("path",{d:`M${U({x:H,y:0})} L0, 0`,"data-direction":"towards","data-boundary":e.towards,strokeDasharray:Un[e.towards]}),u.jsx("path",{d:`M${U({x:0,y:H})} L${U({x:H,y:H})}`,"data-direction":"away","data-boundary":e.away,strokeDasharray:Un[e.away]})]}),o&&u.jsx(dS,{className:"fill-[var(--roomHintColor)]"}),h&&u.jsx("path",{className:"fill-transparent stroke-midGreyHalfbrite",d:gS}),s&&i?u.jsx(cS,{roomJson:n,currentCharacterName:l,headItemInRoom:s,heelsItemInRoom:i,onClick:c}):s?u.jsx(Qr,{characterName:"head",isCurrent:l==="head",onlyPlayableInRoom:!0,facing:s.state.facing,yAdjust:-8,onClick:c}):i?u.jsx(Qr,{characterName:"heels",isCurrent:l==="heels",onlyPlayableInRoom:!0,facing:i.state.facing,yAdjust:-8,onClick:c}):a?u.jsxs(u.Fragment,{children:[u.jsx(Qr,{characterName:"heels",onlyPlayableInRoom:!1,facing:a.state.facing,yAdjust:-16,isCurrent:!0}),u.jsx(Qr,{characterName:"head",onlyPlayableInRoom:!1,facing:a.state.facing,isCurrent:!0,yAdjust:-36})]}):u.jsx(lS,{roomJson:n,subRoomId:t,items:y}),h&&u.jsx("path",{className:"fill-transparent stroke-midGreyHalfbrite",d:vS}),g&&u.jsx("g",{transform:Ia($e(Mi(g.gridOffset,{x:.5,y:.5}))),children:u.jsx("foreignObject",{width:g.text.length*16,height:16,y:-8,x:g.align==="left"?0:g.text.length*-16,children:u.jsx(I,{noTint:!0,className:"[--scale:2] [--block:16px]",children:g.text})})}),d?u.jsx("path",{className:"fill-transparent cursor-pointer",d:Xs,onClick:()=>{d(f)}}):null]})},Mt=({mapTitle:e,y:t=0,className:r,textOnly:n=!1})=>{const o=ho();return u.jsxs("g",{className:r,children:[n||u.jsx("rect",{y:t,width:1e4,height:1e4}),u.jsx("foreignObject",{width:o*(e.length+3)*8,height:o*16*3,x:fn,y:t+16,children:u.jsx(I,{className:`left-2 relative sprites-double-height ${Vr}`,children:e})})]})},bS=({originalCampaignPositions:e,mapBounds:t,containerWidth:r})=>{const n=ho(),o=t.r-t.l+2*fn,s={x:-t.l+fn+(r-o)/2,y:-t.t+wr},i=(x,_=br)=>Mi(s,Te($e(Di(e[x].gridPosition,_)))),a=i("blacktooth44market/*",{x:1,z:1.5}),l=i("blacktooth44market/*",{x:1}),c=i("blacktooth45market/*"),d=i("blacktooth48market/*",{y:1}),f=i("blacktooth53market/*",{x:0,y:0,z:0}),h=i("blacktooth53market/*",{x:0,y:1,z:0}),m=i("blacktooth53market/*",{x:1,y:1,z:0}),v=i("blacktooth52market/*",{x:1,y:.5,z:0}),g=n*8*2,y="Market",b=(y.length+3)*n*8,w=n*8*2+32;return u.jsxs(u.Fragment,{children:[u.jsx("path",{className:`${St.market.bgClassName} stroke-metallicBlueHalfbrite zx:stroke-zxCyan`,strokeWidth:12,d:`
M ${je({x:g,y:v.y+w})}
L ${je({x:b,y:v.y+w})}
L ${je({x:b,y:a.y})}
L ${je(a)}
L ${je(l)}
L ${je(c)}
L ${je(d)}
L ${je(f)}
L ${je(h)}
L ${je(m)}
L ${je(v)}
L ${je({...v,x:g})}
z`}),u.jsx(Mt,{y:v.y,mapTitle:y,className:St.market.bgClassName,textOnly:!0})]})},xS=({gridPositions:e,mapBounds:t,containerWidth:r})=>{const n=e,o=Te($e({x:1,y:1,z:0})).y,s=(i,a)=>{if(n[i]===void 0)throw new Error(`OriginalCampaignMainMapBackground: this campaign does not have any room called "${i}" to use to calculate yBetweenRooms`);if(n[a]===void 0)throw new Error(`OriginalCampaignMainMapBackground: this campaign does not have any room called "${a}" to use to calculate yBetweenRooms`);const l=Te($e(n[i].gridPosition)).y,c=Te($e(n[a].gridPosition)).y+o;return(l+c)/2};return u.jsxs(u.Fragment,{children:[u.jsx(Mt,{y:0,mapTitle:"Freedom",className:St.freedom.bgClassName}),u.jsx(Mt,{y:s("finalroom/*","blacktooth83tofreedom/*")-t.t+wr,mapTitle:"Castle Blacktooth",className:St.blacktooth.bgClassName}),u.jsx(Mt,{y:s("blacktooth87crown/*","moonbase35/*")-t.t+wr,mapTitle:"moonbase",className:St.moonbase.bgClassName}),u.jsx(Mt,{y:s("moonbase4/*","blacktooth62fish/right")-t.t+wr,mapTitle:"Blacktooth escape",className:St.blacktooth.bgClassName}),u.jsx(bS,{mapBounds:t,originalCampaignPositions:n,containerWidth:r}),u.jsx(Mt,{y:s("blacktooth24/*","blacktooth1head/*")-t.t+wr,mapTitle:"Jail",className:St.jail.bgClassName})]})},wS={blacktooth:"blacktooth",bookworld:"bookworld",jail:"blacktooth",egyptus:"egyptus",moonbase:"moonbase",market:"market",penitentiary:"penitentiary",safari:"safari"},_S=e=>{const{campaign:t,curRoomId:r}=e,n=t.name==="original"&&!["penitentiary","bookworld","egyptus","safari"].includes(t.rooms[r].planet),o=Mh(e.curRoomScenery);return n?u.jsx(xS,{...e}):u.jsx(Mt,{mapTitle:wS[t.rooms[r].planet],className:o.bgClassName})},Zs=(e,t,r,n)=>{const o=bp(t,e[t]?.items);return o&&r===e[t].roomJson.id&&n===Yp(o.state.position,"fine",e[t].roomJson)?o:void 0},kS=e=>{const{campaign:t,pickupsCollected:r,gridPositions:n,currentCharacterName:o,characterRooms:s,mapBounds:i,containerWidth:a,roomsExplored:l,onPlayableClick:c,curRoomId:d,onRoomClick:f}=e;if(a===void 0)return null;const h=i.r-i.l+2*fn,m=i.b-i.t+2*wr,v=Object.values(n);return u.jsxs("svg",{className:"w-full",style:{minWidth:`${h}px`,height:`${m}px`},strokeLinecap:"round",strokeLinejoin:"round",children:[d===void 0?null:u.jsx(_S,{...e,curRoomId:d,containerWidth:a}),u.jsx("g",{transform:`translate(${-i.l+fn+(a-h)/2},${-i.t+128})`,children:v.map(g=>{const{roomId:y,subRoomId:b,gridPosition:w}=g,x=`${y}/${b}`;return u.jsx("g",{"data-id":x,transform:Ia($e(w)),children:u.jsx(yS,{roomGridPositionSpec:g,roomPickupsCollected:r[y]??He,roomJson:t.rooms[y],headItemInRoom:Zs(s,"head",y,b),heelsItemInRoom:Zs(s,"heels",y,b),headOverHeelsItemInRoom:Zs(s,"headOverHeels",y,b),currentCharacterName:o,roomVisited:l[y]??!1,onPlayableClick:c,onRoomClick:f})},x)})})]})},SS=Te($e({x:1,y:1,z:1})).y,iu=Te($e({x:0,y:1,z:0})).x,CS=e=>e.reduce((t,{gridPosition:r})=>{const n=Te($e(r));return{t:Math.min(t.t,n.y+SS),b:Math.max(t.b,n.y),l:Math.min(t.l,n.x-iu),r:Math.max(t.r,n.x+iu)}},{t:Number.POSITIVE_INFINITY,b:Number.NEGATIVE_INFINITY,l:Number.POSITIVE_INFINITY,r:Number.NEGATIVE_INFINITY}),ES=e=>{const r=[...e].sort(({gridPosition:n},{gridPosition:o})=>n.z!==o.z?n.z-o.z:o.x+o.y-(n.x+n.y)).map(n=>[`${n.roomId}/${n.subRoomId}`,n]);return fu(r)},jS=()=>{const e=se(o=>o.levelEditor.campaignInProgress),t=se(o=>{const i=to(o).meta?.subRooms;return(i&&Object.keys(i)[0])??"*"}),r=se(o=>to(o).planet),n=se(o=>o.levelEditor.currentlyEditingRoomId);return p.useMemo(()=>{try{const o=[...Zp({campaign:e,roomId:n,subRoomId:t})],s=ES(o);return{mapBounds:CS(o),curRoomId:n,gridPositions:s,currentCharacterName:"head",pickupsCollected:He,characterRooms:He,campaign:e,roomsExplored:He,curRoomScenery:r}}catch(o){console.error(Error("error getting map data",{cause:o}));return}},[e,n,r,t])},PS=()=>{const{ref:e,width:t,height:r}=Qk(),n=jS();if(n===void 0)return u.jsx("div",{className:"h-full flex justify-center items-center w-full scale-editor bg-shadow text-white",children:u.jsx(I,{children:"Could not solve map geometry - will show again on valid map data"})});if(r===0)return null;const o=Mh(n.curRoomScenery);return u.jsx("div",{className:`overflow-y-scroll h-full scrollbar scale-editor scrollbar-w-1 ${o.containerClassName}`,ref:e,children:u.jsx(kS,{containerWidth:t,onRoomClick:s=>{Ae.dispatch(Fi(s))},...n})})},RS=()=>{tk();const e=u.jsx("div",{className:"flex h-full items-center justify-center bg-pureBlack",children:u.jsx("span",{className:"sprite texture-animated-head_walking_right"})}),t=u.jsx("div",{className:"flex h-full items-center justify-center bg-pureBlack",children:u.jsx("span",{className:"sprite texture-animated-heels_walking_towards"})});return u.jsx(u.Fragment,{children:u.jsx(_o,{children:u.jsx(Nx,{children:u.jsxs(Ni,{direction:"horizontal",className:"w-full h-full",children:[u.jsx(vr,{id:"jsonEditor",defaultSize:18,minSize:12,collapsible:!0,children:u.jsx(p.Suspense,{fallback:e,children:u.jsx(Tk,{})})}),u.jsx(Qn,{className:"scale-editor w-1 bg-metallicBlueHalfbrite  hover:border-moss hover:bg-moss border-r-[calc(1px*var(--scale))] border-metallicBlue"}),u.jsx(vr,{id:"centre",children:u.jsxs(Ni,{direction:"vertical",children:[u.jsx(vr,{id:"map",collapsible:!0,minSize:10,defaultSize:25,children:u.jsx(PS,{})}),u.jsx(Qn,{className:"scale-editor h-1 bg-metallicBlueHalfbrite  hover:border-moss hover:bg-moss border-b-[calc(1px*var(--scale))] border-metallicBlue"}),u.jsx(vr,{id:"editingArea",children:u.jsx(p.Suspense,{fallback:t,children:u.jsx(Nk,{})})})]})}),u.jsx(Qn,{className:"scale-editor w-1 bg-metallicBlueHalfbrite  hover:border-moss hover:bg-moss border-l-[calc(1px*var(--scale))] border-metallicBlue"}),u.jsx(vr,{id:"toolbar",defaultSize:20,maxSize:33,minSize:10,children:u.jsx(ek,{})})]})})})})},JS=Object.freeze(Object.defineProperty({__proto__:null,default:RS},Symbol.toStringTag,{value:"Module"}));export{I as B,JS as L,te as T,Xn as a,Xe as b,Ff as c,US as d,ri as e,NS as f,FS as g,OS as h,xm as i,Ro as j,VS as k,G_ as l,BS as m,nt as s,Ue as t,fh as u,aw as y,MS as z};
