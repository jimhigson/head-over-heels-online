const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-SVOmDHyB.js","assets/webworkerAll-BzKB5bcN.js","assets/campaign-CHtGOMT8.js","assets/RoomJson-B7DN8xX4.js","assets/LevelEditor-dgNeyyT-.js","assets/levelEditorSlice-DV1_qcla.js"])))=>i.map(i=>d[i]);
function wE(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var O4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ar(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sd={exports:{}},Za={};var Av;function xE(){if(Av)return Za;Av=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Za.Fragment=e,Za.jsx=n,Za.jsxs=n,Za}var Tv;function SE(){return Tv||(Tv=1,Sd.exports=xE()),Sd.exports}var To=SE(),Ad={exports:{}},be={};var Ev;function AE(){if(Ev)return be;Ev=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function x(z,F,W){this.props=z,this.context=F,this.refs=S,this.updater=W||w}x.prototype.isReactComponent={},x.prototype.setState=function(z,F){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,F,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function C(){}C.prototype=x.prototype;function T(z,F,W){this.props=z,this.context=F,this.refs=S,this.updater=W||w}var E=T.prototype=new C;E.constructor=T,A(E,x.prototype),E.isPureReactComponent=!0;var D=Array.isArray;function O(){}var M={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function j(z,F,W){var Z=W.ref;return{$$typeof:t,type:z,key:F,ref:Z!==void 0?Z:null,props:W}}function B(z,F){return j(z.type,F,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function H(z){var F={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(W){return F[W]})}var J=/\/+/g;function ee(z,F){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):F.toString(36)}function ae(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(O,O):(z.status="pending",z.then(function(F){z.status==="pending"&&(z.status="fulfilled",z.value=F)},function(F){z.status==="pending"&&(z.status="rejected",z.reason=F)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function U(z,F,W,Z,se){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var ge=!1;if(z===null)ge=!0;else switch(oe){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(z.$$typeof){case t:case e:ge=!0;break;case m:return ge=z._init,U(ge(z._payload),F,W,Z,se)}}if(ge)return se=se(z),ge=Z===""?"."+ee(z,0):Z,D(se)?(W="",ge!=null&&(W=ge.replace(J,"$&/")+"/"),U(se,F,W,"",function(Bt){return Bt})):se!=null&&(N(se)&&(se=B(se,W+(se.key==null||z&&z.key===se.key?"":(""+se.key).replace(J,"$&/")+"/")+ge)),F.push(se)),1;ge=0;var Je=Z===""?".":Z+":";if(D(z))for(var Oe=0;Oe<z.length;Oe++)Z=z[Oe],oe=Je+ee(Z,Oe),ge+=U(Z,F,W,oe,se);else if(Oe=b(z),typeof Oe=="function")for(z=Oe.call(z),Oe=0;!(Z=z.next()).done;)Z=Z.value,oe=Je+ee(Z,Oe++),ge+=U(Z,F,W,oe,se);else if(oe==="object"){if(typeof z.then=="function")return U(ae(z),F,W,Z,se);throw F=String(z),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ge}function L(z,F,W){if(z==null)return z;var Z=[],se=0;return U(z,Z,"","",function(oe){return F.call(W,oe,se++)}),Z}function te(z){if(z._status===-1){var F=z._result;F=F(),F.then(function(W){(z._status===0||z._status===-1)&&(z._status=1,z._result=W)},function(W){(z._status===0||z._status===-1)&&(z._status=2,z._result=W)}),z._status===-1&&(z._status=0,z._result=F)}if(z._status===1)return z._result.default;throw z._result}var ie=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ue={map:L,forEach:function(z,F,W){L(z,function(){F.apply(this,arguments)},W)},count:function(z){var F=0;return L(z,function(){F++}),F},toArray:function(z){return L(z,function(F){return F})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return be.Activity=g,be.Children=ue,be.Component=x,be.Fragment=n,be.Profiler=a,be.PureComponent=T,be.StrictMode=i,be.Suspense=f,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},be.cache=function(z){return function(){return z.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(z,F,W){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Z=A({},z.props),se=z.key;if(F!=null)for(oe in F.key!==void 0&&(se=""+F.key),F)!k.call(F,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&F.ref===void 0||(Z[oe]=F[oe]);var oe=arguments.length-2;if(oe===1)Z.children=W;else if(1<oe){for(var ge=Array(oe),Je=0;Je<oe;Je++)ge[Je]=arguments[Je+2];Z.children=ge}return j(z.type,se,Z)},be.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},be.createElement=function(z,F,W){var Z,se={},oe=null;if(F!=null)for(Z in F.key!==void 0&&(oe=""+F.key),F)k.call(F,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(se[Z]=F[Z]);var ge=arguments.length-2;if(ge===1)se.children=W;else if(1<ge){for(var Je=Array(ge),Oe=0;Oe<ge;Oe++)Je[Oe]=arguments[Oe+2];se.children=Je}if(z&&z.defaultProps)for(Z in ge=z.defaultProps,ge)se[Z]===void 0&&(se[Z]=ge[Z]);return j(z,oe,se)},be.createRef=function(){return{current:null}},be.forwardRef=function(z){return{$$typeof:h,render:z}},be.isValidElement=N,be.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:te}},be.memo=function(z,F){return{$$typeof:d,type:z,compare:F===void 0?null:F}},be.startTransition=function(z){var F=M.T,W={};M.T=W;try{var Z=z(),se=M.S;se!==null&&se(W,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(O,ie)}catch(oe){ie(oe)}finally{F!==null&&W.types!==null&&(F.types=W.types),M.T=F}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(z){return M.H.use(z)},be.useActionState=function(z,F,W){return M.H.useActionState(z,F,W)},be.useCallback=function(z,F){return M.H.useCallback(z,F)},be.useContext=function(z){return M.H.useContext(z)},be.useDebugValue=function(){},be.useDeferredValue=function(z,F){return M.H.useDeferredValue(z,F)},be.useEffect=function(z,F){return M.H.useEffect(z,F)},be.useEffectEvent=function(z){return M.H.useEffectEvent(z)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(z,F,W){return M.H.useImperativeHandle(z,F,W)},be.useInsertionEffect=function(z,F){return M.H.useInsertionEffect(z,F)},be.useLayoutEffect=function(z,F){return M.H.useLayoutEffect(z,F)},be.useMemo=function(z,F){return M.H.useMemo(z,F)},be.useOptimistic=function(z,F){return M.H.useOptimistic(z,F)},be.useReducer=function(z,F,W){return M.H.useReducer(z,F,W)},be.useRef=function(z){return M.H.useRef(z)},be.useState=function(z){return M.H.useState(z)},be.useSyncExternalStore=function(z,F,W){return M.H.useSyncExternalStore(z,F,W)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.3",be}var Cv;function Gc(){return Cv||(Cv=1,Ad.exports=AE()),Ad.exports}var ce=Gc();const TE=Ar(ce),D4=wE({__proto__:null,default:TE},[ce]);var Td={exports:{}},Ja={},Ed={exports:{}},Cd={};var Rv;function EE(){return Rv||(Rv=1,(function(t){function e(U,L){var te=U.length;U.push(L);e:for(;0<te;){var ie=te-1>>>1,ue=U[ie];if(0<a(ue,L))U[ie]=L,U[te]=ue,te=ie;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var L=U[0],te=U.pop();if(te!==L){U[0]=te;e:for(var ie=0,ue=U.length,z=ue>>>1;ie<z;){var F=2*(ie+1)-1,W=U[F],Z=F+1,se=U[Z];if(0>a(W,te))Z<ue&&0>a(se,W)?(U[ie]=se,U[Z]=te,ie=Z):(U[ie]=W,U[F]=te,ie=F);else if(Z<ue&&0>a(se,te))U[ie]=se,U[Z]=te,ie=Z;else break e}}return L}function a(U,L){var te=U.sortIndex-L.sortIndex;return te!==0?te:U.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],d=[],m=1,g=null,v=3,b=!1,w=!1,A=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(U){for(var L=n(d);L!==null;){if(L.callback===null)i(d);else if(L.startTime<=U)i(d),L.sortIndex=L.expirationTime,e(f,L);else break;L=n(d)}}function D(U){if(A=!1,E(U),!w)if(n(f)!==null)w=!0,O||(O=!0,H());else{var L=n(d);L!==null&&ae(D,L.startTime-U)}}var O=!1,M=-1,k=5,j=-1;function B(){return S?!0:!(t.unstable_now()-j<k)}function N(){if(S=!1,O){var U=t.unstable_now();j=U;var L=!0;try{e:{w=!1,A&&(A=!1,C(M),M=-1),b=!0;var te=v;try{t:{for(E(U),g=n(f);g!==null&&!(g.expirationTime>U&&B());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,v=g.priorityLevel;var ue=ie(g.expirationTime<=U);if(U=t.unstable_now(),typeof ue=="function"){g.callback=ue,E(U),L=!0;break t}g===n(f)&&i(f),E(U)}else i(f);g=n(f)}if(g!==null)L=!0;else{var z=n(d);z!==null&&ae(D,z.startTime-U),L=!1}}break e}finally{g=null,v=te,b=!1}L=void 0}}finally{L?H():O=!1}}}var H;if(typeof T=="function")H=function(){T(N)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=N,H=function(){ee.postMessage(null)}}else H=function(){x(N,0)};function ae(U,L){M=x(function(){U(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var L=3;break;default:L=v}var te=v;v=L;try{return U()}finally{v=te}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=v;v=U;try{return L()}finally{v=te}},t.unstable_scheduleCallback=function(U,L,te){var ie=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ie+te:ie):te=ie,U){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=te+ue,U={id:m++,callback:L,priorityLevel:U,startTime:te,expirationTime:ue,sortIndex:-1},te>ie?(U.sortIndex=te,e(d,U),n(f)===null&&U===n(d)&&(A?(C(M),M=-1):A=!0,ae(D,te-ie))):(U.sortIndex=ue,e(f,U),w||b||(w=!0,O||(O=!0,H()))),U},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(U){var L=v;return function(){var te=v;v=L;try{return U.apply(this,arguments)}finally{v=te}}}})(Cd)),Cd}var Mv;function CE(){return Mv||(Mv=1,Ed.exports=EE()),Ed.exports}var Rd={exports:{}},Ot={};var kv;function RE(){if(kv)return Ot;kv=1;var t=Gc();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:f,containerInfo:d,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ot.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return l(f,d,null,m)},Ot.flushSync=function(f){var d=u.T,m=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=d,i.p=m,i.d.f()}},Ot.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},Ot.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Ot.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,g=h(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:b}):m==="script"&&i.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ot.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=h(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},Ot.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=h(m,d.crossOrigin);i.d.L(f,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ot.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=h(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},Ot.requestFormReset=function(f){i.d.r(f)},Ot.unstable_batchedUpdates=function(f,d){return f(d)},Ot.useFormState=function(f,d,m){return u.H.useFormState(f,d,m)},Ot.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ot.version="19.2.3",Ot}var Ov;function ME(){if(Ov)return Rd.exports;Ov=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rd.exports=RE(),Rd.exports}var Dv;function kE(){if(Dv)return Ja;Dv=1;var t=CE(),e=Gc(),n=ME();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return f(p),r;if(y===c)return f(p),s;y=y.sibling}throw Error(i(188))}if(o.return!==c.return)o=p,c=y;else{for(var _=!1,R=p.child;R;){if(R===o){_=!0,o=p,c=y;break}if(R===c){_=!0,c=p,o=y;break}R=R.sibling}if(!_){for(R=y.child;R;){if(R===o){_=!0,o=y,c=p;break}if(R===c){_=!0,c=y,o=p;break}R=R.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function m(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=m(r),s!==null)return s;r=r.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var J=Symbol.for("react.client.reference");function ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===J?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case T:return r.displayName||"Context";case C:return(r._context.displayName||"Context")+".Consumer";case E:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return s=r.displayName||null,s!==null?s:ee(r.type)||"Memo";case k:s=r._payload,r=r._init;try{return ee(r(s))}catch{}}return null}var ae=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ie=[],ue=-1;function z(r){return{current:r}}function F(r){0>ue||(r.current=ie[ue],ie[ue]=null,ue--)}function W(r,s){ue++,ie[ue]=r.current,r.current=s}var Z=z(null),se=z(null),oe=z(null),ge=z(null);function Je(r,s){switch(W(oe,s),W(se,r),W(Z,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Y0(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Y0(s),r=X0(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}F(Z),W(Z,r)}function Oe(){F(Z),F(se),F(oe)}function Bt(r){r.memoizedState!==null&&W(ge,r);var s=Z.current,o=X0(s,r.type);s!==o&&(W(se,r),W(Z,o))}function mn(r){se.current===r&&(F(Z),F(se)),ge.current===r&&(F(ge),Xa._currentValue=te)}var Nt,gn;function yt(r){if(Nt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Nt=s&&s[1]||"",gn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nt+r+gn}var Zt=!1;function sa(r,s){if(!r||Zt)return"";Zt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(Y){var V=Y}Reflect.construct(r,[],K)}else{try{K.call()}catch(Y){V=Y}r.call(K.prototype)}}else{try{throw Error()}catch(Y){V=Y}(K=r())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(Y){if(Y&&V&&typeof Y.stack=="string")return[Y.stack,V.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),_=y[0],R=y[1];if(_&&R){var P=_.split(`
`),$=R.split(`
`);for(p=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;if(c===P.length||p===$.length)for(c=P.length-1,p=$.length-1;1<=c&&0<=p&&P[c]!==$[p];)p--;for(;1<=c&&0<=p;c--,p--)if(P[c]!==$[p]){if(c!==1||p!==1)do if(c--,p--,0>p||P[c]!==$[p]){var X=`
`+P[c].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=c&&0<=p);break}}}finally{Zt=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?yt(o):""}function yl(r,s){switch(r.tag){case 26:case 27:case 5:return yt(r.type);case 16:return yt("Lazy");case 13:return r.child!==s&&s!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return sa(r.type,!1);case 11:return sa(r.type.render,!1);case 1:return sa(r.type,!0);case 31:return yt("Activity");default:return""}}function ml(r){try{var s="",o=null;do s+=yl(r,o),o=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var gl=Object.prototype.hasOwnProperty,lh=t.unstable_scheduleCallback,uh=t.unstable_cancelCallback,J1=t.unstable_shouldYield,eA=t.unstable_requestPaint,Jt=t.unstable_now,tA=t.unstable_getCurrentPriorityLevel,Tm=t.unstable_ImmediatePriority,Em=t.unstable_UserBlockingPriority,bl=t.unstable_NormalPriority,nA=t.unstable_LowPriority,Cm=t.unstable_IdlePriority,rA=t.log,iA=t.unstable_setDisableYieldValue,aa=null,en=null;function Er(r){if(typeof rA=="function"&&iA(r),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(aa,r)}catch{}}var tn=Math.clz32?Math.clz32:oA,sA=Math.log,aA=Math.LN2;function oA(r){return r>>>=0,r===0?32:31-(sA(r)/aA|0)|0}var vl=256,_l=262144,wl=4194304;function oi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xl(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var p=0,y=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?p=oi(c):(_&=R,_!==0?p=oi(_):o||(o=R&~r,o!==0&&(p=oi(o))))):(R=c&~y,R!==0?p=oi(R):_!==0?p=oi(_):o||(o=c&~r,o!==0&&(p=oi(o)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:p}function oa(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function lA(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rm(){var r=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),r}function ch(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function la(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function uA(r,s,o,c,p,y){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,P=r.expirationTimes,$=r.hiddenUpdates;for(o=_&~o;0<o;){var X=31-tn(o),K=1<<X;R[X]=0,P[X]=-1;var V=$[X];if(V!==null)for($[X]=null,X=0;X<V.length;X++){var Y=V[X];Y!==null&&(Y.lane&=-536870913)}o&=~K}c!==0&&Mm(r,c,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(_&~s))}function Mm(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-tn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&261930}function km(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-tn(o),p=1<<c;p&s|r[c]&s&&(r[c]|=s),o&=~p}}function Om(r,s){var o=s&-s;return o=(o&42)!==0?1:hh(o),(o&(r.suspendedLanes|s))!==0?0:o}function hh(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function fh(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Dm(){var r=L.p;return r!==0?r:(r=window.event,r===void 0?32:gv(r.type))}function Um(r,s){var o=L.p;try{return L.p=r,s()}finally{L.p=o}}var Cr=Math.random().toString(36).slice(2),wt="__reactFiber$"+Cr,Gt="__reactProps$"+Cr,Xi="__reactContainer$"+Cr,dh="__reactEvents$"+Cr,cA="__reactListeners$"+Cr,hA="__reactHandles$"+Cr,Pm="__reactResources$"+Cr,ua="__reactMarker$"+Cr;function ph(r){delete r[wt],delete r[Gt],delete r[dh],delete r[cA],delete r[hA]}function Qi(r){var s=r[wt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Xi]||o[wt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=tv(r);r!==null;){if(o=r[wt])return o;r=tv(r)}return s}r=o,o=r.parentNode}return null}function Ki(r){if(r=r[wt]||r[Xi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function ca(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Wi(r){var s=r[Pm];return s||(s=r[Pm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function mt(r){r[ua]=!0}var zm=new Set,jm={};function li(r,s){Zi(r,s),Zi(r+"Capture",s)}function Zi(r,s){for(jm[r]=s,r=0;r<s.length;r++)zm.add(s[r])}var fA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bm={},Nm={};function dA(r){return gl.call(Nm,r)?!0:gl.call(Bm,r)?!1:fA.test(r)?Nm[r]=!0:(Bm[r]=!0,!1)}function Sl(r,s,o){if(dA(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Al(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Kn(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Im(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pA(r,s,o){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(_){o=""+_,y.call(this,_)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function yh(r){if(!r._valueTracker){var s=Im(r)?"checked":"value";r._valueTracker=pA(r,s,""+r[s])}}function Lm(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=Im(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function Tl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var yA=/[\n"\\]/g;function vn(r){return r.replace(yA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mh(r,s,o,c,p,y,_,R){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),s!=null?_==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+bn(s)):r.value!==""+bn(s)&&(r.value=""+bn(s)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),s!=null?gh(r,_,bn(s)):o!=null?gh(r,_,bn(o)):c!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+bn(R):r.removeAttribute("name")}function qm(r,s,o,c,p,y,_,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){yh(r);return}o=o!=null?""+bn(o):"",s=s!=null?""+bn(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=R?r.checked:!!c,r.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),yh(r)}function gh(r,s,o){s==="number"&&Tl(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ji(r,s,o,c){if(r=r.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=s.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&c&&(r[o].defaultSelected=!0)}else{for(o=""+bn(o),s=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function Gm(r,s,o){if(s!=null&&(s=""+bn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+bn(o):""}function $m(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(ae(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=bn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c),yh(r)}function es(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var mA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hm(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||mA.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Vm(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in s)c=s[p],s.hasOwnProperty(p)&&o[p]!==c&&Hm(r,p,c)}else for(var y in s)s.hasOwnProperty(y)&&Hm(r,y,s[y])}function bh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function El(r){return bA.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Wn(){}var vh=null;function _h(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ts=null,ns=null;function Fm(r){var s=Ki(r);if(s&&(r=s.stateNode)){var o=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(mh(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+vn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var p=c[Gt]||null;if(!p)throw Error(i(90));mh(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&Lm(c)}break e;case"textarea":Gm(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ji(r,!!o.multiple,s,!1)}}}var wh=!1;function Ym(r,s,o){if(wh)return r(s,o);wh=!0;try{var c=r(s);return c}finally{if(wh=!1,(ts!==null||ns!==null)&&(du(),ts&&(s=ts,r=ns,ns=ts=null,Fm(s),r)))for(s=0;s<r.length;s++)Fm(r[s])}}function ha(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Gt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=!1;if(Zn)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){xh=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{xh=!1}var Rr=null,Sh=null,Cl=null;function Xm(){if(Cl)return Cl;var r,s=Sh,o=s.length,c,p="value"in Rr?Rr.value:Rr.textContent,y=p.length;for(r=0;r<o&&s[r]===p[r];r++);var _=o-r;for(c=1;c<=_&&s[o-c]===p[y-c];c++);return Cl=p.slice(r,1<c?1-c:void 0)}function Rl(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ml(){return!0}function Qm(){return!1}function $t(r){function s(o,c,p,y,_){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ml:Qm,this.isPropagationStopped=Qm,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),s}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=$t(ui),da=g({},ui,{view:0,detail:0}),vA=$t(da),Ah,Th,pa,Ol=g({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==pa&&(pa&&r.type==="mousemove"?(Ah=r.screenX-pa.screenX,Th=r.screenY-pa.screenY):Th=Ah=0,pa=r),Ah)},movementY:function(r){return"movementY"in r?r.movementY:Th}}),Km=$t(Ol),_A=g({},Ol,{dataTransfer:0}),wA=$t(_A),xA=g({},da,{relatedTarget:0}),Eh=$t(xA),SA=g({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),AA=$t(SA),TA=g({},ui,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),EA=$t(TA),CA=g({},ui,{data:0}),Wm=$t(CA),RA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=kA[r])?!!s[r]:!1}function Ch(){return OA}var DA=g({},da,{key:function(r){if(r.key){var s=RA[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Rl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?MA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(r){return r.type==="keypress"?Rl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Rl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),UA=$t(DA),PA=g({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zm=$t(PA),zA=g({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),jA=$t(zA),BA=g({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),NA=$t(BA),IA=g({},Ol,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),LA=$t(IA),qA=g({},ui,{newState:0,oldState:0}),GA=$t(qA),$A=[9,13,27,32],Rh=Zn&&"CompositionEvent"in window,ya=null;Zn&&"documentMode"in document&&(ya=document.documentMode);var HA=Zn&&"TextEvent"in window&&!ya,Jm=Zn&&(!Rh||ya&&8<ya&&11>=ya),eg=" ",tg=!1;function ng(r,s){switch(r){case"keyup":return $A.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rs=!1;function VA(r,s){switch(r){case"compositionend":return rg(s);case"keypress":return s.which!==32?null:(tg=!0,eg);case"textInput":return r=s.data,r===eg&&tg?null:r;default:return null}}function FA(r,s){if(rs)return r==="compositionend"||!Rh&&ng(r,s)?(r=Xm(),Cl=Sh=Rr=null,rs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Jm&&s.locale!=="ko"?null:s.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!YA[r.type]:s==="textarea"}function sg(r,s,o,c){ts?ns?ns.push(c):ns=[c]:ts=c,s=_u(s,"onChange"),0<s.length&&(o=new kl("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var ma=null,ga=null;function XA(r){q0(r,0)}function Dl(r){var s=ca(r);if(Lm(s))return r}function ag(r,s){if(r==="change")return s}var og=!1;if(Zn){var Mh;if(Zn){var kh="oninput"in document;if(!kh){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),kh=typeof lg.oninput=="function"}Mh=kh}else Mh=!1;og=Mh&&(!document.documentMode||9<document.documentMode)}function ug(){ma&&(ma.detachEvent("onpropertychange",cg),ga=ma=null)}function cg(r){if(r.propertyName==="value"&&Dl(ga)){var s=[];sg(s,ga,r,_h(r)),Ym(XA,s)}}function QA(r,s,o){r==="focusin"?(ug(),ma=s,ga=o,ma.attachEvent("onpropertychange",cg)):r==="focusout"&&ug()}function KA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Dl(ga)}function WA(r,s){if(r==="click")return Dl(s)}function ZA(r,s){if(r==="input"||r==="change")return Dl(s)}function JA(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var nn=typeof Object.is=="function"?Object.is:JA;function ba(r,s){if(nn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!gl.call(s,p)||!nn(r[p],s[p]))return!1}return!0}function hg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fg(r,s){var o=hg(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=hg(o)}}function dg(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?dg(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function pg(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Tl(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Tl(r.document)}return s}function Oh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var eT=Zn&&"documentMode"in document&&11>=document.documentMode,is=null,Dh=null,va=null,Uh=!1;function yg(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Uh||is==null||is!==Tl(c)||(c=is,"selectionStart"in c&&Oh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),va&&ba(va,c)||(va=c,c=_u(Dh,"onSelect"),0<c.length&&(s=new kl("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=is)))}function ci(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ss={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionrun:ci("Transition","TransitionRun"),transitionstart:ci("Transition","TransitionStart"),transitioncancel:ci("Transition","TransitionCancel"),transitionend:ci("Transition","TransitionEnd")},Ph={},mg={};Zn&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function hi(r){if(Ph[r])return Ph[r];if(!ss[r])return r;var s=ss[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in mg)return Ph[r]=s[o];return r}var gg=hi("animationend"),bg=hi("animationiteration"),vg=hi("animationstart"),tT=hi("transitionrun"),nT=hi("transitionstart"),rT=hi("transitioncancel"),_g=hi("transitionend"),wg=new Map,zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zh.push("scrollEnd");function Un(r,s){wg.set(r,s),li(s,[r])}var Ul=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},_n=[],as=0,jh=0;function Pl(){for(var r=as,s=jh=as=0;s<r;){var o=_n[s];_n[s++]=null;var c=_n[s];_n[s++]=null;var p=_n[s];_n[s++]=null;var y=_n[s];if(_n[s++]=null,c!==null&&p!==null){var _=c.pending;_===null?p.next=p:(p.next=_.next,_.next=p),c.pending=p}y!==0&&xg(o,p,y)}}function zl(r,s,o,c){_n[as++]=r,_n[as++]=s,_n[as++]=o,_n[as++]=c,jh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Bh(r,s,o,c){return zl(r,s,o,c),jl(r)}function fi(r,s){return zl(r,null,null,s),jl(r)}function xg(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var p=!1,y=r.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&s!==null&&(p=31-tn(o),r=y.hiddenUpdates,c=r[p],c===null?r[p]=[s]:c.push(s),s.lane=o|536870912),y):null}function jl(r){if(50<qa)throw qa=0,Yf=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var os={};function iT(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(r,s,o,c){return new iT(r,s,o,c)}function Nh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jn(r,s){var o=r.alternate;return o===null?(o=rn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Sg(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Bl(r,s,o,c,p,y){var _=0;if(c=r,typeof r=="function")Nh(r)&&(_=1);else if(typeof r=="string")_=uE(r,o,Z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case j:return r=rn(31,o,s,p),r.elementType=j,r.lanes=y,r;case A:return di(o.children,p,y,s);case S:_=8,p|=24;break;case x:return r=rn(12,o,s,p|2),r.elementType=x,r.lanes=y,r;case D:return r=rn(13,o,s,p),r.elementType=D,r.lanes=y,r;case O:return r=rn(19,o,s,p),r.elementType=O,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:_=10;break e;case C:_=9;break e;case E:_=11;break e;case M:_=14;break e;case k:_=16,c=null;break e}_=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=rn(_,o,s,p),s.elementType=r,s.type=c,s.lanes=y,s}function di(r,s,o,c){return r=rn(7,r,c,s),r.lanes=o,r}function Ih(r,s,o){return r=rn(6,r,null,s),r.lanes=o,r}function Ag(r){var s=rn(18,null,null,0);return s.stateNode=r,s}function Lh(r,s,o){return s=rn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Tg=new WeakMap;function wn(r,s){if(typeof r=="object"&&r!==null){var o=Tg.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ml(s)},Tg.set(r,s),s)}return{value:r,source:s,stack:ml(s)}}var ls=[],us=0,Nl=null,_a=0,xn=[],Sn=0,Mr=null,Gn=1,$n="";function er(r,s){ls[us++]=_a,ls[us++]=Nl,Nl=r,_a=s}function Eg(r,s,o){xn[Sn++]=Gn,xn[Sn++]=$n,xn[Sn++]=Mr,Mr=r;var c=Gn;r=$n;var p=32-tn(c)-1;c&=~(1<<p),o+=1;var y=32-tn(s)+p;if(30<y){var _=p-p%5;y=(c&(1<<_)-1).toString(32),c>>=_,p-=_,Gn=1<<32-tn(s)+p|o<<p|c,$n=y+r}else Gn=1<<y|o<<p|c,$n=r}function qh(r){r.return!==null&&(er(r,1),Eg(r,1,0))}function Gh(r){for(;r===Nl;)Nl=ls[--us],ls[us]=null,_a=ls[--us],ls[us]=null;for(;r===Mr;)Mr=xn[--Sn],xn[Sn]=null,$n=xn[--Sn],xn[Sn]=null,Gn=xn[--Sn],xn[Sn]=null}function Cg(r,s){xn[Sn++]=Gn,xn[Sn++]=$n,xn[Sn++]=Mr,Gn=s.id,$n=s.overflow,Mr=r}var xt=null,Xe=null,Me=!1,kr=null,An=!1,$h=Error(i(519));function Or(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wa(wn(s,r)),$h}function Rg(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[wt]=r,s[Gt]=c,o){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(o=0;o<$a.length;o++)Ee($a[o],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":Ee("invalid",s),qm(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ee("invalid",s);break;case"textarea":Ee("invalid",s),$m(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||V0(s.textContent,o)?(c.popover!=null&&(Ee("beforetoggle",s),Ee("toggle",s)),c.onScroll!=null&&Ee("scroll",s),c.onScrollEnd!=null&&Ee("scrollend",s),c.onClick!=null&&(s.onclick=Wn),s=!0):s=!1,s||Or(r,!0)}function Mg(r){for(xt=r.return;xt;)switch(xt.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:xt=xt.return}}function cs(r){if(r!==xt)return!1;if(!Me)return Mg(r),Me=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||ld(r.type,r.memoizedProps)),o=!o),o&&Xe&&Or(r),Mg(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Xe=ev(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Xe=ev(r)}else s===27?(s=Xe,Vr(r.type)?(r=dd,dd=null,Xe=r):Xe=s):Xe=xt?En(r.stateNode.nextSibling):null;return!0}function pi(){Xe=xt=null,Me=!1}function Hh(){var r=kr;return r!==null&&(Yt===null?Yt=r:Yt.push.apply(Yt,r),kr=null),r}function wa(r){kr===null?kr=[r]:kr.push(r)}var Vh=z(null),yi=null,tr=null;function Dr(r,s,o){W(Vh,s._currentValue),s._currentValue=o}function nr(r){r._currentValue=Vh.current,F(Vh)}function Fh(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function Yh(r,s,o,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var _=p.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=p;for(var P=0;P<s.length;P++)if(R.context===s[P]){y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),Fh(y.return,o,r),c||(_=null);break e}y=R.next}}else if(p.tag===18){if(_=p.return,_===null)throw Error(i(341));_.lanes|=o,y=_.alternate,y!==null&&(y.lanes|=o),Fh(_,o,r),_=null}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}}function hs(r,s,o,c){r=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var _=p.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var R=p.type;nn(p.pendingProps.value,_.value)||(r!==null?r.push(R):r=[R])}}else if(p===ge.current){if(_=p.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Xa):r=[Xa])}p=p.return}r!==null&&Yh(s,r,o,c),s.flags|=262144}function Il(r){for(r=r.firstContext;r!==null;){if(!nn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function mi(r){yi=r,tr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function St(r){return kg(yi,r)}function Ll(r,s){return yi===null&&mi(r),kg(r,s)}function kg(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},tr===null){if(r===null)throw Error(i(308));tr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else tr=tr.next=s;return o}var sT=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},aT=t.unstable_scheduleCallback,oT=t.unstable_NormalPriority,ot={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new sT,data:new Map,refCount:0}}function xa(r){r.refCount--,r.refCount===0&&aT(oT,function(){r.controller.abort()})}var Sa=null,Qh=0,fs=0,ds=null;function lT(r,s){if(Sa===null){var o=Sa=[];Qh=0,fs=Jf(),ds={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Qh++,s.then(Og,Og),s}function Og(){if(--Qh===0&&Sa!==null){ds!==null&&(ds.status="fulfilled");var r=Sa;Sa=null,fs=0,ds=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function uT(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(c.status="rejected",c.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),c}var Dg=U.S;U.S=function(r,s){y0=Jt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lT(r,s),Dg!==null&&Dg(r,s)};var gi=z(null);function Kh(){var r=gi.current;return r!==null?r:$e.pooledCache}function ql(r,s){s===null?W(gi,gi.current):W(gi,s.pool)}function Ug(){var r=Kh();return r===null?null:{parent:ot._currentValue,pool:r}}var ps=Error(i(460)),Wh=Error(i(474)),Gl=Error(i(542)),$l={then:function(){}};function Pg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function zg(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Wn,Wn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Bg(r),r;default:if(typeof s.status=="string")s.then(Wn,Wn);else{if(r=$e,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=c}},function(c){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Bg(r),r}throw vi=s,ps}}function bi(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(vi=o,ps):o}}var vi=null;function jg(){if(vi===null)throw Error(i(459));var r=vi;return vi=null,r}function Bg(r){if(r===ps||r===Gl)throw Error(i(483))}var ys=null,Aa=0;function Hl(r){var s=Aa;return Aa+=1,ys===null&&(ys=[]),zg(ys,r,s)}function Ta(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Vl(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Ng(r){function s(q,I){if(r){var G=q.deletions;G===null?(q.deletions=[I],q.flags|=16):G.push(I)}}function o(q,I){if(!r)return null;for(;I!==null;)s(q,I),I=I.sibling;return null}function c(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function p(q,I){return q=Jn(q,I),q.index=0,q.sibling=null,q}function y(q,I,G){return q.index=G,r?(G=q.alternate,G!==null?(G=G.index,G<I?(q.flags|=67108866,I):G):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function _(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function R(q,I,G,Q){return I===null||I.tag!==6?(I=Ih(G,q.mode,Q),I.return=q,I):(I=p(I,G),I.return=q,I)}function P(q,I,G,Q){var de=G.type;return de===A?X(q,I,G.props.children,Q,G.key):I!==null&&(I.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===k&&bi(de)===I.type)?(I=p(I,G.props),Ta(I,G),I.return=q,I):(I=Bl(G.type,G.key,G.props,null,q.mode,Q),Ta(I,G),I.return=q,I)}function $(q,I,G,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==G.containerInfo||I.stateNode.implementation!==G.implementation?(I=Lh(G,q.mode,Q),I.return=q,I):(I=p(I,G.children||[]),I.return=q,I)}function X(q,I,G,Q,de){return I===null||I.tag!==7?(I=di(G,q.mode,Q,de),I.return=q,I):(I=p(I,G),I.return=q,I)}function K(q,I,G){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Ih(""+I,q.mode,G),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return G=Bl(I.type,I.key,I.props,null,q.mode,G),Ta(G,I),G.return=q,G;case w:return I=Lh(I,q.mode,G),I.return=q,I;case k:return I=bi(I),K(q,I,G)}if(ae(I)||H(I))return I=di(I,q.mode,G,null),I.return=q,I;if(typeof I.then=="function")return K(q,Hl(I),G);if(I.$$typeof===T)return K(q,Ll(q,I),G);Vl(q,I)}return null}function V(q,I,G,Q){var de=I!==null?I.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return de!==null?null:R(q,I,""+G,Q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return G.key===de?P(q,I,G,Q):null;case w:return G.key===de?$(q,I,G,Q):null;case k:return G=bi(G),V(q,I,G,Q)}if(ae(G)||H(G))return de!==null?null:X(q,I,G,Q,null);if(typeof G.then=="function")return V(q,I,Hl(G),Q);if(G.$$typeof===T)return V(q,I,Ll(q,G),Q);Vl(q,G)}return null}function Y(q,I,G,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return q=q.get(G)||null,R(I,q,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return q=q.get(Q.key===null?G:Q.key)||null,P(I,q,Q,de);case w:return q=q.get(Q.key===null?G:Q.key)||null,$(I,q,Q,de);case k:return Q=bi(Q),Y(q,I,G,Q,de)}if(ae(Q)||H(Q))return q=q.get(G)||null,X(I,q,Q,de,null);if(typeof Q.then=="function")return Y(q,I,G,Hl(Q),de);if(Q.$$typeof===T)return Y(q,I,G,Ll(I,Q),de);Vl(I,Q)}return null}function le(q,I,G,Q){for(var de=null,Ue=null,he=I,xe=I=0,Re=null;he!==null&&xe<G.length;xe++){he.index>xe?(Re=he,he=null):Re=he.sibling;var Pe=V(q,he,G[xe],Q);if(Pe===null){he===null&&(he=Re);break}r&&he&&Pe.alternate===null&&s(q,he),I=y(Pe,I,xe),Ue===null?de=Pe:Ue.sibling=Pe,Ue=Pe,he=Re}if(xe===G.length)return o(q,he),Me&&er(q,xe),de;if(he===null){for(;xe<G.length;xe++)he=K(q,G[xe],Q),he!==null&&(I=y(he,I,xe),Ue===null?de=he:Ue.sibling=he,Ue=he);return Me&&er(q,xe),de}for(he=c(he);xe<G.length;xe++)Re=Y(he,q,xe,G[xe],Q),Re!==null&&(r&&Re.alternate!==null&&he.delete(Re.key===null?xe:Re.key),I=y(Re,I,xe),Ue===null?de=Re:Ue.sibling=Re,Ue=Re);return r&&he.forEach(function(Kr){return s(q,Kr)}),Me&&er(q,xe),de}function pe(q,I,G,Q){if(G==null)throw Error(i(151));for(var de=null,Ue=null,he=I,xe=I=0,Re=null,Pe=G.next();he!==null&&!Pe.done;xe++,Pe=G.next()){he.index>xe?(Re=he,he=null):Re=he.sibling;var Kr=V(q,he,Pe.value,Q);if(Kr===null){he===null&&(he=Re);break}r&&he&&Kr.alternate===null&&s(q,he),I=y(Kr,I,xe),Ue===null?de=Kr:Ue.sibling=Kr,Ue=Kr,he=Re}if(Pe.done)return o(q,he),Me&&er(q,xe),de;if(he===null){for(;!Pe.done;xe++,Pe=G.next())Pe=K(q,Pe.value,Q),Pe!==null&&(I=y(Pe,I,xe),Ue===null?de=Pe:Ue.sibling=Pe,Ue=Pe);return Me&&er(q,xe),de}for(he=c(he);!Pe.done;xe++,Pe=G.next())Pe=Y(he,q,xe,Pe.value,Q),Pe!==null&&(r&&Pe.alternate!==null&&he.delete(Pe.key===null?xe:Pe.key),I=y(Pe,I,xe),Ue===null?de=Pe:Ue.sibling=Pe,Ue=Pe);return r&&he.forEach(function(_E){return s(q,_E)}),Me&&er(q,xe),de}function qe(q,I,G,Q){if(typeof G=="object"&&G!==null&&G.type===A&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case b:e:{for(var de=G.key;I!==null;){if(I.key===de){if(de=G.type,de===A){if(I.tag===7){o(q,I.sibling),Q=p(I,G.props.children),Q.return=q,q=Q;break e}}else if(I.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===k&&bi(de)===I.type){o(q,I.sibling),Q=p(I,G.props),Ta(Q,G),Q.return=q,q=Q;break e}o(q,I);break}else s(q,I);I=I.sibling}G.type===A?(Q=di(G.props.children,q.mode,Q,G.key),Q.return=q,q=Q):(Q=Bl(G.type,G.key,G.props,null,q.mode,Q),Ta(Q,G),Q.return=q,q=Q)}return _(q);case w:e:{for(de=G.key;I!==null;){if(I.key===de)if(I.tag===4&&I.stateNode.containerInfo===G.containerInfo&&I.stateNode.implementation===G.implementation){o(q,I.sibling),Q=p(I,G.children||[]),Q.return=q,q=Q;break e}else{o(q,I);break}else s(q,I);I=I.sibling}Q=Lh(G,q.mode,Q),Q.return=q,q=Q}return _(q);case k:return G=bi(G),qe(q,I,G,Q)}if(ae(G))return le(q,I,G,Q);if(H(G)){if(de=H(G),typeof de!="function")throw Error(i(150));return G=de.call(G),pe(q,I,G,Q)}if(typeof G.then=="function")return qe(q,I,Hl(G),Q);if(G.$$typeof===T)return qe(q,I,Ll(q,G),Q);Vl(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,I!==null&&I.tag===6?(o(q,I.sibling),Q=p(I,G),Q.return=q,q=Q):(o(q,I),Q=Ih(G,q.mode,Q),Q.return=q,q=Q),_(q)):o(q,I)}return function(q,I,G,Q){try{Aa=0;var de=qe(q,I,G,Q);return ys=null,de}catch(he){if(he===ps||he===Gl)throw he;var Ue=rn(29,he,null,q.mode);return Ue.lanes=Q,Ue.return=q,Ue}}}var _i=Ng(!0),Ig=Ng(!1),Ur=!1;function Zh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Pr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zr(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,s=jl(r),xg(r,null,o),s}return zl(r,c,s,o),jl(r)}function Ea(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,km(r,o)}}function ef(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?p=y=s:y=y.next=s}else p=y=s;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var tf=!1;function Ca(){if(tf){var r=ds;if(r!==null)throw r}}function Ra(r,s,o,c){tf=!1;var p=r.updateQueue;Ur=!1;var y=p.firstBaseUpdate,_=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var P=R,$=P.next;P.next=null,_===null?y=$:_.next=$,_=P;var X=r.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==_&&(R===null?X.firstBaseUpdate=$:R.next=$,X.lastBaseUpdate=P))}if(y!==null){var K=p.baseState;_=0,X=$=P=null,R=y;do{var V=R.lane&-536870913,Y=V!==R.lane;if(Y?(Ce&V)===V:(c&V)===V){V!==0&&V===fs&&(tf=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var le=r,pe=R;V=s;var qe=o;switch(pe.tag){case 1:if(le=pe.payload,typeof le=="function"){K=le.call(qe,K,V);break e}K=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=pe.payload,V=typeof le=="function"?le.call(qe,K,V):le,V==null)break e;K=g({},K,V);break e;case 2:Ur=!0}}V=R.callback,V!==null&&(r.flags|=64,Y&&(r.flags|=8192),Y=p.callbacks,Y===null?p.callbacks=[V]:Y.push(V))}else Y={lane:V,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?($=X=Y,P=K):X=X.next=Y,_|=V;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);X===null&&(P=K),p.baseState=P,p.firstBaseUpdate=$,p.lastBaseUpdate=X,y===null&&(p.shared.lanes=0),Lr|=_,r.lanes=_,r.memoizedState=K}}function Lg(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function qg(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Lg(o[r],s)}var ms=z(null),Fl=z(0);function Gg(r,s){r=hr,W(Fl,r),W(ms,s),hr=r|s.baseLanes}function nf(){W(Fl,hr),W(ms,ms.current)}function rf(){hr=Fl.current,F(ms),F(Fl)}var sn=z(null),Tn=null;function jr(r){var s=r.alternate;W(st,st.current&1),W(sn,r),Tn===null&&(s===null||ms.current!==null||s.memoizedState!==null)&&(Tn=r)}function sf(r){W(st,st.current),W(sn,r),Tn===null&&(Tn=r)}function $g(r){r.tag===22?(W(st,st.current),W(sn,r),Tn===null&&(Tn=r)):Br()}function Br(){W(st,st.current),W(sn,sn.current)}function an(r){F(sn),Tn===r&&(Tn=null),F(st)}var st=z(0);function Yl(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||hd(o)||fd(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rr=0,we=null,Ie=null,lt=null,Xl=!1,gs=!1,wi=!1,Ql=0,Ma=0,bs=null,cT=0;function tt(){throw Error(i(321))}function af(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!nn(r[o],s[o]))return!1;return!0}function of(r,s,o,c,p,y){return rr=y,we=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=r===null||r.memoizedState===null?Eb:xf,wi=!1,y=o(c,p),wi=!1,gs&&(y=Vg(s,o,c,p)),Hg(r),y}function Hg(r){U.H=Da;var s=Ie!==null&&Ie.next!==null;if(rr=0,lt=Ie=we=null,Xl=!1,Ma=0,bs=null,s)throw Error(i(300));r===null||ut||(r=r.dependencies,r!==null&&Il(r)&&(ut=!0))}function Vg(r,s,o,c){we=r;var p=0;do{if(gs&&(bs=null),Ma=0,gs=!1,25<=p)throw Error(i(301));if(p+=1,lt=Ie=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=Cb,y=s(o,c)}while(gs);return y}function hT(){var r=U.H,s=r.useState()[0];return s=typeof s.then=="function"?ka(s):s,r=r.useState()[0],(Ie!==null?Ie.memoizedState:null)!==r&&(we.flags|=1024),s}function lf(){var r=Ql!==0;return Ql=0,r}function uf(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function cf(r){if(Xl){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xl=!1}rr=0,lt=Ie=we=null,gs=!1,Ma=Ql=0,bs=null}function It(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?we.memoizedState=lt=r:lt=lt.next=r,lt}function at(){if(Ie===null){var r=we.alternate;r=r!==null?r.memoizedState:null}else r=Ie.next;var s=lt===null?we.memoizedState:lt.next;if(s!==null)lt=s,Ie=r;else{if(r===null)throw we.alternate===null?Error(i(467)):Error(i(310));Ie=r,r={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},lt===null?we.memoizedState=lt=r:lt=lt.next=r}return lt}function Kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(r){var s=Ma;return Ma+=1,bs===null&&(bs=[]),r=zg(bs,r,s),s=we,(lt===null?s.memoizedState:lt.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Eb:xf),r}function Wl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ka(r);if(r.$$typeof===T)return St(r)}throw Error(i(438,String(r)))}function hf(r){var s=null,o=we.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=we.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kl(),we.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=B;return s.index++,o}function ir(r,s){return typeof s=="function"?s(r):s}function Zl(r){var s=at();return ff(s,Ie,r)}function ff(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var p=r.baseQueue,y=c.pending;if(y!==null){if(p!==null){var _=p.next;p.next=y.next,y.next=_}s.baseQueue=p=y,c.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{s=p.next;var R=_=null,P=null,$=s,X=!1;do{var K=$.lane&-536870913;if(K!==$.lane?(Ce&K)===K:(rr&K)===K){var V=$.revertLane;if(V===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),K===fs&&(X=!0);else if((rr&V)===V){$=$.next,V===fs&&(X=!0);continue}else K={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(R=P=K,_=y):P=P.next=K,we.lanes|=V,Lr|=V;K=$.action,wi&&o(y,K),y=$.hasEagerState?$.eagerState:o(y,K)}else V={lane:K,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(R=P=V,_=y):P=P.next=V,we.lanes|=K,Lr|=K;$=$.next}while($!==null&&$!==s);if(P===null?_=y:P.next=R,!nn(y,r.memoizedState)&&(ut=!0,X&&(o=ds,o!==null)))throw o;r.memoizedState=y,r.baseState=_,r.baseQueue=P,c.lastRenderedState=y}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function df(r){var s=at(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,p=o.pending,y=s.memoizedState;if(p!==null){o.pending=null;var _=p=p.next;do y=r(y,_.action),_=_.next;while(_!==p);nn(y,s.memoizedState)||(ut=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,c]}function Fg(r,s,o){var c=we,p=at(),y=Me;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var _=!nn((Ie||p).memoizedState,o);if(_&&(p.memoizedState=o,ut=!0),p=p.queue,mf(Qg.bind(null,c,p,r),[r]),p.getSnapshot!==s||_||lt!==null&&lt.memoizedState.tag&1){if(c.flags|=2048,vs(9,{destroy:void 0},Xg.bind(null,c,p,o,s),null),$e===null)throw Error(i(349));y||(rr&127)!==0||Yg(c,s,o)}return o}function Yg(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=we.updateQueue,s===null?(s=Kl(),we.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Xg(r,s,o,c){s.value=o,s.getSnapshot=c,Kg(s)&&Wg(r)}function Qg(r,s,o){return o(function(){Kg(s)&&Wg(r)})}function Kg(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!nn(r,o)}catch{return!0}}function Wg(r){var s=fi(r,2);s!==null&&Xt(s,r,2)}function pf(r){var s=It();if(typeof r=="function"){var o=r;if(r=o(),wi){Er(!0);try{o()}finally{Er(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:r},s}function Zg(r,s,o,c){return r.baseState=o,ff(r,Ie,typeof c=="function"?c:ir)}function fT(r,s,o,c,p){if(tu(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};U.T!==null?o(!0):y.isTransition=!1,c(y),o=s.pending,o===null?(y.next=s.pending=y,Jg(s,y)):(y.next=o.next,s.pending=o.next=y)}}function Jg(r,s){var o=s.action,c=s.payload,p=r.state;if(s.isTransition){var y=U.T,_={};U.T=_;try{var R=o(p,c),P=U.S;P!==null&&P(_,R),eb(r,s,R)}catch($){yf(r,s,$)}finally{y!==null&&_.types!==null&&(y.types=_.types),U.T=y}}else try{y=o(p,c),eb(r,s,y)}catch($){yf(r,s,$)}}function eb(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){tb(r,s,c)},function(c){return yf(r,s,c)}):tb(r,s,o)}function tb(r,s,o){s.status="fulfilled",s.value=o,nb(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Jg(r,o)))}function yf(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,nb(s),s=s.next;while(s!==c)}r.action=null}function nb(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function rb(r,s){return s}function ib(r,s){if(Me){var o=$e.formState;if(o!==null){e:{var c=we;if(Me){if(Xe){t:{for(var p=Xe,y=An;p.nodeType!==8;){if(!y){p=null;break t}if(p=En(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Xe=En(p.nextSibling),c=p.data==="F!";break e}}Or(c)}c=!1}c&&(s=o[0])}}return o=It(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rb,lastRenderedState:s},o.queue=c,o=Sb.bind(null,we,c),c.dispatch=o,c=pf(!1),y=wf.bind(null,we,!1,c.queue),c=It(),p={state:s,dispatch:null,action:r,pending:null},c.queue=p,o=fT.bind(null,we,p,y,o),p.dispatch=o,c.memoizedState=r,[s,o,!1]}function sb(r){var s=at();return ab(s,Ie,r)}function ab(r,s,o){if(s=ff(r,s,rb)[0],r=Zl(ir)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ka(s)}catch(_){throw _===ps?Gl:_}else c=s;s=at();var p=s.queue,y=p.dispatch;return o!==s.memoizedState&&(we.flags|=2048,vs(9,{destroy:void 0},dT.bind(null,p,o),null)),[c,y,r]}function dT(r,s){r.action=s}function ob(r){var s=at(),o=Ie;if(o!==null)return ab(s,o,r);at(),s=s.memoizedState,o=at();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function vs(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=we.updateQueue,s===null&&(s=Kl(),we.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function lb(){return at().memoizedState}function Jl(r,s,o,c){var p=It();we.flags|=r,p.memoizedState=vs(1|s,{destroy:void 0},o,c===void 0?null:c)}function eu(r,s,o,c){var p=at();c=c===void 0?null:c;var y=p.memoizedState.inst;Ie!==null&&c!==null&&af(c,Ie.memoizedState.deps)?p.memoizedState=vs(s,y,o,c):(we.flags|=r,p.memoizedState=vs(1|s,y,o,c))}function ub(r,s){Jl(8390656,8,r,s)}function mf(r,s){eu(2048,8,r,s)}function pT(r){we.flags|=4;var s=we.updateQueue;if(s===null)s=Kl(),we.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function cb(r){var s=at().memoizedState;return pT({ref:s,nextImpl:r}),function(){if((ze&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function hb(r,s){return eu(4,2,r,s)}function fb(r,s){return eu(4,4,r,s)}function db(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function pb(r,s,o){o=o!=null?o.concat([r]):null,eu(4,4,db.bind(null,s,r),o)}function gf(){}function yb(r,s){var o=at();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&af(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function mb(r,s){var o=at();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&af(s,c[1]))return c[0];if(c=r(),wi){Er(!0);try{r()}finally{Er(!1)}}return o.memoizedState=[c,s],c}function bf(r,s,o){return o===void 0||(rr&1073741824)!==0&&(Ce&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=g0(),we.lanes|=r,Lr|=r,o)}function gb(r,s,o,c){return nn(o,s)?o:ms.current!==null?(r=bf(r,o,c),nn(r,s)||(ut=!0),r):(rr&42)===0||(rr&1073741824)!==0&&(Ce&261930)===0?(ut=!0,r.memoizedState=o):(r=g0(),we.lanes|=r,Lr|=r,s)}function bb(r,s,o,c,p){var y=L.p;L.p=y!==0&&8>y?y:8;var _=U.T,R={};U.T=R,wf(r,!1,s,o);try{var P=p(),$=U.S;if($!==null&&$(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var X=uT(P,c);Oa(r,s,X,un(r))}else Oa(r,s,c,un(r))}catch(K){Oa(r,s,{then:function(){},status:"rejected",reason:K},un())}finally{L.p=y,_!==null&&R.types!==null&&(_.types=R.types),U.T=_}}function yT(){}function vf(r,s,o,c){if(r.tag!==5)throw Error(i(476));var p=vb(r).queue;bb(r,p,s,te,o===null?yT:function(){return _b(r),o(c)})}function vb(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function _b(r){var s=vb(r);s.next===null&&(s=r.alternate.memoizedState),Oa(r,s.next.queue,{},un())}function _f(){return St(Xa)}function wb(){return at().memoizedState}function xb(){return at().memoizedState}function mT(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=un();r=Pr(o);var c=zr(s,r,o);c!==null&&(Xt(c,s,o),Ea(c,s,o)),s={cache:Xh()},r.payload=s;return}s=s.return}}function gT(r,s,o){var c=un();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},tu(r)?Ab(s,o):(o=Bh(r,s,o,c),o!==null&&(Xt(o,r,c),Tb(o,s,c)))}function Sb(r,s,o){var c=un();Oa(r,s,o,c)}function Oa(r,s,o,c){var p={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(tu(r))Ab(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var _=s.lastRenderedState,R=y(_,o);if(p.hasEagerState=!0,p.eagerState=R,nn(R,_))return zl(r,s,p,0),$e===null&&Pl(),!1}catch{}if(o=Bh(r,s,p,c),o!==null)return Xt(o,r,c),Tb(o,s,c),!0}return!1}function wf(r,s,o,c){if(c={lane:2,revertLane:Jf(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},tu(r)){if(s)throw Error(i(479))}else s=Bh(r,o,c,2),s!==null&&Xt(s,r,2)}function tu(r){var s=r.alternate;return r===we||s!==null&&s===we}function Ab(r,s){gs=Xl=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Tb(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,km(r,o)}}var Da={readContext:St,use:Wl,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Da.useEffectEvent=tt;var Eb={readContext:St,use:Wl,useCallback:function(r,s){return It().memoizedState=[r,s===void 0?null:s],r},useContext:St,useEffect:ub,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Jl(4194308,4,db.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Jl(4194308,4,r,s)},useInsertionEffect:function(r,s){Jl(4,2,r,s)},useMemo:function(r,s){var o=It();s=s===void 0?null:s;var c=r();if(wi){Er(!0);try{r()}finally{Er(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=It();if(o!==void 0){var p=o(s);if(wi){Er(!0);try{o(s)}finally{Er(!1)}}}else p=s;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=gT.bind(null,we,r),[c.memoizedState,r]},useRef:function(r){var s=It();return r={current:r},s.memoizedState=r},useState:function(r){r=pf(r);var s=r.queue,o=Sb.bind(null,we,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:gf,useDeferredValue:function(r,s){var o=It();return bf(o,r,s)},useTransition:function(){var r=pf(!1);return r=bb.bind(null,we,r.queue,!0,!1),It().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=we,p=It();if(Me){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),$e===null)throw Error(i(349));(Ce&127)!==0||Yg(c,s,o)}p.memoizedState=o;var y={value:o,getSnapshot:s};return p.queue=y,ub(Qg.bind(null,c,y,r),[r]),c.flags|=2048,vs(9,{destroy:void 0},Xg.bind(null,c,y,o,s),null),o},useId:function(){var r=It(),s=$e.identifierPrefix;if(Me){var o=$n,c=Gn;o=(c&~(1<<32-tn(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Ql++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=cT++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:_f,useFormState:ib,useActionState:ib,useOptimistic:function(r){var s=It();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=wf.bind(null,we,!0,o),o.dispatch=s,[r,s]},useMemoCache:hf,useCacheRefresh:function(){return It().memoizedState=mT.bind(null,we)},useEffectEvent:function(r){var s=It(),o={impl:r};return s.memoizedState=o,function(){if((ze&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},xf={readContext:St,use:Wl,useCallback:yb,useContext:St,useEffect:mf,useImperativeHandle:pb,useInsertionEffect:hb,useLayoutEffect:fb,useMemo:mb,useReducer:Zl,useRef:lb,useState:function(){return Zl(ir)},useDebugValue:gf,useDeferredValue:function(r,s){var o=at();return gb(o,Ie.memoizedState,r,s)},useTransition:function(){var r=Zl(ir)[0],s=at().memoizedState;return[typeof r=="boolean"?r:ka(r),s]},useSyncExternalStore:Fg,useId:wb,useHostTransitionStatus:_f,useFormState:sb,useActionState:sb,useOptimistic:function(r,s){var o=at();return Zg(o,Ie,r,s)},useMemoCache:hf,useCacheRefresh:xb};xf.useEffectEvent=cb;var Cb={readContext:St,use:Wl,useCallback:yb,useContext:St,useEffect:mf,useImperativeHandle:pb,useInsertionEffect:hb,useLayoutEffect:fb,useMemo:mb,useReducer:df,useRef:lb,useState:function(){return df(ir)},useDebugValue:gf,useDeferredValue:function(r,s){var o=at();return Ie===null?bf(o,r,s):gb(o,Ie.memoizedState,r,s)},useTransition:function(){var r=df(ir)[0],s=at().memoizedState;return[typeof r=="boolean"?r:ka(r),s]},useSyncExternalStore:Fg,useId:wb,useHostTransitionStatus:_f,useFormState:ob,useActionState:ob,useOptimistic:function(r,s){var o=at();return Ie!==null?Zg(o,Ie,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:hf,useCacheRefresh:xb};Cb.useEffectEvent=cb;function Sf(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:g({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Af={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=un(),p=Pr(c);p.payload=s,o!=null&&(p.callback=o),s=zr(r,p,c),s!==null&&(Xt(s,r,c),Ea(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=un(),p=Pr(c);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=zr(r,p,c),s!==null&&(Xt(s,r,c),Ea(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=un(),c=Pr(o);c.tag=2,s!=null&&(c.callback=s),s=zr(r,c,o),s!==null&&(Xt(s,r,o),Ea(s,r,o))}};function Rb(r,s,o,c,p,y,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,y,_):s.prototype&&s.prototype.isPureReactComponent?!ba(o,c)||!ba(p,y):!0}function Mb(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&Af.enqueueReplaceState(s,s.state,null)}function xi(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=g({},o));for(var p in r)o[p]===void 0&&(o[p]=r[p])}return o}function kb(r){Ul(r)}function Ob(r){console.error(r)}function Db(r){Ul(r)}function nu(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Ub(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Tf(r,s,o){return o=Pr(o),o.tag=3,o.payload={element:null},o.callback=function(){nu(r,s)},o}function Pb(r){return r=Pr(r),r.tag=3,r}function zb(r,s,o,c){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;r.payload=function(){return p(y)},r.callback=function(){Ub(s,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){Ub(s,o,c),typeof p!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function bT(r,s,o,c,p){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&hs(s,o,p,!0),o=sn.current,o!==null){switch(o.tag){case 31:case 13:return Tn===null?pu():o.alternate===null&&nt===0&&(nt=3),o.flags&=-257,o.flags|=65536,o.lanes=p,c===$l?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Kf(r,c,p)),!1;case 22:return o.flags|=65536,c===$l?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Kf(r,c,p)),!1}throw Error(i(435,o.tag))}return Kf(r,c,p),pu(),!1}if(Me)return s=sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,c!==$h&&(r=Error(i(422),{cause:c}),wa(wn(r,o)))):(c!==$h&&(s=Error(i(423),{cause:c}),wa(wn(s,o))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=wn(c,o),p=Tf(r.stateNode,c,p),ef(r,p),nt!==4&&(nt=2)),!1;var y=Error(i(520),{cause:c});if(y=wn(y,o),La===null?La=[y]:La.push(y),nt!==4&&(nt=2),s===null)return!0;c=wn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=p&-p,o.lanes|=r,r=Tf(o.stateNode,c,r),ef(o,r),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(qr===null||!qr.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Pb(p),zb(p,r,o,c),ef(o,p),!1}o=o.return}while(o!==null);return!1}var Ef=Error(i(461)),ut=!1;function At(r,s,o,c){s.child=r===null?Ig(s,null,o,c):_i(s,r.child,o,c)}function jb(r,s,o,c,p){o=o.render;var y=s.ref;if("ref"in c){var _={};for(var R in c)R!=="ref"&&(_[R]=c[R])}else _=c;return mi(s),c=of(r,s,o,_,y,p),R=lf(),r!==null&&!ut?(uf(r,s,p),sr(r,s,p)):(Me&&R&&qh(s),s.flags|=1,At(r,s,c,p),s.child)}function Bb(r,s,o,c,p){if(r===null){var y=o.type;return typeof y=="function"&&!Nh(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,Nb(r,s,y,c,p)):(r=Bl(o.type,null,c,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!Pf(r,p)){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:ba,o(_,c)&&r.ref===s.ref)return sr(r,s,p)}return s.flags|=1,r=Jn(y,c),r.ref=s.ref,r.return=s,s.child=r}function Nb(r,s,o,c,p){if(r!==null){var y=r.memoizedProps;if(ba(y,c)&&r.ref===s.ref)if(ut=!1,s.pendingProps=c=y,Pf(r,p))(r.flags&131072)!==0&&(ut=!0);else return s.lanes=r.lanes,sr(r,s,p)}return Cf(r,s,o,c,p)}function Ib(r,s,o,c){var p=c.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(c=s.child=r.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,s.child=null;return Lb(r,s,y,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&ql(s,y!==null?y.cachePool:null),y!==null?Gg(s,y):nf(),$g(s);else return c=s.lanes=536870912,Lb(r,s,y!==null?y.baseLanes|o:o,o,c)}else y!==null?(ql(s,y.cachePool),Gg(s,y),Br(),s.memoizedState=null):(r!==null&&ql(s,null),nf(),Br());return At(r,s,p,o),s.child}function Ua(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Lb(r,s,o,c,p){var y=Kh();return y=y===null?null:{parent:ot._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},r!==null&&ql(s,null),nf(),$g(s),r!==null&&hs(r,s,c,!0),s.childLanes=p,null}function ru(r,s){return s=su({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function qb(r,s,o){return _i(s,r.child,null,o),r=ru(s,s.pendingProps),r.flags|=2,an(s),s.memoizedState=null,r}function vT(r,s,o){var c=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Me){if(c.mode==="hidden")return r=ru(s,c),s.lanes=536870912,Ua(null,r);if(sf(s),(r=Xe)?(r=J0(r,An),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Mr!==null?{id:Gn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},o=Ag(r),o.return=s,s.child=o,xt=s,Xe=null)):r=null,r===null)throw Or(s);return s.lanes=536870912,null}return ru(s,c)}var y=r.memoizedState;if(y!==null){var _=y.dehydrated;if(sf(s),p)if(s.flags&256)s.flags&=-257,s=qb(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(ut||hs(r,s,o,!1),p=(o&r.childLanes)!==0,ut||p){if(c=$e,c!==null&&(_=Om(c,o),_!==0&&_!==y.retryLane))throw y.retryLane=_,fi(r,_),Xt(c,r,_),Ef;pu(),s=qb(r,s,o)}else r=y.treeContext,Xe=En(_.nextSibling),xt=s,Me=!0,kr=null,An=!1,r!==null&&Cg(s,r),s=ru(s,c),s.flags|=4096;return s}return r=Jn(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function iu(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Cf(r,s,o,c,p){return mi(s),o=of(r,s,o,c,void 0,p),c=lf(),r!==null&&!ut?(uf(r,s,p),sr(r,s,p)):(Me&&c&&qh(s),s.flags|=1,At(r,s,o,p),s.child)}function Gb(r,s,o,c,p,y){return mi(s),s.updateQueue=null,o=Vg(s,c,o,p),Hg(r),c=lf(),r!==null&&!ut?(uf(r,s,y),sr(r,s,y)):(Me&&c&&qh(s),s.flags|=1,At(r,s,o,y),s.child)}function $b(r,s,o,c,p){if(mi(s),s.stateNode===null){var y=os,_=o.contextType;typeof _=="object"&&_!==null&&(y=St(_)),y=new o(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Af,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Zh(s),_=o.contextType,y.context=typeof _=="object"&&_!==null?St(_):os,y.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Sf(s,o,_,c),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Af.enqueueReplaceState(y,y.state,null),Ra(s,c,y,p),Ca(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){y=s.stateNode;var R=s.memoizedProps,P=xi(o,R);y.props=P;var $=y.context,X=o.contextType;_=os,typeof X=="object"&&X!==null&&(_=St(X));var K=o.getDerivedStateFromProps;X=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||$!==_)&&Mb(s,y,c,_),Ur=!1;var V=s.memoizedState;y.state=V,Ra(s,c,y,p),Ca(),$=s.memoizedState,R||V!==$||Ur?(typeof K=="function"&&(Sf(s,o,K,c),$=s.memoizedState),(P=Ur||Rb(s,o,P,c,V,$,_))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),y.props=c,y.state=$,y.context=_,c=P):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,Jh(r,s),_=s.memoizedProps,X=xi(o,_),y.props=X,K=s.pendingProps,V=y.context,$=o.contextType,P=os,typeof $=="object"&&$!==null&&(P=St($)),R=o.getDerivedStateFromProps,($=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==K||V!==P)&&Mb(s,y,c,P),Ur=!1,V=s.memoizedState,y.state=V,Ra(s,c,y,p),Ca();var Y=s.memoizedState;_!==K||V!==Y||Ur||r!==null&&r.dependencies!==null&&Il(r.dependencies)?(typeof R=="function"&&(Sf(s,o,R,c),Y=s.memoizedState),(X=Ur||Rb(s,o,X,c,V,Y,P)||r!==null&&r.dependencies!==null&&Il(r.dependencies))?($||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,Y,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,Y,P)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&V===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&V===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Y),y.props=c,y.state=Y,y.context=P,c=X):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&V===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&V===r.memoizedState||(s.flags|=1024),c=!1)}return y=c,iu(r,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&c?(s.child=_i(s,r.child,null,p),s.child=_i(s,null,o,p)):At(r,s,o,p),s.memoizedState=y.state,r=s.child):r=sr(r,s,p),r}function Hb(r,s,o,c){return pi(),s.flags|=256,At(r,s,o,c),s.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(r){return{baseLanes:r,cachePool:Ug()}}function kf(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=ln),r}function Vb(r,s,o){var c=s.pendingProps,p=!1,y=(s.flags&128)!==0,_;if((_=y)||(_=r!==null&&r.memoizedState===null?!1:(st.current&2)!==0),_&&(p=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,r===null){if(Me){if(p?jr(s):Br(),(r=Xe)?(r=J0(r,An),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Mr!==null?{id:Gn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},o=Ag(r),o.return=s,s.child=o,xt=s,Xe=null)):r=null,r===null)throw Or(s);return fd(r)?s.lanes=32:s.lanes=536870912,null}var R=c.children;return c=c.fallback,p?(Br(),p=s.mode,R=su({mode:"hidden",children:R},p),c=di(c,p,o,null),R.return=s,c.return=s,R.sibling=c,s.child=R,c=s.child,c.memoizedState=Mf(o),c.childLanes=kf(r,_,o),s.memoizedState=Rf,Ua(null,c)):(jr(s),Of(s,R))}var P=r.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(y)s.flags&256?(jr(s),s.flags&=-257,s=Df(r,s,o)):s.memoizedState!==null?(Br(),s.child=r.child,s.flags|=128,s=null):(Br(),R=c.fallback,p=s.mode,c=su({mode:"visible",children:c.children},p),R=di(R,p,o,null),R.flags|=2,c.return=s,R.return=s,c.sibling=R,s.child=c,_i(s,r.child,null,o),c=s.child,c.memoizedState=Mf(o),c.childLanes=kf(r,_,o),s.memoizedState=Rf,s=Ua(null,c));else if(jr(s),fd(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var $=_.dgst;_=$,c=Error(i(419)),c.stack="",c.digest=_,wa({value:c,source:null,stack:null}),s=Df(r,s,o)}else if(ut||hs(r,s,o,!1),_=(o&r.childLanes)!==0,ut||_){if(_=$e,_!==null&&(c=Om(_,o),c!==0&&c!==P.retryLane))throw P.retryLane=c,fi(r,c),Xt(_,r,c),Ef;hd(R)||pu(),s=Df(r,s,o)}else hd(R)?(s.flags|=192,s.child=r.child,s=null):(r=P.treeContext,Xe=En(R.nextSibling),xt=s,Me=!0,kr=null,An=!1,r!==null&&Cg(s,r),s=Of(s,c.children),s.flags|=4096);return s}return p?(Br(),R=c.fallback,p=s.mode,P=r.child,$=P.sibling,c=Jn(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,$!==null?R=Jn($,R):(R=di(R,p,o,null),R.flags|=2),R.return=s,c.return=s,c.sibling=R,s.child=c,Ua(null,c),c=s.child,R=r.child.memoizedState,R===null?R=Mf(o):(p=R.cachePool,p!==null?(P=ot._currentValue,p=p.parent!==P?{parent:P,pool:P}:p):p=Ug(),R={baseLanes:R.baseLanes|o,cachePool:p}),c.memoizedState=R,c.childLanes=kf(r,_,o),s.memoizedState=Rf,Ua(r.child,c)):(jr(s),o=r.child,r=o.sibling,o=Jn(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(_=s.deletions,_===null?(s.deletions=[r],s.flags|=16):_.push(r)),s.child=o,s.memoizedState=null,o)}function Of(r,s){return s=su({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function su(r,s){return r=rn(22,r,null,s),r.lanes=0,r}function Df(r,s,o){return _i(s,r.child,null,o),r=Of(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Fb(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Fh(r.return,s,o)}function Uf(r,s,o,c,p,y){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p,treeForkCount:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=p,_.treeForkCount=y)}function Yb(r,s,o){var c=s.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var _=st.current,R=(_&2)!==0;if(R?(_=_&1|2,s.flags|=128):_&=1,W(st,_),At(r,s,c,o),c=Me?_a:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Fb(r,o,s);else if(r.tag===19)Fb(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)r=o.alternate,r!==null&&Yl(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),Uf(s,!1,p,o,y,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&Yl(r)===null){s.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}Uf(s,!0,o,null,y,c);break;case"together":Uf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function sr(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Lr|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(hs(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Jn(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Jn(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Pf(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Il(r)))}function _T(r,s,o){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),Dr(s,ot,r.memoizedState.cache),pi();break;case 27:case 5:Bt(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:Dr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,sf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(jr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Vb(r,s,o):(jr(s),r=sr(r,s,o),r!==null?r.sibling:null);jr(s);break;case 19:var p=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(hs(r,s,o,!1),c=(o&s.childLanes)!==0),p){if(c)return Yb(r,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(st,st.current),c)break;return null;case 22:return s.lanes=0,Ib(r,s,o,s.pendingProps);case 24:Dr(s,ot,r.memoizedState.cache)}return sr(r,s,o)}function Xb(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)ut=!0;else{if(!Pf(r,o)&&(s.flags&128)===0)return ut=!1,_T(r,s,o);ut=(r.flags&131072)!==0}else ut=!1,Me&&(s.flags&1048576)!==0&&Eg(s,_a,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=bi(s.elementType),s.type=r,typeof r=="function")Nh(r)?(c=xi(r,c),s.tag=1,s=$b(null,s,r,c,o)):(s.tag=0,s=Cf(null,s,r,c,o));else{if(r!=null){var p=r.$$typeof;if(p===E){s.tag=11,s=jb(null,s,r,c,o);break e}else if(p===M){s.tag=14,s=Bb(null,s,r,c,o);break e}}throw s=ee(r)||r,Error(i(306,s,""))}}return s;case 0:return Cf(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,p=xi(c,s.pendingProps),$b(r,s,c,p,o);case 3:e:{if(Je(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var y=s.memoizedState;p=y.element,Jh(r,s),Ra(s,c,null,o);var _=s.memoizedState;if(c=_.cache,Dr(s,ot,c),c!==y.cache&&Yh(s,[ot],o,!0),Ca(),c=_.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Hb(r,s,c,o);break e}else if(c!==p){p=wn(Error(i(424)),s),wa(p),s=Hb(r,s,c,o);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Xe=En(r.firstChild),xt=s,Me=!0,kr=null,An=!0,o=Ig(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(pi(),c===p){s=sr(r,s,o);break e}At(r,s,c,o)}s=s.child}return s;case 26:return iu(r,s),r===null?(o=sv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Me||(o=s.type,r=s.pendingProps,c=wu(oe.current).createElement(o),c[wt]=s,c[Gt]=r,Tt(c,o,r),mt(c),s.stateNode=c):s.memoizedState=sv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Bt(s),r===null&&Me&&(c=s.stateNode=nv(s.type,s.pendingProps,oe.current),xt=s,An=!0,p=Xe,Vr(s.type)?(dd=p,Xe=En(c.firstChild)):Xe=p),At(r,s,s.pendingProps.children,o),iu(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Me&&((p=c=Xe)&&(c=KT(c,s.type,s.pendingProps,An),c!==null?(s.stateNode=c,xt=s,Xe=En(c.firstChild),An=!1,p=!0):p=!1),p||Or(s)),Bt(s),p=s.type,y=s.pendingProps,_=r!==null?r.memoizedProps:null,c=y.children,ld(p,y)?c=null:_!==null&&ld(p,_)&&(s.flags|=32),s.memoizedState!==null&&(p=of(r,s,hT,null,null,o),Xa._currentValue=p),iu(r,s),At(r,s,c,o),s.child;case 6:return r===null&&Me&&((r=o=Xe)&&(o=WT(o,s.pendingProps,An),o!==null?(s.stateNode=o,xt=s,Xe=null,r=!0):r=!1),r||Or(s)),null;case 13:return Vb(r,s,o);case 4:return Je(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=_i(s,null,c,o):At(r,s,c,o),s.child;case 11:return jb(r,s,s.type,s.pendingProps,o);case 7:return At(r,s,s.pendingProps,o),s.child;case 8:return At(r,s,s.pendingProps.children,o),s.child;case 12:return At(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Dr(s,s.type,c.value),At(r,s,c.children,o),s.child;case 9:return p=s.type._context,c=s.pendingProps.children,mi(s),p=St(p),c=c(p),s.flags|=1,At(r,s,c,o),s.child;case 14:return Bb(r,s,s.type,s.pendingProps,o);case 15:return Nb(r,s,s.type,s.pendingProps,o);case 19:return Yb(r,s,o);case 31:return vT(r,s,o);case 22:return Ib(r,s,o,s.pendingProps);case 24:return mi(s),c=St(ot),r===null?(p=Kh(),p===null&&(p=$e,y=Xh(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),s.memoizedState={parent:c,cache:p},Zh(s),Dr(s,ot,p)):((r.lanes&o)!==0&&(Jh(r,s),Ra(s,null,null,o),Ca()),p=r.memoizedState,y=s.memoizedState,p.parent!==c?(p={parent:c,cache:c},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Dr(s,ot,c)):(c=y.cache,Dr(s,ot,c),c!==p.cache&&Yh(s,[ot],o,!0))),At(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ar(r){r.flags|=4}function zf(r,s,o,c,p){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(w0())r.flags|=8192;else throw vi=$l,Wh}else r.flags&=-16777217}function Qb(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!cv(s))if(w0())r.flags|=8192;else throw vi=$l,Wh}function au(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Rm():536870912,r.lanes|=s,Ss|=s)}function Pa(r,s){if(!Me)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Qe(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function wT(r,s,o){var c=s.pendingProps;switch(Gh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(s),null;case 1:return Qe(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),nr(ot),Oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(cs(s)?ar(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hh())),Qe(s),null;case 26:var p=s.type,y=s.memoizedState;return r===null?(ar(s),y!==null?(Qe(s),Qb(s,y)):(Qe(s),zf(s,p,null,c,o))):y?y!==r.memoizedState?(ar(s),Qe(s),Qb(s,y)):(Qe(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&ar(s),Qe(s),zf(s,p,r,c,o)),null;case 27:if(mn(s),o=oe.current,p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ar(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Qe(s),null}r=Z.current,cs(s)?Rg(s):(r=nv(p,c,o),s.stateNode=r,ar(s))}return Qe(s),null;case 5:if(mn(s),p=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ar(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Qe(s),null}if(y=Z.current,cs(s))Rg(s);else{var _=wu(oe.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?_.createElement(p,{is:c.is}):_.createElement(p)}}y[wt]=s,y[Gt]=c;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=y;e:switch(Tt(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ar(s)}}return Qe(s),zf(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&ar(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=oe.current,cs(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,p=xt,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[wt]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||V0(r.nodeValue,o)),r||Or(s,!0)}else r=wu(r).createTextNode(c),r[wt]=s,s.stateNode=r}return Qe(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(c=cs(s),o!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[wt]=s}else pi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),r=!1}else o=Hh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(an(s),s):(an(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Qe(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=cs(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[wt]=s}else pi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),p=!1}else p=Hh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(an(s),s):(an(s),null)}return an(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,r=r!==null&&r.memoizedState!==null,o&&(c=s.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),au(s,s.updateQueue),Qe(s),null);case 4:return Oe(),r===null&&rd(s.stateNode.containerInfo),Qe(s),null;case 10:return nr(s.type),Qe(s),null;case 19:if(F(st),c=s.memoizedState,c===null)return Qe(s),null;if(p=(s.flags&128)!==0,y=c.rendering,y===null)if(p)Pa(c,!1);else{if(nt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=Yl(r),y!==null){for(s.flags|=128,Pa(c,!1),r=y.updateQueue,s.updateQueue=r,au(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Sg(o,r),o=o.sibling;return W(st,st.current&1|2),Me&&er(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&Jt()>hu&&(s.flags|=128,p=!0,Pa(c,!1),s.lanes=4194304)}else{if(!p)if(r=Yl(y),r!==null){if(s.flags|=128,p=!0,r=r.updateQueue,s.updateQueue=r,au(s,r),Pa(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Me)return Qe(s),null}else 2*Jt()-c.renderingStartTime>hu&&o!==536870912&&(s.flags|=128,p=!0,Pa(c,!1),s.lanes=4194304);c.isBackwards?(y.sibling=s.child,s.child=y):(r=c.last,r!==null?r.sibling=y:s.child=y,c.last=y)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=Jt(),r.sibling=null,o=st.current,W(st,p?o&1|2:o&1),Me&&er(s,c.treeForkCount),r):(Qe(s),null);case 22:case 23:return an(s),rf(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Qe(s),s.subtreeFlags&6&&(s.flags|=8192)):Qe(s),o=s.updateQueue,o!==null&&au(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&F(gi),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),nr(ot),Qe(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function xT(r,s){switch(Gh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return nr(ot),Oe(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return mn(s),null;case 31:if(s.memoizedState!==null){if(an(s),s.alternate===null)throw Error(i(340));pi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(an(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));pi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return F(st),null;case 4:return Oe(),null;case 10:return nr(s.type),null;case 22:case 23:return an(s),rf(),r!==null&&F(gi),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return nr(ot),null;case 25:return null;default:return null}}function Kb(r,s){switch(Gh(s),s.tag){case 3:nr(ot),Oe();break;case 26:case 27:case 5:mn(s);break;case 4:Oe();break;case 31:s.memoizedState!==null&&an(s);break;case 13:an(s);break;case 19:F(st);break;case 10:nr(s.type);break;case 22:case 23:an(s),rf(),r!==null&&F(gi);break;case 24:nr(ot)}}function za(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var p=c.next;o=p;do{if((o.tag&r)===r){c=void 0;var y=o.create,_=o.inst;c=y(),_.destroy=c}o=o.next}while(o!==p)}}catch(R){Ne(s,s.return,R)}}function Nr(r,s,o){try{var c=s.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&r)===r){var _=c.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,p=s;var P=o,$=R;try{$()}catch(X){Ne(p,P,X)}}}c=c.next}while(c!==y)}}catch(X){Ne(s,s.return,X)}}function Wb(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{qg(s,o)}catch(c){Ne(r,r.return,c)}}}function Zb(r,s,o){o.props=xi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Ne(r,s,c)}}function ja(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(p){Ne(r,s,p)}}function Hn(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(p){Ne(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ne(r,s,p)}else o.current=null}function Jb(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(p){Ne(r,r.return,p)}}function jf(r,s,o){try{var c=r.stateNode;HT(c,r.type,o,s),c[Gt]=s}catch(p){Ne(r,r.return,p)}}function e0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Vr(r.type)||r.tag===4}function Bf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||e0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Vr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Nf(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Wn));else if(c!==4&&(c===27&&Vr(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Nf(r,s,o),r=r.sibling;r!==null;)Nf(r,s,o),r=r.sibling}function ou(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&Vr(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(ou(r,s,o),r=r.sibling;r!==null;)ou(r,s,o),r=r.sibling}function t0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Tt(s,c,o),s[wt]=r,s[Gt]=o}catch(y){Ne(r,r.return,y)}}var or=!1,ct=!1,If=!1,n0=typeof WeakSet=="function"?WeakSet:Set,gt=null;function ST(r,s){if(r=r.containerInfo,ad=Ru,r=pg(r),Oh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,R=-1,P=-1,$=0,X=0,K=r,V=null;t:for(;;){for(var Y;K!==o||p!==0&&K.nodeType!==3||(R=_+p),K!==y||c!==0&&K.nodeType!==3||(P=_+c),K.nodeType===3&&(_+=K.nodeValue.length),(Y=K.firstChild)!==null;)V=K,K=Y;for(;;){if(K===r)break t;if(V===o&&++$===p&&(R=_),V===y&&++X===c&&(P=_),(Y=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=Y}o=R===-1||P===-1?null:{start:R,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(od={focusedElem:r,selectionRange:o},Ru=!1,gt=s;gt!==null;)if(s=gt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,gt=r;else for(;gt!==null;){switch(s=gt,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)p=r[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=s,p=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var le=xi(o.type,p);r=c.getSnapshotBeforeUpdate(le,y),c.__reactInternalSnapshotBeforeUpdate=r}catch(pe){Ne(o,o.return,pe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)cd(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,gt=r;break}gt=s.return}}function r0(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ur(r,o),c&4&&za(5,o);break;case 1:if(ur(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(_){Ne(o,o.return,_)}else{var p=xi(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(_){Ne(o,o.return,_)}}c&64&&Wb(o),c&512&&ja(o,o.return);break;case 3:if(ur(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{qg(r,s)}catch(_){Ne(o,o.return,_)}}break;case 27:s===null&&c&4&&t0(o);case 26:case 5:ur(r,o),s===null&&c&4&&Jb(o),c&512&&ja(o,o.return);break;case 12:ur(r,o);break;case 31:ur(r,o),c&4&&a0(r,o);break;case 13:ur(r,o),c&4&&o0(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=DT.bind(null,o),ZT(r,o))));break;case 22:if(c=o.memoizedState!==null||or,!c){s=s!==null&&s.memoizedState!==null||ct,p=or;var y=ct;or=c,(ct=s)&&!y?cr(r,o,(o.subtreeFlags&8772)!==0):ur(r,o),or=p,ct=y}break;case 30:break;default:ur(r,o)}}function i0(r){var s=r.alternate;s!==null&&(r.alternate=null,i0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ph(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var We=null,Ht=!1;function lr(r,s,o){for(o=o.child;o!==null;)s0(r,s,o),o=o.sibling}function s0(r,s,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(aa,o)}catch{}switch(o.tag){case 26:ct||Hn(o,s),lr(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ct||Hn(o,s);var c=We,p=Ht;Vr(o.type)&&(We=o.stateNode,Ht=!1),lr(r,s,o),Va(o.stateNode),We=c,Ht=p;break;case 5:ct||Hn(o,s);case 6:if(c=We,p=Ht,We=null,lr(r,s,o),We=c,Ht=p,We!==null)if(Ht)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(o.stateNode)}catch(y){Ne(o,s,y)}else try{We.removeChild(o.stateNode)}catch(y){Ne(o,s,y)}break;case 18:We!==null&&(Ht?(r=We,W0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Os(r)):W0(We,o.stateNode));break;case 4:c=We,p=Ht,We=o.stateNode.containerInfo,Ht=!0,lr(r,s,o),We=c,Ht=p;break;case 0:case 11:case 14:case 15:Nr(2,o,s),ct||Nr(4,o,s),lr(r,s,o);break;case 1:ct||(Hn(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Zb(o,s,c)),lr(r,s,o);break;case 21:lr(r,s,o);break;case 22:ct=(c=ct)||o.memoizedState!==null,lr(r,s,o),ct=c;break;default:lr(r,s,o)}}function a0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Os(r)}catch(o){Ne(s,s.return,o)}}}function o0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Os(r)}catch(o){Ne(s,s.return,o)}}function AT(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new n0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new n0),s;default:throw Error(i(435,r.tag))}}function lu(r,s){var o=AT(r);s.forEach(function(c){if(!o.has(c)){o.add(c);var p=UT.bind(null,r,c);c.then(p,p)}})}function Vt(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c],y=r,_=s,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(Vr(R.type)){We=R.stateNode,Ht=!1;break e}break;case 5:We=R.stateNode,Ht=!1;break e;case 3:case 4:We=R.stateNode.containerInfo,Ht=!0;break e}R=R.return}if(We===null)throw Error(i(160));s0(y,_,p),We=null,Ht=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)l0(s,r),s=s.sibling}var Pn=null;function l0(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Vt(s,r),Ft(r),c&4&&(Nr(3,r,r.return),za(3,r),Nr(5,r,r.return));break;case 1:Vt(s,r),Ft(r),c&512&&(ct||o===null||Hn(o,o.return)),c&64&&or&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var p=Pn;if(Vt(s,r),Ft(r),c&512&&(ct||o===null||Hn(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ua]||y[wt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),Tt(y,c,o),y[wt]=r,mt(y),c=y;break e;case"link":var _=lv("link","href",p).get(c+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(y=_[R],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}y=p.createElement(c),Tt(y,c,o),p.head.appendChild(y);break;case"meta":if(_=lv("meta","content",p).get(c+(o.content||""))){for(R=0;R<_.length;R++)if(y=_[R],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}y=p.createElement(c),Tt(y,c,o),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[wt]=r,mt(y),c=y}r.stateNode=c}else uv(p,r.type,r.stateNode);else r.stateNode=ov(p,c,r.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?uv(p,r.type,r.stateNode):ov(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&jf(r,r.memoizedProps,o.memoizedProps)}break;case 27:Vt(s,r),Ft(r),c&512&&(ct||o===null||Hn(o,o.return)),o!==null&&c&4&&jf(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Vt(s,r),Ft(r),c&512&&(ct||o===null||Hn(o,o.return)),r.flags&32){p=r.stateNode;try{es(p,"")}catch(le){Ne(r,r.return,le)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,jf(r,p,o!==null?o.memoizedProps:p)),c&1024&&(If=!0);break;case 6:if(Vt(s,r),Ft(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(le){Ne(r,r.return,le)}}break;case 3:if(Au=null,p=Pn,Pn=xu(s.containerInfo),Vt(s,r),Pn=p,Ft(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Os(s.containerInfo)}catch(le){Ne(r,r.return,le)}If&&(If=!1,u0(r));break;case 4:c=Pn,Pn=xu(r.stateNode.containerInfo),Vt(s,r),Ft(r),Pn=c;break;case 12:Vt(s,r),Ft(r);break;case 31:Vt(s,r),Ft(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,lu(r,c)));break;case 13:Vt(s,r),Ft(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(cu=Jt()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,lu(r,c)));break;case 22:p=r.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,$=or,X=ct;if(or=$||p,ct=X||P,Vt(s,r),ct=X,or=$,Ft(r),c&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||P||or||ct||Si(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(y=P.stateNode,p)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=P.stateNode;var K=P.memoizedProps.style,V=K!=null&&K.hasOwnProperty("display")?K.display:null;R.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(le){Ne(P,P.return,le)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(le){Ne(P,P.return,le)}}}else if(s.tag===18){if(o===null){P=s;try{var Y=P.stateNode;p?Z0(Y,!0):Z0(P.stateNode,!1)}catch(le){Ne(P,P.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,lu(r,o))));break;case 19:Vt(s,r),Ft(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,lu(r,c)));break;case 30:break;case 21:break;default:Vt(s,r),Ft(r)}}function Ft(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(e0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,y=Bf(r);ou(r,y,p);break;case 5:var _=o.stateNode;o.flags&32&&(es(_,""),o.flags&=-33);var R=Bf(r);ou(r,R,_);break;case 3:case 4:var P=o.stateNode.containerInfo,$=Bf(r);Nf(r,$,P);break;default:throw Error(i(161))}}catch(X){Ne(r,r.return,X)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function u0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;u0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ur(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)r0(r,s.alternate,s),s=s.sibling}function Si(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Nr(4,s,s.return),Si(s);break;case 1:Hn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Zb(s,s.return,o),Si(s);break;case 27:Va(s.stateNode);case 26:case 5:Hn(s,s.return),Si(s);break;case 22:s.memoizedState===null&&Si(s);break;case 30:Si(s);break;default:Si(s)}r=r.sibling}}function cr(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,p=r,y=s,_=y.flags;switch(y.tag){case 0:case 11:case 15:cr(p,y,o),za(4,y);break;case 1:if(cr(p,y,o),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch($){Ne(c,c.return,$)}if(c=y,p=c.updateQueue,p!==null){var R=c.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)Lg(P[p],R)}catch($){Ne(c,c.return,$)}}o&&_&64&&Wb(y),ja(y,y.return);break;case 27:t0(y);case 26:case 5:cr(p,y,o),o&&c===null&&_&4&&Jb(y),ja(y,y.return);break;case 12:cr(p,y,o);break;case 31:cr(p,y,o),o&&_&4&&a0(p,y);break;case 13:cr(p,y,o),o&&_&4&&o0(p,y);break;case 22:y.memoizedState===null&&cr(p,y,o),ja(y,y.return);break;case 30:break;default:cr(p,y,o)}s=s.sibling}}function Lf(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&xa(o))}function qf(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xa(r))}function zn(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)c0(r,s,o,c),s=s.sibling}function c0(r,s,o,c){var p=s.flags;switch(s.tag){case 0:case 11:case 15:zn(r,s,o,c),p&2048&&za(9,s);break;case 1:zn(r,s,o,c);break;case 3:zn(r,s,o,c),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xa(r)));break;case 12:if(p&2048){zn(r,s,o,c),r=s.stateNode;try{var y=s.memoizedProps,_=y.id,R=y.onPostCommit;typeof R=="function"&&R(_,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){Ne(s,s.return,P)}}else zn(r,s,o,c);break;case 31:zn(r,s,o,c);break;case 13:zn(r,s,o,c);break;case 23:break;case 22:y=s.stateNode,_=s.alternate,s.memoizedState!==null?y._visibility&2?zn(r,s,o,c):Ba(r,s):y._visibility&2?zn(r,s,o,c):(y._visibility|=2,_s(r,s,o,c,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Lf(_,s);break;case 24:zn(r,s,o,c),p&2048&&qf(s.alternate,s);break;default:zn(r,s,o,c)}}function _s(r,s,o,c,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,_=s,R=o,P=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:_s(y,_,R,P,p),za(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?_s(y,_,R,P,p):Ba(y,_):(X._visibility|=2,_s(y,_,R,P,p)),p&&$&2048&&Lf(_.alternate,_);break;case 24:_s(y,_,R,P,p),p&&$&2048&&qf(_.alternate,_);break;default:_s(y,_,R,P,p)}s=s.sibling}}function Ba(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,p=c.flags;switch(c.tag){case 22:Ba(o,c),p&2048&&Lf(c.alternate,c);break;case 24:Ba(o,c),p&2048&&qf(c.alternate,c);break;default:Ba(o,c)}s=s.sibling}}var Na=8192;function ws(r,s,o){if(r.subtreeFlags&Na)for(r=r.child;r!==null;)h0(r,s,o),r=r.sibling}function h0(r,s,o){switch(r.tag){case 26:ws(r,s,o),r.flags&Na&&r.memoizedState!==null&&cE(o,Pn,r.memoizedState,r.memoizedProps);break;case 5:ws(r,s,o);break;case 3:case 4:var c=Pn;Pn=xu(r.stateNode.containerInfo),ws(r,s,o),Pn=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Na,Na=16777216,ws(r,s,o),Na=c):ws(r,s,o));break;default:ws(r,s,o)}}function f0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ia(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];gt=c,p0(c,r)}f0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)d0(r),r=r.sibling}function d0(r){switch(r.tag){case 0:case 11:case 15:Ia(r),r.flags&2048&&Nr(9,r,r.return);break;case 3:Ia(r);break;case 12:Ia(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,uu(r)):Ia(r);break;default:Ia(r)}}function uu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];gt=c,p0(c,r)}f0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Nr(8,s,s.return),uu(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,uu(s));break;default:uu(s)}r=r.sibling}}function p0(r,s){for(;gt!==null;){var o=gt;switch(o.tag){case 0:case 11:case 15:Nr(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xa(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gt=c;else e:for(o=r;gt!==null;){c=gt;var p=c.sibling,y=c.return;if(i0(c),c===o){gt=null;break e}if(p!==null){p.return=y,gt=p;break e}gt=y}}}var TT={getCacheForType:function(r){var s=St(ot),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return St(ot).controller.signal}},ET=typeof WeakMap=="function"?WeakMap:Map,ze=0,$e=null,Te=null,Ce=0,Be=0,on=null,Ir=!1,xs=!1,Gf=!1,hr=0,nt=0,Lr=0,Ai=0,$f=0,ln=0,Ss=0,La=null,Yt=null,Hf=!1,cu=0,y0=0,hu=1/0,fu=null,qr=null,dt=0,Gr=null,As=null,fr=0,Vf=0,Ff=null,m0=null,qa=0,Yf=null;function un(){return(ze&2)!==0&&Ce!==0?Ce&-Ce:U.T!==null?Jf():Dm()}function g0(){if(ln===0)if((Ce&536870912)===0||Me){var r=_l;_l<<=1,(_l&3932160)===0&&(_l=262144),ln=r}else ln=536870912;return r=sn.current,r!==null&&(r.flags|=32),ln}function Xt(r,s,o){(r===$e&&(Be===2||Be===9)||r.cancelPendingCommit!==null)&&(Ts(r,0),$r(r,Ce,ln,!1)),la(r,o),((ze&2)===0||r!==$e)&&(r===$e&&((ze&2)===0&&(Ai|=o),nt===4&&$r(r,Ce,ln,!1)),Vn(r))}function b0(r,s,o){if((ze&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&r.expiredLanes)===0||oa(r,s),p=c?MT(r,s):Qf(r,s,!0),y=c;do{if(p===0){xs&&!c&&$r(r,s,0,!1);break}else{if(o=r.current.alternate,y&&!CT(o)){p=Qf(r,s,!1),y=!1;continue}if(p===2){if(y=s,r.errorRecoveryDisabledLanes&y)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var R=r;p=La;var P=R.current.memoizedState.isDehydrated;if(P&&(Ts(R,_).flags|=256),_=Qf(R,_,!1),_!==2){if(Gf&&!P){R.errorRecoveryDisabledLanes|=y,Ai|=y,p=4;break e}y=Yt,Yt=p,y!==null&&(Yt===null?Yt=y:Yt.push.apply(Yt,y))}p=_}if(y=!1,p!==2)continue}}if(p===1){Ts(r,0),$r(r,s,0,!0);break}e:{switch(c=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:$r(c,s,ln,!Ir);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=cu+300-Jt(),10<p)){if($r(c,s,ln,!Ir),xl(c,0,!0)!==0)break e;fr=s,c.timeoutHandle=Q0(v0.bind(null,c,o,Yt,fu,Hf,s,ln,Ai,Ss,Ir,y,"Throttled",-0,0),p);break e}v0(c,o,Yt,fu,Hf,s,ln,Ai,Ss,Ir,y,null,-0,0)}}break}while(!0);Vn(r)}function v0(r,s,o,c,p,y,_,R,P,$,X,K,V,Y){if(r.timeoutHandle=-1,K=s.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},h0(s,y,K);var le=(y&62914560)===y?cu-Jt():(y&4194048)===y?y0-Jt():0;if(le=hE(K,le),le!==null){fr=y,r.cancelPendingCommit=le(C0.bind(null,r,s,y,o,c,p,_,R,P,X,K,null,V,Y)),$r(r,y,_,!$);return}}C0(r,s,y,o,c,p,_,R,P)}function CT(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var p=o[c],y=p.getSnapshot;p=p.value;try{if(!nn(y(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $r(r,s,o,c){s&=~$f,s&=~Ai,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var p=s;0<p;){var y=31-tn(p),_=1<<y;c[y]=-1,p&=~_}o!==0&&Mm(r,o,s)}function du(){return(ze&6)===0?(Ga(0),!1):!0}function Xf(){if(Te!==null){if(Be===0)var r=Te.return;else r=Te,tr=yi=null,cf(r),ys=null,Aa=0,r=Te;for(;r!==null;)Kb(r.alternate,r),r=r.return;Te=null}}function Ts(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,YT(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),fr=0,Xf(),$e=r,Te=o=Jn(r.current,null),Ce=s,Be=0,on=null,Ir=!1,xs=oa(r,s),Gf=!1,Ss=ln=$f=Ai=Lr=nt=0,Yt=La=null,Hf=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var p=31-tn(c),y=1<<p;s|=r[p],c&=~y}return hr=s,Pl(),o}function _0(r,s){we=null,U.H=Da,s===ps||s===Gl?(s=jg(),Be=3):s===Wh?(s=jg(),Be=4):Be=s===Ef?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,on=s,Te===null&&(nt=1,nu(r,wn(s,r.current)))}function w0(){var r=sn.current;return r===null?!0:(Ce&4194048)===Ce?Tn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?r===Tn:!1}function x0(){var r=U.H;return U.H=Da,r===null?Da:r}function S0(){var r=U.A;return U.A=TT,r}function pu(){nt=4,Ir||(Ce&4194048)!==Ce&&sn.current!==null||(xs=!0),(Lr&134217727)===0&&(Ai&134217727)===0||$e===null||$r($e,Ce,ln,!1)}function Qf(r,s,o){var c=ze;ze|=2;var p=x0(),y=S0();($e!==r||Ce!==s)&&(fu=null,Ts(r,s)),s=!1;var _=nt;e:do try{if(Be!==0&&Te!==null){var R=Te,P=on;switch(Be){case 8:Xf(),_=6;break e;case 3:case 2:case 9:case 6:sn.current===null&&(s=!0);var $=Be;if(Be=0,on=null,Es(r,R,P,$),o&&xs){_=0;break e}break;default:$=Be,Be=0,on=null,Es(r,R,P,$)}}RT(),_=nt;break}catch(X){_0(r,X)}while(!0);return s&&r.shellSuspendCounter++,tr=yi=null,ze=c,U.H=p,U.A=y,Te===null&&($e=null,Ce=0,Pl()),_}function RT(){for(;Te!==null;)A0(Te)}function MT(r,s){var o=ze;ze|=2;var c=x0(),p=S0();$e!==r||Ce!==s?(fu=null,hu=Jt()+500,Ts(r,s)):xs=oa(r,s);e:do try{if(Be!==0&&Te!==null){s=Te;var y=on;t:switch(Be){case 1:Be=0,on=null,Es(r,s,y,1);break;case 2:case 9:if(Pg(y)){Be=0,on=null,T0(s);break}s=function(){Be!==2&&Be!==9||$e!==r||(Be=7),Vn(r)},y.then(s,s);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:Pg(y)?(Be=0,on=null,T0(s)):(Be=0,on=null,Es(r,s,y,7));break;case 5:var _=null;switch(Te.tag){case 26:_=Te.memoizedState;case 5:case 27:var R=Te;if(_?cv(_):R.stateNode.complete){Be=0,on=null;var P=R.sibling;if(P!==null)Te=P;else{var $=R.return;$!==null?(Te=$,yu($)):Te=null}break t}}Be=0,on=null,Es(r,s,y,5);break;case 6:Be=0,on=null,Es(r,s,y,6);break;case 8:Xf(),nt=6;break e;default:throw Error(i(462))}}kT();break}catch(X){_0(r,X)}while(!0);return tr=yi=null,U.H=c,U.A=p,ze=o,Te!==null?0:($e=null,Ce=0,Pl(),nt)}function kT(){for(;Te!==null&&!J1();)A0(Te)}function A0(r){var s=Xb(r.alternate,r,hr);r.memoizedProps=r.pendingProps,s===null?yu(r):Te=s}function T0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=Gb(o,s,s.pendingProps,s.type,void 0,Ce);break;case 11:s=Gb(o,s,s.pendingProps,s.type.render,s.ref,Ce);break;case 5:cf(s);default:Kb(o,s),s=Te=Sg(s,hr),s=Xb(o,s,hr)}r.memoizedProps=r.pendingProps,s===null?yu(r):Te=s}function Es(r,s,o,c){tr=yi=null,cf(s),ys=null,Aa=0;var p=s.return;try{if(bT(r,p,s,o,Ce)){nt=1,nu(r,wn(o,r.current)),Te=null;return}}catch(y){if(p!==null)throw Te=p,y;nt=1,nu(r,wn(o,r.current)),Te=null;return}s.flags&32768?(Me||c===1?r=!0:xs||(Ce&536870912)!==0?r=!1:(Ir=r=!0,(c===2||c===9||c===3||c===6)&&(c=sn.current,c!==null&&c.tag===13&&(c.flags|=16384))),E0(s,r)):yu(s)}function yu(r){var s=r;do{if((s.flags&32768)!==0){E0(s,Ir);return}r=s.return;var o=wT(s.alternate,s,hr);if(o!==null){Te=o;return}if(s=s.sibling,s!==null){Te=s;return}Te=s=r}while(s!==null);nt===0&&(nt=5)}function E0(r,s){do{var o=xT(r.alternate,r);if(o!==null){o.flags&=32767,Te=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Te=r;return}Te=r=o}while(r!==null);nt=6,Te=null}function C0(r,s,o,c,p,y,_,R,P){r.cancelPendingCommit=null;do mu();while(dt!==0);if((ze&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=jh,uA(r,o,y,_,R,P),r===$e&&(Te=$e=null,Ce=0),As=s,Gr=r,fr=o,Vf=y,Ff=p,m0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,PT(bl,function(){return D0(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=U.T,U.T=null,p=L.p,L.p=2,_=ze,ze|=4;try{ST(r,s,o)}finally{ze=_,L.p=p,U.T=c}}dt=1,R0(),M0(),k0()}}function R0(){if(dt===1){dt=0;var r=Gr,s=As,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var c=L.p;L.p=2;var p=ze;ze|=4;try{l0(s,r);var y=od,_=pg(r.containerInfo),R=y.focusedElem,P=y.selectionRange;if(_!==R&&R&&R.ownerDocument&&dg(R.ownerDocument.documentElement,R)){if(P!==null&&Oh(R)){var $=P.start,X=P.end;if(X===void 0&&(X=$),"selectionStart"in R)R.selectionStart=$,R.selectionEnd=Math.min(X,R.value.length);else{var K=R.ownerDocument||document,V=K&&K.defaultView||window;if(V.getSelection){var Y=V.getSelection(),le=R.textContent.length,pe=Math.min(P.start,le),qe=P.end===void 0?pe:Math.min(P.end,le);!Y.extend&&pe>qe&&(_=qe,qe=pe,pe=_);var q=fg(R,pe),I=fg(R,qe);if(q&&I&&(Y.rangeCount!==1||Y.anchorNode!==q.node||Y.anchorOffset!==q.offset||Y.focusNode!==I.node||Y.focusOffset!==I.offset)){var G=K.createRange();G.setStart(q.node,q.offset),Y.removeAllRanges(),pe>qe?(Y.addRange(G),Y.extend(I.node,I.offset)):(G.setEnd(I.node,I.offset),Y.addRange(G))}}}}for(K=[],Y=R;Y=Y.parentNode;)Y.nodeType===1&&K.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<K.length;R++){var Q=K[R];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Ru=!!ad,od=ad=null}finally{ze=p,L.p=c,U.T=o}}r.current=s,dt=2}}function M0(){if(dt===2){dt=0;var r=Gr,s=As,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var c=L.p;L.p=2;var p=ze;ze|=4;try{r0(r,s.alternate,s)}finally{ze=p,L.p=c,U.T=o}}dt=3}}function k0(){if(dt===4||dt===3){dt=0,eA();var r=Gr,s=As,o=fr,c=m0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dt=5:(dt=0,As=Gr=null,O0(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(qr=null),fh(o),s=s.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(aa,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=U.T,p=L.p,L.p=2,U.T=null;try{for(var y=r.onRecoverableError,_=0;_<c.length;_++){var R=c[_];y(R.value,{componentStack:R.stack})}}finally{U.T=s,L.p=p}}(fr&3)!==0&&mu(),Vn(r),p=r.pendingLanes,(o&261930)!==0&&(p&42)!==0?r===Yf?qa++:(qa=0,Yf=r):qa=0,Ga(0)}}function O0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,xa(s)))}function mu(){return R0(),M0(),k0(),D0()}function D0(){if(dt!==5)return!1;var r=Gr,s=Vf;Vf=0;var o=fh(fr),c=U.T,p=L.p;try{L.p=32>o?32:o,U.T=null,o=Ff,Ff=null;var y=Gr,_=fr;if(dt=0,As=Gr=null,fr=0,(ze&6)!==0)throw Error(i(331));var R=ze;if(ze|=4,d0(y.current),c0(y,y.current,_,o),ze=R,Ga(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(aa,y)}catch{}return!0}finally{L.p=p,U.T=c,O0(r,s)}}function U0(r,s,o){s=wn(o,s),s=Tf(r.stateNode,s,2),r=zr(r,s,2),r!==null&&(la(r,2),Vn(r))}function Ne(r,s,o){if(r.tag===3)U0(r,r,o);else for(;s!==null;){if(s.tag===3){U0(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(qr===null||!qr.has(c))){r=wn(o,r),o=Pb(2),c=zr(s,o,2),c!==null&&(zb(o,c,s,r),la(c,2),Vn(c));break}}s=s.return}}function Kf(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new ET;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(o)||(Gf=!0,p.add(o),r=OT.bind(null,r,s,o),s.then(r,r))}function OT(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,$e===r&&(Ce&o)===o&&(nt===4||nt===3&&(Ce&62914560)===Ce&&300>Jt()-cu?(ze&2)===0&&Ts(r,0):$f|=o,Ss===Ce&&(Ss=0)),Vn(r)}function P0(r,s){s===0&&(s=Rm()),r=fi(r,s),r!==null&&(la(r,s),Vn(r))}function DT(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),P0(r,o)}function UT(r,s){var o=0;switch(r.tag){case 31:case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),P0(r,o)}function PT(r,s){return lh(r,s)}var gu=null,Cs=null,Wf=!1,bu=!1,Zf=!1,Hr=0;function Vn(r){r!==Cs&&r.next===null&&(Cs===null?gu=Cs=r:Cs=Cs.next=r),bu=!0,Wf||(Wf=!0,jT())}function Ga(r,s){if(!Zf&&bu){Zf=!0;do for(var o=!1,c=gu;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var _=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-tn(42|r)+1)-1,y&=p&~(_&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,N0(c,y))}else y=Ce,y=xl(c,c===$e?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||oa(c,y)||(o=!0,N0(c,y));c=c.next}while(o);Zf=!1}}function zT(){z0()}function z0(){bu=Wf=!1;var r=0;Hr!==0&&FT()&&(r=Hr);for(var s=Jt(),o=null,c=gu;c!==null;){var p=c.next,y=j0(c,s);y===0?(c.next=null,o===null?gu=p:o.next=p,p===null&&(Cs=o)):(o=c,(r!==0||(y&3)!==0)&&(bu=!0)),c=p}dt!==0&&dt!==5||Ga(r),Hr!==0&&(Hr=0)}function j0(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var _=31-tn(y),R=1<<_,P=p[_];P===-1?((R&o)===0||(R&c)!==0)&&(p[_]=lA(R,s)):P<=s&&(r.expiredLanes|=R),y&=~R}if(s=$e,o=Ce,o=xl(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(Be===2||Be===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&uh(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||oa(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&uh(c),fh(o)){case 2:case 8:o=Em;break;case 32:o=bl;break;case 268435456:o=Cm;break;default:o=bl}return c=B0.bind(null,r),o=lh(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&uh(c),r.callbackPriority=2,r.callbackNode=null,2}function B0(r,s){if(dt!==0&&dt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(mu()&&r.callbackNode!==o)return null;var c=Ce;return c=xl(r,r===$e?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(b0(r,c,s),j0(r,Jt()),r.callbackNode!=null&&r.callbackNode===o?B0.bind(null,r):null)}function N0(r,s){if(mu())return null;b0(r,s,!0)}function jT(){XT(function(){(ze&6)!==0?lh(Tm,zT):z0()})}function Jf(){if(Hr===0){var r=fs;r===0&&(r=vl,vl<<=1,(vl&261888)===0&&(vl=256)),Hr=r}return Hr}function I0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:El(""+r)}function L0(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function BT(r,s,o,c,p){if(s==="submit"&&o&&o.stateNode===p){var y=I0((p[Gt]||null).action),_=c.submitter;_&&(s=(s=_[Gt]||null)?I0(s.formAction):_.getAttribute("formAction"),s!==null&&(y=s,_=null));var R=new kl("action","action",null,c,p);r.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Hr!==0){var P=_?L0(p,_):new FormData(p);vf(o,{pending:!0,data:P,method:p.method,action:y},null,P)}}else typeof y=="function"&&(R.preventDefault(),P=_?L0(p,_):new FormData(p),vf(o,{pending:!0,data:P,method:p.method,action:y},y,P))},currentTarget:p}]})}}for(var ed=0;ed<zh.length;ed++){var td=zh[ed],NT=td.toLowerCase(),IT=td[0].toUpperCase()+td.slice(1);Un(NT,"on"+IT)}Un(gg,"onAnimationEnd"),Un(bg,"onAnimationIteration"),Un(vg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(tT,"onTransitionRun"),Un(nT,"onTransitionStart"),Un(rT,"onTransitionCancel"),Un(_g,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function q0(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],p=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var _=c.length-1;0<=_;_--){var R=c[_],P=R.instance,$=R.currentTarget;if(R=R.listener,P!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=$;try{y(p)}catch(X){Ul(X)}p.currentTarget=null,y=P}else for(_=0;_<c.length;_++){if(R=c[_],P=R.instance,$=R.currentTarget,R=R.listener,P!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=$;try{y(p)}catch(X){Ul(X)}p.currentTarget=null,y=P}}}}function Ee(r,s){var o=s[dh];o===void 0&&(o=s[dh]=new Set);var c=r+"__bubble";o.has(c)||(G0(s,r,2,!1),o.add(c))}function nd(r,s,o){var c=0;s&&(c|=4),G0(o,r,c,s)}var vu="_reactListening"+Math.random().toString(36).slice(2);function rd(r){if(!r[vu]){r[vu]=!0,zm.forEach(function(o){o!=="selectionchange"&&(LT.has(o)||nd(o,!1,r),nd(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[vu]||(s[vu]=!0,nd("selectionchange",!1,s))}}function G0(r,s,o,c){switch(gv(s)){case 2:var p=pE;break;case 8:p=yE;break;default:p=bd}o=p.bind(null,s,o,r),p=void 0,!xh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(s,o,{capture:!0,passive:p}):r.addEventListener(s,o,!0):p!==void 0?r.addEventListener(s,o,{passive:p}):r.addEventListener(s,o,!1)}function id(r,s,o,c,p){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var R=c.stateNode.containerInfo;if(R===p)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===p)return;_=_.return}for(;R!==null;){if(_=Qi(R),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){c=y=_;continue e}R=R.parentNode}}c=c.return}Ym(function(){var $=y,X=_h(o),K=[];e:{var V=wg.get(r);if(V!==void 0){var Y=kl,le=r;switch(r){case"keypress":if(Rl(o)===0)break e;case"keydown":case"keyup":Y=UA;break;case"focusin":le="focus",Y=Eh;break;case"focusout":le="blur",Y=Eh;break;case"beforeblur":case"afterblur":Y=Eh;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=wA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=jA;break;case gg:case bg:case vg:Y=AA;break;case _g:Y=NA;break;case"scroll":case"scrollend":Y=vA;break;case"wheel":Y=LA;break;case"copy":case"cut":case"paste":Y=EA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Zm;break;case"toggle":case"beforetoggle":Y=GA}var pe=(s&4)!==0,qe=!pe&&(r==="scroll"||r==="scrollend"),q=pe?V!==null?V+"Capture":null:V;pe=[];for(var I=$,G;I!==null;){var Q=I;if(G=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||G===null||q===null||(Q=ha(I,q),Q!=null&&pe.push(Ha(I,Q,G))),qe)break;I=I.return}0<pe.length&&(V=new Y(V,le,null,o,X),K.push({event:V,listeners:pe}))}}if((s&7)===0){e:{if(V=r==="mouseover"||r==="pointerover",Y=r==="mouseout"||r==="pointerout",V&&o!==vh&&(le=o.relatedTarget||o.fromElement)&&(Qi(le)||le[Xi]))break e;if((Y||V)&&(V=X.window===X?X:(V=X.ownerDocument)?V.defaultView||V.parentWindow:window,Y?(le=o.relatedTarget||o.toElement,Y=$,le=le?Qi(le):null,le!==null&&(qe=l(le),pe=le.tag,le!==qe||pe!==5&&pe!==27&&pe!==6)&&(le=null)):(Y=null,le=$),Y!==le)){if(pe=Km,Q="onMouseLeave",q="onMouseEnter",I="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Zm,Q="onPointerLeave",q="onPointerEnter",I="pointer"),qe=Y==null?V:ca(Y),G=le==null?V:ca(le),V=new pe(Q,I+"leave",Y,o,X),V.target=qe,V.relatedTarget=G,Q=null,Qi(X)===$&&(pe=new pe(q,I+"enter",le,o,X),pe.target=G,pe.relatedTarget=qe,Q=pe),qe=Q,Y&&le)t:{for(pe=qT,q=Y,I=le,G=0,Q=q;Q;Q=pe(Q))G++;Q=0;for(var de=I;de;de=pe(de))Q++;for(;0<G-Q;)q=pe(q),G--;for(;0<Q-G;)I=pe(I),Q--;for(;G--;){if(q===I||I!==null&&q===I.alternate){pe=q;break t}q=pe(q),I=pe(I)}pe=null}else pe=null;Y!==null&&$0(K,V,Y,pe,!1),le!==null&&qe!==null&&$0(K,qe,le,pe,!0)}}e:{if(V=$?ca($):window,Y=V.nodeName&&V.nodeName.toLowerCase(),Y==="select"||Y==="input"&&V.type==="file")var Ue=ag;else if(ig(V))if(og)Ue=ZA;else{Ue=KA;var he=QA}else Y=V.nodeName,!Y||Y.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?$&&bh($.elementType)&&(Ue=ag):Ue=WA;if(Ue&&(Ue=Ue(r,$))){sg(K,Ue,o,X);break e}he&&he(r,V,$),r==="focusout"&&$&&V.type==="number"&&$.memoizedProps.value!=null&&gh(V,"number",V.value)}switch(he=$?ca($):window,r){case"focusin":(ig(he)||he.contentEditable==="true")&&(is=he,Dh=$,va=null);break;case"focusout":va=Dh=is=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,yg(K,o,X);break;case"selectionchange":if(eT)break;case"keydown":case"keyup":yg(K,o,X)}var xe;if(Rh)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else rs?ng(r,o)&&(Re="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(Jm&&o.locale!=="ko"&&(rs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&rs&&(xe=Xm()):(Rr=X,Sh="value"in Rr?Rr.value:Rr.textContent,rs=!0)),he=_u($,Re),0<he.length&&(Re=new Wm(Re,r,null,o,X),K.push({event:Re,listeners:he}),xe?Re.data=xe:(xe=rg(o),xe!==null&&(Re.data=xe)))),(xe=HA?VA(r,o):FA(r,o))&&(Re=_u($,"onBeforeInput"),0<Re.length&&(he=new Wm("onBeforeInput","beforeinput",null,o,X),K.push({event:he,listeners:Re}),he.data=xe)),BT(K,r,$,o,X)}q0(K,s)})}function Ha(r,s,o){return{instance:r,listener:s,currentTarget:o}}function _u(r,s){for(var o=s+"Capture",c=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=ha(r,o),p!=null&&c.unshift(Ha(r,p,y)),p=ha(r,s),p!=null&&c.push(Ha(r,p,y))),r.tag===3)return c;r=r.return}return[]}function qT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $0(r,s,o,c,p){for(var y=s._reactName,_=[];o!==null&&o!==c;){var R=o,P=R.alternate,$=R.stateNode;if(R=R.tag,P!==null&&P===c)break;R!==5&&R!==26&&R!==27||$===null||(P=$,p?($=ha(o,y),$!=null&&_.unshift(Ha(o,$,P))):p||($=ha(o,y),$!=null&&_.push(Ha(o,$,P)))),o=o.return}_.length!==0&&r.push({event:s,listeners:_})}var GT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function H0(r){return(typeof r=="string"?r:""+r).replace(GT,`
`).replace($T,"")}function V0(r,s){return s=H0(s),H0(r)===s}function Le(r,s,o,c,p,y){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||es(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&es(r,""+c);break;case"className":Al(r,"class",c);break;case"tabIndex":Al(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(r,o,c);break;case"style":Vm(r,c,y);break;case"data":if(s!=="object"){Al(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=El(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Le(r,s,"name",p.name,p,null),Le(r,s,"formEncType",p.formEncType,p,null),Le(r,s,"formMethod",p.formMethod,p,null),Le(r,s,"formTarget",p.formTarget,p,null)):(Le(r,s,"encType",p.encType,p,null),Le(r,s,"method",p.method,p,null),Le(r,s,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=El(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=Wn);break;case"onScroll":c!=null&&Ee("scroll",r);break;case"onScrollEnd":c!=null&&Ee("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=El(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Ee("beforetoggle",r),Ee("toggle",r),Sl(r,"popover",c);break;case"xlinkActuate":Kn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Kn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Kn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Kn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Kn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Kn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Kn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Sl(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gA.get(o)||o,Sl(r,o,c))}}function sd(r,s,o,c,p,y){switch(o){case"style":Vm(r,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?es(r,c):(typeof c=="number"||typeof c=="bigint")&&es(r,""+c);break;case"onScroll":c!=null&&Ee("scroll",r);break;case"onScrollEnd":c!=null&&Ee("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),y=r[Gt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(s,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,p);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Sl(r,o,c)}}}function Tt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",r),Ee("load",r);var c=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var _=o[y];if(_!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Le(r,s,y,_,o,null)}}p&&Le(r,s,"srcSet",o.srcSet,o,null),c&&Le(r,s,"src",o.src,o,null);return;case"input":Ee("invalid",r);var R=y=_=p=null,P=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var X=o[c];if(X!=null)switch(c){case"name":p=X;break;case"type":_=X;break;case"checked":P=X;break;case"defaultChecked":$=X;break;case"value":y=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:Le(r,s,c,X,o,null)}}qm(r,y,R,P,$,_,p,!1);return;case"select":Ee("invalid",r),c=_=y=null;for(p in o)if(o.hasOwnProperty(p)&&(R=o[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":_=R;break;case"multiple":c=R;default:Le(r,s,p,R,o,null)}s=y,o=_,r.multiple=!!c,s!=null?Ji(r,!!c,s,!1):o!=null&&Ji(r,!!c,o,!0);return;case"textarea":Ee("invalid",r),y=p=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":c=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Le(r,s,_,R,o,null)}$m(r,c,p,y);return;case"option":for(P in o)o.hasOwnProperty(P)&&(c=o[P],c!=null)&&(P==="selected"?r.selected=c&&typeof c!="function"&&typeof c!="symbol":Le(r,s,P,c,o,null));return;case"dialog":Ee("beforetoggle",r),Ee("toggle",r),Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":Ee("load",r);break;case"video":case"audio":for(c=0;c<$a.length;c++)Ee($a[c],r);break;case"image":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"embed":case"source":case"link":Ee("error",r),Ee("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Le(r,s,$,c,o,null)}return;default:if(bh(s)){for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!==void 0&&sd(r,s,X,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&Le(r,s,R,c,o,null))}function HT(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,_=null,R=null,P=null,$=null,X=null;for(Y in o){var K=o[Y];if(o.hasOwnProperty(Y)&&K!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=K;default:c.hasOwnProperty(Y)||Le(r,s,Y,null,c,K)}}for(var V in c){var Y=c[V];if(K=o[V],c.hasOwnProperty(V)&&(Y!=null||K!=null))switch(V){case"type":y=Y;break;case"name":p=Y;break;case"checked":$=Y;break;case"defaultChecked":X=Y;break;case"value":_=Y;break;case"defaultValue":R=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==K&&Le(r,s,V,Y,c,K)}}mh(r,_,R,P,$,X,y,p);return;case"select":Y=_=R=V=null;for(y in o)if(P=o[y],o.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":Y=P;default:c.hasOwnProperty(y)||Le(r,s,y,null,c,P)}for(p in c)if(y=c[p],P=o[p],c.hasOwnProperty(p)&&(y!=null||P!=null))switch(p){case"value":V=y;break;case"defaultValue":R=y;break;case"multiple":_=y;default:y!==P&&Le(r,s,p,y,c,P)}s=R,o=_,c=Y,V!=null?Ji(r,!!o,V,!1):!!c!=!!o&&(s!=null?Ji(r,!!o,s,!0):Ji(r,!!o,o?[]:"",!1));return;case"textarea":Y=V=null;for(R in o)if(p=o[R],o.hasOwnProperty(R)&&p!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Le(r,s,R,null,c,p)}for(_ in c)if(p=c[_],y=o[_],c.hasOwnProperty(_)&&(p!=null||y!=null))switch(_){case"value":V=p;break;case"defaultValue":Y=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&Le(r,s,_,p,c,y)}Gm(r,V,Y);return;case"option":for(var le in o)V=o[le],o.hasOwnProperty(le)&&V!=null&&!c.hasOwnProperty(le)&&(le==="selected"?r.selected=!1:Le(r,s,le,null,c,V));for(P in c)V=c[P],Y=o[P],c.hasOwnProperty(P)&&V!==Y&&(V!=null||Y!=null)&&(P==="selected"?r.selected=V&&typeof V!="function"&&typeof V!="symbol":Le(r,s,P,V,c,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in o)V=o[pe],o.hasOwnProperty(pe)&&V!=null&&!c.hasOwnProperty(pe)&&Le(r,s,pe,null,c,V);for($ in c)if(V=c[$],Y=o[$],c.hasOwnProperty($)&&V!==Y&&(V!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:Le(r,s,$,V,c,Y)}return;default:if(bh(s)){for(var qe in o)V=o[qe],o.hasOwnProperty(qe)&&V!==void 0&&!c.hasOwnProperty(qe)&&sd(r,s,qe,void 0,c,V);for(X in c)V=c[X],Y=o[X],!c.hasOwnProperty(X)||V===Y||V===void 0&&Y===void 0||sd(r,s,X,V,c,Y);return}}for(var q in o)V=o[q],o.hasOwnProperty(q)&&V!=null&&!c.hasOwnProperty(q)&&Le(r,s,q,null,c,V);for(K in c)V=c[K],Y=o[K],!c.hasOwnProperty(K)||V===Y||V==null&&Y==null||Le(r,s,K,V,c,Y)}function F0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var p=o[c],y=p.transferSize,_=p.initiatorType,R=p.duration;if(y&&R&&F0(_)){for(_=0,R=p.responseEnd,c+=1;c<o.length;c++){var P=o[c],$=P.startTime;if($>R)break;var X=P.transferSize,K=P.initiatorType;X&&F0(K)&&(P=P.responseEnd,_+=X*(P<R?1:(R-$)/(P-$)))}if(--c,s+=8*(y+_)/(p.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ad=null,od=null;function wu(r){return r.nodeType===9?r:r.ownerDocument}function Y0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X0(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function ld(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ud=null;function FT(){var r=window.event;return r&&r.type==="popstate"?r===ud?!1:(ud=r,!0):(ud=null,!1)}var Q0=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(r){return K0.resolve(null).then(r).catch(QT)}:Q0;function QT(r){setTimeout(function(){throw r})}function Vr(r){return r==="head"}function W0(r,s){var o=s,c=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(c===0){r.removeChild(p),Os(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Va(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Va(o);for(var y=o.firstChild;y;){var _=y.nextSibling,R=y.nodeName;y[ua]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=_}}else o==="body"&&Va(r.ownerDocument.body);o=p}while(o);Os(s)}function Z0(r,s){var o=r;r=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=c}while(o)}function cd(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":cd(o),ph(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function KT(r,s,o,c){for(;r.nodeType===1;){var p=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[ua])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=En(r.nextSibling),r===null)break}return null}function WT(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=En(r.nextSibling),r===null))return null;return r}function J0(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=En(r.nextSibling),r===null))return null;return r}function hd(r){return r.data==="$?"||r.data==="$~"}function fd(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function ZT(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function En(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var dd=null;function ev(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return En(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function tv(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function nv(r,s,o){switch(s=wu(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Va(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ph(r)}var Cn=new Map,rv=new Set;function xu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var dr=L.d;L.d={f:JT,r:eE,D:tE,C:nE,L:rE,m:iE,X:aE,S:sE,M:oE};function JT(){var r=dr.f(),s=du();return r||s}function eE(r){var s=Ki(r);s!==null&&s.tag===5&&s.type==="form"?_b(s):dr.r(r)}var Rs=typeof document>"u"?null:document;function iv(r,s,o){var c=Rs;if(c&&typeof s=="string"&&s){var p=vn(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),rv.has(p)||(rv.add(p),r={rel:r,crossOrigin:o,href:s},c.querySelector(p)===null&&(s=c.createElement("link"),Tt(s,"link",r),mt(s),c.head.appendChild(s)))}}function tE(r){dr.D(r),iv("dns-prefetch",r,null)}function nE(r,s){dr.C(r,s),iv("preconnect",r,s)}function rE(r,s,o){dr.L(r,s,o);var c=Rs;if(c&&r&&s){var p='link[rel="preload"][as="'+vn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+vn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+vn(o.imageSizes)+'"]')):p+='[href="'+vn(r)+'"]';var y=p;switch(s){case"style":y=Ms(r);break;case"script":y=ks(r)}Cn.has(y)||(r=g({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Cn.set(y,r),c.querySelector(p)!==null||s==="style"&&c.querySelector(Fa(y))||s==="script"&&c.querySelector(Ya(y))||(s=c.createElement("link"),Tt(s,"link",r),mt(s),c.head.appendChild(s)))}}function iE(r,s){dr.m(r,s);var o=Rs;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+vn(c)+'"][href="'+vn(r)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ks(r)}if(!Cn.has(y)&&(r=g({rel:"modulepreload",href:r},s),Cn.set(y,r),o.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ya(y)))return}c=o.createElement("link"),Tt(c,"link",r),mt(c),o.head.appendChild(c)}}}function sE(r,s,o){dr.S(r,s,o);var c=Rs;if(c&&r){var p=Wi(c).hoistableStyles,y=Ms(r);s=s||"default";var _=p.get(y);if(!_){var R={loading:0,preload:null};if(_=c.querySelector(Fa(y)))R.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Cn.get(y))&&pd(r,o);var P=_=c.createElement("link");mt(P),Tt(P,"link",r),P._p=new Promise(function($,X){P.onload=$,P.onerror=X}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Su(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:R},p.set(y,_)}}}function aE(r,s){dr.X(r,s);var o=Rs;if(o&&r){var c=Wi(o).hoistableScripts,p=ks(r),y=c.get(p);y||(y=o.querySelector(Ya(p)),y||(r=g({src:r,async:!0},s),(s=Cn.get(p))&&yd(r,s),y=o.createElement("script"),mt(y),Tt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function oE(r,s){dr.M(r,s);var o=Rs;if(o&&r){var c=Wi(o).hoistableScripts,p=ks(r),y=c.get(p);y||(y=o.querySelector(Ya(p)),y||(r=g({src:r,async:!0,type:"module"},s),(s=Cn.get(p))&&yd(r,s),y=o.createElement("script"),mt(y),Tt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function sv(r,s,o,c){var p=(p=oe.current)?xu(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ms(o.href),o=Wi(p).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Ms(o.href);var y=Wi(p).hoistableStyles,_=y.get(r);if(_||(p=p.ownerDocument||p,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,_),(y=p.querySelector(Fa(r)))&&!y._p&&(_.instance=y,_.state.loading=5),Cn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Cn.set(r,o),y||lE(p,r,o,_.state))),s&&c===null)throw Error(i(528,""));return _}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ks(o),o=Wi(p).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ms(r){return'href="'+vn(r)+'"'}function Fa(r){return'link[rel="stylesheet"]['+r+"]"}function av(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function lE(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Tt(s,"link",o),mt(s),r.head.appendChild(s))}function ks(r){return'[src="'+vn(r)+'"]'}function Ya(r){return"script[async]"+r}function ov(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+vn(o.href)+'"]');if(c)return s.instance=c,mt(c),c;var p=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),mt(c),Tt(c,"style",p),Su(c,o.precedence,r),s.instance=c;case"stylesheet":p=Ms(o.href);var y=r.querySelector(Fa(p));if(y)return s.state.loading|=4,s.instance=y,mt(y),y;c=av(o),(p=Cn.get(p))&&pd(c,p),y=(r.ownerDocument||r).createElement("link"),mt(y);var _=y;return _._p=new Promise(function(R,P){_.onload=R,_.onerror=P}),Tt(y,"link",c),s.state.loading|=4,Su(y,o.precedence,r),s.instance=y;case"script":return y=ks(o.src),(p=r.querySelector(Ya(y)))?(s.instance=p,mt(p),p):(c=o,(p=Cn.get(y))&&(c=g({},o),yd(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),mt(p),Tt(p,"link",c),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Su(c,o.precedence,r));return s.instance}function Su(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,_=0;_<c.length;_++){var R=c[_];if(R.dataset.precedence===s)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function pd(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function yd(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Au=null;function lv(r,s,o){if(Au===null){var c=new Map,p=Au=new Map;p.set(o,c)}else p=Au,c=p.get(o),c||(c=new Map,p.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),p=0;p<o.length;p++){var y=o[p];if(!(y[ua]||y[wt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(s)||"";_=r+_;var R=c.get(_);R?R.push(y):c.set(_,[y])}}return c}function uv(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function uE(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cv(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function cE(r,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Ms(c.href),y=s.querySelector(Fa(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Tu.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=y,mt(y);return}y=s.ownerDocument||s,c=av(c),(p=Cn.get(p))&&pd(c,p),y=y.createElement("link"),mt(y);var _=y;_._p=new Promise(function(R,P){_.onload=R,_.onerror=P}),Tt(y,"link",c),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Tu.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var md=0;function hE(r,s){return r.stylesheets&&r.count===0&&Cu(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var c=setTimeout(function(){if(r.stylesheets&&Cu(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&md===0&&(md=62500*VT());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Cu(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>md?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Tu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cu(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Eu=null;function Cu(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Eu=new Map,s.forEach(fE,r),Eu=null,Tu.call(r))}function fE(r,s){if(!(s.state.loading&4)){var o=Eu.get(r);if(o)var c=o.get(null);else{o=new Map,Eu.set(r,o);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var _=p[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}p=s.instance,_=p.getAttribute("data-precedence"),y=o.get(_)||c,y===c&&o.set(null,p),o.set(_,p),this.count++,c=Tu.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var Xa={$$typeof:T,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function dE(r,s,o,c,p,y,_,R,P){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ch(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ch(0),this.hiddenUpdates=ch(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function hv(r,s,o,c,p,y,_,R,P,$,X,K){return r=new dE(r,s,o,_,P,$,X,K,R),s=1,y===!0&&(s|=24),y=rn(3,null,null,s),r.current=y,y.stateNode=r,s=Xh(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:s},Zh(y),r}function fv(r){return r?(r=os,r):os}function dv(r,s,o,c,p,y){p=fv(p),c.context===null?c.context=p:c.pendingContext=p,c=Pr(s),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=zr(r,c,s),o!==null&&(Xt(o,r,s),Ea(o,r,s))}function pv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function gd(r,s){pv(r,s),(r=r.alternate)&&pv(r,s)}function yv(r){if(r.tag===13||r.tag===31){var s=fi(r,67108864);s!==null&&Xt(s,r,67108864),gd(r,67108864)}}function mv(r){if(r.tag===13||r.tag===31){var s=un();s=hh(s);var o=fi(r,s);o!==null&&Xt(o,r,s),gd(r,s)}}var Ru=!0;function pE(r,s,o,c){var p=U.T;U.T=null;var y=L.p;try{L.p=2,bd(r,s,o,c)}finally{L.p=y,U.T=p}}function yE(r,s,o,c){var p=U.T;U.T=null;var y=L.p;try{L.p=8,bd(r,s,o,c)}finally{L.p=y,U.T=p}}function bd(r,s,o,c){if(Ru){var p=vd(c);if(p===null)id(r,s,c,Mu,o),bv(r,c);else if(gE(p,r,s,o,c))c.stopPropagation();else if(bv(r,c),s&4&&-1<mE.indexOf(r)){for(;p!==null;){var y=Ki(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=oi(y.pendingLanes);if(_!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var P=1<<31-tn(_);R.entanglements[1]|=P,_&=~P}Vn(y),(ze&6)===0&&(hu=Jt()+500,Ga(0))}}break;case 31:case 13:R=fi(y,2),R!==null&&Xt(R,y,2),du(),gd(y,2)}if(y=vd(c),y===null&&id(r,s,c,Mu,o),y===p)break;p=y}p!==null&&c.stopPropagation()}else id(r,s,c,null,o)}}function vd(r){return r=_h(r),_d(r)}var Mu=null;function _d(r){if(Mu=null,r=Qi(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===31){if(r=h(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Mu=r,null}function gv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tA()){case Tm:return 2;case Em:return 8;case bl:case nA:return 32;case Cm:return 268435456;default:return 32}default:return 32}}var wd=!1,Fr=null,Yr=null,Xr=null,Qa=new Map,Ka=new Map,Qr=[],mE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bv(r,s){switch(r){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Qa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(s.pointerId)}}function Wa(r,s,o,c,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Ki(s),s!==null&&yv(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function gE(r,s,o,c,p){switch(s){case"focusin":return Fr=Wa(Fr,r,s,o,c,p),!0;case"dragenter":return Yr=Wa(Yr,r,s,o,c,p),!0;case"mouseover":return Xr=Wa(Xr,r,s,o,c,p),!0;case"pointerover":var y=p.pointerId;return Qa.set(y,Wa(Qa.get(y)||null,r,s,o,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Ka.set(y,Wa(Ka.get(y)||null,r,s,o,c,p)),!0}return!1}function vv(r){var s=Qi(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,Um(r.priority,function(){mv(o)});return}}else if(s===31){if(s=h(o),s!==null){r.blockedOn=s,Um(r.priority,function(){mv(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ku(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=vd(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);vh=c,o.target.dispatchEvent(c),vh=null}else return s=Ki(o),s!==null&&yv(s),r.blockedOn=o,!1;s.shift()}return!0}function _v(r,s,o){ku(r)&&o.delete(s)}function bE(){wd=!1,Fr!==null&&ku(Fr)&&(Fr=null),Yr!==null&&ku(Yr)&&(Yr=null),Xr!==null&&ku(Xr)&&(Xr=null),Qa.forEach(_v),Ka.forEach(_v)}function Ou(r,s){r.blockedOn===s&&(r.blockedOn=null,wd||(wd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bE)))}var Du=null;function wv(r){Du!==r&&(Du=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Du===r&&(Du=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],p=r[s+2];if(typeof c!="function"){if(_d(c||o)===null)continue;break}var y=Ki(o);y!==null&&(r.splice(s,3),s-=3,vf(y,{pending:!0,data:p,method:o.method,action:c},c,p))}}))}function Os(r){function s(P){return Ou(P,r)}Fr!==null&&Ou(Fr,r),Yr!==null&&Ou(Yr,r),Xr!==null&&Ou(Xr,r),Qa.forEach(s),Ka.forEach(s);for(var o=0;o<Qr.length;o++){var c=Qr[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Qr.length&&(o=Qr[0],o.blockedOn===null);)vv(o),o.blockedOn===null&&Qr.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],_=p[Gt]||null;if(typeof y=="function")_||wv(o);else if(_){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,_=y[Gt]||null)R=_.formAction;else if(_d(p)!==null)continue}else R=_.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),wv(o)}}}function xv(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return p=_})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function xd(r){this._internalRoot=r}Uu.prototype.render=xd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=un();dv(o,c,r,s,null,null)},Uu.prototype.unmount=xd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;dv(r.current,2,null,r,null,null),du(),s[Xi]=null}};function Uu(r){this._internalRoot=r}Uu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Dm();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Qr.length&&s!==0&&s<Qr[o].priority;o++);Qr.splice(o,0,r),o===0&&vv(r)}};var Sv=e.version;if(Sv!=="19.2.3")throw Error(i(527,Sv,"19.2.3"));L.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var vE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{aa=Pu.inject(vE),en=Pu}catch{}}return Ja.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",p=kb,y=Ob,_=Db;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=hv(r,1,!1,null,null,o,c,null,p,y,_,xv),r[Xi]=s.current,rd(r),new xd(s)},Ja.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,p="",y=kb,_=Ob,R=Db,P=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=hv(r,1,!0,s,o??null,c,p,P,y,_,R,xv),s.context=fv(null),o=s.current,c=un(),c=hh(c),p=Pr(c),p.callback=null,zr(o,p,c),o=c,s.current.lanes=o,la(s,o),Vn(s),r[Xi]=s.current,rd(r),new Uu(s)},Ja.version="19.2.3",Ja}var Uv;function OE(){if(Uv)return Td.exports;Uv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Td.exports=kE(),Td.exports}var DE=OE(),Md={exports:{}},kd={};var Pv;function UE(){if(Pv)return kd;Pv=1;var t=Gc();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,a=t.useRef,l=t.useEffect,u=t.useMemo,h=t.useDebugValue;return kd.useSyncExternalStoreWithSelector=function(f,d,m,g,v){var b=a(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=u(function(){function S(D){if(!x){if(x=!0,C=D,D=g(D),v!==void 0&&w.hasValue){var O=w.value;if(v(O,D))return T=O}return T=D}if(O=T,n(C,D))return O;var M=g(D);return v!==void 0&&v(O,M)?(C=D,O):(C=D,T=M)}var x=!1,C,T,E=m===void 0?null:m;return[function(){return S(d())},E===null?void 0:function(){return S(E())}]},[d,m,g,v]);var A=i(f,b[0],b[1]);return l(function(){w.hasValue=!0,w.value=A},[A]),h(A),A},kd}var zv;function PE(){return zv||(zv=1,Md.exports=UE()),Md.exports}var zE=PE();function Tx(t){t()}function jE(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Tx(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=e={callback:n,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!i||t===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var jv={notify(){},get:()=>[]};function BE(t,e){let n,i=jv,a=0,l=!1;function u(A){m();const S=i.subscribe(A);let x=!1;return()=>{x||(x=!0,S(),g())}}function h(){i.notify()}function f(){w.onStateChange&&w.onStateChange()}function d(){return l}function m(){a++,n||(n=t.subscribe(f),i=jE())}function g(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=jv)}function v(){l||(l=!0,m())}function b(){l&&(l=!1,g())}const w={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:d,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>i};return w}var NE=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IE=NE(),LE=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qE=LE(),GE=()=>IE||qE?ce.useLayoutEffect:ce.useEffect,$E=GE();function Bv(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Eo(t,e){if(Bv(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(e,n[a])||!Bv(t[n[a]],e[n[a]]))return!1;return!0}var HE=Symbol.for("react-redux-context"),VE=typeof globalThis<"u"?globalThis:{};function FE(){if(!ce.createContext)return{};const t=VE[HE]??=new Map;let e=t.get(ce.createContext);return e||(e=ce.createContext(null),t.set(ce.createContext,e)),e}var ni=FE();function YE(t){const{children:e,context:n,serverState:i,store:a}=t,l=ce.useMemo(()=>{const f=BE(a);return{store:a,subscription:f,getServerState:i?()=>i:void 0}},[a,i]),u=ce.useMemo(()=>a.getState(),[a]);$E(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==a.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,u]);const h=n||ni;return ce.createElement(h.Provider,{value:l},e)}var XE=YE;function Cy(t=ni){return function(){return ce.useContext(t)}}var Ex=Cy();function Cx(t=ni){const e=t===ni?Ex:Cy(t),n=()=>{const{store:i}=e();return i};return Object.assign(n,{withTypes:()=>n}),n}var Ry=Cx();function QE(t=ni){const e=t===ni?Ry:Cx(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Rx=QE(),KE=(t,e)=>t===e;function WE(t=ni){const e=t===ni?Ex:Cy(t),n=(i,a={})=>{const{equalityFn:l=KE}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:h,subscription:f,getServerState:d}=u;ce.useRef(!0);const m=ce.useCallback({[i.name](v){return i(v)}}[i.name],[i]),g=zE.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,d||h.getState,m,l);return ce.useDebugValue(g),g};return Object.assign(n,{withTypes:()=>n}),n}var Mx=WE(),ZE=Tx;function Mt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var JE=typeof Symbol=="function"&&Symbol.observable||"@@observable",Nv=JE,Od=()=>Math.random().toString(36).substring(7).split("").join("."),eC={INIT:`@@redux/INIT${Od()}`,REPLACE:`@@redux/REPLACE${Od()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Od()}`},Ac=eC;function ri(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function My(t,e,n){if(typeof t!="function")throw new Error(Mt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mt(1));return n(My)(t,e)}let i=t,a=e,l=new Map,u=l,h=0,f=!1;function d(){u===l&&(u=new Map,l.forEach((S,x)=>{u.set(x,S)}))}function m(){if(f)throw new Error(Mt(3));return a}function g(S){if(typeof S!="function")throw new Error(Mt(4));if(f)throw new Error(Mt(5));let x=!0;d();const C=h++;return u.set(C,S),function(){if(x){if(f)throw new Error(Mt(6));x=!1,d(),u.delete(C),l=null}}}function v(S){if(!ri(S))throw new Error(Mt(7));if(typeof S.type>"u")throw new Error(Mt(8));if(typeof S.type!="string")throw new Error(Mt(17));if(f)throw new Error(Mt(9));try{f=!0,a=i(a,S)}finally{f=!1}return(l=u).forEach(C=>{C()}),S}function b(S){if(typeof S!="function")throw new Error(Mt(10));i=S,v({type:Ac.REPLACE})}function w(){const S=g;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Mt(11));function C(){const E=x;E.next&&E.next(m())}return C(),{unsubscribe:S(C)}},[Nv](){return this}}}return v({type:Ac.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:b,[Nv]:w}}function tC(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ac.INIT})>"u")throw new Error(Mt(12));if(typeof n(void 0,{type:Ac.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function ky(t){const e=Object.keys(t),n={};for(let l=0;l<e.length;l++){const u=e[l];typeof t[u]=="function"&&(n[u]=t[u])}const i=Object.keys(n);let a;try{tC(n)}catch(l){a=l}return function(u={},h){if(a)throw a;let f=!1;const d={};for(let m=0;m<i.length;m++){const g=i[m],v=n[g],b=u[g],w=v(b,h);if(typeof w>"u")throw h&&h.type,new Error(Mt(14));d[g]=w,f=f||w!==b}return f=f||i.length!==Object.keys(u).length,f?d:u}}function Tc(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function nC(...t){return e=>(n,i)=>{const a=e(n,i);let l=()=>{throw new Error(Mt(15))};const u={getState:a.getState,dispatch:(f,...d)=>l(f,...d)},h=t.map(f=>f(u));return l=Tc(...h)(a.dispatch),{...a,dispatch:l}}}function Oy(t){return ri(t)&&"type"in t&&typeof t.type=="string"}var Dy=Symbol.for("immer-nothing"),Co=Symbol.for("immer-draftable"),Kt=Symbol.for("immer-state");function kt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var qi=Object.getPrototypeOf;function Qn(t){return!!t&&!!t[Kt]}function Ln(t){return t?kx(t)||Array.isArray(t)||!!t[Co]||!!t.constructor?.[Co]||sl(t)||al(t):!1}var rC=Object.prototype.constructor.toString();function kx(t){if(!t||typeof t!="object")return!1;const e=qi(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===rC}function iC(t){return Qn(t)||kt(15,t),t[Kt].base_}function jo(t,e){Gi(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,i)=>e(i,n,t))}function Gi(t){const e=t[Kt];return e?e.type_:Array.isArray(t)?1:sl(t)?2:al(t)?3:0}function Bo(t,e){return Gi(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Dd(t,e){return Gi(t)===2?t.get(e):t[e]}function Ox(t,e,n){const i=Gi(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function sC(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function sl(t){return t instanceof Map}function al(t){return t instanceof Set}function Mi(t){return t.copy_||t.base_}function Op(t,e){if(sl(t))return new Map(t);if(al(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=kx(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Kt];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const u=a[l],h=i[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:t[u]})}return Object.create(qi(t),i)}else{const i=qi(t);if(i!==null&&n)return{...t};const a=Object.create(i);return Object.assign(a,t)}}function Uy(t,e=!1){return $c(t)||Qn(t)||!Ln(t)||(Gi(t)>1&&(t.set=t.add=t.clear=t.delete=aC),Object.freeze(t),e&&Object.entries(t).forEach(([n,i])=>Uy(i,!0))),t}function aC(){kt(2)}function $c(t){return Object.isFrozen(t)}var Dp={};function $i(t){const e=Dp[t];return e||kt(0,t),e}function oC(t,e){Dp[t]||(Dp[t]=e)}var No;function Dx(){return No}function lC(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Iv(t,e){e&&($i("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Up(t){Pp(t),t.drafts_.forEach(uC),t.drafts_=null}function Pp(t){t===No&&(No=t.parent_)}function Lv(t){return No=lC(No,t)}function uC(t){const e=t[Kt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function qv(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Kt].modified_&&(Up(e),kt(4)),Ln(t)&&(t=Ec(e,t),e.parent_||Cc(e,t)),e.patches_&&$i("Patches").generateReplacementPatches_(n[Kt].base_,t,e.patches_,e.inversePatches_)):t=Ec(e,n,[]),Up(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Dy?t:void 0}function Ec(t,e,n){if($c(e))return e;const i=e[Kt];if(!i)return jo(e,(a,l)=>Gv(t,i,e,a,l,n)),e;if(i.scope_!==t)return e;if(!i.modified_)return Cc(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,u=!1;i.type_===3&&(l=new Set(a),a.clear(),u=!0),jo(l,(h,f)=>Gv(t,i,a,h,f,n,u)),Cc(t,a,!1),n&&t.patches_&&$i("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function Gv(t,e,n,i,a,l,u){if(Qn(a)){const h=l&&e&&e.type_!==3&&!Bo(e.assigned_,i)?l.concat(i):void 0,f=Ec(t,a,h);if(Ox(n,i,f),Qn(f))t.canAutoFreeze_=!1;else return}else u&&n.add(a);if(Ln(a)&&!$c(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ec(t,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Cc(t,a)}}function Cc(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Uy(e,n)}function cC(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:Dx(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,l=Py;n&&(a=[i],l=Io);const{revoke:u,proxy:h}=Proxy.revocable(a,l);return i.draft_=h,i.revoke_=u,h}var Py={get(t,e){if(e===Kt)return t;const n=Mi(t);if(!Bo(n,e))return hC(t,n,e);const i=n[e];return t.finalized_||!Ln(i)?i:i===Ud(t.base_,e)?(Pd(t),t.copy_[e]=jp(i,t)):i},has(t,e){return e in Mi(t)},ownKeys(t){return Reflect.ownKeys(Mi(t))},set(t,e,n){const i=Ux(Mi(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const a=Ud(Mi(t),e),l=a?.[Kt];if(l&&l.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(sC(n,a)&&(n!==void 0||Bo(t.base_,e)))return!0;Pd(t),zp(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ud(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Pd(t),zp(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Mi(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){kt(11)},getPrototypeOf(t){return qi(t.base_)},setPrototypeOf(){kt(12)}},Io={};jo(Py,(t,e)=>{Io[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Io.deleteProperty=function(t,e){return Io.set.call(this,t,e,void 0)};Io.set=function(t,e,n){return Py.set.call(this,t[0],e,n,t[0])};function Ud(t,e){const n=t[Kt];return(n?Mi(n):t)[e]}function hC(t,e,n){const i=Ux(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function Ux(t,e){if(!(e in t))return;let n=qi(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=qi(n)}}function zp(t){t.modified_||(t.modified_=!0,t.parent_&&zp(t.parent_))}function Pd(t){t.copy_||(t.copy_=Op(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fC=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const l=n;n=e;const u=this;return function(f=l,...d){return u.produce(f,m=>n.call(this,m,...d))}}typeof n!="function"&&kt(6),i!==void 0&&typeof i!="function"&&kt(7);let a;if(Ln(e)){const l=Lv(this),u=jp(e,void 0);let h=!0;try{a=n(u),h=!1}finally{h?Up(l):Pp(l)}return Iv(l,i),qv(a,l)}else if(!e||typeof e!="object"){if(a=n(e),a===void 0&&(a=e),a===Dy&&(a=void 0),this.autoFreeze_&&Uy(a,!0),i){const l=[],u=[];$i("Patches").generateReplacementPatches_(e,a,l,u),i(l,u)}return a}else kt(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(u,...h)=>this.produceWithPatches(u,f=>e(f,...h));let i,a;return[this.produce(e,n,(u,h)=>{i=u,a=h}),i,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ln(t)||kt(8),Qn(t)&&(t=dC(t));const e=Lv(this),n=jp(t,void 0);return n[Kt].isManual_=!0,Pp(e),n}finishDraft(t,e){const n=t&&t[Kt];(!n||!n.isManual_)&&kt(9);const{scope_:i}=n;return Iv(i,e),qv(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const a=e[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(e=e.slice(n+1));const i=$i("Patches").applyPatches_;return Qn(t)?i(t,e):this.produce(t,a=>i(a,e))}};function jp(t,e){const n=sl(t)?$i("MapSet").proxyMap_(t,e):al(t)?$i("MapSet").proxySet_(t,e):cC(t,e);return(e?e.scope_:Dx()).drafts_.push(n),n}function dC(t){return Qn(t)||kt(10,t),Px(t)}function Px(t){if(!Ln(t)||$c(t))return t;const e=t[Kt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Op(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Op(t,!0);return jo(n,(i,a)=>{Ox(n,i,Px(a))}),e&&(e.finalized_=!1),n}function pC(){const e="replace",i="remove";function a(v,b,w,A){switch(v.type_){case 0:case 2:return u(v,b,w,A);case 1:return l(v,b,w,A);case 3:return h(v,b,w,A)}}function l(v,b,w,A){let{base_:S,assigned_:x}=v,C=v.copy_;C.length<S.length&&([S,C]=[C,S],[w,A]=[A,w]);for(let T=0;T<S.length;T++)if(x[T]&&C[T]!==S[T]){const E=b.concat([T]);w.push({op:e,path:E,value:g(C[T])}),A.push({op:e,path:E,value:g(S[T])})}for(let T=S.length;T<C.length;T++){const E=b.concat([T]);w.push({op:"add",path:E,value:g(C[T])})}for(let T=C.length-1;S.length<=T;--T){const E=b.concat([T]);A.push({op:i,path:E})}}function u(v,b,w,A){const{base_:S,copy_:x}=v;jo(v.assigned_,(C,T)=>{const E=Dd(S,C),D=Dd(x,C),O=T?Bo(S,C)?e:"add":i;if(E===D&&O===e)return;const M=b.concat(C);w.push(O===i?{op:O,path:M}:{op:O,path:M,value:D}),A.push(O==="add"?{op:i,path:M}:O===i?{op:"add",path:M,value:g(E)}:{op:e,path:M,value:g(E)})})}function h(v,b,w,A){let{base_:S,copy_:x}=v,C=0;S.forEach(T=>{if(!x.has(T)){const E=b.concat([C]);w.push({op:i,path:E,value:T}),A.unshift({op:"add",path:E,value:T})}C++}),C=0,x.forEach(T=>{if(!S.has(T)){const E=b.concat([C]);w.push({op:"add",path:E,value:T}),A.unshift({op:i,path:E,value:T})}C++})}function f(v,b,w,A){w.push({op:e,path:[],value:b===Dy?void 0:b}),A.push({op:e,path:[],value:v})}function d(v,b){return b.forEach(w=>{const{path:A,op:S}=w;let x=v;for(let D=0;D<A.length-1;D++){const O=Gi(x);let M=A[D];typeof M!="string"&&typeof M!="number"&&(M=""+M),(O===0||O===1)&&(M==="__proto__"||M==="constructor")&&kt(19),typeof x=="function"&&M==="prototype"&&kt(19),x=Dd(x,M),typeof x!="object"&&kt(18,A.join("/"))}const C=Gi(x),T=m(w.value),E=A[A.length-1];switch(S){case e:switch(C){case 2:return x.set(E,T);case 3:kt(16);default:return x[E]=T}case"add":switch(C){case 1:return E==="-"?x.push(T):x.splice(E,0,T);case 2:return x.set(E,T);case 3:return x.add(T);default:return x[E]=T}case i:switch(C){case 1:return x.splice(E,1);case 2:return x.delete(E);case 3:return x.delete(w.value);default:return delete x[E]}default:kt(17,S)}}),v}function m(v){if(!Ln(v))return v;if(Array.isArray(v))return v.map(m);if(sl(v))return new Map(Array.from(v.entries()).map(([w,A])=>[w,m(A)]));if(al(v))return new Set(Array.from(v).map(m));const b=Object.create(qi(v));for(const w in v)b[w]=m(v[w]);return Bo(v,Co)&&(b[Co]=v[Co]),b}function g(v){return Qn(v)?m(v):v}oC("Patches",{applyPatches_:d,generatePatches_:a,generateReplacementPatches_:f})}var pn=new fC,ol=pn.produce,zx=pn.produceWithPatches.bind(pn);pn.setAutoFreeze.bind(pn);pn.setUseStrictShallowCopy.bind(pn);var $v=pn.applyPatches.bind(pn);pn.createDraft.bind(pn);pn.finishDraft.bind(pn);function yC(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function mC(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function gC(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var Hv=t=>Array.isArray(t)?t:[t];function bC(t){const e=Array.isArray(t[0])?t[0]:t;return gC(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function vC(t,e){const n=[],{length:i}=t;for(let a=0;a<i;a++)n.push(t[a].apply(null,e));return n}var _C=class{constructor(t){this.value=t}deref(){return this.value}},wC=typeof WeakRef<"u"?WeakRef:_C,xC=0,Vv=1;function zu(){return{s:xC,v:void 0,o:null,p:null}}function Rc(t,e={}){let n=zu();const{resultEqualityCheck:i}=e;let a,l=0;function u(){let h=n;const{length:f}=arguments;for(let g=0,v=f;g<v;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=h.o;w===null&&(h.o=w=new WeakMap);const A=w.get(b);A===void 0?(h=zu(),w.set(b,h)):h=A}else{let w=h.p;w===null&&(h.p=w=new Map);const A=w.get(b);A===void 0?(h=zu(),w.set(b,h)):h=A}}const d=h;let m;if(h.s===Vv)m=h.v;else if(m=t.apply(null,arguments),l++,i){const g=a?.deref?.()??a;g!=null&&i(g,m)&&(m=g,l!==0&&l--),a=typeof m=="object"&&m!==null||typeof m=="function"?new wC(m):m}return d.s=Vv,d.v=m,m}return u.clearCache=()=>{n=zu(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}function SC(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...a)=>{let l=0,u=0,h,f={},d=a.pop();typeof d=="object"&&(f=d,d=a.pop()),yC(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...f},{memoize:g,memoizeOptions:v=[],argsMemoize:b=Rc,argsMemoizeOptions:w=[]}=m,A=Hv(v),S=Hv(w),x=bC(a),C=g(function(){return l++,d.apply(null,arguments)},...A),T=b(function(){u++;const D=vC(x,arguments);return h=C.apply(null,D),h},...S);return Object.assign(T,{resultFunc:d,memoizedResultFunc:C,dependencies:x,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>h,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:g,argsMemoize:b})};return Object.assign(i,{withTypes:()=>i}),i}var zy=SC(Rc),AC=Object.assign((t,e=zy)=>{mC(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(l=>t[l]);return e(i,(...l)=>l.reduce((u,h,f)=>(u[n[f]]=h,u),{}))},{withTypes:()=>AC});function jx(t){return({dispatch:n,getState:i})=>a=>l=>typeof l=="function"?l(n,i,t):a(l)}var TC=jx(),EC=jx,CC=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tc:Tc.apply(null,arguments)},RC=t=>t&&typeof t.match=="function";function qt(t,e){function n(...i){if(e){let a=e(...i);if(!a)throw new Error(_t(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>Oy(i)&&i.type===t,n}var Bx=class bo extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,bo.prototype)}static get[Symbol.species](){return bo}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new bo(...e[0].concat(this)):new bo(...e.concat(this))}};function Fv(t){return Ln(t)?ol(t,()=>{}):t}function Bp(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function MC(t){return typeof t=="boolean"}var kC=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let u=new Bx;return n&&(MC(n)?u.push(TC):u.push(EC(n.extraArgument))),u},Hc="RTK_autoBatch",eo=()=>t=>({payload:t,meta:{[Hc]:!0}}),Yv=t=>e=>{setTimeout(e,t)},OC=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let a=!0,l=!1,u=!1;const h=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Yv(10):t.type==="callback"?t.queueNotification:Yv(t.timeout),d=()=>{u=!1,l&&(l=!1,h.forEach(m=>m()))};return Object.assign({},i,{subscribe(m){const g=()=>a&&m(),v=i.subscribe(g);return h.add(m),()=>{v(),h.delete(m)}},dispatch(m){try{return a=!m?.meta?.[Hc],l=!a,l&&(u||(u=!0,f(d))),i.dispatch(m)}finally{a=!0}}})},DC=t=>function(n){const{autoBatch:i=!0}=n??{};let a=new Bx(t);return i&&a.push(OC(typeof i=="object"?i:void 0)),a};function UC(t){const e=kC(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=t||{};let h;if(typeof n=="function")h=n;else if(ri(n))h=ky(n);else throw new Error(_t(1));let f;typeof i=="function"?f=i(e):f=e();let d=Tc;a&&(d=CC({trace:!1,...typeof a=="object"&&a}));const m=nC(...f),g=DC(m);let v=typeof u=="function"?u(g):g();const b=d(...v);return My(h,l,b)}function Nx(t){const e={},n=[];let i;const a={addCase(l,u){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(_t(28));if(h in e)throw new Error(_t(29));return e[h]=u,a},addMatcher(l,u){return n.push({matcher:l,reducer:u}),a},addDefaultCase(l){return i=l,a}};return t(a),[e,n,i]}function PC(t){return typeof t=="function"}function zC(t,e){let[n,i,a]=Nx(e),l;if(PC(t))l=()=>Fv(t());else{const h=Fv(t);l=()=>h}function u(h=l(),f){let d=[n[f.type],...i.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[a]),d.reduce((m,g)=>{if(g)if(Qn(m)){const b=g(m,f);return b===void 0?m:b}else{if(Ln(m))return ol(m,v=>g(v,f));{const v=g(m,f);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},h)}return u.getInitialState=l,u}var Ix=(t,e)=>RC(t)?t.match(e):t(e);function Sr(...t){return e=>t.some(n=>Ix(n,e))}function Ro(...t){return e=>t.every(n=>Ix(n,e))}function Vc(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",i=e.indexOf(t.meta.requestStatus)>-1;return n&&i}function ll(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function jy(...t){return t.length===0?e=>Vc(e,["pending"]):ll(t)?Sr(...t.map(e=>e.pending)):jy()(t[0])}function Ws(...t){return t.length===0?e=>Vc(e,["rejected"]):ll(t)?Sr(...t.map(e=>e.rejected)):Ws()(t[0])}function Fc(...t){const e=n=>n&&n.meta&&n.meta.rejectedWithValue;return t.length===0?Ro(Ws(...t),e):ll(t)?Ro(Ws(...t),e):Fc()(t[0])}function ii(...t){return t.length===0?e=>Vc(e,["fulfilled"]):ll(t)?Sr(...t.map(e=>e.fulfilled)):ii()(t[0])}function Np(...t){return t.length===0?e=>Vc(e,["pending","fulfilled","rejected"]):ll(t)?Sr(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):Np()(t[0])}var jC="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ul=(t=21)=>{let e="",n=t;for(;n--;)e+=jC[Math.random()*64|0];return e},BC=["name","message","stack","code"],zd=class{constructor(t,e){this.payload=t,this.meta=e}_type},Xv=class{constructor(t,e){this.payload=t,this.meta=e}_type},NC=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of BC)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},Qv="External signal was aborted",Kv=(()=>{function t(e,n,i){const a=qt(e+"/fulfilled",(f,d,m,g)=>({payload:f,meta:{...g||{},arg:m,requestId:d,requestStatus:"fulfilled"}})),l=qt(e+"/pending",(f,d,m)=>({payload:void 0,meta:{...m||{},arg:d,requestId:f,requestStatus:"pending"}})),u=qt(e+"/rejected",(f,d,m,g,v)=>({payload:g,error:(i&&i.serializeError||NC)(f||"Rejected"),meta:{...v||{},arg:m,requestId:d,rejectedWithValue:!!g,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function h(f,{signal:d}={}){return(m,g,v)=>{const b=i?.idGenerator?i.idGenerator(f):ul(),w=new AbortController;let A,S;function x(T){S=T,w.abort()}d&&(d.aborted?x(Qv):d.addEventListener("abort",()=>x(Qv),{once:!0}));const C=(async function(){let T;try{let D=i?.condition?.(f,{getState:g,extra:v});if(LC(D)&&(D=await D),D===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const O=new Promise((M,k)=>{A=()=>{k({name:"AbortError",message:S||"Aborted"})},w.signal.addEventListener("abort",A)});m(l(b,f,i?.getPendingMeta?.({requestId:b,arg:f},{getState:g,extra:v}))),T=await Promise.race([O,Promise.resolve(n(f,{dispatch:m,getState:g,extra:v,requestId:b,signal:w.signal,abort:x,rejectWithValue:(M,k)=>new zd(M,k),fulfillWithValue:(M,k)=>new Xv(M,k)})).then(M=>{if(M instanceof zd)throw M;return M instanceof Xv?a(M.payload,b,f,M.meta):a(M,b,f)})])}catch(D){T=D instanceof zd?u(null,b,f,D.payload,D.meta):u(D,b,f)}finally{A&&w.signal.removeEventListener("abort",A)}return i&&!i.dispatchConditionRejection&&u.match(T)&&T.meta.condition||m(T),T})();return Object.assign(C,{abort:x,requestId:b,arg:f,unwrap(){return C.then(IC)}})}}return Object.assign(h,{pending:l,rejected:u,fulfilled:a,settled:Sr(u,a),typePrefix:e})}return t.withTypes=()=>t,t})();function IC(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function LC(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var qC=Symbol.for("rtk-slice-createasyncthunk");function GC(t,e){return`${t}/${e}`}function $C({creators:t}={}){const e=t?.asyncThunk?.[qC];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(_t(11));const u=(typeof i.reducers=="function"?i.reducers(VC()):i.reducers)||{},h=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(C,T){const E=typeof C=="string"?C:C.type;if(!E)throw new Error(_t(12));if(E in f.sliceCaseReducersByType)throw new Error(_t(13));return f.sliceCaseReducersByType[E]=T,d},addMatcher(C,T){return f.sliceMatchers.push({matcher:C,reducer:T}),d},exposeAction(C,T){return f.actionCreators[C]=T,d},exposeCaseReducer(C,T){return f.sliceCaseReducersByName[C]=T,d}};h.forEach(C=>{const T=u[C],E={reducerName:C,type:GC(a,C),createNotation:typeof i.reducers=="function"};YC(T)?QC(E,T,d,e):FC(E,T,d)});function m(){const[C={},T=[],E=void 0]=typeof i.extraReducers=="function"?Nx(i.extraReducers):[i.extraReducers],D={...C,...f.sliceCaseReducersByType};return zC(i.initialState,O=>{for(let M in D)O.addCase(M,D[M]);for(let M of f.sliceMatchers)O.addMatcher(M.matcher,M.reducer);for(let M of T)O.addMatcher(M.matcher,M.reducer);E&&O.addDefaultCase(E)})}const g=C=>C,v=new Map;let b;function w(C,T){return b||(b=m()),b(C,T)}function A(){return b||(b=m()),b.getInitialState()}function S(C,T=!1){function E(O){let M=O[C];return typeof M>"u"&&T&&(M=A()),M}function D(O=g){const M=Bp(v,T,()=>new WeakMap);return Bp(M,O,()=>{const k={};for(const[j,B]of Object.entries(i.selectors??{}))k[j]=HC(B,O,A,T);return k})}return{reducerPath:C,getSelectors:D,get selectors(){return D(E)},selectSlice:E}}const x={name:a,reducer:w,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:A,...S(l),injectInto(C,{reducerPath:T,...E}={}){const D=T??l;return C.inject({reducerPath:D,reducer:w},E),{...x,...S(D,!0)}}};return x}}function HC(t,e,n,i){function a(l,...u){let h=e(l);return typeof h>"u"&&i&&(h=n()),t(h,...u)}return a.unwrapped=t,a}var br=$C();function VC(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function FC({type:t,reducerName:e,createNotation:n},i,a){let l,u;if("reducer"in i){if(n&&!XC(i))throw new Error(_t(17));l=i.reducer,u=i.prepare}else l=i;a.addCase(t,l).exposeCaseReducer(e,l).exposeAction(e,u?qt(t,u):qt(t))}function YC(t){return t._reducerDefinitionType==="asyncThunk"}function XC(t){return t._reducerDefinitionType==="reducerWithPrepare"}function QC({type:t,reducerName:e},n,i,a){if(!a)throw new Error(_t(18));const{payloadCreator:l,fulfilled:u,pending:h,rejected:f,settled:d,options:m}=n,g=a(t,l,m);i.exposeAction(e,g),u&&i.addCase(g.fulfilled,u),h&&i.addCase(g.pending,h),f&&i.addCase(g.rejected,f),d&&i.addMatcher(g.settled,d),i.exposeCaseReducer(e,{fulfilled:u||ju,pending:h||ju,rejected:f||ju,settled:d||ju})}function ju(){}var KC="task",Lx="listener",qx="completed",By="cancelled",WC=`task-${By}`,ZC=`task-${qx}`,Ip=`${Lx}-${By}`,JC=`${Lx}-${qx}`,Yc=class{constructor(t){this.code=t,this.message=`${KC} ${By} (reason: ${t})`}name="TaskAbortError";message},Ny=(t,e)=>{if(typeof t!="function")throw new TypeError(_t(32))},Mc=()=>{},Gx=(t,e=Mc)=>(t.catch(e),t),$x=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ii=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Li=t=>{if(t.aborted){const{reason:e}=t;throw new Yc(e)}};function Hx(t,e){let n=Mc;return new Promise((i,a)=>{const l=()=>a(new Yc(t.reason));if(t.aborted){l();return}n=$x(t,l),e.finally(()=>n()).then(i,a)}).finally(()=>{n=Mc})}var e2=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Yc?"cancelled":"rejected",error:n}}finally{e?.()}},kc=t=>e=>Gx(Hx(t,e).then(n=>(Li(t),n))),Vx=t=>{const e=kc(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Ys}=Object,Wv={},Xc="listenerMiddleware",t2=(t,e)=>{const n=i=>$x(t,()=>Ii(i,t.reason));return(i,a)=>{Ny(i);const l=new AbortController;n(l);const u=e2(async()=>{Li(t),Li(l.signal);const h=await i({pause:kc(l.signal),delay:Vx(l.signal),signal:l.signal});return Li(l.signal),h},()=>Ii(l,ZC));return a?.autoJoin&&e.push(u.catch(Mc)),{result:kc(t)(u),cancel(){Ii(l,WC)}}}},n2=(t,e)=>{const n=async(i,a)=>{Li(e);let l=()=>{};const h=[new Promise((f,d)=>{let m=t({predicate:i,effect:(g,v)=>{v.unsubscribe(),f([g,v.getState(),v.getOriginalState()])}});l=()=>{m(),d()}})];a!=null&&h.push(new Promise(f=>setTimeout(f,a,null)));try{const f=await Hx(e,Promise.race(h));return Li(e),f}finally{l()}};return(i,a)=>Gx(n(i,a))},Fx=t=>{let{type:e,actionCreator:n,matcher:i,predicate:a,effect:l}=t;if(e)a=qt(e).match;else if(n)e=n.type,a=n.match;else if(i)a=i;else if(!a)throw new Error(_t(21));return Ny(l),{predicate:a,type:e,effect:l}},Yx=Ys(t=>{const{type:e,predicate:n,effect:i}=Fx(t);return{id:ul(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(_t(22))}}},{withTypes:()=>Yx}),Zv=(t,e)=>{const{type:n,effect:i,predicate:a}=Fx(e);return Array.from(t.values()).find(l=>(typeof n=="string"?l.type===n:l.predicate===a)&&l.effect===i)},Lp=t=>{t.pending.forEach(e=>{Ii(e,Ip)})},r2=t=>()=>{t.forEach(Lp),t.clear()},Jv=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},Xx=Ys(qt(`${Xc}/add`),{withTypes:()=>Xx}),i2=qt(`${Xc}/removeAll`),Qx=Ys(qt(`${Xc}/remove`),{withTypes:()=>Qx}),s2=(...t)=>{console.error(`${Xc}/error`,...t)},a2=(t={})=>{const e=new Map,{extra:n,onError:i=s2}=t;Ny(i);const a=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),g=>{m.unsubscribe(),g?.cancelActive&&Lp(m)}),l=m=>{const g=Zv(e,m)??Yx(m);return a(g)};Ys(l,{withTypes:()=>l});const u=m=>{const g=Zv(e,m);return g&&(g.unsubscribe(),m.cancelActive&&Lp(g)),!!g};Ys(u,{withTypes:()=>u});const h=async(m,g,v,b)=>{const w=new AbortController,A=n2(l,w.signal),S=[];try{m.pending.add(w),await Promise.resolve(m.effect(g,Ys({},v,{getOriginalState:b,condition:(x,C)=>A(x,C).then(Boolean),take:A,delay:Vx(w.signal),pause:kc(w.signal),extra:n,signal:w.signal,fork:t2(w.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((x,C,T)=>{x!==w&&(Ii(x,Ip),T.delete(x))})},cancel:()=>{Ii(w,Ip),m.pending.delete(w)},throwIfCancelled:()=>{Li(w.signal)}})))}catch(x){x instanceof Yc||Jv(i,x,{raisedBy:"effect"})}finally{await Promise.all(S),Ii(w,JC),m.pending.delete(w)}},f=r2(e);return{middleware:m=>g=>v=>{if(!Oy(v))return g(v);if(Xx.match(v))return l(v.payload);if(i2.match(v)){f();return}if(Qx.match(v))return u(v.payload);let b=m.getState();const w=()=>{if(b===Wv)throw new Error(_t(23));return b};let A;try{if(A=g(v),e.size>0){const S=m.getState(),x=Array.from(e.values());for(const C of x){let T=!1;try{T=C.predicate(v,S,b)}catch(E){T=!1,Jv(i,E,{raisedBy:"predicate"})}T&&h(C,v,m,w)}}}finally{b=Wv}return A},startListening:l,stopListening:u,clearListeners:f}},o2=t=>"reducerPath"in t&&typeof t.reducerPath=="string",l2=t=>t.flatMap(e=>o2(e)?[[e.reducerPath,e.reducer]]:Object.entries(e)),Iy=Symbol.for("rtk-state-proxy-original"),u2=t=>!!t&&!!t[Iy],c2=new WeakMap,h2=(t,e)=>Bp(c2,t,()=>new Proxy(t,{get:(n,i,a)=>{if(i===Iy)return n;const l=Reflect.get(n,i,a);if(typeof l>"u"){const u=e[i.toString()];if(u){const h=u(void 0,{type:ul()});if(typeof h>"u")throw new Error(_t(24));return h}}return l}})),f2=t=>{if(!u2(t))throw new Error(_t(25));return t[Iy]},d2=(t={})=>t;function p2(...t){const e=Object.fromEntries(l2(t)),n=()=>Object.keys(e).length?ky(e):d2;let i=n();function a(h,f){return i(h,f)}a.withLazyLoadedSlices=()=>a;const l=(h,f={})=>{const{reducerPath:d,reducer:m}=h,g=e[d];return!f.overrideExisting&&g&&g!==m||(e[d]=m,i=n()),a},u=Object.assign(function(f,d){return function(g,...v){return f(h2(d?d(g,...v):g,e),...v)}},{original:f2});return Object.assign(a,{inject:l,selector:u})}function _t(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ly="persist:",qy="persist/FLUSH",cl="persist/REHYDRATE",Gy="persist/PAUSE",$y="persist/PERSIST",Hy="persist/PURGE",Vy="persist/REGISTER",Kx=-1;function vc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vc=function(n){return typeof n}:vc=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vc(t)}function e_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function y2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e_(n,!0).forEach(function(i){m2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e_(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function m2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g2(t,e,n,i){i.debug;var a=y2({},n);return t&&vc(t)==="object"&&Object.keys(t).forEach(function(l){l!=="_persist"&&e[l]===n[l]&&(a[l]=t[l])}),a}function b2(t){var e=t.blacklist||null,n=t.whitelist||null,i=t.transforms||[],a=t.throttle||0,l="".concat(t.keyPrefix!==void 0?t.keyPrefix:Ly).concat(t.key),u=t.storage,h;t.serialize===!1?h=function(D){return D}:typeof t.serialize=="function"?h=t.serialize:h=v2;var f=t.writeFailHandler||null,d={},m={},g=[],v=null,b=null,w=function(D){Object.keys(D).forEach(function(O){x(O)&&d[O]!==D[O]&&g.indexOf(O)===-1&&g.push(O)}),Object.keys(d).forEach(function(O){D[O]===void 0&&x(O)&&g.indexOf(O)===-1&&d[O]!==void 0&&g.push(O)}),v===null&&(v=setInterval(A,a)),d=D};function A(){if(g.length===0){v&&clearInterval(v),v=null;return}var E=g.shift(),D=i.reduce(function(O,M){return M.in(O,E,d)},d[E]);if(D!==void 0)try{m[E]=h(D)}catch(O){console.error("redux-persist/createPersistoid: error serializing state",O)}else delete m[E];g.length===0&&S()}function S(){Object.keys(m).forEach(function(E){d[E]===void 0&&delete m[E]}),b=u.setItem(l,h(m)).catch(C)}function x(E){return!(n&&n.indexOf(E)===-1&&E!=="_persist"||e&&e.indexOf(E)!==-1)}function C(E){f&&f(E)}var T=function(){for(;g.length!==0;)A();return b||Promise.resolve()};return{update:w,flush:T}}function v2(t){return JSON.stringify(t)}function _2(t){var e=t.transforms||[],n="".concat(t.keyPrefix!==void 0?t.keyPrefix:Ly).concat(t.key),i=t.storage;t.debug;var a;return t.deserialize===!1?a=function(u){return u}:typeof t.deserialize=="function"?a=t.deserialize:a=w2,i.getItem(n).then(function(l){if(l)try{var u={},h=a(l);return Object.keys(h).forEach(function(f){u[f]=e.reduceRight(function(d,m){return m.out(d,f,h)},a(h[f]))}),u}catch(f){throw f}else return})}function w2(t){return JSON.parse(t)}function x2(t){var e=t.storage,n="".concat(t.keyPrefix!==void 0?t.keyPrefix:Ly).concat(t.key);return e.removeItem(n,S2)}function S2(t){}function t_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t_(n,!0).forEach(function(i){A2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t_(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function A2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T2(t,e){if(t==null)return{};var n=E2(t,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function E2(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,l;for(l=0;l<i.length;l++)a=i[l],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var C2=5e3;function R2(t,e){var n=t.version!==void 0?t.version:Kx;t.debug;var i=t.stateReconciler===void 0?g2:t.stateReconciler,a=t.getStoredState||_2,l=t.timeout!==void 0?t.timeout:C2,u=null,h=!1,f=!0,d=function(g){return g._persist.rehydrated&&u&&!f&&u.update(g),g};return function(m,g){var v=m||{},b=v._persist,w=T2(v,["_persist"]),A=w;if(g.type===$y){var S=!1,x=function(k,j){S||(g.rehydrate(t.key,k,j),S=!0)};if(l&&setTimeout(function(){!S&&x(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},l),f=!1,u||(u=b2(t)),b)return pr({},e(A,g),{_persist:b});if(typeof g.rehydrate!="function"||typeof g.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return g.register(t.key),a(t).then(function(M){var k=t.migrate||function(j,B){return Promise.resolve(j)};k(M,n).then(function(j){x(j)},function(j){x(void 0,j)})},function(M){x(void 0,M)}),pr({},e(A,g),{_persist:{version:n,rehydrated:!1}})}else{if(g.type===Hy)return h=!0,g.result(x2(t)),pr({},e(A,g),{_persist:b});if(g.type===qy)return g.result(u&&u.flush()),pr({},e(A,g),{_persist:b});if(g.type===Gy)f=!0;else if(g.type===cl){if(h)return pr({},A,{_persist:pr({},b,{rehydrated:!0})});if(g.key===t.key){var C=e(A,g),T=g.payload,E=i!==!1&&T!==void 0?i(T,m,C,t):C,D=pr({},E,{_persist:pr({},b,{rehydrated:!0})});return d(D)}}}if(!b)return e(m,g);var O=e(A,g);return O===A?m:d(pr({},O,{_persist:b}))}}function n_(t){return O2(t)||k2(t)||M2()}function M2(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k2(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function O2(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function r_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function qp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r_(n,!0).forEach(function(i){D2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r_(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function D2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wx={registry:[],bootstrapped:!1},U2=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wx,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Vy:return qp({},e,{registry:[].concat(n_(e.registry),[n.key])});case cl:var i=e.registry.indexOf(n.key),a=n_(e.registry);return a.splice(i,1),qp({},e,{registry:a,bootstrapped:a.length===0});default:return e}};function P2(t,e,n){var i=My(U2,Wx,void 0),a=function(f){i.dispatch({type:Vy,key:f})},l=function(f,d,m){var g={type:cl,payload:d,err:m,key:f};t.dispatch(g),i.dispatch(g)},u=qp({},i,{purge:function(){var f=[];return t.dispatch({type:Hy,result:function(m){f.push(m)}}),Promise.all(f)},flush:function(){var f=[];return t.dispatch({type:qy,result:function(m){f.push(m)}}),Promise.all(f)},pause:function(){t.dispatch({type:Gy})},persist:function(){t.dispatch({type:$y,register:a,rehydrate:l})}});return u.persist(),u}function z2(t,e){return function(n,i){if(!n)return Promise.resolve(void 0);var a=n._persist&&n._persist.version!==void 0?n._persist.version:Kx;if(a===i||a>i)return Promise.resolve(n);var l=Object.keys(t).map(function(h){return parseInt(h)}).filter(function(h){return i>=h&&h>a}).sort(function(h,f){return h-f});try{var u=l.reduce(function(h,f){return t[f](h)},n);return Promise.resolve(u)}catch(h){return Promise.reject(h)}}}const Zx=a2(),Jx=Zx.startListening.withTypes();var to={},Bu={},Nu={},i_;function j2(){if(i_)return Nu;i_=1,Nu.__esModule=!0,Nu.default=a;function t(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(h){return typeof h}:t=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t(l)}function e(){}var n={getItem:e,setItem:e,removeItem:e};function i(l){if((typeof self>"u"?"undefined":t(self))!=="object"||!(l in self))return!1;try{var u=self[l],h="redux-persist ".concat(l," test");u.setItem(h,"test"),u.getItem(h),u.removeItem(h)}catch{return!1}return!0}function a(l){var u="".concat(l,"Storage");return i(u)?self[u]:n}return Nu}var s_;function B2(){if(s_)return Bu;s_=1,Bu.__esModule=!0,Bu.default=n;var t=e(j2());function e(i){return i&&i.__esModule?i:{default:i}}function n(i){var a=(0,t.default)(i);return{getItem:function(u){return new Promise(function(h,f){h(a.getItem(u))})},setItem:function(u,h){return new Promise(function(f,d){f(a.setItem(u,h))})},removeItem:function(u){return new Promise(function(h,f){h(a.removeItem(u))})}}}return Bu}var a_;function N2(){if(a_)return to;a_=1,to.__esModule=!0,to.default=void 0;var t=e(B2());function e(i){return i&&i.__esModule?i:{default:i}}var n=(0,t.default)("local");return to.default=n,to}var I2=N2();const L2=Ar(I2);function q2(t){var e="";return n(t),e;function n(a){if(a===null||typeof a!="object"||a.toJSON!=null)e+=JSON.stringify(a);else if(Array.isArray(a)){e+="[";var l=!1;a.forEach(function(h){l&&(e+=","),l=!0,h===void 0&&(h=null),n(h)}),e+="]"}else{e+="{";var u=Object.keys(a).filter(function(h){return a[h]!==void 0}).sort();u.forEach(function(h,f){return i(a,h,f)}),e+="}"}}function i(a,l,u){u>0&&(e+=","),e+=JSON.stringify(l),e+=":",n(a[l])}}const _c=1e-4,Oc=(t,e)=>Math.abs(t-e)<_c,U4=t=>t===0?_c:Math.abs(t)<_c?_c*Math.sign(t):t,Fy=["away","towards","left","right"],G2=["awayRight","towardsRight","towardsLeft","awayLeft"],eS=[...Fy,...G2],$2=t=>t==="away"||t==="towards"?"y":"x",P4=t=>t==="away"?"towards":t==="towards"?"away":t==="left"?"right":"left",z4=t=>H2($2(t)),H2=t=>t==="x"?"y":"x",Mo=(t,...e)=>{const n={x:t.x,y:t.y};for(const i of e)n.x+=i.x??0,n.y+=i.y??0;return n},j4=(t,...e)=>{const n={x:t.x,y:t.y};for(const i of e)n.x-=i.x??0,n.y-=i.y??0;return n},V2=(t,e)=>({x:t.x*e,y:t.y*e}),B4=(t,e)=>({x:t.x*e,y:t.y*e,z:t.z*e}),N4=(t,e,n)=>{const i=t;return i.x=e.x*n,i.y=e.y*n,i.z=e.z*n,i},F2=(t,e)=>(t.x*=e,t.y*=e,t.z*=e,t),I4=(t,e)=>({x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}),Y2=({x:t,y:e,z:n})=>Math.hypot(t,e,n),L4=({x:t,y:e})=>Math.hypot(t,e),q4=t=>{const e=Y2(t);if(e===0)throw new Error("unitVectorInPlace called with zero length vector");return F2(t,1/e)},G4=[{x:0,y:0,z:0},{x:0,y:0,z:1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:1}],$4=(...t)=>{if(t.length===0)return{x:0,y:0,z:0};const[e,...n]=t,i={x:e.x??0,y:e.y??0,z:e.z??0};for(const a of n)i.x+=a.x??0,i.y+=a.y??0,i.z+=a.z??0;return i},H4=(t,...e)=>{for(const n of e)t.x+=n.x??0,t.y+=n.y??0,t.z+=n.z??0;return t},V4=(...t)=>t.reduce(({x:e,y:n,z:i},{x:a,y:l,z:u})=>({x:e*a,y:n*l,z:i*u}),X2),F4=(t,...e)=>{const n={x:t.x,y:t.y,z:t.z};for(const i of e)n.x-=i.x??0,n.y-=i.y??0,n.z-=i.z??0;return n},Y4=(t,...e)=>{for(const n of e)t.x-=n.x??0,t.y-=n.y??0,t.z-=n.z??0;return t},X4=({x:t,y:e,z:n},{x:i,y:a,z:l})=>t===i&&e===a&&n===l,Q4=({x:t,y:e},{x:n,y:i})=>t===n&&e===i,K4=Object.freeze({x:0,y:0}),W4=Object.freeze({x:0,y:0,z:0}),X2=Object.freeze({x:1,y:1,z:1}),Z4=Object.freeze({x:1,y:1,z:0}),J4=Object.freeze({x:1,y:0,z:1}),ej=Object.freeze({x:0,y:1,z:1}),tj=Object.freeze({x:1,y:0,z:0}),nj=Object.freeze({x:0,y:1,z:0}),rj=Object.freeze({x:0,y:0,z:1}),ij=["x","y","z"],sj=({x:t,y:e})=>{if(!(Oc(t,0)&&Oc(e,0)))return e>t?e>-t?"away":"right":e>-t?"left":"towards"},Q2=["right","towardsRight","towards","towardsLeft","left","awayLeft","away","awayRight"],aj=({x:t,y:e})=>{if(Oc(t,0)&&Oc(e,0))return;const n=Math.atan2(-e,-t),i=Math.round(8*n/(2*Math.PI))&7;return Q2[i]},K2=["lookUp","lookDown","lookLeft","lookRight"],W2=["jump","fire","carry","swop","swop.head","swop.heels","hold","toggleColourisation","toggleCrtFilter","cycleResolution","toggleShowFps","menu_select","menu_openOrExit","menu_exit","map",...Fy,"lookShift",...K2,"pageUp","pageDown","home","end"],tS=[...W2];var cn={},jd={},Bd={},o_;function Yy(){if(o_)return Bd;o_=1;function t(e){return typeof e<"u"}return Bd.notUndefined=t,Bd}var l_;function nS(){if(l_)return jd;l_=1;const{notUndefined:t}=Yy();function e(n){return n!=null&&t(n[Symbol.iterator])}return jd.isIterable=e,jd}var Nd={},u_;function Z2(){return u_||(u_=1,Nd.isLoopable=nS().isIterable),Nd}var Id={},c_;function J2(){if(c_)return Id;c_=1;const{notUndefined:t}=Yy();function e(n){return n==null||t(n[Symbol.iterator])}return Id.isWrappable=e,Id}var Iu={},h_;function eR(){if(h_)return Iu;h_=1;function*t(n){yield*n}Iu.wrap=t;function*e(n){n!=null&&(yield*n)}return Iu.nullableWrap=e,Iu}var Lu={},f_;function tR(){if(f_)return Lu;f_=1;function t(i,a=i.length,l=[]){return(...u)=>a<=u.length?i(...l,...u):t(i,a-u.length,[...l,...u])}Lu.curry=t;function e(i,a){const{fn:l,validateArgs:u,variadic:h,reduces:f,growRight:d,minArgs:m,maxArgs:g,isIterable:v,iterableType:b,applyOnIterableArgs:w,IterableClass:A}=i;if(a.length>m){let S=!0;const x=h?a.findIndex((T,E)=>v(T)&&E>=m):Math.min(g,a.length-1),C=h?a.length:x+1;if(h)for(let T=x;T<a.length;T++)S=S&&v(a[T]);else S=v(a[x]);if(a.length>g&&(x===-1||!S)){const T=h?`...${b}s`:b,E=`${l.name} takes up to ${g} arguments, followed by ${T}. You already passed ${a.length} arguments`;throw h?new Error(`${E} and the following arguments were not all ${b}s`):new Error(`${E} and the last argument was not ${b}`)}if(x>=0&&S){for(let E=x;E<C;E++)a[E]=w(a[E]);const T=h?a.slice(x):a[x];return a.splice(x),d||a.reverse(),a.unshift(T),u(a),f?l(...a):new A(l,a)}}return n(i,a)}function n(i,a=[]){return(...l)=>{if(l.length===0)throw new Error("Cannot make a partial application with no arguments");return l.unshift(...a),e(i,l)}}return Lu.variadicCurryWithValidation=n,Lu}var no={},d_;function nR(){if(d_)return no;d_=1;const t=Symbol.for("_");no._=t;const e=Symbol("__iterate");no.__iterate=e;const n=Symbol("split");return no.split=n,no}var p_;function Qc(){if(p_)return cn;p_=1;const{isIterable:t}=nS(),{isLoopable:e}=Z2(),{isWrappable:n}=J2(),{nullableWrap:i}=eR(),{variadicCurryWithValidation:a}=tR(),{_:l,__iterate:u}=nR();cn.wrap=i,cn.isIterable=t,cn.isLoopable=e,cn.isWrappable=n;function h(A){if(n(A))return t(A)?A:i(A);throw typeof A.next=="function"?new TypeError("iter-tools received a value that looked like an iterator but was not iterable. Get help fixing this: https://github.com/iter-tools/iter-tools/wiki/Making-iterators-iterable"):new TypeError("Expected an iterable, null, or undefined")}cn.ensureIterable=h;function f(A){"return"in A&&A.return()}cn.callReturn=f;function d(A,S){this[l]={fn:A,args:S,staticIterator:null}}cn.BaseIterableIterator=d,Object.assign(d.prototype,{constructor:d,[u](){const{fn:A,args:S}=this[l];return A(...S)},next(){const A=this[l];return A.staticIterator=A.staticIterator||this[u](),A.staticIterator.next()},return(A){const S=this[l];return S.staticIterator=S.staticIterator||this[u](),S.staticIterator.return(A)},throw(A){const S=this[l];return S.staticIterator=S.staticIterator||this[u](),S.staticIterator.throw(A)}});function m(...A){d.apply(this,A)}cn.IterableIterator=m,m.prototype=Object.assign(Object.create(d.prototype),{constructor:m,[Symbol.iterator](){return this[u]()}});function g(A,S={}){const{validateArgs:x=k=>{},variadic:C=!1,reduces:T=!1,growRight:E=!1,minArgs:D=A.length-1,maxArgs:O=A.length-1,applyOnIterableArgs:M=h}=S;return{fn:A,validateArgs:x,variadic:C,reduces:T,growRight:E,minArgs:D,maxArgs:O,isIterable:n,iterableType:"iterable",applyOnIterableArgs:M,IterableClass:m}}function v(A){return[...A]}cn.cache=v;function b(A,{validateArgs:S=x=>x}={}){return(...x)=>(S(x),new m(A,x))}cn.wrapWithIterableIterator=b;const w=(A,S)=>a(g(A,S));return cn.iterableCurry=w,cn}var ro={},y_;function rR(){if(y_)return ro;y_=1;function t(i,a=!1){return typeof i=="number"&&!isNaN(i)&&isFinite(i)&&!(a&&i===0)}ro.isInteger=t;function e(i,a=!1){return t(i)&&(a?i>0:i>=0)}ro.isPositiveInteger=e;function n(i,a=!1){return typeof i=="number"&&!isNaN(i)&&!(a&&i===0)}return ro.isIntegerOrInfinite=n,ro}var Ld={},m_;function iR(){if(m_)return Ld;m_=1;function t(e){return typeof e=="object"&&e!==null}return Ld.isObject=t,Ld}var qu={},g_;function sR(){if(g_)return qu;g_=1;const{wrapWithIterableIterator:t,ensureIterable:e}=Qc();function*n(...a){for(const l of a)yield*e(l)}qu.__concat=n;const i=t(n);return qu.concat=i,qu}var Gu={},b_;function aR(){if(b_)return Gu;b_=1;const{wrapWithIterableIterator:t}=Qc(),{hasOwnProperty:e}=Object.prototype;function*n(a){if(a!=null)for(const l in a)e.call(a,l)&&(yield[l,a[l]])}Gu.__objectEntries=n;const i=t(n,{validateArgs(a){if(!(a[0]==null||typeof a[0]=="object"))throw new Error("obj argument to objectEntries must be an object, null, or undefined")}});return Gu.objectEntries=i,Gu}var $u={},v_;function oR(){if(v_)return $u;v_=1;const{wrapWithIterableIterator:t}=Qc(),{hasOwnProperty:e}=Object.prototype;function*n(a){if(a!=null)for(const l in a)e.call(a,l)&&(yield l)}$u.__objectKeys=n;const i=t(n,{validateArgs(a){if(!(a[0]==null||typeof a[0]=="object"))throw new Error("obj argument to objectKeys must be an object, null, or undefined")}});return $u.objectKeys=i,$u}var Hu={},__;function lR(){if(__)return Hu;__=1;const{wrapWithIterableIterator:t}=Qc(),{isInteger:e,isIntegerOrInfinite:n}=rR(),{isObject:i}=iR(),{notUndefined:a}=Yy();function*l(h=0,f=1/0,d=1){for(let m=h;d>0?m<f:m>f;m+=d)yield m}Hu.__range=l;const u=t(l,{growRight:!0,validateArgs(h){let[f,d=1/0,m]=h,g;if(i(f)?{start:g,end:d,step:m}=f:h.length>1?g=f:d=f,a(g)&&!e(g))throw new TypeError("The specified start was not an integer");if(a(d)&&!n(d))throw new TypeError("The specified end was not an integer or infinite");if(a(m)&&!e(m,!0))throw new TypeError("The specified step was not a non-zero integer");h[0]=g,h[1]=d,h[2]=m}});return Hu.range=u,Hu}var qd,w_;function uR(){return w_||(w_=1,qd=sR().concat),qd}var cR=uR();const hR=Ar(cR);var Gd,x_;function fR(){return x_||(x_=1,Gd=aR().objectEntries),Gd}var dR=fR();const pR=Ar(dR);var $d,S_;function yR(){return S_||(S_=1,$d=oR().objectKeys),$d}var mR=yR();const gR=Ar(mR);var Hd,A_;function bR(){return A_||(A_=1,Hd=lR().range),Hd}var vR=bR();const _R=Ar(vR),oj=Object.entries,wR=pR,lj=Object.keys,uj=gR,xR=Object.fromEntries,Xy=Object.fromEntries,rS={presses:Xy(tS.map(t=>[t,{keys:[],gamepadButtons:[]}])),axes:{x:[],y:[],xLook:[],yLook:[]},radialAxes:{xy:[]}},Vu=(t,e)=>Array.from(new Set([...t??[],...e??[]]));function Fi(...t){const e=new Set,n=new Set,i=new Set,a=new Set;return t.reduceRight((l,u)=>{const h=new Set(e),f=new Set(n),d=new Set(i),m=new Set(a);for(const b of tS){const w=u?.presses?.[b]?.keys??[],A=u?.presses?.[b]?.gamepadButtons??[],S=w.filter(C=>!h.has(C)),x=A.filter(C=>!f.has(C));l.presses[b]={keys:Vu(l.presses[b]?.keys,S),gamepadButtons:Vu(l.presses[b]?.gamepadButtons,x)};for(const C of w)e.add(C);for(const C of A)n.add(C)}for(const b of["x","y","xLook","yLook"]){const w=u.axes?.[b]??[],A=w.filter(S=>!d.has(S));l.axes[b]=Vu(l.axes[b],A);for(const S of w)i.add(S)}const g=u.radialAxes?.xy??[],v=g.filter(b=>!m.has(b));l.radialAxes&&(l.radialAxes.xy=Vu(l.radialAxes.xy,v));for(const b of g)a.add(b);return l},structuredClone(rS))}const Qy=t=>t[Symbol.iterator](),SR=(t,e)=>{const i=Qy(wR(t)).map(e).filter(a=>a!==void 0);return xR(i)},ea={buttons:{dPadDown:13,dPadUp:12,dPadLeft:14,dPadRight:15,a:0,b:1,x:2,y:3,lb:4,lt:6,rb:5,rt:7,select:8,start:9,lPress:10,rPress:11},axes:{lStickX:0,lStickY:1,rStickX:2,rStickY:3},radialAxes:{}},AR={buttons:{a:0,b:1,x:3,y:4,lb:6,lt:8,rb:7,rt:9,select:10,start:11,l3:2,r3:5},axes:{lStickX:0,lStickY:1,rStickX:2,rStickY:5},radialAxes:{xy:9}};SR(ea.buttons,([t,e])=>[e,t]);const TR={start:"1",coin:"5",directions:{up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},buttons:["Control","Alt"," ","Shift","Z","X"]},Ds={directions:{up:"R",down:"F",left:"D",right:"G"},buttons:["A","S","Q","W","I","K"]},Rn={dPadUp:"C",dPadDown:"D",dPadLeft:"E",dPadRight:"F",a:"J",b:"G",y:"H",x:"I",rb:"M",start:"O",select:"N"},Yi={presses:{right:{keys:["ArrowRight"]},towards:{keys:["ArrowDown"]},left:{keys:["ArrowLeft"]},away:{keys:["ArrowUp"]},jump:{keys:[" ","`","Z","\\"]},carry:{keys:["Shift","`","Z","\\"]},fire:{keys:["D"]},swop:{keys:["Enter"]},"swop.head":{keys:["[","A"]},"swop.heels":{keys:["]","S"]},hold:{keys:["P"]},map:{keys:["M","Tab"]},menu_openOrExit:{keys:["Escape",""]},menu_select:{keys:["Enter"]},toggleCrtFilter:{keys:["F8","T"]},toggleShowFps:{keys:["F9"]},toggleColourisation:{keys:["F10"]},cycleResolution:{keys:["0"]},pageDown:{keys:["PageDown"]},pageUp:{keys:["PageUp"]},home:{keys:["Home"]},end:{keys:["End"]}}},ta=({buttons:t,axes:e,radialAxes:n})=>{const i=a=>a!==void 0;return{presses:{right:{gamepadButtons:[t.dPadRight].filter(i)},towards:{gamepadButtons:[t.dPadDown].filter(i)},left:{gamepadButtons:[t.dPadLeft].filter(i)},away:{gamepadButtons:[t.dPadUp].filter(i)},jump:{gamepadButtons:[t.a,t.y].filter(i)},carry:{gamepadButtons:[t.x,t.y].filter(i)},fire:{gamepadButtons:[t.b].filter(i)},lookShift:{gamepadButtons:[t.rb].filter(i)},"swop.head":{gamepadButtons:[t.lt].filter(i)},"swop.heels":{gamepadButtons:[t.rt].filter(i)},hold:{gamepadButtons:[t.start].filter(i)},menu_select:{gamepadButtons:[t.a].filter(i)},menu_exit:{gamepadButtons:[t.b].filter(i)},menu_openOrExit:{gamepadButtons:[t.select].filter(i)},map:{gamepadButtons:[t.lb].filter(i)},toggleCrtFilter:{gamepadButtons:[t.l3].filter(i)},toggleShowFps:{gamepadButtons:[t.r3].filter(i)}},axes:{x:[e.lStickX].filter(i),y:[e.lStickY].filter(i),xLook:[e.rStickX].filter(i),yLook:[e.rStickY].filter(i)},radialAxes:{xy:[n.xy].filter(i)}}},ER={inputAssignment:Fi(Yi,ta(ea),{presses:{right:{keys:["P","7"]},towards:{keys:["A","8"]},left:{keys:["O","6"]},away:{keys:["Q","9"]},jump:{keys:[" ","M","N","B","Alt"]},carry:{keys:[" ","Enter","L","K","J"]},fire:{keys:["Shift","Z","X","C","V"]},swop:{keys:["S","D","F","G"]},hold:{keys:["H"]}}}),description:"Closely matches the ZX Spectrum original game's keys"},CR={inputAssignment:Fi(Yi,ta(ea),{presses:{carry:{keys:["F3","F5"]},fire:{keys:[" "]},jump:{keys:["F5"]},swop:{keys:["F1"]},hold:{keys:["H"]}}}),description:"Closely matches Amiga version keys - heavy on the F-keys"},RR={inputAssignment:Fi(Yi,ta(ea),{presses:{lookUp:{keys:["I"]},lookDown:{keys:["K"]},lookLeft:{keys:["J"]},lookRight:{keys:["L"]},lookShift:{keys:["C"]}}}),description:"Combined key and joystick/gamepad assignment, should work on most setups"},MR={inputAssignment:Fi(Yi,ta(ea),{presses:{right:{keys:["D"]},towards:{keys:["S"]},left:{keys:["A"]},away:{keys:["W"]},jump:{keys:[" ","F","P"]},carry:{keys:["Shift","F","I","P"]},fire:{keys:["E","O","Control"]},swop:{keys:["Q"]},hold:{keys:["H"]}}}),description:"Modern, minimalist WASD key layout"},kR={inputAssignment:Fi(Yi,ta(ea),{presses:{right:{keys:[Rn.dPadRight]},towards:{keys:[Rn.dPadDown]},left:{keys:[Rn.dPadLeft]},away:{keys:[Rn.dPadUp]},jump:{keys:[Rn.a,Rn.y]},carry:{keys:[Rn.b,Rn.y]},fire:{keys:[Rn.x]},swop:{keys:[Rn.rb]},hold:{keys:[Rn.start]},menu_openOrExit:{keys:[Rn.select]}}}),description:"8bitdo controllers in keyboard mode (identifies to OS as a keyboard). They work as controllers even on phones that dont support controllers"},OR={inputAssignment:Fi(Yi,ta(AR)),description:"8Bitdo Ultimate 2c Wired reports in a non-standard way on some systems - use this if you have this controller and it doesn't work as expected"},DR=t=>({presses:{right:{keys:[t.directions.right]},towards:{keys:[t.directions.down]},left:{keys:[t.directions.left]},away:{keys:[t.directions.up]},jump:{keys:[t.buttons[0],t.buttons[3]]},carry:{keys:[t.buttons[1],t.buttons[3]]},fire:{keys:[t.buttons[2]]},swop:{keys:[t.start]},hold:{keys:[t.coin]},menu_openOrExit:{keys:[t.buttons[4]]},lookShift:{keys:[t.buttons[5]]}}}),UR={inputAssignment:Fi(rS,Yi,{presses:{menu_openOrExit:{keys:["`","Tab"]}}},DR(TR),{presses:{lookDown:{keys:[Ds.directions.down]},lookLeft:{keys:[Ds.directions.left]},lookRight:{keys:[Ds.directions.right]},lookUp:{keys:[Ds.directions.up]},"swop.head":{keys:[Ds.buttons[0]]},"swop.heels":{keys:[Ds.buttons[1]]}}}),description:"Arcade-style control panels"},Gp={Default:RR,"ZX Spec":ER,Amiga:CR,MAME:UR,WASD:MR," 8b kbd":kR," 8b U2c":OR},Xs=(t=typeof globalThis.window>"u"?"":window.location.search)=>new URLSearchParams(t),PR=()=>Xs().get("campaignName")?.startsWith("data:"),zR=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),jR=function(t){return"/editor/"+t},T_={},Lo=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=f(n.map(d=>{if(d=jR(d),d in T_)return;T_[d]=!0;const m=d.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":zR,m||(v.as="script"),v.crossOrigin="",v.href=d,h&&v.setAttribute("nonce",h),document.head.appendChild(v),m)return new Promise((b,w)=>{v.addEventListener("load",b),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var Fe=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(Fe||{});const $p=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Fu=(t,e)=>$p(t).priority??e,yn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map($p).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map($p).forEach(e=>{e.type.forEach(n=>{const i=this._addHandlers,a=this._queue;i[n]?i[n]?.(e):(a[n]=a[n]||[],a[n]?.push(e))})}),this},handle(t,e,n){const i=this._addHandlers,a=this._removeHandlers;if(i[t]||a[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,a[t]=n;const l=this._queue;return l[t]&&(l[t]?.forEach(u=>e(u)),delete l[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByNamedList(t,e,n=-1){return this.handle(t,i=>{e.findIndex(l=>l.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((l,u)=>Fu(u.value,n)-Fu(l.value,n)))},i=>{const a=e.findIndex(l=>l.name===i.name);a!==-1&&e.splice(a,1)})},handleByList(t,e,n=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((a,l)=>Fu(l,n)-Fu(a,n)))},i=>{const a=e.indexOf(i.ref);a!==-1&&e.splice(a,1)})},mixin(t,...e){for(const n of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(n))}},BR={extension:{type:Fe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Lo(()=>import("./browserAll-SVOmDHyB.js"),__vite__mapDeps([0,1]))}},NR={extension:{type:Fe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Lo(()=>import("./webworkerAll-BzKB5bcN.js"),[])}};class Pt{constructor(e,n,i){this._x=n||0,this._y=i||0,this._observer=e}clone(e){return new Pt(e??this._observer,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Vd={exports:{}},E_;function IR(){return E_||(E_=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(f,d,m){this.fn=f,this.context=d,this.once=m||!1}function l(f,d,m,g,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new a(m,g||f,v),w=n?n+d:d;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],b]:f._events[w].push(b):(f._events[w]=b,f._eventsCount++),f}function u(f,d){--f._eventsCount===0?f._events=new i:delete f._events[d]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],m,g;if(this._eventsCount===0)return d;for(g in m=this._events)e.call(m,g)&&d.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},h.prototype.listeners=function(d){var m=n?n+d:d,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,b=g.length,w=new Array(b);v<b;v++)w[v]=g[v].fn;return w},h.prototype.listenerCount=function(d){var m=n?n+d:d,g=this._events[m];return g?g.fn?1:g.length:0},h.prototype.emit=function(d,m,g,v,b,w){var A=n?n+d:d;if(!this._events[A])return!1;var S=this._events[A],x=arguments.length,C,T;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),x){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,g),!0;case 4:return S.fn.call(S.context,m,g,v),!0;case 5:return S.fn.call(S.context,m,g,v,b),!0;case 6:return S.fn.call(S.context,m,g,v,b,w),!0}for(T=1,C=new Array(x-1);T<x;T++)C[T-1]=arguments[T];S.fn.apply(S.context,C)}else{var E=S.length,D;for(T=0;T<E;T++)switch(S[T].once&&this.removeListener(d,S[T].fn,void 0,!0),x){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,m);break;case 3:S[T].fn.call(S[T].context,m,g);break;case 4:S[T].fn.call(S[T].context,m,g,v);break;default:if(!C)for(D=1,C=new Array(x-1);D<x;D++)C[D-1]=arguments[D];S[T].fn.apply(S[T].context,C)}}return!0},h.prototype.on=function(d,m,g){return l(this,d,m,g,!1)},h.prototype.once=function(d,m,g){return l(this,d,m,g,!0)},h.prototype.removeListener=function(d,m,g,v){var b=n?n+d:d;if(!this._events[b])return this;if(!m)return u(this,b),this;var w=this._events[b];if(w.fn)w.fn===m&&(!v||w.once)&&(!g||w.context===g)&&u(this,b);else{for(var A=0,S=[],x=w.length;A<x;A++)(w[A].fn!==m||v&&!w[A].once||g&&w[A].context!==g)&&S.push(w[A]);S.length?this._events[b]=S.length===1?S[0]:S:u(this,b)}return this},h.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&u(this,m)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,t.exports=h})(Vd)),Vd.exports}var LR=IR();const si=Ar(LR),qR=Math.PI*2,GR=180/Math.PI,$R=Math.PI/180;class jt{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new jt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Fd.x=0,Fd.y=0,Fd}}const Fd=new jt;class De{constructor(e=1,n=0,i=0,a=1,l=0,u=0){this.array=null,this.a=e,this.b=n,this.c=i,this.d=a,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,i,a,l,u){return this.a=e,this.b=n,this.c=i,this.d=a,this.tx=l,this.ty=u,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const i=n||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,n){n=n||new jt;const i=e.x,a=e.y;return n.x=this.a*i+this.c*a+this.tx,n.y=this.b*i+this.d*a+this.ty,n}applyInverse(e,n){n=n||new jt;const i=this.a,a=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,d=1/(i*u+l*-a),m=e.x,g=e.y;return n.x=u*d*m+-l*d*g+(f*l-h*u)*d,n.y=i*d*g+-a*d*m+(-f*i+h*a)*d,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),a=this.a,l=this.c,u=this.tx;return this.a=a*n-this.b*i,this.b=a*i+this.b*n,this.c=l*n-this.d*i,this.d=l*i+this.d*n,this.tx=u*n-this.ty*i,this.ty=u*i+this.ty*n,this}append(e){const n=this.a,i=this.b,a=this.c,l=this.d;return this.a=e.a*n+e.b*a,this.b=e.a*i+e.b*l,this.c=e.c*n+e.d*a,this.d=e.c*i+e.d*l,this.tx=e.tx*n+e.ty*a+this.tx,this.ty=e.tx*i+e.ty*l+this.ty,this}appendFrom(e,n){const i=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,d=n.a,m=n.b,g=n.c,v=n.d;return this.a=i*d+a*g,this.b=i*m+a*v,this.c=l*d+u*g,this.d=l*m+u*v,this.tx=h*d+f*g+n.tx,this.ty=h*m+f*v+n.ty,this}setTransform(e,n,i,a,l,u,h,f,d){return this.a=Math.cos(h+d)*l,this.b=Math.sin(h+d)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(i*this.a+a*this.c),this.ty=n-(i*this.b+a*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,a=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=a*e.a+this.d*e.c,this.d=a*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,i=this.b,a=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-a,l),f=Math.atan2(i,n),d=Math.abs(h+f);return d<1e-5||Math.abs(qR-d)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(n*n+i*i),e.scale.y=Math.sqrt(a*a+l*l),e.position.x=this.tx+(u.x*n+u.y*a),e.position.y=this.ty+(u.x*i+u.y*l),e}invert(){const e=this.a,n=this.b,i=this.c,a=this.d,l=this.tx,u=e*a-n*i;return this.a=a/u,this.b=-n/u,this.c=-i/u,this.d=e/u,this.tx=(i*this.ty-a*l)/u,this.ty=-(e*this.ty-n*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new De;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return VR.identity()}static get shared(){return HR.identity()}}const HR=new De,VR=new De,ki=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Oi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Di=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ui=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Hp=[],iS=[],Yu=Math.sign;function FR(){for(let t=0;t<16;t++){const e=[];Hp.push(e);for(let n=0;n<16;n++){const i=Yu(ki[t]*ki[n]+Di[t]*Oi[n]),a=Yu(Oi[t]*ki[n]+Ui[t]*Oi[n]),l=Yu(ki[t]*Di[n]+Di[t]*Ui[n]),u=Yu(Oi[t]*Di[n]+Ui[t]*Ui[n]);for(let h=0;h<16;h++)if(ki[h]===i&&Oi[h]===a&&Di[h]===l&&Ui[h]===u){e.push(h);break}}}for(let t=0;t<16;t++){const e=new De;e.set(ki[t],Oi[t],Di[t],Ui[t],0,0),iS.push(e)}}FR();const He={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ki[t],uY:t=>Oi[t],vX:t=>Di[t],vY:t=>Ui[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Hp[t][e],sub:(t,e)=>Hp[t][He.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?He.S:He.N:Math.abs(e)*2<=Math.abs(t)?t>0?He.E:He.W:e>0?t>0?He.SE:He.SW:t>0?He.NE:He.NW,matrixAppendRotationInv:(t,e,n=0,i=0,a=0,l=0)=>{const u=iS[He.inv(e)],h=u.a,f=u.b,d=u.c,m=u.d,g=n-Math.min(0,h*a,d*l,h*a+d*l),v=i-Math.min(0,f*a,m*l,f*a+m*l),b=t.a,w=t.b,A=t.c,S=t.d;t.a=h*b+f*A,t.b=h*w+f*S,t.c=d*b+m*A,t.d=d*w+m*S,t.tx=g*b+v*A+t.tx,t.ty=g*w+v*S+t.ty},transformRectCoords:(t,e,n,i)=>{const{x:a,y:l,width:u,height:h}=t,{x:f,y:d,width:m,height:g}=e;return n===He.E?(i.set(a+f,l+d,u,h),i):n===He.S?i.set(m-l-h+f,a+d,h,u):n===He.W?i.set(m-a-u+f,g-l-h+d,u,h):n===He.N?i.set(l+f,g-a-u+d,h,u):i.set(a+f,l+d,u,h)}},Xu=[new jt,new jt,new jt,new jt];class vt{constructor(e=0,n=0,i=0,a=0){this.type="rectangle",this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new vt(0,0,0,0)}clone(){return new vt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(e,n,i,a=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,d=i*(1-a),m=i-d,g=h-d,v=h+l+d,b=f-d,w=f+u+d,A=h+m,S=h+l-m,x=f+m,C=f+u-m;return e>=g&&e<=v&&n>=b&&n<=w&&!(e>A&&e<S&&n>x&&n<C)}intersects(e,n){if(!n){const k=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=k)return!1;const B=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>B}const i=this.left,a=this.right,l=this.top,u=this.bottom;if(a<=i||u<=l)return!1;const h=Xu[0].set(e.left,e.top),f=Xu[1].set(e.left,e.bottom),d=Xu[2].set(e.right,e.top),m=Xu[3].set(e.right,e.bottom);if(d.x<=h.x||f.y<=h.y)return!1;const g=Math.sign(n.a*n.d-n.b*n.c);if(g===0||(n.apply(h,h),n.apply(f,f),n.apply(d,d),n.apply(m,m),Math.max(h.x,f.x,d.x,m.x)<=i||Math.min(h.x,f.x,d.x,m.x)>=a||Math.max(h.y,f.y,d.y,m.y)<=l||Math.min(h.y,f.y,d.y,m.y)>=u))return!1;const v=g*(f.y-h.y),b=g*(h.x-f.x),w=v*i+b*l,A=v*a+b*l,S=v*i+b*u,x=v*a+b*u;if(Math.max(w,A,S,x)<=v*h.x+b*h.y||Math.min(w,A,S,x)>=v*m.x+b*m.y)return!1;const C=g*(h.y-d.y),T=g*(d.x-h.x),E=C*i+T*l,D=C*a+T*l,O=C*i+T*u,M=C*a+T*u;return!(Math.max(E,D,O,M)<=C*h.x+T*h.y||Math.min(E,D,O,M)>=C*m.x+T*m.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),a=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(i-n,0),this.y=a,this.height=Math.max(l-a,0),this}ceil(e=1,n=.001){const i=Math.ceil((this.x+this.width-n)*e)/e,a=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=i-this.x,this.height=a-this.y,this}scale(e,n=e){return this.x*=e,this.y*=n,this.width*=e,this.height*=n,this}enlarge(e){const n=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),a=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=i-n,this.y=a,this.height=l-a,this}getBounds(e){return e||(e=new vt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const n=e.x,i=e.y,a=e.x+e.width,l=e.y+e.height;return n>=this.x&&n<this.x+this.width&&i>=this.y&&i<this.y+this.height&&a>=this.x&&a<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,n,i,a){return this.x=e,this.y=n,this.width=i,this.height=a,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Yd={default:-1};function ft(t="default"){return Yd[t]===void 0&&(Yd[t]=-1),++Yd[t]}const C_=new Set,zt="8.0.0",YR="8.3.4",Vs={quiet:!1,noColor:!1},Ke=((t,e,n=3)=>{if(Vs.quiet||C_.has(e))return;let i=new Error().stack;const a=`${e}
Deprecated since v${t}`,l=typeof console.groupCollapsed=="function"&&!Vs.noColor;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",a):(i=i.split(`
`).splice(n).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",a),console.warn(i))),C_.add(e)});Object.defineProperties(Ke,{quiet:{get:()=>Vs.quiet,set:t=>{Vs.quiet=t},enumerable:!0,configurable:!1},noColor:{get:()=>Vs.noColor,set:t=>{Vs.noColor=t},enumerable:!0,configurable:!1}});const sS=()=>{};function R_(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function M_(t){return!(t&t-1)&&!!t}function aS(t){const e={};for(const n in t)t[n]!==void 0&&(e[n]=t[n]);return e}const k_=Object.create(null);function XR(t){const e=k_[t];return e===void 0&&(k_[t]=ft("resource")),e}const oS=class lS extends si{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...lS.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Ke(zt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=XR(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};oS.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let uS=oS;const cS=class hS extends si{constructor(e={}){super(),this.options=e,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=ft("textureSource"),this._resourceType="textureSource",this._resourceId=ft("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.viewDimension="2d",this.arrayLayerCount=1,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...hS.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.viewDimension=e.viewDimension??e.dimensions,this.arrayLayerCount=e.arrayLayerCount,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new uS(aS(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ft("resource"),this.emit("change",this),this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,n,i){i||(i=this._resolution),e||(e=this.width),n||(n=this.height);const a=Math.round(e*i),l=Math.round(n*i);return this.width=a/i,this.height=l/i,this._resolution=i,this.pixelWidth===a&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=l,this.emit("resize",this),this._resourceId=ft("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=M_(this.pixelWidth)&&M_(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};cS.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",viewDimension:"2d",arrayLayerCount:1,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Dn=cS;class Ky extends Dn{constructor(e){const n=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(n instanceof Float32Array?i="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?i="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?i="rgba16uint":(n instanceof Int8Array,i="bgra8unorm")),super({...e,resource:n,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Ky.extension=Fe.TextureSource;const O_=new De;class QR{constructor(e,n){this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,n){n===void 0&&(n=e);const i=this.mapCoord;for(let a=0;a<e.length;a+=2){const l=e[a],u=e[a+1];n[a]=l*i.a+u*i.c+i.tx,n[a+1]=l*i.b+u*i.d+i.ty}return n}update(){const e=this._texture;this._updateID++;const n=e.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=e.orig,a=e.trim;a&&(O_.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(O_));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class je extends si{constructor({source:e,label:n,frame:i,orig:a,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:d}={}){if(super(),this.uid=ft("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new vt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=e?.source??new Dn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:m,height:g}=this._source;this.frame.width=m,this.frame.height=g}this.orig=a||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new QR(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:n}=this,{width:i,height:a}=this._source,l=n.x/i,u=n.y/a,h=n.width/i,f=n.height/a;let d=this.rotate;if(d){const m=h/2,g=f/2,v=l+m,b=u+g;d=He.add(d,He.NW),e.x0=v+m*He.uX(d),e.y0=b+g*He.uY(d),d=He.add(d,2),e.x1=v+m*He.uX(d),e.y1=b+g*He.uY(d),d=He.add(d,2),e.x2=v+m*He.uX(d),e.y2=b+g*He.uY(d),d=He.add(d,2),e.x3=v+m*He.uX(d),e.y3=b+g*He.uY(d)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Ke(zt,"Texture.baseTexture is now Texture.source"),this._source}}je.EMPTY=new je({label:"EMPTY",source:new Dn({label:"EMPTY"})});je.EMPTY.destroy=sS;je.WHITE=new je({source:new Ky({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});je.WHITE.destroy=sS;function KR(t,e,n){const{width:i,height:a}=n.orig,l=n.trim;if(l){const u=l.width,h=l.height;t.minX=l.x-e._x*i,t.maxX=t.minX+u,t.minY=l.y-e._y*a,t.maxY=t.minY+h}else t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*a,t.maxY=t.minY+a}const D_=new De;class qn{constructor(e=1/0,n=1/0,i=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=D_,this.minX=e,this.minY=n,this.maxX=i,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new vt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=D_,this}set(e,n,i,a){this.minX=e,this.minY=n,this.maxX=i,this.maxY=a}addFrame(e,n,i,a,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,d=l.d,m=l.tx,g=l.ty;let v=this.minX,b=this.minY,w=this.maxX,A=this.maxY,S=u*e+f*n+m,x=h*e+d*n+g;S<v&&(v=S),x<b&&(b=x),S>w&&(w=S),x>A&&(A=x),S=u*i+f*n+m,x=h*i+d*n+g,S<v&&(v=S),x<b&&(b=x),S>w&&(w=S),x>A&&(A=x),S=u*e+f*a+m,x=h*e+d*a+g,S<v&&(v=S),x<b&&(b=x),S>w&&(w=S),x>A&&(A=x),S=u*i+f*a+m,x=h*i+d*a+g,S<v&&(v=S),x<b&&(b=x),S>w&&(w=S),x>A&&(A=x),this.minX=v,this.minY=b,this.maxX=w,this.maxY=A}addRect(e,n){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,n)}addBounds(e,n){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,n)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const n=this.minX,i=this.minY,a=this.maxX,l=this.maxY,{a:u,b:h,c:f,d,tx:m,ty:g}=e;let v=u*n+f*i+m,b=h*n+d*i+g;this.minX=v,this.minY=b,this.maxX=v,this.maxY=b,v=u*a+f*i+m,b=h*a+d*i+g,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY,v=u*n+f*l+m,b=h*n+d*l+g,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY,v=u*a+f*l+m,b=h*a+d*l+g,this.minX=v<this.minX?v:this.minX,this.minY=b<this.minY?b:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=b>this.maxY?b:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,n,i,a){return this.minX<e&&(this.minX=e),this.maxX>n&&(this.maxX=n),this.minY<i&&(this.minY=i),this.maxY>a&&(this.maxY=a),this}pad(e,n=e){return this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new qn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,n=e){return this.minX*=e,this.minY*=n,this.maxX*=e,this.maxY*=n,this}get x(){return this.minX}set x(e){const n=this.maxX-this.minX;this.minX=e,this.maxX=e+n}get y(){return this.minY}set y(e){const n=this.maxY-this.minY;this.minY=e,this.maxY=e+n}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,n,i,a){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;a||(a=this.matrix);const d=a.a,m=a.b,g=a.c,v=a.d,b=a.tx,w=a.ty;for(let A=n;A<i;A+=2){const S=e[A],x=e[A+1],C=d*S+g*x+b,T=m*S+v*x+w;l=C<l?C:l,u=T<u?T:u,h=C>h?C:h,f=T>f?T:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,n){return this.minX<=e&&this.minY<=n&&this.maxX>=e&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var WR={grad:.9,turn:360,rad:360/(2*Math.PI)},yr=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},bt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},On=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},fS=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},U_=function(t){return{r:On(t.r,0,255),g:On(t.g,0,255),b:On(t.b,0,255),a:On(t.a)}},Xd=function(t){return{r:bt(t.r),g:bt(t.g),b:bt(t.b),a:bt(t.a,3)}},ZR=/^#([0-9a-f]{3,8})$/i,Qu=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},dS=function(t){var e=t.r,n=t.g,i=t.b,a=t.a,l=Math.max(e,n,i),u=l-Math.min(e,n,i),h=u?l===e?(n-i)/u:l===n?2+(i-e)/u:4+(e-n)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a}},pS=function(t){var e=t.h,n=t.s,i=t.v,a=t.a;e=e/360*6,n/=100,i/=100;var l=Math.floor(e),u=i*(1-n),h=i*(1-(e-l)*n),f=i*(1-(1-e+l)*n),d=l%6;return{r:255*[i,h,u,u,f,i][d],g:255*[f,i,i,h,u,u][d],b:255*[u,u,f,i,i,h][d],a}},P_=function(t){return{h:fS(t.h),s:On(t.s,0,100),l:On(t.l,0,100),a:On(t.a)}},z_=function(t){return{h:bt(t.h),s:bt(t.s),l:bt(t.l),a:bt(t.a,3)}},j_=function(t){return pS((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},ko=function(t){return{h:(e=dS(t)).h,s:(a=(200-(n=e.s))*(i=e.v)/100)>0&&a<200?n*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:e.a};var e,n,i,a},JR=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vp={string:[[function(t){var e=ZR.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?bt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?bt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=tM.exec(t)||nM.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:U_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=JR.exec(t)||eM.exec(t);if(!e)return null;var n,i,a=P_({h:(n=e[1],i=e[2],i===void 0&&(i="deg"),Number(n)*(WR[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return j_(a)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,a=t.a,l=a===void 0?1:a;return yr(e)&&yr(n)&&yr(i)?U_({r:Number(e),g:Number(n),b:Number(i),a:Number(l)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,a=t.a,l=a===void 0?1:a;if(!yr(e)||!yr(n)||!yr(i))return null;var u=P_({h:Number(e),s:Number(n),l:Number(i),a:Number(l)});return j_(u)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,a=t.a,l=a===void 0?1:a;if(!yr(e)||!yr(n)||!yr(i))return null;var u=(function(h){return{h:fS(h.h),s:On(h.s,0,100),v:On(h.v,0,100),a:On(h.a)}})({h:Number(e),s:Number(n),v:Number(i),a:Number(l)});return pS(u)},"hsv"]]},B_=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},rM=function(t){return typeof t=="string"?B_(t.trim(),Vp.string):typeof t=="object"&&t!==null?B_(t,Vp.object):[null,void 0]},Qd=function(t,e){var n=ko(t);return{h:n.h,s:On(n.s+100*e,0,100),l:n.l,a:n.a}},Kd=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},N_=function(t,e){var n=ko(t);return{h:n.h,s:n.s,l:On(n.l+100*e,0,100),a:n.a}},Fp=(function(){function t(e){this.parsed=rM(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return bt(Kd(this.rgba),2)},t.prototype.isDark=function(){return Kd(this.rgba)<.5},t.prototype.isLight=function(){return Kd(this.rgba)>=.5},t.prototype.toHex=function(){return e=Xd(this.rgba),n=e.r,i=e.g,a=e.b,u=(l=e.a)<1?Qu(bt(255*l)):"","#"+Qu(n)+Qu(i)+Qu(a)+u;var e,n,i,a,l,u},t.prototype.toRgb=function(){return Xd(this.rgba)},t.prototype.toRgbString=function(){return e=Xd(this.rgba),n=e.r,i=e.g,a=e.b,(l=e.a)<1?"rgba("+n+", "+i+", "+a+", "+l+")":"rgb("+n+", "+i+", "+a+")";var e,n,i,a,l},t.prototype.toHsl=function(){return z_(ko(this.rgba))},t.prototype.toHslString=function(){return e=z_(ko(this.rgba)),n=e.h,i=e.s,a=e.l,(l=e.a)<1?"hsla("+n+", "+i+"%, "+a+"%, "+l+")":"hsl("+n+", "+i+"%, "+a+"%)";var e,n,i,a,l},t.prototype.toHsv=function(){return e=dS(this.rgba),{h:bt(e.h),s:bt(e.s),v:bt(e.v),a:bt(e.a,3)};var e},t.prototype.invert=function(){return Yn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Yn(Qd(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yn(Qd(this.rgba,-e))},t.prototype.grayscale=function(){return Yn(Qd(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Yn(N_(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Yn(N_(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Yn({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):bt(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=ko(this.rgba);return typeof e=="number"?Yn({h:e,s:n.s,l:n.l,a:n.a}):bt(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Yn(e).toHex()},t})(),Yn=function(t){return t instanceof Fp?t:new Fp(t)},I_=[],iM=function(t){t.forEach(function(e){I_.indexOf(e)<0&&(e(Fp,Vp),I_.push(e))})};function sM(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in n)i[n[a]]=a;var l={};t.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,d=i[this.toHex()];if(d)return d;if(u?.closest){var m=this.toRgb(),g=1/0,v="black";if(!l.length)for(var b in n)l[b]=new t(n[b]).toRgb();for(var w in n){var A=(h=m,f=l[w],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));A<g&&(g=A,v=w)}return v}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":n[h];return f?new t(f).toRgb():null},"name"])}iM([sM]);const Zs=class vo{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof vo)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,n){const i=typeof e;if(i!==typeof n)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((l,u)=>l===n[u]);if(e!==null&&n!==null){const l=Object.keys(e),u=Object.keys(n);return l.length!==u.length?!1:l.every(h=>e[h]===n[h])}return e===n}toRgba(){const[e,n,i,a]=this._components;return{r:e,g:n,b:i,a}}toRgb(){const[e,n,i]=this._components;return{r:e,g:n,b:i}}toRgbaString(){const[e,n,i]=this.toUint8RgbArray();return`rgba(${e},${n},${i},${this.alpha})`}toUint8RgbArray(e){const[n,i,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(n*255),e[1]=Math.round(i*255),e[2]=Math.round(a*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[n,i,a,l]=this._components;return e[0]=n,e[1]=i,e[2]=a,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[n,i,a]=this._components;return e[0]=n,e[1]=i,e[2]=a,e}toNumber(){return this._int}toBgrNumber(){const[e,n,i]=this.toUint8RgbArray();return(i<<16)+(n<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,i,a,l]=vo._temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=i,this._components[2]*=a,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let i=this._int>>16&255,a=this._int>>8&255,l=this._int&255;return n&&(i=i*e+.5|0,a=a*e+.5|0,l=l*e+.5|0),(e*255<<24)+(i<<16)+(a<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let n,i,a,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;n=(u>>16&255)/255,i=(u>>8&255)/255,a=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,i,a,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,i,a,l=255]=e,n/=255,i/=255,a/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=vo.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Yn(e);u.isValid()&&({r:n,g:i,b:a,a:l}=u.rgba,n/=255,i/=255,a/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=i,this._components[2]=a,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,n,i]=this._components;this._int=(e*255<<16)+(n*255<<8)+(i*255|0)}_clamp(e,n=0,i=1){return typeof e=="number"?Math.min(Math.max(e,n),i):(e.forEach((a,l)=>{e[l]=Math.min(Math.max(a,n),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof vo||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Zs.shared=new Zs;Zs._temp=new Zs;Zs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ve=Zs;const aM={cullArea:null,cullable:!1,cullableChildren:!0};let Wd=0;const L_=500;function dn(...t){Wd!==L_&&(Wd++,Wd===L_?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}const Wy={_registeredResources:new Set,register(t){this._registeredResources.add(t)},unregister(t){this._registeredResources.delete(t)},release(){this._registeredResources.forEach(t=>t.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(t){return this._registeredResources.has(t)},reset(){this._registeredResources.clear()}};class oM{constructor(e,n){this._pool=[],this._count=0,this._index=0,this._classType=e,n&&this.prepopulate(n)}prepopulate(e){for(let n=0;n<e;n++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let n;return this._index>0?n=this._pool[--this._index]:(n=new this._classType,this._count++),n.init?.(e),n}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class lM{constructor(){this._poolsByClass=new Map}prepopulate(e,n){this.getPool(e).prepopulate(n)}get(e,n){return this.getPool(e).get(n)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new oM(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(n=>{const i=e[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;e[i]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Wt=new lM;Wy.register(Wt);const uM={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){Ke("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function cM(t,e,n){const i=t.length;let a;if(e>=i||n===0)return;n=e+n>i?i-e:n;const l=i-n;for(a=e;a<l;++a)t[a]=t[a+n];t.length=l}const hM={allowChildren:!0,removeChildren(t=0,e){const n=e??this.children.length,i=n-t,a=[];if(i>0&&i<=n){for(let u=n-1;u>=t;u--){const h=this.children[u];h&&(a.push(h),h.parent=null)}cM(this.children,t,n);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(a);for(let u=0;u<a.length;++u){const h=a[u];h.parentRenderLayer?.detach(h),this.emit("childRemoved",h,this,u),a[u].emit("removed",this)}return a.length>0&&this._didViewChangeTick++,a}else if(i===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||Ke(zt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(e<0||e>n.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${n.length}`);if(t.parent){const a=t.parent.children.indexOf(t);if(t.parent===this&&a===e)return t;a!==-1&&t.parent.children.splice(a,1)}e===n.length?n.push(t):n.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=t;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const n=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const i=this.worldTransform.clone();return i.invert(),n.prepend(i),t.setFromMatrix(n),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},fM={collectRenderables(t,e,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,n):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,n))},collectRenderablesSimple(t,e,n){const i=this.children,a=i.length;for(let l=0;l<a;l++)i[l].collectRenderables(t,e,n)},collectRenderablesWithEffects(t,e,n){const{renderPipes:i}=e;for(let a=0;a<this.effects.length;a++){const l=this.effects[a];i[l.pipe].push(l,this,t)}this.collectRenderablesSimple(t,e,n);for(let a=this.effects.length-1;a>=0;a--){const l=this.effects[a];i[l.pipe].pop(l,this,t)}}};class q_{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class dM{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const i=this._tests[n];if(i.test(e))return Wt.get(i.maskClass,e)}return e}returnMaskEffect(e){Wt.return(e)}}const Yp=new dM;yn.handleByList(Fe.MaskEffect,Yp._effectClasses);const pM={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((n,i)=>n.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),Yp.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=Yp.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new q_);t=t;const n=t?.length>0,i=e.filters?.length>0,a=n!==i;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),a&&(n?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new q_),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}},yM={label:null,get name(){return Ke(zt,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){Ke(zt,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const n=this.children;for(let i=0;i<n.length;i++){const a=n[i];if(a.label===t||t instanceof RegExp&&t.test(a.label))return a}if(e)for(let i=0;i<n.length;i++){const l=n[i].getChildByLabel(t,!0);if(l)return l}return null},getChildrenByLabel(t,e=!1,n=[]){const i=this.children;for(let a=0;a<i.length;a++){const l=i[a];(l.label===t||t instanceof RegExp&&t.test(l.label))&&n.push(l)}if(e)for(let a=0;a<i.length;a++)i[a].getChildrenByLabel(t,!0,n);return n}},Lt=Wt.getPool(De),_r=Wt.getPool(qn),mM=new De,gM={getFastGlobalBounds(t,e){e||(e=new qn),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(n.worldTransform),e},_getGlobalBoundsRecursive(t,e,n){let i=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(i=_r.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;i.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(t,i,n)}if(a){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,i.applyMatrix(u.worldTransform)),this.effects[h].addBounds(i,!0));l&&i.applyMatrix(u.worldTransform.copyTo(mM).invert()),e.addBounds(i),_r.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),_r.return(i))}};function yS(t,e,n){n.clear();let i,a;return t.parent?e?i=t.parent.worldTransform:(a=Lt.get().identity(),i=Zy(t,a)):i=De.IDENTITY,mS(t,n,i,e),a&&Lt.return(a),n.isValid||n.set(0,0,0,0),n}function mS(t,e,n,i){if(!t.visible||!t.measurable)return;let a;i?a=t.worldTransform:(t.updateLocalTransform(),a=Lt.get(),a.appendFrom(t.localTransform,n));const l=e,u=!!t.effects.length;if(u&&(e=_r.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{const h=t.bounds;h&&!h.isEmpty()&&(e.matrix=a,e.addBounds(h));for(let f=0;f<t.children.length;f++)mS(t.children[f],e,a,i)}if(u){for(let h=0;h<t.effects.length;h++)t.effects[h].addBounds?.(e);l.addBounds(e,De.IDENTITY),_r.return(e)}i||Lt.return(a)}function Zy(t,e){const n=t.parent;return n&&(Zy(n,e),n.updateLocalTransform(),e.append(n.localTransform)),e}function gS(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const n=t>>16&255,i=t>>8&255,a=t&255,l=e>>16&255,u=e>>8&255,h=e&255,f=n*l/255|0,d=i*u/255|0,m=a*h/255|0;return(f<<16)+(d<<8)+m}const G_=16777215;function $_(t,e){return t===G_?e:e===G_?t:gS(t,e)}function wc(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const bM={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,n=this.parent;for(;n;)e*=n.alpha,n=n.parent;return e},getGlobalTransform(t=new De,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const n=Zy(this,Lt.get().identity());return t.appendFrom(this.localTransform,n),Lt.return(n),t},getGlobalTint(t){if(t)return this.renderGroup?wc(this.renderGroup.worldColor):this.parentRenderGroup?wc($_(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,n=this.parent;for(;n;)e=$_(e,n.localColor),n=n.parent;return wc(e)}};function bS(t,e,n){return e.clear(),n||(n=De.IDENTITY),vS(t,e,n,t,!0),e.isValid||e.set(0,0,0,0),e}function vS(t,e,n,i,a){let l;if(a)l=Lt.get(),l=n.copyTo(l);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const f=t.localTransform;l=Lt.get(),l.appendFrom(f,n)}const u=e,h=!!t.effects.length;if(h&&(e=_r.get().clear()),t.boundsArea)e.addRect(t.boundsArea,l);else{t.renderPipeId&&(e.matrix=l,e.addBounds(t.bounds));const f=t.children;for(let d=0;d<f.length;d++)vS(f[d],e,l,i,!1)}if(h){for(let f=0;f<t.effects.length;f++)t.effects[f].addLocalBounds?.(e,i);u.addBounds(e,De.IDENTITY),_r.return(e)}Lt.return(l)}function _S(t,e){const n=t.children;for(let i=0;i<n.length;i++){const a=n[i],l=a.uid,u=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,a.children.length&&_S(a,e)}return e.didChange}const vM=new De,_M={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const n=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*n:this.scale.x=n},_setHeight(t,e){const n=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new qn});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),_S(this,t),t.didChange&&bS(this,t.localBounds,vM),t.localBounds},getBounds(t,e){return yS(this,t,e||new qn)}},wM={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},xM={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(SM))}};function SM(t,e){return t._zIndex-e._zIndex}const AM={getGlobalPosition(t=new jt,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,n=!1){const i=this.getGlobalTransform(Lt.get(),n);return e=i.apply(t,e),Lt.return(i),e},toLocal(t,e,n,i){e&&(t=e.toGlobal(t,n,i));const a=this.getGlobalTransform(Lt.get(),i);return n=a.applyInverse(t,n),Lt.return(a),n}};class Jy{constructor(){this.uid=ft("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let TM=0;class EM{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new uS(this.textureOptions)}createTexture(e,n,i){const a=new Dn({...this.textureOptions,width:e,height:n,resolution:1,antialias:i,autoGarbageCollect:!1});return new je({source:a,label:`texturePool_${TM++}`})}getOptimalTexture(e,n,i=1,a){let l=Math.ceil(e*i-1e-6),u=Math.ceil(n*i-1e-6);l=R_(l),u=R_(u);const h=(l<<17)+(u<<1)+(a?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,a)),f.source._resolution=i,f.source.width=l/i,f.source.height=u/i,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=n,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,n=!1){const i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,n)}returnTexture(e,n=!1){const i=this._poolKeyHash[e.uid];n&&(e.source.style=this.textureStyle),this._texturePool[i].push(e)}clear(e){if(e=e!==!1,e)for(const n in this._texturePool){const i=this._texturePool[n];if(i)for(let a=0;a<i.length;a++)i[a].destroy(!0)}this._texturePool={}}}const wS=new EM;Wy.register(wS);class CM{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new De,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Jy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const n=e.children;for(let i=0;i<n.length;i++){const a=n[i];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(wS.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const n=this.childrenToUpdate[e];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const n=this.renderGroupChildren.indexOf(e);n>-1&&this.renderGroupChildren.splice(n,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const n=e.children;for(let i=0;i<n.length;i++)this.addChild(n[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const n=e.children;for(let i=0;i<n.length;i++)this.removeChild(n[i])}removeChildren(e){for(let n=0;n<e.length;n++)this.removeChild(e[n])}onChildUpdate(e){let n=this.childrenToUpdate[e.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const n=this.root.children;for(let i=0;i<n.length;i++)this._getChildren(n[i],e);return e}_getChildren(e,n=[]){if(n.push(e),e.renderGroup)return n;const i=e.children;for(let a=0;a<i.length;a++)this._getChildren(i[a],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new De),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new De),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new De),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function RM(t,e,n={}){for(const i in e)!n[i]&&e[i]!==void 0&&(t[i]=e[i])}const Zd=new Pt(null),Ku=new Pt(null),Jd=new Pt(null,1,1),Wu=new Pt(null),H_=1,MM=2,ep=4;class na extends si{constructor(e={}){super(),this.uid=ft("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new De,this.relativeGroupTransform=new De,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Pt(this,0,0),this._scale=Jd,this._pivot=Ku,this._origin=Wu,this._skew=Zd,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],RM(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(n=>this.addChild(n)),e.parent?.addChild(this)}static mixin(e){Ke("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),yn.mixin(na,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Ke(zt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let a=0;a<e.length;a++)this.addChild(e[a]);return e[0]}const n=e[0],i=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),i&&(i.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,i&&i.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...e){if(e.length>1){for(let a=0;a<e.length;a++)this.removeChild(e[a]);return e[0]}const n=e[0],i=this.children.indexOf(n);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,i),n.emit("removed",this)),n}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=Wt.get(CM,this),this.groupTransform=De.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),Wt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new De),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*GR}set angle(e){this.rotation=e*$R}get pivot(){return this._pivot===Ku&&(this._pivot=new Pt(this,0,0)),this._pivot}set pivot(e){this._pivot===Ku&&(this._pivot=new Pt(this,0,0),this._origin!==Wu&&dn("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Zd&&(this._skew=new Pt(this,0,0)),this._skew}set skew(e){this._skew===Zd&&(this._skew=new Pt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Jd&&(this._scale=new Pt(this,1,1)),this._scale}set scale(e){this._scale===Jd&&(this._scale=new Pt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Wu&&(this._origin=new Pt(this,0,0)),this._origin}set origin(e){this._origin===Wu&&(this._origin=new Pt(this,0,0),this._pivot!==Ku&&dn("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const n=this.getLocalBounds().width;this._setWidth(e,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const n=this.getLocalBounds().height;this._setHeight(e,n)}getSize(e){e||(e={});const n=this.getLocalBounds();return e.width=Math.abs(this.scale.x*n.width),e.height=Math.abs(this.scale.y*n.height),e}setSize(e,n){const i=this.getLocalBounds();typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,i.width),n!==void 0&&this._setHeight(n,i.height)}_updateSkew(){const e=this._rotation,n=this._skew;this._cx=Math.cos(e+n._y),this._sx=Math.sin(e+n._y),this._cy=-Math.sin(e-n._x),this._sy=Math.cos(e-n._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const n=this.localTransform,i=this._scale,a=this._pivot,l=this._origin,u=this._position,h=i._x,f=i._y,d=a._x,m=a._y,g=-l._x,v=-l._y;n.a=this._cx*h,n.b=this._sx*h,n.c=this._cy*f,n.d=this._sy*f,n.tx=u._x-(d*n.a+m*n.c)+(g*n.a+v*n.c)-g,n.ty=u._y-(d*n.b+m*n.d)+(g*n.b+v*n.d)-v}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=H_,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const i=Ve.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=H_,this._onUpdate())}get tint(){return wc(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=MM,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const n=e?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ep,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const n=e?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ep,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const n=e?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=ep,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&n)for(let a=0;a<n.length;++a)n[a].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}yn.mixin(na,hM,gM,AM,wM,_M,pM,yM,xM,aM,uM,bM,fM);class xS extends na{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new qn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const n=this.bounds,{x:i,y:a}=e;return i>=n.minX&&i<=n.maxX&&a>=n.minY&&a<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,n,i){const{renderPipes:a}=n;a.blendMode.pushBlendMode(this,this.groupBlendMode,e);const u=a[this.renderPipeId];u?.addRenderable&&u.addRenderable(this,e),this.didViewUpdate=!1;const h=this.children,f=h.length;for(let d=0;d<f;d++)h[d].collectRenderables(e,n,i);a.blendMode.popBlendMode(e)}}class Hi extends xS{constructor(e=je.EMPTY){e instanceof je&&(e={texture:e});const{texture:n=je.EMPTY,anchor:i,roundPixels:a,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Pt({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=a??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,n=!1){return e instanceof je?new Hi(e):new Hi(je.from(e,n))}set texture(e){e||(e=je.EMPTY);const n=this._texture;n!==e&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return KR(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Ke("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,n=this._texture,i=this._bounds,{width:a,height:l}=n.orig;i.minX=-e._x*a,i.maxX=i.minX+a,i.minY=-e._y*l,i.maxY=i.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const kM=new qn;function SS(t,e,n){const i=kM;t.measurable=!0,yS(t,n,i),e.addBoundsMask(i),t.measurable=!1}function AS(t,e,n){const i=_r.get();t.measurable=!0;const a=Lt.get().identity(),l=TS(t,n,a);bS(t,i,l),t.measurable=!1,e.addBoundsMask(i),Lt.return(a),_r.return(i)}function TS(t,e,n){return t?(t!==e&&(TS(t.parent,e,n),t.updateLocalTransform(),n.append(t.localTransform)),n):(dn("Mask bounds, renderable is not inside the root container"),n)}class ES{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Hi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,n){this.inverse||SS(this.mask,e,n)}addLocalBounds(e,n){AS(this.mask,e,n)}containsPoint(e,n){const i=this.mask;return n(i,e)}destroy(){this.reset()}static test(e){return e instanceof Hi}}ES.extension=Fe.MaskEffect;class CS{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}CS.extension=Fe.MaskEffect;class RS{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,n){SS(this.mask,e,n)}addLocalBounds(e,n){AS(this.mask,e,n)}containsPoint(e,n){const i=this.mask;return n(i,e)}destroy(){this.reset()}static test(e){return e instanceof na}}RS.extension=Fe.MaskEffect;const OM={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let V_=OM;const hl={get(){return V_},set(t){V_=t}};class MS extends Dn{constructor(e){e.resource||(e.resource=hl.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,n=this.height,i=this._resolution){const a=super.resize(e,n,i);return a&&this.resizeCanvas(),a}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}MS.extension=Fe.TextureSource;class Dc extends Dn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Dc.extension=Fe.TextureSource;var Xp=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Xp||{});class tp{constructor(e,n=null,i=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=n,this.priority=i,this._once=a}match(e,n=null){return this._fn===e&&this._context===n}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const kS=class hn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new tp(null,null,1/0),this.deltaMS=1/hn.targetFPMS,this.elapsedMS=1/hn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,i=Xp.NORMAL){return this._addListener(new tp(e,n,i))}addOnce(e,n,i=Xp.NORMAL){return this._addListener(new tp(e,n,i,!0))}_addListener(e){let n=this._head.next,i=this._head;if(!n)e.connect(i);else{for(;n;){if(e.priority>n.priority){e.connect(i);break}i=n,n=n.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,n){let i=this._head.next;for(;i;)i.match(e,n)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*hn.targetFPMS;const i=this._head;let a=i.next;for(;a;)a=a.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,n)/1e3,hn.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!hn._shared){const e=hn._shared=new hn;e.autoStart=!0,e._protected=!0}return hn._shared}static get system(){if(!hn._system){const e=hn._system=new hn;e.autoStart=!0,e._protected=!0}return hn._system}};kS.targetFPMS=.06;let Zu=kS,np;async function DM(){return np??(np=(async()=>{const e=hl.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const n=await new Promise(u=>{const h=document.createElement("video");h.onloadeddata=()=>u(h),h.onerror=()=>u(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(a),e.deleteTexture(i),e.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),np}const Kc=class OS extends Dn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...OS.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Zu.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,n=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await DM(),this._load=new Promise((i,a)=>{this.isValid?i(this):(this._resolve=i,this._reject=a,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Zu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Zu.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Zu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Kc.extension=Fe.TextureSource;Kc.defaultOptions={...Dn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Kc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let UM=Kc;const Ls=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(i=>typeof i=="string"||n?e(i):i):t);class PM{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||dn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const i=Ls(e);let a;for(let f=0;f<this.parsers.length;f++){const d=this.parsers[f];if(d.test(n)){a=d.getCacheableAssets(i,n);break}}const l=new Map(Object.entries(a||{}));a||i.forEach(f=>{l.set(f,n)});const u=[...l.keys()],h={cacheKeys:u,keys:i};i.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const d=a?a[f]:n;this._cache.has(f)&&this._cache.get(f)!==d&&dn("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){dn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(a=>{this._cache.delete(a)}),n.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const qs=new PM,Qp=[];yn.handleByList(Fe.TextureSource,Qp);function DS(t={}){const e=t&&t.resource,n=e?t.resource:t,i=e?t:{resource:t};for(let a=0;a<Qp.length;a++){const l=Qp[a];if(l.test(n))return new l(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function zM(t={},e=!1){const n=t&&t.resource,i=n?t.resource:t,a=n?t:{resource:t};if(!e&&qs.has(i))return qs.get(i);const l=new je({source:DS(a)});return l.on("destroy",()=>{qs.has(i)&&qs.remove(i)}),e||qs.set(i,l),l}function jM(t,e=!1){return typeof t=="string"?qs.get(t):t instanceof Dn?new je({source:t}):zM(t,e)}je.from=jM;Dn.from=DS;yn.add(ES,CS,RS,UM,Dc,MS,Ky);var US=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(US||{});function jn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function io(t){return t.split("?")[0].split("#")[0]}function BM(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function NM(t,e,n){return t.replace(new RegExp(BM(e),"g"),n)}function IM(t,e){let n="",i=0,a=-1,l=0,u=-1;for(let h=0;h<=t.length;++h){if(h<t.length)u=t.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(a===h-1||l===1))if(a!==h-1&&l===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const f=n.lastIndexOf("/");if(f!==n.length-1){f===-1?(n="",i=0):(n=n.slice(0,f),i=n.length-1-n.lastIndexOf("/")),a=h,l=0;continue}}else if(n.length===2||n.length===1){n="",i=0,a=h,l=0;continue}}}else n.length>0?n+=`/${t.slice(a+1,h)}`:n=t.slice(a+1,h),i=h-a-1;a=h,l=0}else u===46&&l!==-1?++l:l=-1}return n}const qo={toPosix(t){return NM(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){jn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(jn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const i=io(this.toPosix(e??hl.get().getBaseUrl())),a=io(this.toPosix(n??this.rootname(i)));return t=this.toPosix(t),t.startsWith("/")?qo.join(a,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if(jn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=IM(t),t.length>0&&i&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return jn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const i=t[n];if(jn(i),i.length>0)if(e===void 0)e=i;else{const a=t[n-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(jn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let i=-1,a=!0;const l=this.getProtocol(t),u=t;t=t.slice(l.length);for(let h=t.length-1;h>=1;--h)if(e=t.charCodeAt(h),e===47){if(!a){i=h;break}}else a=!1;return i===-1?n?"/":this.isUrl(u)?l+t:l:n&&i===1?"//":l+t.slice(0,i)},rootname(t){jn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){jn(t),e&&jn(e),t=io(this.toPosix(t));let n=0,i=-1,a=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let u=e.length-1,h=-1;for(l=t.length-1;l>=0;--l){const f=t.charCodeAt(l);if(f===47){if(!a){n=l+1;break}}else h===-1&&(a=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(i=l):(u=-1,i=h))}return n===i?i=h:i===-1&&(i=t.length),t.slice(n,i)}for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!a){n=l+1;break}}else i===-1&&(a=!1,i=l+1);return i===-1?"":t.slice(n,i)},extname(t){jn(t),t=io(this.toPosix(t));let e=-1,n=0,i=-1,a=!0,l=0;for(let u=t.length-1;u>=0;--u){const h=t.charCodeAt(u);if(h===47){if(!a){n=u+1;break}continue}i===-1&&(a=!1,i=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||i===-1||l===0||l===1&&e===i-1&&e===n+1?"":t.slice(e,i)},parse(t){jn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=io(this.toPosix(t));let n=t.charCodeAt(0);const i=this.isAbsolute(t);let a;e.root=this.rootname(t),i||this.hasProtocol(t)?a=1:a=0;let l=-1,u=0,h=-1,f=!0,d=t.length-1,m=0;for(;d>=a;--d){if(n=t.charCodeAt(d),n===47){if(!f){u=d+1;break}continue}h===-1&&(f=!1,h=d+1),n===46?l===-1?l=d:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||h===-1||m===0||m===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&i?e.base=e.name=t.slice(1,h):e.base=e.name=t.slice(u,h)):(u===0&&i?(e.name=t.slice(1,l),e.base=t.slice(1,h)):(e.name=t.slice(u,l),e.base=t.slice(u,h)),e.ext=t.slice(l,h)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function PS(t,e,n,i,a){const l=e[n];for(let u=0;u<l.length;u++){const h=l[u];n<e.length-1?PS(t.replace(i[n],h),e,n+1,i,a):a.push(t.replace(i[n],h))}}function LM(t){const e=/\{(.*?)\}/g,n=t.match(e),i=[];if(n){const a=[];n.forEach(l=>{const u=l.substring(1,l.length-1).split(",");a.push(u)}),PS(t,a,0,n,i)}else i.push(t);return i}const F_=t=>!Array.isArray(t);class zS{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(n[i])}`).join("&")}}getAlias(e){const{alias:n,src:i}=e;return Ls(n||i,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>u?.src??u):l?.src?l.src:l,!0)}addManifest(e){this._manifest&&dn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const i=[];let a=n;Array.isArray(n)||(a=Object.entries(n).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),a.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const d=this._createBundleAssetId(e,h);i.push(d),f=[h,d]}else{const d=h.map(m=>this._createBundleAssetId(e,m));i.push(...d),f=[...h,...d]}this.add({...l,alias:f,src:u})}),this._bundles[e]=i}add(e){const n=[];Array.isArray(e)?n.push(...e):n.push(e);let i;i=l=>{this.hasKey(l)&&dn(`[Resolver] already has key: ${l} overwriting`)},Ls(n).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:d,parser:m}=l;const g=Ls(u).map(A=>typeof A=="string"?LM(A):Array.isArray(A)?A:[A]),v=this.getAlias(l);Array.isArray(v)?v.forEach(i):i(v);const b=[],w=A=>{const S=this._parsers.find(x=>x.test(A));return{src:A,...S?.parse(A)}};g.forEach(A=>{A.forEach(S=>{let x={};if(typeof S!="object"?x=w(S):(h=S.data??h,f=S.format??f,(S.loadParser||S.parser)&&(d=S.loadParser??d,m=S.parser??m),x={...w(S.src),...S}),!v)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this._buildResolvedAsset(x,{aliases:v,data:h,format:f,loadParser:d,parser:m,progressSize:l.progressSize}),b.push(x)})}),v.forEach(A=>{this._assetMap[A]=b})})}resolveBundle(e){const n=F_(e);e=Ls(e);const i={};return e.forEach(a=>{const l=this._bundles[a];if(l){const u=this.resolve(l),h={};for(const f in u){const d=u[f];h[this._extractAssetIdFromBundle(a,f)]=d}i[a]=h}}),n?i[e[0]]:i}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const i={};for(const a in n)i[a]=n[a].src;return i}return n.src}resolve(e){const n=F_(e);e=Ls(e);const i={};return e.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let l=this._assetMap[a];const u=this._getPreferredOrder(l);u?.priority.forEach(h=>{u.params[h].forEach(f=>{const d=l.filter(m=>m[h]?m[h]===f:!1);d.length&&(l=d)})}),this._resolverHash[a]=l[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});i[a]=this._resolverHash[a]}),n?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const i=e[n],a=this._preferredOrder.find(l=>l.params.format.includes(i.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}_buildResolvedAsset(e,n){const{aliases:i,data:a,loadParser:l,parser:u,format:h,progressSize:f}=n;return(this._basePath||this._rootPath)&&(e.src=qo.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...a||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??qM(e.src),f!==void 0&&(e.progressSize=f),e}}zS.RETINA_PREFIX=/@([0-9\.]+)x/;function qM(t){return t.split(".").pop().split("?").shift().split("#").shift()}const Y_=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t},jS=class _o{constructor(e,n){this.linkedSheets=[];let i=e;e?.source instanceof Dn&&(i={texture:e,data:n});const{texture:a,data:l,cachePrefix:u=""}=i;this.cachePrefix=u,this._texture=a instanceof je?a:null,this.textureSource=a.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,a.source.resolution=this.resolution):this.resolution=a.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=_o.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}parseSync(){return this._processFrames(0,!0),this._processAnimations(),this.textures}_processFrames(e,n=!1){let i=e;const a=n?1/0:_o.BATCH_SIZE;for(;i-e<a&&i<this._frameKeys.length;){const l=this._frameKeys[i],u=this._frames[l],h=u.frame;if(h){let f=null,d=null;const m=u.trimmed!==!1&&u.sourceSize?u.sourceSize:u.frame,g=new vt(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);u.rotated?f=new vt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):f=new vt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),u.trimmed!==!1&&u.spriteSourceSize&&(d=new vt(Math.floor(u.spriteSourceSize.x)/this.resolution,Math.floor(u.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[l]=new je({source:this.textureSource,frame:f,orig:g,trim:d,rotate:u.rotated?2:0,defaultAnchor:u.anchor,defaultBorders:u.borders,label:l.toString()})}i++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let i=0;i<e[n].length;i++){const a=e[n][i];this.animations[n].push(this.textures[a])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*_o.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*_o.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};jS.BATCH_SIZE=1e3;let Kp=jS;const GM=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function BS(t,e,n){const i={};if(t.forEach(a=>{i[a]=e}),Object.keys(e.textures).forEach(a=>{i[`${e.cachePrefix}${a}`]=e.textures[a]}),!n){const a=qo.dirname(t[0]);e.linkedSheets.forEach((l,u)=>{const h=BS([`${a}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(i,h)})}return i}const $M={extension:Fe.Asset,cache:{test:t=>t instanceof Kp,getCacheableAssets:(t,e)=>BS(t,e,!1)},resolver:{extension:{type:Fe.ResolveParser,name:"resolveSpritesheet"},test:t=>{const n=t.split("?")[0].split("."),i=n.pop(),a=n.pop();return i==="json"&&GM.includes(a)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(zS.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Fe.LoadParser,priority:US.Normal,name:"spritesheetLoader"},async testParse(t,e){return qo.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){const{texture:i,imageFilename:a,textureOptions:l,cachePrefix:u}=e?.data??{};let h=qo.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(i instanceof je)f=i;else{const g=Y_(h+(a??t.meta.image),e.src);f=(await n.load([{src:g,data:l}]))[g]}const d=new Kp({texture:f.source,data:t,cachePrefix:u});await d.parse();const m=t?.meta?.related_multi_packs;if(Array.isArray(m)){const g=[];for(const b of m){if(typeof b!="string")continue;let w=h+b;e.data?.ignoreMultiPack||(w=Y_(w,e.src),g.push(n.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const v=await Promise.all(g);d.linkedSheets=v,v.forEach(b=>{b.linkedSheets=[d].concat(d.linkedSheets.filter(w=>w!==b))})}return d},async unload(t,e,n){await n.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};yn.add($M);const rp=Object.create(null),X_=Object.create(null);function em(t,e){let n=X_[t];return n===void 0&&(rp[e]===void 0&&(rp[e]=1),X_[t]=n=rp[e]++),n}let Ju;function NS(){return(!Ju||Ju?.isContextLost())&&(Ju=hl.get().createCanvas().getContext("webgl",{})),Ju}let ec;function HM(){if(!ec){ec="mediump";const t=NS();t&&t.getShaderPrecisionFormat&&(ec=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return ec}function VM(t,e,n){return e?t:n?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function FM(t,e,n){const i=n?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let a=n?e.requestedFragmentPrecision:e.requestedVertexPrecision;return a==="highp"&&i!=="highp"&&(a="mediump"),`precision ${a} float;
${t}`}else if(i!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function YM(t,e){return e?`#version 300 es
${t}`:t}const XM={},QM={};function KM(t,{name:e="pixi-program"},n=!0){e=e.replace(/\s+/g,"-"),e+=n?"-fragment":"-vertex";const i=n?XM:QM;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function WM(t,e){return e?t.replace("#version 300 es",""):t}const ip={stripVersion:WM,ensurePrecision:FM,addProgramDefines:VM,setProgramName:KM,insertVersion:YM},so=Object.create(null),IS=class Wp{constructor(e){e={...Wp.defaultOptions,...e};const n=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:HM()},setProgramName:{name:e.name},addProgramDefines:n,insertVersion:n};let a=e.fragment,l=e.vertex;Object.keys(ip).forEach(u=>{const h=i[u];a=ip[u](a,h,!0),l=ip[u](l,h,!1)}),this.fragment=a,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=em(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,so[this._cacheKey]=null}static from(e){const n=`${e.vertex}:${e.fragment}`;return so[n]||(so[n]=new Wp(e),so[n]._cacheKey=n),so[n]}};IS.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Wc=IS;const Q_={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function ZM(t){return Q_[t]??Q_.float32}const JM={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",vec2i:"sint32x2",vec3i:"sint32x3",vec4i:"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",vec2u:"uint32x2",vec3u:"uint32x3",vec4u:"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"},K_=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|\)|$)/g;function W_(t,e){let n;for(;(n=K_.exec(t))!==null;){const i=JM[n[3]]??"float32";e[n[2]]={location:parseInt(n[1],10),format:i,stride:ZM(i).stride,offset:0,instance:!1,start:0}}K_.lastIndex=0}function ek(t){return t.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}function tk({source:t,entryPoint:e}){const n={},i=ek(t),a=i.indexOf(`fn ${e}(`);if(a===-1)return n;const l=i.indexOf("->",a);if(l===-1)return n;const u=i.substring(a,l);if(W_(u,n),Object.keys(n).length===0){const h=u.match(/\(\s*\w+\s*:\s*(\w+)/);if(h){const f=h[1],d=new RegExp(`struct\\s+${f}\\s*\\{([^}]+)\\}`,"s"),m=i.match(d);m&&W_(m[1],n)}}return n}function sp(t){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,l=/:\s*([\w<>]+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,d=t.match(e)?.map(g=>({group:parseInt(g.match(n)[1],10),binding:parseInt(g.match(i)[1],10),name:g.match(a)[2],isUniform:g.match(a)[1]==="<uniform>",type:g.match(l)[1]}));if(!d)return{groups:[],structs:[]};const m=t.match(u)?.map(g=>{const v=g.match(f)[1],b=g.match(h).reduce((w,A)=>{const[S,x]=A.split(":");return w[S.trim()]=x.trim(),w},{});return b?{name:v,members:b}:null}).filter(({name:g})=>d.some(v=>v.type===g||v.type.includes(`<${g}>`)))??[];return{groups:d,structs:m}}var Pi=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Pi||{});function nk({groups:t}){const e=[];for(let n=0;n<t.length;n++){const i=t[n];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:Pi.VERTEX|Pi.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:Pi.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"||i.type.startsWith("texture_2d<")?e[i.group].push({binding:i.binding,visibility:Pi.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}}):i.type==="texture_2d_array"||i.type.startsWith("texture_2d_array<")?e[i.group].push({binding:i.binding,visibility:Pi.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d-array",multisampled:!1}}):(i.type==="texture_cube"||i.type.startsWith("texture_cube<"))&&e[i.group].push({binding:i.binding,visibility:Pi.FRAGMENT,texture:{sampleType:"float",viewDimension:"cube",multisampled:!1}})}for(let n=0;n<e.length;n++)e[n]||(e[n]=[]);return e}function rk({groups:t}){const e=[];for(let n=0;n<t.length;n++){const i=t[n];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function ik(t,e){const n=new Set,i=new Set,a=[...t.structs,...e.structs].filter(u=>n.has(u.name)?!1:(n.add(u.name),!0)),l=[...t.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return i.has(h)?!1:(i.add(h),!0)});return{structs:a,groups:l}}const ao=Object.create(null);class fl{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:i,layout:a,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=n,this.vertex=i,n.source===i.source){const h=sp(n.source);this.structsAndGroups=h}else{const h=sp(i.source),f=sp(n.source);this.structsAndGroups=ik(h,f)}this.layout=a??rk(this.structsAndGroups),this.gpuLayout=l??nk(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:n}=this,i=e.source+n.source+e.entryPoint+n.entryPoint;this._layoutKey=em(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=tk(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,ao[this._cacheKey]=null}static from(e){const n=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return ao[n]||(ao[n]=new fl(e),ao[n]._cacheKey=n),ao[n]}}const LS=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],sk=LS.reduce((t,e)=>(t[e]=!0,t),{});function ak(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const qS=class GS{constructor(e,n){this._touched=0,this.uid=ft("uniform"),this._resourceType="uniformGroup",this._resourceId=ft("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...GS.defaultOptions,...n},this.uniformStructures=e;const i={};for(const a in e){const l=e[a];if(l.name=a,l.size=l.size??1,!sk[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${LS.join(", ")}`)}l.value??(l.value=ak(l.type,l.size)),i[a]=l.value}this.uniforms=i,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=em(Object.keys(i).map(a=>`${a}-${e[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};qS.defaultOptions={ubo:!1,isStatic:!1};let $S=qS;class xc{constructor(e){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const i in e){const a=e[i];this.setResource(a,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let n=0;for(const i in this.resources)e[n++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,n){const i=this.resources[n];e!==i&&(i&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[n]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,n){const i=this.resources;for(const a in i)i[a]._gcLastUsed=e,i[a]._touched=n}destroy(){const e=this.resources;for(const n in e)e[n]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const n=this.resources;for(const i in n)n[i]===e&&(n[i]=null)}else this._updateKey()}}var Zp=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.CANVAS=4]="CANVAS",t[t.BOTH=3]="BOTH",t))(Zp||{});class Zc extends si{constructor(e){super(),this.uid=ft("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:n,glProgram:i,groups:a,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=n,this.glProgram=i,u===void 0&&(u=0,n&&(u|=Zp.WEBGPU),i&&(u|=Zp.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!a&&(l={}),l&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&a&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&a&&h)for(const d in h)for(const m in h[d]){const g=h[d][m];f[g]={group:d,binding:m,name:g}}else if(n&&a&&!h){const d=n.structsAndGroups.groups;h={},d.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,f[m.name]=m})}else if(l){a={},h={},n&&n.structsAndGroups.groups.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g});let d=0;for(const m in l)f[m]||(a[99]||(a[99]=new xc,this._ownedBindGroups.push(a[99])),f[m]={group:99,binding:d,name:m},h[99]=h[99]||{},h[99][d]=m,d++);for(const m in l){const g=m;let v=l[m];!v.source&&!v._resourceType&&(v=new $S(v));const b=f[g];b&&(a[b.group]||(a[b.group]=new xc,this._ownedBindGroups.push(a[b.group])),a[b.group].setResource(v,b.binding))}}this.groups=a,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(a,f)}addResource(e,n,i){var a,l;(a=this._uniformBindMap)[n]||(a[n]={}),(l=this._uniformBindMap[n])[i]||(l[i]=e),this.groups[n]||(this.groups[n]=new xc,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(e,n){const i={};for(const a in n){const l=n[a];Object.defineProperty(i,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return i}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:n,gl:i,...a}=e;let l,u;return n&&(l=fl.from(n)),i&&(u=Wc.from(i)),new Zc({gpuProgram:l,glProgram:u,...a})}}const ok={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},ap=0,op=1,lp=2,up=3,cp=4,hp=5,Jp=class HS{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ap)}set blend(e){!!(this.data&1<<ap)!==e&&(this.data^=1<<ap)}get offsets(){return!!(this.data&1<<op)}set offsets(e){!!(this.data&1<<op)!==e&&(this.data^=1<<op)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<lp)}set culling(e){!!(this.data&1<<lp)!==e&&(this.data^=1<<lp)}get depthTest(){return!!(this.data&1<<up)}set depthTest(e){!!(this.data&1<<up)!==e&&(this.data^=1<<up)}get depthMask(){return!!(this.data&1<<hp)}set depthMask(e){!!(this.data&1<<hp)!==e&&(this.data^=1<<hp)}get clockwiseFrontFace(){return!!(this.data&1<<cp)}set clockwiseFrontFace(e){!!(this.data&1<<cp)!==e&&(this.data^=1<<cp)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=ok[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new HS;return e.depthTest=!1,e.blend=!0,e}};Jp.default2d=Jp.for2d();let tm=Jp;const VS=class ey extends Zc{constructor(e){e={...ey.defaultOptions,...e},super(e),this.enabled=!0,this._state=tm.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,n,i,a){e.applyFilter(this,n,i,a)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:n,gl:i,...a}=e;let l,u;return n&&(l=fl.from(n)),i&&(u=Wc.from(i)),new ey({gpuProgram:l,glProgram:u,...a})}};VS.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let lk=VS;function Z_(t,e,n=2){const i=e&&e.length,a=i?e[0]*n:t.length;let l=FS(t,0,a,n,!0);const u=[];if(!l||l.next===l.prev)return u;let h,f,d;if(i&&(l=dk(t,e,l,n)),t.length>80*n){h=t[0],f=t[1];let m=h,g=f;for(let v=n;v<a;v+=n){const b=t[v],w=t[v+1];b<h&&(h=b),w<f&&(f=w),b>m&&(m=b),w>g&&(g=w)}d=Math.max(m-h,g-f),d=d!==0?32767/d:0}return Go(l,u,n,h,f,d,0),u}function FS(t,e,n,i,a){let l;if(a===Ak(t,e,n,i)>0)for(let u=e;u<n;u+=i)l=J_(u/i|0,t[u],t[u+1],l);else for(let u=n-i;u>=e;u-=i)l=J_(u/i|0,t[u],t[u+1],l);return l&&Js(l,l.next)&&(Ho(l),l=l.next),l}function Vi(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Js(n,n.next)||et(n.prev,n,n.next)===0)){if(Ho(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Go(t,e,n,i,a,l,u){if(!t)return;!u&&l&&bk(t,i,a,l);let h=t;for(;t.prev!==t.next;){const f=t.prev,d=t.next;if(l?ck(t,i,a,l):uk(t)){e.push(f.i,t.i,d.i),Ho(t),t=d.next,h=d.next;continue}if(t=d,t===h){u?u===1?(t=hk(Vi(t),e),Go(t,e,n,i,a,l,2)):u===2&&fk(t,e,n,i,a,l):Go(Vi(t),e,n,i,a,l,1);break}}}function uk(t){const e=t.prev,n=t,i=t.next;if(et(e,n,i)>=0)return!1;const a=e.x,l=n.x,u=i.x,h=e.y,f=n.y,d=i.y,m=Math.min(a,l,u),g=Math.min(h,f,d),v=Math.max(a,l,u),b=Math.max(h,f,d);let w=i.next;for(;w!==e;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=b&&wo(a,h,l,f,u,d,w.x,w.y)&&et(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function ck(t,e,n,i){const a=t.prev,l=t,u=t.next;if(et(a,l,u)>=0)return!1;const h=a.x,f=l.x,d=u.x,m=a.y,g=l.y,v=u.y,b=Math.min(h,f,d),w=Math.min(m,g,v),A=Math.max(h,f,d),S=Math.max(m,g,v),x=ty(b,w,e,n,i),C=ty(A,S,e,n,i);let T=t.prevZ,E=t.nextZ;for(;T&&T.z>=x&&E&&E.z<=C;){if(T.x>=b&&T.x<=A&&T.y>=w&&T.y<=S&&T!==a&&T!==u&&wo(h,m,f,g,d,v,T.x,T.y)&&et(T.prev,T,T.next)>=0||(T=T.prevZ,E.x>=b&&E.x<=A&&E.y>=w&&E.y<=S&&E!==a&&E!==u&&wo(h,m,f,g,d,v,E.x,E.y)&&et(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;T&&T.z>=x;){if(T.x>=b&&T.x<=A&&T.y>=w&&T.y<=S&&T!==a&&T!==u&&wo(h,m,f,g,d,v,T.x,T.y)&&et(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;E&&E.z<=C;){if(E.x>=b&&E.x<=A&&E.y>=w&&E.y<=S&&E!==a&&E!==u&&wo(h,m,f,g,d,v,E.x,E.y)&&et(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function hk(t,e){let n=t;do{const i=n.prev,a=n.next.next;!Js(i,a)&&XS(i,n,n.next,a)&&$o(i,a)&&$o(a,i)&&(e.push(i.i,n.i,a.i),Ho(n),Ho(n.next),n=t=a),n=n.next}while(n!==t);return Vi(n)}function fk(t,e,n,i,a,l){let u=t;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&wk(u,h)){let f=QS(u,h);u=Vi(u,u.next),f=Vi(f,f.next),Go(u,e,n,i,a,l,0),Go(f,e,n,i,a,l,0);return}h=h.next}u=u.next}while(u!==t)}function dk(t,e,n,i){const a=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*i,f=l<u-1?e[l+1]*i:t.length,d=FS(t,h,f,i,!1);d===d.next&&(d.steiner=!0),a.push(_k(d))}a.sort(pk);for(let l=0;l<a.length;l++)n=yk(a[l],n);return n}function pk(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),a=(e.next.y-e.y)/(e.next.x-e.x);n=i-a}return n}function yk(t,e){const n=mk(t,e);if(!n)return e;const i=QS(n,t);return Vi(i,i.next),Vi(n,n.next)}function mk(t,e){let n=e;const i=t.x,a=t.y;let l=-1/0,u;if(Js(t,n))return n;do{if(Js(t,n.next))return n.next;if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const g=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=i&&g>l&&(l=g,u=n.x<n.next.x?n:n.next,g===i))return u}n=n.next}while(n!==e);if(!u)return null;const h=u,f=u.x,d=u.y;let m=1/0;n=u;do{if(i>=n.x&&n.x>=f&&i!==n.x&&YS(a<d?i:l,a,f,d,a<d?l:i,a,n.x,n.y)){const g=Math.abs(a-n.y)/(i-n.x);$o(n,t)&&(g<m||g===m&&(n.x>u.x||n.x===u.x&&gk(u,n)))&&(u=n,m=g)}n=n.next}while(n!==h);return u}function gk(t,e){return et(t.prev,t,e.prev)<0&&et(e.next,t,t.next)<0}function bk(t,e,n,i){let a=t;do a.z===0&&(a.z=ty(a.x,a.y,e,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,vk(a)}function vk(t){let e,n=1;do{let i=t,a;t=null;let l=null;for(e=0;i;){e++;let u=i,h=0;for(let d=0;d<n&&(h++,u=u.nextZ,!!u);d++);let f=n;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||i.z<=u.z)?(a=i,i=i.nextZ,h--):(a=u,u=u.nextZ,f--),l?l.nextZ=a:t=a,a.prevZ=l,l=a;i=u}l.nextZ=null,n*=2}while(e>1);return t}function ty(t,e,n,i,a){return t=(t-n)*a|0,e=(e-i)*a|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function _k(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function YS(t,e,n,i,a,l,u,h){return(a-u)*(e-h)>=(t-u)*(l-h)&&(t-u)*(i-h)>=(n-u)*(e-h)&&(n-u)*(l-h)>=(a-u)*(i-h)}function wo(t,e,n,i,a,l,u,h){return!(t===u&&e===h)&&YS(t,e,n,i,a,l,u,h)}function wk(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!xk(t,e)&&($o(t,e)&&$o(e,t)&&Sk(t,e)&&(et(t.prev,t,e.prev)||et(t,e.prev,e))||Js(t,e)&&et(t.prev,t,t.next)>0&&et(e.prev,e,e.next)>0)}function et(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Js(t,e){return t.x===e.x&&t.y===e.y}function XS(t,e,n,i){const a=nc(et(t,e,n)),l=nc(et(t,e,i)),u=nc(et(n,i,t)),h=nc(et(n,i,e));return!!(a!==l&&u!==h||a===0&&tc(t,n,e)||l===0&&tc(t,i,e)||u===0&&tc(n,t,i)||h===0&&tc(n,e,i))}function tc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function nc(t){return t>0?1:t<0?-1:0}function xk(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&XS(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function $o(t,e){return et(t.prev,t,t.next)<0?et(t,e,t.next)>=0&&et(t,t.prev,e)>=0:et(t,e,t.prev)<0||et(t,t.next,e)<0}function Sk(t,e){let n=t,i=!1;const a=(t.x+e.x)/2,l=(t.y+e.y)/2;do n.y>l!=n.next.y>l&&n.next.y!==n.y&&a<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function QS(t,e){const n=ny(t.i,t.x,t.y),i=ny(e.i,e.x,e.y),a=t.next,l=e.prev;return t.next=e,e.prev=t,n.next=a,a.prev=n,i.next=n,n.prev=i,l.next=i,i.prev=l,i}function J_(t,e,n,i){const a=ny(t,e,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Ho(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ny(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Ak(t,e,n,i){let a=0;for(let l=e,u=n-i;l<n;l+=i)a+=(t[u]-t[l])*(t[l+1]+t[u+1]),u=l;return a}const Tk=Z_.default||Z_;var fp,ew;function Ek(){if(ew)return fp;ew=1,fp=n;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(l){var u=[];return l.replace(e,function(h,f,d){var m=f.toLowerCase();for(d=a(d),m=="m"&&d.length>2&&(u.push([f].concat(d.splice(0,2))),m="l",f=f=="m"?"l":"L");;){if(d.length==t[m])return d.unshift(f),u.push(d);if(d.length<t[m])throw new Error("malformed path data");u.push([f].concat(d.splice(0,t[m])))}}),u}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(l){var u=l.match(i);return u?u.map(Number):[]}return fp}var Ck=Ek();const Rk=Ar(Ck);function Mk(t,e){const n=Rk(t),i=[];let a=null,l=0,u=0;for(let h=0;h<n.length;h++){const f=n[h],d=f[0],m=f;switch(d){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),i.length>0&&(a=i.pop(),a?(l=a.startX,u=a.startY):(l=0,u=0)),a=null;break;default:dn(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&a===null&&(a={startX:l,startY:u},i.push(a))}return e}class nm{constructor(e=0,n=0,i=0){this.type="circle",this.x=e,this.y=n,this.radius=i}clone(){return new nm(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const i=this.radius*this.radius;let a=this.x-e,l=this.y-n;return a*=a,l*=l,a+l<=i}strokeContains(e,n,i,a=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-n,h=this.radius,f=(1-a)*i,d=Math.sqrt(l*l+u*u);return d<=h+f&&d>h-(i-f)}getBounds(e){return e||(e=new vt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class rm{constructor(e=0,n=0,i=0,a=0){this.type="ellipse",this.x=e,this.y=n,this.halfWidth=i,this.halfHeight=a}clone(){return new rm(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,a=(n-this.y)/this.halfHeight;return i*=i,a*=a,i+a<=1}strokeContains(e,n,i,a=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=i*(1-a),f=i-h,d=l-f,m=u-f,g=l+h,v=u+h,b=e-this.x,w=n-this.y,A=b*b/(d*d)+w*w/(m*m),S=b*b/(g*g)+w*w/(v*v);return A>1&&S<=1}getBounds(e){return e||(e=new vt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function kk(t,e,n,i,a,l){const u=t-n,h=e-i,f=a-n,d=l-i,m=u*f+h*d,g=f*f+d*d;let v=-1;g!==0&&(v=m/g);let b,w;v<0?(b=n,w=i):v>1?(b=a,w=l):(b=n+v*f,w=i+v*d);const A=t-b,S=e-w;return A*A+S*S}let Ok,Dk;class Oo{constructor(...e){this.type="polygon";let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const i=[];for(let a=0,l=n.length;a<l;a++)i.push(n[a].x,n[a].y);n=i}this.points=n,this.closePath=!0}isClockwise(){let e=0;const n=this.points,i=n.length;for(let a=0;a<i;a+=2){const l=n[a],u=n[a+1],h=n[(a+2)%i],f=n[(a+3)%i];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const n=this.getBounds(Ok),i=e.getBounds(Dk);if(!n.containsRect(i))return!1;const a=e.points;for(let l=0;l<a.length;l+=2){const u=a[l],h=a[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),n=new Oo(e);return n.closePath=this.closePath,n}contains(e,n){let i=!1;const a=this.points.length/2;for(let l=0,u=a-1;l<a;u=l++){const h=this.points[l*2],f=this.points[l*2+1],d=this.points[u*2],m=this.points[u*2+1];f>n!=m>n&&e<(d-h)*((n-f)/(m-f))+h&&(i=!i)}return i}strokeContains(e,n,i,a=.5){const l=i*i,u=l*(1-a),h=l-u,{points:f}=this,d=f.length-(this.closePath?0:2);for(let m=0;m<d;m+=2){const g=f[m],v=f[m+1],b=f[(m+2)%f.length],w=f[(m+3)%f.length],A=kk(e,n,g,v,b,w),S=Math.sign((b-g)*(n-v)-(w-v)*(e-g));if(A<=(S<0?h:u))return!0}return!1}getBounds(e){e||(e=new vt);const n=this.points;let i=1/0,a=-1/0,l=1/0,u=-1/0;for(let h=0,f=n.length;h<f;h+=2){const d=n[h],m=n[h+1];i=d<i?d:i,a=d>a?d:a,l=m<l?m:l,u=m>u?m:u}return e.x=i,e.width=a-i,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Ke("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Ke("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const rc=(t,e,n,i,a,l,u)=>{const h=t-n,f=e-i,d=Math.sqrt(h*h+f*f);return d>=a-l&&d<=a+u};class im{constructor(e=0,n=0,i=0,a=0,l=20){this.type="roundedRectangle",this.x=e,this.y=n,this.width=i,this.height=a,this.radius=l}getBounds(e){return e||(e=new vt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new im(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+i&&n<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let a=e-(this.x+i),l=n-(this.y+i);const u=i*i;if(a*a+l*l<=u||(a=e-(this.x+this.width-i),a*a+l*l<=u)||(l=n-(this.y+this.height-i),a*a+l*l<=u)||(a=e-(this.x+i),a*a+l*l<=u))return!0}return!1}strokeContains(e,n,i,a=.5){const{x:l,y:u,width:h,height:f,radius:d}=this,m=i*(1-a),g=i-m,v=l+d,b=u+d,w=h-d*2,A=f-d*2,S=l+h,x=u+f;return(e>=l-m&&e<=l+g||e>=S-g&&e<=S+m)&&n>=b&&n<=b+A||(n>=u-m&&n<=u+g||n>=x-g&&n<=x+m)&&e>=v&&e<=v+w?!0:e<v&&n<b&&rc(e,n,v,b,d,g,m)||e>S-d&&n<b&&rc(e,n,S-d,b,d,g,m)||e>S-d&&n>x-d&&rc(e,n,S-d,x-d,d,g,m)||e<v&&n>x-d&&rc(e,n,v,x-d,d,g,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const KS={};function Uk(t,e,n){let i=2166136261;for(let a=0;a<e;a++)i^=t[a].uid,i=Math.imul(i,16777619),i>>>=0;return KS[i]||Pk(t,e,i,n)}function Pk(t,e,n,i){const a={};let l=0;for(let h=0;h<i;h++){const f=h<e?t[h]:je.EMPTY.source;a[l++]=f.source,a[l++]=f.style}const u=new xc(a);return KS[n]=u,u}class tw{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function nw(t,e,n,i){if(n??(n=0),i??(i=Math.min(t.byteLength-n,e.byteLength)),!(n&7)&&!(i&7)){const a=i/8;new Float64Array(e,0,a).set(new Float64Array(t,n,a))}else if(!(n&3)&&!(i&3)){const a=i/4;new Float32Array(e,0,a).set(new Float32Array(t,n,a))}else new Uint8Array(e).set(new Uint8Array(t,n,i))}const zk={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var jk=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(jk||{});function rw(t,e){return e.alphaMode==="no-premultiply-alpha"&&zk[t]||t}const Bk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Nk(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function Ik(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const i=Bk.replace(/%forloop%/gi,Nk(t));if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(n)}return t}let Us=null;function Lk(){if(Us)return Us;const t=NS();return Us=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Us=Ik(Us,t),t.getExtension("WEBGL_lose_context")?.loseContext(),Us}class qk{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const n=this.textures[e];this.textures[e]=null,this.ids[n.uid]=null}this.count=0}}class Gk{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new qk,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null,this.elements=null}}const Do=[];let Uc=0;Wy.register({clear:()=>{if(Do.length>0)for(const t of Do)t&&t.destroy();Do.length=0,Uc=0}});function iw(){return Uc>0?Do[--Uc]:new Gk}function sw(t){t.elements=null,Do[Uc++]=t}let oo=0;const WS=class ZS{constructor(e){this.uid=ft("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...ZS.defaultOptions,...e},e.maxTextures||(Ke("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=Lk());const{maxTextures:n,attributesInitialSize:i,indicesInitialSize:a}=e;this.attributeBuffer=new tw(i*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)sw(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,n){const i=e._batch.textures.ids[n._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=n,!0)}updateElement(e){this.dirty=!0;const n=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,n.float32View,n.uint32View,e._attributeStart,e._textureId)}break(e){const n=this._elements;if(!n[this.elementStart])return;let i=iw(),a=i.textures;a.clear();const l=n[this.elementStart];let u=rw(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,d=this.attributeBuffer.uint32View,m=this.indexBuffer;let g=this._batchIndexSize,v=this._batchIndexStart,b="startBatch",w=[];const A=this.maxTextures;for(let S=this.elementStart;S<this.elementSize;++S){const x=n[S];n[S]=null;const T=x.texture._source,E=rw(x.blendMode,T),D=u!==E||h!==x.topology;if(T._batchTick===oo&&!D){x._textureId=T._textureBindLocation,g+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,f,d,x._attributeStart,x._textureId),this.packQuadIndex(m,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,f,d,x._attributeStart,x._textureId),this.packIndex(x,m,x._indexStart,x._attributeStart/this.vertexSize)),x._batch=i,w.push(x);continue}T._batchTick=oo,(a.count>=A||D)&&(this._finishBatch(i,v,g-v,a,u,h,e,b,w),b="renderBatch",v=g,u=E,h=x.topology,i=iw(),a=i.textures,a.clear(),w=[],++oo),x._textureId=T._textureBindLocation=a.count,a.ids[T.uid]=a.count,a.textures[a.count++]=T,x._batch=i,w.push(x),g+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,f,d,x._attributeStart,x._textureId),this.packQuadIndex(m,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,f,d,x._attributeStart,x._textureId),this.packIndex(x,m,x._indexStart,x._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(i,v,g-v,a,u,h,e,b,w),v=g,++oo),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=g}_finishBatch(e,n,i,a,l,u,h,f,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=a,e.blendMode=l,e.topology=u,e.start=n,e.size=i,e.elements=d,++oo,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const n=Math.max(e,this.attributeBuffer.size*2),i=new tw(n);nw(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const n=this.indexBuffer;let i=Math.max(e,n.length*1.5);i+=i%2;const a=i>65535?new Uint32Array(i):new Uint16Array(i);if(a.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let l=0;l<n.length;l++)a[l]=n[l];else nw(n.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(e,n,i){e[n]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3}packIndex(e,n,i,a){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let d=0;d<u;d++)n[i++]=a+l[d+h]-f}destroy(e={}){if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)sw(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};WS.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let $k=WS;var Qt=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(Qt||{});let Vo=class extends si{constructor(e){let{data:n,size:i}=e;const{usage:a,label:l,shrinkToFit:u}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=ft("buffer"),this._resourceType="buffer",this._resourceId=ft("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,i??(i=n?.byteLength);const h=!!n;this.descriptor={size:i,usage:a,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Qt.STATIC)}set static(e){e?this.descriptor.usage|=Qt.STATIC:this.descriptor.usage&=~Qt.STATIC}setDataWithSize(e,n,i){if(this._updateID++,this._updateSize=n*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}const a=this._data;if(this._data=e,this._dataInt32=null,!a||a.length!==e.length){!this.shrinkToFit&&a&&e.byteLength<a.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ft("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function JS(t,e){if(!(t instanceof Vo)){let n=e?Qt.INDEX:Qt.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),n=Qt.INDEX|Qt.COPY_DST):(t=new Float32Array(t),n=Qt.VERTEX|Qt.COPY_DST)),t=new Vo({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return t}function Hk(t,e,n){const i=t.getAttribute(e);if(!i)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const a=i.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const d=a.BYTES_PER_ELEMENT,m=(i.offset||0)/d,g=(i.stride||8)/d;for(let v=m;v<a.length;v+=g){const b=a[v],w=a[v+1];b>h&&(h=b),w>f&&(f=w),b<l&&(l=b),w<u&&(u=w)}return n.minX=l,n.minY=u,n.maxX=h,n.maxY=f,n}function Vk(t){return(t instanceof Vo||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=JS(t.buffer,!1),t}class Fk extends si{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ft("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new qn,this._boundsDirty=!0;const{attributes:n,indexBuffer:i,topology:a}=e;if(this.buffers=[],this.attributes={},n)for(const l in n)this.addAttribute(l,n[l]);this.instanceCount=e.instanceCount??1,i&&this.addIndex(i),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const n=this.attributes[e];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(e,n){const i=Vk(n);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=JS(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Hk(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(n=>n.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Yk=new Float32Array(1),Xk=new Uint32Array(1);class Qk extends Fk{constructor(){const n=new Vo({data:Yk,label:"attribute-batch-buffer",usage:Qt.VERTEX|Qt.COPY_DST,shrinkToFit:!1}),i=new Vo({data:Xk,label:"index-batch-buffer",usage:Qt.INDEX|Qt.COPY_DST,shrinkToFit:!1}),a=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:a,offset:0},aUV:{buffer:n,format:"float32x2",stride:a,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:a,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:a,offset:20}},indexBuffer:i})}}function aw(t,e,n){if(t)for(const i in t){const a=i.toLocaleLowerCase(),l=e[a];if(l){let u=t[i];i==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&l.push(`//----${n}----//`),l.push(u)}else dn(`${i} placement hook does not exist in shader`)}}const Kk=/\{\{(.*?)\}\}/g;function ow(t){const e={};return(t.match(Kk)?.map(i=>i.replace(/[{()}]/g,""))??[]).forEach(i=>{e[i]=[]}),e}function lw(t,e){let n;const i=/@in\s+([^;]+);/g;for(;(n=i.exec(t))!==null;)e.push(n[1])}function uw(t,e,n=!1){const i=[];lw(e,i),t.forEach(h=>{h.header&&lw(h.header,i)});const a=i;n&&a.sort();const l=a.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function cw(t,e){let n;const i=/@out\s+([^;]+);/g;for(;(n=i.exec(t))!==null;)e.push(n[1])}function Wk(t){const n=/\b(\w+)\s*:/g.exec(t);return n?n[1]:""}function Zk(t){const e=/@.*?\s+/g;return t.replace(e,"")}function Jk(t,e){const n=[];cw(e,n),t.forEach(f=>{f.header&&cw(f.header,n)});let i=0;const a=n.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${i++}) ${f}`).join(`,
`),l=n.sort().map(f=>`       var ${Zk(f)};`).join(`
`),u=`return VSOutput(
            ${n.sort().map(f=>` ${Wk(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${a}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function hw(t,e){let n=t;for(const i in e){const a=e[i];a.join(`
`).length?n=n.replace(`{{${i}}}`,`//-----${i} START-----//
${a.join(`
`)}
//----${i} FINISH----//`):n=n.replace(`{{${i}}}`,"")}return n}const ei=Object.create(null),dp=new Map;let eO=0;function tO({template:t,bits:e}){const n=e1(t,e);if(ei[n])return ei[n];const{vertex:i,fragment:a}=rO(t,e);return ei[n]=t1(i,a,e),ei[n]}function nO({template:t,bits:e}){const n=e1(t,e);return ei[n]||(ei[n]=t1(t.vertex,t.fragment,e)),ei[n]}function rO(t,e){const n=e.map(u=>u.vertex).filter(u=>!!u),i=e.map(u=>u.fragment).filter(u=>!!u);let a=uw(n,t.vertex,!0);a=Jk(n,a);const l=uw(i,t.fragment,!0);return{vertex:a,fragment:l}}function e1(t,e){return e.map(n=>(dp.has(n)||dp.set(n,eO++),dp.get(n))).sort((n,i)=>n-i).join("-")+t.vertex+t.fragment}function t1(t,e,n){const i=ow(t),a=ow(e);return n.forEach(l=>{aw(l.vertex,i,l.name),aw(l.fragment,a,l.name)}),{vertex:hw(t,i),fragment:hw(e,a)}}const iO=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,sO=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,aO=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,oO=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,lO={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},uO={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function cO({bits:t,name:e}){const n=tO({template:{fragment:sO,vertex:iO},bits:[lO,...t]});return fl.from({name:e,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function hO({bits:t,name:e}){return new Wc({name:e,...nO({template:{vertex:aO,fragment:oO},bits:[uO,...t]})})}const fO={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},dO={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},pp={};function pO(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let i=0;i<t;i++)e.push(`@group(1) @binding(${n++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${n++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function yO(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let n=0;n<t;n++)n===t-1?e.push("  default:{"):e.push(`  case ${n}:{`),e.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function mO(t){return pp[t]||(pp[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${pO(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${yO(t)}
            `}}),pp[t]}const yp={};function gO(t){const e=[];for(let n=0;n<t;n++)n>0&&e.push("else"),n<t-1&&e.push(`if(vTextureId < ${n}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${n}], vUV);`),e.push("}");return e.join(`
`)}function bO(t){return yp[t]||(yp[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${gO(t)}
            `}}),yp[t]}const vO={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},_O={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},fw={};function wO(t){let e=fw[t];if(e)return e;const n=new Int32Array(t);for(let i=0;i<t;i++)n[i]=i;return e=fw[t]=new $S({uTextures:{value:n,type:"i32",size:t}},{isStatic:!0}),e}class dw extends Zc{constructor(e){const n=hO({name:"batch",bits:[dO,bO(e),_O]}),i=cO({name:"batch",bits:[fO,mO(e),vO]});super({glProgram:n,gpuProgram:i,resources:{batchSamplers:wO(e)}}),this.maxTextures=e}}let lo=null;const n1=class r1 extends $k{constructor(e){super(e),this.geometry=new Qk,this.name=r1.extension.name,this.vertexSize=6,lo??(lo=new dw(e.maxTextures)),this.shader=lo}packAttributes(e,n,i,a,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,d=h.b,m=h.c,g=h.d,v=h.tx,b=h.ty,{positions:w,uvs:A}=e,S=e.color,x=e.attributeOffset,C=x+e.attributeSize;for(let T=x;T<C;T++){const E=T*2,D=w[E],O=w[E+1];n[a++]=f*D+m*O+v,n[a++]=g*O+d*D+b,n[a++]=A[E],n[a++]=A[E+1],i[a++]=S,i[a++]=u}}packQuadAttributes(e,n,i,a,l){const u=e.texture,h=e.transform,f=h.a,d=h.b,m=h.c,g=h.d,v=h.tx,b=h.ty,w=e.bounds,A=w.maxX,S=w.minX,x=w.maxY,C=w.minY,T=u.uvs,E=e.color,D=l<<16|e.roundPixels&65535;n[a+0]=f*S+m*C+v,n[a+1]=g*C+d*S+b,n[a+2]=T.x0,n[a+3]=T.y0,i[a+4]=E,i[a+5]=D,n[a+6]=f*A+m*C+v,n[a+7]=g*C+d*A+b,n[a+8]=T.x1,n[a+9]=T.y1,i[a+10]=E,i[a+11]=D,n[a+12]=f*A+m*x+v,n[a+13]=g*x+d*A+b,n[a+14]=T.x2,n[a+15]=T.y2,i[a+16]=E,i[a+17]=D,n[a+18]=f*S+m*x+v,n[a+19]=g*x+d*S+b,n[a+20]=T.x3,n[a+21]=T.y3,i[a+22]=E,i[a+23]=D}_updateMaxTextures(e){this.shader.maxTextures!==e&&(lo=new dw(e),this.shader=lo)}destroy(){this.shader=null,super.destroy()}};n1.extension={type:[Fe.Batcher],name:"default"};let xO=n1;class Jc{constructor(e){this.items=Object.create(null);const{renderer:n,type:i,onUnload:a,priority:l,name:u}=e;this._renderer=n,n.gc.addResourceHash(this,"items",i,l??0),this._onUnload=a,this.name=u}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...n){if(!this.items[e.uid])return;const i=e._gpuData[this._renderer.uid];i&&(this._onUnload?.(e,...n),i.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(n=>n&&this.remove(n,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function SO(t,e,n,i,a,l,u,h=null){let f=0;n*=e,a*=l;const d=h.a,m=h.b,g=h.c,v=h.d,b=h.tx,w=h.ty;for(;f<u;){const A=t[n],S=t[n+1];i[a]=d*A+g*S+b,i[a+1]=m*A+v*S+w,a+=l,n+=e,f++}}function AO(t,e,n,i){let a=0;for(e*=n;a<i;)t[e]=0,t[e+1]=0,e+=n,a++}function i1(t,e,n,i,a){const l=e.a,u=e.b,h=e.c,f=e.d,d=e.tx,m=e.ty;n||(n=0),i||(i=2),a||(a=t.length/i-n);let g=n*i;for(let v=0;v<a;v++){const b=t[g],w=t[g+1];t[g]=l*b+h*w+d,t[g+1]=u*b+f*w+m,g+=i}}const TO=new De;class sm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,n=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?gS(n,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||TO}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Fo={extension:{type:Fe.ShapeBuilder,name:"circle"},build(t,e){let n,i,a,l,u,h;if(t.type==="circle"){const E=t;if(u=h=E.radius,u<=0)return!1;n=E.x,i=E.y,a=l=0}else if(t.type==="ellipse"){const E=t;if(u=E.halfWidth,h=E.halfHeight,u<=0||h<=0)return!1;n=E.x,i=E.y,a=l=0}else{const E=t,D=E.width/2,O=E.height/2;n=E.x+D,i=E.y+O,u=h=Math.max(0,Math.min(E.radius,Math.min(D,O))),a=D-u,l=O-h}if(a<0||l<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),d=f*8+(a?4:0)+(l?4:0);if(d===0)return!1;if(f===0)return e[0]=e[6]=n+a,e[1]=e[3]=i+l,e[2]=e[4]=n-a,e[5]=e[7]=i-l,!0;let m=0,g=f*4+(a?2:0)+2,v=g,b=d,w=a+u,A=l,S=n+w,x=n-w,C=i+A;if(e[m++]=S,e[m++]=C,e[--g]=C,e[--g]=x,l){const E=i-A;e[v++]=x,e[v++]=E,e[--b]=E,e[--b]=S}for(let E=1;E<f;E++){const D=Math.PI/2*(E/f),O=a+Math.cos(D)*u,M=l+Math.sin(D)*h,k=n+O,j=n-O,B=i+M,N=i-M;e[m++]=k,e[m++]=B,e[--g]=B,e[--g]=j,e[v++]=j,e[v++]=N,e[--b]=N,e[--b]=k}w=a,A=l+h,S=n+w,x=n-w,C=i+A;const T=i-A;return e[m++]=S,e[m++]=C,e[--b]=T,e[--b]=S,a&&(e[m++]=x,e[m++]=C,e[--b]=T,e[--b]=x),!0},triangulate(t,e,n,i,a,l){if(t.length===0)return;let u=0,h=0;for(let m=0;m<t.length;m+=2)u+=t[m],h+=t[m+1];u/=t.length/2,h/=t.length/2;let f=i;e[f*n]=u,e[f*n+1]=h;const d=f++;for(let m=0;m<t.length;m+=2)e[f*n]=t[m],e[f*n+1]=t[m+1],m>0&&(a[l++]=f,a[l++]=d,a[l++]=f-1),f++;a[l++]=d+1,a[l++]=d,a[l++]=f-1}},EO={...Fo,extension:{...Fo.extension,name:"ellipse"}},CO={...Fo,extension:{...Fo.extension,name:"roundedRectangle"}},s1=1e-4,pw=1e-4;function RO(t){const e=t.length;if(e<6)return 1;let n=0;for(let i=0,a=t[e-2],l=t[e-1];i<e;i+=2){const u=t[i],h=t[i+1];n+=(u-a)*(h+l),a=u,l=h}return n<0?-1:1}function yw(t,e,n,i,a,l,u,h){const f=t-n*a,d=e-i*a,m=t+n*l,g=e+i*l;let v,b;u?(v=i,b=-n):(v=-i,b=n);const w=f+v,A=d+b,S=m+v,x=g+b;return h.push(w,A),h.push(S,x),2}function Ti(t,e,n,i,a,l,u,h){const f=n-t,d=i-e;let m=Math.atan2(f,d),g=Math.atan2(a-t,l-e);h&&m<g?m+=Math.PI*2:!h&&m>g&&(g+=Math.PI*2);let v=m;const b=g-m,w=Math.abs(b),A=Math.sqrt(f*f+d*d),S=(15*w*Math.sqrt(A)/Math.PI>>0)+1,x=b/S;if(v+=x,h){u.push(t,e),u.push(n,i);for(let C=1,T=v;C<S;C++,T+=x)u.push(t,e),u.push(t+Math.sin(T)*A,e+Math.cos(T)*A);u.push(t,e),u.push(a,l)}else{u.push(n,i),u.push(t,e);for(let C=1,T=v;C<S;C++,T+=x)u.push(t+Math.sin(T)*A,e+Math.cos(T)*A),u.push(t,e);u.push(a,l),u.push(t,e)}return S*2}function MO(t,e,n,i,a,l){const u=s1;if(t.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let ie=RO(t);f=(f-.5)*ie+.5}const d=new jt(t[0],t[1]),m=new jt(t[t.length-2],t[t.length-1]),g=i,v=Math.abs(d.x-m.x)<u&&Math.abs(d.y-m.y)<u;if(g){t=t.slice(),v&&(t.pop(),t.pop(),m.set(t[t.length-2],t[t.length-1]));const ie=(d.x+m.x)*.5,ue=(m.y+d.y)*.5;t.unshift(ie,ue),t.push(ie,ue)}const b=a,w=t.length/2;let A=t.length;const S=b.length/2,x=h.width/2,C=x*x,T=h.miterLimit*h.miterLimit;let E=t[0],D=t[1],O=t[2],M=t[3],k=0,j=0,B=-(D-M),N=E-O,H=0,J=0,ee=Math.sqrt(B*B+N*N);B/=ee,N/=ee,B*=x,N*=x;const ae=f,U=(1-ae)*2,L=ae*2;g||(h.cap==="round"?A+=Ti(E-B*(U-L)*.5,D-N*(U-L)*.5,E-B*U,D-N*U,E+B*L,D+N*L,b,!0)+2:h.cap==="square"&&(A+=yw(E,D,B,N,U,L,!0,b))),b.push(E-B*U,D-N*U),b.push(E+B*L,D+N*L);for(let ie=1;ie<w-1;++ie){E=t[(ie-1)*2],D=t[(ie-1)*2+1],O=t[ie*2],M=t[ie*2+1],k=t[(ie+1)*2],j=t[(ie+1)*2+1],B=-(D-M),N=E-O,ee=Math.sqrt(B*B+N*N),B/=ee,N/=ee,B*=x,N*=x,H=-(M-j),J=O-k,ee=Math.sqrt(H*H+J*J),H/=ee,J/=ee,H*=x,J*=x;const ue=O-E,z=D-M,F=O-k,W=j-M,Z=ue*F+z*W,se=z*F-W*ue,oe=se<0;if(Math.abs(se)<.001*Math.abs(Z)){b.push(O-B*U,M-N*U),b.push(O+B*L,M+N*L),Z>=0&&(h.join==="round"?A+=Ti(O,M,O-B*U,M-N*U,O-H*U,M-J*U,b,!1)+4:A+=2,b.push(O-H*L,M-J*L),b.push(O+H*U,M+J*U));continue}const ge=(-B+E)*(-N+M)-(-B+O)*(-N+D),Je=(-H+k)*(-J+M)-(-H+O)*(-J+j),Oe=(ue*Je-F*ge)/se,Bt=(W*ge-z*Je)/se,mn=(Oe-O)*(Oe-O)+(Bt-M)*(Bt-M),Nt=O+(Oe-O)*U,gn=M+(Bt-M)*U,yt=O-(Oe-O)*L,Zt=M-(Bt-M)*L,sa=Math.min(ue*ue+z*z,F*F+W*W),yl=oe?U:L,ml=sa+yl*yl*C;mn<=ml?h.join==="bevel"||mn/C>T?(oe?(b.push(Nt,gn),b.push(O+B*L,M+N*L),b.push(Nt,gn),b.push(O+H*L,M+J*L)):(b.push(O-B*U,M-N*U),b.push(yt,Zt),b.push(O-H*U,M-J*U),b.push(yt,Zt)),A+=2):h.join==="round"?oe?(b.push(Nt,gn),b.push(O+B*L,M+N*L),A+=Ti(O,M,O+B*L,M+N*L,O+H*L,M+J*L,b,!0)+4,b.push(Nt,gn),b.push(O+H*L,M+J*L)):(b.push(O-B*U,M-N*U),b.push(yt,Zt),A+=Ti(O,M,O-B*U,M-N*U,O-H*U,M-J*U,b,!1)+4,b.push(O-H*U,M-J*U),b.push(yt,Zt)):(b.push(Nt,gn),b.push(yt,Zt)):(b.push(O-B*U,M-N*U),b.push(O+B*L,M+N*L),h.join==="round"?oe?A+=Ti(O,M,O+B*L,M+N*L,O+H*L,M+J*L,b,!0)+2:A+=Ti(O,M,O-B*U,M-N*U,O-H*U,M-J*U,b,!1)+2:h.join==="miter"&&mn/C<=T&&(oe?(b.push(yt,Zt),b.push(yt,Zt)):(b.push(Nt,gn),b.push(Nt,gn)),A+=2),b.push(O-H*U,M-J*U),b.push(O+H*L,M+J*L),A+=2)}E=t[(w-2)*2],D=t[(w-2)*2+1],O=t[(w-1)*2],M=t[(w-1)*2+1],B=-(D-M),N=E-O,ee=Math.sqrt(B*B+N*N),B/=ee,N/=ee,B*=x,N*=x,b.push(O-B*U,M-N*U),b.push(O+B*L,M+N*L),g||(h.cap==="round"?A+=Ti(O-B*(U-L)*.5,M-N*(U-L)*.5,O-B*U,M-N*U,O+B*L,M+N*L,b,!1)+2:h.cap==="square"&&(A+=yw(O,M,B,N,U,L,!1,b)));const te=pw*pw;for(let ie=S;ie<A+S-2;++ie)E=b[ie*2],D=b[ie*2+1],O=b[(ie+1)*2],M=b[(ie+1)*2+1],k=b[(ie+2)*2],j=b[(ie+2)*2+1],!(Math.abs(E*(M-j)+O*(j-D)+k*(D-M))<te)&&l.push(ie,ie+1,ie+2)}function kO(t,e,n,i){const a=s1;if(t.length===0)return;const l=t[0],u=t[1],h=t[t.length-2],f=t[t.length-1],d=e||Math.abs(l-h)<a&&Math.abs(u-f)<a,m=n,g=t.length/2,v=m.length/2;for(let b=0;b<g;b++)m.push(t[b*2]),m.push(t[b*2+1]);for(let b=0;b<g-1;b++)i.push(v+b,v+b+1);d&&i.push(v+g-1,v)}function a1(t,e,n,i,a,l,u){const h=Tk(t,e,2);if(!h)return;for(let d=0;d<h.length;d+=3)l[u++]=h[d]+a,l[u++]=h[d+1]+a,l[u++]=h[d+2]+a;let f=a*i;for(let d=0;d<t.length;d+=2)n[f]=t[d],n[f+1]=t[d+1],f+=i}const OO=[],DO={extension:{type:Fe.ShapeBuilder,name:"polygon"},build(t,e){for(let n=0;n<t.points.length;n++)e[n]=t.points[n];return!0},triangulate(t,e,n,i,a,l){a1(t,OO,e,n,i,a,l)}},UO={extension:{type:Fe.ShapeBuilder,name:"rectangle"},build(t,e){const n=t,i=n.x,a=n.y,l=n.width,u=n.height;return l>0&&u>0?(e[0]=i,e[1]=a,e[2]=i+l,e[3]=a,e[4]=i+l,e[5]=a+u,e[6]=i,e[7]=a+u,!0):!1},triangulate(t,e,n,i,a,l){let u=0;i*=n,e[i+u]=t[0],e[i+u+1]=t[1],u+=n,e[i+u]=t[2],e[i+u+1]=t[3],u+=n,e[i+u]=t[6],e[i+u+1]=t[7],u+=n,e[i+u]=t[4],e[i+u+1]=t[5],u+=n;const h=i/n;a[l++]=h,a[l++]=h+1,a[l++]=h+2,a[l++]=h+1,a[l++]=h+3,a[l++]=h+2}},PO={extension:{type:Fe.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,n,i,a,l){let u=0;i*=n,e[i+u]=t[0],e[i+u+1]=t[1],u+=n,e[i+u]=t[2],e[i+u+1]=t[3],u+=n,e[i+u]=t[4],e[i+u+1]=t[5];const h=i/n;a[l++]=h,a[l++]=h+1,a[l++]=h+2}},mw=[{offset:0,color:"white"},{offset:1,color:"black"}],am=class ry{constructor(...e){this.uid=ft("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let n=zO(e);n={...n.type==="radial"?ry.defaultRadialOptions:ry.defaultLinearOptions,...aS(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(e,n){return this.colorStops.push({offset:e,color:Ve.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:n}=this.start,{x:i,y:a}=this.end,l=i-e,u=a-n;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const S=e;e=i,i=S,l*=-1}if(u<0){const S=n;n=a,a=S,u*=-1}}const f=this.colorStops.length?this.colorStops:mw,d=this._textureSize,{canvas:m,context:g}=bw(d,1),v=h?g.createLinearGradient(this._textureSize,0,0,0):g.createLinearGradient(0,0,this._textureSize,0);gw(v,f),g.fillStyle=v,g.fillRect(0,0,d,1),this.texture=new je({source:new Dc({resource:m,addressMode:this._wrapMode})});const b=Math.sqrt(l*l+u*u),w=Math.atan2(u,l),A=new De;A.scale(b/d,1),A.rotate(w),A.translate(e,n),this.textureSpace==="local"&&A.scale(d,d),this.transform=A}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:mw,n=this._textureSize,{canvas:i,context:a}=bw(n,n),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,d=this.innerRadius,m=this.outerRadius,g=h-m,v=f-m,b=n/(m*2),w=(l-g)*b,A=(u-v)*b,S=a.createRadialGradient(w,A,d*b,(h-g)*b,(f-v)*b,m*b);gw(S,e),a.fillStyle=e[e.length-1].color,a.fillRect(0,0,n,n),a.fillStyle=S,a.translate(w,A),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-w,-A),a.fillRect(0,0,n,n),this.texture=new je({source:new Dc({resource:i,addressMode:this._wrapMode})});const x=new De;x.scale(1/b,1/b),x.translate(g,v),this.textureSpace==="local"&&x.scale(n,n),this.transform=x}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};am.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};am.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let dl=am;function gw(t,e){for(let n=0;n<e.length;n++){const i=e[n];t.addColorStop(i.offset,i.color)}}function bw(t,e){const n=hl.get().createCanvas(t,e),i=n.getContext("2d");return{canvas:n,context:i}}function zO(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(Ke("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??dl.defaultLinearOptions.textureSize}),e}const jO=new De,BO=new vt;function NO(t,e,n,i){const a=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const u=n.getBounds(BO);e.width&&u.pad(e.width);const{x:h,y:f}=u,d=1/u.width,m=1/u.height,g=-h*d,v=-f*m,b=a.a,w=a.b,A=a.c,S=a.d;a.a*=d,a.b*=d,a.c*=m,a.d*=m,a.tx=g*b+v*A+a.tx,a.ty=g*w+v*S+a.ty}else a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof dl)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),i&&a.append(jO.copyFrom(i).invert()),a}const eh={};yn.handleByMap(Fe.ShapeBuilder,eh);yn.add(UO,DO,PO,Fo,EO,CO);const IO=new vt,LO=new De;function qO(t,e){const{geometryData:n,batches:i}=e;i.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let a=0;a<t.instructions.length;a++){const l=t.instructions[a];if(l.action==="texture")GO(l.data,i,n);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,d=l.data.hole;u&&d&&vw(d.shapePath,f,!0,i,n),d&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=d.shapePath.shapePrimitives),vw(h,f,u,i,n)}}}function GO(t,e,n){const i=[],a=eh.rectangle,l=IO;l.x=t.dx,l.y=t.dy,l.width=t.dw,l.height=t.dh;const u=t.transform;if(!a.build(l,i))return;const{vertices:h,uvs:f,indices:d}=n,m=d.length,g=h.length/2;u&&i1(i,u),a.triangulate(i,h,2,g,d,m);const v=t.image,b=v.uvs;f.push(b.x0,b.y0,b.x1,b.y1,b.x3,b.y3,b.x2,b.y2);const w=Wt.get(sm);w.indexOffset=m,w.indexSize=d.length-m,w.attributeOffset=g,w.attributeSize=h.length/2-g,w.baseColor=t.style,w.alpha=t.alpha,w.texture=v,w.geometryData=n,e.push(w)}function vw(t,e,n,i,a){const{vertices:l,uvs:u,indices:h}=a;t.shapePrimitives.forEach(({shape:f,transform:d,holes:m})=>{const g=[],v=eh[f.type];if(!v.build(f,g))return;const b=h.length,w=l.length/2;let A="triangle-list";if(d&&i1(g,d),n){const T=f.closePath??!0,E=e;E.pixelLine?(kO(g,T,l,h),A="line-list"):MO(g,E,!1,T,l,h)}else if(m){const T=[],E=g.slice();$O(m).forEach(O=>{T.push(E.length/2),E.push(...O)}),a1(E,T,l,2,w,h,b)}else v.triangulate(g,l,2,w,h,b);const S=u.length/2,x=e.texture;if(x!==je.WHITE){const T=NO(LO,e,f,d);SO(l,2,w,u,S,2,l.length/2-w,T)}else AO(u,S,2,l.length/2-w);const C=Wt.get(sm);C.indexOffset=b,C.indexSize=h.length-b,C.attributeOffset=w,C.attributeSize=l.length/2-w,C.baseColor=e.color,C.alpha=e.alpha,C.texture=x,C.geometryData=a,C.topology=A,i.push(C)})}function $O(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n].shape,a=[];eh[i.type].build(i,a)&&e.push(a)}return e}class HO{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{Wt.return(e)}),this.graphicsData&&Wt.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class VO{constructor(){this.instructions=new Jy}init(e){const n=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(n):this.batcher=new xO({maxTextures:n}),this.instructions.reset()}get geometry(){return Ke(YR,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const om=class iy{constructor(e){this._renderer=e,this._managedContexts=new Jc({renderer:e,type:"resource",name:"graphicsContext"})}init(e){iy.defaultOptions.bezierSmoothness=e?.bezierSmoothness??iy.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const n=!!e._gpuData[this._renderer.uid],i=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!n){n&&i.reset(),qO(e,i);const a=e.batchMode;e.customShader||a==="no-batch"?i.isBatchable=!1:a==="auto"?i.isBatchable=i.geometryData.vertices.length<400:i.isBatchable=!0,e.dirty=!1}return i}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const n=Wt.get(VO,{maxTextures:this._renderer.limits.maxBatchableTextures}),i=e._gpuData[this._renderer.uid],{batches:a,geometryData:l}=i;i.graphicsData=n;const u=l.vertices.length,h=l.indices.length;for(let g=0;g<a.length;g++)a[g].applyTransform=!1;const f=n.batcher;f.ensureAttributeBuffer(u),f.ensureIndexBuffer(h),f.begin();for(let g=0;g<a.length;g++){const v=a[g];f.add(v)}f.finish(n.instructions);const d=f.geometry;d.indexBuffer.setDataWithSize(f.indexBuffer,f.indexSize,!0),d.buffers[0].setDataWithSize(f.attributeBuffer.float32View,f.attributeSize,!0);const m=f.batches;for(let g=0;g<m.length;g++){const v=m[g];v.bindGroup=Uk(v.textures.textures,v.textures.count,this._renderer.limits.maxBatchableTextures)}return n}_initContext(e){const n=new HO;return n.context=e,e._gpuData[this._renderer.uid]=n,this._managedContexts.add(e),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};om.extension={type:[Fe.WebGLSystem,Fe.WebGPUSystem],name:"graphicsContext"};om.defaultOptions={bezierSmoothness:.5};let lm=om;const FO=8,ic=11920929e-14,YO=1;function o1(t,e,n,i,a,l,u,h,f,d){const g=Math.min(.99,Math.max(0,d??lm.defaultOptions.bezierSmoothness));let v=(YO-g)/1;return v*=v,XO(e,n,i,a,l,u,h,f,t,v),t}function XO(t,e,n,i,a,l,u,h,f,d){sy(t,e,n,i,a,l,u,h,f,d,0),f.push(u,h)}function sy(t,e,n,i,a,l,u,h,f,d,m){if(m>FO)return;const g=(t+n)/2,v=(e+i)/2,b=(n+a)/2,w=(i+l)/2,A=(a+u)/2,S=(l+h)/2,x=(g+b)/2,C=(v+w)/2,T=(b+A)/2,E=(w+S)/2,D=(x+T)/2,O=(C+E)/2;if(m>0){let M=u-t,k=h-e;const j=Math.abs((n-u)*k-(i-h)*M),B=Math.abs((a-u)*k-(l-h)*M);if(j>ic&&B>ic){if((j+B)*(j+B)<=d*(M*M+k*k)){f.push(D,O);return}}else if(j>ic){if(j*j<=d*(M*M+k*k)){f.push(D,O);return}}else if(B>ic){if(B*B<=d*(M*M+k*k)){f.push(D,O);return}}else if(M=D-(t+u)/2,k=O-(e+h)/2,M*M+k*k<=d){f.push(D,O);return}}sy(t,e,g,v,x,C,D,O,f,d,m+1),sy(D,O,T,E,A,S,u,h,f,d,m+1)}const QO=8,KO=11920929e-14,WO=1;function ZO(t,e,n,i,a,l,u,h){const d=Math.min(.99,Math.max(0,h??lm.defaultOptions.bezierSmoothness));let m=(WO-d)/1;return m*=m,JO(e,n,i,a,l,u,t,m),t}function JO(t,e,n,i,a,l,u,h){ay(u,t,e,n,i,a,l,h,0),u.push(a,l)}function ay(t,e,n,i,a,l,u,h,f){if(f>QO)return;const d=(e+i)/2,m=(n+a)/2,g=(i+l)/2,v=(a+u)/2,b=(d+g)/2,w=(m+v)/2;let A=l-e,S=u-n;const x=Math.abs((i-l)*S-(a-u)*A);if(x>KO){if(x*x<=h*(A*A+S*S)){t.push(b,w);return}}else if(A=b-(e+l)/2,S=w-(n+u)/2,A*A+S*S<=h){t.push(b,w);return}ay(t,e,n,d,m,b,w,h,f+1),ay(t,b,w,g,v,l,u,h,f+1)}function l1(t,e,n,i,a,l,u,h){let f=Math.abs(a-l);(!u&&a>l||u&&l>a)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(f/Math.PI)))),h=Math.max(h,3);let d=f/h,m=a;d*=u?-1:1;for(let g=0;g<h+1;g++){const v=Math.cos(m),b=Math.sin(m),w=e+v*i,A=n+b*i;t.push(w,A),m+=d}}function eD(t,e,n,i,a,l){const u=t[t.length-2],f=t[t.length-1]-n,d=u-e,m=a-n,g=i-e,v=Math.abs(f*g-d*m);if(v<1e-8||l===0){(t[t.length-2]!==e||t[t.length-1]!==n)&&t.push(e,n);return}const b=f*f+d*d,w=m*m+g*g,A=f*m+d*g,S=l*Math.sqrt(b)/v,x=l*Math.sqrt(w)/v,C=S*A/b,T=x*A/w,E=S*g+x*d,D=S*m+x*f,O=d*(x+C),M=f*(x+C),k=g*(S+T),j=m*(S+T),B=Math.atan2(M-D,O-E),N=Math.atan2(j-D,k-E);l1(t,E+e,D+n,l,B,N,d*m>g*f)}const Uo=Math.PI*2,mp={centerX:0,centerY:0,ang1:0,ang2:0},gp=({x:t,y:e},n,i,a,l,u,h,f)=>{t*=n,e*=i;const d=a*t-l*e,m=l*t+a*e;return f.x=d+u,f.y=m+h,f};function tD(t,e){const n=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:n,a=Math.cos(t),l=Math.sin(t),u=Math.cos(t+e),h=Math.sin(t+e);return[{x:a-l*i,y:l+a*i},{x:u+h*i,y:h-u*i},{x:u,y:h}]}const _w=(t,e,n,i)=>{const a=t*i-e*n<0?-1:1;let l=t*n+e*i;return l>1&&(l=1),l<-1&&(l=-1),a*Math.acos(l)},nD=(t,e,n,i,a,l,u,h,f,d,m,g,v)=>{const b=Math.pow(a,2),w=Math.pow(l,2),A=Math.pow(m,2),S=Math.pow(g,2);let x=b*w-b*S-w*A;x<0&&(x=0),x/=b*S+w*A,x=Math.sqrt(x)*(u===h?-1:1);const C=x*a/l*g,T=x*-l/a*m,E=d*C-f*T+(t+n)/2,D=f*C+d*T+(e+i)/2,O=(m-C)/a,M=(g-T)/l,k=(-m-C)/a,j=(-g-T)/l,B=_w(1,0,O,M);let N=_w(O,M,k,j);h===0&&N>0&&(N-=Uo),h===1&&N<0&&(N+=Uo),v.centerX=E,v.centerY=D,v.ang1=B,v.ang2=N};function rD(t,e,n,i,a,l,u,h=0,f=0,d=0){if(l===0||u===0)return;const m=Math.sin(h*Uo/360),g=Math.cos(h*Uo/360),v=g*(e-i)/2+m*(n-a)/2,b=-m*(e-i)/2+g*(n-a)/2;if(v===0&&b===0)return;l=Math.abs(l),u=Math.abs(u);const w=Math.pow(v,2)/Math.pow(l,2)+Math.pow(b,2)/Math.pow(u,2);w>1&&(l*=Math.sqrt(w),u*=Math.sqrt(w)),nD(e,n,i,a,l,u,f,d,m,g,v,b,mp);let{ang1:A,ang2:S}=mp;const{centerX:x,centerY:C}=mp;let T=Math.abs(S)/(Uo/4);Math.abs(1-T)<1e-7&&(T=1);const E=Math.max(Math.ceil(T),1);S/=E;let D=t[t.length-2],O=t[t.length-1];const M={x:0,y:0};for(let k=0;k<E;k++){const j=tD(A,S),{x:B,y:N}=gp(j[0],l,u,g,m,x,C,M),{x:H,y:J}=gp(j[1],l,u,g,m,x,C,M),{x:ee,y:ae}=gp(j[2],l,u,g,m,x,C,M);o1(t,D,O,B,N,H,J,ee,ae),D=ee,O=ae,A+=S}}function iD(t,e,n){const i=(u,h)=>{const f=h.x-u.x,d=h.y-u.y,m=Math.sqrt(f*f+d*d),g=f/m,v=d/m;return{len:m,nx:g,ny:v}},a=(u,h)=>{u===0?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??n;if(f<=0){a(u,h),l=h;continue}const d=e[(u+1)%e.length],m=i(h,l),g=i(h,d);if(m.len<1e-4||g.len<1e-4){a(u,h),l=h;continue}let v=Math.asin(m.nx*g.ny-m.ny*g.nx),b=1,w=!1;m.nx*g.nx-m.ny*-g.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,b=-1,w=!0):v>0&&(b=-1,w=!0);const A=v/2;let S,x=Math.abs(Math.cos(A)*f/Math.sin(A));x>Math.min(m.len/2,g.len/2)?(x=Math.min(m.len/2,g.len/2),S=Math.abs(x*Math.sin(A)/Math.cos(A))):S=f;const C=h.x+g.nx*x+-g.ny*S*b,T=h.y+g.ny*x+g.nx*S*b,E=Math.atan2(m.ny,m.nx)+Math.PI/2*b,D=Math.atan2(g.ny,g.nx)-Math.PI/2*b;u===0&&t.moveTo(C+Math.cos(E)*S,T+Math.sin(E)*S),t.arc(C,T,S,E,D,w),l=h}}function sD(t,e,n,i){const a=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,d)=>({x:h.x+(f.x-h.x)*d,y:h.y+(f.y-h.y)*d}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],d=f.radius??n;if(d<=0){h===0?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y);continue}const m=e[h],g=e[(h+2)%u],v=a(m,f);let b;if(v<1e-4)b=f;else{const S=Math.min(v/2,d);b=l(f,m,S/v)}const w=a(g,f);let A;if(w<1e-4)A=f;else{const S=Math.min(w/2,d);A=l(f,g,S/w)}h===0?t.moveTo(b.x,b.y):t.lineTo(b.x,b.y),t.quadraticCurveTo(f.x,f.y,A.x,A.y,i)}}const aD=new vt;class oD{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new qn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,n){return this.startPoly(e,n),this}lineTo(e,n){this._ensurePoly();const i=this._currentPoly.points,a=i[i.length-2],l=i[i.length-1];return(a!==e||l!==n)&&i.push(e,n),this}arc(e,n,i,a,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return l1(h,e,n,i,a,l,u),this}arcTo(e,n,i,a,l){this._ensurePoly();const u=this._currentPoly.points;return eD(u,e,n,i,a,l),this}arcToSvg(e,n,i,a,l,u,h){const f=this._currentPoly.points;return rD(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,n,i,a,l),this}bezierCurveTo(e,n,i,a,l,u,h){this._ensurePoly();const f=this._currentPoly;return o1(this._currentPoly.points,f.lastX,f.lastY,e,n,i,a,l,u,h),this}quadraticCurveTo(e,n,i,a,l){this._ensurePoly();const u=this._currentPoly;return ZO(this._currentPoly.points,u.lastX,u.lastY,e,n,i,a,l),this}closePath(){return this.endPoly(!0),this}addPath(e,n){this.endPoly(),n&&!n.isIdentity()&&(e=e.clone(!0),e.transform(n));const i=this.shapePrimitives,a=i.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&i.length-a>1){let l=null;for(let u=a;u<i.length;u++){const h=i[u];if(h.shape.type==="polygon"){const f=h.shape,d=l?.shape;d&&d.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),i.copyWithin(u,u+1),i.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,n,i,a,l){return this.drawShape(new vt(e,n,i,a),l),this}circle(e,n,i,a){return this.drawShape(new nm(e,n,i),a),this}poly(e,n,i){const a=new Oo(e);return a.closePath=n,this.drawShape(a,i),this}regularPoly(e,n,i,a,l=0,u){a=Math.max(a|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/a,d=[];for(let m=0;m<a;m++){const g=h-m*f;d.push(e+i*Math.cos(g),n+i*Math.sin(g))}return this.poly(d,!0,u),this}roundPoly(e,n,i,a,l,u=0,h){if(a=Math.max(a|0,3),l<=0)return this.regularPoly(e,n,i,a,u);const f=i*Math.sin(Math.PI/a)-.001;l=Math.min(l,f);const d=-1*Math.PI/2+u,m=Math.PI*2/a,g=(a-2)*Math.PI/a/2;for(let v=0;v<a;v++){const b=v*m+d,w=e+i*Math.cos(b),A=n+i*Math.sin(b),S=b+Math.PI+g,x=b-Math.PI-g,C=w+l*Math.cos(S),T=A+l*Math.sin(S),E=w+l*Math.cos(x),D=A+l*Math.sin(x);v===0?this.moveTo(C,T):this.lineTo(C,T),this.quadraticCurveTo(w,A,E,D,h)}return this.closePath()}roundShape(e,n,i=!1,a){return e.length<3?this:(i?sD(this,e,n,a):iD(this,e,n),this.closePath())}filletRect(e,n,i,a,l){if(l===0)return this.rect(e,n,i,a);const u=Math.min(i,a)/2,h=Math.min(u,Math.max(-u,l)),f=e+i,d=n+a,m=h<0?-h:0,g=Math.abs(h);return this.moveTo(e,n+g).arcTo(e+m,n+m,e+g,n,g).lineTo(f-g,n).arcTo(f-m,n+m,f,n+g,g).lineTo(f,d-g).arcTo(f-m,d-m,e+i-g,d,g).lineTo(e+g,d).arcTo(e+m,d-m,e,d-g,g).closePath()}chamferRect(e,n,i,a,l,u){if(l<=0)return this.rect(e,n,i,a);const h=Math.min(l,Math.min(i,a)/2),f=e+i,d=n+a,m=[e+h,n,f-h,n,f,n+h,f,d-h,f-h,d,e+h,d,e,d-h,e,n+h];for(let g=m.length-1;g>=2;g-=2)m[g]===m[g-2]&&m[g-1]===m[g-3]&&m.splice(g-1,2);return this.poly(m,!0,u)}ellipse(e,n,i,a,l){return this.drawShape(new rm(e,n,i,a),l),this}roundRect(e,n,i,a,l,u){return this.drawShape(new im(e,n,i,a,l),u),this}drawShape(e,n){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:n}),this}startPoly(e,n){let i=this._currentPoly;return i&&this.endPoly(),i=new Oo,i.points.push(e,n),this._currentPoly=i,this}endPoly(e=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=e,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Oo,e)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let i=n.shape.x,a=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const l=n.transform,u=i;i=l.a*i+l.c*a+l.tx,a=l.b*u+l.d*a+l.ty}this._currentPoly.points.push(i,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<e.instructions.length;n++){const i=e.instructions[n];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const n=this.shapePrimitives;for(let i=0;i<n.length;i++){const a=n[i],l=a.shape.getBounds(aD);a.transform?e.addRect(l,a.transform):e.addRect(l)}return e}}class wr{constructor(e,n=!1){this.instructions=[],this.uid=ft("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof e=="string"?Mk(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new oD(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,n){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,n]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,n,i,a,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(jt.shared);let f=0,d=0;if(!u||u.action!=="bezierCurveTo")f=h.x,d=h.y;else{f=u.data[2],d=u.data[3];const m=h.x,g=h.y;f=m+(m-f),d=g+(g-d)}return this.instructions.push({action:"bezierCurveTo",data:[f,d,e,n,i,a,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,n,i){const a=this.instructions[this.instructions.length-1],l=this.getLastPoint(jt.shared);let u=0,h=0;if(!a||a.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=a.data[0],h=a.data[1];const f=l.x,d=l.y;u=f+(f-u),h=d+(d-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,n,i]}),this._dirty=!0,this}rect(e,n,i,a,l){return this.instructions.push({action:"rect",data:[e,n,i,a,l]}),this._dirty=!0,this}circle(e,n,i,a){return this.instructions.push({action:"circle",data:[e,n,i,a]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,n,i,a,l,u,h){l||(l=a/2);const f=-1*Math.PI/2+u,d=i*2,m=Math.PI*2/d,g=[];for(let v=0;v<d;v++){const b=v%2?l:a,w=v*m+f;g.push(e+b*Math.cos(w),n+b*Math.sin(w))}return this.poly(g,!0,h),this}clone(e=!1){const n=new wr;if(n.checkForHoles=this.checkForHoles,!e)n.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const a=this.instructions[i];n.instructions.push({action:a.action,data:a.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const n=e.a,i=e.b,a=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,d=0,m=0,g=0,v=0,b=0,w=0,A=0;for(let S=0;S<this.instructions.length;S++){const x=this.instructions[S],C=x.data;switch(x.action){case"moveTo":case"lineTo":f=C[0],d=C[1],C[0]=n*f+a*d+u,C[1]=i*f+l*d+h;break;case"bezierCurveTo":m=C[0],g=C[1],v=C[2],b=C[3],f=C[4],d=C[5],C[0]=n*m+a*g+u,C[1]=i*m+l*g+h,C[2]=n*v+a*b+u,C[3]=i*v+l*b+h,C[4]=n*f+a*d+u,C[5]=i*f+l*d+h;break;case"quadraticCurveTo":m=C[0],g=C[1],f=C[2],d=C[3],C[0]=n*m+a*g+u,C[1]=i*m+l*g+h,C[2]=n*f+a*d+u,C[3]=i*f+l*d+h;break;case"arcToSvg":f=C[5],d=C[6],w=C[0],A=C[1],C[0]=n*w+a*A,C[1]=i*w+l*A,C[5]=n*f+a*d+u,C[6]=i*f+l*d+h;break;case"circle":C[4]=uo(C[3],e);break;case"rect":C[4]=uo(C[4],e);break;case"ellipse":C[8]=uo(C[8],e);break;case"roundRect":C[5]=uo(C[5],e);break;case"addPath":C[0].transform(e);break;case"poly":C[2]=uo(C[2],e);break;default:dn("unknown transform action",x.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let n=this.instructions.length-1,i=this.instructions[n];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(n--,n<0)return e.x=0,e.y=0,e;i=this.instructions[n]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}}function uo(t,e){return t?t.prepend(e):e.clone()}function rt(t,e,n){const i=t.getAttribute(e);return i?Number(i):n}function lD(t,e){const n=t.querySelectorAll("defs");for(let i=0;i<n.length;i++){const a=n[i];for(let l=0;l<a.children.length;l++){const u=a.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=uD(u);break;case"radialgradient":e.defs[u.id]=cD();break}}}}function uD(t){const e=rt(t,"x1",0),n=rt(t,"y1",0),i=rt(t,"x2",1),a=rt(t,"y2",0),l=t.getAttribute("gradientUnits")||"objectBoundingBox",u=new dl(e,n,i,a,l==="objectBoundingBox"?"local":"global");for(let h=0;h<t.children.length;h++){const f=t.children[h],d=rt(f,"offset",0),m=Ve.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(d,m)}return u}function cD(t){return dn("[SVG Parser] Radial gradients are not yet supported"),new dl(0,0,1,0)}function ww(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const xw={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function u1(t,e){const n=t.getAttribute("style"),i={},a={},l={strokeStyle:i,fillStyle:a,useFill:!1,useStroke:!1};for(const u in xw){const h=t.getAttribute(u);h&&Sw(e,l,u,h.trim())}if(n){const u=n.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[d,m]=f.split(":");xw[d]&&Sw(e,l,d,m.trim())}}return{strokeStyle:l.useStroke?i:null,fillStyle:l.useFill?a:null,useFill:l.useFill,useStroke:l.useStroke}}function Sw(t,e,n,i){switch(n){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const a=ww(i);e.strokeStyle.fill=t.defs[a]}else e.strokeStyle.color=Ve.shared.setValue(i).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const a=ww(i);e.fillStyle.fill=t.defs[a]}else e.fillStyle.color=Ve.shared.setValue(i).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(i);break;case"stroke-opacity":e.strokeStyle.alpha=Number(i);break;case"opacity":e.fillStyle.alpha=Number(i),e.strokeStyle.alpha=Number(i);break}}function hD(t){if(t.length<=2)return!0;const e=t.map(h=>h.area).sort((h,f)=>f-h),[n,i]=e,a=e[e.length-1],l=n/i,u=i/a;return!(l>3&&u<2)}function fD(t){return t.split(/(?=[Mm])/).filter(i=>i.trim().length>0)}function dD(t){const e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const n=e.map(Number),i=[],a=[];for(let m=0;m<n.length;m+=2)m+1<n.length&&(i.push(n[m]),a.push(n[m+1]));if(i.length===0||a.length===0)return 0;const l=Math.min(...i),u=Math.max(...i),h=Math.min(...a),f=Math.max(...a);return(u-l)*(f-h)}function Aw(t,e){const n=new wr(t,!1);for(const i of n.instructions)e.instructions.push(i)}function pD(t,e){if(typeof t=="string"){const u=document.createElement("div");u.innerHTML=t.trim(),t=u.querySelector("svg")}const n={context:e,defs:{},path:new wr};lD(t,n);const i=t.children,{fillStyle:a,strokeStyle:l}=u1(t,n);for(let u=0;u<i.length;u++){const h=i[u];h.nodeName.toLowerCase()!=="defs"&&c1(h,n,a,l)}return e}function c1(t,e,n,i){const a=t.children,{fillStyle:l,strokeStyle:u}=u1(t,e);l&&n?n={...n,...l}:l&&(n=l),u&&i?i={...i,...u}:u&&(i=u);const h=!n&&!i;h&&(n={color:0});let f,d,m,g,v,b,w,A,S,x,C,T,E,D,O,M,k;switch(t.nodeName.toLowerCase()){case"path":{D=t.getAttribute("d");const j=t.getAttribute("fill-rule"),B=fD(D),N=j==="evenodd",H=B.length>1;if(N&&H){const ee=B.map(U=>({path:U,area:dD(U)}));if(ee.sort((U,L)=>L.area-U.area),B.length>3||!hD(ee))for(let U=0;U<ee.length;U++){const L=ee[U],te=U===0;e.context.beginPath();const ie=new wr(void 0,!0);Aw(L.path,ie),e.context.path(ie),te?(n&&e.context.fill(n),i&&e.context.stroke(i)):e.context.cut()}else for(let U=0;U<ee.length;U++){const L=ee[U],te=U%2===1;e.context.beginPath();const ie=new wr(void 0,!0);Aw(L.path,ie),e.context.path(ie),te?e.context.cut():(n&&e.context.fill(n),i&&e.context.stroke(i))}}else{const ee=j?j==="evenodd":!0;O=new wr(D,ee),e.context.path(O),n&&e.context.fill(n),i&&e.context.stroke(i)}break}case"circle":w=rt(t,"cx",0),A=rt(t,"cy",0),S=rt(t,"r",0),e.context.ellipse(w,A,S,S),n&&e.context.fill(n),i&&e.context.stroke(i);break;case"rect":f=rt(t,"x",0),d=rt(t,"y",0),M=rt(t,"width",0),k=rt(t,"height",0),x=rt(t,"rx",0),C=rt(t,"ry",0),x||C?e.context.roundRect(f,d,M,k,x||C):e.context.rect(f,d,M,k),n&&e.context.fill(n),i&&e.context.stroke(i);break;case"ellipse":w=rt(t,"cx",0),A=rt(t,"cy",0),x=rt(t,"rx",0),C=rt(t,"ry",0),e.context.beginPath(),e.context.ellipse(w,A,x,C),n&&e.context.fill(n),i&&e.context.stroke(i);break;case"line":m=rt(t,"x1",0),g=rt(t,"y1",0),v=rt(t,"x2",0),b=rt(t,"y2",0),e.context.beginPath(),e.context.moveTo(m,g),e.context.lineTo(v,b),i&&e.context.stroke(i);break;case"polygon":E=t.getAttribute("points"),T=E.match(/-?\d+/g).map(j=>parseInt(j,10)),e.context.poly(T,!0),n&&e.context.fill(n),i&&e.context.stroke(i);break;case"polyline":E=t.getAttribute("points"),T=E.match(/-?\d+/g).map(j=>parseInt(j,10)),e.context.poly(T,!1),i&&e.context.stroke(i);break;case"g":case"svg":break;default:{dn(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}h&&(n=null);for(let j=0;j<a.length;j++)c1(a[j],e,n,i)}const Tw={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class yD{constructor(e,n){this.uid=ft("fillPattern"),this._tick=0,this.transform=new De,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),n&&(e.source.style.addressModeU=Tw[n].addressModeU,e.source.style.addressModeV=Tw[n].addressModeV)}setTransform(e){const n=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}function mD(t){return Ve.isColorLike(t)}function Ew(t){return t instanceof yD}function Cw(t){return t instanceof dl}function gD(t){return t instanceof je}function bD(t,e,n){const i=Ve.shared.setValue(e??0);return t.color=i.toNumber(),t.alpha=i.alpha===1?n.alpha:i.alpha,t.texture=je.WHITE,{...n,...t}}function vD(t,e,n){return t.texture=e,{...n,...t}}function Rw(t,e,n){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...n,...t}}function Mw(t,e,n){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...n,...t}}function _D(t,e){const n={...e,...t},i=Ve.shared.setValue(n.color);return n.alpha*=i.alpha,n.color=i.toNumber(),n}function xo(t,e){if(t==null)return null;const n={},i=t;return mD(t)?bD(n,t,e):gD(t)?vD(n,t,e):Ew(t)?Rw(n,t,e):Cw(t)?Mw(n,t,e):i.fill&&Ew(i.fill)?Rw(i,i.fill,e):i.fill&&Cw(i.fill)?Mw(i,i.fill,e):_D(i,e)}function kw(t,e){const{width:n,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...f}=e,d=xo(t,f);return d?{width:n,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...d}:null}const wD=new jt,Ow=new De,um=class Xn extends si{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=ft("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new wr,this._transform=new De,this._fillStyle={...Xn.defaultFillStyle},this._strokeStyle={...Xn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new qn,this._boundsDirty=!0}clone(){const e=new Xn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=xo(e,Xn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=kw(e,Xn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=xo(e,Xn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=xo(e,Xn.defaultStrokeStyle),this}texture(e,n,i,a,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:a||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n||n===0?Ve.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new wr,this}fill(e,n){let i;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a?.action==="stroke"?i=a.data.path:i=this._activePath.clone(),i?(e!=null&&(n!==void 0&&typeof e=="number"&&(Ke(zt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:n}),this._fillStyle=xo(e,Xn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:n}=this._activePath.getLastPoint(jt.shared);this._activePath.clear(),this._activePath.moveTo(e,n)}stroke(e){let n;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i?.action==="fill"?n=i.data.path:n=this._activePath.clone(),n?(e!=null&&(this._strokeStyle=kw(e,Xn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const n=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(i);else{n.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,n,i,a,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*n+h.tx,h.b*e+h.d*n+h.ty,i,a,l,u),this}arcTo(e,n,i,a,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*n+u.tx,u.b*e+u.d*n+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}arcToSvg(e,n,i,a,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,n,i,a,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,n,i,a,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*n+f.tx,f.b*e+f.d*n+f.ty,f.a*i+f.c*a+f.tx,f.b*i+f.d*a+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,n,i,a){return this._tick++,this._activePath.ellipse(e,n,i,a,this._transform.clone()),this}circle(e,n,i){return this._tick++,this._activePath.circle(e,n,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,n){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*n+i.tx,i.b*e+i.d*n+i.ty),this}moveTo(e,n){this._tick++;const i=this._transform,a=this._activePath.instructions,l=i.a*e+i.c*n+i.tx,u=i.b*e+i.d*n+i.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=l,a[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,n,i,a,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*n+u.tx,u.b*e+u.d*n+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}rect(e,n,i,a){return this._tick++,this._activePath.rect(e,n,i,a,this._transform.clone()),this}roundRect(e,n,i,a,l){return this._tick++,this._activePath.roundRect(e,n,i,a,l,this._transform.clone()),this}poly(e,n){return this._tick++,this._activePath.poly(e,n,this._transform.clone()),this}regularPoly(e,n,i,a,l=0,u){return this._tick++,this._activePath.regularPoly(e,n,i,a,l,u),this}roundPoly(e,n,i,a,l,u){return this._tick++,this._activePath.roundPoly(e,n,i,a,l,u),this}roundShape(e,n,i,a){return this._tick++,this._activePath.roundShape(e,n,i,a),this}filletRect(e,n,i,a,l){return this._tick++,this._activePath.filletRect(e,n,i,a,l),this}chamferRect(e,n,i,a,l,u){return this._tick++,this._activePath.chamferRect(e,n,i,a,l,u),this}star(e,n,i,a,l=0,u=0){return this._tick++,this._activePath.star(e,n,i,a,l,u,this._transform.clone()),this}svg(e){return this._tick++,pD(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,n=e){return this._transform.scale(e,n),this}setTransform(e,n,i,a,l,u){return e instanceof De?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,n,i,a,l,u),this)}transform(e,n,i,a,l,u){return e instanceof De?(this._transform.append(e),this):(Ow.set(e,n,i,a,l,u),this._transform.append(Ow),this)}translate(e,n=e){return this._transform.translate(e,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let n=0;n<this.instructions.length;n++){const i=this.instructions[n],a=i.action;if(a==="fill"){const l=i.data;e.addBounds(l.path.bounds)}else if(a==="texture"){const l=i.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(a==="stroke"){const l=i.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const n=this.instructions;let i=!1;for(let a=0;a<n.length;a++){const l=n[a],u=l.data,h=u.path;if(!l.action||!h)continue;const f=u.style,d=h.shapePath.shapePrimitives;for(let m=0;m<d.length;m++){const g=d[m].shape;if(!f||!g)continue;const v=d[m].transform,b=v?v.applyInverse(e,wD):e;if(l.action==="fill")i=g.contains(b.x,b.y);else{const A=f;i=g.strokeContains(b.x,b.y,A.width,A.alignment)}const w=u.hole;if(w){const A=w.shapePath?.shapePrimitives;if(A)for(let S=0;S<A.length;S++)A[S].shape.contains(b.x,b.y)&&(i=!1)}if(i)return!0}}return i}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const i=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(i)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(i))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};um.defaultFillStyle={color:16777215,alpha:1,texture:je.WHITE,matrix:null,fill:null,textureSpace:"local"};um.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:je.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let co=um;var xD=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;class SD{constructor(){this.isBatchable=!1}reset(){this.isBatchable=!1,this.context=null,this.graphicsData&&(this.graphicsData.destroy(),this.graphicsData=null)}destroy(){this.reset()}}class AD{constructor(){this.instructions=new Jy}init(){this.instructions.reset()}destroy(){this.instructions.destroy(),this.instructions=null}}const cm=class oy{constructor(e){this._renderer=e,this._managedContexts=new Jc({renderer:e,type:"resource",name:"graphicsContext"})}init(e){oy.defaultOptions.bezierSmoothness=e?.bezierSmoothness??oy.defaultOptions.bezierSmoothness}getContextRenderData(e){return this.getGpuContext(e).graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const n=e._gpuData,i=!!n[this._renderer.uid],a=n[this._renderer.uid]||this._initContext(e);return(e.dirty||!i)&&(i&&a.reset(),a.isBatchable=!1,e.dirty=!1),a}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const n=new AD,i=this.getGpuContext(e);return i.graphicsData=n,n.init(),n}_initContext(e){const n=new SD;return n.context=e,e._gpuData[this._renderer.uid]=n,this._managedContexts.add(e),n}destroy(){this._managedContexts.destroy(),this._renderer=null}};cm.extension={type:[Fe.CanvasSystem],name:"graphicsContext"};cm.defaultOptions={bezierSmoothness:.5};let TD=cm;class h1{constructor(e,n){this.state=tm.for2d(),this.renderer=e,this._adaptor=n,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Jc({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){return!1}addRenderable(e,n){this._managedGraphics.add(e),this.renderer.renderPipes.batch.break(n),n.add(e)}updateRenderable(e){}execute(e){e.isRenderable&&this._adaptor.execute(this,e)}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null}}h1.extension={type:[Fe.CanvasPipes],name:"graphics"};function ED(t,e,n){const i=(t>>24&255)/255;e[n++]=(t&255)/255*i,e[n++]=(t>>8&255)/255*i,e[n++]=(t>>16&255)/255*i,e[n++]=i}class CD{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{Wt.return(e)}),this.batches.length=0}}class f1{constructor(e,n){this.state=tm.for2d(),this.renderer=e,this._adaptor=n,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Jc({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const n=e.context,i=!!e._gpuData,l=this.renderer.graphicsContext.updateGpuContext(n);return!!(l.isBatchable||i!==l.isBatchable)}addRenderable(e,n){const a=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),a.isBatchable?this._addToBatcher(e,n):(this.renderer.renderPipes.batch.break(n),n.add(e))}updateRenderable(e){const i=this._getGpuDataForRenderable(e).batches;for(let a=0;a<i.length;a++){const l=i[a];l._batcher.updateElement(l)}}execute(e){if(!e.isRenderable)return;const n=this.renderer,i=e.context;if(!n.graphicsContext.getGpuContext(i).batches.length)return;const l=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const u=l.resources.localUniforms.uniforms;u.uTransformMatrix=e.groupTransform,u.uRound=n._roundPixels|e._roundPixels,ED(e.groupColorAlpha,u.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const n=this._getGpuDataForRenderable(e),a=this.renderer.graphicsContext.updateGpuContext(e.context);n.destroy(),a.isBatchable&&this._updateBatchesForRenderable(e,n)}_addToBatcher(e,n){const i=this.renderer.renderPipes.batch,a=this._getGpuDataForRenderable(e).batches;for(let l=0;l<a.length;l++){const u=a[l];i.addToBatch(u,n)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const n=new CD;return e._gpuData[this.renderer.uid]=n,this._managedGraphics.add(e),n}_updateBatchesForRenderable(e,n){const i=e.context,l=this.renderer.graphicsContext.getGpuContext(i),u=this.renderer._roundPixels|e._roundPixels;n.batches=l.batches.map(h=>{const f=Wt.get(sm);return h.copyTo(f),f.renderable=e,f.roundPixels=u,f})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}f1.extension={type:[Fe.WebGLPipes,Fe.WebGPUPipes],name:"graphics"};yn.add(h1);yn.add(f1);yn.add(TD);yn.add(lm);class Pc extends xS{constructor(e){e instanceof co&&(e={context:e});const{context:n,roundPixels:i,...a}=e||{};super({label:"Graphics",...a}),this.renderPipeId="graphics",n?this.context=n:(this.context=this._ownedContext=new co,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,n){return this.context[e](...n),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Pc(this._context.clone()):(this._ownedContext=null,new Pc(this._context))}lineStyle(e,n,i){Ke(zt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const a={};return e&&(a.width=e),n&&(a.color=n),i&&(a.alpha=i),this.context.strokeStyle=a,this}beginFill(e,n){Ke(zt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return e!==void 0&&(i.color=e),n!==void 0&&(i.alpha=n),this.context.fillStyle=i,this}endFill(){Ke(zt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==co.defaultStrokeStyle.width||e.color!==co.defaultStrokeStyle.color||e.alpha!==co.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Ke(zt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Ke(zt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Ke(zt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Ke(zt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Ke(zt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Ke(zt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class th extends je{static create(e){const{dynamic:n,...i}=e;return new th({source:new Dn(i),dynamic:n??!1})}resize(e,n,i){return this.source.resize(e,n,i),this}}yn.add(BR,NR);const hj=["yellow","cyan","green","magenta","white"],hm=25,fj=1e3/hm,fm={amigaHiResPal:{name:"Amiga Hi-Res PAL",size:{x:640,y:512}},classicMac:{name:"Classic Mac",size:{x:512,y:384}},amigaLowResPal:{name:"Amiga Lo-Res PAL",size:{x:320,y:256}},zxSpectrum:{name:"ZX Spectrum",size:{x:256,y:192}},handheld:{name:"Handheld",size:{x:256,y:141}}},RD=Object.keys(fm),MD={red:new Ve("#f00"),green:new Ve("#0f0"),blue:new Ve("#00f"),cyan:new Ve("#0ff"),magenta:new Ve("#f0f"),yellow:new Ve("#ff0"),black:new Ve("#000"),white:new Ve("#fff")},kD={red:new Ve("#B00"),green:new Ve("#0B0"),blue:new Ve("#00B"),cyan:new Ve("#0BB"),magenta:new Ve("#B0B"),yellow:new Ve("#BB0"),black:new Ve("#000"),white:new Ve("#BBB")},dj="1987-06-01T00:00:00Z";function pj(t,e){const{hue:n,shade:i}=typeof t=="object"?t:{hue:t,shade:e??"basic"};return(i==="dimmed"?kD:MD)[n]}const xr=()=>{if(typeof globalThis.window>"u")return"server";const t=Xs().get("device");if(t!==null)return t;const e=navigator.userAgent;return navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||/iPad|Tablet|Android(?!.*Mobi)/i.test(e)?"tablet":/Mobi|Android|iPhone|iPod/i.test(e)?"mobile":"desktop"},yj=[],d1=new Set,dm=new Map;d1.add=()=>{throw new Error("emptySet.add")};d1.clear=()=>{throw new Error("emptySet.clear")};dm.set=()=>{throw new Error("emptyMap.set")};dm.clear=()=>{throw new Error("emptyMap.clear")};dm.delete=()=>{throw new Error("emptyMap.delete")};const kn=Object.freeze({}),zc=(t,e)=>e.split(".").reduce((n,i)=>n[i],t),OD=(t,e,n)=>{const i=e.split(".");let a=t;for(let l=0;l<i.length-1;l++){const u=i[l];a=a[u]}a[i[i.length-1]]=n},sc=(t,e)=>{const n=t.indexOf(e);return t[(n+1)%t.length]},DD=(t,...e)=>{const n={};for(const i of e)n[i]=t[i];return n},mj=(t,...e)=>{const n={...t};for(const i of e)delete n[i];return n},Yo={inputAssignment:Gp.Default.inputAssignment,infiniteLivesPoke:!1,infiniteDoughnutsPoke:!1,displaySettings:{showBoundingBoxes:"none",showShadowMasks:!1,crtFilter:!1,uncolourised:!1,emulatedResolution:xr()==="mobile"?"handheld":"zxSpectrum"},gameSpeed:1.2,showFps:!1,onScreenControls:xr()==="mobile"||xr()==="tablet",inputDirectionMode:"8-way",directionsRelativeTo:"mixed",soundSettings:{mute:!1,noRoomEntryTunes:!0,noFootsteps:!1}},UD=["world","screen","mixed"],PD={displaySettings:{},soundSettings:navigator.webdriver?{mute:!0}:{}};var bp,Dw;function zD(){if(Dw)return bp;Dw=1;function t(i){if(Array.isArray(i))return!0;var a=i.length;return typeof a=="number"&&a>-1?a?0 in i&&a-1 in i:!0:!1}function e(i){var a=typeof i;return a==="object"?i===null?"null":t(i)?"array":i.constructor===Object?"pure-object":"object":a}function n(i,a){if(i===a||i!==i&&a!==a)return!0;var l=e(i),u=e(a);if(l!==u)return!1;if(l==="pure-object"){if(i===a)return!0;var h=Object.keys(i),f=Object.keys(a).length;if(h.length!==f)return!1;for(var d=0,m=h.length;d<m;d++){var g=h[d];if(!a.hasOwnProperty(h[d]))return!1;var v=i[g],b=a[g];if(v===i||b===a||v===a||b===i)return v===b;if(!n(v,b))return!1}return!0}else if(l==="array"){if(i.length===a.length)for(var w=0;w<i.length;w++){var A=i[w],S=a[w];if(A===i||S===a||A===a||S===i)return A===S;if(!n(A,S))return!1}else return!1;return!0}else if(l==="object"){if(i.valueOf!==Object.prototype.valueOf()&&a.valueOf!==Object.prototype.valueOf())return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString()&&a.toString!==Object.prototype.toString())return i.toString()===a.toString()}return!1}return bp=n,bp}var jD=zD();const gj=Ar(jD),bj=Rx.withTypes(),pm=Mx.withTypes();Ry.withTypes();var p1=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(p1||{});function Uw(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var Pw=ri;function y1(t,e){if(t===e||!(Pw(t)&&Pw(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),i=Object.keys(t);let a=n.length===i.length;const l=Array.isArray(e)?[]:{};for(const u of n)l[u]=y1(t[u],e[u]),a&&(a=t[u]===l[u]);return a?t:l}function Qs(t){let e=0;for(const n in t)e++;return e}var zw=t=>[].concat(...t);function BD(t){return new RegExp("(^|:)//").test(t)}function ND(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function jc(t){return t!=null}function ID(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var LD=t=>t.replace(/\/$/,""),qD=t=>t.replace(/^\//,"");function GD(t,e){if(!t)return e;if(!e)return t;if(BD(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=LD(t),e=qD(e),`${t}${n}${e}`}function $D(t,e,n){return t.has(e)?t.get(e):t.set(e,n).get(e)}var jw=(...t)=>fetch(...t),HD=t=>t.status>=200&&t.status<=299,VD=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function Bw(t){if(!ri(t))return t;const e={...t};for(const[n,i]of Object.entries(e))i===void 0&&delete e[n];return e}function FD({baseUrl:t,prepareHeaders:e=g=>g,fetchFn:n=jw,paramsSerializer:i,isJsonContentType:a=VD,jsonContentType:l="application/json",jsonReplacer:u,timeout:h,responseHandler:f,validateStatus:d,...m}={}){return typeof fetch>"u"&&n===jw&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(v,b,w)=>{const{getState:A,extra:S,endpoint:x,forced:C,type:T}=b;let E,{url:D,headers:O=new Headers(m.headers),params:M=void 0,responseHandler:k=f??"json",validateStatus:j=d??HD,timeout:B=h,...N}=typeof v=="string"?{url:v}:v,H,J=b.signal;B&&(H=new AbortController,b.signal.addEventListener("abort",H.abort),J=H.signal);let ee={...m,signal:J,...N};O=new Headers(Bw(O)),ee.headers=await e(O,{getState:A,arg:v,extra:S,endpoint:x,forced:C,type:T,extraOptions:w})||O;const ae=Z=>typeof Z=="object"&&(ri(Z)||Array.isArray(Z)||typeof Z.toJSON=="function");if(!ee.headers.has("content-type")&&ae(ee.body)&&ee.headers.set("content-type",l),ae(ee.body)&&a(ee.headers)&&(ee.body=JSON.stringify(ee.body,u)),M){const Z=~D.indexOf("?")?"&":"?",se=i?i(M):new URLSearchParams(Bw(M));D+=Z+se}D=GD(t,D);const U=new Request(D,ee);E={request:new Request(D,ee)};let te,ie=!1,ue=H&&setTimeout(()=>{ie=!0,H.abort()},B);try{te=await n(U)}catch(Z){return{error:{status:ie?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Z)},meta:E}}finally{ue&&clearTimeout(ue),H?.signal.removeEventListener("abort",H.abort)}const z=te.clone();E.response=z;let F,W="";try{let Z;if(await Promise.all([g(te,k).then(se=>F=se,se=>Z=se),z.text().then(se=>W=se,()=>{})]),Z)throw Z}catch(Z){return{error:{status:"PARSING_ERROR",originalStatus:te.status,data:W,error:String(Z)},meta:E}}return j(te,F)?{data:F,meta:E}:{error:{status:te.status,data:F},meta:E}};async function g(v,b){if(typeof b=="function")return b(v);if(b==="content-type"&&(b=a(v.headers)?"json":"text"),b==="json"){const w=await v.text();return w.length?JSON.parse(w):null}return v.text()}}var Nw=class{constructor(t,e=void 0){this.value=t,this.meta=e}},ym=qt("__rtkq/focused"),m1=qt("__rtkq/unfocused"),mm=qt("__rtkq/online"),g1=qt("__rtkq/offline");function gm(t){return t.type==="query"}function YD(t){return t.type==="mutation"}function bm(t){return t.type==="infinitequery"}function vm(t,e,n,i,a,l){return XD(t)?t(e,n,i,a).filter(jc).map(ly).map(l):Array.isArray(t)?t.map(ly).map(l):[]}function XD(t){return typeof t=="function"}function ly(t){return typeof t=="string"?{type:t}:t}function QD(t,e){return t.catch(e)}var Xo=Symbol("forceQueryFn"),uy=t=>typeof t[Xo]=="function";function KD({serializeQueryArgs:t,queryThunk:e,infiniteQueryThunk:n,mutationThunk:i,api:a,context:l}){const u=new Map,h=new Map,{unsubscribeQueryResult:f,removeMutationResult:d,updateSubscriptionOptions:m}=a.internalActions;return{buildInitiateQuery:S,buildInitiateInfiniteQuery:x,buildInitiateMutation:C,getRunningQueryThunk:g,getRunningMutationThunk:v,getRunningQueriesThunk:b,getRunningMutationsThunk:w};function g(T,E){return D=>{const O=l.endpointDefinitions[T],M=t({queryArgs:E,endpointDefinition:O,endpointName:T});return u.get(D)?.[M]}}function v(T,E){return D=>h.get(D)?.[E]}function b(){return T=>Object.values(u.get(T)||{}).filter(jc)}function w(){return T=>Object.values(h.get(T)||{}).filter(jc)}function A(T,E){const D=(O,{subscribe:M=!0,forceRefetch:k,subscriptionOptions:j,[Xo]:B,...N}={})=>(H,J)=>{const ee=t({queryArgs:O,endpointDefinition:E,endpointName:T});let ae;const U={...N,type:"query",subscribe:M,forceRefetch:k,subscriptionOptions:j,endpointName:T,originalArgs:O,queryCacheKey:ee,[Xo]:B};if(gm(E))ae=e(U);else{const{direction:oe,initialPageParam:ge}=N;ae=n({...U,direction:oe,initialPageParam:ge})}const L=a.endpoints[T].select(O),te=H(ae),ie=L(J()),{requestId:ue,abort:z}=te,F=ie.requestId!==ue,W=u.get(H)?.[ee],Z=()=>L(J()),se=Object.assign(B?te.then(Z):F&&!W?Promise.resolve(ie):Promise.all([W,te]).then(Z),{arg:O,requestId:ue,subscriptionOptions:j,queryCacheKey:ee,abort:z,async unwrap(){const oe=await se;if(oe.isError)throw oe.error;return oe.data},refetch:()=>H(D(O,{subscribe:!1,forceRefetch:!0})),unsubscribe(){M&&H(f({queryCacheKey:ee,requestId:ue}))},updateSubscriptionOptions(oe){se.subscriptionOptions=oe,H(m({endpointName:T,requestId:ue,queryCacheKey:ee,options:oe}))}});if(!W&&!F&&!B){const oe=$D(u,H,{});oe[ee]=se,se.then(()=>{delete oe[ee],Qs(oe)||u.delete(H)})}return se};return D}function S(T,E){return A(T,E)}function x(T,E){return A(T,E)}function C(T){return(E,{track:D=!0,fixedCacheKey:O}={})=>(M,k)=>{const j=i({type:"mutation",endpointName:T,originalArgs:E,track:D,fixedCacheKey:O}),B=M(j),{requestId:N,abort:H,unwrap:J}=B,ee=QD(B.unwrap().then(te=>({data:te})),te=>({error:te})),ae=()=>{M(d({requestId:N,fixedCacheKey:O}))},U=Object.assign(ee,{arg:B.arg,requestId:N,abort:H,unwrap:J,reset:ae}),L=h.get(M)||{};return h.set(M,L),L[N]=U,U.then(()=>{delete L[N],Qs(L)||h.delete(M)}),O&&(L[O]=U,U.then(()=>{L[O]===U&&(delete L[O],Qs(L)||h.delete(M))})),U}}}function WD(t){return t}var ac=(t={})=>({...t,[Hc]:!0});function ZD({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:i,api:a,assertTagType:l,selectors:u}){const h=(k,j,B,N)=>(H,J)=>{const ee=n[k],ae=i({queryArgs:j,endpointDefinition:ee,endpointName:k});if(H(a.internalActions.queryResultPatched({queryCacheKey:ae,patches:B})),!N)return;const U=a.endpoints[k].select(j)(J()),L=vm(ee.providesTags,U.data,void 0,j,{},l);H(a.internalActions.updateProvidedBy({queryCacheKey:ae,providedTags:L}))};function f(k,j,B=0){const N=[j,...k];return B&&N.length>B?N.slice(0,-1):N}function d(k,j,B=0){const N=[...k,j];return B&&N.length>B?N.slice(1):N}const m=(k,j,B,N=!0)=>(H,J)=>{const ae=a.endpoints[k].select(j)(J()),U={patches:[],inversePatches:[],undo:()=>H(a.util.patchQueryData(k,j,U.inversePatches,N))};if(ae.status==="uninitialized")return U;let L;if("data"in ae)if(Ln(ae.data)){const[te,ie,ue]=zx(ae.data,B);U.patches.push(...ie),U.inversePatches.push(...ue),L=te}else L=B(ae.data),U.patches.push({op:"replace",path:[],value:L}),U.inversePatches.push({op:"replace",path:[],value:ae.data});return U.patches.length===0||H(a.util.patchQueryData(k,j,U.patches,N)),U},g=(k,j,B)=>N=>N(a.endpoints[k].initiate(j,{subscribe:!1,forceRefetch:!0,[Xo]:()=>({data:B})})),v=(k,j)=>k.query&&k[j]?k[j]:WD,b=async(k,{signal:j,abort:B,rejectWithValue:N,fulfillWithValue:H,dispatch:J,getState:ee,extra:ae})=>{const U=n[k.endpointName];try{let L=v(U,"transformResponse");const te={signal:j,abort:B,dispatch:J,getState:ee,extra:ae,endpoint:k.endpointName,type:k.type,forced:k.type==="query"?w(k,ee()):void 0,queryCacheKey:k.type==="query"?k.queryCacheKey:void 0},ie=k.type==="query"?k[Xo]:void 0;let ue;const z=async(W,Z,se,oe)=>{if(Z==null&&W.pages.length)return Promise.resolve({data:W});const ge={queryArg:k.originalArgs,pageParam:Z},Je=await F(ge),Oe=oe?f:d;return{data:{pages:Oe(W.pages,Je.data,se),pageParams:Oe(W.pageParams,Z,se)}}};async function F(W){let Z;const{extraOptions:se}=U;if(ie?Z=ie():U.query?Z=await e(U.query(W),te,se):Z=await U.queryFn(W,te,se,ge=>e(ge,te,se)),typeof process<"u",Z.error)throw new Nw(Z.error,Z.meta);const oe=await L(Z.data,Z.meta,W);return{...Z,data:oe}}if(k.type==="query"&&"infiniteQueryOptions"in U){const{infiniteQueryOptions:W}=U,{maxPages:Z=1/0}=W;let se;const oe={pages:[],pageParams:[]},ge=u.selectQueryEntry(ee(),k.queryCacheKey)?.data,Oe=w(k,ee())&&!k.direction||!ge?oe:ge;if("direction"in k&&k.direction&&Oe.pages.length){const Bt=k.direction==="backward",Nt=(Bt?b1:cy)(W,Oe);se=await z(Oe,Nt,Z,Bt)}else{const{initialPageParam:Bt=W.initialPageParam}=k,mn=ge?.pageParams??[],Nt=mn[0]??Bt,gn=mn.length;se=await z(Oe,Nt,Z),ie&&(se={data:se.data.pages[0]});for(let yt=1;yt<gn;yt++){const Zt=cy(W,se.data);se=await z(se.data,Zt,Z)}}ue=se}else ue=await F(k.originalArgs);return H(ue.data,ac({fulfilledTimeStamp:Date.now(),baseQueryMeta:ue.meta}))}catch(L){let te=L;if(te instanceof Nw){let ie=v(U,"transformErrorResponse");try{return N(await ie(te.value,te.meta,k.originalArgs),ac({baseQueryMeta:te.meta}))}catch(ue){te=ue}}throw console.error(te),te}};function w(k,j){const B=u.selectQueryEntry(j,k.queryCacheKey),N=u.selectConfig(j).refetchOnMountOrArgChange,H=B?.fulfilledTimeStamp,J=k.forceRefetch??(k.subscribe&&N);return J?J===!0||(Number(new Date)-Number(H))/1e3>=J:!1}const A=()=>Kv(`${t}/executeQuery`,b,{getPendingMeta({arg:j}){const B=n[j.endpointName];return ac({startedTimeStamp:Date.now(),...bm(B)?{direction:j.direction}:{}})},condition(j,{getState:B}){const N=B(),H=u.selectQueryEntry(N,j.queryCacheKey),J=H?.fulfilledTimeStamp,ee=j.originalArgs,ae=H?.originalArgs,U=n[j.endpointName],L=j.direction;return uy(j)?!0:H?.status==="pending"?!1:w(j,N)||gm(U)&&U?.forceRefetch?.({currentArg:ee,previousArg:ae,endpointState:H,state:N})?!0:!(J&&!L)},dispatchConditionRejection:!0}),S=A(),x=A(),C=Kv(`${t}/executeMutation`,b,{getPendingMeta(){return ac({startedTimeStamp:Date.now()})}}),T=k=>"force"in k,E=k=>"ifOlderThan"in k,D=(k,j,B)=>(N,H)=>{const J=T(B)&&B.force,ee=E(B)&&B.ifOlderThan,ae=(L=!0)=>{const te={forceRefetch:L,isPrefetch:!0};return a.endpoints[k].initiate(j,te)},U=a.endpoints[k].select(j)(H());if(J)N(ae());else if(ee){const L=U?.fulfilledTimeStamp;if(!L){N(ae());return}(Number(new Date)-Number(new Date(L)))/1e3>=ee&&N(ae())}else N(ae(!1))};function O(k){return j=>j?.meta?.arg?.endpointName===k}function M(k,j){return{matchPending:Ro(jy(k),O(j)),matchFulfilled:Ro(ii(k),O(j)),matchRejected:Ro(Ws(k),O(j))}}return{queryThunk:S,mutationThunk:C,infiniteQueryThunk:x,prefetch:D,updateQueryData:m,upsertQueryData:g,patchQueryData:h,buildMatchThunkActions:M}}function cy(t,{pages:e,pageParams:n}){const i=e.length-1;return t.getNextPageParam(e[i],e,n[i],n)}function b1(t,{pages:e,pageParams:n}){return t.getPreviousPageParam?.(e[0],e,n[0],n)}function v1(t,e,n,i){return vm(n[t.meta.arg.endpointName][e],ii(t)?t.payload:void 0,Fc(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,i)}function oc(t,e,n){const i=t[e];i&&n(i)}function Qo(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function Iw(t,e,n){const i=t[Qo(e)];i&&n(i)}var ho={};function JD({reducerPath:t,queryThunk:e,mutationThunk:n,serializeQueryArgs:i,context:{endpointDefinitions:a,apiUid:l,extractRehydrationInfo:u,hasRehydrationInfo:h},assertTagType:f,config:d}){const m=qt(`${t}/resetApiState`);function g(M,k,j,B){M[k.queryCacheKey]??={status:"uninitialized",endpointName:k.endpointName},oc(M,k.queryCacheKey,N=>{N.status="pending",N.requestId=j&&N.requestId?N.requestId:B.requestId,k.originalArgs!==void 0&&(N.originalArgs=k.originalArgs),N.startedTimeStamp=B.startedTimeStamp;const H=a[B.arg.endpointName];bm(H)&&"direction"in k&&(N.direction=k.direction)})}function v(M,k,j,B){oc(M,k.arg.queryCacheKey,N=>{if(N.requestId!==k.requestId&&!B)return;const{merge:H}=a[k.arg.endpointName];if(N.status="fulfilled",H)if(N.data!==void 0){const{fulfilledTimeStamp:J,arg:ee,baseQueryMeta:ae,requestId:U}=k;let L=ol(N.data,te=>H(te,j,{arg:ee.originalArgs,baseQueryMeta:ae,fulfilledTimeStamp:J,requestId:U}));N.data=L}else N.data=j;else N.data=a[k.arg.endpointName].structuralSharing??!0?y1(Qn(N.data)?iC(N.data):N.data,j):j;delete N.error,N.fulfilledTimeStamp=k.fulfilledTimeStamp})}const b=br({name:`${t}/queries`,initialState:ho,reducers:{removeQueryResult:{reducer(M,{payload:{queryCacheKey:k}}){delete M[k]},prepare:eo()},cacheEntriesUpserted:{reducer(M,k){for(const j of k.payload){const{queryDescription:B,value:N}=j;g(M,B,!0,{arg:B,requestId:k.meta.requestId,startedTimeStamp:k.meta.timestamp}),v(M,{arg:B,requestId:k.meta.requestId,fulfilledTimeStamp:k.meta.timestamp,baseQueryMeta:{}},N,!0)}},prepare:M=>({payload:M.map(B=>{const{endpointName:N,arg:H,value:J}=B,ee=a[N];return{queryDescription:{type:"query",endpointName:N,originalArgs:B.arg,queryCacheKey:i({queryArgs:H,endpointDefinition:ee,endpointName:N})},value:J}}),meta:{[Hc]:!0,requestId:ul(),timestamp:Date.now()}})},queryResultPatched:{reducer(M,{payload:{queryCacheKey:k,patches:j}}){oc(M,k,B=>{B.data=$v(B.data,j.concat())})},prepare:eo()}},extraReducers(M){M.addCase(e.pending,(k,{meta:j,meta:{arg:B}})=>{const N=uy(B);g(k,B,N,j)}).addCase(e.fulfilled,(k,{meta:j,payload:B})=>{const N=uy(j.arg);v(k,j,B,N)}).addCase(e.rejected,(k,{meta:{condition:j,arg:B,requestId:N},error:H,payload:J})=>{oc(k,B.queryCacheKey,ee=>{if(!j){if(ee.requestId!==N)return;ee.status="rejected",ee.error=J??H}})}).addMatcher(h,(k,j)=>{const{queries:B}=u(j);for(const[N,H]of Object.entries(B))(H?.status==="fulfilled"||H?.status==="rejected")&&(k[N]=H)})}}),w=br({name:`${t}/mutations`,initialState:ho,reducers:{removeMutationResult:{reducer(M,{payload:k}){const j=Qo(k);j in M&&delete M[j]},prepare:eo()}},extraReducers(M){M.addCase(n.pending,(k,{meta:j,meta:{requestId:B,arg:N,startedTimeStamp:H}})=>{N.track&&(k[Qo(j)]={requestId:B,status:"pending",endpointName:N.endpointName,startedTimeStamp:H})}).addCase(n.fulfilled,(k,{payload:j,meta:B})=>{B.arg.track&&Iw(k,B,N=>{N.requestId===B.requestId&&(N.status="fulfilled",N.data=j,N.fulfilledTimeStamp=B.fulfilledTimeStamp)})}).addCase(n.rejected,(k,{payload:j,error:B,meta:N})=>{N.arg.track&&Iw(k,N,H=>{H.requestId===N.requestId&&(H.status="rejected",H.error=j??B)})}).addMatcher(h,(k,j)=>{const{mutations:B}=u(j);for(const[N,H]of Object.entries(B))(H?.status==="fulfilled"||H?.status==="rejected")&&N!==H?.requestId&&(k[N]=H)})}}),A=br({name:`${t}/invalidation`,initialState:ho,reducers:{updateProvidedBy:{reducer(M,k){const{queryCacheKey:j,providedTags:B}=k.payload;for(const N of Object.values(M))for(const H of Object.values(N)){const J=H.indexOf(j);J!==-1&&H.splice(J,1)}for(const{type:N,id:H}of B){const J=(M[N]??={})[H||"__internal_without_id"]??=[];J.includes(j)||J.push(j)}},prepare:eo()}},extraReducers(M){M.addCase(b.actions.removeQueryResult,(k,{payload:{queryCacheKey:j}})=>{for(const B of Object.values(k))for(const N of Object.values(B)){const H=N.indexOf(j);H!==-1&&N.splice(H,1)}}).addMatcher(h,(k,j)=>{const{provided:B}=u(j);for(const[N,H]of Object.entries(B))for(const[J,ee]of Object.entries(H)){const ae=(k[N]??={})[J||"__internal_without_id"]??=[];for(const U of ee)ae.includes(U)||ae.push(U)}}).addMatcher(Sr(ii(e),Fc(e)),(k,j)=>{S(k,j)}).addMatcher(b.actions.cacheEntriesUpserted.match,(k,j)=>{for(const{queryDescription:B,value:N}of j.payload)S(k,{type:"UNKNOWN",payload:N,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:B}})})}});function S(M,k){const j=v1(k,"providesTags",a,f),{queryCacheKey:B}=k.meta.arg;A.caseReducers.updateProvidedBy(M,A.actions.updateProvidedBy({queryCacheKey:B,providedTags:j}))}const x=br({name:`${t}/subscriptions`,initialState:ho,reducers:{updateSubscriptionOptions(M,k){},unsubscribeQueryResult(M,k){},internal_getRTKQSubscriptions(){}}}),C=br({name:`${t}/internalSubscriptions`,initialState:ho,reducers:{subscriptionsUpdated:{reducer(M,k){return $v(M,k.payload)},prepare:eo()}}}),T=br({name:`${t}/config`,initialState:{online:ID(),focused:ND(),middlewareRegistered:!1,...d},reducers:{middlewareRegistered(M,{payload:k}){M.middlewareRegistered=M.middlewareRegistered==="conflict"||l!==k?"conflict":!0}},extraReducers:M=>{M.addCase(mm,k=>{k.online=!0}).addCase(g1,k=>{k.online=!1}).addCase(ym,k=>{k.focused=!0}).addCase(m1,k=>{k.focused=!1}).addMatcher(h,k=>({...k}))}}),E=ky({queries:b.reducer,mutations:w.reducer,provided:A.reducer,subscriptions:C.reducer,config:T.reducer}),D=(M,k)=>E(m.match(k)?void 0:M,k),O={...T.actions,...b.actions,...x.actions,...C.actions,...w.actions,...A.actions,resetApiState:m};return{reducer:D,actions:O}}var vr=Symbol.for("RTKQ/skipToken"),_1={status:"uninitialized"},Lw=ol(_1,()=>{}),qw=ol(_1,()=>{});function e3({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const i=T=>Lw,a=T=>qw;return{buildQuerySelector:v,buildInfiniteQuerySelector:b,buildMutationSelector:w,selectInvalidatedBy:A,selectCachedArgsForQuery:S,selectApiState:u,selectQueries:h,selectMutations:d,selectQueryEntry:f,selectConfig:m};function l(T){return{...T,...Uw(T.status)}}function u(T){return T[e]}function h(T){return u(T)?.queries}function f(T,E){return h(T)?.[E]}function d(T){return u(T)?.mutations}function m(T){return u(T)?.config}function g(T,E,D){return O=>{if(O===vr)return n(i,D);const M=t({queryArgs:O,endpointDefinition:E,endpointName:T});return n(j=>f(j,M)??Lw,D)}}function v(T,E){return g(T,E,l)}function b(T,E){const{infiniteQueryOptions:D}=E;function O(M){const k={...M,...Uw(M.status)},{isLoading:j,isError:B,direction:N}=k,H=N==="forward",J=N==="backward";return{...k,hasNextPage:x(D,k.data),hasPreviousPage:C(D,k.data),isFetchingNextPage:j&&H,isFetchingPreviousPage:j&&J,isFetchNextPageError:B&&H,isFetchPreviousPageError:B&&J}}return g(T,E,O)}function w(){return T=>{let E;return typeof T=="object"?E=Qo(T)??vr:E=T,n(E===vr?a:M=>u(M)?.mutations?.[E]??qw,l)}}function A(T,E){const D=T[e],O=new Set;for(const M of E.filter(jc).map(ly)){const k=D.provided[M.type];if(!k)continue;let j=(M.id!==void 0?k[M.id]:zw(Object.values(k)))??[];for(const B of j)O.add(B)}return zw(Array.from(O.values()).map(M=>{const k=D.queries[M];return k?[{queryCacheKey:M,endpointName:k.endpointName,originalArgs:k.originalArgs}]:[]}))}function S(T,E){return Object.values(h(T)).filter(D=>D?.endpointName===E&&D.status!=="uninitialized").map(D=>D.originalArgs)}function x(T,E){return E?cy(T,E)!=null:!1}function C(T,E){return!E||!T.getPreviousPageParam?!1:b1(T,E)!=null}}var Gw=WeakMap?new WeakMap:void 0,hy=({endpointName:t,queryArgs:e})=>{let n="";const i=Gw?.get(e);if(typeof i=="string")n=i;else{const a=JSON.stringify(e,(l,u)=>(u=typeof u=="bigint"?{$bigint:u.toString()}:u,u=ri(u)?Object.keys(u).sort().reduce((h,f)=>(h[f]=u[f],h),{}):u,u));ri(e)&&Gw?.set(e,a),n=a}return`${t}(${n})`};function w1(...t){return function(n){const i=Rc(d=>n.extractRehydrationInfo?.(d,{reducerPath:n.reducerPath??"api"})),a={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:i,serializeQueryArgs(d){let m=hy;if("serializeQueryArgs"in d.endpointDefinition){const g=d.endpointDefinition.serializeQueryArgs;m=v=>{const b=g(v);return typeof b=="string"?b:hy({...v,queryArgs:b})}}else n.serializeQueryArgs&&(m=n.serializeQueryArgs);return m(d)},tagTypes:[...n.tagTypes||[]]},l={endpointDefinitions:{},batch(d){d()},apiUid:ul(),extractRehydrationInfo:i,hasRehydrationInfo:Rc(d=>i(d)!=null)},u={injectEndpoints:f,enhanceEndpoints({addTagTypes:d,endpoints:m}){if(d)for(const g of d)a.tagTypes.includes(g)||a.tagTypes.push(g);if(m)for(const[g,v]of Object.entries(m))typeof v=="function"?v(l.endpointDefinitions[g]):Object.assign(l.endpointDefinitions[g]||{},v);return u}},h=t.map(d=>d.init(u,a,l));function f(d){const m=d.endpoints({query:g=>({...g,type:"query"}),mutation:g=>({...g,type:"mutation"}),infiniteQuery:g=>({...g,type:"infinitequery"})});for(const[g,v]of Object.entries(m)){if(d.overrideExisting!==!0&&g in l.endpointDefinitions){if(d.overrideExisting==="throw")throw new Error(_t(39));continue}l.endpointDefinitions[g]=v;for(const b of h)b.injectEndpoint(g,v)}return u}return u.injectEndpoints({endpoints:n.endpoints})}}function t3(){return function(){throw new Error(_t(33))}}function mr(t,...e){return Object.assign(t,...e)}var n3=({api:t,queryThunk:e,internalState:n})=>{const i=`${t.reducerPath}/subscriptions`;let a=null,l=null;const{updateSubscriptionOptions:u,unsubscribeQueryResult:h}=t.internalActions,f=(b,w)=>{if(u.match(w)){const{queryCacheKey:S,requestId:x,options:C}=w.payload;return b?.[S]?.[x]&&(b[S][x]=C),!0}if(h.match(w)){const{queryCacheKey:S,requestId:x}=w.payload;return b[S]&&delete b[S][x],!0}if(t.internalActions.removeQueryResult.match(w))return delete b[w.payload.queryCacheKey],!0;if(e.pending.match(w)){const{meta:{arg:S,requestId:x}}=w,C=b[S.queryCacheKey]??={};return C[`${x}_running`]={},S.subscribe&&(C[x]=S.subscriptionOptions??C[x]??{}),!0}let A=!1;if(e.fulfilled.match(w)||e.rejected.match(w)){const S=b[w.meta.arg.queryCacheKey]||{},x=`${w.meta.requestId}_running`;A||=!!S[x],delete S[x]}if(e.rejected.match(w)){const{meta:{condition:S,arg:x,requestId:C}}=w;if(S&&x.subscribe){const T=b[x.queryCacheKey]??={};T[C]=x.subscriptionOptions??T[C]??{},A=!0}}return A},d=()=>n.currentSubscriptions,v={getSubscriptions:d,getSubscriptionCount:b=>{const A=d()[b]??{};return Qs(A)},isRequestSubscribed:(b,w)=>!!d()?.[b]?.[w]};return(b,w)=>{if(a||(a=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(b))return a=n.currentSubscriptions={},l=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(b))return[!1,v];const A=f(n.currentSubscriptions,b);let S=!0;if(A){l||(l=setTimeout(()=>{const T=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,E]=zx(a,()=>T);w.next(t.internalActions.subscriptionsUpdated(E)),a=T,l=null},500));const x=typeof b.type=="string"&&!!b.type.startsWith(i),C=e.rejected.match(b)&&b.meta.condition&&!!b.meta.arg.subscribe;S=!x&&!C}return[S,!1]}};function r3(t){for(const e in t)return!1;return!0}var i3=2147483647/1e3-1,s3=({reducerPath:t,api:e,queryThunk:n,context:i,internalState:a,selectors:{selectQueryEntry:l,selectConfig:u}})=>{const{removeQueryResult:h,unsubscribeQueryResult:f,cacheEntriesUpserted:d}=e.internalActions,m=Sr(f.match,n.fulfilled,n.rejected,d.match);function g(S){const x=a.currentSubscriptions[S];return!!x&&!r3(x)}const v={},b=(S,x,C)=>{const T=x.getState(),E=u(T);if(m(S)){let D;if(d.match(S))D=S.payload.map(O=>O.queryDescription.queryCacheKey);else{const{queryCacheKey:O}=f.match(S)?S.payload:S.meta.arg;D=[O]}w(D,x,E)}if(e.util.resetApiState.match(S))for(const[D,O]of Object.entries(v))O&&clearTimeout(O),delete v[D];if(i.hasRehydrationInfo(S)){const{queries:D}=i.extractRehydrationInfo(S);w(Object.keys(D),x,E)}};function w(S,x,C){const T=x.getState();for(const E of S){const D=l(T,E);A(E,D?.endpointName,x,C)}}function A(S,x,C,T){const D=i.endpointDefinitions[x]?.keepUnusedDataFor??T.keepUnusedDataFor;if(D===1/0)return;const O=Math.max(0,Math.min(D,i3));if(!g(S)){const M=v[S];M&&clearTimeout(M),v[S]=setTimeout(()=>{g(S)||C.dispatch(h({queryCacheKey:S})),delete v[S]},O*1e3)}}return b},$w=new Error("Promise never resolved before cacheEntryRemoved."),a3=({api:t,reducerPath:e,context:n,queryThunk:i,mutationThunk:a,internalState:l,selectors:{selectQueryEntry:u,selectApiState:h}})=>{const f=Np(i),d=Np(a),m=ii(i,a),g={};function v(x,C,T){const E=g[x];E?.valueResolved&&(E.valueResolved({data:C,meta:T}),delete E.valueResolved)}function b(x){const C=g[x];C&&(delete g[x],C.cacheEntryRemoved())}const w=(x,C,T)=>{const E=A(x);function D(O,M,k,j){const B=u(T,M),N=u(C.getState(),M);!B&&N&&S(O,j,M,C,k)}if(i.pending.match(x))D(x.meta.arg.endpointName,E,x.meta.requestId,x.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(x))for(const{queryDescription:O,value:M}of x.payload){const{endpointName:k,originalArgs:j,queryCacheKey:B}=O;D(k,B,x.meta.requestId,j),v(B,M,{})}else if(a.pending.match(x))C.getState()[e].mutations[E]&&S(x.meta.arg.endpointName,x.meta.arg.originalArgs,E,C,x.meta.requestId);else if(m(x))v(E,x.payload,x.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(x)||t.internalActions.removeMutationResult.match(x))b(E);else if(t.util.resetApiState.match(x))for(const O of Object.keys(g))b(O)};function A(x){return f(x)?x.meta.arg.queryCacheKey:d(x)?x.meta.arg.fixedCacheKey??x.meta.requestId:t.internalActions.removeQueryResult.match(x)?x.payload.queryCacheKey:t.internalActions.removeMutationResult.match(x)?Qo(x.payload):""}function S(x,C,T,E,D){const O=n.endpointDefinitions[x],M=O?.onCacheEntryAdded;if(!M)return;const k={},j=new Promise(ae=>{k.cacheEntryRemoved=ae}),B=Promise.race([new Promise(ae=>{k.valueResolved=ae}),j.then(()=>{throw $w})]);B.catch(()=>{}),g[T]=k;const N=t.endpoints[x].select(O.type==="query"?C:T),H=E.dispatch((ae,U,L)=>L),J={...E,getCacheEntry:()=>N(E.getState()),requestId:D,extra:H,updateCachedData:O.type==="query"?ae=>E.dispatch(t.util.updateQueryData(x,C,ae)):void 0,cacheDataLoaded:B,cacheEntryRemoved:j},ee=M(C,J);Promise.resolve(ee).catch(ae=>{if(ae!==$w)throw ae})}return w},o3=({api:t,context:{apiUid:e},reducerPath:n})=>(i,a)=>{t.util.resetApiState.match(i)&&a.dispatch(t.internalActions.middlewareRegistered(e))},l3=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:i,queryThunk:a,api:l,assertTagType:u,refetchQuery:h,internalState:f})=>{const{removeQueryResult:d}=l.internalActions,m=Sr(ii(i),Fc(i)),g=Sr(ii(i,a),Ws(i,a));let v=[];const b=(S,x)=>{m(S)?A(v1(S,"invalidatesTags",n,u),x):g(S)?A([],x):l.util.invalidateTags.match(S)&&A(vm(S.payload,void 0,void 0,void 0,void 0,u),x)};function w(S){const{queries:x,mutations:C}=S;for(const T of[x,C])for(const E in T)if(T[E]?.status==="pending")return!0;return!1}function A(S,x){const C=x.getState(),T=C[t];if(v.push(...S),T.config.invalidationBehavior==="delayed"&&w(T))return;const E=v;if(v=[],E.length===0)return;const D=l.util.selectInvalidatedBy(C,E);e.batch(()=>{const O=Array.from(D.values());for(const{queryCacheKey:M}of O){const k=T.queries[M],j=f.currentSubscriptions[M]??{};k&&(Qs(j)===0?x.dispatch(d({queryCacheKey:M})):k.status!=="uninitialized"&&x.dispatch(h(k)))}})}return b},u3=({reducerPath:t,queryThunk:e,api:n,refetchQuery:i,internalState:a})=>{const l={},u=(v,b)=>{(n.internalActions.updateSubscriptionOptions.match(v)||n.internalActions.unsubscribeQueryResult.match(v))&&f(v.payload,b),(e.pending.match(v)||e.rejected.match(v)&&v.meta.condition)&&f(v.meta.arg,b),(e.fulfilled.match(v)||e.rejected.match(v)&&!v.meta.condition)&&h(v.meta.arg,b),n.util.resetApiState.match(v)&&m()};function h({queryCacheKey:v},b){const w=b.getState()[t],A=w.queries[v],S=a.currentSubscriptions[v];if(!A||A.status==="uninitialized")return;const{lowestPollingInterval:x,skipPollingIfUnfocused:C}=g(S);if(!Number.isFinite(x))return;const T=l[v];T?.timeout&&(clearTimeout(T.timeout),T.timeout=void 0);const E=Date.now()+x;l[v]={nextPollTimestamp:E,pollingInterval:x,timeout:setTimeout(()=>{(w.config.focused||!C)&&b.dispatch(i(A)),h({queryCacheKey:v},b)},x)}}function f({queryCacheKey:v},b){const A=b.getState()[t].queries[v],S=a.currentSubscriptions[v];if(!A||A.status==="uninitialized")return;const{lowestPollingInterval:x}=g(S);if(!Number.isFinite(x)){d(v);return}const C=l[v],T=Date.now()+x;(!C||T<C.nextPollTimestamp)&&h({queryCacheKey:v},b)}function d(v){const b=l[v];b?.timeout&&clearTimeout(b.timeout),delete l[v]}function m(){for(const v of Object.keys(l))d(v)}function g(v={}){let b=!1,w=Number.POSITIVE_INFINITY;for(let A in v)v[A].pollingInterval&&(w=Math.min(v[A].pollingInterval,w),b=v[A].skipPollingIfUnfocused||b);return{lowestPollingInterval:w,skipPollingIfUnfocused:b}}return u},c3=({api:t,context:e,queryThunk:n,mutationThunk:i})=>{const a=jy(n,i),l=Ws(n,i),u=ii(n,i),h={};return(d,m)=>{if(a(d)){const{requestId:g,arg:{endpointName:v,originalArgs:b}}=d.meta,w=e.endpointDefinitions[v],A=w?.onQueryStarted;if(A){const S={},x=new Promise((D,O)=>{S.resolve=D,S.reject=O});x.catch(()=>{}),h[g]=S;const C=t.endpoints[v].select(w.type==="query"?b:g),T=m.dispatch((D,O,M)=>M),E={...m,getCacheEntry:()=>C(m.getState()),requestId:g,extra:T,updateCachedData:w.type==="query"?D=>m.dispatch(t.util.updateQueryData(v,b,D)):void 0,queryFulfilled:x};A(b,E)}}else if(u(d)){const{requestId:g,baseQueryMeta:v}=d.meta;h[g]?.resolve({data:d.payload,meta:v}),delete h[g]}else if(l(d)){const{requestId:g,rejectedWithValue:v,baseQueryMeta:b}=d.meta;h[g]?.reject({error:d.payload??d.error,isUnhandledError:!v,meta:b}),delete h[g]}}},h3=({reducerPath:t,context:e,api:n,refetchQuery:i,internalState:a})=>{const{removeQueryResult:l}=n.internalActions,u=(f,d)=>{ym.match(f)&&h(d,"refetchOnFocus"),mm.match(f)&&h(d,"refetchOnReconnect")};function h(f,d){const m=f.getState()[t],g=m.queries,v=a.currentSubscriptions;e.batch(()=>{for(const b of Object.keys(v)){const w=g[b],A=v[b];if(!A||!w)continue;(Object.values(A).some(x=>x[d]===!0)||Object.values(A).every(x=>x[d]===void 0)&&m.config[d])&&(Qs(A)===0?f.dispatch(l({queryCacheKey:b})):w.status!=="uninitialized"&&f.dispatch(i(w)))}})}return u};function f3(t){const{reducerPath:e,queryThunk:n,api:i,context:a}=t,{apiUid:l}=a,u={invalidateTags:qt(`${e}/invalidateTags`)},h=g=>g.type.startsWith(`${e}/`),f=[o3,s3,l3,u3,a3,c3];return{middleware:g=>{let v=!1;const w={...t,internalState:{currentSubscriptions:{}},refetchQuery:m,isThisApiSliceAction:h},A=f.map(C=>C(w)),S=n3(w),x=h3(w);return C=>T=>{if(!Oy(T))return C(T);v||(v=!0,g.dispatch(i.internalActions.middlewareRegistered(l)));const E={...g,next:C},D=g.getState(),[O,M]=S(T,E,D);let k;if(O?k=C(T):k=M,g.getState()[e]&&(x(T,E,D),h(T)||a.hasRehydrationInfo(T)))for(const j of A)j(T,E,D);return k}},actions:u};function m(g){return t.api.endpoints[g.endpointName].initiate(g.originalArgs,{subscribe:!1,forceRefetch:!0})}}var Hw=Symbol(),x1=({createSelector:t=zy}={})=>({name:Hw,init(e,{baseQuery:n,tagTypes:i,reducerPath:a,serializeQueryArgs:l,keepUnusedDataFor:u,refetchOnMountOrArgChange:h,refetchOnFocus:f,refetchOnReconnect:d,invalidationBehavior:m},g){pC();const v=F=>F;Object.assign(e,{reducerPath:a,endpoints:{},internalActions:{onOnline:mm,onOffline:g1,onFocus:ym,onFocusLost:m1},util:{}});const b=e3({serializeQueryArgs:l,reducerPath:a,createSelector:t}),{selectInvalidatedBy:w,selectCachedArgsForQuery:A,buildQuerySelector:S,buildInfiniteQuerySelector:x,buildMutationSelector:C}=b;mr(e.util,{selectInvalidatedBy:w,selectCachedArgsForQuery:A});const{queryThunk:T,infiniteQueryThunk:E,mutationThunk:D,patchQueryData:O,updateQueryData:M,upsertQueryData:k,prefetch:j,buildMatchThunkActions:B}=ZD({baseQuery:n,reducerPath:a,context:g,api:e,serializeQueryArgs:l,assertTagType:v,selectors:b}),{reducer:N,actions:H}=JD({context:g,queryThunk:T,mutationThunk:D,serializeQueryArgs:l,reducerPath:a,assertTagType:v,config:{refetchOnFocus:f,refetchOnReconnect:d,refetchOnMountOrArgChange:h,keepUnusedDataFor:u,reducerPath:a,invalidationBehavior:m}});mr(e.util,{patchQueryData:O,updateQueryData:M,upsertQueryData:k,prefetch:j,resetApiState:H.resetApiState,upsertQueryEntries:H.cacheEntriesUpserted}),mr(e.internalActions,H);const{middleware:J,actions:ee}=f3({reducerPath:a,context:g,queryThunk:T,mutationThunk:D,infiniteQueryThunk:E,api:e,assertTagType:v,selectors:b});mr(e.util,ee),mr(e,{reducer:N,middleware:J});const{buildInitiateQuery:ae,buildInitiateInfiniteQuery:U,buildInitiateMutation:L,getRunningMutationThunk:te,getRunningMutationsThunk:ie,getRunningQueriesThunk:ue,getRunningQueryThunk:z}=KD({queryThunk:T,mutationThunk:D,infiniteQueryThunk:E,api:e,serializeQueryArgs:l,context:g});return mr(e.util,{getRunningMutationThunk:te,getRunningMutationsThunk:ie,getRunningQueryThunk:z,getRunningQueriesThunk:ue}),{name:Hw,injectEndpoint(F,W){const Z=e,se=Z.endpoints[F]??={};gm(W)&&mr(se,{name:F,select:S(F,W),initiate:ae(F,W)},B(T,F)),YD(W)&&mr(se,{name:F,select:C(),initiate:L(F)},B(D,F)),bm(W)&&mr(se,{name:F,select:x(F,W),initiate:U(F,W)},B(T,F))}}}});x1();function lc(t){return t.replace(t[0],t[0].toUpperCase())}function d3(t){return t.type==="query"}function p3(t){return t.type==="mutation"}function S1(t){return t.type==="infinitequery"}function fo(t,...e){return Object.assign(t,...e)}var vp=Symbol();function Vw(t,e,n,i){const a=ce.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?e({queryArgs:t,endpointDefinition:n,endpointName:i}):t}),[t,e,n,i]),l=ce.useRef(a);return ce.useEffect(()=>{l.current.serialized!==a.serialized&&(l.current=a)},[a]),l.current.serialized===a.serialized?l.current.queryArgs:t}function uc(t){const e=ce.useRef(t);return ce.useEffect(()=>{Eo(e.current,t)||(e.current=t)},[t]),Eo(e.current,t)?e.current:t}var y3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m3=y3(),g3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",b3=g3(),v3=()=>m3||b3?ce.useLayoutEffect:ce.useEffect,_3=v3(),Fw=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:p1.pending}:t;function _p(t,...e){const n={};return e.forEach(i=>{n[i]=t[i]}),n}var wp=["data","status","isLoading","isSuccess","isError","error"];function w3({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:i,useStore:a},unstable__sideEffectsInRender:l,createSelector:u},serializeQueryArgs:h,context:f}){const d=l?E=>E():ce.useEffect;return{buildQueryHooks:x,buildInfiniteQueryHooks:C,buildMutationHook:T,usePrefetch:v};function m(E,D,O){if(D?.endpointName&&E.isUninitialized){const{endpointName:H}=D,J=f.endpointDefinitions[H];O!==vr&&h({queryArgs:D.originalArgs,endpointDefinition:J,endpointName:H})===h({queryArgs:O,endpointDefinition:J,endpointName:H})&&(D=void 0)}let M=E.isSuccess?E.data:D?.data;M===void 0&&(M=E.data);const k=M!==void 0,j=E.isLoading,B=(!D||D.isLoading||D.isUninitialized)&&!k&&j,N=E.isSuccess||k&&(j&&!D?.isError||E.isUninitialized);return{...E,data:M,currentData:E.data,isFetching:j,isLoading:B,isSuccess:N}}function g(E,D,O){if(D?.endpointName&&E.isUninitialized){const{endpointName:H}=D,J=f.endpointDefinitions[H];h({queryArgs:D.originalArgs,endpointDefinition:J,endpointName:H})===h({queryArgs:O,endpointDefinition:J,endpointName:H})&&(D=void 0)}let M=E.isSuccess?E.data:D?.data;M===void 0&&(M=E.data);const k=M!==void 0,j=E.isLoading,B=(!D||D.isLoading||D.isUninitialized)&&!k&&j,N=E.isSuccess||j&&k;return{...E,data:M,currentData:E.data,isFetching:j,isLoading:B,isSuccess:N}}function v(E,D){const O=n(),M=uc(D);return ce.useCallback((k,j)=>O(t.util.prefetch(E,k,{...M,...j})),[E,O,M])}function b(E,D,{refetchOnReconnect:O,refetchOnFocus:M,refetchOnMountOrArgChange:k,skip:j=!1,pollingInterval:B=0,skipPollingIfUnfocused:N=!1,...H}={}){const{initiate:J}=t.endpoints[E],ee=n(),ae=ce.useRef(void 0);if(!ae.current){const oe=ee(t.internalActions.internal_getRTKQSubscriptions());ae.current=oe}const U=Vw(j?vr:D,hy,f.endpointDefinitions[E],E),L=uc({refetchOnReconnect:O,refetchOnFocus:M,pollingInterval:B,skipPollingIfUnfocused:N}),te=ce.useRef(!1),ie=H.initialPageParam,ue=uc(ie),z=ce.useRef(void 0);let{queryCacheKey:F,requestId:W}=z.current||{},Z=!1;F&&W&&(Z=ae.current.isRequestSubscribed(F,W));const se=!Z&&te.current;return d(()=>{te.current=Z}),d(()=>{se&&(z.current=void 0)},[se]),d(()=>{const oe=z.current;if(U===vr){oe?.unsubscribe(),z.current=void 0;return}const ge=z.current?.subscriptionOptions;if(!oe||oe.arg!==U){oe?.unsubscribe();const Je=ee(J(U,{subscriptionOptions:L,forceRefetch:k,...S1(f.endpointDefinitions[E])?{initialPageParam:ue}:{}}));z.current=Je}else L!==ge&&oe.updateSubscriptionOptions(L)},[ee,J,k,U,L,se,ue,E]),[z,ee,J,L]}function w(E,D){return(M,{skip:k=!1,selectFromResult:j}={})=>{const{select:B}=t.endpoints[E],N=Vw(k?vr:M,h,f.endpointDefinitions[E],E),H=ce.useRef(void 0),J=ce.useMemo(()=>u([B(N),(te,ie)=>ie,te=>N],D,{memoizeOptions:{resultEqualityCheck:Eo}}),[B,N]),ee=ce.useMemo(()=>j?u([J],j,{devModeChecks:{identityFunctionCheck:"never"}}):J,[J,j]),ae=i(te=>ee(te,H.current),Eo),U=a(),L=J(U.getState(),H.current);return _3(()=>{H.current=L},[L]),ae}}function A(E){ce.useEffect(()=>()=>{E.current?.unsubscribe?.(),E.current=void 0},[E])}function S(E){if(!E.current)throw new Error(_t(38));return E.current.refetch()}function x(E){const D=(k,j={})=>{const[B]=b(E,k,j);return A(B),ce.useMemo(()=>({refetch:()=>S(B)}),[B])},O=({refetchOnReconnect:k,refetchOnFocus:j,pollingInterval:B=0,skipPollingIfUnfocused:N=!1}={})=>{const{initiate:H}=t.endpoints[E],J=n(),[ee,ae]=ce.useState(vp),U=ce.useRef(void 0),L=uc({refetchOnReconnect:k,refetchOnFocus:j,pollingInterval:B,skipPollingIfUnfocused:N});d(()=>{const z=U.current?.subscriptionOptions;L!==z&&U.current?.updateSubscriptionOptions(L)},[L]);const te=ce.useRef(L);d(()=>{te.current=L},[L]);const ie=ce.useCallback(function(z,F=!1){let W;return e(()=>{U.current?.unsubscribe(),U.current=W=J(H(z,{subscriptionOptions:te.current,forceRefetch:!F})),ae(z)}),W},[J,H]),ue=ce.useCallback(()=>{U.current?.queryCacheKey&&J(t.internalActions.removeQueryResult({queryCacheKey:U.current?.queryCacheKey}))},[J]);return ce.useEffect(()=>()=>{U?.current?.unsubscribe()},[]),ce.useEffect(()=>{ee!==vp&&!U.current&&ie(ee,!0)},[ee,ie]),ce.useMemo(()=>[ie,ee,{reset:ue}],[ie,ee,ue])},M=w(E,m);return{useQueryState:M,useQuerySubscription:D,useLazyQuerySubscription:O,useLazyQuery(k){const[j,B,{reset:N}]=O(k),H=M(B,{...k,skip:B===vp}),J=ce.useMemo(()=>({lastArg:B}),[B]);return ce.useMemo(()=>[j,{...H,reset:N},J],[j,H,N,J])},useQuery(k,j){const B=D(k,j),N=M(k,{selectFromResult:k===vr||j?.skip?void 0:Fw,...j}),H=_p(N,...wp);return ce.useDebugValue(H),ce.useMemo(()=>({...N,...B}),[N,B])}}}function C(E){const D=(M,k={})=>{const[j,B,N,H]=b(E,M,k),J=ce.useRef(H);d(()=>{J.current=H},[H]);const ee=ce.useCallback(function(ae,U){let L;return e(()=>{j.current?.unsubscribe(),j.current=L=B(N(ae,{subscriptionOptions:J.current,direction:U}))}),L},[j,B,N]);return A(j),ce.useMemo(()=>({trigger:ee,refetch:()=>S(j),fetchNextPage:()=>ee(M,"forward"),fetchPreviousPage:()=>ee(M,"backward")}),[j,ee,M])},O=w(E,g);return{useInfiniteQueryState:O,useInfiniteQuerySubscription:D,useInfiniteQuery(M,k){const{refetch:j,fetchNextPage:B,fetchPreviousPage:N}=D(M,k),H=O(M,{selectFromResult:M===vr||k?.skip?void 0:Fw,...k}),J=_p(H,...wp,"hasNextPage","hasPreviousPage");return ce.useDebugValue(J),ce.useMemo(()=>({...H,fetchNextPage:B,fetchPreviousPage:N,refetch:j}),[H,B,N,j])}}}function T(E){return({selectFromResult:D,fixedCacheKey:O}={})=>{const{select:M,initiate:k}=t.endpoints[E],j=n(),[B,N]=ce.useState();ce.useEffect(()=>()=>{B?.arg.fixedCacheKey||B?.reset()},[B]);const H=ce.useCallback(function(z){const F=j(k(z,{fixedCacheKey:O}));return N(F),F},[j,k,O]),{requestId:J}=B||{},ee=ce.useMemo(()=>M({fixedCacheKey:O,requestId:B?.requestId}),[O,B,M]),ae=ce.useMemo(()=>D?u([ee],D):ee,[D,ee]),U=i(ae,Eo),L=O==null?B?.arg.originalArgs:void 0,te=ce.useCallback(()=>{e(()=>{B&&N(void 0),O&&j(t.internalActions.removeMutationResult({requestId:J,fixedCacheKey:O}))})},[j,O,B,J]),ie=_p(U,...wp,"endpointName");ce.useDebugValue(ie);const ue=ce.useMemo(()=>({...U,originalArgs:L,reset:te}),[U,L,te]);return ce.useMemo(()=>[H,ue],[H,ue])}}}var x3=Symbol(),S3=({batch:t=ZE,hooks:e={useDispatch:Rx,useSelector:Mx,useStore:Ry},createSelector:n=zy,unstable__sideEffectsInRender:i=!1,...a}={})=>({name:x3,init(l,{serializeQueryArgs:u},h){const f=l,{buildQueryHooks:d,buildInfiniteQueryHooks:m,buildMutationHook:g,usePrefetch:v}=w3({api:l,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:i,createSelector:n},serializeQueryArgs:u,context:h});return fo(f,{usePrefetch:v}),fo(h,{batch:t}),{injectEndpoint(b,w){if(d3(w)){const{useQuery:A,useLazyQuery:S,useLazyQuerySubscription:x,useQueryState:C,useQuerySubscription:T}=d(b);fo(f.endpoints[b],{useQuery:A,useLazyQuery:S,useLazyQuerySubscription:x,useQueryState:C,useQuerySubscription:T}),l[`use${lc(b)}Query`]=A,l[`useLazy${lc(b)}Query`]=S}if(p3(w)){const A=g(b);fo(f.endpoints[b],{useMutation:A}),l[`use${lc(b)}Mutation`]=A}else if(S1(w)){const{useInfiniteQuery:A,useInfiniteQuerySubscription:S,useInfiniteQueryState:x}=m(b);fo(f.endpoints[b],{useInfiniteQuery:A,useInfiniteQuerySubscription:S,useInfiniteQueryState:x}),l[`use${lc(b)}InfiniteQuery`]=A}}}}}),A1=w1(x1(),S3());const T1=t=>{let e;return(...n)=>(e||(e=t(...n)),e)},A3=T1(()=>Lo(()=>import("./campaign-CHtGOMT8.js"),__vite__mapDeps([2,3]))),nh=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const T3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",So=Array.prototype.slice.call(T3),cc=(t=>{let e={};return t.forEach((n,i)=>e[n]=i),e})(So),E3=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Sc=String.fromCharCode.bind(String),Yw=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),C3=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),E1=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),R3=t=>{let e,n,i,a,l="";const u=t.length%3;for(let h=0;h<t.length;){if((n=t.charCodeAt(h++))>255||(i=t.charCodeAt(h++))>255||(a=t.charCodeAt(h++))>255)throw new TypeError("invalid character found");e=n<<16|i<<8|a,l+=So[e>>18&63]+So[e>>12&63]+So[e>>6&63]+So[e&63]}return u?l.slice(0,u-3)+"===".substring(u):l},M3=typeof btoa=="function"?t=>btoa(t):nh?t=>Buffer.from(t,"binary").toString("base64"):R3,Xw=nh?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let i=0,a=t.length;i<a;i+=4096)n.push(Sc.apply(null,t.subarray(i,i+4096)));return M3(n.join(""))},k3=(t,e=!1)=>e?C3(Xw(t)):Xw(t),O3=t=>{if(t=t.replace(/\s+/g,""),!E3.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",i,a;for(let l=0;l<t.length;)e=cc[t.charAt(l++)]<<18|cc[t.charAt(l++)]<<12|(i=cc[t.charAt(l++)])<<6|(a=cc[t.charAt(l++)]),n+=i===64?Sc(e>>16&255):a===64?Sc(e>>16&255,e>>8&255):Sc(e>>16&255,e>>8&255,e&255);return n},D3=typeof atob=="function"?t=>atob(E1(t)):nh?t=>Buffer.from(t,"base64").toString("binary"):O3,U3=nh?t=>Yw(Buffer.from(t,"base64")):t=>Yw(D3(t).split("").map(e=>e.charCodeAt(0))),P3=t=>U3(z3(t)),z3=t=>E1(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),j3=!0,C1="gzip",B3=async t=>{const e=JSON.stringify(t),i=new TextEncoder().encode(e),a=new Blob([i]),l=new CompressionStream(C1),u=a.stream().pipeThrough(l),h=await new Response(u).arrayBuffer(),f=new Uint8Array(h);return k3(f,j3)},R1=async t=>{try{const e=P3(t),n=new Blob([new Uint8Array(e)]),i=new DecompressionStream(C1),a=n.stream().pipeThrough(i),l=await new Response(a).text();return JSON.parse(l)}catch(e){throw new Error("error decompressing object",{cause:e})}};var Qw=function(){return Qw=Object.assign||function(e){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Qw.apply(this,arguments)};function rh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function N3(t,e,n,i){function a(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(m){try{d(i.next(m))}catch(g){u(g)}}function f(m){try{d(i.throw(m))}catch(g){u(g)}}function d(m){m.done?l(m.value):a(m.value).then(h,f)}d((i=i.apply(t,e||[])).next())})}function vj(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,l;i<a;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))}const I3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _m extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class L3 extends _m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kw extends _m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ww extends _m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fy||(fy={}));class q3{constructor(e,{headers:n={},customFetch:i,region:a=fy.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=I3(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return N3(this,arguments,void 0,function*(n,i={}){var a;let l,u;try{const{headers:h,method:f,body:d,signal:m,timeout:g}=i;let v={},{region:b}=i;b||(b=this.region);const w=new URL(`${this.url}/${n}`);b&&b!=="any"&&(v["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let A;d&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",A=d):typeof d=="string"?(v["Content-Type"]="text/plain",A=d):typeof FormData<"u"&&d instanceof FormData?A=d:(v["Content-Type"]="application/json",A=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?A=JSON.stringify(d):A=d;let S=m;g&&(u=new AbortController,l=setTimeout(()=>u.abort(),g),m?(S=u.signal,m.addEventListener("abort",()=>u.abort())):S=u.signal);const x=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),h),body:A,signal:S}).catch(D=>{throw new L3(D)}),C=x.headers.get("x-relay-error");if(C&&C==="true")throw new Kw(x);if(!x.ok)throw new Ww(x);let T=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),E;return T==="application/json"?E=yield x.json():T==="application/octet-stream"||T==="application/pdf"?E=yield x.blob():T==="text/event-stream"?E=x:T==="multipart/form-data"?E=yield x.formData():E=yield x.text(),{data:E,error:null,response:x}}catch(h){return{data:null,error:h,response:h instanceof Ww||h instanceof Kw?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var G3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},$3=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,h=null,f=null,d=l.status,m=l.statusText;if(l.ok){var g,v;if(n.method!=="HEAD"){var b;const x=await l.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((b=n.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const A=(g=n.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),S=(v=l.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");A&&S&&S.length>1&&(f=parseInt(S[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,d=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var w;const A=await l.text();try{u=JSON.parse(A),Array.isArray(u)&&l.status===404&&(h=[],u=null,d=200,m="OK")}catch{l.status===404&&A===""?(d=204,m="No Content"):u={message:A}}if(u&&n.isMaybeSingle&&(!(u==null||(w=u.details)===null||w===void 0)&&w.includes("0 rows"))&&(u=null,d=200,m="OK"),u&&n.shouldThrowOnError)throw new G3(u)}return{error:u,data:h,count:f,status:d,statusText:m}});return this.shouldThrowOnError||(a=a.catch(l=>{var u;let h="";const f=l?.cause;if(f){var d,m,g,v;const w=(d=f?.message)!==null&&d!==void 0?d:"",A=(m=f?.code)!==null&&m!==void 0?m:"";h=`${(g=l?.name)!==null&&g!==void 0?g:"FetchError"}: ${l?.message}`,h+=`

Caused by: ${(v=f?.name)!==null&&v!==void 0?v:"Error"}: ${w}`,A&&(h+=` (${A})`),f?.stack&&(h+=`
${f.stack}`)}else{var b;h=(b=l?.stack)!==null&&b!==void 0?b:""}return{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},H3=class extends $3{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var u;const h=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Zw=new RegExp("[,()]");var Gs=class extends H3{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Zw.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Zw.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},V3=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:i}=e??{},a=n?"HEAD":"GET";let l=!1;const u=(t??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join(""),{url:h,headers:f}=this.cloneRequestState();return h.searchParams.set("select",u),i&&f.append("Prefer",`count=${i}`),new Gs({method:a,url:h,headers:f,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var i;const a="POST",{url:l,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),n||u.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(h.length>0){const f=[...new Set(h)].map(d=>`"${d}"`);l.searchParams.set("columns",f.join(","))}}return new Gs({method:a,url:l,headers:u,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var l;const u="POST",{url:h,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),i&&f.append("Prefer",`count=${i}`),a||f.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(d.length>0){const m=[...new Set(d)].map(g=>`"${g}"`);h.searchParams.set("columns",m.join(","))}}return new Gs({method:u,url:h,headers:f,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var n;const i="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new Gs({method:i,url:a,headers:l,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Gs({method:n,url:i,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},F3=class M1{constructor(e,{headers:n={},schema:i,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new V3(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new M1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:a=!1,count:l}={}){var u;let h;const f=new URL(`${this.url}/rpc/${e}`);let d;const m=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(m)),g=i&&Object.values(n).some(m);g?(h="POST",d=n):i||a?(h=i?"HEAD":"GET",Object.entries(n).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{f.searchParams.append(b,w)})):(h="POST",d=n);const v=new Headers(this.headers);return g?v.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&v.set("Prefer",`count=${l}`),new Gs({method:h,url:f,headers:v,schema:this.schemaName,body:d,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class Y3{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const a=i.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X3="2.93.1",Q3=`realtime-js/${X3}`,K3="1.0.0",k1="2.0.0",Jw=k1,dy=1e4,W3=1e3,Z3=100;var Wr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wr||(Wr={}));var pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pt||(pt={}));var In;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(In||(In={}));var py;(function(t){t.websocket="websocket"})(py||(py={}));var ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ji||(ji={}));class J3{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,i){var a,l;const u=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",f=(l=e.join_ref)!==null&&l!==void 0?l:"",d=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(m).length===0?"":JSON.stringify(m);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+h.length+u.length+d.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let w=new DataView(b),A=0;w.setUint8(A++,this.KINDS.userBroadcastPush),w.setUint8(A++,f.length),w.setUint8(A++,h.length),w.setUint8(A++,u.length),w.setUint8(A++,d.length),w.setUint8(A++,g.length),w.setUint8(A++,n),Array.from(f,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(h,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(u,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(d,x=>w.setUint8(A++,x.charCodeAt(0))),Array.from(g,x=>w.setUint8(A++,x.charCodeAt(0)));var S=new Uint8Array(b.byteLength+i.byteLength);return S.set(new Uint8Array(b),0),S.set(new Uint8Array(i),b.byteLength),S.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,l,u,h,f]=i;return n({join_ref:a,ref:l,topic:u,event:h,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),a=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,a)}_decodeUserBroadcast(e,n,i){const a=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),h=n.getUint8(4);let f=this.HEADER_LENGTH+4;const d=i.decode(e.slice(f,f+a));f=f+a;const m=i.decode(e.slice(f,f+l));f=f+l;const g=i.decode(e.slice(f,f+u));f=f+u;const v=e.slice(f,e.byteLength),b=h===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,w={type:this.BROADCAST_EVENT,event:m,payload:b};return u>0&&(w.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class O1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const ex=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=eU(u,t,e,a),l),{}):{}},eU=(t,e,n,i)=>{const a=e.find(h=>h.name===t),l=a?.type,u=n[t];return l&&!i.includes(l)?D1(l,u):yy(u)},D1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return iU(e,n)}switch(t){case Ye.bool:return tU(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return nU(e);case Ye.json:case Ye.jsonb:return rU(e);case Ye.timestamp:return sU(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return yy(e);default:return yy(e)}},yy=t=>t,tU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},iU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>D1(e,h))}return t},sU=t=>typeof t=="string"?t.replace(" ","T"):t,U1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class xp{constructor(e,n,i={},a=dy){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tx||(tx={}));class Po{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Po.syncState(this.state,a,l,u),this.pendingDiffs.forEach(f=>{this.state=Po.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Po.syncDiff(this.state,a,l,u),h())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const l=this.cloneDeep(e),u=this.transformState(n),h={},f={};return this.map(l,(d,m)=>{u[d]||(f[d]=m)}),this.map(u,(d,m)=>{const g=l[d];if(g){const v=m.map(S=>S.presence_ref),b=g.map(S=>S.presence_ref),w=m.filter(S=>b.indexOf(S.presence_ref)<0),A=g.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(h[d]=w),A.length>0&&(f[d]=A)}else h[d]=m}),this.syncDiff(l,{joins:h,leaves:f},i,a)}static syncDiff(e,n,i,a){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(l,(h,f)=>{var d;const m=(d=e[h])!==null&&d!==void 0?d:[];if(e[h]=this.cloneDeep(f),m.length>0){const g=e[h].map(b=>b.presence_ref),v=m.filter(b=>g.indexOf(b.presence_ref)<0);e[h].unshift(...v)}i(h,m,f)}),this.map(u,(h,f)=>{let d=e[h];if(!d)return;const m=f.map(g=>g.presence_ref);d=d.filter(g=>m.indexOf(g.presence_ref)<0),e[h]=d,a(h,d,f),d.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nx||(nx={}));var zo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zo||(zo={}));var gr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gr||(gr={}));class Fs{constructor(e,n={config:{}},i){var a,l;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xp(this,In.join,this.params,this.timeout),this.rejoinTimer=new O1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new Po(this),this.broadcastEndpointURL=U1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params,d=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[zo.PRESENCE]&&this.bindings[zo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},v={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:m}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(gr.CHANNEL_ERROR,b)),this._onClose(()=>e?.(gr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e?.(gr.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,S=(w=A?.length)!==null&&w!==void 0?w:0,x=[];for(let C=0;C<S;C++){const T=A[C],{filter:{event:E,schema:D,table:O,filter:M}}=T,k=b&&b[C];if(k&&k.event===E&&Fs.isFilterValueEqual(k.schema,D)&&Fs.isFilterValueEqual(k.table,O)&&Fs.isFilterValueEqual(k.filter,M))x.push(Object.assign(Object.assign({},T),{id:k.id}));else{this.unsubscribe(),this.state=pt.errored,e?.(gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(gr.SUBSCRIBED);return}}).receive("error",b=>{this.state=pt.errored,e?.(gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===pt.joined&&e===zo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let f=h.statusText;try{const d=await h.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),d.receive("ok",()=>l("ok")),d.receive("error",()=>l("error")),d.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new xp(this,In.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,l=setTimeout(()=>a.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new xp(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Z3){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:d,join:m}=In;if(i&&[h,f,d,m].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var w,A,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(A=b.filter)===null||A===void 0?void 0:A.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===u}).map(b=>b.callback(v,i)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var w,A,S,x,C,T;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const E=b.id,D=(w=b.filter)===null||w===void 0?void 0:w.event;return E&&((A=n.ids)===null||A===void 0?void 0:A.includes(E))&&(D==="*"||D?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const E=(C=(x=b?.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return E==="*"||E===((T=n?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:A,table:S,commit_timestamp:x,type:C,errors:T}=w;v=Object.assign(Object.assign({},{schema:A,table:S,commit_timestamp:x,eventType:C,new:{},old:{},errors:T}),this._getPayloadRecords(w))}b.callback(v,i)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),l={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Fs.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(In.close,{},e)}_onError(e){this._on(In.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ex(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ex(e.columns,e.old_record)),n}}const Sp=()=>{},hc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aU=[1e3,2e3,5e3,1e4],oU=1e4,lU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uU{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dy,this.transport=null,this.heartbeatIntervalMs=hc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sp,this.ref=0,this.reconnectTimer=null,this.vsn=Jw,this.logger=Sp,this.conn=null,this.sendBuffer=[],this.serializer=new J3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${py.websocket}`,this.httpEndpoint=U1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Wr.connecting:return ji.Connecting;case Wr.open:return ji.Open;case Wr.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===i);if(a)return a;{const l=new Fs(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:i,payload:a,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${i} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(W3,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",d)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:l,ref:u}=n,h=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${i} ${a} ${h}`.trim(),l),this.channels.filter(d=>d._isMember(i)).forEach(d=>d._trigger(a,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Wr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wr.open||this.conn.readyState===Wr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(In.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([lU],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const l={access_token:n,version:Q3};n&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(In.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new O1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,l,u,h,f,d,m,g,v,b;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:dy,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:hc.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:Sp,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:Jw,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(w=>aU[w-1]||oU),this.vsn){case K3:this.encode=(m=e?.encode)!==null&&m!==void 0?m:((w,A)=>A(JSON.stringify(w))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:((w,A)=>A(JSON.parse(w)));break;case k1:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=e?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Ko=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cU(t,e,n){const i=new URL(e,t);if(n)for(const[a,l]of Object.entries(n))l!==void 0&&i.searchParams.set(a,l);return i.toString()}async function hU(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function fU(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:l,headers:u}){const h=cU(t.baseUrl,i,a),f=await hU(t.auth),d=await e(h,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...f,...u},body:l?JSON.stringify(l):void 0}),m=await d.text(),g=(d.headers.get("content-type")||"").includes("application/json"),v=g&&m?JSON.parse(m):m;if(!d.ok){const b=g?v:void 0,w=b?.error;throw new Ko(w?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:w?.type,icebergCode:w?.code,details:b})}return{status:d.status,headers:d.headers,data:v}}}}function fc(t){return t.join("")}var dU=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:fc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fc(t.namespace)}`}),!0}catch(e){if(e instanceof Ko&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return;throw n}}};function Ps(t){return t.join("")}var pU=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ps(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ko&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ko&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},yU=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=fU({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new dU(this.client,e),this.tableOps=new pU(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ih=class extends Error{constructor(t,e="storage",n,i){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function sh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var dc=class extends ih{constructor(t,e,n,i="storage"){super(t,i,e,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},P1=class extends ih{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const mU=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},my=t=>{if(Array.isArray(t))return t.map(n=>my(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=my(i)}),e},bU=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Wo(t){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(t)}function vU(t,e){if(Wo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Wo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _U(t){var e=vU(t,"string");return Wo(e)=="symbol"?e:e+""}function wU(t,e,n){return(e=_U(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rx(Object(n),!0).forEach(function(i){wU(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const ix=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},xU=async(t,e,n,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const a=t,l=a.status||500;if(typeof a.json=="function")a.json().then(u=>{const h=u?.statusCode||u?.code||l+"";e(new dc(ix(u),l,h,i))}).catch(()=>{if(i==="vectors"){const u=l+"";e(new dc(a.statusText||`HTTP ${l} error`,l,u,i))}else{const u=l+"";e(new dc(a.statusText||`HTTP ${l} error`,l,u,i))}});else{const u=l+"";e(new dc(a.statusText||`HTTP ${l} error`,l,u,i))}}else e(new P1(ix(t),t,i))},SU=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!i?me(me({},a),n):(gU(i)?(a.headers=me({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),me(me({},a),n))};async function po(t,e,n,i,a,l,u){return new Promise((h,f)=>{t(n,SU(e,i,a,l)).then(d=>{if(!d.ok)throw d;if(i?.noResolveJson)return d;if(u==="vectors"){const m=d.headers.get("content-type");if(!m||!m.includes("application/json"))return{}}return d.json()}).then(d=>h(d)).catch(d=>xU(d,f,i,u))})}function AU(t="storage"){return{get:async(e,n,i,a)=>po(e,"GET",n,i,a,void 0,t),post:async(e,n,i,a,l)=>po(e,"POST",n,a,l,i,t),put:async(e,n,i,a,l)=>po(e,"PUT",n,a,l,i,t),head:async(e,n,i,a)=>po(e,"HEAD",n,me(me({},i),{},{noResolveJson:!0}),a,void 0,t),remove:async(e,n,i,a,l)=>po(e,"DELETE",n,a,l,i,t)}}const TU=AU("storage"),{get:Zo,post:Ze,put:gy,head:EU,remove:wm}=TU;var ra=class{constructor(t,e={},n,i="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=mU(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sh(n))return{data:null,error:n};throw n}}},CU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(sh(e))return{data:null,error:e};throw e}}};let z1;z1=Symbol.toStringTag;var RU=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[z1]="BlobDownloadBuilder",this.promise=null}asStream(){return new CU(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(sh(e))return{data:null,error:e};throw e}}};const MU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var kU=class extends ra{constructor(t,e={},n,i){super(t,e,i,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,i){var a=this;return a.handleOperation(async()=>{let l;const u=me(me({},sx),i);let h=me(me({},a.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",a.encodeMetadata(f)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(f))):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(h=me(me({},h),i.headers));const d=a._removeEmptyFolders(e),m=a._getFinalPath(d),g=await(t=="PUT"?gy:Ze)(a.fetch,`${a.url}/object/${m}`,l,me({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{path:d,id:g.Id,fullPath:g.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,i){var a=this;const l=a._removeEmptyFolders(t),u=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${u}`);return h.searchParams.set("token",e),a.handleOperation(async()=>{let f;const d=me({upsert:sx.upsert},i),m=me(me({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",d.cacheControl)):(f=n,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType),{path:l,fullPath:(await gy(a.fetch,h.toString(),f,{headers:m})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(t);const a=me({},n.headers);e?.upsert&&(a["x-upsert"]="true");const l=await Ze(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:a}),u=new URL(n.url+l.url),h=u.searchParams.get("token");if(!h)throw new ih("No token returned by API");return{signedUrl:u.toString(),path:t,token:h}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var i=this;return i.handleOperation(async()=>await Ze(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers}))}async copy(t,e,n){var i=this;return i.handleOperation(async()=>({path:(await Ze(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(t,e,n){var i=this;return i.handleOperation(async()=>{let a=i._getFinalPath(t),l=await Ze(i.fetch,`${i.url}/object/sign/${a}`,me({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:i.headers});const u=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${l.signedURL}${u}`)}})}async createSignedUrls(t,e,n){var i=this;return i.handleOperation(async()=>{const a=await Ze(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a.map(u=>me(me({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${l}`):null}))})}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),u=()=>Zo(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new RU(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>my(await Zo(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await EU(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(sh(i)&&i instanceof P1){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],a=e?.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&i.push(a);const l=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&i.push(u);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await wm(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var i=this;return i.handleOperation(async()=>{const a=me(me(me({},MU),e),{},{prefix:t||""});return await Ze(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const i=me({},t);return await Ze(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const OU="2.93.1",pl={"X-Client-Info":`storage-js/${OU}`};var DU=class extends ra{constructor(t,e={},n,i){const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const l=a.href.replace(/\/$/,""),u=me(me({},pl),e);super(l,u,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Zo(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Zo(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Ze(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await gy(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await wm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},UU=class extends ra{constructor(t,e={},n){const i=t.replace(/\/$/,""),a=me(me({},pl),e);super(i,a,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),a=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Zo(e.fetch,a,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await wm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!bU(t))throw new ih("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new yU({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(a,l){const u=a[l];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(a,h),error:null}}catch(f){if(i)throw f;return{data:null,error:f}}}}})}},PU=class extends ra{constructor(t,e={},n){const i=t.replace(/\/$/,""),a=me(me({},pl),{},{"Content-Type":"application/json"},e);super(i,a,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Ze(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Ze(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},zU=class extends ra{constructor(t,e={},n){const i=t.replace(/\/$/,""),a=me(me({},pl),{},{"Content-Type":"application/json"},e);super(i,a,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},jU=class extends ra{constructor(t,e={},n){const i=t.replace(/\/$/,""),a=me(me({},pl),{},{"Content-Type":"application/json"},e);super(i,a,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ze(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},BU=class extends jU{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new NU(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},NU=class extends PU{constructor(t,e,n,i){super(t,e,i),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new IU(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},IU=class extends zU{constructor(t,e,n,i,a){super(t,e,a),this.vectorBucketName=n,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},LU=class extends DU{constructor(t,e={},n,i){super(t,e,n,i)}from(t){return new kU(this.url,this.headers,t,this.fetch)}get vectors(){return new BU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new UU(this.url+"/iceberg",this.headers,this.fetch)}};const j1="2.93.1",$s=30*1e3,by=3,Ap=by*$s,qU="http://localhost:9999",GU="supabase.auth.token",$U={"X-Client-Info":`gotrue-js/${j1}`},vy="X-Supabase-Api-Version",B1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VU=600*1e3;class Jo extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class FU extends Jo{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function YU(t){return fe(t)&&t.name==="AuthApiError"}class Bi extends Jo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Tr extends Jo{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class fn extends Tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tp(t){return fe(t)&&t.name==="AuthSessionMissingError"}class zs extends Tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pc extends Tr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yc extends Tr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XU(t){return fe(t)&&t.name==="AuthImplicitGrantRedirectError"}class ax extends Tr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class QU extends Tr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class _y extends Tr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ep(t){return fe(t)&&t.name==="AuthRetryableFetchError"}class ox extends Tr{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class wy extends Tr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lx=` 	
\r=`.split(""),KU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lx.length;e+=1)t[lx[e].charCodeAt(0)]=-2;for(let e=0;e<Bc.length;e+=1)t[Bc[e].charCodeAt(0)]=e;return t})();function ux(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Bc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Bc[i]),e.queuedBits-=6}}function N1(t,e,n){const i=KU[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function cx(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{JU(u,i,n)};for(let u=0;u<t.length;u+=1)N1(t.charCodeAt(u),a,l);return e.join("")}function WU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ZU(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}WU(i,e)}}function JU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ks(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)N1(t.charCodeAt(a),n,i);return new Uint8Array(e)}function eP(t){const e=[];return ZU(t,n=>e.push(n)),new Uint8Array(e)}function Ni(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>ux(a,n,i)),ux(null,n,i),e.join("")}function tP(t){return Math.round(Date.now()/1e3)+t}function nP(){return Symbol("auth-callback")}const Rt=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},I1=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function rP(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const L1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),iP=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Hs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ci=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Et=async(t,e)=>{await t.removeItem(e)};class ah{constructor(){this.promise=new ah.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ah.promiseConstructor=Promise;function mc(t){const e=t.split(".");if(e.length!==3)throw new wy("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!HU.test(e[i]))throw new wy("JWT not in base64url format");return{header:JSON.parse(cx(e[0])),payload:JSON.parse(cx(e[1])),signature:Ks(e[2]),raw:{header:e[0],payload:e[1]}}}async function sP(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function aP(t,e){return new Promise((i,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function oP(t){return("0"+t.toString(16)).substr(-2)}function lP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,oP).join("")}async function uP(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function cP(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await uP(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function js(t,e,n=!1){const i=lP();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Hs(t,`${e}-code-verifier`,a);const l=await cP(i);return[l,i===l?"plain":"s256"]}const hP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fP(t){const e=t.headers.get(vy);if(!e||!e.match(hP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dP(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pP(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bs(t){if(!yP.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mP(t,e){return new Proxy(t,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,a)}})}function hx(t){return JSON.parse(JSON.stringify(t))}const zi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gP=[502,503,504];async function fx(t){var e;if(!iP(t))throw new _y(zi(t),0);if(gP.includes(t.status))throw new _y(zi(t),t.status);let n;try{n=await t.json()}catch(l){throw new Bi(zi(l),l)}let i;const a=fP(t);if(a&&a.getTime()>=B1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new ox(zi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new ox(zi(n),t.status,n.weak_password.reasons);throw new FU(zi(n),t.status||500,i)}const bP=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function ye(t,e,n,i){var a;const l=Object.assign({},i?.headers);l[vy]||(l[vy]=B1["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await vP(t,e,n+h,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function vP(t,e,n,i,a,l){const u=bP(e,i,a,l);let h;try{h=await t(n,Object.assign({},u))}catch(f){throw console.error(f),new _y(zi(f),0)}if(h.ok||await fx(h),i?.noResolveJson)return h;try{return await h.json()}catch(f){await fx(f)}}function Bn(t){var e;let n=null;xP(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=tP(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function dx(t){const e=Bn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Jr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _P(t){return{data:t,error:null}}function wP(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:l}=t,u=rh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function px(t){return t}function xP(t){return t.access_token&&t.refresh_token&&t.expires_in}const Rp=["global","local","others"];class SP{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=L1(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Rp[0]){if(Rp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rp.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Jr})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=rh(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wP,redirectTo:n?.redirectTo})}catch(n){if(fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jr})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,l,u,h,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:px});if(m.error)throw m.error;const g=await m.json(),v=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(f=(h=m.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);d[`${S}Page`]=A}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(fe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Bs(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jr})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Bs(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Jr})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Bs(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Jr})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Bs(e.userId);try{const{data:n,error:i}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Bs(e.userId),Bs(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,a,l,u,h,f;try{const d={nextPage:null,lastPage:0,total:0},m=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:px});if(m.error)throw m.error;const g=await m.json(),v=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(f=(h=m.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(w=>{const A=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);d[`${S}Page`]=A}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(fe(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}}function yx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ns={debug:!!(globalThis&&I1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AP extends q1{}async function TP(t,e,n){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Ns.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AP(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ns.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function EP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function G1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function CP(t){return parseInt(t,16)}function RP(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function MP(t){var e;const{chainId:n,domain:i,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:h,requestId:f,resources:d,scheme:m,uri:g,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=G1(t.address),w=m?`${m}://${i}`:i,A=t.statement?`${t.statement}
`:"",S=`${w} wants you to sign in with your Ethereum account:
${b}

${A}`;let x=`URI: ${g}
Version: ${v}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),h&&(x+=`
Not Before: ${h.toISOString()}`),f&&(x+=`
Request ID: ${f}`),d){let C=`
Resources:`;for(const T of d){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);C+=`
- ${T}`}x+=C}return`${S}
${x}`}class ht extends Error{constructor({message:e,code:n,cause:i,name:a}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=a??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Nc extends ht{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function kP({error:t,options:e}){var n,i,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if($1(u)){if(l.rp.id!==u)return new ht({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function OP({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if($1(i)){if(n.rpId!==i)return new ht({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class DP{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const UP=new DP;function PP(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,a=rh(t,["challenge","user","excludeCredentials"]),l=Ks(e).buffer,u=Object.assign(Object.assign({},n),{id:Ks(n.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:u});if(i&&i.length>0){h.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const d=i[f];h.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:Ks(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return h}function zP(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=rh(t,["challenge","allowCredentials"]),a=Ks(e).buffer,l=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const h=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Ks(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function jP(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ni(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ni(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BP(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ni(new Uint8Array(a.authenticatorData)),clientDataJSON:Ni(new Uint8Array(a.clientDataJSON)),signature:Ni(new Uint8Array(a.signature)),userHandle:a.userHandle?Ni(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function mx(){var t,e;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function NP(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nc("Browser returned unexpected credential type",e)}:{data:null,error:new Nc("Empty credential response",e)}}catch(e){return{data:null,error:kP({error:e,options:t})}}}async function IP(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nc("Browser returned unexpected credential type",e)}:{data:null,error:new Nc("Empty credential response",e)}}catch(e){return{data:null,error:OP({error:e,options:t})}}}const LP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qP={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ic(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of t)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(n(u))i[l]=u;else if(e(u)){const h=i[l];e(h)?i[l]=Ic(h,u):i[l]=Ic(u)}else i[l]=u}return i}function GP(t,e){return Ic(LP,t,e||{})}function $P(t,e){return Ic(qP,t,e||{})}class HP{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:a},l){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:h};const f=a??UP.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:d}=u.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${i}`),d.displayName||(d.displayName=d.name)}switch(u.webauthn.type){case"create":{const d=GP(u.webauthn.credential_options.publicKey,l?.create),{data:m,error:g}=await NP({publicKey:d,signal:f});return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const d=$P(u.webauthn.credential_options.publicKey,l?.request),{data:m,error:g}=await IP(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:d,signal:f}));return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Bi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Jo("rpId is required for WebAuthn authentication")};try{if(!mx())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:l});if(!u)return{data:null,error:h};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:i,credential_response:f.credential_response}})}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Bi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!n)return{data:null,error:new Jo("rpId is required for WebAuthn registration")};try{if(!mx())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:h};const{data:f,error:d}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Bi("Unexpected error in register",u)}}}}EP();const VP={url:qU,storageKey:GU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$U,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gx(t,e,n){return await n()}const Is={};class el{get jwks(){var e,n;return(n=(e=Is[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Is[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},VP),e);if(this.storageKey=l.storageKey,this.instanceID=(n=el.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,el.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Rt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new SP({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=L1(l.fetch),this.lock=l.lock||gx,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&Rt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=TP:this.lock=gx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new HP(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:I1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yx(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=yx(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${j1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(Rt()&&(n=rP(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Rt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),XU(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return fe(n)?this._returnResult({error:n}):this._returnResult({error:new Bi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Bn}),{data:u,error:h}=l;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,i,a;try{let l;if("email"in e){const{email:m,password:g,options:v}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await js(this.storage,this.storageKey)),l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:m,password:g,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:Bn})}else if("phone"in e){const{phone:m,password:g,options:v}=e;l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(i=v?.data)!==null&&i!==void 0?i:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Bn})}else throw new pc("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return await Et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const f=u.session,d=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(l){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:h}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:dx})}else if("phone"in e){const{phone:l,password:u,options:h}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:dx})}else throw new pc("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const l=new zs;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,a,l,u,h,f,d,m,g,v;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:A,wallet:S,statement:x,options:C}=e;let T;if(Rt())if(typeof S=="object")T=S;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")T=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=S}const E=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href),D=await T.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=G1(D[0]);let M=(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!M){const j=await T.request({method:"eth_chainId"});M=CP(j)}const k={domain:E.host,address:O,statement:x,uri:E.href,version:"1",chainId:M,nonce:(a=C?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=C?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=C?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(m=C?.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=MP(k),w=await T.request({method:"personal_sign",params:[RP(b),O]})}try{const{data:A,error:S}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:w},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Bn});if(S)throw S;if(!A||!A.session||!A.user){const x=new zs;return this._returnResult({data:{user:null,session:null},error:x})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:S})}catch(A){if(fe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,i,a,l,u,h,f,d,m,g,v,b;let w,A;if("message"in e)w=e.message,A=e.signature;else{const{chain:S,wallet:x,statement:C,options:T}=e;let E;if(Rt())if(typeof x=="object")E=x;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))E=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const D=new URL((n=T?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const O=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let M;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")M=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)M=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),A=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(i=T?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=T?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((h=T?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((g=(m=T?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...T.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const O=await E.signMessage(new TextEncoder().encode(w),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=O}}try{const{data:S,error:x}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Ni(A)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Bn});if(x)throw x;if(!S||!S.session||!S.user){const C=new zs;return this._returnResult({data:{user:null,session:null},error:C})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:x})}catch(S){if(fe(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await Ci(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new QU;const{data:l,error:u}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Bn});if(await Et(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const h=new zs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:l,nonce:u}=e,h=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Bn}),{data:f,error:d}=h;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!f||!f.session||!f.user){const m=new zs;return this._returnResult({data:{user:null,session:null},error:m})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:d})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,a,l,u;try{if("email"in e){const{email:h,options:f}=e;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await js(this.storage,this.storageKey));const{error:g}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:h,options:f}=e,{data:d,error:m}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new pc("You must provide either an email or phone number.")}catch(h){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,i;try{let a,l;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Bn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,d=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:d,session:f},error:null})}catch(a){if(fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,i,a,l,u;try{let h=null,f=null;this.flowType==="pkce"&&([h,f]=await js(this.storage,this.storageKey));const d=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:f}),headers:this.headers,xform:_P});return!((l=d.data)===null||l===void 0)&&l.url&&Rt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(h){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new fn;const{error:a}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(fe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:l}=e,{error:u}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:i,type:a,options:l}=e,{data:u,error:h}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new pc("You must provide either an email or phone number and a type")}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ci(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Ap:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await Ci(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Cp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=mP(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jr}):await this._useSession(async n=>{var i,a,l;const{data:u,error:h}=n;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Jr})})}catch(n){if(fe(n))return Tp(n)&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:l}=i;if(l)throw l;if(!a.session)throw new fn;const u=a.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await js(this.storage,this.storageKey));const{data:d,error:m}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Jr});if(m)throw m;return u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fn;const n=Date.now()/1e3;let i=n,a=!0,l=null;const{payload:u}=mc(e.access_token);if(u.exp&&(i=u.exp,a=i<=n),a){const{data:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(fe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new fn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Rt())throw new yc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ax("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ax("No code detected.");const{data:C,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:d}=e;if(!l||!h||!u||!d)throw new yc("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(h);let v=m+g;f&&(v=parseInt(f));const b=v-m;b*1e3<=$s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const w=v-g;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,m);const{data:A,error:S}=await this._getUser(l);if(S)throw S;const x={provider_token:i,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:v,refresh_token:u,token_type:d,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(i){if(fe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ci(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l&&!Tp(l))return this._returnResult({error:l});const u=(i=a.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(YU(h)&&(h.status===404||h.status===401||h.status===403)||Tp(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=nP(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await js(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:a}=await this._useSession(async l=>{var u,h,f,d,m;const{data:g,error:v}=l;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return Rt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(fe(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:l}}=n;if(a)throw a;const{options:u,provider:h,token:f,access_token:d,nonce:m}=e,g=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:h,id_token:f,access_token:d,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Bn}),{data:v,error:b}=g;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new zs}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(a){if(await Et(this.storage,`${this.storageKey}-code-verifier`),fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:l,error:u}=n;if(u)throw u;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await aP(async a=>(a>0&&await sP(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bn})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Ep(l)&&Date.now()+u-i<$s})}catch(i){if(this._debug(n,"error",i),fe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Rt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ci(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Ci(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await Hs(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u?.user)!==null&&e!==void 0?e:Cp()}else if(a&&!a.user&&!a.user){const u=await Ci(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Et(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,a)):a.user=Cp()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ap;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Ap}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Ep(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(a.access_token);!h&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ah;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new fn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),fe(l)){const u={data:null,error:l};return Ep(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Et(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=hx(a);await Hs(this.storage,this.storageKey,l)}else{const a=hx(n);await Hs(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Et(this.storage,this.storageKey),await Et(this.storage,this.storageKey+"-code-verifier"),await Et(this.storage,this.storageKey+"-user"),this.userStorage&&await Et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/$s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$s}ms, refresh threshold is ${by} ticks`),a<=by&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof q1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await js(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);a.push(l.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;return l?this._returnResult({data:null,error:l}):await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:d}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?jP(e.webauthn.credential_response):BP(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:f}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:f}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:PP(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:zP(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,i,a,l;if(e)try{const{payload:b}=mc(e);let w=null;b.aal&&(w=b.aal);let A=w;const{data:{user:S},error:x}=await this.getUser(e);if(x)return this._returnResult({data:null,error:x});((i=(n=S?.factors)===null||n===void 0?void 0:n.filter(E=>E.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(A="aal2");const T=b.amr||[];return{data:{currentLevel:w,nextLevel:A,currentAuthenticationMethods:T},error:null}}catch(b){if(fe(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=mc(u.access_token);let d=null;f.aal&&(d=f.aal);let m=d;((l=(a=u.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(m="aal2");const v=f.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new fn})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new fn});const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Rt()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new fn});const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Rt()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new fn})})}catch(e){if(fe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fn})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(h=>h.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(h=>h.kid===e),i&&this.jwks_cached_at+VU>a)return i;const{data:l,error:u}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,i=l.keys.find(h=>h.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:w}=await this.getSession();if(w||!b.session)return this._returnResult({data:null,error:w});i=b.session.access_token}const{header:a,payload:l,signature:u,raw:{header:h,payload:f}}=mc(i);n?.allowExpired||dP(l.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:a,signature:u},error:null}}const m=pP(a.alg),g=await crypto.subtle.importKey("jwk",d,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,u,eP(`${h}.${f}`)))throw new wy("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}}el.nextInstanceID={};const FP=el,YP="2.93.1";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";function XP(){const t=globalThis.process;if(t&&t.platform){const e=t.platform;if(e==="darwin")return"macOS";if(e==="win32")return"Windows";if(e==="linux")return"Linux";if(e==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const e=navigator.userAgentData.platform;if(e==="macOS")return"macOS";if(e==="Windows")return"Windows";if(e==="Linux")return"Linux";if(e==="Android")return"Android";if(e==="iOS")return"iOS"}return null}function QP(){const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node&&typeof window>"u")try{const n=globalThis.require;if(n)return n("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function KP(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return"node"}return null}function WP(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return e.node}return null}function ZP(){const t={"X-Client-Info":`supabase-js-${Ao}/${YP}`},e=XP();e&&(t["X-Supabase-Client-Platform"]=e);const n=QP();n&&(t["X-Supabase-Client-Platform-Version"]=n);const i=KP();i&&(t["X-Supabase-Client-Runtime"]=i);const a=WP();return a&&(t["X-Supabase-Client-Runtime-Version"]=a),t}const JP=ZP(),ez={headers:JP},tz={schema:"public"},nz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rz={};function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(t)}function iz(t,e){if(tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(tl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sz(t){var e=iz(t,"string");return tl(e)=="symbol"?e:e+""}function az(t,e,n){return(e=sz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bx(Object(n),!0).forEach(function(i){az(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const oz=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lz=()=>Headers,uz=(t,e,n)=>{const i=oz(n),a=lz();return async(l,u)=>{var h;const f=(h=await e())!==null&&h!==void 0?h:t;let d=new a(u?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),i(l,it(it({},u),{},{headers:d}))}};function cz(t){return t.endsWith("/")?t:t+"/"}function hz(t,e){var n,i;const{db:a,auth:l,realtime:u,global:h}=t,{db:f,auth:d,realtime:m,global:g}=e,v={db:it(it({},f),a),auth:it(it({},d),l),realtime:it(it({},m),u),storage:{},global:it(it(it({},g),h),{},{headers:it(it({},(n=g?.headers)!==null&&n!==void 0?n:{}),(i=h?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function fz(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cz(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var dz=class extends FP{constructor(t){super(t)}},pz=class{constructor(t,e,n){var i,a;this.supabaseUrl=t,this.supabaseKey=e;const l=fz(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:tz,realtime:rz,auth:it(it({},nz),{},{storageKey:u}),global:ez},f=hz(n??{},h);if(this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=f.auth)!==null&&d!==void 0?d:{},this.headers,f.global.fetch)}this.fetch=uz(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(it({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new F3(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new LU(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new q3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:l,flowType:u,lock:h,debug:f,throwOnError:d},m,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dz({url:this.authUrl.href,headers:it(it({},v),m),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,flowType:u,lock:h,debug:f,throwOnError:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new uU(this.realtimeUrl.href,it(it({},t),{},{params:it(it({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const yz=(t,e,n)=>new pz(t,e,n);function mz(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}mz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xm=yz("https://pkswdnpftrundnewgnya.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrc3dkbnBmdHJ1bmRuZXdnbnlhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODI2MzIsImV4cCI6MjA2ODI1ODYzMn0.r_Y1RLOGJ55C0De5SBTVXqO09SMDqgV38sQuE-oDxXE"),gz=async t=>{if(t.locator.campaignName===void 0)throw new Error("can not save a campaign without a name");const e=await xm.rpc("save_campaign_version",{p_name:t.locator.campaignName,p_data:await B3(t),p_published:t.meta?.published??!1});if(e.error)throw new Error(`error saving to db ${e.error.message} ${e.error.details}`,{cause:e.error});return e.data},bz=async t=>{const e=await xm.rpc("get_latest_campaign",{p_campaign_name:t.campaignName,p_user_id:t.userId,p_version:t.version===-1?void 0:t.version});if(e.error)throw new Error("could not get campaign",{cause:e.error});const n=await R1(e.data.data);return Object.values(n.rooms).forEach(i=>{delete i.size}),n.locator===void 0&&(n.locator={userId:t.userId||"upgraded, unknown",campaignName:t.campaignName,version:e.data.version}),delete n.name,n},vz=async({publishedOnly:t})=>{const e=await xm.rpc("get_all_users_latest_campaigns",{p_published_only:t});if(e.error)throw new Error("could not get user campaigns",{cause:e.error});return e.data},Mp=t=>{const e=[];for(let n=t;n!==void 0;n=n instanceof Error?n.cause:void 0)n instanceof Error&&e.push({message:n.message,stack:n.stack});return e},nl=A1({reducerPath:"campaignsApi",baseQuery:t3(),endpoints:t=>({getCampaign:t.query({async queryFn(e){try{return e.userId==="@@original"&&e.campaignName==="original"?{data:(await A3()).campaign}:e.campaignName.startsWith("data:")?{data:await R1(e.campaignName.substring(5))}:{data:await bz(e)}}catch(n){return{error:Mp(new Error(`getCampaign queryFn( ${JSON.stringify(e)} ) failed: ${n}`))}}}}),getAllUsersLatestCampaigns:t.query({async queryFn({publishedOnly:e}){try{return{data:await vz({publishedOnly:e})}}catch(n){return{error:Mp(new Error(`getAllUsersLatestCampaigns queryFn() failed: ${n}`))}}}}),saveCampaign:t.mutation({async queryFn(e){try{return{data:await gz(e)}}catch(n){return{error:Mp(new Error(`saveCampaign queryFn( ${JSON.stringify(e)} ) failed: ${n}`))}}}})})}),{useGetAllUsersLatestCampaignsQuery:_j}=nl,_z=nl.endpoints.getCampaign.select,wz=(t,e)=>_z(e)(t).data,ai=t=>e=>zc(e.gameMenus.userSettings,t)??zc(Yo,t),Sm=ai("displaySettings.emulatedResolution"),xz=ai("gameSpeed"),wj=()=>pm(Sm),Sz=ai("displaySettings.uncolourised"),xj=()=>pm(Sz),Sj=ai("infiniteLivesPoke"),Aj=ai("infiniteDoughnutsPoke"),Az=ai("directionsRelativeTo"),Tz=ai("inputDirectionMode"),Ez=ai("displaySettings.showBoundingBoxes"),Tj=()=>pm(Ez),Cz=(t,e)=>!!(zc(t.userSettings,e)??zc(Yo,e)??!1),Ej=t=>{const e=t.gameMenus.gameInPlay.campaignLocator;return e===void 0?void 0:wz(t,e)},Rz=[1,1.2,1.5,2],Cj=["none","non-wall","all"],yo=t=>q2(DD(t,"userId","campaignName")),Mz=["4-way","8-way","analogue"],kz=xr()!=="server",Oz=kz?Xs().has("cheats"):!1,Dz={blacktooth:!1,bookworld:!1,egyptus:!1,penitentiary:!1,safari:!1},xy={planetsLiberated:Dz,roomsExplored:{},scrollsRead:{},reincarnationPoint:void 0,freeCharacters:{}},Sy={userSettings:PD,gameRunning:!1,gameInPlay:xy,openMenus:[{menuId:"mainMenu",scrollableSelection:!1,menuParam:kn}],assigningInput:void 0,cheatsOn:Oz,savedGames:{saves:{}}},ia=br({name:"gameMenus",initialState:Sy,reducers:{setEmulatedResolution(t,{payload:e}){let n;e===void 0?n=sc(RD,Sm({gameMenus:t})):n=e,t.userSettings.displaySettings.emulatedResolution=n},setGameSpeed(t,{payload:e}){let n;e===void 0?n=sc(Rz,xz({gameMenus:t})):n=e,t.userSettings.gameSpeed=n},scrollRead(t,{payload:e}){e.source==="manual"?(t.gameInPlay.scrollsRead[e.page]=!0,t.openMenus=[{menuId:`markdown/${e.page}`,scrollableSelection:!1,menuParam:kn}]):t.openMenus=[{menuId:"markdown/inline",scrollableSelection:!1,menuParam:{markdown:e.markdown}}]},nextInputDirectionMode(t){t.userSettings.inputDirectionMode=sc(Mz,Tz({gameMenus:t}))},nextDirectionRelativeTo(t){t.userSettings.directionsRelativeTo=sc(UD,Az({gameMenus:t}))},inputAddedDuringAssignment(t,{payload:e}){if(t.assigningInput===void 0)throw new Error("reducer called while not assigning keys");const n=(u,h)=>{u.includes(h)||u.push(h)},{presses:i,axes:a,action:l}=t.assigningInput;switch(e.type){case"key":n(i.keys,e.input);break;case"gamepadButtons":n(i.gamepadButtons,e.input);break;case"gamepadAxes":{Fy.includes(l)&&n(a,e.input);break}}},doneAssigningInput(t){if(t.assigningInput===void 0)throw new Error("illegal action for state");const{action:e,presses:n,axes:i}=t.assigningInput,a=n.keys.length+n.gamepadButtons.length+i.length,l=t.userSettings.inputAssignment===void 0?t.userSettings.inputAssignment=structuredClone(Gp.Default.inputAssignment):t.userSettings.inputAssignment;a>0&&(l.presses[e]=n,(e==="left"||e==="right")&&(l.axes.x=i),(e==="towards"||e==="away")&&(l.axes.y=i)),t.assigningInput=void 0},menuOpenOrExitPressed(t){if(t.openMenus.length>0){if(t.openMenus.length===1&&!t.gameRunning)return;const[,...e]=t.openMenus;t.openMenus=e}else t.openMenus=[{menuId:"mainMenu",scrollableSelection:!1,menuParam:kn}]},goToSubmenu(t,{payload:e}){t.openMenus=[{menuId:e,scrollableSelection:!1,menuParam:{}},...t.openMenus]},closeAllMenus(t){t.openMenus=[]},gameStarted(t,{payload:{campaignLocator:e,noShowCrowns:n}}){if(t.gameRunning)throw new Error("game is already running");t.openMenus=n?[]:[{menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!1}}],t.gameRunning=!0,t.gameInPlay={...xy,campaignLocator:e}},backToParentMenu(t){const[,...e]=t.openMenus;t.openMenus=e},assignInputStart(t,{payload:e}){t.assigningInput={action:e,presses:{gamepadButtons:[],keys:[]},axes:[]}},keyAssignmentPresetChosen(t,{payload:e}){const[,...n]=t.openMenus;t.openMenus=n,t.userSettings.inputAssignment=Gp[e].inputAssignment},setFocussedMenuItemId(t,{payload:{focussedItemId:e,scrollableSelection:n}}){const[i]=t.openMenus;i.focussedItemId=e,i.scrollableSelection=n},holdPressed(t,{payload:e}){t.openMenus.length>0?t.openMenus[0]?.menuId==="hold"&&e!=="hold"&&(t.openMenus=[]):e!=="unhold"&&(t.openMenus=[{menuId:"hold",scrollableSelection:!1,menuParam:kn}])},mapPressed(t){const e={menuId:"map",scrollableSelection:!1,menuParam:kn};if(t.openMenus.length>=1){const i=t.openMenus.at(0)?.menuId;if(i==="map"){const[,...a]=t.openMenus;t.openMenus=a}else i==="hold"&&(t.openMenus=[e,...t.openMenus])}else t.openMenus=[e]},setShowBoundingBoxes(t,{payload:e}){t.userSettings.displaySettings.showBoundingBoxes=e},setShowShadowMasks(t,{payload:e}){t.userSettings.displaySettings.showShadowMasks=e},toggleUserSetting(t,{payload:{path:e,value:n}}){OD(t.userSettings,e,n??!Cz(t,e))},crownCollected(t,{payload:e}){t.gameInPlay.planetsLiberated[e]=!0;const n=Object.values(t.gameInPlay.planetsLiberated).every(l=>l),a={menuId:"crowns",scrollableSelection:!1,menuParam:{playMusic:!(t.userSettings.soundSettings.mute??Yo.soundSettings.mute)}};n?t.openMenus=[{menuId:"proclaimEmperor",scrollableSelection:!1,menuParam:kn},a]:t.openMenus=[a]},roomExplored(t,{payload:e}){t.gameInPlay.roomsExplored[e]=!0},gameOver(t,{payload:{offerReincarnation:e}}){if(e&&t.gameInPlay.reincarnationPoint!==void 0)t.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:kn},{menuId:"offerReincarnation",scrollableSelection:!1,menuParam:kn}];else{t.gameRunning=!1,delete t.gameInPlay.reincarnationPoint;const n=t.gameInPlay.campaignLocator,i=n&&yo(n);i&&(delete t.savedGames.saves[i],delete t.savedGames.lastSavedCampaignLocator),t.openMenus=[{menuId:"score",scrollableSelection:!1,menuParam:kn},{menuId:"mainMenu",scrollableSelection:!0,menuParam:kn}]}},reincarnationFishEaten(t,{payload:e}){t.gameInPlay.reincarnationPoint=e},reincarnationAccepted(t){delete t.gameInPlay.reincarnationPoint,t.openMenus=[{menuId:"reincarnatedRestart",scrollableSelection:!1,menuParam:kn}]},saveGame(t,{payload:e}){const n=t.gameInPlay.campaignLocator;if(n===void 0)throw new Error("trying to save a game, but seems like there's no campaign to save against");if(PR())throw new Error("shouldn't be saving in playtest mode");t.savedGames.saves[yo(n)]=e,t.savedGames.lastSavedCampaignLocator=n},gameRestoreFromSave(t,{payload:e}){t.gameInPlay={freeCharacters:{},...e},e.freeCharacters===void 0&&(t.gameInPlay.freeCharacters={})},errorCaught(t,{payload:e}){t.openMenus=[{menuId:"errorCaught",scrollableSelection:!1,menuParam:e}]},errorDismissed(t,{payload:e}){switch(e){case"ignore":t.openMenus=[];break;case"clearAllData":Object.assign(t,Sy),t.gameRunning=!1;break}},debugItemClicked(t,e){},characterRoomChange(t,e){},lostLife(t,e){},characterReachesFreedom(t,{payload:e}){t.gameInPlay.freeCharacters[e]=!0}},extraReducers(t){t.addCase(cl,(e,n)=>{if(Xs().get("campaignName")?.startsWith("data:"))return;const i=[{menuId:"hold",scrollableSelection:!1,menuParam:kn}],a={userId:Xs().get("campaignAuthorUserId")??void 0,campaignName:Xs().get("campaignName")??void 0},l=n.payload?.savedGames;if((d=>d.userId!==void 0&&d.campaignName!==void 0)(a)){e.gameRunning=!0;const d=l?.saves[yo(a)];if(d){e.gameRunning=!0,e.gameInPlay={freeCharacters:{},...d.store.gameMenus.gameInPlay},e.openMenus=i;return}else{e.gameRunning=!0,e.gameInPlay={...xy,campaignLocator:a},e.openMenus=i;return}}const h=l?.lastSavedCampaignLocator,f=h&&l.saves[yo(h)];f&&(e.gameRunning=!0,e.gameInPlay={freeCharacters:{},...f.store.gameMenus.gameInPlay},e.openMenus=i)})},selectors:{selectHasError(t){return t.openMenus.some(e=>e.menuId==="errorCaught")},selectSaveForCampaign(t,e){return t.savedGames.saves[yo(e)]}}}),{assignInputStart:Rj,backToParentMenu:Mj,characterReachesFreedom:kj,characterRoomChange:Oj,closeAllMenus:Dj,crownCollected:Uj,debugItemClicked:Uz,doneAssigningInput:Pj,errorCaught:zj,errorDismissed:jj,gameOver:Bj,gameRestoreFromSave:Nj,gameStarted:Ij,goToSubmenu:Lj,holdPressed:qj,inputAddedDuringAssignment:Gj,keyAssignmentPresetChosen:$j,lostLife:Hj,mapPressed:Vj,menuOpenOrExitPressed:Fj,nextDirectionRelativeTo:Yj,nextInputDirectionMode:Xj,reincarnationAccepted:Qj,reincarnationFishEaten:Kj,roomExplored:Wj,saveGame:Zj,scrollRead:Jj,setEmulatedResolution:Pz,setFocussedMenuItemId:eB,setGameSpeed:tB,setShowBoundingBoxes:nB,setShowShadowMasks:rB,toggleUserSetting:iB}=ia.actions,{selectHasError:sB}=ia.selectors;ia.selectors.selectSaveForCampaign;ia.actions;const Ct=t=>{const e=Sy.userSettings;return console.log("migrating state: persisted is:",t,"I am not migrating - reverting to initial/default state:",e),e},zz=z2({1:Ct,2:Ct,3:Ct,4:Ct,5:Ct,6:Ct,7:Ct,8:Ct,9:Ct,10:Ct,11:Ct,12:Ct,13:Ct,14:Ct,15:Ct,16:Ct,17:Ct}),jz=["userSettings","savedGames"],Bz=17,Nz={key:"hohol/gameMenus/userSettings",version:Bz,migrate:zz,storage:L2,whitelist:jz},Iz=R2(Nz,ia.reducer),Lz={count:0},Lc=br({name:"gameAssetsLoading",initialState:Lz,reducers:{gameAssetsLoadingStarted(t){t.count++},gameAssetsLoadingFinished(t){t.count=Math.max(0,t.count-1)}},selectors:{selectGameAssetsLoadingCount(t){return t.count}}}),{gameAssetsLoadingStarted:aB,gameAssetsLoadingFinished:oB}=Lc.actions,{selectGameAssetsLoadingCount:lB}=Lc.selectors,Ay=A1({reducerPath:"githubApi",baseQuery:FD({baseUrl:"https://api.github.com"}),endpoints:t=>({getLatestRelease:t.query({query:()=>"/repos/jimhigson/head-over-heels-online/releases/latest"})})}),qz=t=>xr()==="server"?fm.zxSpectrum.size:t?{x:t.clientWidth,y:t.clientHeight}:{x:window.innerWidth,y:window.innerHeight},H1=(t,e,n)=>{const i=xr();return{renderAreaSize:qz(n),emulatedResolutionName:t,devicePixelRatio:i==="server"?1:window.devicePixelRatio,maximumCanvasUpscale:e.crtFilter?6:8}},vx=5,V1=({renderAreaSize:t,emulatedResolutionName:e,devicePixelRatio:n,deviceType:i=xr(),maximumCanvasUpscale:a})=>{const l=fm[e],{renderAreaSize:u,rotate90:h}=i!=="desktop"&&t.x<t.y?{renderAreaSize:{x:t.y,y:t.x},rotate90:!0}:{renderAreaSize:t,rotate90:!1},f=V2(u,n),d=Math.max(Math.floor(vx*Math.min(f.x/l.size.x,f.y/l.size.y))/vx,1),m=Math.min(a,d),g=d/m/n,v={x:Math.floor(f.x/d),y:Math.floor(f.y/d)},b={x:Math.ceil(u.x/g),y:Math.ceil(u.y/g)};return{gameEngineUpscale:m,cssUpscale:g,gameEngineScreenSize:v,canvasSize:b,rotate90:h}},Gz={upscale:V1(H1(Yo.displaySettings.emulatedResolution,Yo.displaySettings))},rl=br({name:"upscale",initialState:Gz,reducers:{upscaleToWindow(t,{payload:e}){t.upscale=V1(e)}},selectors:{selectCanvasSize(t){return t.upscale.canvasSize},selectGameEngineUpscale(t){return t.upscale.gameEngineUpscale},selectGameEngineScreenSize(t){return t.upscale.gameEngineScreenSize},selectRot90(t){return t.upscale.rotate90},selectUpscale(t){return t.upscale},selectTotalUpscale({upscale:{cssUpscale:t,gameEngineUpscale:e}}){return t*e}}}),{upscaleToWindow:$z}=rl.actions,{selectCanvasSize:uB,selectRot90:cB,selectUpscale:hB,selectGameEngineUpscale:fB,selectTotalUpscale:dB,selectGameEngineScreenSize:pB}=rl.selectors;rl.actions;const F1=(t,e,n,i)=>{t($z(H1(n??Sm(e()),e().gameMenus.userSettings.displaySettings,i)))},Hz=()=>{xr()!=="server"&&Jx({actionCreator:Pz,effect(t,{dispatch:e,getState:n}){F1(e,n)}})},Vz=()=>{xr()!=="server"&&Jx({predicate(t,{gameMenus:{userSettings:{displaySettings:e}}},{gameMenus:{userSettings:{displaySettings:n}}}){return e!==n},effect(t,{dispatch:e,getState:n}){F1(e,n)}})},Ty=p2({[ia.reducerPath]:Iz,[rl.reducerPath]:rl.reducer,[nl.reducerPath]:nl.reducer,[Ay.reducerPath]:Ay.reducer,[Lc.reducerPath]:Lc.reducer}).withLazyLoadedSlices(),Fz=Ty.inject,Yz=(t,e)=>e.type==="@@_RESET_FOR_TESTS"?Ty(void 0,e):Ty(t,e),oh=UC({reducer:Yz,middleware:t=>t({serializableCheck:{ignoredActions:[qy,cl,Gy,$y,Hy,Vy,Uz.type]}}).prepend(Zx.middleware).concat(nl.middleware).concat(Ay.middleware)});typeof window<"u"&&(window._e2e_store=oh);Hz();Vz();P2(oh);const Xz="/editor/assets/sprites-DicoUlr6.png";var Qz=`#version 300 es
precision highp float;in vec2 vTextureCoord;out vec4 finalColor;uniform sampler2D uTexture;uniform sampler2D uMask;void main(void){vec4 c=texture(uTexture,vTextureCoord);float maskVal=texture(uMask,vTextureCoord).r;vec4 shadowColor=vec4(0.0,0.0,0.0,c.a*(1.0-c.r));finalColor=mix(c,shadowColor,maskVal);}`;const Kz=Wc.from({vertex:xD,fragment:Qz,name:"preprocess-shadow-textures-filter"});class Wz extends lk{#e;constructor(e){super({glProgram:Kz,resources:{uMask:e.source}}),this.#e=e}destroy(e){const n=e===!0||typeof e=="object"&&e.destroyPrograms;(e===!0||typeof e=="object"&&e.destroyMask)&&this.#e?.destroy(!0),this.#e=null,super.destroy(n)}}const Zz=t=>{const e=new DataView(t),n=[];n.push(t.slice(0,8));let i=8;for(;i<t.byteLength;){const h=e.getUint32(i),f=new TextDecoder().decode(new Uint8Array(t,i+4,4)),d=12+h;f!=="iCCP"&&n.push(t.slice(i,i+d)),i+=d}const a=n.reduce((h,f)=>h+f.byteLength,0),l=new Uint8Array(a);let u=0;for(const h of n)l.set(new Uint8Array(h),u),u+=h.byteLength;return l.buffer},Jz=["moonbase"];function*qc(t,e,n){const i=({x:a,y:l,w:u,h,pivot:f})=>e==="x"?{...Mo(n,{x:-a-u-1,y:l}),w:u,h,pivot:{x:u-f.x,y:f.y}}:{...Mo(n,{x:a+2,y:l}),w:u,h,pivot:f};yield[`door.frame.${t}.${e}.whole`,{frame:{...i({x:-41,y:0,w:40,h:64,pivot:{x:9,y:63}})}}],yield[`door.frame.${t}.${e}.far`,{frame:{...i({x:-18,y:0,w:17,h:57,pivot:{x:9,y:52}})}}],yield[`door.frame.${t}.${e}.near`,{frame:{...i({x:-41,y:6,w:20,h:58,pivot:{x:8,y:58}})}}],yield[`door.frame.${t}.${e}.top`,{frame:{...i({x:-57,y:-1,w:15,h:36,pivot:{x:0,y:37}})}}]}const e4={frames:Xy(hR(qc("generic","y",{x:580,y:415}),qc("generic","x",{x:582,y:415})))},Ri=(t,{x:e,y:n},i)=>{function*a(){yield[`${t}.left`,{frame:{x:e,y:n,...i}}],yield[`${t}.away`,{frame:{x:e+i.w+1,y:n,...i}}],yield[`${t}.towards`,{frame:{x:e,y:n+i.h+1,...i}}],yield[`${t}.right`,{frame:{x:e+i.w+1,y:n+i.h+1,...i}}]}return Object.fromEntries(a())},Ge=(t,e,{x:n,y:i},a,l=e)=>{function*u(){for(let h=0;h<e;h++)yield[`${t}.${h+1}`,{frame:{x:n+h%l*(a.w+1),y:i+Math.floor(h/l)*(a.h+1),...a}}]}return Object.fromEntries(u())},_x=(t,{x:e,y:n},i,a=t.length,l)=>{function*u(){for(let h=0;h<t.length;h++)yield[l?`${l}.${t[h]}`:t[h],{frame:{x:e+h%a*(i.w+1),y:n+Math.floor(h/a)*(i.h+1),...i}}]}return Object.fromEntries(u())},t4=(t,e,n,i)=>({...Ge(`${t}.left`,e,n,i),...Ge(`${t}.away`,e,Mo(n,{x:(i.w+1)*e}),i),...Ge(`${t}.towards`,e,Mo(n,{y:i.h+1}),i),...Ge(`${t}.right`,e,Mo(n,{x:(i.w+1)*e,y:i.h+1}),i)}),Zr=(t,e)=>[...Qy(_R(1,e+1)).map(n=>`${t}.${String(n)}`)],n4={frames:{..._x(["share","save","open","pointer","eyedropper"],{x:640,y:10},{w:12,h:12},void 0,"editor.tool"),..._x(["single","corridor","double","triple.line","triple.^","quad.square","quad.s","quad.31","quad.t","5.x"],{x:640,y:0},{w:9,h:9},void 0,"editor.addRoom")}},Y1={" ":"space",",":"comma",";":"scolon",":":"colon",".":"dot","'":"sQuote","":"lQuote","":"rQuote","`":"backtick","<":"lt",">":"gt","?":"questMk","!":"exclMk","-":"hyph","/":"slash","\\":"bSlash"},Mn=t=>Y1[t].toUpperCase(),r4=t=>Y1[t]??t,Ey={w:32,h:16},Nn={w:16,h:56},ve={w:32,h:28},re={w:24,h:24},gc={w:8,h:8},yB={h:10},ne=t=>({x:t.x*(re.w+1)+1,y:t.y*(re.h+1)+2}),Se=t=>({x:t.x*(ve.w+1)+1,y:t.y*(ve.h+1)+682}),i4="",s4="",a4="",o4="",l4="",u4="",c4=[{char:"a",width:8},{char:"b",width:8},{char:"c",width:7},{char:"d",width:8},{char:"e",width:8},{char:"f",width:6},{char:"g",width:8},{char:"h",width:8},{char:"i",width:4},{char:"j",width:5},{char:"k",width:8},{char:"l",width:5},{char:"m",width:9},{char:"n",width:8},{char:"o",width:8},{char:"p",width:8},{char:"q",width:8},{char:"r",width:5},{char:"s",width:6},{char:"t",width:6},{char:"u",width:8},{char:"v",width:8},{char:"w",width:9},{char:"x",width:8},{char:"y",width:8},{char:"z",width:6},{char:"?",width:6},{char:"!",width:4},{char:".",width:4},{char:",",width:4},{char:";",width:4},{char:":",width:3},{char:"/",width:7},{char:"\\",width:7},{char:"",width:4},{char:"",width:4},{char:"'",width:4},{char:"-",width:5}],h4=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_","#","","","","",{char:"",width:16},{char:i4,width:16},{char:s4,width:16}],f4=[" ",Mn("?"),Mn("!"),Mn("."),Mn(","),Mn(";"),Mn(":"),Mn("/"),Mn("\\"),Mn(""),Mn(""),Mn("'"),"`",Mn("-"),"+","%","","","","","","","","","(",")","[","]","<",">","","","","EnterFullscreen","ExitFullscreen","","*","@","",a4,o4,l4,u4,"","","^","","","","","&"],kp=(t,e,n=gc.h)=>{function*i(){let{x:a}=e;for(let l=0;l<t.length;l++){const u=t[l],h=typeof u=="string"?u:u.char,d=(typeof u=="string"?void 0:u.width)??gc.w;yield[`hud.char.${r4(h)}`,{frame:{x:a,y:e.y,...gc,w:d,h:n}}],a+=Math.max(d,gc.w)+1}}return Xy(i())},d4={frames:{...kp(c4,{x:1,y:994},10),...kp(h4,{x:1,y:1005}),...kp(f4,{x:1,y:1014})}},_e=(t,e)=>Object.assign([...t],{animationSpeed:e});let ke=0,Ae=0;const p4={...Ge("dalek",2,ne({x:0,y:0}),re),...Ge("dalek.dark",2,ne({x:0,y:1}),re),"shadowMask.dalek":{frame:{...ne({x:2,y:0}),...re}},headlessBase:{frame:{...ne({x:7,y:0}),...re}},...Ge("headlessBase",4,ne({x:8,y:0}),re),"headlessBase.all":{frame:{...ne({x:12,y:0}),...re}},...t4("turtle",2,ne({x:0,y:3}),re),"shadowMask.turtle.away":{frame:{...ne({x:4,y:3}),...re}},"shadowMask.turtle.right":{frame:{...ne({x:4,y:4}),...re}},...Ri("cyberman",ne({x:6,y:3}),re),...Ri("skiHead.greenAndPink",ne({x:9,y:3}),{w:24,h:32}),...Ri("skiHead.starsAndStripes",ne({x:11,y:3}),{w:24,h:32}),"shadowMask.skiHead.away":{frame:{...ne({x:13,y:3}),...re,h:32}},"shadowMask.skiHead.right":{frame:{...ne({x:14,y:3}),...re,h:32}},...Ri("charles",ne({x:0,y:5}),re),"shadowMask.charles.away":{frame:{...ne({x:2,y:5}),...re}},"shadowMask.charles.right":{frame:{...ne({x:2,y:6}),...re}},...Ri("monkey",ne({x:0,y:7}),re),...Ri("computerBot",ne({x:3,y:7}),re),...Ri("elephant",ne({x:6,y:7}),re),...Ge("helicopterBug",4,ne({x:9,y:7}),re),"barrier.x.disappearing":{frame:{...ne({x:17,y:0}),...re,pivot:{x:18,y:23}}},"barrier.y.disappearing":{frame:{...ne({x:18,y:0}),...re,pivot:{x:6,y:23}}},"barrier.x":{frame:{...ne({x:19,y:0}),...re,pivot:{x:18,y:23}}},"barrier.y":{frame:{...ne({x:20,y:0}),...re,pivot:{x:6,y:23}}},"shadow.barrier.y":{frame:{...ne({x:21,y:0}),...re,pivot:{x:6,y:22}}},"shadowMask.barrier.y":{frame:{...ne({x:22,y:0}),...re,pivot:{x:6,y:22}}},"joystick.stick":{frame:{...ne({x:18,y:1}),...re}},"joystick.ball":{frame:{...ne({x:19,y:1}),...re}},"joystick.whole":{frame:{...ne({x:20,y:1}),...re}},"shadowMask.joystick":{frame:{...ne({x:21,y:1}),...re}},ball:{frame:{...ne({x:17,y:2}),...re}},"shadowMask.ball":{frame:{...ne({x:18,y:2}),...re}},"ball.uncolourised":{frame:{...ne({x:19,y:2}),...re}},"spikyBall.1":{frame:{...ne({x:20,y:2}),...re}},"spikyBall.2":{frame:{...ne({x:21,y:2}),...re}},tower:{frame:{...ne({x:15,y:3}),...re}},"shadowMask.tower":{frame:{...ne({x:16,y:3}),...re}},sticks:{frame:{...ne({x:18,y:3}),...re}},cube:{frame:{...ne({x:19,y:3}),...re}},drum:{frame:{...ne({x:21,y:3}),...re}},"shadowMask.drum":{frame:{...ne({x:22,y:3}),...re}},puck:{frame:{...ne({x:15,y:4}),...re}},"shadow.smallRound":{frame:{...ne({x:16,y:4}),...re}},"shadowMask.smallRound":{frame:{...ne({x:17,y:4}),...re}},"spring.compressed":{frame:{...ne({x:19,y:4}),...re}},"spring.released":{frame:{...ne({x:20,y:4}),...re}},"shadowMask.spring.compressed":{frame:{...ne({x:21,y:4}),...re}},"shadowMask.spring.released":{frame:{...ne({x:22,y:4}),...re}},...Ge("fish",2,ne({x:16,y:6}),re),doughnuts:{frame:{...ne({x:18,y:6}),...re}},"shadowMask.doughnuts":{frame:{...ne({x:19,y:6}),...re}},hooter:{frame:{...ne({x:21,y:6}),...re}},bag:{frame:{...ne({x:22,y:6}),...re}},whiteRabbit:{frame:{...ne({x:24,y:6}),...re}},"shadowMask.whiteRabbit":{frame:{...ne({x:25,y:6}),...re}},"crown.blacktooth":{frame:{...ne({x:ke=16,y:Ae=7}),...re}},"crown.safari":{frame:{...ne({x:++ke,y:Ae}),...re}},"crown.egyptus":{frame:{...ne({x:++ke,y:Ae}),...re}},"crown.penitentiary":{frame:{...ne({x:++ke,y:Ae}),...re}},"crown.bookworld":{frame:{...ne({x:++ke,y:Ae}),...re}},"crown.uncolourised":{frame:{...ne({x:++ke,y:Ae}),...re}},scroll:{frame:{...ne({x:ke=16,y:Ae=8}),...re,pivot:{x:17,y:24}}},"shadow.scroll":{frame:{...ne({x:++ke,y:Ae}),...re,pivot:{x:17,y:24}}},"shadowMask.scroll":{frame:{...ne({x:++ke,y:Ae}),...re,pivot:{x:17,y:24}}},buttonInGame:{frame:{...ne({x:ke=16,y:Ae=9}),...re}},"buttonInGame.pressed":{frame:{...ne({x:++ke,y:Ae}),...re}},"shadowMask.buttonInGame":{frame:{...ne({x:++ke,y:Ae}),...re}},"switch.left":{frame:{...ne({x:++ke,y:Ae}),...re}},"switch.right":{frame:{...ne({x:++ke,y:Ae}),...re}},"shadowMask.switch":{frame:{...ne({x:++ke,y:Ae}),...re}},"lift.static":{frame:{...ne({x:16,y:Ae=10}),...re}},...Ge("lift",4,ne({x:17,y:Ae}),re),"shadow.smallBlock":{frame:{...ne({x:21,y:Ae}),...re}},"shadowMask.smallBlock":{frame:{...ne({x:22,y:Ae}),...re}},"shadow.wallCorner":{frame:{...ne({x:21,y:Ae+1}),...re}},...Ge("shadow.lift",4,ne({x:17,y:11}),re),...Ge("bubbles.white",3,ne({x:ke=23,y:Ae=9}),re),...Ge("bubbles.taupe",3,ne({x:ke,y:++Ae}),re),...Ge("bubbles.jetpack",2,ne({x:ke,y:++Ae}),re),...Ge("bubbles.blueGreen",2,ne({x:ke,y:++Ae}),re),"ball.blueGreen":{frame:{...ne({x:ke+2,y:Ae}),...re}},...Ge("bubbles.cold",2,ne({x:ke,y:++Ae}),re),"block.organic":{frame:{...Se({x:0,y:0}),...ve}},"block.organic.disappearing":{frame:{...Se({x:1,y:0}),...ve}},"block.organic.dark":{frame:{...Se({x:2,y:0}),...ve}},"block.organic.dark.disappearing":{frame:{...Se({x:3,y:0}),...ve}},"shadowMask.organic":{frame:{...Se({x:4,y:0}),...ve}},"block.artificial":{frame:{...Se({x:5,y:0}),...ve}},"block.artificial.disappearing":{frame:{...Se({x:6,y:0}),...ve}},"shadowMask.artificial":{frame:{...Se({x:7,y:0}),...ve}},"book.x":{frame:{...Se({x:8,y:0}),...ve}},"book.y":{frame:{...Se({x:9,y:0}),...ve}},"shadowMask.book":{frame:{...Se({x:10,y:0}),...ve}},"shadowMask.fullBlock":{frame:{...Se({x:10,y:0}),...ve}},"shadow.fullBlock":{frame:{...Se({x:11,y:0}),...ve}},spikes:{frame:{...Se({x:12,y:0}),...ve}},"shadowMask.spikes":{frame:{...Se({x:13,y:0}),...ve}},stepStool:{frame:{...Se({x:ke=0,y:Ae=1}),...ve}},"shadowMask.stepStool":{frame:{...Se({x:++ke,y:Ae}),...ve}},"volcano.1":{frame:{...Se({x:++ke,y:Ae}),...ve}},"volcano.2":{frame:{...Se({x:++ke,y:Ae}),...ve}},"shadowMask.volcano":{frame:{...Se({x:++ke,y:Ae}),...ve}},hushPuppy:{frame:{...Se({x:++ke,y:Ae}),...ve}},"shadowMask.hushPuppy":{frame:{...Se({x:++ke,y:Ae}),...ve}},"toaster.on":{frame:{...Se({x:++ke,y:Ae}),...ve}},"toaster.off":{frame:{...Se({x:++ke,y:Ae}),...ve}},"toaster.off.1":{frame:{...Se({x:ke,y:Ae}),...ve}},"toaster.off.2":{frame:{...Se({x:++ke,y:Ae}),...ve}},"shadowMask.toaster":{frame:{...Se({x:++ke,y:Ae}),...ve}},sandwich:{frame:{...Se({x:++ke,y:Ae}),...ve}},"shadowMask.sandwich":{frame:{...Se({x:++ke,y:Ae}),...ve}},...Ge("conveyor.x",7,Se({x:0,y:2}),ve),"shadowMask.conveyor":{frame:{...Se({x:7,y:2}),...ve}},button:{frame:{...Se({x:9,y:2}),...ve}},"button.pressed":{frame:{...Se({x:10,y:2}),...ve}},"button.surfaceMask":{frame:{...Se({x:11,y:2}),...ve}},...Ge("conveyor.y",7,Se({x:0,y:3}),ve),teleporter:{frame:{...Se({x:7,y:3}),...ve}},...Ge("teleporter.flashing",2,Se({x:8,y:3}),ve),"shadowMask.teleporter":{frame:{...Se({x:10,y:3}),...ve}},"shadowMask.teleporter.flashing":{frame:{...Se({x:11,y:3}),...ve}},...Ge("particle.head",4,{x:100,y:798},{w:9,h:11}),...Ge("particle.heels",4,{x:100,y:856},{w:9,h:11})},X1={frames:p4,animations:{"teleporter.flashing":_e(["teleporter.flashing.1","teleporter.flashing.2"],.5),fish:_e(["fish.1","fish.2"],.25),lift:_e(["lift.1","lift.2","lift.3","lift.4"],.5),"shadow.lift":_e(["shadow.lift.1","shadow.lift.2","shadow.lift.3","shadow.lift.4"],.5),dalek:_e(["dalek.1","dalek.2"],.5),"dalek.dark":_e(["dalek.dark.1","dalek.dark.2"],.5),"turtle.left":_e(["turtle.left.1","turtle.left.2"],.25),"turtle.away":_e(["turtle.away.1","turtle.away.2"],.25),"turtle.towards":_e(["turtle.towards.1","turtle.towards.2"],.25),"turtle.right":_e(["turtle.right.1","turtle.right.2"],.25),helicopterBug:_e(["helicopterBug.1","helicopterBug.2","helicopterBug.3","helicopterBug.4"],.5),"bubbles.cold":_e(["bubbles.cold.1","bubbles.cold.2"],.25),"bubbles.blueGreen":_e(["bubbles.blueGreen.1","bubbles.blueGreen.2"],.25),"bubbles.white":_e(["bubbles.white.1","bubbles.white.2","bubbles.white.3"],.5),"bubbles.bounce.white":_e(["bubbles.white.1","bubbles.white.2","bubbles.white.3","bubbles.white.2"],.5),"bubbles.doughnut":_e(["bubbles.taupe.1","bubbles.taupe.2"],.5),"bubbles.jetpack":_e(["bubbles.jetpack.1","bubbles.jetpack.2"],.25),"conveyor.x":_e(Zr("conveyor.x",7),.5),"conveyor.y":_e(Zr("conveyor.y",7),.5),volcano:_e(Zr("volcano",2),3/16),"toaster.off":_e(Zr("toaster.off",2),3/16),"spring.bounce":_e(["spring.released","spring.compressed","spring.released","spring.compressed","spring.released"],.5),"shadowMask.spring.bounce":_e(["shadowMask.spring.released","shadowMask.spring.compressed","shadowMask.spring.released","shadowMask.spring.compressed","shadowMask.spring.released"],.5),"headlessBase.scan":_e(["headlessBase.4","headlessBase","headlessBase.3","headlessBase","headlessBase.2","headlessBase","headlessBase.1","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase","headlessBase.all","headlessBase","headlessBase","headlessBase","headlessBase"],.25),"headlessBase.flash":_e(["headlessBase.all","headlessBase"],.5),switch:_e(["switch.left","switch.right"],.02),"particle.head.fade":_e(Zr("particle.head",4),.5),"particle.heels.fade":_e(Zr("particle.heels",4),.5)}},y4=.5,Q1=5e3,m4=Q1*2,mo=(t,e)=>{const n=Math.round(Q1/(hm*4)),i=`head.walking.${t}.${e}`,a=`head.blinking.${t}`,l=[...new Array(n-3).fill(i),a,i,a];return _e(l,.5)},go=(t,e=2)=>{const n=Math.round(m4/(hm*4)),i=t==="towards"||t==="right"?`heels.standing.${t}`:`heels.walking.${t}.${e}`,a=`heels.blinking.${t}`,l=[...new Array(Math.floor(n*.8)).fill(i),...new Array(Math.ceil(n*.2)).fill(a)];return _e(l,.5)},wx=(t,e,n,i={})=>{const a=["awayLeft","away","awayRight","right","towardsRight","towards","towardsLeft","left"];function*l(){for(let u=0;u<eS.length;u++){const h=a[u];if(!n[h]?.noShadowMaskFalling){const d=`shadowMask.${t}.falling.${h}`;yield[d,{frame:{...ne({x:e.x,y:e.y+u}),...re,...i[d]}}]}if(!n[h]?.noShadowMask){const d=`shadowMask.${t}.${h}`;yield[d,{frame:{...ne({x:e.x+1,y:e.y+u}),...re,...i[d]}}]}for(let d=1;d<=3;d++){const m=`${t}.walking.${h}.${d}`;yield[m,{frame:{...ne({x:e.x+d+1,y:e.y+u}),...re,...i[m]}}]}const f=`${t}.falling.${h}`;if(yield[f,{frame:{...ne({x:e.x+5,y:e.y+u}),...re,...i[f]}}],!n[h]?.noBlinking){const d=`${t}.blinking.${h}`;yield[d,{frame:{...ne({x:e.x+6,y:e.y+u}),...re,...i[d]}}]}if(!n[h]?.noStanding){const d=`${t}.standing.${h}`;yield[d,{frame:{...ne({x:e.x+7,y:e.y+u}),...re,...i[d]}}]}}}return Object.fromEntries(l())};function xx(t){function*e(n,i){yield`${n}.walking.${i}.1`,yield`${n}.walking.${i}.2`,yield`${n}.walking.${i}.3`,yield`${n}.walking.${i}.2`}return eS.reduce((n,i)=>({...n,[`${t}.walking.${i}`]:_e([...e(t,i)],y4)}),{})}const g4={...Ge("bubbles.head",6,ne({x:1,y:10}),re),...wx("head",{x:0,y:11},{awayLeft:{noBlinking:!0,noStanding:!0,noShadowMaskFalling:!0},away:{noBlinking:!0,noStanding:!0},awayRight:{noStanding:!0},right:{noStanding:!0},towardsRight:{noStanding:!0},towards:{noShadowMask:!0,noStanding:!0,noShadowMaskFalling:!0},towardsLeft:{noShadowMask:!0,noStanding:!0,noShadowMaskFalling:!0},left:{noBlinking:!0,noShadowMask:!0,noStanding:!0,noShadowMaskFalling:!0}},{"head.falling.awayRight":{pivot:{x:11,y:24}},"head.falling.towardsLeft":{pivot:{x:13,y:24}},"head.falling.awayLeft":{pivot:{x:12,y:25}}}),...Ge("bubbles.heels",6,ne({x:9,y:10}),re),...wx("heels",{x:8,y:11},{awayLeft:{noBlinking:!0,noStanding:!0,noShadowMaskFalling:!0},away:{noBlinking:!0,noStanding:!0,noShadowMaskFalling:!0},awayRight:{noStanding:!0,noShadowMaskFalling:!0},right:{noShadowMaskFalling:!0},towardsRight:{noStanding:!0,noShadowMaskFalling:!0},towards:{noShadowMask:!0,noShadowMaskFalling:!0},towardsLeft:{noShadowMask:!0,noStanding:!0,noShadowMaskFalling:!0},left:{noBlinking:!0,noShadowMask:!0,noStanding:!0,noShadowMaskFalling:!0}}),...Ge("shine.head",6,Se({x:0,y:4}),ve,3),...Ge("shine.heels",6,Se({x:0,y:6}),ve,3),blank:{frame:{...ne({x:0,y:2}),...re}},"shadow.playable":{frame:{...ne({x:7,y:10}),...re}}},K1={frames:g4,animations:{...xx("head"),...xx("heels"),"heels.screenDirections":_e(["heels.walking.towardsRight.2","heels.walking.towardsLeft.2","heels.walking.awayLeft.2","heels.walking.awayRight.2"],1/16),"heels.worldDirections":_e(["heels.standing.towards","heels.walking.left.2","heels.walking.away.2","heels.standing.right"],1/16),"heels.mixedDirections":_e(["heels.walking.towardsRight.2","heels.standing.towards","heels.walking.towardsLeft.2","heels.walking.left.2","heels.walking.awayLeft.2","heels.walking.away.2","heels.walking.awayRight.2","heels.standing.right"],1/8),"head.idle.right":mo("right",3),"head.idle.towards":mo("towards",3),"head.idle.towardsRight":mo("towardsRight",2),"head.idle.towardsLeft":mo("towardsLeft",3),"head.idle.awayRight":mo("awayRight",3),"heels.idle.right":go("right"),"heels.idle.towards":go("towards"),"heels.idle.towardsRight":go("towardsRight",2),"heels.idle.towardsLeft":go("towardsLeft",2),"heels.idle.awayRight":go("awayRight",2),"head.fadeOut":_e(["bubbles.head.1","bubbles.head.2","bubbles.head.4","bubbles.head.3","bubbles.head.4","bubbles.head.6","bubbles.head.5","bubbles.head.6","bubbles.head.5"],.5),"heels.fadeOut":_e(["bubbles.heels.1","bubbles.heels.2","bubbles.heels.4","bubbles.heels.3","bubbles.heels.4","bubbles.heels.6","bubbles.heels.5","bubbles.heels.6","bubbles.heels.5"],.5),"shine.head":_e(Zr("shine.head",6),.5),"shine.heels":_e(Zr("shine.heels",6),.5),"shine.headInSymbio":_e(["shine.head.1","shine.head.2","shine.head.3","blank","blank","blank","blank","blank","blank","shine.head.4","shine.head.5","shine.head.6"],.5),"shine.heelsInSymbio":_e(["blank","blank","blank","shine.heels.1","shine.heels.2","shine.heels.3","shine.heels.4","shine.heels.5","shine.heels.6","blank","blank","blank"],.5)}},W1={jail:["bars"],blacktooth:["plain","shield","armour"],bookworld:["book","cowboy"],egyptus:["hieroglyphics","sarcophagus"],market:["more-fruits","fruits","passage"],moonbase:["coil","window3","window2","window1","window-clear"],penitentiary:["skeleton","loop"],safari:["wall","shield","window"]},mB=Object.keys(W1),gB=["blacktooth","penitentiary","bookworld","egyptus","safari"],Dt=(t,e,n,i)=>{const a=Jz.includes(t);function*l(u,h,f){const d=W1[u],{w:m,h:g}=Nn,v=m>>1;for(let b=0;b<d.length;b++)yield[`${u}${i}.wall.${d[b]}.left`,{frame:{x:h-m*(b+1),y:f+v*b,...Nn}}],yield[`${u}${i}.wall.${d[b]}.away`,{frame:{x:h+m*b,y:f+v*b,...Nn}}];if(yield[`${u}${i}.floor`,{frame:{x:h-m,y:f+g,...Ey}}],a){const b=f+v*d.length-9;yield*qc(`${u}${i}`,"x",{x:h+m*d.length+1,y:b}),yield*qc(`${u}${i}`,"y",{x:h-m*d.length-2,y:b})}}return Object.fromEntries(l(t,e,n))},Sx={w:16,h:13},Ax={w:8,h:9},Fn=74;let Ut=53;const b4={...Dt("egyptus",834,Ut,""),...Dt("egyptus",834,Ut+=Fn,".dark"),...Dt("moonbase",834,Ut+=Fn,""),...Dt("moonbase",834,Ut+=Fn,".dark"),...Dt("bookworld",834,Ut+=Fn,""),...Dt("bookworld",834,Ut,".dark"),...Dt("jail",834,Ut+=Fn,""),...Dt("jail",834,Ut,".dark"),...Dt("blacktooth",834,Ut+=Fn,""),...Dt("blacktooth",834,Ut+=Fn,".dark"),...Dt("penitentiary",834,Ut+=Fn,""),...Dt("penitentiary",834,Ut,".dark"),...Dt("market",834,Ut+=Fn,""),...Dt("market",834,Ut,".dark"),...Dt("safari",834,Ut+=Fn,""),...Dt("safari",834,Ut,".dark"),"floorEdge.right":{frame:{x:418,y:466,...Sx,pivot:{x:0,y:4}}},"floorEdge.towards":{frame:{x:401,y:466,...Sx,pivot:{x:15,y:4}}},"floorEdge.half.right":{frame:{x:418,y:470,...Ax,pivot:{x:0,y:0}}},"floorEdge.half.towards":{frame:{x:401,y:466,...Ax,pivot:{x:7,y:0}}},"floorOverdraw.cornerNearWall":{frame:{x:623,y:452,w:Nn.w,h:8}},"shadow.wall.y":{frame:{x:432,y:435,w:36,h:16}},"shadow.doorFrame.top.y":{frame:{x:432,y:402,w:36,h:32,pivot:{x:18,y:31.5}}},"generic.floor.deadly":{frame:{x:785,y:462,...Ey}},"generic.dark.floor.deadly":{frame:{x:785,y:479,...Ey}},"generic.door.legs.pillar.y":{frame:{x:508,y:476,w:Nn.w,h:12}},"generic.door.legs.base.y":{frame:{x:508,y:488,w:Nn.w,h:9}},"generic.door.legs.pillar.x":{frame:{x:524,y:476,w:Nn.w,h:12}},"generic.door.legs.base.x":{frame:{x:524,y:488,w:Nn.w,h:9}},"generic.door.legs.threshold.double.x":{frame:{x:508,y:452,w:Nn.w*2,h:24}},"generic.door.legs.threshold.double.y":{frame:{x:469,y:452,w:Nn.w*2,h:24}},"shadowMask.door.legs.threshold.double.y":{frame:{x:469,y:430,w:Nn.w*2,h:21,pivot:{x:0,y:21}}},"generic.door.floatingThreshold.x":{frame:{x:457,y:492,w:26,h:19,pivot:{x:18,y:12}}},"generic.door.floatingThreshold.y":{frame:{x:430,y:492,w:26,h:19,pivot:{x:8,y:12}}},"shadowMask.door.floatingThreshold.double.y":{frame:{x:541,y:480,w:42,h:21,pivot:{x:8,y:20}}},"shadow.door.floatingThreshold.double.y":{frame:{x:584,y:480,w:42,h:21,pivot:{x:8,y:20}}},...Ge("moonbase.wall.screen.window1.away",3,{x:883,y:217},{w:10,h:7}),...Ge("moonbase.wall.screen.window2.away",2,{x:867,y:209},{w:10,h:7}),...Ge("moonbase.wall.screen.window3.away",4,{x:851,y:201},{w:10,h:7})},Z1={frames:b4,animations:{"moonbase.wall.screen.window1.away":_e(["moonbase.wall.screen.window1.away.1","moonbase.wall.screen.window1.away.2","moonbase.wall.screen.window1.away.3"],1/16),"moonbase.wall.screen.window2.away":_e(["moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.1","moonbase.wall.screen.window2.away.2"],1/16),"moonbase.wall.screen.window3.away":_e(["moonbase.wall.screen.window3.away.1","moonbase.wall.screen.window3.away.2","moonbase.wall.screen.window3.away.3","moonbase.wall.screen.window3.away.4","moonbase.wall.screen.window3.away.4"],1/16)}},v4={...X1.frames,...K1.frames,...Z1.frames,...d4.frames,...e4.frames,...n4.frames},Am={frames:v4,animations:{...K1.animations,...X1.animations,...Z1.animations},meta:{scale:1}},_4=Object.keys(Am.frames),bc={w:1024,h:1024},w4=new Ve(0),x4=new Ve(16777215),S4=t=>typeof t=="function"?Qy(_4).filter(t):t,A4=(t,{rects:e,placeholderColoursMasks:n,clearColour:i})=>{const a=new Pc,l=new na({children:[a]});if(i!==void 0&&a.rect(0,0,bc.w,bc.h).fill(i),e!==void 0){const{textureIds:h,color:f}=e,d=S4(h);for(const m of d){const{frame:{x:g,y:v,w:b,h:w}}=Am.frames[m];a.rect(g,v,b,w).fill(f)}}if(n!==void 0&&n.textureIds.length>0){const{textureIds:h,filter:f,originalSpritesheet:d}=n;for(const m of h){const g=new Hi({texture:d.textures[m],x:d.data.frames[m].frame.x,y:d.data.frames[m].frame.y,filters:f});l.addChild(g)}}const u=th.create({width:bc.w,height:bc.h});return t.render({container:l,target:u}),u};let il,ti;const T4=async()=>{if(il!==void 0)return il;try{const e=await(await fetch(Xz)).arrayBuffer(),n=Zz(e),i=new Blob([n],{type:"image/png"}),a=await createImageBitmap(i);ti=je.from(a)}catch{console.warn("did not load textures - hopefully we are running under node"),ti=je.EMPTY}},bB=t=>{if(ti===void 0)throw new Error("cannot init original spritesheet before texture load");const e=A4(t,{rects:{textureIds:u=>u.startsWith("shadow."),color:x4},clearColour:w4}),n=new Wz(e),i=new Hi(ti);i.filters=n;const a=th.create({width:ti.width,height:ti.height});t.render({container:i,target:a});const l=new Kp(a,Am);l.parseSync(),l.textureSource.scaleMode="nearest",il=l,i.destroy(),e.destroy(!0)},vB=()=>{if(il===void 0)throw new Error(`spritesheet not loaded - only call this from inside code 
      (like in a render loop) that is protected and only executed once 
      loading has happened`);return il},_B=()=>{if(ti===void 0)throw new Error(`spritesheet not loaded - only call this from inside code 
      (like in a render loop) that is protected and only executed once 
      loading has happened`);return ti},E4=t=>({children:n})=>{const[i,a]=ce.useState(!1);return ce.useEffect(()=>{t().then(()=>{a(!0)})}),i?n:null},C4=E4(T4),R4=T1(async()=>{const[t,e]=await Promise.all([Lo(()=>import("./LevelEditor-dgNeyyT-.js").then(n=>n.L),__vite__mapDeps([4,5,3])),Lo(()=>import("./levelEditorSlice-DV1_qcla.js").then(n=>n.b3),__vite__mapDeps([5,3]))]);return Fz(e.levelEditorSlice),oh.dispatch(e.injected()),t}),M4=ce.lazy(R4),k4=()=>To.jsx(C4,{children:To.jsx(M4,{})});DE.createRoot(document.getElementById("root")).render(To.jsx(ce.StrictMode,{children:To.jsx(XE,{store:oh,children:To.jsx(k4,{})})}));export{qn as $,em as A,Vo as B,Ve as C,hl as D,si as E,dl as F,Pc as G,Dn as H,$S as I,cO as J,fO as K,mO as L,De as M,vO as N,Zc as O,jt as P,lk as Q,Zp as R,jk as S,je as T,Xp as U,QR as V,fl as W,Wc as X,xO as Y,Wt as Z,yS as _,ZM as a,gR as a$,wS as a0,q_ as a1,Hi as a2,CM as a3,$_ as a4,ep as a5,H_ as a6,MM as a7,uS as a8,vt as a9,I4 as aA,q4 as aB,kn as aC,B4 as aD,DD as aE,z4 as aF,H2 as aG,$2 as aH,Aj as aI,oh as aJ,Sj as aK,Y2 as aL,ol as aM,Yo as aN,oj as aO,zy as aP,PD as aQ,J4 as aR,ej as aS,Z4 as aT,nj as aU,tj as aV,q2 as aW,mj as aX,gB as aY,_R as aZ,hj as a_,bS as aa,th as ab,ED as ac,Ke as ad,Wy as ae,zt as af,Fk as ag,Ik as ah,hO as ai,dO as aj,bO as ak,_O as al,wO as am,pm as an,SR as ao,hm as ap,Nn as aq,uj as ar,Oc as as,j4 as at,$4 as au,W4 as av,_c as aw,X2 as ax,F4 as ay,Y4 as az,Qt as b,Tj as b$,K4 as b0,Q4 as b1,P4 as b2,X4 as b3,dC as b4,V4 as b5,br as b6,Mx as b7,Lo as b8,xD as b9,Am as bA,zc as bB,H4 as bC,N4 as bD,pj as bE,_4 as bF,wR as bG,_B as bH,Kp as bI,A4 as bJ,vB as bK,hR as bL,x4 as bM,w4 as bN,fj as bO,sj as bP,Ej as bQ,Mo as bR,fB as bS,gc as bT,r4 as bU,MD as bV,y4 as bW,re as bX,Ez as bY,Sz as bZ,Uz as b_,Pt as ba,rw as bb,xS as bc,qs as bd,R_ as be,co as bf,xo as bg,kw as bh,KR as bi,bj,ce as bk,F1 as bl,hB as bm,d1 as bn,ij as bo,G4 as bp,L4 as bq,U4 as br,To as bs,gj as bt,yj as bu,rj as bv,RD as bw,Jx as bx,aj as by,Cz as bz,He as c,bB as c0,rR as c1,iR as c2,Yy as c3,ME as c4,D4 as c5,dB as c6,wj as c7,cB as c8,xr as c9,fm as ca,O4 as cb,V2 as cc,Xy as cd,yB as ce,T1 as cf,Qw as cg,rh as ch,vj as ci,Gc as cj,Cj as ck,nB as cl,xj as cm,xm as cn,s4 as co,i4 as cp,B3 as cq,mB as cr,nl as cs,lB as ct,dj as cu,_j as cv,TE as cw,lj as cx,wc as d,Fe as e,NO as f,Ar as g,MO as h,Qy as i,yD as j,MS as k,yn as l,gS as m,Zu as n,pR as o,cM as p,na as q,Qc as r,eh as s,tm as t,ft as u,Uk as v,dn as w,Jc as x,nw as y,xc as z};
