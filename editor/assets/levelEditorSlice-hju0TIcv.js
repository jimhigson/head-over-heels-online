import{a5 as q,a6 as ie,a7 as G,a8 as F,a9 as X,aa as z,ab as M,ac as Ge,ad as uo,ae as B,af as Xe,ag as Ue,ah as mo,ai as yo,aj as po,ak as go,al as ho,am as L,an as Io,ao as Ae,ap as U,aq as Ve,ar as vo,as as wo,at as Ye,au as xo,av as Ke,aw as bo,ax as Ro,ay as Eo}from"./index-DX-sRscx.js";var V={},Y={},ke;function Ao(){if(ke)return Y;ke=1;function e(c,y){var i;if(typeof Symbol>"u"||c[Symbol.iterator]==null){if(Array.isArray(c)||(i=o(c))||y){i&&(c=i);var f=0,n=function(){};return{s:n,n:function(){return f>=c.length?{done:!0}:{done:!1,value:c[f++]}},e:function(m){throw m},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,p=!1,u;return{s:function(){i=c[Symbol.iterator]()},n:function(){var m=i.next();return l=m.done,m},e:function(m){p=!0,u=m},f:function(){try{!l&&i.return!=null&&i.return()}finally{if(p)throw u}}}}function o(c,y){if(c){if(typeof c=="string")return t(c,y);var i=Object.prototype.toString.call(c).slice(8,-1);if(i==="Object"&&c.constructor&&(i=c.constructor.name),i==="Map"||i==="Set")return Array.from(c);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(c,y)}}function t(c,y){(y==null||y>c.length)&&(y=c.length);for(var i=0,f=new Array(y);i<y;i++)f[i]=c[i];return f}var r=q(),s=r.ensureIterable;function a(c){var y=[],i=e(c),f;try{for(i.s();!(f=i.n()).done;){var n=f.value;y.push(n)}}catch(l){i.e(l)}finally{i.f()}return y}Y.__toArray=a;function d(c){return a(s(c))}return Y.toArray=d,Y}var ze;function ko(){if(ze)return V;ze=1;var e=ie(),o=e.mark(d),t=q(),r=t.iterableCurry,s=Ao(),a=s.__toArray;function d(y,i){var f;return e.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(f=Array.isArray(y)?y:a(y),f.length){l.next=3;break}return l.abrupt("return");case 3:if(!i--){l.next=7;break}return l.delegateYield(f,"t0",5);case 5:l.next=3;break;case 7:case"end":return l.stop()}},o)}V.__cycleTimes=d;var c=r(d);return V.cycleTimes=c,V}var K={},Se;function zo(){if(Se)return K;Se=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var l=0,p=function(){};return{s:p,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,l=new Array(f);n<f;n++)l[n]=i[n];return l}var a=q(),d=a.iterableCurry;function c(i,f){var n,l,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=0,l=t(i),m.prev=2,l.s();case 4:if((p=l.n()).done){m.next=11;break}if(u=p.value,!f(u,n++)){m.next=9;break}return m.next=9,u;case 9:m.next=4;break;case 11:m.next=16;break;case 13:m.prev=13,m.t0=m.catch(2),l.e(m.t0);case 16:return m.prev=16,l.f(),m.finish(16);case 19:case"end":return m.stop()}},o,null,[[2,13,16,19]])}K.__filter=c;var y=d(c);return K.filter=y,K}var Z={},Ce;function So(){if(Ce)return Z;Ce=1;var e=q(),o=e.iterableCurry,t=ko(),r=t.__cycleTimes;function s(d){return r(d,1/0)}Z.__cycle=s;var a=o(s);return Z.cycle=a,Z}var Q={},Te;function Co(){if(Te)return Q;Te=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var l=0,p=function(){};return{s:p,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,l=new Array(f);n<f;n++)l[n]=i[n];return l}var a=q(),d=a.iterableCurry;function c(i,f){var n,l,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n=0,l=t(i),m.prev=2,l.s();case 4:if((p=l.n()).done){m.next=11;break}if(u=p.value,!(n++>=f)){m.next=9;break}return m.next=9,u;case 9:m.next=4;break;case 11:m.next=16;break;case 13:m.prev=13,m.t0=m.catch(2),l.e(m.t0);case 16:return m.prev=16,l.f(),m.finish(16);case 19:case"end":return m.stop()}},o,null,[[2,13,16,19]])}Q.__drop=c;var y=d(c);return Q.drop=y,Q}var ee={},oe={},Pe;function To(){if(Pe)return oe;Pe=1;var e=q(),o=e.iterableCurry,t=e.callReturn;function r(a,d){var c=a[Symbol.iterator](),y=c.next(),i=y.value,f=y.done;return f?d:(t(c),i)}oe.__firstOr=r;var s=o(r,{reduces:!0});return oe.firstOr=s,oe}var Fe;function Po(){if(Fe)return ee;Fe=1;var e=q(),o=e.iterableCurry,t=To(),r=t.__firstOr;function s(d){return r(d,void 0)}ee.__first=s;var a=o(s,{reduces:!0});return ee.first=a,ee}var te={},Oe;function Fo(){if(Oe)return te;Oe=1;var e=ie(),o=e.mark(c);function t(i,f){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=r(i))||f){n&&(i=n);var l=0,p=function(){};return{s:p,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(g){throw g},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,m;return{s:function(){n=i[Symbol.iterator]()},n:function(){var g=n.next();return u=g.done,g},e:function(g){h=!0,m=g},f:function(){try{!u&&n.return!=null&&n.return()}finally{if(h)throw m}}}}function r(i,f){if(i){if(typeof i=="string")return s(i,f);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(i,f)}}function s(i,f){(f==null||f>i.length)&&(f=i.length);for(var n=0,l=new Array(f);n<f;n++)l[n]=i[n];return l}var a=q(),d=a.iterableCurry;function c(i,f){var n,l,p,u;return e.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(f!==0){m.next=2;break}return m.abrupt("return");case 2:n=0,l=t(i),m.prev=4,l.s();case 6:if((p=l.n()).done){m.next=14;break}return u=p.value,m.next=10,u;case 10:if(++n!==f){m.next=12;break}return m.abrupt("break",14);case 12:m.next=6;break;case 14:m.next=19;break;case 16:m.prev=16,m.t0=m.catch(4),l.e(m.t0);case 19:return m.prev=19,l.f(),m.finish(19);case 22:case"end":return m.stop()}},o,null,[[4,16,19,22]])}te.__take=c;var y=d(c);return te.take=y,te}var ae,$e;function Oo(){return $e||($e=1,ae=So().cycle),ae}var $o=Oo();const Wo=G($o);var ce,We;function _o(){return We||(We=1,ce=Co().drop),ce}var qo=_o();const Mo=G(qo);var le,_e;function No(){return _e||(_e=1,le=zo().filter),le}var Ho=No();const Jo=G(Ho);var de,qe;function Bo(){return qe||(qe=1,de=Po().first),de}var Lo=Bo();const ge=G(Lo);var fe,Me;function jo(){return Me||(Me=1,fe=Fo().take),fe}var Do=jo();const Go=G(Do),T=e=>e.campaignInProgress.rooms[e.currentlyEditingRoomId],he=(e,o)=>e.campaignInProgress.rooms[o],Ze=(e,o,t)=>e.campaignInProgress.rooms[t??e.currentlyEditingRoomId]?.items[o],Xo=(e,o)=>e.selectedJsonItemIds.includes(o),H=e=>{const o=structuredClone(F(T(e))),{history:t}=e;t.redo=[],t.undo.push(o)},Uo={undo(e){const o=e,{campaignInProgress:t,history:{undo:r,redo:s},currentlyEditingRoomId:a}=o;r.length!==0&&(s.push(t.rooms[a]),t.rooms[a]=r.pop())},redo(e){const o=e,{campaignInProgress:t,history:{redo:r,undo:s},currentlyEditingRoomId:a}=o;r.length!==0&&(s.push(t.rooms[a]),t.rooms[a]=r.pop())}},Vo={selectCanUndo:e=>e.history.undo.length>0,selectCanRedo:e=>e.history.redo.length>0},ue={x:1,y:0,z:0},me={x:-1,y:0,z:0},ye={x:0,y:-1,z:0},pe={x:0,y:1,z:0},j={away:pe,left:ue,right:me,towards:ye,down:{x:0,y:0,z:-1},up:{x:0,y:0,z:1},awayRight:X(z(pe,me)),towardsRight:X(z(ye,me)),towardsLeft:X(z(ye,ue)),awayLeft:X(z(pe,ue))},Yo=(e,o,t)=>{if(o==="*")return!0;const r=t.meta.subRooms[o];return e.x>=r.physicalPosition.from.x&&e.y>=r.physicalPosition.from.y&&e.x<=r.physicalPosition.to.x&&e.y<=r.physicalPosition.to.y},Ko=({position:e},o,t)=>Yo(e,o,t),re=(e,o,t,r)=>o.some(s=>s.config.direction===e)?"doorway":t===void 0?"wall":Object.values(t).some(({gridPosition:s})=>mo(j[e],yo(s,r)))?"open":"wall";function*N(e){try{yield*Zo(e)}catch(o){const t=o;throw new Error(`
  error in recursion ${e.roomId}/${e.subRoomId??"*"}`,{cause:t})}}function*Zo({roomId:e,subRoomId:o="*",campaign:t,visited:r={},vectorFromPrevious:s,previousRoomGridPosition:a=B}){if(e==="nowhere"||r[e]?.[o])return;r[e]===void 0&&(r[e]={}),r[e][o]=!0;const d=t.rooms[e];if(d===void 0)throw new Error(`no room in the campaign with id="${e}"`);const c=[...M(Ge(d.items)).filter(p=>p.type==="door").filter(p=>Ko(p,o,d))],y=z(a,s===void 0?uo:s),i=d.meta?.subRooms;if(i){if(o==="*")throw new Error(`subRoomId '*' means 'all' and is not allowed for big rooms. Must be one of the sub-rooms in ${e}: ${Object.keys(i)}`);if(!i[o])throw new Error(`Sub-room ${o} not found in room ${e}. Available sub-rooms: ${Object.keys(i)}`)}const f=i?.[o].gridPosition,n={left:re("left",c,i,f),right:re("right",c,i,f),away:re("away",c,i,f),towards:re("towards",c,i,f)};if(yield{roomId:e,subRoomId:o,gridPosition:y,boundaries:n},i!==void 0){if(f===void 0)throw new Error(`Sub-room ${o} not found in room ${e}. Available sub-rooms: ${Object.keys(i)}`);for(const[p,{gridPosition:u}]of M(Xe(i)))p!==o&&(yield*N({roomId:e,subRoomId:p,campaign:t,visited:r,vectorFromPrevious:Ue({...u,z:0},f),previousRoomGridPosition:y}))}if(d.roomAbove!==void 0){const{roomAbove:p,subRoomAbove:u}=d;yield*N({roomId:p,subRoomId:u,campaign:t,visited:r,vectorFromPrevious:j.up,previousRoomGridPosition:y})}if(d.roomBelow!==void 0){const{roomBelow:p,subRoomBelow:u}=d;yield*N({roomId:p,subRoomId:u,campaign:t,visited:r,vectorFromPrevious:j.down,previousRoomGridPosition:y})}for(const p of c){const{toRoom:u}=p.config;yield*N({roomId:u,campaign:t,visited:r,subRoomId:p.config.meta?.toSubRoom,vectorFromPrevious:j[p.config.direction],previousRoomGridPosition:y})}const l=d.meta?.nonContiguousRelationship;if(l!==void 0){const{with:{room:p},gridOffset:u}=l;yield*N({roomId:p,campaign:t,visited:r,subRoomId:"*",vectorFromPrevious:u,previousRoomGridPosition:y})}}const Qo={jail:["bars"],blacktooth:["plain","plain","armour","shield","shield","armour"],bookworld:["book","book","cowboy"],egyptus:["hieroglyphics","hieroglyphics","hieroglyphics","sarcophagus","sarcophagus"],market:["passage","more-fruits","fruits","more-fruits","fruits"],moonbase:["coil","window1","window2","window3"],penitentiary:["loop","loop","skeleton"],safari:["wall","shield","wall","window","window","wall","shield"]},D=(e,o,t=0)=>{const r=Wo(Qo[e]);return Mo(t,Go(o+t,r))},et=e=>({awayWall:{type:"wall",config:{direction:"away",tiles:Array.from(D("blacktooth",e.x))},position:{x:0,y:e.y,z:0}},leftWall:{type:"wall",config:{direction:"left",tiles:Array.from(D("blacktooth",e.y))},position:{x:e.x,y:0,z:0}},towardsWall:{type:"wall",config:{direction:"towards",times:{x:e.x}},position:{x:0,y:0,z:0}},rightWall:{type:"wall",config:{direction:"right",times:{y:e.y}},position:{x:0,y:0,z:0}}}),Qe=e=>({planet:"blacktooth",color:{hue:"cyan",shade:"basic"},items:{floor:{type:"floor",config:{floorType:"standable",scenery:"blacktooth",times:e},position:{x:0,y:0,z:0}},...et(e)}}),eo=(e,o)=>{e.planet=o;for(const t of Object.values(e.items))t.type==="floor"&&t.config.floorType==="standable"&&(t.config.scenery=o),t.type==="wall"&&(t.config.direction==="away"||t.config.direction==="left")&&(t.config.tiles=Array.from(D(o,t.config.tiles.length))),t.type==="pickup"&&t.config.gives==="crown"&&po.includes(o)&&(t.config.planet=o)},ot=e=>e[Math.floor(Math.random()*e.length)],ve=(e,o,t)=>{const s=`room_${M(go({start:0})).find(c=>e.campaignInProgress.rooms[`room_${c}`]===void 0)}`,a=t??{hue:ot(ho),shade:Math.random()<.66?"basic":"dimmed"},d={id:s,...structuredClone(Qe({x:8,y:8})),color:a};return eo(d,o),e.campaignInProgress.rooms[s]=d,d},we=(e,o,t)=>{if(o.type==="player"){const{which:s}=o.config;return t?`preview-${s}`:s}const r=o.type==="monster"?o.config.which:o.type;for(let s=1;;s++){const a=s===1?r:`${r}_${s}`;if(!e.items[a])return a}},Ie=(e,o,t,r)=>{const s=T(e),a=we(s,o,r),d=oo(e,r),c={type:o.type,config:o.config,position:t};return d[a]=c,[a,c]},oo=(e,o,t=e.currentlyEditingRoomId)=>o?e.previewedEdits:e.campaignInProgress.rooms[t].items,tt=["head","heels"],rt=[...tt,"headOverHeels"],S=(...e)=>o=>e.includes(o.type),nt=S("bubbles","stopAutowalk","firedDoughnut","floatingText","emitter","particle"),it=(e,o)=>nt(e)||mt(e)&&(o!==void 0&&lt(o)||e.config.direction.z!==0)||pt(e)&&e.config.floorType==="none",qr=(e,o)=>!it(e,o),st=["ball","slidingBlock","slidingDeadly"];S(...st);const at=["portableBlock","spring","sceneryPlayer","sceneryCrown","monster","slidingBlock"],ct=["dalek","turtle","elephantHead","homingBot","helicopterBug"],Mr=e=>e.type==="slidingBlock"?e.config.style==="puck":e.type==="monster"?ct.includes(e.config.which):at.includes(e.type),lt=e=>e.type==="head"||e.type==="heels"||e.type==="headOverHeels";function Nr(e){return dt.includes(e.type)}const dt=[...rt,"monster","ball","charles","pushableBlock","movingPlatform","moveableDeadly","pickup","portableBlock","slidingBlock","slidingDeadly","spring","sceneryPlayer","sceneryCrown"],ft=["monster","deadlyBlock","moveableDeadly","slidingDeadly"];S(...ft);const ut=e=>e.config.times!==void 0,mt=S("portal");S("teleporter");S("heels");S("head");S("heels","headOverHeels");S("head","headOverHeels");S("lift");S("emitter");const yt=S("monster"),pt=S("floor");S("pickup");S("spring");const Hr=S("joystick");S("monster","movingPlatform");const Jr=e=>yt(e)&&e.config.which==="cyberman"&&e.state.everActivated===!1,se=e=>({x:e.direction==="away"?e.tiles.length:e.direction==="towards"?e.times?.x:1,y:e.direction==="left"?e.tiles.length:e.direction==="right"?e.times?.y:1}),Br=e=>e.type==="wall"?se(e.config):ut(e)?e.config.times:void 0,Ne=(e=L)=>({x:e.x??1,y:e.y??1,z:e.z??1}),gt=e=>({x:e.x??1,y:e.y??1}),$=e=>{const o=t=>t.config.times!==void 0;return e.type==="wall"?Ne(se(e.config)):o(e)?Ne(e.config.times):L},to=e=>{const o={};let t=!1;return e.x!==1&&(o.x=e.x,t=!0),e.y!==1&&(o.y=e.y,t=!0),e.z!==1&&(o.z=e.z,t=!0),t?o:void 0};function*ro(e,o,t){for(const r of Xe(e)){const[s,a]=r;if(a===null||a.type!=="wall"||a.config.direction!==o)continue;const{position:d,config:c}=a,y=gt(se(c)),i=Io(Ae(c.direction)),f=Ae(c.direction),n=Ue(t,d);if(n[f]!==0||n[i]<-1||n[i]>=y[i])continue;if(n[i]===0&&y[i]===2){yield[s,null];continue}const l=2+n[i];if(l===1||l===2){const g=U(a,w=>{w.position=z(d,{[i]:l});const v=w.config;switch(v.direction){case"towards":case"right":v.times[i]=y[i]-l;break;default:v.tiles=v.tiles.slice(l)}});yield[s,g];continue}const u=y[i]-n[i];if(u===2||u===1){const g=U(a,w=>{const v=w.config;switch(v.direction){case"towards":case"right":v.times[i]=y[i]-u;break;default:v.tiles=v.tiles.slice(0,-u)}});yield[s,g];continue}const m=U(a,g=>{const w=g.config;switch(w.direction){case"towards":case"right":w.times[i]=n[i];break;default:w.tiles=w.tiles.slice(0,n[i])}});yield[`${s}/beforeDoor`,m];const I=U(a,g=>{g.position={...d,[i]:t[i]+2};const w=g.config;switch(w.direction){case"towards":case"right":w.times[i]=y[i]-n[i]-2;break;default:w.tiles=w.tiles.slice(n[i]+2)}});yield[`${s}/afterDoor`,I],yield[s,null]}}const He=(e,o,t,r,s)=>{const a=he(e,o);if(a===void 0)throw new Error("can't cut hole in walls for a room that does not exist");const d=oo(e,s,o);for(const[c,y]of ro(a.items,t,r))s?d[c]=y:y===null?delete d[c]:d[c]=y},ht=e=>Ge(e.items),It=e=>Ve(e),vt=e=>M(ht(e)),_=(e,...o)=>{const t=M(It(e));return o.length===0?t:t.filter(([,r])=>o.includes(r.type))},wt=({state:e,fromRoomJson:o,direction:t,isPreview:r,autoAddRooms:s})=>{const a=e.campaignInProgress,d=M(N({campaign:a,roomId:o.id})).find(({gridPosition:c})=>wo(c,j[t]));if(d)return a.rooms[d.roomId];if(!r)return s?ve(e,o.planet):void 0},xt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.y;return Math.min(o,r)},Number.POSITIVE_INFINITY),bt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.y+t.config.times.y;return Math.max(o,r)},Number.NEGATIVE_INFINITY),Rt=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.x;return Math.min(o,r)},Number.POSITIVE_INFINITY),Et=e=>_(e.items,"floor").reduce((o,[,t])=>{const r=t.position.x+t.config.times.x;return Math.max(o,r)},Number.NEGATIVE_INFINITY),At=(e,o,t,r,s)=>{const a=T(e),d=t;He(e,a.id,d,o,s);const c=r.config.toRoom==="+";console.log("autoAddRooms:",c);const y=wt({state:e,fromRoomJson:a,direction:d,isPreview:s,autoAddRooms:c}),[i,f]=Ie(e,{type:"door",config:{...r.config,toRoom:y?y.id:r.config.toRoom,direction:d}},o,s);if(!s&&y){const n=we(y,r,s),l={x:d==="left"?Rt(y):d==="right"?Et(y):o.x,y:d==="away"?xt(y):d==="towards"?bt(y):o.y,z:o.z},p=vo(d),u={type:"door",config:{toRoom:a.id,direction:p},position:l};y.items[n]=u,u.config.toDoor=i,f.config.toDoor=n,He(e,y.id,p,l,!1)}};function Je(e){var o="";return t(e),o;function t(s){if(s===null||typeof s!="object"||s.toJSON!=null)o+=JSON.stringify(s);else if(Array.isArray(s)){o+="[";var a=!1;s.forEach(function(c){a&&(o+=","),a=!0,c===void 0&&(c=null),t(c)}),o+="]"}else{o+="{";var d=Object.keys(s).filter(function(c){return s[c]!==void 0}).sort();d.forEach(function(c,y){return r(s,c,y)}),o+="}"}}function r(s,a,d){d>0&&(o+=","),o+=JSON.stringify(a),o+=":",t(s[a])}}const Lr=(e,...o)=>{const t={};for(const r of o)t[r]=e[r];return t},Be=(e,...o)=>{const t={...e};for(const r of o)delete t[r];return t},no=e=>Ye(xe(e))>0,xe=e=>{switch(e.type){case"deadlyBlock":return L;case"conveyor":if(e.config.disappearing)return B;switch(e.config.direction){case"left":case"right":return{x:1,y:0,z:0};case"away":case"towards":return{x:0,y:1,z:0};default:throw e.config.direction,new Error}case"hushPuppy":return L;case"teleporter":return{x:1,y:1,z:0};case"floor":case"spikes":return{x:1,y:1,z:0};case"block":return e.config.disappearing?B:L;case"barrier":if(e.config.disappearing)return B;switch(e.config.axis){case"x":return{x:1,y:0,z:1};case"y":return{x:0,y:1,z:1};default:throw e.config.axis,new Error}case"wall":switch(e.config.direction){case"left":case"right":return{x:0,y:1,z:1};case"away":case"towards":return{x:1,y:0,z:1};default:throw e.config,new Error}default:return B}};class ne{#t;#o;#e;constructor(o,t){this.#o={x:-o.x,y:-o.y,z:-o.z},this.#e={x:t.x-o.x+1,y:t.y-o.y+1,z:t.z-o.z+1},this.#t=Array.from({length:this.#e.x},()=>Array.from({length:this.#e.y},()=>Array.from({length:this.#e.z},()=>new Set)))}static fromItems(o){let t=1/0,r=1/0,s=1/0,a=-1/0,d=-1/0,c=-1/0;const y=[...o];for(const[,f]of y){const{x:n,y:l,z:p}=f.position,u=$(f);t=Math.min(t,n),r=Math.min(r,l),s=Math.min(s,p),a=Math.max(a,n+u.x-1),d=Math.max(d,l+u.y-1),c=Math.max(c,p+u.z-1)}if(y.length===0)return new ne({x:0,y:0,z:0},{x:0,y:0,z:0});const i=new ne({x:t,y:r,z:s},{x:a,y:d,z:c});for(const f of y){const[,n]=f,{x:l,y:p,z:u}=n.position,h=$(n);for(let m=0;m<h.x;m++)for(let I=0;I<h.y;I++)for(let g=0;g<h.z;g++)i.add({x:l+m,y:p+I,z:u+g},f)}return i}get(o){const t=o.x+this.#o.x,r=o.y+this.#o.y,s=o.z+this.#o.z;if(this.#r(t,r,s))return this.#t[t][r][s]}set(o,t){const r=o.x+this.#o.x,s=o.y+this.#o.y,a=o.z+this.#o.z;this.#r(r,s,a)&&(this.#t[r][s][a]=t)}add(o,t){const r=this.get(o);r&&r.add(t)}remove(o,t){const r=this.get(o);r&&r.delete(t)}get size(){return{...this.#e}}get minBounds(){return{x:-this.#o.x,y:-this.#o.y,z:-this.#o.z}}get maxBounds(){const o=this.minBounds;return{x:o.x+this.#e.x-1,y:o.y+this.#e.y-1,z:o.z+this.#e.z-1}}*iterate(){const{minBounds:o}=this;for(let t=0;t<this.#e.x;t++)for(let r=0;r<this.#e.y;r++)for(let s=0;s<this.#e.z;s++)yield[{x:t+o.x,y:r+o.y,z:s+o.z},this.#t[t][r][s]]}extractUniqueItems(){const o=new Set,t=[];for(const[,r]of this.iterate())for(const s of r)o.has(s)||(o.add(s),t.push(s));return t}#r(o,t,r){return o>=0&&o<this.#e.x&&t>=0&&t<this.#e.y&&r>=0&&r<this.#e.z}}const O=e=>e.type==="wall"?`wall/${e.config.direction}`:e.type==="teleporter"?Je({type:e.type,config:Be(e.config,"toPosition","times")}):Je({type:e.type,config:Be(e.config,"times")}),kt=e=>no(e[1]),zt=e=>{let o=[...e],t=o.length;for(;;){const r=[...St(o)];if(r.length===t)return r;t=r.length,o=r}},St=e=>{const o=[],t=[];for(const n of e)kt(n)?o.push(n):t.push(n);const r=ne.fromItems(o),s=r.size,{minBounds:a}=r,d=new Map,c=new Map;for(const[,n]of r.iterate())for(const[,l]of n){const p=O(l);c.has(p)||c.set(p,l)}for(const[n]of c)d.set(n,Array.from({length:s.x},()=>Array.from({length:s.y},()=>Array(s.z).fill(!1))));const y=(n,l)=>{const p=$(l),u={x:n.x+p.x-1,y:n.y+p.y-1,z:n.z+p.z-1},h=xe(l),m=O(l),I=new Set;I.add(l);const g=v=>{const E=new Set;let A=!1;for(let{x}=n;x<=v.x;x++)for(let{y:b}=n;b<=v.y;b++)for(let{z:R}=n;R<=v.z;R++){const C=r.get({x,y:b,z:R});let W=!1,J=!1;if(C)for(const[,P]of C)O(P)===m?(W=!0,E.add(P)):no(P)&&P.type!=="wall"&&(J=!0);J&&!W&&(A=!0),(!C||C.size===0)&&(A=!0),W||(A=!0)}if(A)return!1;let k=!1;for(const x of E)I.has(x)||(k=!0,I.add(x));if(!k)return!1;for(const x of E){const b=$(x),R={x:x.position.x+b.x-1,y:x.position.y+b.y-1,z:x.position.z+b.z-1};if(x.position.x<n.x||x.position.y<n.y||x.position.z<n.z||R.x>v.x||R.y>v.y||R.z>v.z)return!1}return!0};let w=!0;for(;w;){if(w=!1,h.x>0&&u.x+1<a.x+s.x){let v=u.x;for(let{y:E}=n;E<=u.y;E++)for(let{z:A}=n;A<=u.z;A++){const k=r.get({x:u.x+1,y:E,z:A});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.x+b.x-1;v=Math.max(v,R)}}}v>u.x&&g({...u,x:v})&&(u.x=v,w=!0)}if(h.y>0&&u.y+1<a.y+s.y){let v=u.y;for(let{x:E}=n;E<=u.x;E++)for(let{z:A}=n;A<=u.z;A++){const k=r.get({x:E,y:u.y+1,z:A});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.y+b.y-1;v=Math.max(v,R)}}}v>u.y&&g({...u,y:v})&&(u.y=v,w=!0)}if(h.z>0&&u.z+1<a.z+s.z){let v=u.z;for(let{x:E}=n;E<=u.x;E++)for(let{y:A}=n;A<=u.y;A++){const k=r.get({x:E,y:A,z:u.z+1});if(k){for(const[,x]of k)if(O(x)===m){const b=$(x),R=x.position.z+b.z-1;v=Math.max(v,R)}}}v>u.z&&g({...u,z:v})&&(u.z=v,w=!0)}}return u},i=(n,l)=>{if(n.type==="wall"){if(l.type!=="wall")throw new Error("only walls can join walls");if(n.config.direction!==l.config.direction)throw new Error("walls must have the same direction to join");return n.config.direction==="right"||n.config.direction==="towards"?n:{...n,config:{...n.config,tiles:[...n.config.tiles,...l.config.tiles]}}}return n},f=({x:n,y:l,z:p},{x:u,y:h,z:m},I)=>{const[g,w]=I,v=O(w),E=u-n+1,A=h-l+1,k=m-p+1;let x=w;if(E+A+k>3){const b={...w.config};if(w.type==="wall")switch(w.config.direction){case"away":case"left":break;case"towards":E!==1&&(b.times={x:E});break;case"right":A!==1&&(b.times={y:A});break}else{const R={...to($(w))};E!==1&&(R.x=E),A!==1&&(R.y=A),k!==1&&(R.z=k),b.times=R}x={...w,config:b}}for(let b=n;b<=u;b++)for(let R=l;R<=h;R++)for(let C=p;C<=m;C++)if(d.get(v)[b-a.x][R-a.y][C-a.z]=!0,b!==n||R!==l||C!==p){const W=r.get({x:b,y:R,z:C});if(W)e:for(const J of W){const[,P]=J;if(O(P)===v){P.position.x===b&&P.position.y===R&&P.position.z===C&&(x=i(x,P)),r.remove({x:b,y:R,z:C},J);break e}}}return[g,x]};for(const[n,l]of r.iterate())for(const p of l){const[,u]=p;if(u.position.x===n.x&&u.position.y===n.y&&u.position.z===n.z){const h=O(u),m=d.get(h),I=n.x-a.x,g=n.y-a.y,w=n.z-a.z;if(m&&!m[I][g][w]){const v=y(n,u),E=f(n,v,p);r.remove(n,p),r.add(n,E)}}}return[...r.extractUniqueItems(),...t]},io=e=>Object.fromEntries(zt(Object.entries(e))),so=e=>{const o=T(e);o.items=io(o.items);const t=e.selectedJsonItemIds.filter(r=>o.items[r]!==void 0);t.length!==e.selectedJsonItemIds.length&&(e.selectedJsonItemIds=t)},Ct=e=>e.type==="door",Tt=e=>e.type==="monster"&&e.config.which==="cyberman",Pt={applyItemTool(e,{payload:{blockPosition:o,pointedAtItemJson:t,preview:r}}){const s=e,{tool:a}=s;if(a.type!=="item")throw new Error("applying item tool reducer while the current tool is not an item tool");switch(r||(H(s),s.previewedEdits={}),s.selectedJsonItemIds=[],!0){case Ct(a.item):{if(t.type!=="wall")throw new Error("doors can only be added on walls");At(s,o,t.config.direction,a.item,r);break}case(Tt(a.item)&&t.type==="deadlyBlock"&&t.config.style==="toaster"&&t.position.z+1===o.z):{Ie(s,{...a.item,config:{...a.item.config,activated:"off"}},o,r);break}default:Ie(s,a.item,o,r)}!r&&s.autoCoalesce&&so(s)}},Ft={changeDragInProgress(e,{payload:o}){const t=e;t.dragInProgress=o}},Ot={changeGridResolution(e,{payload:o}){const t=e;t.halfGridResolution=o},changeWallsFloorsLocked(e,{payload:o}){const t=e;t.wallsFloorsLocked=o}},$t={setSelectedItemsInRoom(e,{payload:{jsonItemIds:o}}){e.selectedJsonItemIds=o},toggleSelectedItemInRoom(e,{payload:{jsonItemId:o}}){const t=e.selectedJsonItemIds.indexOf(o);t===-1?e.selectedJsonItemIds.push(o):e.selectedJsonItemIds.splice(t,1)},setHoveredItemInRoom(e,o){e.hoveredItem=o.payload},setClickableAnnotationHovered(e,o){e.clickableAnnotationHovered=o.payload}},Wt=(e,...o)=>({x:e(...o.map(t=>t.x)),y:e(...o.map(t=>t.y)),z:e(...o.map(t=>t.z))}),Le=(e,o,t)=>{const r=t-e.length;r>0?e.push(...D(o,r,e.length)):r<0&&e.splice(t)},_t=e=>e==="towards"||e==="right";function*ao(e,o){const t={type:"wall",config:_t(e.config.direction)?e.config.direction==="towards"?{direction:e.config.direction,times:{x:2}}:{direction:e.config.direction,times:{y:2}}:{direction:e.config.direction,tiles:[...D(o.planet,2,e.position[e.config.direction==="away"?"x":"y"])]},position:{...e.position,z:0}};yield[we(o,t,!1),t]}function co(e,o){const t=se(e.config),r=z(o.position,o.config.times);switch(e.config.direction){case"towards":if(e.position.y===o.position.y&&e.position.x>=o.position.x&&e.position.x<r.x)return{tangentAxis:"x",normalAxis:"y",edgePosition:e.position.y,wallStart:e.position.x,wallLength:t.x??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.x===o.position.x&&t.x===o.config.times.x,wallTouchesFloorEnd:e.position.x+(t.x??1)===r.x};break;case"right":if(e.position.x===o.position.x&&e.position.y>=o.position.y&&e.position.y<r.y)return{tangentAxis:"y",normalAxis:"x",edgePosition:e.position.x,wallStart:e.position.y,wallLength:t.y??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.y===o.position.y&&t.y===o.config.times.y,wallTouchesFloorEnd:e.position.y+(t.y??1)===r.y};break;case"away":if(e.position.y===o.position.y+o.config.times.y&&e.position.x>=o.position.x&&e.position.x<r.x)return{tangentAxis:"x",normalAxis:"y",edgePosition:e.position.y,wallStart:e.position.x,wallLength:t.x??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.x===o.position.x&&t.x===o.config.times.x,wallTouchesFloorEnd:e.position.x+(t.x??1)===r.x};break;case"left":if(e.position.x===o.position.x+o.config.times.x&&e.position.y>=o.position.y&&e.position.y<r.y)return{tangentAxis:"y",normalAxis:"x",edgePosition:e.position.x,wallStart:e.position.y,wallLength:t.y??1,isOnFloorEdge:!0,wallFullySpansFloor:e.position.y===o.position.y&&t.y===o.config.times.y,wallTouchesFloorEnd:e.position.y+(t.y??1)===r.y};break}return null}function*lo(e,o,t,r,s){const a=z(o.position,r),d=o.config.times,c=s?z(d,s):o.config.times,y=z(o.position,d),i=z(a,c);for(const[f,n]of M(e)){if(n.type==="wall"&&n.position.z!==o.position.z)continue;if(n.type==="door"){const h=n.config;let m=!1,I={...F(n.position)};switch(h.direction){case"towards":n.position.y===o.position.y&&n.position.x>=o.position.x&&n.position.x<o.position.x+d.x&&(m=!0,I=z(n.position,r));break;case"right":n.position.x===o.position.x&&n.position.y>=o.position.y&&n.position.y<o.position.y+d.y&&(m=!0,I=z(n.position,r));break;case"away":n.position.y===o.position.y+d.y&&n.position.x>=o.position.x&&n.position.x<o.position.x+d.x&&(m=!0,I=z(n.position,{x:r.x,y:r.y+(s?.y??0),z:r.z}));break;case"left":n.position.x===o.position.x+d.x&&n.position.y>=o.position.y&&n.position.y<o.position.y+d.y&&(m=!0,I=z(n.position,{x:r.x+(s?.x??0),y:r.y,z:r.z}));break}if(m){const g=structuredClone(F(n));g.position=I,yield[f,g]}continue}const l=n,p=co(l,o);if(!p||!p.isOnFloorEdge)continue;const u=structuredClone(F(l));switch(l.config.direction){case"towards":case"right":u.position=z(l.position,r);break;case"away":{const h=a.y+c.y;u.position={...l.position,x:l.position.x+r.x,y:h};break}case"left":{const h=a.x+c.x;u.position={...l.position,x:h,y:l.position.y+r.y};break}}if(p.wallFullySpansFloor){const h=c[p.tangentAxis];l.config.direction==="away"||l.config.direction==="left"?Le(u.config.tiles,t,h):u.config.times={[p.tangentAxis]:h},yield[f,u]}else{const h=o.position[p.tangentAxis],m=y[p.tangentAxis],I=a[p.tangentAxis],g=i[p.tangentAxis],w=u.position[p.tangentAxis];if(w>=g){yield[f,null];continue}const v=Math.max(p.wallStart,h),A=Math.min(p.wallStart+p.wallLength,m)-v;let k;if(l.config.direction==="away"||l.config.direction==="left"){const C=o.position[p.normalAxis]+d[p.normalAxis],W=a[p.normalAxis]+c[p.normalAxis];k=C!==W}else k=o.position[p.normalAxis]!==a[p.normalAxis];const x=Math.max(w,I);let b;p.wallTouchesFloorEnd&&!k?b=g:b=Math.min(w+A,g);const R=b-x;R<=0?yield[f,null]:(l.config.direction==="away"||l.config.direction==="left"?Le(u.config.tiles,t,R):u.config.times={[p.tangentAxis]:R},yield[f,u])}}}function*qt(e,o,t,r){for(const[s,a]of _(e.items,"floor")){const d=co(o,a);if(!d)continue;const c={x:0,y:0,z:0},y={x:0,y:0,z:0},i=t[d.normalAxis],f=t[d.tangentAxis],n=r?r[d.tangentAxis]:0;if(i!==0&&(o.config.direction==="towards"||o.config.direction==="right"?(c[d.normalAxis]=i,y[d.normalAxis]=-i):y[d.normalAxis]=i),f!==0&&(d.wallStart===a.position[d.tangentAxis]?(c[d.tangentAxis]=f,y[d.tangentAxis]=-f):d.wallTouchesFloorEnd&&(y[d.tangentAxis]=f)),n!==0&&d.wallTouchesFloorEnd&&(y[d.tangentAxis]=n),c.x!==0||c.y!==0||y.x!==0||y.y!==0){const l=z(a.config.times,y),p={...a,position:z(a.position,c),config:{...a.config,times:{x:l.x,y:l.y}}};yield[s,p]}yield*lo(_(e.items,"wall","door"),a,e.planet,c,y)}}const Mt={moveOrResizeItemAsPreview(e,{payload:{jsonItemIds:o,timesDelta:t,positionDelta:r}}){const s=e,a=T(s);for(const d of o){const c=Ze(s,d);if(c===void 0)throw new Error(`no json item found for some of the ids in resize ${d}`);if(c.type==="wall"){for(const[i,f]of qt(a,c,r,t))s.previewedEdits[i]=f;continue}if(c.type==="floor")for(const[i,f]of lo(_(a.items,"wall","door"),c,a.planet,r,t))s.previewedEdits[i]=f;if(c.type==="door"){console.log("before healing, room items are",F(a.items));for(const[i,f]of ao(c,F(a)))console.log("healing",`"${i}"`,f),s.previewedEdits[i]=f}const y={...c,position:z(c.position,r),config:{...c.config}};if(s.previewedEdits[d]=y,Nt(y,t),c.type==="door"){console.log("before cutting room plus previews is",{...F(a.items),...F(s.previewedEdits)});for(const[i,f]of ro({...F(a.items),...F(s.previewedEdits)},y.config.direction,y.position))console.log("cutting",`"${i}"`,f),s.previewedEdits[i]=f}}s.dragInProgress=!0}},Nt=(e,o)=>{if(o!==void 0){const t=$(e),r=xe(e),s=xo(o,r);if(Ye(s)>0){const a=to(Wt((d,c)=>Math.max(1,d+c),t,s));a===void 0?delete e.config.times:e.config.times=a}}},Ht=(e,o)=>{const t=e.items[o];if(t.type==="door"){for(const[r,s]of ao(t,e))e.items[r]=s;e.items=io(e.items)}delete e.items[o]},je=(e,o)=>{vt(e).filter(t=>t.type==="floor").filter(t=>t.position.z===0).forEach(t=>{t.config={...t.config,floorType:o,scenery:o==="standable"?e.planet:void 0}})},Jt={changeRoomColour(e,{payload:o}){const t=e,r=t.campaignInProgress.rooms[t.currentlyEditingRoomId].color;H(t),Object.assign(r,o)},changeRoomScenery(e,{payload:o}){const t=e,r=T(t);H(t),eo(r,o)},roomJsonEdited(e,{payload:o}){const t=e;t.campaignInProgress.rooms[t.currentlyEditingRoomId]=o},deleteSelected(e){const o=e,t=T(o);H(o),o.selectedJsonItemIds.forEach(r=>{Ht(t,r)}),o.selectedJsonItemIds=[]},clearRoom(e){const o=e,t=T(o);H(o);for(const r of Ke(t.items)){const s=t.items[r];s.type!=="floor"&&s.type!=="wall"&&s.type!=="door"&&(delete t.items[r],o.selectedJsonItemIds=o.selectedJsonItemIds.filter(a=>a!==r))}},setRoomAboveOrBelow(e,{payload:o}){const t=e,r=o.direction==="above"?"roomAbove":"roomBelow",s=r==="roomAbove"?"roomBelow":"roomAbove",a=T(t),d=o.createNew?ve(t,a.planet,a.color).id:o.roomId,c=a[r]&&he(t,a[r]);c?.[s]===t.currentlyEditingRoomId&&(c[s]=void 0),a[r]=d;const y=d&&he(t,d);y!==void 0&&(y[s]=a.id),y?je(r==="roomBelow"?a:y,"none"):je(r==="roomBelow"?a:c,"standable")}},Bt=(e,o)=>{const t=Ve(o);for(const[r,s]of t)s===null?delete e.items[r]:e.items[r]=s},Lt={setAutoCoalesce(e,o){e.autoCoalesce=o.payload},resetPreviewedEdits(e){e.previewedEdits={}},commitCurrentPreviewedEdits(e){H(e),Bt(T(e),e.previewedEdits),e.autoCoalesce&&so(e),e.previewedEdits={}}},be="room_0",jt={id:be,...Qe({x:8,y:8})},De={name:"new campaign",rooms:{[be]:jt}},Re={campaignInProgress:De,savedCampaign:De,currentlyEditingRoomId:be,editingRoomIdHistory:{back:[],forward:[]},previewedEdits:{},tool:{type:"pointer"},hoveredItem:void 0,clickableAnnotationHovered:!1,selectedJsonItemIds:[],halfGridResolution:!1,autoCoalesce:!0,wallsFloorsLocked:!0,dragInProgress:!1,history:{undo:[],redo:[]}},Dt={loadCampaign(e,{payload:{campaign:o}}){const t=e;t.savedCampaign=o,t.campaignInProgress=o,t.hoveredItem=void 0,t.selectedJsonItemIds=[],t.clickableAnnotationHovered=!1,t.dragInProgress=!1,t.history=Re.history;const r=ge(Ke(o.rooms));if(r===void 0)throw new Error("could not find any rooms in this campaign");t.currentlyEditingRoomId=r},campaignSaved(e,{payload:{campaign:o}}){const t=e;t.savedCampaign=o}},fo=(e,o)=>{if(!e.campaignInProgress.rooms[o]){console.warn(`can't change to room ${o} - it doesn't exist`);return}e.editingRoomIdHistory.back.push(e.currentlyEditingRoomId),e.currentlyEditingRoomId=o,e.clickableAnnotationHovered=!1,e.hoveredItem=void 0,e.selectedJsonItemIds=[],e.history=Re.history},Gt={changeToRoom(e,{payload:o}){fo(e,o)},roomBack(e){const o=e,{editingRoomIdHistory:t}=o;if(t.back.length===0)return;const r=t.back.pop();t.forward.push(o.currentlyEditingRoomId),o.currentlyEditingRoomId=r},roomForward(e){const o=e,{editingRoomIdHistory:t}=o;if(t.forward.length===0)return;const r=t.forward.pop();t.back.push(o.currentlyEditingRoomId),o.currentlyEditingRoomId=r}},Xt={addRoom(e){const o=e.campaignInProgress.rooms[e.currentlyEditingRoomId],t=ve(e,o.planet);fo(e,t.id)},removeRoom(e){const o=e.campaignInProgress.rooms[e.currentlyEditingRoomId],r=ge(_(o.items,"door","teleporter"))?.[1].config.toRoom??ge(Jo(s=>s!==e.currentlyEditingRoomId,bo(e.campaignInProgress.rooms)));r!==void 0&&(delete e.campaignInProgress.rooms[e.currentlyEditingRoomId],e.currentlyEditingRoomId=r)}},Ee=Ro({name:"levelEditor",initialState:Re,reducers:{setTool(e,{payload:o}){const t=e;o.type==="item"&&(t.selectedJsonItemIds=[]),t.tool=o},injected(){},...Ot,...Uo,...Pt,...Ft,...$t,...Jt,...Mt,...Lt,...Dt,...Xt,...Gt},selectors:{selectCurrentCampaignInProgress:e=>e.campaignInProgress,selectCurrentEditingRoomJson:T,selectItem:Ze,selectCurrentEditingRoomColour:e=>T(e).color,selectCurrentEditingRoomScenery:e=>T(e).planet,selectTool:e=>e.tool,selectSelectedJsonItemIds:e=>e.selectedJsonItemIds,selectHoveredItem:e=>e.hoveredItem,selectItemIsSelected:Xo,...Vo}}),{addRoom:Ut,applyItemTool:Vt,campaignSaved:Yt,changeDragInProgress:Kt,changeGridResolution:Zt,changeRoomColour:Qt,changeRoomScenery:er,changeToRoom:or,changeWallsFloorsLocked:tr,clearRoom:rr,commitCurrentPreviewedEdits:nr,deleteSelected:ir,injected:sr,loadCampaign:ar,moveOrResizeItemAsPreview:cr,redo:lr,removeRoom:dr,resetPreviewedEdits:fr,roomBack:ur,roomJsonEdited:mr,setAutoCoalesce:yr,setClickableAnnotationHovered:pr,setHoveredItemInRoom:gr,setRoomAboveOrBelow:hr,setSelectedItemsInRoom:Ir,setTool:vr,toggleSelectedItemInRoom:wr,undo:xr,roomForward:br}=Ee.actions,{selectCanRedo:Rr,selectCanUndo:Er,selectCurrentCampaignInProgress:Ar,selectCurrentEditingRoomColour:kr,selectCurrentEditingRoomJson:zr,selectCurrentEditingRoomScenery:Sr,selectHoveredItem:Cr,selectItem:Tr,selectItemIsSelected:Pr,selectSelectedJsonItemIds:Fr,selectTool:Or}=Ee.selectors,$r=Eo.withTypes(),jr=Object.freeze(Object.defineProperty({__proto__:null,addRoom:Ut,applyItemTool:Vt,campaignSaved:Yt,changeDragInProgress:Kt,changeGridResolution:Zt,changeRoomColour:Qt,changeRoomScenery:er,changeToRoom:or,changeWallsFloorsLocked:tr,clearRoom:rr,commitCurrentPreviewedEdits:nr,deleteSelected:ir,injected:sr,levelEditorSlice:Ee,loadCampaign:ar,moveOrResizeItemAsPreview:cr,redo:lr,removeRoom:dr,resetPreviewedEdits:fr,roomBack:ur,roomForward:br,roomJsonEdited:mr,selectCanRedo:Rr,selectCanUndo:Er,selectCurrentCampaignInProgress:Ar,selectCurrentEditingRoomColour:kr,selectCurrentEditingRoomJson:zr,selectCurrentEditingRoomScenery:Sr,selectHoveredItem:Cr,selectItem:Tr,selectItemIsSelected:Pr,selectSelectedJsonItemIds:Fr,selectTool:Or,setAutoCoalesce:yr,setClickableAnnotationHovered:pr,setHoveredItemInRoom:gr,setRoomAboveOrBelow:hr,setSelectedItemsInRoom:Ir,setTool:vr,toggleSelectedItemInRoom:wr,undo:xr,useAppSelectorWithLevelEditorSlice:$r},Symbol.toStringTag,{value:"Module"}));export{gt as $,j as A,st as B,Lr as C,Ne as D,se as E,_t as F,pt as G,qr as H,Nr as I,Nt as J,Jo as K,cr as L,nr as M,ur as N,br as O,yr as P,or as Q,S as R,ut as S,Br as T,lt as U,Hr as V,Jr as W,Mr as X,pr as Y,Cr as Z,Fr as _,vr as a,$ as a0,xe as a1,Wt as a2,Kt as a3,Ir as a4,wr as a5,Vt as a6,gr as a7,fr as a8,Ze as a9,Tr as aa,Pr as ab,no as ac,mr as ad,jr as ae,kr as b,Zt as c,ir as d,Qt as e,Sr as f,er as g,Er as h,Rr as i,xr as j,lr as k,tr as l,zr as m,D as n,rr as o,T as p,hr as q,To as r,Or as s,Ar as t,$r as u,Yt as v,ar as w,Ut as x,dr as y,dt as z};
