import{r as d,j as e}from"./index-qwtZHu85.js";import{u as A,c as q,a as V,P as R,b as K,d as Q,e as W,f as X,R as Y,B as i,S as Z}from"./RoomSelect-CykrmLuw.js";import{h as S,j as D,u as j,k as ee,l as te,n as se,q as ae,r as oe,C as re,B as F,S as ne,t as le,w as k,x as M,y as ce,A as z,E as ie,F as de,H as me,I as ue}from"./App-C8-53qtA.js";import{c as w}from"./changeCharacterRoom-DBiC4eww.js";var y="Collapsible",[he,ke]=q(y),[pe,I]=he(y),J=d.forwardRef((a,s)=>{const{__scopeCollapsible:c,open:r,defaultOpen:o,disabled:t,onOpenChange:n,...m}=a,[u=!1,x]=A({prop:r,defaultProp:o,onChange:n});return e.jsx(pe,{scope:c,disabled:t,contentId:V(),open:u,onOpenToggle:d.useCallback(()=>x(v=>!v),[x]),children:e.jsx(R.div,{"data-state":P(u),"data-disabled":t?"":void 0,...m,ref:s})})});J.displayName=y;var $="CollapsibleTrigger",G=d.forwardRef((a,s)=>{const{__scopeCollapsible:c,...r}=a,o=I($,c);return e.jsx(R.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":P(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:s,onClick:K(a.onClick,o.onOpenToggle)})});G.displayName=$;var T="CollapsibleContent",U=d.forwardRef((a,s)=>{const{forceMount:c,...r}=a,o=I(T,a.__scopeCollapsible);return e.jsx(Q,{present:c||o.open,children:({present:t})=>e.jsx(xe,{...r,ref:s,present:t})})});U.displayName=T;var xe=d.forwardRef((a,s)=>{const{__scopeCollapsible:c,present:r,children:o,...t}=a,n=I(T,c),[m,u]=d.useState(r),x=d.useRef(null),v=W(s,x),B=d.useRef(0),O=B.current,E=d.useRef(0),H=E.current,N=n.open||m,_=d.useRef(N),b=d.useRef(void 0);return d.useEffect(()=>{const h=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(h)},[]),X(()=>{const h=x.current;if(h){b.current=b.current||{transitionDuration:h.style.transitionDuration,animationName:h.style.animationName},h.style.transitionDuration="0s",h.style.animationName="none";const L=h.getBoundingClientRect();B.current=L.height,E.current=L.width,_.current||(h.style.transitionDuration=b.current.transitionDuration,h.style.animationName=b.current.animationName),u(r)}},[n.open,r]),e.jsx(R.div,{"data-state":P(n.open),"data-disabled":n.disabled?"":void 0,id:n.contentId,hidden:!N,...t,ref:v,style:{"--radix-collapsible-content-height":O?`${O}px`:void 0,"--radix-collapsible-content-width":H?`${H}px`:void 0,...a.style},children:N&&o})});function P(a){return a?"open":"closed"}const ge=a=>{d.useEffect(()=>{if(a===void 0)return;const s=t=>{const n=t.hash.substring(1);if(n!==""&&a.campaign.rooms[n]!==void 0)return t.hash.substring(1)};if(window.location.hash){const t=s(window.location);t!==void 0&&a.currentRoom?.id!==t&&a.changeRoom(t)}const c=t=>{const n=s(new URL(t.newURL));n!==void 0&&n!==a.currentRoom?.id&&a.changeRoom(n)},r=t=>{window.location.hash=t};window.addEventListener("hashchange",c);const o=S({actionCreator:D,effect(t){r(t.payload.roomId)}});return()=>{window.removeEventListener("hashchange",c),o()}},[a])},fe=()=>{const a=j();d.useEffect(()=>S({actionCreator:ee,effect(c){const r=c.payload.item;if(te("teleporter","doorFrame")(r)){const{toRoom:o}=r.config;a.changeRoom(o)}if(r.type==="lift"){const o=a.currentRoom?.roomAbove;o&&a.changeRoom(o)}if(r.type==="floorEdge"){const o=a.currentRoom?.roomBelow;o&&a.changeRoom(o)}console.log(r.id,"item (live):",r,`
state (shallow copy):`,{...r.state},`
position`,`(${r.state.position.x}, ${r.state.position.y}, ${r.state.position.z})`,`
stoodOnBy:`,Object.keys(r.state.stoodOnBy),`
standingOn:`,se(r)?r.state.standingOnItemId:"n/a (not free to move)"),window.item=r}}))},be=()=>{const a=j(),[s,c]=d.useState(a?.currentRoom?.id);return d.useEffect(()=>(c(a.currentRoom?.id),S({actionCreator:D,effect(o){c(o.payload.roomId)}})),[a]),s},we=()=>{const a=j(),s=be();return e.jsx(Y,{campaign:a.campaign,headRoomId:a.gameState.characterRooms.head?.id,heelsRoomId:a.gameState.characterRooms.heels?.id,className:"w-full",onRoomSelect:c=>{a.changeRoom(c)},viewingRoomId:s})},p=({gameApi:a,speed:s,className:c})=>e.jsx(i,{className:c,onClick:r=>{a.gameState.gameSpeed=s,r.currentTarget.blur()},children:s.toString().replace(/^0\./,".")}),l="flex-1 h-3",C=({gameApi:a,playableName:s})=>e.jsx(i,{className:l,onClick:c=>{if(a.gameState.currentCharacterName===s)return;const r=k(a.gameState)?.id;if(r===void 0)return;if(a.gameState.currentCharacterName=s,s==="headOverHeels"){const t=z("head",a.gameState.characterRooms.head?.items),n=z("heels",a.gameState.characterRooms.heels?.items);if(!t||!n)console.log("cant summon headOverHeels - one of the individuals is not in the game to combine");else{w({playableItem:t,gameState:a.gameState,changeType:"level-select",toRoomId:"finalroom"}),w({playableItem:n,gameState:a.gameState,changeType:"level-select",toRoomId:"finalroom"}),ie(a.gameState);const m=a.gameState.characterRooms.headOverHeels.items.headOverHeels;w({playableItem:m,gameState:a.gameState,changeType:"level-select",toRoomId:r})}}const o=de(a.gameState,s);if(o===void 0){console.error(`can't summon ${s} who is not in the game`);return}w({playableItem:o,gameState:a.gameState,changeType:"level-select",toRoomId:r}),c.currentTarget.blur()},children:s==="headOverHeels"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sprite texture-head.walking.right.2 [button:hover_&]:texture-animated-head.walking.towards"}),"over",e.jsx("span",{className:"sprite texture-heels.walking.right.2 [button:hover_&]:texture-animated-heels.walking.towards"})]}):e.jsx("span",{className:`sprite texture-${s}.walking.right.2 [button:hover_&]:texture-animated-${s}.walking.towards`})}),g=({gameApi:a,roomId:s,children:c})=>e.jsx(i,{className:l,onClick:r=>{a.changeRoom(s),r.currentTarget.blur()},children:c||s}),f=({children:a})=>e.jsx("h4",{className:"bg-redShadow zx:bg-zxMagenta pl-1",children:a}),Re=a=>{const s=j();fe();const c=ae(),r=oe();ge(s);const o=(t,n)=>{const{gameState:m}=s,u=M(m);if(u===void 0)return;const x=k(m);x!==void 0&&me({gameState:m,room:x,itemType:t,config:n,position:{...u.state.position,z:u.state.position.z+ue.h*2}})};return e.jsxs(J,{children:[e.jsx(G,{className:"absolute bottom-0 right-1 flex flex-col z-cheats text-midRed hover:text-metallicBlue ",onClick:t=>t.currentTarget.blur(),children:e.jsx("span",{className:"sprite texture-helicopterBug.1 hover:texture-animated-helicopterBug zx:sprite-revert-to-two-tone"})}),e.jsx(U,{children:e.jsx(re,{scaleFactor:2,children:e.jsxs("div",{className:"absolute bottom-[48px] max-h-[calc(100vh-48px)] right-1 flex flex-col w-[500px] zx:[&_.sprite]:sprite-revert-to-white overflow-y-scroll z-cheats text-white",children:[e.jsx(f,{children:"room select:"}),e.jsx(we,{}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(g,{gameApi:s,roomId:"blacktooth1head",children:"Starting room"}),e.jsx(g,{gameApi:s,roomId:"laboratory",children:"To the lab!"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(g,{gameApi:s,roomId:"blacktooth45market",children:"Market"}),e.jsx(g,{gameApi:s,roomId:"moonbase1",children:"Moonbase"}),e.jsx(g,{gameApi:s,roomId:"egyptus1",children:"Egyptus"}),e.jsx(g,{gameApi:s,roomId:"safari1",children:"Safari"}),e.jsx(g,{gameApi:s,roomId:"bookworld1",children:"Bookworld"}),e.jsx(g,{gameApi:s,roomId:"penitentiary1",children:"Penitentiary"})]}),e.jsx(f,{children:"debug rendering:"}),e.jsxs("div",{className:"flex flex-row items-center gap-x-1 justify-center pb-1 pt-1 bg-shadow text-white",children:[e.jsx(F,{children:"BBs:"}),e.jsx(Z,{}),e.jsx(F,{children:"shadow:"}),e.jsx(ne,{value:c,onClick:(t,n)=>{r(le(n)),t.currentTarget.blur()}})]}),e.jsx(f,{children:"summon character:"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(C,{gameApi:s,playableName:"head"}),e.jsx(C,{gameApi:s,playableName:"heels"}),e.jsx(C,{gameApi:s,playableName:"headOverHeels"})]}),e.jsx(f,{children:"summon item:"}),e.jsxs("div",{className:"flex flex-row items-center flex-wrap",children:[e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"bag"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-bag"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"hooter"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-hooter"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"doughnuts"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-doughnuts"})}),e.jsx(i,{className:l,onClick:t=>{o("portableBlock",{style:"cube"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-cube"})}),e.jsx(i,{className:l,onClick:t=>{o("spring",{}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-spring.released"})}),e.jsx(i,{className:l,onClick:t=>{o("monster",{which:"dalek",activated:"on",movement:"patrol-randomly-diagonal"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-dalek.1 hover:texture-animated-dalek"})}),e.jsx(i,{className:l,onClick:t=>{o("monster",{which:"turtle",activated:"on",movement:"clockwise",startDirection:"towards"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-turtle.towards.1 hover:texture-animated-turtle.towards"})}),e.jsx(i,{className:l,onClick:t=>{o("monster",{which:"skiHead",activated:"on",movement:"clockwise",startDirection:"towards",style:Math.random()>.5?"greenAndPink":"starsAndStripes"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-skiHead.greenAndPink.towards"})})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"crown",planet:"bookworld"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.bookworld"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"crown",planet:"egyptus"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.egyptus"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"crown",planet:"safari"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.safari"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"crown",planet:"penitentiary"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.penitentiary"})}),e.jsx(i,{className:l,onClick:t=>{o("pickup",{gives:"crown",planet:"blacktooth"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.blacktooth"})})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsxs(i,{className:l,onClick:t=>{o("pickup",{gives:"extra-life"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.2 left-m2 relative"})]}),e.jsxs(i,{className:l,onClick:t=>{o("pickup",{gives:"shield"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.🛡 left-m2 relative"})]}),e.jsxs(i,{className:l,onClick:t=>{o("pickup",{gives:"fast"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.⚡ left-m2 relative"})]}),e.jsxs(i,{className:l,onClick:t=>{o("pickup",{gives:"jumps"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.♨ left-m2 relative"})]})]}),e.jsx(f,{children:"game speed x:"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(p,{className:l,speed:.05,gameApi:s}),e.jsx(p,{className:l,speed:.2,gameApi:s}),e.jsx(p,{className:l,speed:.5,gameApi:s}),e.jsx(p,{className:l,speed:1,gameApi:s}),e.jsx(p,{className:l,speed:2,gameApi:s}),e.jsx(p,{className:l,speed:5,gameApi:s}),e.jsx(p,{className:l,speed:10,gameApi:s}),e.jsx(p,{className:l,speed:25,gameApi:s}),e.jsx(p,{className:l,speed:100,gameApi:s})]}),e.jsx(f,{children:"write to console:"}),e.jsxs("div",{className:"flex flex-row items-center flex-wrap",children:[e.jsx(i,{className:"flex-grow h-3",onClick:t=>{s&&(console.log(s.gameState),window.gs=s.gameState,console.log("gameState on window.gs")),t.currentTarget.blur()},children:"gameState"}),e.jsx(i,{className:"flex-grow h-3",onClick:t=>{if(s){const n=k(s.gameState)?.roomJson;window.roomJson=n,console.log("roomJson:",n),console.log("roomJson on window.roomJson")}t.currentTarget.blur()},children:"Room JSON"}),e.jsx(i,{className:"flex-grow h-3",onClick:t=>{s&&(window.room=s.currentRoom,console.log(s.currentRoom),console.log("currentRoom on window.room")),t.currentTarget.blur()},children:"Room state"}),e.jsxs(i,{className:"flex-grow",onClick:t=>{if(s){const n=M(s.gameState);if(n===void 0){console.log("no playable item");return}if(window.playable=n,console.log("currentCharacterName:",n),console.log("playable on window.playable"),n.id!=="headOverHeels"){const m=ce(n.id),u=s.gameState.characterRooms[m];console.log(m,"in room",u?.id,u?.items[m])}}t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-head.walking.right.2"}),e.jsx("span",{className:"sprite texture-heels.walking.right.2"})]})]})]})})})]})};export{Re as Cheats,g as GoToRoomButton,Re as default};
