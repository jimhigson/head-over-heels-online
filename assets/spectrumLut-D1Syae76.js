const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WebGPURenderer-BVCBuzga.js","assets/App-BL3yaVd2.js","assets/index-Bt_SVtc8.js","assets/index-CGdQGZAh.css","assets/colorToUniform-BXaCBwVl.js","assets/SharedSystems-DWlQircF.js","assets/Filter-B3BPfKAh.js","assets/RenderTexture-DJvHrFSc.js","assets/WebGLRenderer-iw4LQyGx.js"])))=>i.map(i=>d[i]);
import{m as H,E as O,l as ce,u as de,o as B,f as L,v as G,i,p as ue,D as M,q as he,T as $}from"./App-BL3yaVd2.js";import{_ as X}from"./index-Bt_SVtc8.js";const N=[];H.handleByNamedList(O.Environment,N);async function fe(n){if(!n)for(let e=0;e<N.length;e++){const r=N[e];if(r.value.test()){await r.value.load();return}}}let C;function ge(){if(typeof C=="boolean")return C;try{C=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{C=!1}return C}var J=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(J||{});class me{constructor(e){this.items=[],this._name=e}emit(e,r,t,s,a,o,d,u){const{name:f,items:c}=this;for(let g=0,w=c.length;g<w;g++)c[g][f](e,r,t,s,a,o,d,u);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const pe=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Q=class Z extends ce{constructor(e){super(),this.uid=de("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const r=[...pe,...this.config.runners??[]];this._addRunners(...r),this._unsafeEvalCheck()}async init(e={}){const r=e.skipExtensionImports===!0?!0:e.manageImports===!1;await fe(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...Z.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(e,r){let t=e;if(t instanceof B&&(t={container:t},r&&(L(G,"passing a second argument is deprecated, please use render options instead"),t.target=r.renderTexture)),t.target||(t.target=this.view.renderTarget),t.target===this.view.renderTarget&&(this._lastObjectRendered=t.container,t.clearColor??(t.clearColor=this.background.colorRgba),t.clear??(t.clear=this.background.clearBeforeRender)),t.clearColor){const s=Array.isArray(t.clearColor)&&t.clearColor.length===4;t.clearColor=s?t.clearColor:i.shared.setValue(t.clearColor).toArray()}t.transform||(t.container.updateLocalTransform(),t.transform=t.container.localTransform),t.container.visible&&(t.container.enableRenderGroup(),this.runners.prerender.emit(t),this.runners.renderStart.emit(t),this.runners.render.emit(t),this.runners.renderEnd.emit(t),this.runners.postrender.emit(t))}resize(e,r,t){const s=this.view.resolution;this.view.resize(e,r,t),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),t!==void 0&&t!==s&&this.runners.resolutionChange.emit(t)}clear(e={}){const r=this;e.target||(e.target=r.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=J.ALL);const{clear:t,clearColor:s,target:a}=e;i.shared.setValue(s??this.background.colorRgba),r.renderTarget.clear(a,t,i.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(r=>{this.runners[r]=new me(r)})}_addSystems(e){let r;for(r in e){const t=e[r];this._addSystem(t.value,t.name)}}_addSystem(e,r){const t=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=t,this._systemsHash[r]=t;for(const s in this.runners)this.runners[s].add(t);return this}_addPipes(e,r){const t=r.reduce((s,a)=>(s[a.name]=a.value,s),{});e.forEach(s=>{const a=s.value,o=s.name,d=t[o];this.renderPipes[o]=new a(this,d?new d:null),this.runners.destroy.add(this.renderPipes[o])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ue.release(),Object.values(this.runners).forEach(r=>{r.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!ge())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Q.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let ee=Q,T;function we(n){return T!==void 0||(T=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:n??ee.defaultOptions.failIfMajorPerformanceCaveat};try{if(!M.get().getWebGLRenderingContext())return!1;let t=M.get().createCanvas().getContext("webgl",e);const s=!!t?.getContextAttributes()?.stencil;if(t){const a=t.getExtension("WEBGL_lose_context");a&&a.loseContext()}return t=null,s}catch{return!1}})()),T}let k;async function be(n={}){return k!==void 0||(k=await(async()=>{const e=M.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),k}const Y=["webgl","webgpu","canvas"];async function ye(n){let e=[];n.preference?(e.push(n.preference),Y.forEach(a=>{a!==n.preference&&e.push(a)})):e=Y.slice();let r,t={};for(let a=0;a<e.length;a++){const o=e[a];if(o==="webgpu"&&await be()){const{WebGPURenderer:d}=await X(async()=>{const{WebGPURenderer:u}=await import("./WebGPURenderer-BVCBuzga.js");return{WebGPURenderer:u}},__vite__mapDeps([0,1,2,3,4,5,6,7]));r=d,t={...n,...n.webgpu};break}else if(o==="webgl"&&we(n.failIfMajorPerformanceCaveat??ee.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:d}=await X(async()=>{const{WebGLRenderer:u}=await import("./WebGLRenderer-iw4LQyGx.js");return{WebGLRenderer:u}},__vite__mapDeps([8,1,2,3,4,5,6,7]));r=d,t={...n,...n.webgl};break}else if(o==="canvas")throw t={...n},new Error("CanvasRenderer is not yet implemented")}if(delete t.webgpu,delete t.webgl,!r)throw new Error("No available renderer for the current environment");const s=new r;return await s.init(t),s}const te="8.14.3";class re{static init(){globalThis.__PIXI_APP_INIT__?.(this,te)}static destroy(){}}re.extension=O.Application;class ve{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,te)}destroy(){this._renderer=null}}ve.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"initHook",priority:-10};const ne=class j{constructor(...e){this.stage=new B,e[0]!==void 0&&L(G,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new B),this.renderer=await ye(e),j._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return L(G,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const t=j._plugins.slice(0);t.reverse(),t.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};ne._plugins=[];let _e=ne;H.handleByList(O.Application,_e._plugins);H.add(re);const q={pureBlack:new i("#000000"),shadow:new i("#264136"),midGrey:new i("#7C6E6C"),lightGrey:new i("#C0AFA9"),white:new i("#FFFFFF"),pastelBlue:new i("#5EAEFF"),metallicBlue:new i("#226FD0"),pink:new i("#EE7EE6"),moss:new i("#AD9E00"),redShadow:new i("#8E5944"),midRed:new i("#EA684F"),lightBeige:new i("#EE9F7F"),highlightBeige:new i("#FCC274"),alpha:new i("#BBB7E5"),replaceLight:new i("#0D99A1"),replaceDark:new i("#115F60")},se=.4,Se=.5,Ee=.7,xe=[1,Se,se,Ee],Ie=n=>{const[e,r,t]=n.toUint8RgbArray();return new i({r:e*.75,g:r*.75,b:t*.75})},Be=(n,e=se)=>{const[r,t,s]=n.toUint8RgbArray();return new i({r:r*e,g:t*e,b:s*e})},F=6;function*Ce(n,e,r,t=1){const s=2**F-1,a=Math.floor(n*s+.5),o=Math.floor(e*s+.5),d=Math.floor(r*s+.5);for(let u=-t;u<=t;u++)for(let f=-t;f<=t;f++)for(let c=-t;c<=t;c++){const g=a+u,w=o+f,_=d+c;if(g<0||g>s||w<0||w>s||_<0||_>s)continue;const A=Math.sqrt(u*u+f*f+c*c),W=_%8*64,l=Math.floor(_/8)*64,y=W+g,m=l+w;yield{x:y,y:m,distance:A}}}const v=(2**F)**(3/2),ae=v*v,Oe=n=>{const e=new Uint8Array(ae*4);for(const t of xe)for(const[s,a]of he(n)){const o=q[s];for(const{x:d,y:u,distance:f}of Ce(o.red*t,o.green*t,o.blue*t,2)){const c=u*v+d,g=e[c*4+3],w=Math.max(1,Math.floor(255-f/1.732*254));(g===0||w>g)&&(e[c*4+0]=Math.floor(a.red*t*255),e[c*4+1]=Math.floor(a.green*t*255),e[c*4+2]=Math.floor(a.blue*t*255),e[c*4+3]=w)}}for(let t=3;t<e.length;t+=4)e[t]>0&&(e[t]=255);return $.from({resource:e,width:v,height:v,scaleMode:"nearest",antialias:!1})},{floor:D,min:Ae}=Math,Pe=n=>{if(n instanceof Map)return n;const e=new Map,r=Object.entries(n);for(const[t,s]of r){const a=q[t],o=typeof s=="string"?q[s]:s;e.set(a,o)}return e},K={red:0,blue:0,green:0},Re=9;function Le(n){const e=Pe(n),r=new Uint8Array(ae*4).fill(255),t=e.keys().toArray(),s=e.values().map(l=>({red:D(l.red*255),green:D(l.green*255),blue:D(l.blue*255)})).toArray(),a=t.length,o=2**F,d=1/(o-1),u=new Array(a),f=new Array(a),c=[];let g=0;for(let l=0;l<o;l++){const y=new Array(a);for(let m=0;m<a;m++){const h=g-t[m].green;y[m]=h*h}c[l]=y,g+=d}const w=[];let _=0;for(let l=0;l<o;l++){const y=new Array(a);for(let m=0;m<a;m++){const h=_-t[m].red;y[m]=h*h}w[l]=y,_+=d}let A=0;for(let l=0;l<o;l++){const y=l%8*64,m=D(l/8)*64;for(let h=0;h<a;h++){const P=A-t[h].blue;u[h]=P*P}for(let h=0;h<o;h++){const P=c[h];let R=(m+h)*v+y<<2;for(let b=0;b<a;b++)f[b]=u[b]+P[b];for(let b=0;b<o;){const ie=w[b];let S=K,V=9999;for(let p=0;p<a;p++){const E=f[p]+ie[p];E<V&&(S=s[p],V=E)}let I=1;const oe=Ae(b+Re,o-1);for(let p=oe;p>b;p--){let E=K,U=9999;const le=w[p];for(let x=0;x<a;x++){const z=f[x]+le[x];z<U&&(E=s[x],U=z)}if(E===S){I=p-b+1;break}}for(let p=0;p<I;p++)r[R++]=S.red,r[R++]=S.green,r[R]=S.blue,R+=2;b+=I}}A+=d}return $.from({resource:r,width:v,height:v,scaleMode:"nearest",antialias:!1})}const Ge=Oe({moss:new i(65280),pink:new i(16711935),metallicBlue:new i(34952),pastelBlue:new i(65535),highlightBeige:new i(16776960),lightBeige:new i(8947712),midRed:new i(16711680),redShadow:new i(8912896),lightGrey:new i(16777215)});export{_e as A,J as C,ve as R,me as S,te as V,Ge as a,ee as b,Se as c,Oe as d,xe as e,Be as h,q as s,ge as u,Le as v,Ie as z};
