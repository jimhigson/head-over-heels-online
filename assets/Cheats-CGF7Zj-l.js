import{r as i,j as e}from"./index-CPuMHXZc.js";import{u as G,c as U,a as q,P as C,b as V,d as K,e as X,f as Q,g as W,h as Y,B as c,i as Z,C as A,j as ee,k as te,l as se,m as ae,n as oe,S as re}from"./ShowBoundingBoxSwitches-CbzxcU8Q.js";import{j as k,k as R,l as M,C as ne,n as le,q as ce,r as ie,t as de,w as me,S as ue,x as he,y as N,A as L,E as xe,F,H as pe,I as ge,J as fe,K as we}from"./App-l_VhA-SO.js";import{c as w}from"./changeCharacterRoom-8MRVH97e.js";var y="Collapsible",[je,Pe]=U(y),[be,S]=je(y),z=i.forwardRef((a,s)=>{const{__scopeCollapsible:l,open:r,defaultOpen:o,disabled:t,onOpenChange:n,...d}=a,[m=!1,x]=G({prop:r,defaultProp:o,onChange:n});return e.jsx(be,{scope:l,disabled:t,contentId:q(),open:m,onOpenToggle:i.useCallback(()=>x(j=>!j),[x]),children:e.jsx(C.div,{"data-state":T(m),"data-disabled":t?"":void 0,...d,ref:s})})});z.displayName=y;var $="CollapsibleTrigger",D=i.forwardRef((a,s)=>{const{__scopeCollapsible:l,...r}=a,o=S($,l);return e.jsx(C.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":T(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:s,onClick:V(a.onClick,o.onOpenToggle)})});D.displayName=$;var I="CollapsibleContent",J=i.forwardRef((a,s)=>{const{forceMount:l,...r}=a,o=S(I,a.__scopeCollapsible);return e.jsx(K,{present:l||o.open,children:({present:t})=>e.jsx(ve,{...r,ref:s,present:t})})});J.displayName=I;var ve=i.forwardRef((a,s)=>{const{__scopeCollapsible:l,present:r,children:o,...t}=a,n=S(I,l),[d,m]=i.useState(r),x=i.useRef(null),j=X(s,x),P=i.useRef(0),O=P.current,E=i.useRef(0),B=E.current,b=n.open||d,H=i.useRef(b),f=i.useRef(void 0);return i.useEffect(()=>{const u=requestAnimationFrame(()=>H.current=!1);return()=>cancelAnimationFrame(u)},[]),Q(()=>{const u=x.current;if(u){f.current=f.current||{transitionDuration:u.style.transitionDuration,animationName:u.style.animationName},u.style.transitionDuration="0s",u.style.animationName="none";const _=u.getBoundingClientRect();P.current=_.height,E.current=_.width,H.current||(u.style.transitionDuration=f.current.transitionDuration,u.style.animationName=f.current.animationName),m(r)}},[n.open,r]),e.jsx(C.div,{"data-state":T(n.open),"data-disabled":n.disabled?"":void 0,id:n.contentId,hidden:!b,...t,ref:j,style:{"--radix-collapsible-content-height":O?`${O}px`:void 0,"--radix-collapsible-content-width":B?`${B}px`:void 0,...a.style},children:b&&o})});function T(a){return a?"open":"closed"}const Ne=()=>{const a=k(),[s,l]=i.useState(a?.currentRoom?.id);return i.useEffect(()=>(l(a.currentRoom?.id),R({actionCreator:M,effect(o){l(o.payload.roomId)}})),[a]),s};function Ce({gameApi:a,className:s}){const[l,r]=i.useState(!1),o=Ne();if(a===void 0)return null;const t=Object.keys(a.campaign.rooms);return e.jsxs(W,{open:l,onOpenChange:r,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(c,{role:"combobox","aria-expanded":l,className:`justify-between ${s}`,children:[o||"Select a room",e.jsx("span",{className:`sprite ml-2 h-4 w-4 shrink-0 ${l?"texture-hud.char.X":"texture-hud.char.â¬‡"}`})]})}),e.jsx(Z,{className:"p-0 z-cheats",children:e.jsx(ne,{scaleFactor:1,children:e.jsxs(A,{className:"w-[--radix-popper-anchor-width]",children:[e.jsx(ee,{placeholder:"Room id"}),e.jsxs(te,{children:[e.jsx(se,{children:"No room found"}),e.jsx(ae,{children:t.map(n=>e.jsxs(oe,{value:n,className:o===n?"bg-moss":"",onSelect:d=>{a.changeRoom(d),r(!1)},children:[a.gameState.characterRooms.head?.id===n&&e.jsx("span",{className:"sprite m-1 texture-head.walking.towards.2"}),a.gameState.characterRooms.heels?.id===n&&e.jsx("span",{className:"sprite m-1 texture-heels.walking.towards.2"}),n]},n))})]})]})})})]})}const ke=a=>{i.useEffect(()=>{if(a===void 0)return;const s=t=>{const n=t.hash.substring(1);if(n!==""&&a.campaign.rooms[n]!==void 0)return t.hash.substring(1)};if(window.location.hash){const t=s(window.location);t!==void 0&&a.currentRoom?.id!==t&&a.changeRoom(t)}const l=t=>{const n=s(new URL(t.newURL));n!==void 0&&n!==a.currentRoom?.id&&a.changeRoom(n)},r=t=>{window.location.hash=t};window.addEventListener("hashchange",l);const o=R({actionCreator:M,effect(t){r(t.payload.roomId)}});return()=>{window.removeEventListener("hashchange",l),o()}},[a])},Re=()=>{const a=k();i.useEffect(()=>R({actionCreator:le,effect(l){const r=l.payload.item;if(ce("teleporter","doorFrame")(r)){const{toRoom:o}=r.config;a.changeRoom(o)}if(r.type==="lift"){const o=a.currentRoom?.roomAbove;o&&a.changeRoom(o)}if(r.type==="floorEdge"){const o=a.currentRoom?.roomBelow;o&&a.changeRoom(o)}console.log(r.id,"item (live):",r,`
state (shallow copy):`,{...r.state},`
position`,`(${r.state.position.x}, ${r.state.position.y}, ${r.state.position.z})`,`
stoodOnBy:`,Object.keys(r.state.stoodOnBy),`
standingOn:`,ie(r)?r.state.standingOnItemId:"n/a (not free to move)"),window.item=r}}))},h=({gameApi:a,speed:s,className:l})=>e.jsx(c,{className:l,onClick:r=>{a.gameState.gameSpeed=s,r.currentTarget.blur()},children:s.toString().replace(/^0\./,".")}),v=({gameApi:a,playableName:s})=>e.jsx(c,{className:"flex-1",onClick:l=>{if(a.gameState.currentCharacterName===s)return;const r=N(a.gameState)?.id;if(r===void 0)return;if(a.gameState.currentCharacterName=s,s==="headOverHeels"){const t=F("head",a.gameState.characterRooms.head?.items),n=F("heels",a.gameState.characterRooms.heels?.items);if(!t||!n)console.log("cant summon headOverHeels - one of the individuals is not in the game to combine");else{w({playableItem:t,gameState:a.gameState,changeType:"level-select",toRoomId:"finalroom"}),w({playableItem:n,gameState:a.gameState,changeType:"level-select",toRoomId:"finalroom"}),pe(a.gameState);const d=a.gameState.characterRooms.headOverHeels.items.headOverHeels;w({playableItem:d,gameState:a.gameState,changeType:"level-select",toRoomId:r})}}const o=ge(a.gameState,s);if(o===void 0){console.error(`can't summon ${s} who is not in the game`);return}w({playableItem:o,gameState:a.gameState,changeType:"level-select",toRoomId:r}),l.currentTarget.blur()},children:s==="headOverHeels"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sprite texture-head.walking.right.2 [button:hover_&]:texture-animated-head.walking.towards"}),"over",e.jsx("span",{className:"sprite texture-heels.walking.right.2 [button:hover_&]:texture-animated-heels.walking.towards"})]}):e.jsx("span",{className:`sprite texture-${s}.walking.right.2 [button:hover_&]:texture-animated-${s}.walking.towards`})}),p=({gameApi:a,roomId:s,children:l})=>e.jsx(c,{className:"flex-1",onClick:r=>{a.changeRoom(s),r.currentTarget.blur()},children:l||s}),g=({children:a})=>e.jsx("h4",{className:"bg-redShadow zx:bg-zxMagenta pl-1",children:a}),Oe=a=>{const s=k();Re();const l=de(),r=me();ke(s);const o=(t,n)=>{const{gameState:d}=s,m=L(d);if(m===void 0)return;const x=N(d);x!==void 0&&fe({gameState:d,room:x,itemType:t,config:n,position:{...m.state.position,z:m.state.position.z+we.h*2}})};return e.jsxs(z,{children:[e.jsx(D,{className:"absolute bottom-0 right-1 flex flex-col z-cheats text-midRed hover:text-metallicBlue ",onClick:t=>t.currentTarget.blur(),children:e.jsx("span",{className:"sprite texture-helicopterBug.1 hover:texture-animated-helicopterBug zx:sprite-revert-to-two-tone"})}),e.jsx(J,{children:e.jsxs("div",{className:"absolute [--scale:1] [--block:8px] bottom-[48px] max-h-[calc(100vh-48px)] right-1 flex flex-col w-[500px] zx:[&_.sprite]:sprite-revert-to-white overflow-y-scroll z-cheats",style:{"--scale":2},children:[e.jsx(g,{children:"room select:"}),e.jsx(Ce,{gameApi:s,className:"w-full"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(p,{gameApi:s,roomId:"blacktooth1head",children:"Starting room"}),e.jsx(p,{gameApi:s,roomId:"laboratory",children:"To the lab!"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(p,{gameApi:s,roomId:"blacktooth45market",children:"Market"}),e.jsx(p,{gameApi:s,roomId:"moonbase1",children:"Moonbase"}),e.jsx(p,{gameApi:s,roomId:"egyptus1",children:"Egyptus"}),e.jsx(p,{gameApi:s,roomId:"safari1",children:"Safari"}),e.jsx(p,{gameApi:s,roomId:"bookworld1",children:"Bookworld"}),e.jsx(p,{gameApi:s,roomId:"penitentiary1",children:"Penitentiary"})]}),e.jsx(g,{children:"render:"}),e.jsxs("div",{className:"flex flex-row items-center gap-x-2 justify-center pb-1 pt-1 bg-shadow text-white",children:[e.jsx(re,{}),e.jsx(ue,{value:l,onClick:(t,n)=>{r(he(n)),t.currentTarget.blur()}}),e.jsx("label",{htmlFor:"showshadows",children:"shadow masks"})]}),e.jsx(g,{children:"summon character:"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(v,{gameApi:s,playableName:"head"}),e.jsx(v,{gameApi:s,playableName:"heels"}),e.jsx(v,{gameApi:s,playableName:"headOverHeels"})]}),e.jsx(g,{children:"summon item:"}),e.jsxs("div",{className:"flex flex-row items-center flex-wrap",children:[e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"bag"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-bag"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"hooter"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-hooter"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"doughnuts"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-doughnuts"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("portableBlock",{style:"cube"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-cube"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("spring",{}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-spring.released"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("monster",{which:"dalek",activated:"on",movement:"patrol-randomly-diagonal"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-dalek.1 hover:texture-animated-dalek"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("monster",{which:"turtle",activated:"on",movement:"clockwise",startDirection:"towards"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-turtle.towards.1 hover:texture-animated-turtle.towards"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("monster",{which:"skiHead",activated:"on",movement:"clockwise",startDirection:"towards",style:Math.random()>.5?"greenAndPink":"starsAndStripes"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-skiHead.greenAndPink.towards"})})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"crown",planet:"bookworld"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.bookworld"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"crown",planet:"egyptus"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.egyptus"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"crown",planet:"safari"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.safari"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"crown",planet:"penitentiary"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.penitentiary"})}),e.jsx(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"crown",planet:"blacktooth"}),t.currentTarget.blur()},children:e.jsx("span",{className:"sprite texture-crown.blacktooth"})})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsxs(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"extra-life"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.2 left-m2 relative"})]}),e.jsxs(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"shield"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.ðŸ›¡ left-m2 relative"})]}),e.jsxs(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"fast"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.âš¡ left-m2 relative"})]}),e.jsxs(c,{className:"flex-1",onClick:t=>{o("pickup",{gives:"jumps"}),t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-whiteRabbit"}),e.jsx("span",{className:"sprite texture-hud.char.â™¨ left-m2 relative"})]})]}),e.jsx(g,{children:"game speed x:"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(h,{className:"flex-1",speed:.05,gameApi:s}),e.jsx(h,{className:"flex-1",speed:.2,gameApi:s}),e.jsx(h,{className:"flex-1",speed:.5,gameApi:s}),e.jsx(h,{className:"flex-1",speed:1,gameApi:s}),e.jsx(h,{className:"flex-1",speed:2,gameApi:s}),e.jsx(h,{className:"flex-1",speed:5,gameApi:s}),e.jsx(h,{className:"flex-1",speed:10,gameApi:s}),e.jsx(h,{className:"flex-1",speed:25,gameApi:s}),e.jsx(h,{className:"flex-1",speed:100,gameApi:s})]}),e.jsx(g,{children:"write to console:"}),e.jsxs("div",{className:"flex flex-row items-center flex-wrap",children:[e.jsx(c,{className:"flex-grow",onClick:t=>{s&&(console.log(s.gameState),window.gs=s.gameState,console.log("gameState on window.gs")),t.currentTarget.blur()},children:"gameState"}),e.jsx(c,{className:"flex-grow",onClick:t=>{if(s){const n=N(s.gameState)?.roomJson;window.roomJson=n,console.log("roomJson:",n),console.log("roomJson on window.roomJson")}t.currentTarget.blur()},children:"Room JSON"}),e.jsx(c,{className:"flex-grow",onClick:t=>{s&&(window.room=s.currentRoom,console.log(s.currentRoom),console.log("currentRoom on window.room")),t.currentTarget.blur()},children:"Room state"}),e.jsxs(c,{className:"flex-grow",onClick:t=>{if(s){const n=L(s.gameState);if(n===void 0){console.log("no playable item");return}if(window.playable=n,console.log("currentCharacterName:",n),console.log("playable on window.playable"),n.id!=="headOverHeels"){const d=xe(n.id),m=s.gameState.characterRooms[d];console.log(d,"in room",m?.id,m?.items[d])}}t.currentTarget.blur()},children:[e.jsx("span",{className:"sprite texture-head.walking.right.2"}),e.jsx("span",{className:"sprite texture-heels.walking.right.2"})]})]})]})})]})};export{Oe as Cheats,p as GoToRoomButton,Oe as default};
