import{c as m,u as d,s as g}from"./App-CNRy90Yr.js";import"./index-C9y6bIdq.js";const p={jail:["bars"],blacktooth:["plain","plain","armour","shield","shield","armour"],bookworld:["book","book","cowboy"],egyptus:["hieroglyphics","hieroglyphics","hieroglyphics","sarcophagus","sarcophagus"],market:["passage","more-fruits","more-fruits","more-fruits","fruits"],moonbase:["coil","window1","window2","window3"],penitentiary:["loop","loop","skeleton"],safari:["wall","shield","wall","window","window","wall","shield"]},y=(o,e)=>{const t=p[o];return t[e%t.length]},r=(o,e)=>new Array(8).fill(e).map((t,i)=>y(o,i)),u={awayWall:{type:"wall",config:{direction:"away",times:{x:8},tiles:r("blacktooth",8)},position:{x:0,y:8,z:0}},leftWall:{type:"wall",config:{direction:"left",times:{y:8},tiles:r("blacktooth",8)},position:{x:8,y:0,z:0}},towardsWall:{type:"wall",config:{direction:"towards",times:{x:8}},position:{x:0,y:0,z:0}},rightWall:{type:"wall",config:{direction:"right",times:{y:8}},position:{x:0,y:0,z:0}}},h={planet:"blacktooth",color:{hue:"cyan",shade:"basic"},floor:"blacktooth",items:{...u},size:{x:8,y:8}},s="untitledRoom",w={...h,id:s},f={campaignInProgress:{name:"new campaign",rooms:{[s]:w}},nextItemId:0,currentlyEditingRoomId:s,tool:{type:"pointer"}},l=m({name:"levelEditor",initialState:f,reducers:{setTool(o,{payload:e}){const t=o;t.tool=e},changeRoomColour(o,{payload:e}){const t=o,i=t.campaignInProgress.rooms[t.currentlyEditingRoomId].color;Object.assign(i,e)},changeRoomScenery(o,{payload:e}){const t=o,i=t.campaignInProgress.rooms[t.currentlyEditingRoomId];i.planet=e,g.includes(i.floor)&&(i.floor=e);for(const n of Object.values(i.items))n.type==="wall"&&(n.config.direction==="away"||n.config.direction==="left")&&(n.config.tiles=r(e,n.config.tiles.length))},applyToolAtPosition(o,{payload:{blockPosition:e}}){const t=o,{tool:i}=t;switch(i?.type){case"item":{const n=i.item,a=t.campaignInProgress.rooms[t.currentlyEditingRoomId],c=`item${n.type}#${t.nextItemId}`;t.nextItemId++,a.items[c]={...n,position:e}}}},injected(){}},selectors:{selectCurrentEditingRoomJson:o=>o.campaignInProgress.rooms[o.currentlyEditingRoomId],selectCurrentEditingRoomColour:o=>o.campaignInProgress.rooms[o.currentlyEditingRoomId].color,selectCurrentEditingRoomScenery:o=>o.campaignInProgress.rooms[o.currentlyEditingRoomId].planet,selectTool:o=>o.tool}}),{applyToolAtPosition:E,changeRoomColour:S,changeRoomScenery:b,injected:x,setTool:k}=l.actions,{selectCurrentEditingRoomJson:C,selectTool:P,selectCurrentEditingRoomColour:T,selectCurrentEditingRoomScenery:W}=l.selectors,j=d.withTypes();export{E as applyToolAtPosition,S as changeRoomColour,b as changeRoomScenery,f as initialLevelEditorSliceState,x as injected,l as levelEditorSlice,T as selectCurrentEditingRoomColour,C as selectCurrentEditingRoomJson,W as selectCurrentEditingRoomScenery,P as selectTool,k as setTool,j as useAppSelectorWithLevelEditorSlice};
